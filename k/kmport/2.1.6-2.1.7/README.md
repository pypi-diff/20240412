# Comparing `tmp/kmport-2.1.6.tar.gz` & `tmp/kmport-2.1.7.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "kmport-2.1.6.tar", last modified: Wed Apr 10 04:44:56 2024, max compression
+gzip compressed data, was "kmport-2.1.7.tar", last modified: Fri Apr 12 04:52:28 2024, max compression
```

## Comparing `kmport-2.1.6.tar` & `kmport-2.1.7.tar`

### file list

```diff
@@ -1,14 +1,14 @@
-drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-10 04:44:56.556139 kmport-2.1.6/
--rw-rw-r--   0 kage      (1000) kage      (1000)     1066 2021-12-15 17:55:20.000000 kmport-2.1.6/LICENSE
--rw-r--r--   0 kage      (1000) kage      (1000)    26011 2024-04-10 04:44:56.556139 kmport-2.1.6/PKG-INFO
--rw-rw-r--   0 kage      (1000) kage      (1000)    25593 2022-12-30 02:48:56.000000 kmport-2.1.6/README.md
-drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-10 04:44:56.555139 kmport-2.1.6/kmport/
--rw-r--r--   0 kage      (1000) kage      (1000)   304245 2024-04-10 04:44:02.000000 kmport-2.1.6/kmport/__init__.py
-drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-10 04:44:56.555139 kmport-2.1.6/kmport.egg-info/
--rw-rw-r--   0 kage      (1000) kage      (1000)    26011 2024-04-10 04:44:56.000000 kmport-2.1.6/kmport.egg-info/PKG-INFO
--rw-rw-r--   0 kage      (1000) kage      (1000)      180 2024-04-10 04:44:56.000000 kmport-2.1.6/kmport.egg-info/SOURCES.txt
--rw-rw-r--   0 kage      (1000) kage      (1000)        1 2024-04-10 04:44:56.000000 kmport-2.1.6/kmport.egg-info/dependency_links.txt
--rw-rw-r--   0 kage      (1000) kage      (1000)        7 2024-04-10 04:44:56.000000 kmport-2.1.6/kmport.egg-info/top_level.txt
--rw-rw-r--   0 kage      (1000) kage      (1000)      104 2021-12-15 17:55:20.000000 kmport-2.1.6/pyproject.toml
--rw-r--r--   0 kage      (1000) kage      (1000)       38 2024-04-10 04:44:56.556139 kmport-2.1.6/setup.cfg
--rw-rw-r--   0 kage      (1000) kage      (1000)     1975 2022-03-19 17:08:26.000000 kmport-2.1.6/setup.py
+drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-12 04:52:28.252897 kmport-2.1.7/
+-rw-rw-r--   0 kage      (1000) kage      (1000)     1066 2021-12-15 17:55:20.000000 kmport-2.1.7/LICENSE
+-rw-r--r--   0 kage      (1000) kage      (1000)    26011 2024-04-12 04:52:28.252897 kmport-2.1.7/PKG-INFO
+-rw-rw-r--   0 kage      (1000) kage      (1000)    25593 2022-12-30 02:48:56.000000 kmport-2.1.7/README.md
+drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-12 04:52:28.251896 kmport-2.1.7/kmport/
+-rw-r--r--   0 kage      (1000) kage      (1000)   304513 2024-04-12 04:51:45.000000 kmport-2.1.7/kmport/__init__.py
+drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-12 04:52:28.251896 kmport-2.1.7/kmport.egg-info/
+-rw-rw-r--   0 kage      (1000) kage      (1000)    26011 2024-04-12 04:52:28.000000 kmport-2.1.7/kmport.egg-info/PKG-INFO
+-rw-rw-r--   0 kage      (1000) kage      (1000)      180 2024-04-12 04:52:28.000000 kmport-2.1.7/kmport.egg-info/SOURCES.txt
+-rw-rw-r--   0 kage      (1000) kage      (1000)        1 2024-04-12 04:52:28.000000 kmport-2.1.7/kmport.egg-info/dependency_links.txt
+-rw-rw-r--   0 kage      (1000) kage      (1000)        7 2024-04-12 04:52:28.000000 kmport-2.1.7/kmport.egg-info/top_level.txt
+-rw-rw-r--   0 kage      (1000) kage      (1000)      104 2021-12-15 17:55:20.000000 kmport-2.1.7/pyproject.toml
+-rw-r--r--   0 kage      (1000) kage      (1000)       38 2024-04-12 04:52:28.252897 kmport-2.1.7/setup.cfg
+-rw-rw-r--   0 kage      (1000) kage      (1000)     1975 2022-03-19 17:08:26.000000 kmport-2.1.7/setup.py
```

### Comparing `kmport-2.1.6/LICENSE` & `kmport-2.1.7/LICENSE`

 * *Files identical despite different names*

### Comparing `kmport-2.1.6/PKG-INFO` & `kmport-2.1.7/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kmport
-Version: 2.1.6
+Version: 2.1.7
 Summary: Extended import function
 Home-page: https://github.com/kagepark/Import
 Author: Kage Park
 License: MIT
 Classifier: Programming Language :: Python :: 2
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: MIT License
```

### Comparing `kmport-2.1.6/README.md` & `kmport-2.1.7/README.md`

 * *Files identical despite different names*

### Comparing `kmport-2.1.6/kmport/__init__.py` & `kmport-2.1.7/kmport/__init__.py`

 * *Files 2% similar despite different names*

```diff
@@ -5075,13942 +5075,13959 @@
 00013d20: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
 00013d30: 2020 2020 2020 2020 2020 2020 2020 2067                 g
 00013d40: 6c6f 6261 6c65 6e76 5b6e 616d 655d 3d69  lobalenv[name]=i
 00013d50: 6d70 6f72 745f 6d6f 6475 6c65 2827 7b7d  mport_module('{}
 00013d60: 2e7b 7d27 2e66 6f72 6d61 7428 6d6f 6475  .{}'.format(modu
 00013d70: 6c65 2c63 6c61 7373 5f6e 616d 6529 290a  le,class_name)).
 00013d80: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00013d90: 2020 2020 2020 2020 2020 676c 6f62 616c            global
-00013da0: 656e 765b 6e61 6d65 5d3d 696d 706f 7274  env[name]=import
-00013db0: 5f6d 6f64 756c 6528 6d6f 6475 6c65 290a  _module(module).
-00013dc0: 2020 2020 2020 2020 7265 7475 726e 2077          return w
-00013dd0: 696c 6463 6172 642c 6d6f 6475 6c65 2023  ildcard,module #
-00013de0: 204c 6f61 6465 642e 2053 6f20 7265 7475   Loaded. So retu
-00013df0: 726e 2077 696c 6463 6172 6420 696e 666f  rn wildcard info
-00013e00: 726d 6174 696f 6e0a 2020 2020 6578 6365  rmation.    exce
-00013e10: 7074 2041 7474 7269 6275 7465 4572 726f  pt AttributeErro
-00013e20: 723a 2023 2054 7279 204c 6f61 6469 6e67  r: # Try Loading
-00013e30: 206c 6f6f 7065 6420 4d6f 6475 6c65 2f43   looped Module/C
-00013e40: 6c61 7373 2074 6865 6e20 6967 6e6f 7265  lass then ignore
-00013e50: 2020 6f72 2057 726f 6e67 2064 6566 696e    or Wrong defin
-00013e60: 650a 2020 2020 2020 2020 7265 7475 726e  e.        return
-00013e70: 2030 2c6d 6f64 756c 650a 2020 2020 6578   0,module.    ex
-00013e80: 6365 7074 2049 6d70 6f72 7445 7272 6f72  cept ImportError
-00013e90: 3a20 2320 496d 706f 7274 2065 7272 6f72  : # Import error
-00013ea0: 2074 6865 6e20 7472 7920 696e 7374 616c   then try instal
-00013eb0: 6c0a 2020 2020 2020 2020 7265 7475 726e  l.        return
-00013ec0: 2031 2c6d 6f64 756c 650a 0a64 6566 2049   1,module..def I
-00013ed0: 6d70 6f72 7428 2a69 6e70 732c 2a2a 6f70  mport(*inps,**op
-00013ee0: 7473 293a 0a20 2020 2027 2727 0a20 2020  ts):.    '''.   
-00013ef0: 2062 6173 6963 2066 756e 6374 696f 6e20   basic function 
-00013f00: 6f66 2069 6d70 6f72 740a 2020 2020 6966  of import.    if
-00013f10: 206e 6f74 2066 6f75 6e64 2074 6865 206d   not found the m
-00013f20: 6f64 756c 6520 7468 656e 2061 7574 6f6d  odule then autom
-00013f30: 6174 6963 616c 6c20 696e 7374 616c 6c0a  aticall install.
-00013f40: 2020 2020 7665 7273 696f 6e20 6368 6563      version chec
-00013f50: 6b20 616e 6420 7570 6772 6164 652c 2072  k and upgrade, r
-00013f60: 6569 6e73 7461 6c6c 2061 6363 6f72 6469  einstall accordi
-00013f70: 6e67 2074 6f20 7468 6520 7665 7273 696f  ng to the versio
-00013f80: 6e0a 2020 2020 7375 7070 6f72 7420 7265  n.    support re
-00013f90: 7175 6972 656d 656e 7420 6669 6c65 730a  quirement files.
-00013fa0: 0a20 2020 2069 6e70 7320 6861 7320 2272  .    inps has "r
-00013fb0: 6571 7569 7265 203c 7265 7175 6972 6520  equire <require 
-00013fc0: 6669 6c65 3e22 2074 6865 6e20 696e 7374  file>" then inst
-00013fd0: 616c 6c20 7468 6520 616c 6c20 7265 7175  all the all requ
-00013fe0: 6972 6520 6669 6c65 7320 696e 203c 7265  ire files in <re
-00013ff0: 7175 6972 6520 6669 6c65 3e0a 2020 2020  quire file>.    
-00014000: 496d 706f 7274 2827 3c6d 6f64 756c 6520  Import('<module 
-00014010: 6e61 6d65 3e20 203e 3d20 3c76 6572 7369  name>  >= <versi
-00014020: 6f6e 3e27 2920 3a20 4368 6563 6b20 7665  on>') : Check ve
-00014030: 7273 696f 6e20 616e 6420 6c6f 7765 7220  rsion and lower 
-00014040: 7468 656e 2061 7574 6f6d 6174 6963 616c  then automatical
-00014050: 6c20 7570 6772 6164 6520 0a20 2020 2049  l upgrade .    I
-00014060: 6d70 6f72 7428 273c 6d6f 6475 6c65 206e  mport('<module n
-00014070: 616d 653e 2020 3d3d 203c 7665 7273 696f  ame>  == <versio
-00014080: 6e3e 2729 203a 2043 6865 636b 2076 6572  n>') : Check ver
-00014090: 7369 6f6e 2061 6e64 2064 6966 6665 7265  sion and differe
-000140a0: 6e74 2074 6865 6e20 6175 746f 6d61 7469  nt then automati
-000140b0: 6361 6c6c 2072 6569 6e73 7461 6c6c 2077  call reinstall w
-000140c0: 6974 6820 7468 6520 7665 7273 696f 6e0a  ith the version.
-000140d0: 2020 2020 496d 706f 7274 2827 3c6d 6f64      Import('<mod
-000140e0: 756c 6520 6e61 6d65 3e27 2c70 6174 683d  ule name>',path=
-000140f0: 2741 4141 2c42 4242 2c43 4343 4327 2920  'AAA,BBB,CCCC') 
-00014100: 3a20 696d 706f 7274 203c 6d6f 6475 6c65  : import <module
-00014110: 206e 616d 653e 2066 726f 6d20 6465 6661   name> from defa
-00014120: 756c 7420 616e 6420 6578 7472 6120 4141  ult and extra AA
-00014130: 4120 616e 6420 4242 4220 616e 6420 4343  A and BBB and CC
-00014140: 432e 0a20 2020 202d 7061 7468 3d20 2020  C..    -path=   
-00014150: 2020 2020 3a20 7365 6172 6368 696e 6720      : searching 
-00014160: 616e 6420 7468 6520 6d6f 6475 6c65 2069  and the module i
-00014170: 6e20 7468 6520 6578 7472 6120 7061 7468  n the extra path
-00014180: 2028 7365 7065 7261 7465 2077 6974 6820   (seperate with 
-00014190: 272c 2720 6f72 2027 3a27 2029 0a20 2020  ',' or ':' ).   
-000141a0: 202d 666f 7263 653d 5472 7565 2020 3a20   -force=True  : 
-000141b0: 756e 6c6f 6164 2061 6e64 206c 6f61 6420  unload and load 
-000141c0: 6167 6169 6e20 7768 656e 2061 6c72 6561  again when alrea
-000141d0: 6479 206c 6f61 6465 6420 2864 6566 6175  dy loaded (defau
-000141e0: 6c74 3a20 4661 6c73 6529 0a20 2020 202d  lt: False).    -
-000141f0: 7265 6c6f 6164 3d54 7275 6520 3a20 7275  reload=True : ru
-00014200: 6e20 7265 6c6f 6164 2077 6865 6e20 616c  n reload when al
-00014210: 7265 6164 7920 6c6f 6164 6564 2028 6465  ready loaded (de
-00014220: 6661 756c 743a 2046 616c 7365 290a 2020  fault: False).  
-00014230: 2020 2d75 6e6c 6f61 643d 5472 7565 203a    -unload=True :
-00014240: 2075 6e6c 6f61 6420 6d6f 6475 6c65 2028   unload module (
-00014250: 6465 6661 756c 7420 3a20 4661 6c73 6529  default : False)
-00014260: 0a20 2020 202d 6572 723d 5472 7565 2020  .    -err=True  
-00014270: 2020 3a20 7368 6f77 2069 6e73 7461 6c6c    : show install
-00014280: 206f 7220 6c6f 6164 696e 6720 6572 726f   or loading erro
-00014290: 7220 2864 6566 6175 6c74 3a20 4661 6c73  r (default: Fals
-000142a0: 6529 0a20 2020 202d 6462 673d 5472 7565  e).    -dbg=True
-000142b0: 2020 2020 3a20 7368 6f77 2063 6f6d 6d65      : show comme
-000142c0: 6e74 2028 6465 6661 756c 7420 3a20 4661  nt (default : Fa
-000142d0: 6c73 6529 0a20 2020 202d 696e 7374 616c  lse).    -instal
-000142e0: 6c5f 6163 636f 756e 743d 3a20 272d 2d75  l_account=: '--u
-000142f0: 7365 7227 2c27 7573 6572 272c 276d 7961  ser','user','mya
-00014300: 6363 6f75 6e74 272c 2761 6363 6f75 6e74  ccount','account
-00014310: 272c 6d79 7365 6c66 2074 6865 6e20 696e  ',myself then in
-00014320: 7374 616c 6c20 6174 206d 7920 6c6f 6361  stall at my loca
-00014330: 6c20 6163 636f 756e 740a 2020 2020 2020  l account.      
-00014340: 2020 2020 2020 2020 2020 2064 6566 6175             defau
-00014350: 6c74 3a20 496e 7374 616c 6c20 6279 2053  lt: Install by S
-00014360: 7973 7465 6d20 6465 6661 756c 7420 7365  ystem default se
-00014370: 7474 696e 670a 0a20 2020 2027 2727 0a20  tting..    '''. 
-00014380: 2020 2067 6c6f 6261 6c65 6e76 3d6f 7074     globalenv=opt
-00014390: 732e 6765 7428 2767 6c6f 6261 6c65 6e76  s.get('globalenv
-000143a0: 272c 6469 6374 2869 6e73 7065 6374 2e67  ',dict(inspect.g
-000143b0: 6574 6d65 6d62 6572 7328 696e 7370 6563  etmembers(inspec
-000143c0: 742e 7374 6163 6b28 295b 315d 5b30 5d29  t.stack()[1][0])
-000143d0: 295b 2266 5f67 6c6f 6261 6c73 225d 2920  )["f_globals"]) 
-000143e0: 2320 4765 7420 6d79 2070 6172 656e 7427  # Get my parent'
-000143f0: 7320 676c 6f62 616c 7328 290a 2020 2020  s globals().    
-00014400: 666f 7263 653d 6f70 7473 2e67 6574 2827  force=opts.get('
-00014410: 666f 7263 6527 2c4e 6f6e 6529 2023 2075  force',None) # u
-00014420: 6e6c 6f61 6420 616e 6420 6c6f 6164 2061  nload and load a
-00014430: 6761 696e 2077 6865 6e20 616c 7265 6164  gain when alread
-00014440: 7920 6c6f 6164 6564 2028 666f 7263 653d  y loaded (force=
-00014450: 5472 7565 290a 2020 2020 7265 5f6c 6f61  True).    re_loa
-00014460: 643d 6f70 7473 2e67 6574 2827 7265 6c6f  d=opts.get('relo
-00014470: 6164 272c 4e6f 6e65 2920 2320 2072 756e  ad',None) #  run
-00014480: 2072 656c 6f61 6420 7768 656e 2061 6c72   reload when alr
-00014490: 6561 6479 206c 6f61 6465 640a 2020 2020  eady loaded.    
-000144a0: 756e 6c6f 6164 3d6f 7074 732e 6765 7428  unload=opts.get(
-000144b0: 2775 6e6c 6f61 6427 2c46 616c 7365 2920  'unload',False) 
-000144c0: 2320 756e 6c6f 6164 206d 6f64 756c 6520  # unload module 
-000144d0: 7768 656e 2054 7275 650a 2020 2020 6572  when True.    er
-000144e0: 723d 6f70 7473 2e67 6574 2827 6572 7227  r=opts.get('err'
-000144f0: 2c46 616c 7365 2920 2320 7368 6f77 2069  ,False) # show i
-00014500: 6e73 7461 6c6c 206f 7220 6c6f 6164 696e  nstall or loadin
-00014510: 6720 6572 726f 7220 7768 656e 2054 7275  g error when Tru
-00014520: 650a 2020 2020 6465 6661 756c 743d 6f70  e.    default=op
-00014530: 7473 2e67 6574 2827 6465 6661 756c 7427  ts.get('default'
-00014540: 2c46 616c 7365 290a 2020 2020 6462 673d  ,False).    dbg=
-00014550: 6f70 7473 2e67 6574 2827 6462 6727 2c46  opts.get('dbg',F
-00014560: 616c 7365 2920 2320 7368 6f77 2063 6f6d  alse) # show com
-00014570: 6d65 6e74 2077 6865 6e20 5472 7565 0a20  ment when True. 
-00014580: 2020 2061 7574 6f5f 696e 7374 616c 6c3d     auto_install=
-00014590: 6f70 7473 2e67 6574 2827 6175 746f 5f69  opts.get('auto_i
-000145a0: 6e73 7461 6c6c 272c 5472 7565 2920 2320  nstall',True) # 
-000145b0: 6966 206e 6f74 2066 6f75 6e64 2074 6865  if not found the
-000145c0: 206d 6f64 756c 6520 7468 656e 2061 7574   module then aut
-000145d0: 6f6d 6174 6963 616c 6c79 2069 6e73 7461  omatically insta
-000145e0: 6c6c 0a20 2020 2072 6571 7569 7265 6d65  ll.    requireme
-000145f0: 6e74 733d 6f70 7473 2e67 6574 2827 7265  nts=opts.get('re
-00014600: 7175 6972 656d 656e 7473 2729 0a20 2020  quirements').   
-00014610: 2023 696e 7374 616c 6c5f 6163 636f 756e   #install_accoun
-00014620: 743d 6f70 7473 2e67 6574 2827 696e 7374  t=opts.get('inst
-00014630: 616c 6c5f 6163 636f 756e 7427 2c27 2d2d  all_account','--
-00014640: 7573 6572 2729 0a20 2020 2069 6e73 7461  user').    insta
-00014650: 6c6c 5f61 6363 6f75 6e74 3d6f 7074 732e  ll_account=opts.
-00014660: 6765 7428 2769 6e73 7461 6c6c 5f61 6363  get('install_acc
-00014670: 6f75 6e74 272c 2727 2920 2320 272d 2d75  ount','') # '--u
-00014680: 7365 7227 2c27 7573 6572 272c 276d 7961  ser','user','mya
-00014690: 6363 6f75 6e74 272c 2761 6363 6f75 6e74  ccount','account
-000146a0: 272c 6d79 7365 6c66 2074 6865 6e20 696e  ',myself then in
-000146b0: 7374 616c 6c20 6174 206d 7920 6c6f 6361  stall at my loca
-000146c0: 6c20 6163 636f 756e 740a 2020 2020 696e  l account.    in
-000146d0: 7374 616c 6c5f 6e61 6d65 3d6f 7074 732e  stall_name=opts.
-000146e0: 6765 7428 2769 6e73 7461 6c6c 5f6e 616d  get('install_nam
-000146f0: 6527 290a 0a20 2020 2023 4170 7065 6e64  e')..    #Append
-00014700: 204d 6f64 756c 6520 5061 7468 0a20 2020   Module Path.   
-00014710: 2076 6972 7475 616c 5f65 6e76 3d6f 732e   virtual_env=os.
-00014720: 656e 7669 726f 6e2e 6765 7428 2756 4952  environ.get('VIR
-00014730: 5455 414c 5f45 4e56 2729 0a20 2020 2065  TUAL_ENV').    e
-00014740: 6e76 5f62 6173 655f 6469 723d 7669 7274  nv_base_dir=virt
-00014750: 7561 6c5f 656e 7620 6966 2076 6972 7475  ual_env if virtu
-00014760: 616c 5f65 6e76 2065 6c73 6520 272f 7573  al_env else '/us
-00014770: 7227 0a20 2020 2062 6173 655f 6c69 625f  r'.    base_lib_
-00014780: 7061 7468 3d5b 5d0a 2020 2020 7079 5f76  path=[].    py_v
-00014790: 6572 3d50 7956 6572 2829 0a20 2020 2066  er=PyVer().    f
-000147a0: 6f72 2069 2069 6e20 5b27 6c69 622f 7079  or i in ['lib/py
-000147b0: 7468 6f6e 7b7d 2f73 6974 652d 7061 636b  thon{}/site-pack
-000147c0: 6167 6573 272e 666f 726d 6174 2870 795f  ages'.format(py_
-000147d0: 7665 7229 2c27 6c69 6236 342f 7079 7468  ver),'lib64/pyth
-000147e0: 6f6e 7b7d 2f73 6974 652d 7061 636b 6167  on{}/site-packag
-000147f0: 6573 272e 666f 726d 6174 2870 795f 7665  es'.format(py_ve
-00014800: 7229 2c27 6c6f 6361 6c2f 7079 7468 6f6e  r),'local/python
-00014810: 7b7d 2f73 6974 652d 7061 636b 6167 6573  {}/site-packages
-00014820: 272e 666f 726d 6174 2870 795f 7665 7229  '.format(py_ver)
-00014830: 2c27 6c6f 6361 6c2f 6c69 622f 7079 7468  ,'local/lib/pyth
-00014840: 6f6e 7b7d 2f73 6974 652d 7061 636b 6167  on{}/site-packag
-00014850: 6573 272e 666f 726d 6174 2870 795f 7665  es'.format(py_ve
-00014860: 7229 2c27 6c6f 6361 6c2f 6c69 6236 342f  r),'local/lib64/
-00014870: 7079 7468 6f6e 7b7d 2f73 6974 652d 7061  python{}/site-pa
-00014880: 636b 6167 6573 272e 666f 726d 6174 2870  ckages'.format(p
-00014890: 795f 7665 7229 5d3a 0a20 2020 2020 2020  y_ver)]:.       
-000148a0: 206a 3d6f 732e 7061 7468 2e6a 6f69 6e28   j=os.path.join(
-000148b0: 656e 765f 6261 7365 5f64 6972 2c69 290a  env_base_dir,i).
-000148c0: 2020 2020 2020 2020 6966 206f 732e 7061          if os.pa
-000148d0: 7468 2e69 7364 6972 286a 293a 0a20 2020  th.isdir(j):.   
-000148e0: 2020 2020 2020 2020 2062 6173 655f 6c69           base_li
-000148f0: 625f 7061 7468 2e61 7070 656e 6428 6a29  b_path.append(j)
-00014900: 0a0a 2020 2020 7061 7468 3d6f 7074 732e  ..    path=opts.
-00014910: 6765 7428 2770 6174 6827 2920 2320 6966  get('path') # if
-00014920: 2074 6865 206d 6f64 756c 6520 6669 6c65   the module file
-00014930: 2069 6e20 6120 7370 6563 6961 6c20 7061   in a special pa
-00014940: 7468 2074 6865 6e20 6465 6669 6e65 2070  th then define p
-00014950: 6174 680a 2020 2020 6966 206e 6f74 2049  ath.    if not I
-00014960: 734e 6f6e 6528 7061 7468 2c63 6865 636b  sNone(path,check
-00014970: 5f74 7970 653d 7374 7229 3a0a 2020 2020  _type=str):.    
-00014980: 2020 2020 6966 2027 2c27 2069 6e20 7061      if ',' in pa
-00014990: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
-000149a0: 6261 7365 5f6c 6962 5f70 6174 683d 6261  base_lib_path=ba
-000149b0: 7365 5f6c 6962 5f70 6174 682b 7061 7468  se_lib_path+path
-000149c0: 2e73 706c 6974 2827 2c27 290a 2020 2020  .split(',').    
-000149d0: 2020 2020 656c 6966 2027 3a27 2069 6e20      elif ':' in 
-000149e0: 7061 7468 3a0a 2020 2020 2020 2020 2020  path:.          
-000149f0: 2020 6261 7365 5f6c 6962 5f70 6174 683d    base_lib_path=
-00014a00: 6261 7365 5f6c 6962 5f70 6174 682b 7061  base_lib_path+pa
-00014a10: 7468 2e73 706c 6974 2827 3a27 290a 2020  th.split(':').  
-00014a20: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00014a30: 2020 2020 2020 2020 6261 7365 5f6c 6962          base_lib
-00014a40: 5f70 6174 683d 6261 7365 5f6c 6962 5f70  _path=base_lib_p
-00014a50: 6174 682b 5b70 6174 685d 0a20 2020 2065  ath+[path].    e
-00014a60: 6c69 6620 6973 696e 7374 616e 6365 2870  lif isinstance(p
-00014a70: 6174 682c 286c 6973 742c 7475 706c 6529  ath,(list,tuple)
-00014a80: 293a 0a20 2020 2020 2020 2062 6173 655f  ):.        base_
-00014a90: 6c69 625f 7061 7468 3d62 6173 655f 6c69  lib_path=base_li
-00014aa0: 625f 7061 7468 2b6c 6973 7428 7061 7468  b_path+list(path
-00014ab0: 290a 2020 2020 6966 206e 6f74 2076 6972  ).    if not vir
-00014ac0: 7475 616c 5f65 6e76 3a0a 2020 2020 2020  tual_env:.      
-00014ad0: 2020 686f 6d65 3d50 6174 6828 277e 2729    home=Path('~')
-00014ae0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-00014af0: 7374 616e 6365 2868 6f6d 652c 7374 7229  stance(home,str)
-00014b00: 3a0a 2020 2020 2020 2020 2020 2020 6261  :.            ba
-00014b10: 7365 5f6c 6962 5f70 6174 682e 6170 7065  se_lib_path.appe
-00014b20: 6e64 2827 7b7d 2f2e 6c6f 6361 6c2f 6c69  nd('{}/.local/li
-00014b30: 622f 7079 7468 6f6e 332e 362f 7369 7465  b/python3.6/site
-00014b40: 2d70 6163 6b61 6765 7327 2e66 6f72 6d61  -packages'.forma
-00014b50: 7428 686f 6d65 2929 0a20 2020 2020 2020  t(home)).       
-00014b60: 2066 6f72 2069 6920 696e 2062 6173 655f   for ii in base_
-00014b70: 6c69 625f 7061 7468 3a0a 2020 2020 2020  lib_path:.      
-00014b80: 2020 2020 2020 6966 206f 732e 7061 7468        if os.path
-00014b90: 2e69 7364 6972 2869 6929 2061 6e64 206e  .isdir(ii) and n
-00014ba0: 6f74 2069 6920 696e 2073 7973 2e70 6174  ot ii in sys.pat
-00014bb0: 683a 0a20 2020 2020 2020 2020 2020 2020  h:.             
-00014bc0: 2020 2073 7973 2e70 6174 682e 6170 7065     sys.path.appe
-00014bd0: 6e64 2869 6929 0a20 2020 2069 6620 6f73  nd(ii).    if os
-00014be0: 2e67 6574 6377 6428 2920 6e6f 7420 696e  .getcwd() not in
-00014bf0: 2073 7973 2e70 6174 683a 2073 7973 2e70   sys.path: sys.p
-00014c00: 6174 683d 5b6f 732e 6765 7463 7764 2829  ath=[os.getcwd()
-00014c10: 5d2b 7379 732e 7061 7468 0a0a 2020 2020  ]+sys.path..    
-00014c20: 6966 206e 6f74 2076 6972 7475 616c 5f65  if not virtual_e
-00014c30: 6e76 2061 6e64 2069 6e73 7461 6c6c 5f61  nv and install_a
-00014c40: 6363 6f75 6e74 2069 6e20 5b27 7573 6572  ccount in ['user
-00014c50: 272c 272d 2d75 7365 7227 2c27 7065 7273  ','--user','pers
-00014c60: 6f6e 616c 272c 276d 7961 6363 6f75 6e74  onal','myaccount
-00014c70: 272c 2761 6363 6f75 6e74 272c 276d 7973  ','account','mys
-00014c80: 656c 6627 5d3a 0a20 2020 2020 2020 2069  elf']:.        i
-00014c90: 6e73 7461 6c6c 5f61 6363 6f75 6e74 3d27  nstall_account='
-00014ca0: 2d2d 7573 6572 270a 2020 2020 656c 7365  --user'.    else
-00014cb0: 3a0a 2020 2020 2020 2020 696e 7374 616c  :.        instal
-00014cc0: 6c5f 6163 636f 756e 743d 2727 0a0a 2020  l_account=''..  
-00014cd0: 2020 6465 6620 4368 6563 6b4f 626a 286f    def CheckObj(o
-00014ce0: 626a 293a 0a20 2020 2020 2020 206f 626a  bj):.        obj
-00014cf0: 5f64 6972 3d64 6972 286f 626a 290a 2020  _dir=dir(obj).  
-00014d00: 2020 2020 2020 6f62 6a5f 6e61 6d65 3d74        obj_name=t
-00014d10: 7970 6528 6f62 6a29 2e5f 5f6e 616d 655f  ype(obj).__name_
-00014d20: 5f0a 2020 2020 2020 2020 6966 206f 626a  _.        if obj
-00014d30: 5f6e 616d 6520 696e 205b 2766 756e 6374  _name in ['funct
-00014d40: 696f 6e27 5d3a 2072 6574 7572 6e20 6f62  ion']: return ob
-00014d50: 6a5f 6e61 6d65 0a20 2020 2020 2020 2069  j_name.        i
-00014d60: 6620 275f 5f64 6963 745f 5f27 2069 6e20  f '__dict__' in 
-00014d70: 6f62 6a5f 6469 723a 0a20 2020 2020 2020  obj_dir:.       
-00014d80: 2020 2020 2069 6620 6f62 6a5f 6e61 6d65       if obj_name
-00014d90: 203d 3d20 2774 7970 6527 3a20 7265 7475   == 'type': retu
-00014da0: 726e 2027 636c 6173 736f 626a 270a 2020  rn 'classobj'.  
-00014db0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00014dc0: 2027 696e 7374 616e 6365 270a 2020 2020   'instance'.    
-00014dd0: 2020 2020 7265 7475 726e 206f 626a 5f6e      return obj_n
-00014de0: 616d 652e 6c6f 7765 7228 290a 0a20 2020  ame.lower()..   
-00014df0: 206e 696e 7073 3d5b 5d0a 2020 2020 666f   ninps=[].    fo
-00014e00: 7220 696e 7020 696e 2069 6e70 733a 0a20  r inp in inps:. 
-00014e10: 2020 2020 2020 206e 696e 7073 3d6e 696e         ninps=nin
-00014e20: 7073 2b69 6e70 2e73 706c 6974 2827 2c27  ps+inp.split(','
-00014e30: 290a 2020 2020 6c6f 6164 5f66 6169 6c65  ).    load_faile
-00014e40: 643d 5b5d 0a20 2020 2066 6f72 2069 6e70  d=[].    for inp
-00014e50: 2069 6e20 6e69 6e70 733a 0a20 2020 2020   in ninps:.     
-00014e60: 2020 2023 2069 6620 696e 7020 6973 2046     # if inp is F
-00014e70: 696c 6520 7468 656e 2061 7574 6f6d 6174  ile then automat
-00014e80: 6963 616c 6c79 2067 6574 2074 6865 2050  ically get the P
-00014e90: 6174 6820 616e 6420 6669 6c65 206e 616d  ath and file nam
-00014ea0: 650a 2020 2020 2020 2020 2320 616e 6420  e.        # and 
-00014eb0: 6175 746f 6d61 7469 6361 6c6c 7920 6164  automatically ad
-00014ec0: 6469 6e67 2050 6174 6820 746f 2070 6174  ding Path to pat
-00014ed0: 6820 616e 6420 696d 706f 7274 2074 6865  h and import the
-00014ee0: 2046 696c 6520 4e61 6d65 0a20 2020 2020   File Name.     
-00014ef0: 2020 2069 6620 6f73 2e70 6174 682e 6973     if os.path.is
-00014f00: 6669 6c65 2869 6e70 293a 2023 2073 7065  file(inp): # spe
-00014f10: 6369 616c 2066 696c 6520 6d6f 6475 6c65  cial file module
-00014f20: 0a20 2020 2020 2020 2020 2020 2069 7061  .            ipa
-00014f30: 7468 3d6f 732e 7061 7468 2e64 6972 6e61  th=os.path.dirna
-00014f40: 6d65 2869 6e70 290a 2020 2020 2020 2020  me(inp).        
-00014f50: 2020 2020 6966 696c 653d 6f73 2e70 6174      ifile=os.pat
-00014f60: 682e 6261 7365 6e61 6d65 2869 6e70 290a  h.basename(inp).
-00014f70: 2020 2020 2020 2020 2020 2020 6966 696c              ifil
-00014f80: 655f 613d 6966 696c 652e 7370 6c69 7428  e_a=ifile.split(
-00014f90: 272e 2729 0a20 2020 2020 2020 2020 2020  '.').           
-00014fa0: 2069 6620 6c65 6e28 6966 696c 655f 6129   if len(ifile_a)
-00014fb0: 203e 2032 3a0a 2020 2020 2020 2020 2020   > 2:.          
-00014fc0: 2020 2020 2020 6966 2064 6267 3a0a 2020        if dbg:.  
-00014fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014fe0: 2020 7072 696e 7428 272a 2a2a 204e 6f74    print('*** Not
-00014ff0: 2073 7570 706f 7274 207b 7d20 6669 6c65   support {} file
-00015000: 6e61 6d65 272e 666f 726d 6174 2869 6e70  name'.format(inp
-00015010: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-00015020: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
-00015030: 2020 2020 2020 2020 696e 703d 6966 696c          inp=ifil
-00015040: 655f 615b 305d 0a20 2020 2020 2020 2020  e_a[0].         
-00015050: 2020 2069 6620 6970 6174 6820 6e6f 7420     if ipath not 
-00015060: 696e 2073 7973 2e70 6174 683a 0a20 2020  in sys.path:.   
-00015070: 2020 2020 2020 2020 2020 2020 2073 7973               sys
-00015080: 2e70 6174 683d 5b69 7061 7468 5d2b 7379  .path=[ipath]+sy
-00015090: 732e 7061 7468 0a20 2020 2020 2020 2020  s.path.         
-000150a0: 2020 206c 6f61 6465 642c 6d6f 6475 6c65     loaded,module
-000150b0: 3d4d 6f64 4c6f 6164 2869 6e70 2c66 6f72  =ModLoad(inp,for
-000150c0: 6365 3d66 6f72 6365 2c67 6c6f 6261 6c65  ce=force,globale
-000150d0: 6e76 3d67 6c6f 6261 6c65 6e76 2c75 6e6c  nv=globalenv,unl
-000150e0: 6f61 643d 756e 6c6f 6164 2c72 655f 6c6f  oad=unload,re_lo
-000150f0: 6164 3d72 655f 6c6f 6164 290a 2020 2020  ad=re_load).    
-00015100: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-00015110: 0a20 2020 2020 2020 2065 6c73 653a 2023  .        else: #
-00015120: 2043 6865 636b 204c 6f63 616c 2046 696c   Check Local Fil
-00015130: 650a 2020 2020 2020 2020 2020 2020 696e  e.            in
-00015140: 705f 613d 696e 702e 7370 6c69 7428 290a  p_a=inp.split().
-00015150: 2020 2020 2020 2020 2020 2020 696e 705f              inp_
-00015160: 6368 6b5f 6669 6c65 3d27 7b7d 2e70 7927  chk_file='{}.py'
-00015170: 2e66 6f72 6d61 7428 696e 705f 615b 315d  .format(inp_a[1]
-00015180: 2069 6620 696e 705f 615b 305d 2069 6e20   if inp_a[0] in 
-00015190: 5b27 696d 706f 7274 272c 2766 726f 6d27  ['import','from'
-000151a0: 5d20 656c 7365 2069 6e70 290a 2020 2020  ] else inp).    
-000151b0: 2020 2020 2020 2020 6966 206f 732e 7061          if os.pa
-000151c0: 7468 2e69 7366 696c 6528 696e 705f 6368  th.isfile(inp_ch
-000151d0: 6b5f 6669 6c65 293a 0a20 2020 2020 2020  k_file):.       
-000151e0: 2020 2020 2020 2020 206c 6f61 6465 642c           loaded,
-000151f0: 6d6f 6475 6c65 3d4d 6f64 4c6f 6164 2869  module=ModLoad(i
-00015200: 6e70 2c66 6f72 6365 3d66 6f72 6365 2c67  np,force=force,g
-00015210: 6c6f 6261 6c65 6e76 3d67 6c6f 6261 6c65  lobalenv=globale
-00015220: 6e76 2c75 6e6c 6f61 643d 756e 6c6f 6164  nv,unload=unload
-00015230: 2c72 655f 6c6f 6164 3d72 655f 6c6f 6164  ,re_load=re_load
-00015240: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00015250: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
-00015260: 2020 2069 6e70 5f61 3d69 6e70 2e73 706c     inp_a=inp.spl
-00015270: 6974 2829 0a20 2020 2020 2020 2076 6572  it().        ver
-00015280: 7369 6f6e 3d4e 6f6e 650a 2020 2020 2020  sion=None.      
-00015290: 2020 7665 725f 636f 6d70 6172 653d 4e6f    ver_compare=No
-000152a0: 6e65 0a20 2020 2020 2020 2069 6620 6c65  ne.        if le
-000152b0: 6e28 696e 705f 6129 2069 6e20 5b31 2c32  n(inp_a) in [1,2
-000152c0: 5d20 616e 6420 696e 705f 615b 305d 2069  ] and inp_a[0] i
-000152d0: 6e20 5b27 7265 7175 6972 6527 2c27 7265  n ['require','re
-000152e0: 7175 6972 656d 656e 7427 5d3a 0a20 2020  quirement']:.   
-000152f0: 2020 2020 2020 2020 2069 6620 6f73 2e70           if os.p
-00015300: 6174 682e 6973 6669 6c65 2869 6e70 5f61  ath.isfile(inp_a
-00015310: 5b31 5d29 3a0a 2020 2020 2020 2020 2020  [1]):.          
-00015320: 2020 2020 2020 7271 3d5b 5d0a 2020 2020        rq=[].    
-00015330: 2020 2020 2020 2020 2020 2020 7769 7468              with
-00015340: 206f 7065 6e28 696e 705f 615b 315d 2920   open(inp_a[1]) 
-00015350: 6173 2066 3a0a 2020 2020 2020 2020 2020  as f:.          
-00015360: 2020 2020 2020 2020 2020 7271 3d66 2e72            rq=f.r
-00015370: 6561 6428 292e 7370 6c69 7428 275c 6e27  ead().split('\n'
-00015380: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00015390: 2020 666f 7220 6969 2069 6e20 7271 3a0a    for ii in rq:.
-000153a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000153b0: 2020 2020 6966 206e 6f74 2069 693a 2063      if not ii: c
-000153c0: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
-000153d0: 2020 2020 2020 2020 2020 2020 6969 5f6c              ii_l
-000153e0: 3d69 692e 7370 6c69 7428 290a 2020 2020  =ii.split().    
-000153f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015400: 7665 7273 696f 6e3d 4e6f 6e65 0a20 2020  version=None.   
-00015410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015420: 2069 6620 6c65 6e28 6969 5f6c 2920 696e   if len(ii_l) in
-00015430: 205b 322c 335d 3a0a 2020 2020 2020 2020   [2,3]:.        
-00015440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015450: 6966 2027 3d27 2069 6e20 6969 5f6c 5b31  if '=' in ii_l[1
-00015460: 5d20 6f72 2027 3e27 2069 6e20 6969 5f6c  ] or '>' in ii_l
-00015470: 5b31 5d20 6f72 2027 3c27 2069 6e20 6969  [1] or '<' in ii
-00015480: 5f6c 5b31 5d3a 0a20 2020 2020 2020 2020  _l[1]:.         
-00015490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000154a0: 2020 2069 6620 6c65 6e28 6969 5f6c 2920     if len(ii_l) 
-000154b0: 3d3d 2033 3a0a 2020 2020 2020 2020 2020  == 3:.          
-000154c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000154d0: 2020 2020 2020 7665 7273 696f 6e3d 6969        version=ii
-000154e0: 5f6c 5b31 5d2b 6969 5f6c 5b32 5d0a 2020  _l[1]+ii_l[2].  
-000154f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015500: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00015510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015530: 7665 7273 696f 6e3d 6969 5f6c 5b31 5d0a  version=ii_l[1].
-00015540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015550: 2020 2020 6969 5f61 3d69 695f 6c5b 305d      ii_a=ii_l[0]
-00015560: 2e73 706c 6974 2827 3a27 290a 2020 2020  .split(':').    
-00015570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015580: 6966 206c 656e 2869 695f 6129 203d 3d20  if len(ii_a) == 
-00015590: 323a 0a20 2020 2020 2020 2020 2020 2020  2:.             
-000155a0: 2020 2020 2020 2020 2020 2069 633d 496e             ic=In
-000155b0: 7374 616c 6c28 6969 5f61 5b31 5d2c 696e  stall(ii_a[1],in
-000155c0: 7374 616c 6c5f 6163 636f 756e 742c 7665  stall_account,ve
-000155d0: 7273 696f 6e3d 7665 7273 696f 6e2c 696e  rsion=version,in
-000155e0: 7374 616c 6c5f 6e61 6d65 3d69 6e73 7461  stall_name=insta
-000155f0: 6c6c 5f6e 616d 6529 0a20 2020 2020 2020  ll_name).       
-00015600: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00015610: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00015620: 2020 2020 2020 2020 2020 2069 633d 496e             ic=In
-00015630: 7374 616c 6c28 6969 5f61 5b30 5d2c 696e  stall(ii_a[0],in
-00015640: 7374 616c 6c5f 6163 636f 756e 742c 7665  stall_account,ve
-00015650: 7273 696f 6e3d 7665 7273 696f 6e2c 696e  rsion=version,in
-00015660: 7374 616c 6c5f 6e61 6d65 3d69 6e73 7461  stall_name=insta
-00015670: 6c6c 5f6e 616d 6529 0a20 2020 2020 2020  ll_name).       
-00015680: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00015690: 6963 3a0a 2020 2020 2020 2020 2020 2020  ic:.            
-000156a0: 2020 2020 2020 2020 2020 2020 6c6f 6164              load
-000156b0: 6564 2c6d 6f64 756c 653d 4d6f 644c 6f61  ed,module=ModLoa
-000156c0: 6428 6969 5f61 5b30 5d2c 666f 7263 653d  d(ii_a[0],force=
-000156d0: 666f 7263 652c 676c 6f62 616c 656e 763d  force,globalenv=
-000156e0: 676c 6f62 616c 656e 762c 7265 5f6c 6f61  globalenv,re_loa
-000156f0: 643d 7265 5f6c 6f61 6429 0a20 2020 2020  d=re_load).     
-00015700: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-00015710: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00015720: 2020 2020 2020 2020 2020 6f6b 2c6d 6f64            ok,mod
-00015730: 756c 652c 6e61 6d65 2c63 6c61 7373 5f6e  ule,name,class_n
-00015740: 616d 652c 7665 7273 696f 6e2c 7379 6d62  ame,version,symb
-00015750: 6f6c 3d4d 6f64 4e61 6d65 2869 6e70 290a  ol=ModName(inp).
-00015760: 2020 2020 2020 2020 2020 2020 6966 206f              if o
-00015770: 6b20 616e 6420 7665 7273 696f 6e20 616e  k and version an
-00015780: 6420 7379 6d62 6f6c 3a0a 2020 2020 2020  d symbol:.      
-00015790: 2020 2020 2020 2020 2020 6375 725f 7665            cur_ve
-000157a0: 7273 696f 6e3d 4d6f 6456 6572 7369 6f6e  rsion=ModVersion
-000157b0: 286d 6f64 756c 6529 0a20 2020 2020 2020  (module).       
-000157c0: 2020 2020 2020 2020 2023 4d69 736d 6174           #Mismat
-000157d0: 6368 6564 2076 6572 7369 6f6e 206f 7220  ched version or 
-000157e0: 6e6f 7420 696e 7374 616c 6c65 6420 7468  not installed th
-000157f0: 656e 2069 6e73 7461 6c6c 0a20 2020 2020  en install.     
-00015800: 2020 2020 2020 2020 2020 2069 6620 6375             if cu
-00015810: 725f 7665 7273 696f 6e20 6973 204e 6f6e  r_version is Non
-00015820: 6520 6f72 2028 6375 725f 7665 7273 696f  e or (cur_versio
-00015830: 6e20 616e 6420 6e6f 7420 436f 6d70 5665  n and not CompVe
-00015840: 7273 696f 6e28 6375 725f 7665 7273 696f  rsion(cur_versio
-00015850: 6e2c 7379 6d62 6f6c 2c76 6572 7369 6f6e  n,symbol,version
-00015860: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-00015870: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
-00015880: 6c20 696e 205b 273e 272c 273e 3d27 5d3a  l in ['>','>=']:
-00015890: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000158a0: 2020 2020 2020 2020 2049 6e73 7461 6c6c           Install
-000158b0: 286d 6f64 756c 652c 696e 7374 616c 6c5f  (module,install_
-000158c0: 6163 636f 756e 743d 696e 7374 616c 6c5f  account=install_
-000158d0: 6163 636f 756e 742c 7570 6772 6164 653d  account,upgrade=
-000158e0: 5472 7565 2c69 6e73 7461 6c6c 5f6e 616d  True,install_nam
-000158f0: 653d 696e 7374 616c 6c5f 6e61 6d65 290a  e=install_name).
-00015900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015910: 2020 2020 656c 6966 2073 796d 626f 6c20      elif symbol 
-00015920: 696e 205b 273d 3d27 5d3a 0a20 2020 2020  in ['==']:.     
-00015930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015940: 2020 2049 6e73 7461 6c6c 286d 6f64 756c     Install(modul
-00015950: 652c 696e 7374 616c 6c5f 6163 636f 756e  e,install_accoun
-00015960: 743d 696e 7374 616c 6c5f 6163 636f 756e  t=install_accoun
-00015970: 742c 7570 6772 6164 653d 5472 7565 2c76  t,upgrade=True,v
-00015980: 6572 7369 6f6e 3d27 3d3d 207b 7d27 2e66  ersion='== {}'.f
-00015990: 6f72 6d61 7428 7665 7273 696f 6e29 2c69  ormat(version),i
-000159a0: 6e73 7461 6c6c 5f6e 616d 653d 696e 7374  nstall_name=inst
-000159b0: 616c 6c5f 6e61 6d65 290a 2020 2020 2020  all_name).      
-000159c0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-000159d0: 6966 2073 796d 626f 6c20 696e 205b 273c  if symbol in ['<
-000159e0: 272c 273c 3d27 5d3a 0a20 2020 2020 2020  ','<=']:.       
-000159f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015a00: 2049 6e73 7461 6c6c 286d 6f64 756c 652c   Install(module,
-00015a10: 696e 7374 616c 6c5f 6163 636f 756e 743d  install_account=
-00015a20: 696e 7374 616c 6c5f 6163 636f 756e 742c  install_account,
-00015a30: 7570 6772 6164 653d 5472 7565 2c76 6572  upgrade=True,ver
-00015a40: 7369 6f6e 3d27 7b7d 207b 7d27 2e66 6f72  sion='{} {}'.for
-00015a50: 6d61 7428 7379 6d62 6f6c 2c76 6572 7369  mat(symbol,versi
-00015a60: 6f6e 292c 696e 7374 616c 6c5f 6e61 6d65  on),install_name
-00015a70: 3d69 6e73 7461 6c6c 5f6e 616d 6529 0a0a  =install_name)..
-00015a80: 2020 2020 2020 2020 234c 6f61 6420 6d6f          #Load mo
-00015a90: 6475 6c65 0a20 2020 2020 2020 206c 6f61  dule.        loa
-00015aa0: 6465 642c 6d6f 6475 6c65 3d4d 6f64 4c6f  ded,module=ModLo
-00015ab0: 6164 2869 6e70 2c66 6f72 6365 3d66 6f72  ad(inp,force=for
-00015ac0: 6365 2c67 6c6f 6261 6c65 6e76 3d67 6c6f  ce,globalenv=glo
-00015ad0: 6261 6c65 6e76 2c75 6e6c 6f61 643d 756e  balenv,unload=un
-00015ae0: 6c6f 6164 2c72 655f 6c6f 6164 3d72 655f  load,re_load=re_
-00015af0: 6c6f 6164 290a 2020 2020 2020 2020 6966  load).        if
-00015b00: 206c 6f61 6465 6420 3d3d 2032 3a20 2375   loaded == 2: #u
-00015b10: 6e6c 6f61 6465 640a 2020 2020 2020 2020  nloaded.        
-00015b20: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
-00015b30: 2020 2020 2069 6620 6c6f 6164 6564 203d       if loaded =
-00015b40: 3d20 313a 2023 4e6f 7420 666f 756e 642f  = 1: #Not found/
-00015b50: 696e 7374 616c 6c65 6420 4d6f 6475 6c65  installed Module
-00015b60: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00015b70: 6e6f 7420 4973 4e6f 6e65 2872 6571 7569  not IsNone(requi
-00015b80: 7265 6d65 6e74 7329 3a0a 2020 2020 2020  rements):.      
-00015b90: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-00015ba0: 6e73 7461 6e63 6528 7265 7175 6972 656d  nstance(requirem
-00015bb0: 656e 7473 2c73 7472 293a 0a20 2020 2020  ents,str):.     
-00015bc0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00015bd0: 6571 7569 7265 6d65 6e74 733d 7265 7175  equirements=requ
-00015be0: 6972 656d 656e 7473 2e73 706c 6974 2827  irements.split('
-00015bf0: 2c27 290a 2020 2020 2020 2020 2020 2020  ,').            
-00015c00: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00015c10: 6528 7265 7175 6972 656d 656e 7473 2c28  e(requirements,(
-00015c20: 6c69 7374 2c74 7570 6c65 2929 3a0a 2020  list,tuple)):.  
-00015c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015c40: 2066 6f72 2069 2069 6e20 7265 7175 6972   for i in requir
-00015c50: 656d 656e 7473 3a0a 2020 2020 2020 2020  ements:.        
-00015c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015c70: 6969 5f6c 3d69 2e73 706c 6974 2829 0a20  ii_l=i.split(). 
-00015c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015c90: 2020 2020 2020 2076 6572 7369 6f6e 3d4e         version=N
-00015ca0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-00015cb0: 2020 2020 2020 2020 2020 2020 7570 6772              upgr
-00015cc0: 6164 653d 4661 6c73 650a 2020 2020 2020  ade=False.      
-00015cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015ce0: 2020 6966 206c 656e 2869 695f 6c29 203d    if len(ii_l) =
-00015cf0: 3d20 333a 0a20 2020 2020 2020 2020 2020  = 3:.           
+00013d90: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
+00013da0: 2020 2020 2020 2020 2020 2020 2020 2067                 g
+00013db0: 6c6f 6261 6c65 6e76 5b6e 616d 655d 3d69  lobalenv[name]=i
+00013dc0: 6d70 6f72 745f 6d6f 6475 6c65 286d 6f64  mport_module(mod
+00013dd0: 756c 6529 0a20 2020 2020 2020 2020 2020  ule).           
+00013de0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+00013df0: 2020 2020 2020 2020 2065 7272 3d45 7863           err=Exc
+00013e00: 6570 744d 6573 7361 6765 2829 0a20 2020  eptMessage().   
+00013e10: 2020 2020 2020 2020 2020 2020 2053 7464               Std
+00013e20: 4572 7228 272d 2d2d 2d2d 2d2d 2d2d 2d2d  Err('-----------
+00013e30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013e40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 5c6e  --------------\n
+00013e60: 7b7d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  {}--------------
+00013e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013e80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013e90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d5c 6e27 2e66  -----------\n'.f
+00013ea0: 6f72 6d61 7428 6572 7229 290a 2020 2020  ormat(err)).    
+00013eb0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00013ec0: 726e 2030 2c6d 6f64 756c 650a 2020 2020  rn 0,module.    
+00013ed0: 2020 2020 7265 7475 726e 2077 696c 6463      return wildc
+00013ee0: 6172 642c 6d6f 6475 6c65 2023 204c 6f61  ard,module # Loa
+00013ef0: 6465 642e 2053 6f20 7265 7475 726e 2077  ded. So return w
+00013f00: 696c 6463 6172 6420 696e 666f 726d 6174  ildcard informat
+00013f10: 696f 6e0a 2020 2020 6578 6365 7074 2041  ion.    except A
+00013f20: 7474 7269 6275 7465 4572 726f 723a 2023  ttributeError: #
+00013f30: 2054 7279 204c 6f61 6469 6e67 206c 6f6f   Try Loading loo
+00013f40: 7065 6420 4d6f 6475 6c65 2f43 6c61 7373  ped Module/Class
+00013f50: 2074 6865 6e20 6967 6e6f 7265 2020 6f72   then ignore  or
+00013f60: 2057 726f 6e67 2064 6566 696e 650a 2020   Wrong define.  
+00013f70: 2020 2020 2020 7265 7475 726e 2030 2c6d        return 0,m
+00013f80: 6f64 756c 650a 2020 2020 6578 6365 7074  odule.    except
+00013f90: 2049 6d70 6f72 7445 7272 6f72 3a20 2320   ImportError: # 
+00013fa0: 496d 706f 7274 2065 7272 6f72 2074 6865  Import error the
+00013fb0: 6e20 7472 7920 696e 7374 616c 6c0a 2020  n try install.  
+00013fc0: 2020 2020 2020 7265 7475 726e 2031 2c6d        return 1,m
+00013fd0: 6f64 756c 650a 0a64 6566 2049 6d70 6f72  odule..def Impor
+00013fe0: 7428 2a69 6e70 732c 2a2a 6f70 7473 293a  t(*inps,**opts):
+00013ff0: 0a20 2020 2027 2727 0a20 2020 2062 6173  .    '''.    bas
+00014000: 6963 2066 756e 6374 696f 6e20 6f66 2069  ic function of i
+00014010: 6d70 6f72 740a 2020 2020 6966 206e 6f74  mport.    if not
+00014020: 2066 6f75 6e64 2074 6865 206d 6f64 756c   found the modul
+00014030: 6520 7468 656e 2061 7574 6f6d 6174 6963  e then automatic
+00014040: 616c 6c20 696e 7374 616c 6c0a 2020 2020  all install.    
+00014050: 7665 7273 696f 6e20 6368 6563 6b20 616e  version check an
+00014060: 6420 7570 6772 6164 652c 2072 6569 6e73  d upgrade, reins
+00014070: 7461 6c6c 2061 6363 6f72 6469 6e67 2074  tall according t
+00014080: 6f20 7468 6520 7665 7273 696f 6e0a 2020  o the version.  
+00014090: 2020 7375 7070 6f72 7420 7265 7175 6972    support requir
+000140a0: 656d 656e 7420 6669 6c65 730a 0a20 2020  ement files..   
+000140b0: 2069 6e70 7320 6861 7320 2272 6571 7569   inps has "requi
+000140c0: 7265 203c 7265 7175 6972 6520 6669 6c65  re <require file
+000140d0: 3e22 2074 6865 6e20 696e 7374 616c 6c20  >" then install 
+000140e0: 7468 6520 616c 6c20 7265 7175 6972 6520  the all require 
+000140f0: 6669 6c65 7320 696e 203c 7265 7175 6972  files in <requir
+00014100: 6520 6669 6c65 3e0a 2020 2020 496d 706f  e file>.    Impo
+00014110: 7274 2827 3c6d 6f64 756c 6520 6e61 6d65  rt('<module name
+00014120: 3e20 203e 3d20 3c76 6572 7369 6f6e 3e27  >  >= <version>'
+00014130: 2920 3a20 4368 6563 6b20 7665 7273 696f  ) : Check versio
+00014140: 6e20 616e 6420 6c6f 7765 7220 7468 656e  n and lower then
+00014150: 2061 7574 6f6d 6174 6963 616c 6c20 7570   automaticall up
+00014160: 6772 6164 6520 0a20 2020 2049 6d70 6f72  grade .    Impor
+00014170: 7428 273c 6d6f 6475 6c65 206e 616d 653e  t('<module name>
+00014180: 2020 3d3d 203c 7665 7273 696f 6e3e 2729    == <version>')
+00014190: 203a 2043 6865 636b 2076 6572 7369 6f6e   : Check version
+000141a0: 2061 6e64 2064 6966 6665 7265 6e74 2074   and different t
+000141b0: 6865 6e20 6175 746f 6d61 7469 6361 6c6c  hen automaticall
+000141c0: 2072 6569 6e73 7461 6c6c 2077 6974 6820   reinstall with 
+000141d0: 7468 6520 7665 7273 696f 6e0a 2020 2020  the version.    
+000141e0: 496d 706f 7274 2827 3c6d 6f64 756c 6520  Import('<module 
+000141f0: 6e61 6d65 3e27 2c70 6174 683d 2741 4141  name>',path='AAA
+00014200: 2c42 4242 2c43 4343 4327 2920 3a20 696d  ,BBB,CCCC') : im
+00014210: 706f 7274 203c 6d6f 6475 6c65 206e 616d  port <module nam
+00014220: 653e 2066 726f 6d20 6465 6661 756c 7420  e> from default 
+00014230: 616e 6420 6578 7472 6120 4141 4120 616e  and extra AAA an
+00014240: 6420 4242 4220 616e 6420 4343 432e 0a20  d BBB and CCC.. 
+00014250: 2020 202d 7061 7468 3d20 2020 2020 2020     -path=       
+00014260: 3a20 7365 6172 6368 696e 6720 616e 6420  : searching and 
+00014270: 7468 6520 6d6f 6475 6c65 2069 6e20 7468  the module in th
+00014280: 6520 6578 7472 6120 7061 7468 2028 7365  e extra path (se
+00014290: 7065 7261 7465 2077 6974 6820 272c 2720  perate with ',' 
+000142a0: 6f72 2027 3a27 2029 0a20 2020 202d 666f  or ':' ).    -fo
+000142b0: 7263 653d 5472 7565 2020 3a20 756e 6c6f  rce=True  : unlo
+000142c0: 6164 2061 6e64 206c 6f61 6420 6167 6169  ad and load agai
+000142d0: 6e20 7768 656e 2061 6c72 6561 6479 206c  n when already l
+000142e0: 6f61 6465 6420 2864 6566 6175 6c74 3a20  oaded (default: 
+000142f0: 4661 6c73 6529 0a20 2020 202d 7265 6c6f  False).    -relo
+00014300: 6164 3d54 7275 6520 3a20 7275 6e20 7265  ad=True : run re
+00014310: 6c6f 6164 2077 6865 6e20 616c 7265 6164  load when alread
+00014320: 7920 6c6f 6164 6564 2028 6465 6661 756c  y loaded (defaul
+00014330: 743a 2046 616c 7365 290a 2020 2020 2d75  t: False).    -u
+00014340: 6e6c 6f61 643d 5472 7565 203a 2075 6e6c  nload=True : unl
+00014350: 6f61 6420 6d6f 6475 6c65 2028 6465 6661  oad module (defa
+00014360: 756c 7420 3a20 4661 6c73 6529 0a20 2020  ult : False).   
+00014370: 202d 6572 723d 5472 7565 2020 2020 3a20   -err=True    : 
+00014380: 7368 6f77 2069 6e73 7461 6c6c 206f 7220  show install or 
+00014390: 6c6f 6164 696e 6720 6572 726f 7220 2864  loading error (d
+000143a0: 6566 6175 6c74 3a20 4661 6c73 6529 0a20  efault: False). 
+000143b0: 2020 202d 6462 673d 5472 7565 2020 2020     -dbg=True    
+000143c0: 3a20 7368 6f77 2063 6f6d 6d65 6e74 2028  : show comment (
+000143d0: 6465 6661 756c 7420 3a20 4661 6c73 6529  default : False)
+000143e0: 0a20 2020 202d 696e 7374 616c 6c5f 6163  .    -install_ac
+000143f0: 636f 756e 743d 3a20 272d 2d75 7365 7227  count=: '--user'
+00014400: 2c27 7573 6572 272c 276d 7961 6363 6f75  ,'user','myaccou
+00014410: 6e74 272c 2761 6363 6f75 6e74 272c 6d79  nt','account',my
+00014420: 7365 6c66 2074 6865 6e20 696e 7374 616c  self then instal
+00014430: 6c20 6174 206d 7920 6c6f 6361 6c20 6163  l at my local ac
+00014440: 636f 756e 740a 2020 2020 2020 2020 2020  count.          
+00014450: 2020 2020 2020 2064 6566 6175 6c74 3a20         default: 
+00014460: 496e 7374 616c 6c20 6279 2053 7973 7465  Install by Syste
+00014470: 6d20 6465 6661 756c 7420 7365 7474 696e  m default settin
+00014480: 670a 0a20 2020 2027 2727 0a20 2020 2067  g..    '''.    g
+00014490: 6c6f 6261 6c65 6e76 3d6f 7074 732e 6765  lobalenv=opts.ge
+000144a0: 7428 2767 6c6f 6261 6c65 6e76 272c 6469  t('globalenv',di
+000144b0: 6374 2869 6e73 7065 6374 2e67 6574 6d65  ct(inspect.getme
+000144c0: 6d62 6572 7328 696e 7370 6563 742e 7374  mbers(inspect.st
+000144d0: 6163 6b28 295b 315d 5b30 5d29 295b 2266  ack()[1][0]))["f
+000144e0: 5f67 6c6f 6261 6c73 225d 2920 2320 4765  _globals"]) # Ge
+000144f0: 7420 6d79 2070 6172 656e 7427 7320 676c  t my parent's gl
+00014500: 6f62 616c 7328 290a 2020 2020 666f 7263  obals().    forc
+00014510: 653d 6f70 7473 2e67 6574 2827 666f 7263  e=opts.get('forc
+00014520: 6527 2c4e 6f6e 6529 2023 2075 6e6c 6f61  e',None) # unloa
+00014530: 6420 616e 6420 6c6f 6164 2061 6761 696e  d and load again
+00014540: 2077 6865 6e20 616c 7265 6164 7920 6c6f   when already lo
+00014550: 6164 6564 2028 666f 7263 653d 5472 7565  aded (force=True
+00014560: 290a 2020 2020 7265 5f6c 6f61 643d 6f70  ).    re_load=op
+00014570: 7473 2e67 6574 2827 7265 6c6f 6164 272c  ts.get('reload',
+00014580: 4e6f 6e65 2920 2320 2072 756e 2072 656c  None) #  run rel
+00014590: 6f61 6420 7768 656e 2061 6c72 6561 6479  oad when already
+000145a0: 206c 6f61 6465 640a 2020 2020 756e 6c6f   loaded.    unlo
+000145b0: 6164 3d6f 7074 732e 6765 7428 2775 6e6c  ad=opts.get('unl
+000145c0: 6f61 6427 2c46 616c 7365 2920 2320 756e  oad',False) # un
+000145d0: 6c6f 6164 206d 6f64 756c 6520 7768 656e  load module when
+000145e0: 2054 7275 650a 2020 2020 6572 723d 6f70   True.    err=op
+000145f0: 7473 2e67 6574 2827 6572 7227 2c46 616c  ts.get('err',Fal
+00014600: 7365 2920 2320 7368 6f77 2069 6e73 7461  se) # show insta
+00014610: 6c6c 206f 7220 6c6f 6164 696e 6720 6572  ll or loading er
+00014620: 726f 7220 7768 656e 2054 7275 650a 2020  ror when True.  
+00014630: 2020 6465 6661 756c 743d 6f70 7473 2e67    default=opts.g
+00014640: 6574 2827 6465 6661 756c 7427 2c46 616c  et('default',Fal
+00014650: 7365 290a 2020 2020 6462 673d 6f70 7473  se).    dbg=opts
+00014660: 2e67 6574 2827 6462 6727 2c46 616c 7365  .get('dbg',False
+00014670: 2920 2320 7368 6f77 2063 6f6d 6d65 6e74  ) # show comment
+00014680: 2077 6865 6e20 5472 7565 0a20 2020 2061   when True.    a
+00014690: 7574 6f5f 696e 7374 616c 6c3d 6f70 7473  uto_install=opts
+000146a0: 2e67 6574 2827 6175 746f 5f69 6e73 7461  .get('auto_insta
+000146b0: 6c6c 272c 5472 7565 2920 2320 6966 206e  ll',True) # if n
+000146c0: 6f74 2066 6f75 6e64 2074 6865 206d 6f64  ot found the mod
+000146d0: 756c 6520 7468 656e 2061 7574 6f6d 6174  ule then automat
+000146e0: 6963 616c 6c79 2069 6e73 7461 6c6c 0a20  ically install. 
+000146f0: 2020 2072 6571 7569 7265 6d65 6e74 733d     requirements=
+00014700: 6f70 7473 2e67 6574 2827 7265 7175 6972  opts.get('requir
+00014710: 656d 656e 7473 2729 0a20 2020 2023 696e  ements').    #in
+00014720: 7374 616c 6c5f 6163 636f 756e 743d 6f70  stall_account=op
+00014730: 7473 2e67 6574 2827 696e 7374 616c 6c5f  ts.get('install_
+00014740: 6163 636f 756e 7427 2c27 2d2d 7573 6572  account','--user
+00014750: 2729 0a20 2020 2069 6e73 7461 6c6c 5f61  ').    install_a
+00014760: 6363 6f75 6e74 3d6f 7074 732e 6765 7428  ccount=opts.get(
+00014770: 2769 6e73 7461 6c6c 5f61 6363 6f75 6e74  'install_account
+00014780: 272c 2727 2920 2320 272d 2d75 7365 7227  ','') # '--user'
+00014790: 2c27 7573 6572 272c 276d 7961 6363 6f75  ,'user','myaccou
+000147a0: 6e74 272c 2761 6363 6f75 6e74 272c 6d79  nt','account',my
+000147b0: 7365 6c66 2074 6865 6e20 696e 7374 616c  self then instal
+000147c0: 6c20 6174 206d 7920 6c6f 6361 6c20 6163  l at my local ac
+000147d0: 636f 756e 740a 2020 2020 696e 7374 616c  count.    instal
+000147e0: 6c5f 6e61 6d65 3d6f 7074 732e 6765 7428  l_name=opts.get(
+000147f0: 2769 6e73 7461 6c6c 5f6e 616d 6527 290a  'install_name').
+00014800: 0a20 2020 2023 4170 7065 6e64 204d 6f64  .    #Append Mod
+00014810: 756c 6520 5061 7468 0a20 2020 2076 6972  ule Path.    vir
+00014820: 7475 616c 5f65 6e76 3d6f 732e 656e 7669  tual_env=os.envi
+00014830: 726f 6e2e 6765 7428 2756 4952 5455 414c  ron.get('VIRTUAL
+00014840: 5f45 4e56 2729 0a20 2020 2065 6e76 5f62  _ENV').    env_b
+00014850: 6173 655f 6469 723d 7669 7274 7561 6c5f  ase_dir=virtual_
+00014860: 656e 7620 6966 2076 6972 7475 616c 5f65  env if virtual_e
+00014870: 6e76 2065 6c73 6520 272f 7573 7227 0a20  nv else '/usr'. 
+00014880: 2020 2062 6173 655f 6c69 625f 7061 7468     base_lib_path
+00014890: 3d5b 5d0a 2020 2020 7079 5f76 6572 3d50  =[].    py_ver=P
+000148a0: 7956 6572 2829 0a20 2020 2066 6f72 2069  yVer().    for i
+000148b0: 2069 6e20 5b27 6c69 622f 7079 7468 6f6e   in ['lib/python
+000148c0: 7b7d 2f73 6974 652d 7061 636b 6167 6573  {}/site-packages
+000148d0: 272e 666f 726d 6174 2870 795f 7665 7229  '.format(py_ver)
+000148e0: 2c27 6c69 6236 342f 7079 7468 6f6e 7b7d  ,'lib64/python{}
+000148f0: 2f73 6974 652d 7061 636b 6167 6573 272e  /site-packages'.
+00014900: 666f 726d 6174 2870 795f 7665 7229 2c27  format(py_ver),'
+00014910: 6c6f 6361 6c2f 7079 7468 6f6e 7b7d 2f73  local/python{}/s
+00014920: 6974 652d 7061 636b 6167 6573 272e 666f  ite-packages'.fo
+00014930: 726d 6174 2870 795f 7665 7229 2c27 6c6f  rmat(py_ver),'lo
+00014940: 6361 6c2f 6c69 622f 7079 7468 6f6e 7b7d  cal/lib/python{}
+00014950: 2f73 6974 652d 7061 636b 6167 6573 272e  /site-packages'.
+00014960: 666f 726d 6174 2870 795f 7665 7229 2c27  format(py_ver),'
+00014970: 6c6f 6361 6c2f 6c69 6236 342f 7079 7468  local/lib64/pyth
+00014980: 6f6e 7b7d 2f73 6974 652d 7061 636b 6167  on{}/site-packag
+00014990: 6573 272e 666f 726d 6174 2870 795f 7665  es'.format(py_ve
+000149a0: 7229 5d3a 0a20 2020 2020 2020 206a 3d6f  r)]:.        j=o
+000149b0: 732e 7061 7468 2e6a 6f69 6e28 656e 765f  s.path.join(env_
+000149c0: 6261 7365 5f64 6972 2c69 290a 2020 2020  base_dir,i).    
+000149d0: 2020 2020 6966 206f 732e 7061 7468 2e69      if os.path.i
+000149e0: 7364 6972 286a 293a 0a20 2020 2020 2020  sdir(j):.       
+000149f0: 2020 2020 2062 6173 655f 6c69 625f 7061       base_lib_pa
+00014a00: 7468 2e61 7070 656e 6428 6a29 0a0a 2020  th.append(j)..  
+00014a10: 2020 7061 7468 3d6f 7074 732e 6765 7428    path=opts.get(
+00014a20: 2770 6174 6827 2920 2320 6966 2074 6865  'path') # if the
+00014a30: 206d 6f64 756c 6520 6669 6c65 2069 6e20   module file in 
+00014a40: 6120 7370 6563 6961 6c20 7061 7468 2074  a special path t
+00014a50: 6865 6e20 6465 6669 6e65 2070 6174 680a  hen define path.
+00014a60: 2020 2020 6966 206e 6f74 2049 734e 6f6e      if not IsNon
+00014a70: 6528 7061 7468 2c63 6865 636b 5f74 7970  e(path,check_typ
+00014a80: 653d 7374 7229 3a0a 2020 2020 2020 2020  e=str):.        
+00014a90: 6966 2027 2c27 2069 6e20 7061 7468 3a0a  if ',' in path:.
+00014aa0: 2020 2020 2020 2020 2020 2020 6261 7365              base
+00014ab0: 5f6c 6962 5f70 6174 683d 6261 7365 5f6c  _lib_path=base_l
+00014ac0: 6962 5f70 6174 682b 7061 7468 2e73 706c  ib_path+path.spl
+00014ad0: 6974 2827 2c27 290a 2020 2020 2020 2020  it(',').        
+00014ae0: 656c 6966 2027 3a27 2069 6e20 7061 7468  elif ':' in path
+00014af0: 3a0a 2020 2020 2020 2020 2020 2020 6261  :.            ba
+00014b00: 7365 5f6c 6962 5f70 6174 683d 6261 7365  se_lib_path=base
+00014b10: 5f6c 6962 5f70 6174 682b 7061 7468 2e73  _lib_path+path.s
+00014b20: 706c 6974 2827 3a27 290a 2020 2020 2020  plit(':').      
+00014b30: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00014b40: 2020 2020 6261 7365 5f6c 6962 5f70 6174      base_lib_pat
+00014b50: 683d 6261 7365 5f6c 6962 5f70 6174 682b  h=base_lib_path+
+00014b60: 5b70 6174 685d 0a20 2020 2065 6c69 6620  [path].    elif 
+00014b70: 6973 696e 7374 616e 6365 2870 6174 682c  isinstance(path,
+00014b80: 286c 6973 742c 7475 706c 6529 293a 0a20  (list,tuple)):. 
+00014b90: 2020 2020 2020 2062 6173 655f 6c69 625f         base_lib_
+00014ba0: 7061 7468 3d62 6173 655f 6c69 625f 7061  path=base_lib_pa
+00014bb0: 7468 2b6c 6973 7428 7061 7468 290a 2020  th+list(path).  
+00014bc0: 2020 6966 206e 6f74 2076 6972 7475 616c    if not virtual
+00014bd0: 5f65 6e76 3a0a 2020 2020 2020 2020 686f  _env:.        ho
+00014be0: 6d65 3d50 6174 6828 277e 2729 0a20 2020  me=Path('~').   
+00014bf0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00014c00: 6365 2868 6f6d 652c 7374 7229 3a0a 2020  ce(home,str):.  
+00014c10: 2020 2020 2020 2020 2020 6261 7365 5f6c            base_l
+00014c20: 6962 5f70 6174 682e 6170 7065 6e64 2827  ib_path.append('
+00014c30: 7b7d 2f2e 6c6f 6361 6c2f 6c69 622f 7079  {}/.local/lib/py
+00014c40: 7468 6f6e 332e 362f 7369 7465 2d70 6163  thon3.6/site-pac
+00014c50: 6b61 6765 7327 2e66 6f72 6d61 7428 686f  kages'.format(ho
+00014c60: 6d65 2929 0a20 2020 2020 2020 2066 6f72  me)).        for
+00014c70: 2069 6920 696e 2062 6173 655f 6c69 625f   ii in base_lib_
+00014c80: 7061 7468 3a0a 2020 2020 2020 2020 2020  path:.          
+00014c90: 2020 6966 206f 732e 7061 7468 2e69 7364    if os.path.isd
+00014ca0: 6972 2869 6929 2061 6e64 206e 6f74 2069  ir(ii) and not i
+00014cb0: 6920 696e 2073 7973 2e70 6174 683a 0a20  i in sys.path:. 
+00014cc0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00014cd0: 7973 2e70 6174 682e 6170 7065 6e64 2869  ys.path.append(i
+00014ce0: 6929 0a20 2020 2069 6620 6f73 2e67 6574  i).    if os.get
+00014cf0: 6377 6428 2920 6e6f 7420 696e 2073 7973  cwd() not in sys
+00014d00: 2e70 6174 683a 2073 7973 2e70 6174 683d  .path: sys.path=
+00014d10: 5b6f 732e 6765 7463 7764 2829 5d2b 7379  [os.getcwd()]+sy
+00014d20: 732e 7061 7468 0a0a 2020 2020 6966 206e  s.path..    if n
+00014d30: 6f74 2076 6972 7475 616c 5f65 6e76 2061  ot virtual_env a
+00014d40: 6e64 2069 6e73 7461 6c6c 5f61 6363 6f75  nd install_accou
+00014d50: 6e74 2069 6e20 5b27 7573 6572 272c 272d  nt in ['user','-
+00014d60: 2d75 7365 7227 2c27 7065 7273 6f6e 616c  -user','personal
+00014d70: 272c 276d 7961 6363 6f75 6e74 272c 2761  ','myaccount','a
+00014d80: 6363 6f75 6e74 272c 276d 7973 656c 6627  ccount','myself'
+00014d90: 5d3a 0a20 2020 2020 2020 2069 6e73 7461  ]:.        insta
+00014da0: 6c6c 5f61 6363 6f75 6e74 3d27 2d2d 7573  ll_account='--us
+00014db0: 6572 270a 2020 2020 656c 7365 3a0a 2020  er'.    else:.  
+00014dc0: 2020 2020 2020 696e 7374 616c 6c5f 6163        install_ac
+00014dd0: 636f 756e 743d 2727 0a0a 2020 2020 6465  count=''..    de
+00014de0: 6620 4368 6563 6b4f 626a 286f 626a 293a  f CheckObj(obj):
+00014df0: 0a20 2020 2020 2020 206f 626a 5f64 6972  .        obj_dir
+00014e00: 3d64 6972 286f 626a 290a 2020 2020 2020  =dir(obj).      
+00014e10: 2020 6f62 6a5f 6e61 6d65 3d74 7970 6528    obj_name=type(
+00014e20: 6f62 6a29 2e5f 5f6e 616d 655f 5f0a 2020  obj).__name__.  
+00014e30: 2020 2020 2020 6966 206f 626a 5f6e 616d        if obj_nam
+00014e40: 6520 696e 205b 2766 756e 6374 696f 6e27  e in ['function'
+00014e50: 5d3a 2072 6574 7572 6e20 6f62 6a5f 6e61  ]: return obj_na
+00014e60: 6d65 0a20 2020 2020 2020 2069 6620 275f  me.        if '_
+00014e70: 5f64 6963 745f 5f27 2069 6e20 6f62 6a5f  _dict__' in obj_
+00014e80: 6469 723a 0a20 2020 2020 2020 2020 2020  dir:.           
+00014e90: 2069 6620 6f62 6a5f 6e61 6d65 203d 3d20   if obj_name == 
+00014ea0: 2774 7970 6527 3a20 7265 7475 726e 2027  'type': return '
+00014eb0: 636c 6173 736f 626a 270a 2020 2020 2020  classobj'.      
+00014ec0: 2020 2020 2020 7265 7475 726e 2027 696e        return 'in
+00014ed0: 7374 616e 6365 270a 2020 2020 2020 2020  stance'.        
+00014ee0: 7265 7475 726e 206f 626a 5f6e 616d 652e  return obj_name.
+00014ef0: 6c6f 7765 7228 290a 0a20 2020 206e 696e  lower()..    nin
+00014f00: 7073 3d5b 5d0a 2020 2020 666f 7220 696e  ps=[].    for in
+00014f10: 7020 696e 2069 6e70 733a 0a20 2020 2020  p in inps:.     
+00014f20: 2020 206e 696e 7073 3d6e 696e 7073 2b69     ninps=ninps+i
+00014f30: 6e70 2e73 706c 6974 2827 2c27 290a 2020  np.split(',').  
+00014f40: 2020 6c6f 6164 5f66 6169 6c65 643d 5b5d    load_failed=[]
+00014f50: 0a20 2020 2066 6f72 2069 6e70 2069 6e20  .    for inp in 
+00014f60: 6e69 6e70 733a 0a20 2020 2020 2020 2023  ninps:.        #
+00014f70: 2069 6620 696e 7020 6973 2046 696c 6520   if inp is File 
+00014f80: 7468 656e 2061 7574 6f6d 6174 6963 616c  then automatical
+00014f90: 6c79 2067 6574 2074 6865 2050 6174 6820  ly get the Path 
+00014fa0: 616e 6420 6669 6c65 206e 616d 650a 2020  and file name.  
+00014fb0: 2020 2020 2020 2320 616e 6420 6175 746f        # and auto
+00014fc0: 6d61 7469 6361 6c6c 7920 6164 6469 6e67  matically adding
+00014fd0: 2050 6174 6820 746f 2070 6174 6820 616e   Path to path an
+00014fe0: 6420 696d 706f 7274 2074 6865 2046 696c  d import the Fil
+00014ff0: 6520 4e61 6d65 0a20 2020 2020 2020 2069  e Name.        i
+00015000: 6620 6f73 2e70 6174 682e 6973 6669 6c65  f os.path.isfile
+00015010: 2869 6e70 293a 2023 2073 7065 6369 616c  (inp): # special
+00015020: 2066 696c 6520 6d6f 6475 6c65 0a20 2020   file module.   
+00015030: 2020 2020 2020 2020 2069 7061 7468 3d6f           ipath=o
+00015040: 732e 7061 7468 2e64 6972 6e61 6d65 2869  s.path.dirname(i
+00015050: 6e70 290a 2020 2020 2020 2020 2020 2020  np).            
+00015060: 6966 696c 653d 6f73 2e70 6174 682e 6261  ifile=os.path.ba
+00015070: 7365 6e61 6d65 2869 6e70 290a 2020 2020  sename(inp).    
+00015080: 2020 2020 2020 2020 6966 696c 655f 613d          ifile_a=
+00015090: 6966 696c 652e 7370 6c69 7428 272e 2729  ifile.split('.')
+000150a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000150b0: 6c65 6e28 6966 696c 655f 6129 203e 2032  len(ifile_a) > 2
+000150c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000150d0: 2020 6966 2064 6267 3a0a 2020 2020 2020    if dbg:.      
+000150e0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+000150f0: 696e 7428 272a 2a2a 204e 6f74 2073 7570  int('*** Not sup
+00015100: 706f 7274 207b 7d20 6669 6c65 6e61 6d65  port {} filename
+00015110: 272e 666f 726d 6174 2869 6e70 2929 0a20  '.format(inp)). 
+00015120: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00015130: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
+00015140: 2020 2020 696e 703d 6966 696c 655f 615b      inp=ifile_a[
+00015150: 305d 0a20 2020 2020 2020 2020 2020 2069  0].            i
+00015160: 6620 6970 6174 6820 6e6f 7420 696e 2073  f ipath not in s
+00015170: 7973 2e70 6174 683a 0a20 2020 2020 2020  ys.path:.       
+00015180: 2020 2020 2020 2020 2073 7973 2e70 6174           sys.pat
+00015190: 683d 5b69 7061 7468 5d2b 7379 732e 7061  h=[ipath]+sys.pa
+000151a0: 7468 0a20 2020 2020 2020 2020 2020 206c  th.            l
+000151b0: 6f61 6465 642c 6d6f 6475 6c65 3d4d 6f64  oaded,module=Mod
+000151c0: 4c6f 6164 2869 6e70 2c66 6f72 6365 3d66  Load(inp,force=f
+000151d0: 6f72 6365 2c67 6c6f 6261 6c65 6e76 3d67  orce,globalenv=g
+000151e0: 6c6f 6261 6c65 6e76 2c75 6e6c 6f61 643d  lobalenv,unload=
+000151f0: 756e 6c6f 6164 2c72 655f 6c6f 6164 3d72  unload,re_load=r
+00015200: 655f 6c6f 6164 290a 2020 2020 2020 2020  e_load).        
+00015210: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
+00015220: 2020 2020 2065 6c73 653a 2023 2043 6865       else: # Che
+00015230: 636b 204c 6f63 616c 2046 696c 650a 2020  ck Local File.  
+00015240: 2020 2020 2020 2020 2020 696e 705f 613d            inp_a=
+00015250: 696e 702e 7370 6c69 7428 290a 2020 2020  inp.split().    
+00015260: 2020 2020 2020 2020 696e 705f 6368 6b5f          inp_chk_
+00015270: 6669 6c65 3d27 7b7d 2e70 7927 2e66 6f72  file='{}.py'.for
+00015280: 6d61 7428 696e 705f 615b 315d 2069 6620  mat(inp_a[1] if 
+00015290: 696e 705f 615b 305d 2069 6e20 5b27 696d  inp_a[0] in ['im
+000152a0: 706f 7274 272c 2766 726f 6d27 5d20 656c  port','from'] el
+000152b0: 7365 2069 6e70 290a 2020 2020 2020 2020  se inp).        
+000152c0: 2020 2020 6966 206f 732e 7061 7468 2e69      if os.path.i
+000152d0: 7366 696c 6528 696e 705f 6368 6b5f 6669  sfile(inp_chk_fi
+000152e0: 6c65 293a 0a20 2020 2020 2020 2020 2020  le):.           
+000152f0: 2020 2020 206c 6f61 6465 642c 6d6f 6475       loaded,modu
+00015300: 6c65 3d4d 6f64 4c6f 6164 2869 6e70 2c66  le=ModLoad(inp,f
+00015310: 6f72 6365 3d66 6f72 6365 2c67 6c6f 6261  orce=force,globa
+00015320: 6c65 6e76 3d67 6c6f 6261 6c65 6e76 2c75  lenv=globalenv,u
+00015330: 6e6c 6f61 643d 756e 6c6f 6164 2c72 655f  nload=unload,re_
+00015340: 6c6f 6164 3d72 655f 6c6f 6164 290a 2020  load=re_load).  
+00015350: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00015360: 6e74 696e 7565 0a20 2020 2020 2020 2069  ntinue.        i
+00015370: 6e70 5f61 3d69 6e70 2e73 706c 6974 2829  np_a=inp.split()
+00015380: 0a20 2020 2020 2020 2076 6572 7369 6f6e  .        version
+00015390: 3d4e 6f6e 650a 2020 2020 2020 2020 7665  =None.        ve
+000153a0: 725f 636f 6d70 6172 653d 4e6f 6e65 0a20  r_compare=None. 
+000153b0: 2020 2020 2020 2069 6620 6c65 6e28 696e         if len(in
+000153c0: 705f 6129 2069 6e20 5b31 2c32 5d20 616e  p_a) in [1,2] an
+000153d0: 6420 696e 705f 615b 305d 2069 6e20 5b27  d inp_a[0] in ['
+000153e0: 7265 7175 6972 6527 2c27 7265 7175 6972  require','requir
+000153f0: 656d 656e 7427 5d3a 0a20 2020 2020 2020  ement']:.       
+00015400: 2020 2020 2069 6620 6f73 2e70 6174 682e       if os.path.
+00015410: 6973 6669 6c65 2869 6e70 5f61 5b31 5d29  isfile(inp_a[1])
+00015420: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00015430: 2020 7271 3d5b 5d0a 2020 2020 2020 2020    rq=[].        
+00015440: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
+00015450: 6e28 696e 705f 615b 315d 2920 6173 2066  n(inp_a[1]) as f
+00015460: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00015470: 2020 2020 2020 7271 3d66 2e72 6561 6428        rq=f.read(
+00015480: 292e 7370 6c69 7428 275c 6e27 290a 2020  ).split('\n').  
+00015490: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+000154a0: 7220 6969 2069 6e20 7271 3a0a 2020 2020  r ii in rq:.    
+000154b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000154c0: 6966 206e 6f74 2069 693a 2063 6f6e 7469  if not ii: conti
+000154d0: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
+000154e0: 2020 2020 2020 2020 6969 5f6c 3d69 692e          ii_l=ii.
+000154f0: 7370 6c69 7428 290a 2020 2020 2020 2020  split().        
+00015500: 2020 2020 2020 2020 2020 2020 7665 7273              vers
+00015510: 696f 6e3d 4e6f 6e65 0a20 2020 2020 2020  ion=None.       
+00015520: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00015530: 6c65 6e28 6969 5f6c 2920 696e 205b 322c  len(ii_l) in [2,
+00015540: 335d 3a0a 2020 2020 2020 2020 2020 2020  3]:.            
+00015550: 2020 2020 2020 2020 2020 2020 6966 2027              if '
+00015560: 3d27 2069 6e20 6969 5f6c 5b31 5d20 6f72  =' in ii_l[1] or
+00015570: 2027 3e27 2069 6e20 6969 5f6c 5b31 5d20   '>' in ii_l[1] 
+00015580: 6f72 2027 3c27 2069 6e20 6969 5f6c 5b31  or '<' in ii_l[1
+00015590: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+000155a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000155b0: 6620 6c65 6e28 6969 5f6c 2920 3d3d 2033  f len(ii_l) == 3
+000155c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000155d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000155e0: 2020 7665 7273 696f 6e3d 6969 5f6c 5b31    version=ii_l[1
+000155f0: 5d2b 6969 5f6c 5b32 5d0a 2020 2020 2020  ]+ii_l[2].      
+00015600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015610: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00015620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015630: 2020 2020 2020 2020 2020 2020 7665 7273              vers
+00015640: 696f 6e3d 6969 5f6c 5b31 5d0a 2020 2020  ion=ii_l[1].    
+00015650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015660: 6969 5f61 3d69 695f 6c5b 305d 2e73 706c  ii_a=ii_l[0].spl
+00015670: 6974 2827 3a27 290a 2020 2020 2020 2020  it(':').        
+00015680: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+00015690: 656e 2869 695f 6129 203d 3d20 323a 0a20  en(ii_a) == 2:. 
+000156a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000156b0: 2020 2020 2020 2069 633d 496e 7374 616c         ic=Instal
+000156c0: 6c28 6969 5f61 5b31 5d2c 696e 7374 616c  l(ii_a[1],instal
+000156d0: 6c5f 6163 636f 756e 742c 7665 7273 696f  l_account,versio
+000156e0: 6e3d 7665 7273 696f 6e2c 696e 7374 616c  n=version,instal
+000156f0: 6c5f 6e61 6d65 3d69 6e73 7461 6c6c 5f6e  l_name=install_n
+00015700: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
+00015710: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00015720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015730: 2020 2020 2020 2069 633d 496e 7374 616c         ic=Instal
+00015740: 6c28 6969 5f61 5b30 5d2c 696e 7374 616c  l(ii_a[0],instal
+00015750: 6c5f 6163 636f 756e 742c 7665 7273 696f  l_account,versio
+00015760: 6e3d 7665 7273 696f 6e2c 696e 7374 616c  n=version,instal
+00015770: 6c5f 6e61 6d65 3d69 6e73 7461 6c6c 5f6e  l_name=install_n
+00015780: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
+00015790: 2020 2020 2020 2020 2069 6620 6963 3a0a           if ic:.
+000157a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000157b0: 2020 2020 2020 2020 6c6f 6164 6564 2c6d          loaded,m
+000157c0: 6f64 756c 653d 4d6f 644c 6f61 6428 6969  odule=ModLoad(ii
+000157d0: 5f61 5b30 5d2c 666f 7263 653d 666f 7263  _a[0],force=forc
+000157e0: 652c 676c 6f62 616c 656e 763d 676c 6f62  e,globalenv=glob
+000157f0: 616c 656e 762c 7265 5f6c 6f61 643d 7265  alenv,re_load=re
+00015800: 5f6c 6f61 6429 0a20 2020 2020 2020 2020  _load).         
+00015810: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
+00015820: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00015830: 2020 2020 2020 6f6b 2c6d 6f64 756c 652c        ok,module,
+00015840: 6e61 6d65 2c63 6c61 7373 5f6e 616d 652c  name,class_name,
+00015850: 7665 7273 696f 6e2c 7379 6d62 6f6c 3d4d  version,symbol=M
+00015860: 6f64 4e61 6d65 2869 6e70 290a 2020 2020  odName(inp).    
+00015870: 2020 2020 2020 2020 6966 206f 6b20 616e          if ok an
+00015880: 6420 7665 7273 696f 6e20 616e 6420 7379  d version and sy
+00015890: 6d62 6f6c 3a0a 2020 2020 2020 2020 2020  mbol:.          
+000158a0: 2020 2020 2020 6375 725f 7665 7273 696f        cur_versio
+000158b0: 6e3d 4d6f 6456 6572 7369 6f6e 286d 6f64  n=ModVersion(mod
+000158c0: 756c 6529 0a20 2020 2020 2020 2020 2020  ule).           
+000158d0: 2020 2020 2023 4d69 736d 6174 6368 6564       #Mismatched
+000158e0: 2076 6572 7369 6f6e 206f 7220 6e6f 7420   version or not 
+000158f0: 696e 7374 616c 6c65 6420 7468 656e 2069  installed then i
+00015900: 6e73 7461 6c6c 0a20 2020 2020 2020 2020  nstall.         
+00015910: 2020 2020 2020 2069 6620 6375 725f 7665         if cur_ve
+00015920: 7273 696f 6e20 6973 204e 6f6e 6520 6f72  rsion is None or
+00015930: 2028 6375 725f 7665 7273 696f 6e20 616e   (cur_version an
+00015940: 6420 6e6f 7420 436f 6d70 5665 7273 696f  d not CompVersio
+00015950: 6e28 6375 725f 7665 7273 696f 6e2c 7379  n(cur_version,sy
+00015960: 6d62 6f6c 2c76 6572 7369 6f6e 2929 3a0a  mbol,version)):.
+00015970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015980: 2020 2020 6966 2073 796d 626f 6c20 696e      if symbol in
+00015990: 205b 273e 272c 273e 3d27 5d3a 0a20 2020   ['>','>=']:.   
+000159a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000159b0: 2020 2020 2049 6e73 7461 6c6c 286d 6f64       Install(mod
+000159c0: 756c 652c 696e 7374 616c 6c5f 6163 636f  ule,install_acco
+000159d0: 756e 743d 696e 7374 616c 6c5f 6163 636f  unt=install_acco
+000159e0: 756e 742c 7570 6772 6164 653d 5472 7565  unt,upgrade=True
+000159f0: 2c69 6e73 7461 6c6c 5f6e 616d 653d 696e  ,install_name=in
+00015a00: 7374 616c 6c5f 6e61 6d65 290a 2020 2020  stall_name).    
+00015a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015a20: 656c 6966 2073 796d 626f 6c20 696e 205b  elif symbol in [
+00015a30: 273d 3d27 5d3a 0a20 2020 2020 2020 2020  '==']:.         
+00015a40: 2020 2020 2020 2020 2020 2020 2020 2049                 I
+00015a50: 6e73 7461 6c6c 286d 6f64 756c 652c 696e  nstall(module,in
+00015a60: 7374 616c 6c5f 6163 636f 756e 743d 696e  stall_account=in
+00015a70: 7374 616c 6c5f 6163 636f 756e 742c 7570  stall_account,up
+00015a80: 6772 6164 653d 5472 7565 2c76 6572 7369  grade=True,versi
+00015a90: 6f6e 3d27 3d3d 207b 7d27 2e66 6f72 6d61  on='== {}'.forma
+00015aa0: 7428 7665 7273 696f 6e29 2c69 6e73 7461  t(version),insta
+00015ab0: 6c6c 5f6e 616d 653d 696e 7374 616c 6c5f  ll_name=install_
+00015ac0: 6e61 6d65 290a 2020 2020 2020 2020 2020  name).          
+00015ad0: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
+00015ae0: 796d 626f 6c20 696e 205b 273c 272c 273c  ymbol in ['<','<
+00015af0: 3d27 5d3a 0a20 2020 2020 2020 2020 2020  =']:.           
+00015b00: 2020 2020 2020 2020 2020 2020 2049 6e73               Ins
+00015b10: 7461 6c6c 286d 6f64 756c 652c 696e 7374  tall(module,inst
+00015b20: 616c 6c5f 6163 636f 756e 743d 696e 7374  all_account=inst
+00015b30: 616c 6c5f 6163 636f 756e 742c 7570 6772  all_account,upgr
+00015b40: 6164 653d 5472 7565 2c76 6572 7369 6f6e  ade=True,version
+00015b50: 3d27 7b7d 207b 7d27 2e66 6f72 6d61 7428  ='{} {}'.format(
+00015b60: 7379 6d62 6f6c 2c76 6572 7369 6f6e 292c  symbol,version),
+00015b70: 696e 7374 616c 6c5f 6e61 6d65 3d69 6e73  install_name=ins
+00015b80: 7461 6c6c 5f6e 616d 6529 0a0a 2020 2020  tall_name)..    
+00015b90: 2020 2020 234c 6f61 6420 6d6f 6475 6c65      #Load module
+00015ba0: 0a20 2020 2020 2020 206c 6f61 6465 642c  .        loaded,
+00015bb0: 6d6f 6475 6c65 3d4d 6f64 4c6f 6164 2869  module=ModLoad(i
+00015bc0: 6e70 2c66 6f72 6365 3d66 6f72 6365 2c67  np,force=force,g
+00015bd0: 6c6f 6261 6c65 6e76 3d67 6c6f 6261 6c65  lobalenv=globale
+00015be0: 6e76 2c75 6e6c 6f61 643d 756e 6c6f 6164  nv,unload=unload
+00015bf0: 2c72 655f 6c6f 6164 3d72 655f 6c6f 6164  ,re_load=re_load
+00015c00: 290a 2020 2020 2020 2020 6966 206c 6f61  ).        if loa
+00015c10: 6465 6420 3d3d 2032 3a20 2375 6e6c 6f61  ded == 2: #unloa
+00015c20: 6465 640a 2020 2020 2020 2020 2020 2020  ded.            
+00015c30: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
+00015c40: 2069 6620 6c6f 6164 6564 203d 3d20 313a   if loaded == 1:
+00015c50: 2023 4e6f 7420 666f 756e 642f 696e 7374   #Not found/inst
+00015c60: 616c 6c65 6420 4d6f 6475 6c65 0a20 2020  alled Module.   
+00015c70: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00015c80: 4973 4e6f 6e65 2872 6571 7569 7265 6d65  IsNone(requireme
+00015c90: 6e74 7329 3a0a 2020 2020 2020 2020 2020  nts):.          
+00015ca0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00015cb0: 6e63 6528 7265 7175 6972 656d 656e 7473  nce(requirements
+00015cc0: 2c73 7472 293a 0a20 2020 2020 2020 2020  ,str):.         
+00015cd0: 2020 2020 2020 2020 2020 2072 6571 7569             requi
+00015ce0: 7265 6d65 6e74 733d 7265 7175 6972 656d  rements=requirem
+00015cf0: 656e 7473 2e73 706c 6974 2827 2c27 290a  ents.split(',').
 00015d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015d10: 2069 6620 6969 5f6c 5b31 5d20 696e 205b   if ii_l[1] in [
-00015d20: 273d 272c 273d 3d27 5d3a 0a20 2020 2020  '=','==']:.     
-00015d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015d40: 2020 2020 2020 2020 2020 2075 7067 7261             upgra
-00015d50: 6465 3d54 7275 650a 2020 2020 2020 2020  de=True.        
-00015d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015d70: 2020 2020 2020 2020 7665 7273 696f 6e3d          version=
-00015d80: 273d 3d20 272b 6969 5f6c 5b32 5d0a 2020  '== '+ii_l[2].  
+00015d10: 6966 2069 7369 6e73 7461 6e63 6528 7265  if isinstance(re
+00015d20: 7175 6972 656d 656e 7473 2c28 6c69 7374  quirements,(list
+00015d30: 2c74 7570 6c65 2929 3a0a 2020 2020 2020  ,tuple)):.      
+00015d40: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00015d50: 2069 2069 6e20 7265 7175 6972 656d 656e   i in requiremen
+00015d60: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
+00015d70: 2020 2020 2020 2020 2020 2020 6969 5f6c              ii_l
+00015d80: 3d69 2e73 706c 6974 2829 0a20 2020 2020  =i.split().     
 00015d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015da0: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
-00015db0: 695f 6c5b 315d 2069 6e20 5b27 3e27 2c27  i_l[1] in ['>','
-00015dc0: 3e3d 275d 3a0a 2020 2020 2020 2020 2020  >=']:.          
-00015dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015de0: 2020 2020 2020 7570 6772 6164 653d 5472        upgrade=Tr
-00015df0: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
-00015e00: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00015e10: 6c69 6620 6969 5f6c 5b31 5d20 696e 205b  lif ii_l[1] in [
-00015e20: 273c 272c 273c 3d27 5d3a 0a20 2020 2020  '<','<=']:.     
-00015e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015e40: 2020 2020 2020 2020 2020 2075 7067 7261             upgra
-00015e50: 6465 3d54 7275 650a 2020 2020 2020 2020  de=True.        
-00015e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015e70: 2020 2020 2020 2020 7665 7273 696f 6e3d          version=
-00015e80: 6969 5f6c 5b69 5d2b 2720 272b 6969 5f6c  ii_l[i]+' '+ii_l
-00015e90: 5b32 5d0a 2020 2020 2020 2020 2020 2020  [2].            
-00015ea0: 2020 2020 2020 2020 2020 2020 6969 5f61              ii_a
-00015eb0: 3d69 695f 6c5b 305d 2e73 706c 6974 2827  =ii_l[0].split('
-00015ec0: 3a27 290a 2020 2020 2020 2020 2020 2020  :').            
-00015ed0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00015ee0: 656e 2869 695f 6129 203d 3d20 323a 0a20  en(ii_a) == 2:. 
-00015ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015f00: 2020 2020 2020 2020 2020 2069 633d 496e             ic=In
-00015f10: 7374 616c 6c28 6969 5f61 5b31 5d2c 696e  stall(ii_a[1],in
-00015f20: 7374 616c 6c5f 6163 636f 756e 742c 7665  stall_account,ve
-00015f30: 7273 696f 6e3d 7665 7273 696f 6e2c 7570  rsion=version,up
-00015f40: 6772 6164 653d 7570 6772 6164 652c 696e  grade=upgrade,in
-00015f50: 7374 616c 6c5f 6e61 6d65 3d69 6e73 7461  stall_name=insta
-00015f60: 6c6c 5f6e 616d 6529 0a20 2020 2020 2020  ll_name).       
+00015da0: 2020 2076 6572 7369 6f6e 3d4e 6f6e 650a     version=None.
+00015db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015dc0: 2020 2020 2020 2020 7570 6772 6164 653d          upgrade=
+00015dd0: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
+00015de0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00015df0: 206c 656e 2869 695f 6c29 203d 3d20 333a   len(ii_l) == 3:
+00015e00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015e10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00015e20: 6969 5f6c 5b31 5d20 696e 205b 273d 272c  ii_l[1] in ['=',
+00015e30: 273d 3d27 5d3a 0a20 2020 2020 2020 2020  '==']:.         
+00015e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015e50: 2020 2020 2020 2075 7067 7261 6465 3d54         upgrade=T
+00015e60: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+00015e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015e80: 2020 2020 7665 7273 696f 6e3d 273d 3d20      version='== 
+00015e90: 272b 6969 5f6c 5b32 5d0a 2020 2020 2020  '+ii_l[2].      
+00015ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015eb0: 2020 2020 2020 656c 6966 2069 695f 6c5b        elif ii_l[
+00015ec0: 315d 2069 6e20 5b27 3e27 2c27 3e3d 275d  1] in ['>','>=']
+00015ed0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00015ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015ef0: 2020 7570 6772 6164 653d 5472 7565 0a20    upgrade=True. 
+00015f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015f10: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00015f20: 6969 5f6c 5b31 5d20 696e 205b 273c 272c  ii_l[1] in ['<',
+00015f30: 273c 3d27 5d3a 0a20 2020 2020 2020 2020  '<=']:.         
+00015f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015f50: 2020 2020 2020 2075 7067 7261 6465 3d54         upgrade=T
+00015f60: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
 00015f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015f80: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00015f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015fa0: 2020 2069 633d 496e 7374 616c 6c28 6969     ic=Install(ii
-00015fb0: 5f61 5b30 5d2c 696e 7374 616c 6c5f 6163  _a[0],install_ac
-00015fc0: 636f 756e 742c 7665 7273 696f 6e3d 7665  count,version=ve
-00015fd0: 7273 696f 6e2c 7570 6772 6164 653d 7570  rsion,upgrade=up
-00015fe0: 6772 6164 652c 696e 7374 616c 6c5f 6e61  grade,install_na
-00015ff0: 6d65 3d69 6e73 7461 6c6c 5f6e 616d 6529  me=install_name)
-00016000: 0a20 2020 2020 2020 2020 2020 2023 496e  .            #In
-00016010: 7374 616c 6c20 6175 746f 5f69 6e73 7461  stall auto_insta
-00016020: 6c6c 2061 6e64 206e 6f74 2069 6e73 7461  ll and not insta
-00016030: 6c6c 6564 0a20 2020 2020 2020 2020 2020  lled.           
-00016040: 2065 6c69 6620 6175 746f 5f69 6e73 7461   elif auto_insta
-00016050: 6c6c 2061 6e64 2049 6e73 7461 6c6c 286d  ll and Install(m
-00016060: 6f64 756c 652c 696e 7374 616c 6c5f 6163  odule,install_ac
-00016070: 636f 756e 742c 696e 7374 616c 6c5f 6e61  count,install_na
-00016080: 6d65 3d69 6e73 7461 6c6c 5f6e 616d 6529  me=install_name)
-00016090: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000160a0: 2020 6c6f 6164 6564 2c6d 6f64 756c 653d    loaded,module=
-000160b0: 4d6f 644c 6f61 6428 696e 702c 666f 7263  ModLoad(inp,forc
-000160c0: 653d 666f 7263 652c 676c 6f62 616c 656e  e=force,globalen
-000160d0: 763d 676c 6f62 616c 656e 762c 7265 5f6c  v=globalenv,re_l
-000160e0: 6f61 643d 7265 5f6c 6f61 6429 0a20 2020  oad=re_load).   
-000160f0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00016100: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00016110: 6620 6462 673a 0a20 2020 2020 2020 2020  f dbg:.         
-00016120: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00016130: 2827 2a2a 2a20 496d 706f 7274 2045 7272  ('*** Import Err
-00016140: 6f72 206f 7220 4e65 6564 2069 6e73 7461  or or Need insta
-00016150: 6c6c 2077 6974 6820 5355 444f 206f 7220  ll with SUDO or 
-00016160: 524f 4f54 206f 7220 2d2d 7573 6572 2070  ROOT or --user p
-00016170: 6572 6d69 7373 696f 6e27 290a 2020 2020  ermission').    
-00016180: 2020 2020 2020 2020 2020 2020 6c6f 6164              load
-00016190: 5f66 6169 6c65 642e 6170 7065 6e64 2869  _failed.append(i
-000161a0: 6e70 290a 2020 2020 2020 2020 2020 2020  np).            
-000161b0: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
-000161c0: 2020 2020 2069 6620 6c6f 6164 6564 206e       if loaded n
-000161d0: 6f74 2069 6e20 5b4e 6f6e 652c 302c 315d  ot in [None,0,1]
-000161e0: 3a20 2320 696d 706f 7274 2077 696c 6463  : # import wildc
-000161f0: 6172 640a 2020 2020 2020 2020 2020 2020  ard.            
-00016200: 666f 7220 6969 2069 6e20 6c6f 6164 6564  for ii in loaded
-00016210: 2e5f 5f64 6963 745f 5f2e 6b65 7973 2829  .__dict__.keys()
-00016220: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00016230: 2020 6966 2069 6920 6e6f 7420 696e 205b    if ii not in [
-00016240: 275f 5f6e 616d 655f 5f27 2c27 5f5f 646f  '__name__','__do
-00016250: 635f 5f27 2c27 5f5f 7061 636b 6167 655f  c__','__package_
-00016260: 5f27 2c27 5f5f 6c6f 6164 6572 5f5f 272c  _','__loader__',
-00016270: 275f 5f73 7065 635f 5f27 2c27 5f5f 6669  '__spec__','__fi
-00016280: 6c65 5f5f 272c 275f 5f63 6163 6865 645f  le__','__cached_
-00016290: 5f27 2c27 5f5f 6275 696c 7469 6e73 5f5f  _','__builtins__
-000162a0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-000162b0: 2020 2020 2020 2020 6966 2069 6920 696e          if ii in
-000162c0: 2067 6c6f 6261 6c65 6e76 3a0a 2020 2020   globalenv:.    
-000162d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000162e0: 2020 2020 2320 7377 6170 2053 616d 6520      # swap Same 
-000162f0: 4e61 6d65 2062 6574 7765 656e 206d 6f64  Name between mod
-00016300: 756c 6528 6d79 206d 6f64 756c 6520 6f66  ule(my module of
-00016310: 2074 6865 2077 696c 6420 6361 7264 2920   the wild card) 
-00016320: 616e 6420 636c 6173 7328 7769 6c64 2063  and class(wild c
-00016330: 6172 6420 696d 706f 7274 2063 6c61 7373  ard import class
-00016340: 206e 616d 6529 0a20 2020 2020 2020 2020   name).         
-00016350: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00016360: 6620 6969 2069 6e20 6c6f 6164 6564 2e5f  f ii in loaded._
-00016370: 5f64 6963 745f 5f2e 6b65 7973 2829 3a0a  _dict__.keys():.
-00016380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016390: 2020 2020 2020 2020 2020 2020 6966 2043              if C
-000163a0: 6865 636b 4f62 6a28 676c 6f62 616c 656e  heckObj(globalen
-000163b0: 765b 6969 5d29 203d 3d20 276d 6f64 756c  v[ii]) == 'modul
-000163c0: 6527 2061 6e64 2043 6865 636b 4f62 6a28  e' and CheckObj(
-000163d0: 6c6f 6164 6564 2e5f 5f64 6963 745f 5f5b  loaded.__dict__[
-000163e0: 6969 5d29 203d 3d20 2763 6c61 7373 6f62  ii]) == 'classob
-000163f0: 6a27 3a0a 2320 2020 2020 2020 2020 2020  j':.#           
-00016400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016410: 2020 2020 2054 4d50 3d67 6c6f 6261 6c65       TMP=globale
-00016420: 6e76 5b69 695d 2023 206d 6f76 6520 746f  nv[ii] # move to
-00016430: 206c 6f63 616c 2074 656d 706f 7261 7920   local temporay 
-00016440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016460: 2067 6c6f 6261 6c65 6e76 5b69 695d 3d6c   globalenv[ii]=l
-00016470: 6f61 6465 642e 5f5f 6469 6374 5f5f 5b69  oaded.__dict__[i
-00016480: 695d 0a20 2020 2020 2020 2020 2020 2020  i].             
+00015f80: 2020 2020 7665 7273 696f 6e3d 6969 5f6c      version=ii_l
+00015f90: 5b69 5d2b 2720 272b 6969 5f6c 5b32 5d0a  [i]+' '+ii_l[2].
+00015fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015fb0: 2020 2020 2020 2020 6969 5f61 3d69 695f          ii_a=ii_
+00015fc0: 6c5b 305d 2e73 706c 6974 2827 3a27 290a  l[0].split(':').
+00015fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015fe0: 2020 2020 2020 2020 6966 206c 656e 2869          if len(i
+00015ff0: 695f 6129 203d 3d20 323a 0a20 2020 2020  i_a) == 2:.     
+00016000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016010: 2020 2020 2020 2069 633d 496e 7374 616c         ic=Instal
+00016020: 6c28 6969 5f61 5b31 5d2c 696e 7374 616c  l(ii_a[1],instal
+00016030: 6c5f 6163 636f 756e 742c 7665 7273 696f  l_account,versio
+00016040: 6e3d 7665 7273 696f 6e2c 7570 6772 6164  n=version,upgrad
+00016050: 653d 7570 6772 6164 652c 696e 7374 616c  e=upgrade,instal
+00016060: 6c5f 6e61 6d65 3d69 6e73 7461 6c6c 5f6e  l_name=install_n
+00016070: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
+00016080: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00016090: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000160a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000160b0: 633d 496e 7374 616c 6c28 6969 5f61 5b30  c=Install(ii_a[0
+000160c0: 5d2c 696e 7374 616c 6c5f 6163 636f 756e  ],install_accoun
+000160d0: 742c 7665 7273 696f 6e3d 7665 7273 696f  t,version=versio
+000160e0: 6e2c 7570 6772 6164 653d 7570 6772 6164  n,upgrade=upgrad
+000160f0: 652c 696e 7374 616c 6c5f 6e61 6d65 3d69  e,install_name=i
+00016100: 6e73 7461 6c6c 5f6e 616d 6529 0a20 2020  nstall_name).   
+00016110: 2020 2020 2020 2020 2023 496e 7374 616c           #Instal
+00016120: 6c20 6175 746f 5f69 6e73 7461 6c6c 2061  l auto_install a
+00016130: 6e64 206e 6f74 2069 6e73 7461 6c6c 6564  nd not installed
+00016140: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+00016150: 6620 6175 746f 5f69 6e73 7461 6c6c 2061  f auto_install a
+00016160: 6e64 2049 6e73 7461 6c6c 286d 6f64 756c  nd Install(modul
+00016170: 652c 696e 7374 616c 6c5f 6163 636f 756e  e,install_accoun
+00016180: 742c 696e 7374 616c 6c5f 6e61 6d65 3d69  t,install_name=i
+00016190: 6e73 7461 6c6c 5f6e 616d 6529 3a0a 2020  nstall_name):.  
+000161a0: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
+000161b0: 6164 6564 2c6d 6f64 756c 653d 4d6f 644c  aded,module=ModL
+000161c0: 6f61 6428 696e 702c 666f 7263 653d 666f  oad(inp,force=fo
+000161d0: 7263 652c 676c 6f62 616c 656e 763d 676c  rce,globalenv=gl
+000161e0: 6f62 616c 656e 762c 7265 5f6c 6f61 643d  obalenv,re_load=
+000161f0: 7265 5f6c 6f61 6429 0a20 2020 2020 2020  re_load).       
+00016200: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00016210: 2020 2020 2020 2020 2020 2069 6620 6462             if db
+00016220: 673a 0a20 2020 2020 2020 2020 2020 2020  g:.             
+00016230: 2020 2020 2020 2070 7269 6e74 2827 2a2a         print('**
+00016240: 2a20 496d 706f 7274 2045 7272 6f72 206f  * Import Error o
+00016250: 7220 4e65 6564 2069 6e73 7461 6c6c 2077  r Need install w
+00016260: 6974 6820 5355 444f 206f 7220 524f 4f54  ith SUDO or ROOT
+00016270: 206f 7220 2d2d 7573 6572 2070 6572 6d69   or --user permi
+00016280: 7373 696f 6e27 290a 2020 2020 2020 2020  ssion').        
+00016290: 2020 2020 2020 2020 6c6f 6164 5f66 6169          load_fai
+000162a0: 6c65 642e 6170 7065 6e64 2869 6e70 290a  led.append(inp).
+000162b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000162c0: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
+000162d0: 2069 6620 6c6f 6164 6564 206e 6f74 2069   if loaded not i
+000162e0: 6e20 5b4e 6f6e 652c 302c 315d 3a20 2320  n [None,0,1]: # 
+000162f0: 696d 706f 7274 2077 696c 6463 6172 640a  import wildcard.
+00016300: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00016310: 6969 2069 6e20 6c6f 6164 6564 2e5f 5f64  ii in loaded.__d
+00016320: 6963 745f 5f2e 6b65 7973 2829 3a0a 2020  ict__.keys():.  
+00016330: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00016340: 2069 6920 6e6f 7420 696e 205b 275f 5f6e   ii not in ['__n
+00016350: 616d 655f 5f27 2c27 5f5f 646f 635f 5f27  ame__','__doc__'
+00016360: 2c27 5f5f 7061 636b 6167 655f 5f27 2c27  ,'__package__','
+00016370: 5f5f 6c6f 6164 6572 5f5f 272c 275f 5f73  __loader__','__s
+00016380: 7065 635f 5f27 2c27 5f5f 6669 6c65 5f5f  pec__','__file__
+00016390: 272c 275f 5f63 6163 6865 645f 5f27 2c27  ','__cached__','
+000163a0: 5f5f 6275 696c 7469 6e73 5f5f 275d 3a0a  __builtins__']:.
+000163b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000163c0: 2020 2020 6966 2069 6920 696e 2067 6c6f      if ii in glo
+000163d0: 6261 6c65 6e76 3a0a 2020 2020 2020 2020  balenv:.        
+000163e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000163f0: 2320 7377 6170 2053 616d 6520 4e61 6d65  # swap Same Name
+00016400: 2062 6574 7765 656e 206d 6f64 756c 6528   between module(
+00016410: 6d79 206d 6f64 756c 6520 6f66 2074 6865  my module of the
+00016420: 2077 696c 6420 6361 7264 2920 616e 6420   wild card) and 
+00016430: 636c 6173 7328 7769 6c64 2063 6172 6420  class(wild card 
+00016440: 696d 706f 7274 2063 6c61 7373 206e 616d  import class nam
+00016450: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+00016460: 2020 2020 2020 2020 2020 2069 6620 6969             if ii
+00016470: 2069 6e20 6c6f 6164 6564 2e5f 5f64 6963   in loaded.__dic
+00016480: 745f 5f2e 6b65 7973 2829 3a0a 2020 2020  t__.keys():.    
 00016490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000164a0: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
-000164b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000164c0: 2020 2020 6966 206e 6f74 2066 6f72 6365      if not force
-000164d0: 3a20 636f 6e74 696e 7565 2023 204e 6f74  : continue # Not
-000164e0: 2066 6f72 6365 2074 6865 6e20 6967 6e6f   force then igno
-000164f0: 7265 2073 616d 6520 6e61 6d65 0a20 2020  re same name.   
-00016500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016510: 2067 6c6f 6261 6c65 6e76 5b69 695d 3d6c   globalenv[ii]=l
-00016520: 6f61 6465 642e 5f5f 6469 6374 5f5f 5b69  oaded.__dict__[i
-00016530: 695d 0a20 2020 2072 6574 7572 6e20 6c6f  i].    return lo
-00016540: 6164 5f66 6169 6c65 640a 0a64 6566 204d  ad_failed..def M
-00016550: 6574 686f 6449 6e43 6c61 7373 2863 6c61  ethodInClass(cla
-00016560: 7373 5f6e 616d 6529 3a0a 2020 2020 2727  ss_name):.    ''
-00016570: 270a 2020 2020 4765 7420 4d65 7468 6f64  '.    Get Method
-00016580: 206c 6973 7420 696e 2043 6c61 7373 0a20   list in Class. 
-00016590: 2020 2027 2727 0a20 2020 2072 6574 3d64     '''.    ret=d
-000165a0: 6972 2863 6c61 7373 5f6e 616d 6529 0a20  ir(class_name). 
-000165b0: 2020 2069 6620 6861 7361 7474 7228 636c     if hasattr(cl
-000165c0: 6173 735f 6e61 6d65 2c27 5f5f 6261 7365  ass_name,'__base
-000165d0: 735f 5f27 293a 0a20 2020 2020 2020 2066  s__'):.        f
-000165e0: 6f72 2062 6173 6520 696e 2063 6c61 7373  or base in class
-000165f0: 5f6e 616d 652e 5f5f 6261 7365 735f 5f3a  _name.__bases__:
-00016600: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00016610: 3d72 6574 2b4d 6574 686f 6449 6e43 6c61  =ret+MethodInCla
-00016620: 7373 2862 6173 6529 0a20 2020 2072 6574  ss(base).    ret
-00016630: 7572 6e20 7265 740a 0a64 6566 204f 626a  urn ret..def Obj
-00016640: 496e 666f 286f 626a 293a 0a20 2020 2027  Info(obj):.    '
-00016650: 2727 0a20 2020 2047 6574 206f 626a 6563  ''.    Get objec
-00016660: 7420 696e 666f 726d 6174 696f 6e20 3a20  t information : 
-00016670: 7479 7065 2c20 6e61 6d65 2c20 6d65 7468  type, name, meth
-00016680: 6f64 206c 6973 742c 2070 6174 682c 206d  od list, path, m
-00016690: 6f64 756c 655f 6e61 6d65 2c20 6d6f 6475  odule_name, modu
-000166a0: 6c65 5f76 6572 7369 6f6e 2c20 6d6f 6475  le_version, modu
-000166b0: 6c65 0a20 2020 2027 2727 0a20 2020 2072  le.    '''.    r
-000166c0: 743d 7b7d 0a20 2020 2072 745b 2774 7970  t={}.    rt['typ
-000166d0: 6527 5d3d 7479 7065 286f 626a 292e 5f5f  e']=type(obj).__
-000166e0: 6e61 6d65 5f5f 0a20 2020 2072 745b 276e  name__.    rt['n
-000166f0: 616d 6527 5d3d 6f62 6a2e 5f5f 6e61 6d65  ame']=obj.__name
-00016700: 5f5f 0a20 2020 2072 745b 276d 6574 686f  __.    rt['metho
-00016710: 6473 275d 3d4d 6574 686f 6449 6e43 6c61  ds']=MethodInCla
-00016720: 7373 286f 626a 290a 2020 2020 6966 2072  ss(obj).    if r
-00016730: 745b 2774 7970 6527 5d20 696e 205b 276d  t['type'] in ['m
-00016740: 6f64 756c 6527 5d3a 0a20 2020 2020 2020  odule']:.       
-00016750: 2072 745b 2770 6174 6827 5d3d 6f62 6a2e   rt['path']=obj.
-00016760: 5f5f 7061 7468 5f5f 0a20 2020 2020 2020  __path__.       
-00016770: 2072 745b 2776 6572 7369 6f6e 275d 3d4d   rt['version']=M
-00016780: 6f64 5665 7273 696f 6e28 7274 5b27 6e61  odVersion(rt['na
-00016790: 6d65 275d 290a 2020 2020 2020 2020 7274  me']).        rt
-000167a0: 5b27 6d6f 6475 6c65 5f6e 616d 6527 5d3d  ['module_name']=
-000167b0: 6f62 6a2e 5f5f 6e61 6d65 5f5f 0a20 2020  obj.__name__.   
-000167c0: 2020 2020 2072 745b 276d 6f64 756c 6527       rt['module'
-000167d0: 5d3d 6f62 6a0a 2020 2020 656c 6966 2072  ]=obj.    elif r
-000167e0: 745b 2774 7970 6527 5d20 696e 205b 2766  t['type'] in ['f
-000167f0: 756e 6374 696f 6e27 5d3a 0a20 2020 2020  unction']:.     
-00016800: 2020 2072 745b 2770 6174 6827 5d3d 6f73     rt['path']=os
-00016810: 2e70 6174 682e 6162 7370 6174 6828 696e  .path.abspath(in
-00016820: 7370 6563 742e 6765 7466 696c 6528 6f62  spect.getfile(ob
-00016830: 6a29 290a 2020 2020 2020 2020 7274 5b27  j)).        rt['
-00016840: 6d6f 6475 6c65 275d 3d69 6e73 7065 6374  module']=inspect
-00016850: 2e67 6574 6d6f 6475 6c65 286f 626a 290a  .getmodule(obj).
-00016860: 2020 2020 2020 2020 7274 5b27 6d6f 6475          rt['modu
-00016870: 6c65 5f6e 616d 6527 5d3d 7274 5b27 6d6f  le_name']=rt['mo
-00016880: 6475 6c65 275d 2e5f 5f6e 616d 655f 5f0a  dule'].__name__.
-00016890: 2020 2020 2020 2020 7274 5b27 6d6f 6475          rt['modu
-000168a0: 6c65 5f76 6572 7369 6f6e 275d 3d4d 6f64  le_version']=Mod
-000168b0: 5665 7273 696f 6e28 7274 5b27 6d6f 6475  Version(rt['modu
-000168c0: 6c65 5f6e 616d 6527 5d29 0a23 2020 2020  le_name']).#    
-000168d0: 2020 2020 7274 5b27 6d65 7468 6f64 7327      rt['methods'
-000168e0: 5d3d 5b72 745b 276d 6f64 756c 655f 6e61  ]=[rt['module_na
-000168f0: 6d65 275d 5d0a 2020 2020 656c 6966 2072  me']].    elif r
-00016900: 745b 2774 7970 6527 5d20 696e 205b 2763  t['type'] in ['c
-00016910: 6c61 7373 275d 3a0a 2020 2020 2020 2020  lass']:.        
-00016920: 7274 5b27 6d6f 6475 6c65 5f6e 616d 6527  rt['module_name'
-00016930: 5d3d 6f62 6a2e 5f5f 6d6f 6475 6c65 5f5f  ]=obj.__module__
-00016940: 0a20 2020 2020 2020 2072 745b 2770 6174  .        rt['pat
-00016950: 6827 5d3d 6f73 2e70 6174 682e 6162 7370  h']=os.path.absp
-00016960: 6174 6828 7379 732e 6d6f 6475 6c65 735b  ath(sys.modules[
-00016970: 7274 5b27 6d6f 6475 6c65 5f6e 616d 6527  rt['module_name'
-00016980: 5d5d 2e5f 5f66 696c 655f 5f29 0a20 2020  ]].__file__).   
-00016990: 2020 2020 2072 745b 276d 6f64 756c 6527       rt['module'
-000169a0: 5d3d 7379 732e 6d6f 6475 6c65 735b 7274  ]=sys.modules[rt
-000169b0: 5b27 6d6f 6475 6c65 5f6e 616d 6527 5d5d  ['module_name']]
-000169c0: 0a20 2020 2020 2020 2072 745b 276d 6f64  .        rt['mod
-000169d0: 756c 655f 7665 7273 696f 6e27 5d3d 4d6f  ule_version']=Mo
-000169e0: 6456 6572 7369 6f6e 2872 745b 276d 6f64  dVersion(rt['mod
-000169f0: 756c 655f 6e61 6d65 275d 290a 2020 2020  ule_name']).    
-00016a00: 7265 7475 726e 2072 740a 0a64 6566 204d  return rt..def M
-00016a10: 794d 6f64 756c 6528 6465 6661 756c 743d  yModule(default=
-00016a20: 4661 6c73 652c 7061 7265 6e74 3d2d 3129  False,parent=-1)
-00016a30: 3a0a 2020 2020 2727 270a 2020 2020 4765  :.    '''.    Ge
-00016a40: 7420 6375 7272 656e 7420 6d6f 6475 6c65  t current module
-00016a50: 200a 2020 2020 2d20 7061 7265 6e74 0a20   .    - parent. 
-00016a60: 2020 2020 202d 3120 3a20 6d79 2063 7572       -1 : my cur
-00016a70: 7265 6e74 2070 7974 686f 6e20 7061 6765  rent python page
-00016a80: 2773 206d 6f64 756c 650a 2020 2020 2020  's module.      
-00016a90: 3020 203a 206d 7920 6675 6e63 7469 6f6e  0  : my function
-00016aa0: 2773 206d 6f64 756c 650a 2020 2020 2020  's module.      
-00016ab0: 3120 203a 206d 7920 7061 7265 6e74 2773  1  : my parent's
-00016ac0: 206d 6f64 756c 650a 2020 2020 2727 270a   module.    '''.
-00016ad0: 2020 2020 6966 2070 6172 656e 7420 3e3d      if parent >=
-00016ae0: 2030 3a0a 2020 2020 2020 2020 6c6f 633d   0:.        loc=
-00016af0: 312b 7061 7265 6e74 0a20 2020 2065 6c73  1+parent.    els
-00016b00: 653a 0a20 2020 2020 2020 206c 6f63 3d70  e:.        loc=p
-00016b10: 6172 656e 740a 2020 2020 7472 793a 0a20  arent.    try:. 
-00016b20: 2020 2020 2020 2023 6672 616d 653d 696e         #frame=in
-00016b30: 7370 6563 742e 7374 6163 6b28 295b 2d31  spect.stack()[-1
-00016b40: 5d0a 2020 2020 2020 2020 6672 616d 653d  ].        frame=
-00016b50: 696e 7370 6563 742e 7374 6163 6b28 290a  inspect.stack().
-00016b60: 2020 2020 2020 2020 6966 206c 656e 2866          if len(f
-00016b70: 7261 6d65 2920 3c3d 206c 6f63 3a0a 2020  rame) <= loc:.  
-00016b80: 2020 2020 2020 2020 2020 6c6f 633d 2d31            loc=-1
-00016b90: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00016ba0: 696e 7370 6563 742e 6765 746d 6f64 756c  inspect.getmodul
-00016bb0: 6528 6672 616d 655b 6c6f 635d 5b30 5d29  e(frame[loc][0])
-00016bc0: 0a20 2020 2065 7863 6570 743a 0a20 2020  .    except:.   
-00016bd0: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-00016be0: 756c 740a 0a64 6566 2043 616c 6c65 724e  ult..def CallerN
-00016bf0: 616d 6528 6465 6661 756c 743d 4661 6c73  ame(default=Fals
-00016c00: 652c 6465 7461 696c 3d46 616c 7365 293a  e,detail=False):
-00016c10: 0a20 2020 2027 2727 0a20 2020 2047 6574  .    '''.    Get
-00016c20: 2074 6865 2063 616c 6c65 7220 6e61 6d65   the caller name
-00016c30: 206f 6620 6d79 2067 726f 7570 2066 756e   of my group fun
-00016c40: 6374 696f 6e0a 2020 2020 6465 7461 696c  ction.    detail
-00016c50: 3d54 7275 653a 2072 6574 7572 6e20 2866  =True: return (f
-00016c60: 756e 6320 6e61 6d65 2c20 6c69 6e65 206e  unc name, line n
-00016c70: 756d 6265 722c 2066 696c 656e 616d 6529  umber, filename)
-00016c80: 0a20 2020 2064 6566 6175 6c74 2020 2020  .    default    
-00016c90: 3a20 4966 206e 6f74 2066 6f75 6e64 2063  : If not found c
-00016ca0: 616c 6c65 7220 6e61 6d65 2074 6865 6e20  aller name then 
-00016cb0: 7265 7475 726e 2064 6566 6175 6c74 0a0a  return default..
-00016cc0: 2020 2020 6465 6620 4128 293a 2020 2020      def A():    
-00016cd0: 2020 2020 2020 2020 2020 2023 4772 6f75             #Grou
-00016ce0: 7020 4128 290a 2020 2020 2020 2020 4361  p A().        Ca
-00016cf0: 6c6c 6572 4e61 6d65 2829 2020 2020 2020  llerName()      
-00016d00: 202d 3e20 4361 6c6c 6564 2062 7920 6d6f   -> Called by mo
-00016d10: 6475 6c65 2773 2041 2829 203d 3e20 410a  dule's A() => A.
-00016d20: 2020 2020 2020 2020 4228 290a 2020 2020          B().    
-00016d30: 6465 6620 4228 293a 2020 2020 2020 2020  def B():        
-00016d40: 2020 2020 2020 2023 4772 6f75 7020 4228         #Group B(
-00016d50: 290a 2020 2020 2020 2020 4361 6c6c 6572  ).        Caller
-00016d60: 4e61 6d65 2829 2020 2020 2020 202d 3e20  Name()       -> 
-00016d70: 4361 6c6c 6564 206d 7920 6772 6f75 7020  Called my group 
-00016d80: 6279 2041 2829 2066 756e 6374 696f 6e20  by A() function 
-00016d90: 3d3e 2041 0a20 2020 2020 2020 2064 6566  => A.        def
-00016da0: 2043 2829 3a0a 2020 2020 2020 2020 2020   C():.          
-00016db0: 2020 4361 6c6c 6572 4e61 6d65 2829 2020    CallerName()  
-00016dc0: 202d 3e20 4361 6c6c 6564 206d 7920 6772   -> Called my gr
-00016dd0: 6f75 7020 6279 2041 2829 2066 756e 6374  oup by A() funct
-00016de0: 696f 6e20 3d3e 2041 0a20 2020 2020 2020  ion => A.       
-00016df0: 2043 2829 0a20 2020 2041 2829 2020 2020   C().    A()    
-00016e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016e10: 2d3e 2043 616c 6c69 6e67 2064 6566 2041  -> Calling def A
-00016e20: 2829 2069 6e20 7079 7468 6f6e 2073 6372  () in python scr
-00016e30: 6970 7428 6d6f 6475 6c65 290a 2020 2020  ipt(module).    
-00016e40: 2727 270a 2020 2020 7472 793a 0a20 2020  '''.    try:.   
-00016e50: 2020 2020 2064 6570 3d6c 656e 2869 6e73       dep=len(ins
-00016e60: 7065 6374 2e73 7461 636b 2829 292d 320a  pect.stack())-2.
-00016e70: 2020 2020 2020 2020 6e61 6d65 3d73 7973          name=sys
-00016e80: 2e5f 6765 7466 7261 6d65 2864 6570 292e  ._getframe(dep).
-00016e90: 665f 636f 6465 2e63 6f5f 6e61 6d65 0a20  f_code.co_name. 
-00016ea0: 2020 2020 2020 2069 6620 6e61 6d65 203d         if name =
-00016eb0: 3d20 275f 626f 6f74 7374 7261 705f 696e  = '_bootstrap_in
-00016ec0: 6e65 7227 206f 7220 6e61 6d65 203d 3d20  ner' or name == 
-00016ed0: 275f 7275 6e5f 636f 6465 273a 0a20 2020  '_run_code':.   
-00016ee0: 2020 2020 2020 2020 2064 6570 3d33 0a20           dep=3. 
-00016ef0: 2020 2020 2020 2069 6620 6465 7461 696c         if detail
-00016f00: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00016f10: 7475 726e 2073 7973 2e5f 6765 7466 7261  turn sys._getfra
-00016f20: 6d65 2864 6570 292e 665f 636f 6465 2e63  me(dep).f_code.c
-00016f30: 6f5f 6e61 6d65 2c73 7973 2e5f 6765 7466  o_name,sys._getf
-00016f40: 7261 6d65 2864 6570 292e 665f 6c69 6e65  rame(dep).f_line
-00016f50: 6e6f 2c73 7973 2e5f 6765 7466 7261 6d65  no,sys._getframe
-00016f60: 2864 6570 292e 665f 636f 6465 2e63 6f5f  (dep).f_code.co_
-00016f70: 6669 6c65 6e61 6d65 0a20 2020 2020 2020  filename.       
-00016f80: 2072 6574 7572 6e20 7379 732e 5f67 6574   return sys._get
-00016f90: 6672 616d 6528 6465 7029 2e66 5f63 6f64  frame(dep).f_cod
-00016fa0: 652e 636f 5f6e 616d 650a 2020 2020 6578  e.co_name.    ex
-00016fb0: 6365 7074 3a0a 2020 2020 2020 2020 7265  cept:.        re
-00016fc0: 7475 726e 2064 6566 6175 6c74 0a0a 6465  turn default..de
-00016fd0: 6620 4672 616d 6532 4675 6e63 7469 6f6e  f Frame2Function
-00016fe0: 286f 626a 2c64 6566 6175 6c74 3d46 616c  (obj,default=Fal
-00016ff0: 7365 293a 0a20 2020 2027 2727 0a20 2020  se):.    '''.   
-00017000: 2047 6574 2046 756e 6374 696f 6e20 4f62   Get Function Ob
-00017010: 6a65 6374 2066 726f 6d20 6672 616d 6520  ject from frame 
-00017020: 6f72 2066 7261 6d65 2069 6e66 6f0a 2020  or frame info.  
-00017030: 2020 2727 270a 2020 2020 6f62 6a5f 7479    '''.    obj_ty
-00017040: 7065 3d54 7970 654e 616d 6528 6f62 6a29  pe=TypeName(obj)
-00017050: 0a20 2020 2023 6966 206f 626a 5f74 7970  .    #if obj_typ
-00017060: 6520 3d3d 2027 6675 6e63 7469 6f6e 273a  e == 'function':
-00017070: 2072 6574 7572 6e20 6f62 6a0a 2020 2020   return obj.    
-00017080: 6966 2049 7346 756e 6374 696f 6e28 6f62  if IsFunction(ob
-00017090: 6a29 3a20 7265 7475 726e 206f 626a 0a20  j): return obj. 
-000170a0: 2020 2069 6620 6f62 6a5f 7479 7065 203d     if obj_type =
-000170b0: 3d20 2766 7261 6d65 696e 666f 273a 0a20  = 'frameinfo':. 
-000170c0: 2020 2020 2020 2072 6574 7572 6e20 6763         return gc
-000170d0: 2e67 6574 5f72 6566 6572 7265 7273 286f  .get_referrers(o
-000170e0: 626a 2e66 7261 6d65 2e66 5f63 6f64 6529  bj.frame.f_code)
-000170f0: 5b30 5d0a 2020 2020 656c 6966 206f 626a  [0].    elif obj
-00017100: 5f74 7970 6520 3d3d 2027 6672 616d 6527  _type == 'frame'
-00017110: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00017120: 2067 632e 6765 745f 7265 6665 7272 6572   gc.get_referrer
-00017130: 7328 6f62 6a2e 665f 636f 6465 295b 305d  s(obj.f_code)[0]
-00017140: 0a20 2020 2072 6574 7572 6e20 6465 6661  .    return defa
-00017150: 756c 740a 0a64 6566 2046 756e 6374 696f  ult..def Functio
-00017160: 6e4e 616d 6528 7061 7265 6e74 3d30 2c64  nName(parent=0,d
-00017170: 6566 6175 6c74 3d46 616c 7365 2c68 6973  efault=False,his
-00017180: 746f 7279 3d46 616c 7365 2c74 7265 653d  tory=False,tree=
-00017190: 4661 6c73 652c 6172 6773 3d46 616c 7365  False,args=False
-000171a0: 2c6c 696e 655f 6e75 6d62 6572 3d46 616c  ,line_number=Fal
-000171b0: 7365 2c66 756c 6c5f 6669 6c65 6e61 6d65  se,full_filename
-000171c0: 3d46 616c 7365 2c66 696c 656e 616d 653d  =False,filename=
-000171d0: 4661 6c73 652c 6f62 6a3d 4661 6c73 652c  False,obj=False,
-000171e0: 7368 6f77 3d46 616c 7365 293a 0a20 2020  show=False):.   
-000171f0: 2027 2727 0a20 2020 2047 6574 2066 756e   '''.    Get fun
-00017200: 6374 696f 6e20 6e61 6d65 0a20 2020 2020  ction name.     
-00017210: 2d20 7061 7265 6e74 0a20 2020 2020 2020  - parent.       
-00017220: 3020 2020 2020 2020 2020 2020 203a 206d  0            : m
-00017230: 7920 6e61 6d65 2028 6465 6661 756c 7429  y name (default)
-00017240: 0a20 2020 2020 2020 3120 2020 2020 2020  .       1       
-00017250: 2020 2020 203a 206d 7920 7061 7265 6e74       : my parent
-00017260: 2066 756e 6374 696f 6e0a 2020 2020 2020   function.      
-00017270: 202e 2e2e 2020 2020 2020 2020 2020 3a20   ...          : 
-00017280: 676f 696e 6720 746f 7020 7061 7265 6e74  going top parent
-00017290: 2066 756e 6374 696f 6e0a 2020 2020 202d   function.     -
-000172a0: 2068 6973 746f 7279 2020 2020 2020 3a20   history      : 
-000172b0: 4765 7474 696e 6720 6869 7374 6f72 7920  Getting history 
-000172c0: 2872 6574 7572 6e20 6c69 7374 290a 2020  (return list).  
-000172d0: 2020 202d 2074 7265 6520 2020 2020 2020     - tree       
-000172e0: 2020 3a20 7472 6565 2020 2872 6574 7572    : tree  (retur
-000172f0: 6e20 6c69 7374 290a 2020 2020 2020 2020  n list).        
-00017300: 2020 2020 2020 2020 2020 2020 3a20 6966              : if
-00017310: 2065 7869 7374 2070 6172 656e 7420 7061   exist parent pa
-00017320: 7261 6d65 7465 7220 7468 656e 2068 6973  rameter then his
-00017330: 746f 7279 2066 726f 6d20 7061 7265 6e74  tory from parent
-00017340: 2074 6f20 6d65 0a20 2020 2020 2020 2d20   to me.       - 
-00017350: 7368 6f77 2020 2020 2020 203a 2073 686f  show       : sho
-00017360: 7720 7472 6565 206f 6e20 7363 7265 656e  w tree on screen
-00017370: 0a20 2020 2020 2d20 6172 6773 2020 2020  .     - args    
-00017380: 2020 2020 203a 2073 686f 7720 6172 6775       : show argu
-00017390: 6d65 6e74 730a 2020 2020 202d 206c 696e  ments.     - lin
-000173a0: 655f 6e75 6d62 6572 2020 3a20 7368 6f77  e_number  : show
-000173b0: 206c 696e 6520 6e75 6d62 6572 0a20 2020   line number.   
-000173c0: 2020 2d20 6669 6c65 6e61 6d65 2020 2020    - filename    
-000173d0: 203a 2073 686f 7720 6669 6c65 6e61 6d65   : show filename
-000173e0: 0a20 2020 2020 2d20 6675 6c6c 5f66 696c  .     - full_fil
-000173f0: 656e 616d 653a 2073 686f 7720 6675 6c6c  ename: show full
-00017400: 2070 6174 6820 6669 6c65 6e61 6d65 0a20   path filename. 
-00017410: 2020 2020 2d20 6f62 6a20 2020 2020 2020      - obj       
-00017420: 2020 203a 2047 6574 204f 424a 2028 7265     : Get OBJ (re
-00017430: 7475 726e 206c 6973 7429 0a20 2020 2027  turn list).    '
-00017440: 2727 0a20 2020 2074 7279 3a0a 2020 2020  ''.    try:.    
-00017450: 2020 2020 6d79 5f68 6973 746f 7279 3d69      my_history=i
-00017460: 6e73 7065 6374 2e73 7461 636b 2829 0a20  nspect.stack(). 
-00017470: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-00017480: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
-00017490: 740a 2020 2020 6966 2074 7265 653a 2068  t.    if tree: h
-000174a0: 6973 746f 7279 3d54 7275 650a 2020 2020  istory=True.    
-000174b0: 6966 2068 6973 746f 7279 3a0a 2020 2020  if history:.    
-000174c0: 2020 2020 7274 3d5b 5d0a 2020 2020 2020      rt=[].      
-000174d0: 2020 7370 6163 653d 2727 0a20 2020 2020    space=''.     
-000174e0: 2020 2023 666f 7220 6920 696e 2072 616e     #for i in ran
-000174f0: 6765 286c 656e 286d 795f 6869 7374 6f72  ge(len(my_histor
-00017500: 7929 2d31 2c30 2c2d 3129 3a0a 2020 2020  y)-1,0,-1):.    
-00017510: 2020 2020 6d79 5f68 6973 746f 7279 5f6d      my_history_m
-00017520: 3d6c 656e 286d 795f 6869 7374 6f72 7929  =len(my_history)
-00017530: 2d31 0a20 2020 2020 2020 206d 795f 6869  -1.        my_hi
-00017540: 7374 6f72 795f 613d 5b69 2066 6f72 2069  story_a=[i for i
-00017550: 2069 6e20 7261 6e67 6528 6c65 6e28 6d79   in range(len(my
-00017560: 5f68 6973 746f 7279 292d 3129 5d0a 2020  _history)-1)].  
-00017570: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00017580: 6e63 6528 7061 7265 6e74 2c73 7472 293a  nce(parent,str):
-00017590: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000175a0: 272d 2720 696e 2070 6172 656e 743a 0a20  '-' in parent:. 
-000175b0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-000175c0: 6172 656e 745f 613d 7061 7265 6e74 2e73  arent_a=parent.s
-000175d0: 706c 6974 2827 2d27 290a 2020 2020 2020  plit('-').      
-000175e0: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
-000175f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017600: 2020 2070 6172 656e 745f 653d 696e 7428     parent_e=int(
-00017610: 7061 7265 6e74 5f61 5b30 5d29 0a20 2020  parent_a[0]).   
-00017620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017630: 2023 6261 636b 776f 7264 0a20 2020 2020   #backword.     
-00017640: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00017650: 6e64 3d70 6172 656e 745f 6520 6966 2070  nd=parent_e if p
-00017660: 6172 656e 745f 6520 3c20 6c65 6e28 6d79  arent_e < len(my
-00017670: 5f68 6973 746f 7279 5f61 2920 656c 7365  _history_a) else
-00017680: 2030 0a20 2020 2020 2020 2020 2020 2020   0.             
-00017690: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-000176a0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000176b0: 6e64 3d30 0a20 2020 2020 2020 2020 2020  nd=0.           
-000176c0: 2020 2020 2020 2020 2070 6172 656e 745f           parent_
-000176d0: 653d 6d79 5f68 6973 746f 7279 5f61 5b65  e=my_history_a[e
-000176e0: 6e64 5d0a 2020 2020 2020 2020 2020 2020  nd].            
-000176f0: 2020 2020 6966 206c 656e 2870 6172 656e      if len(paren
-00017700: 745f 6129 203d 3d20 323a 0a20 2020 2020  t_a) == 2:.     
-00017710: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00017720: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-00017730: 2020 2020 2020 2020 2020 2020 7061 7265              pare
-00017740: 6e74 5f73 3d69 6e74 2870 6172 656e 745f  nt_s=int(parent_
-00017750: 615b 315d 290a 2020 2020 2020 2020 2020  a[1]).          
-00017760: 2020 2020 2020 2020 2020 2020 2020 2362                #b
-00017770: 6163 6b77 6f72 640a 2020 2020 2020 2020  ackword.        
-00017780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017790: 7374 6172 743d 7061 7265 6e74 5f73 2069  start=parent_s i
-000177a0: 6620 7061 7265 6e74 5f73 203e 2070 6172  f parent_s > par
-000177b0: 656e 745f 6520 616e 6420 7061 7265 6e74  ent_e and parent
-000177c0: 5f73 203c 206c 656e 286d 795f 6869 7374  _s < len(my_hist
-000177d0: 6f72 795f 6129 2065 6c73 6520 2d31 0a20  ory_a) else -1. 
-000177e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000177f0: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-00017800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017810: 2020 2073 7461 7274 3d2d 310a 2020 2020     start=-1.    
-00017820: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00017830: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00017840: 2020 2020 2020 7374 6172 743d 2d31 0a20        start=-1. 
-00017850: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00017860: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017870: 2073 7461 7274 3d2d 310a 2020 2020 2020   start=-1.      
-00017880: 2020 2020 2020 2020 2020 656e 643d 300a            end=0.
-00017890: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000178a0: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
-000178b0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-000178c0: 6172 656e 743d 696e 7428 7061 7265 6e74  arent=int(parent
-000178d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000178e0: 2020 2362 6163 6b77 6f72 640a 2020 2020    #backword.    
-000178f0: 2020 2020 2020 2020 2020 2020 7374 6172              star
-00017900: 743d 6d79 5f68 6973 746f 7279 5f61 5b70  t=my_history_a[p
-00017910: 6172 656e 745d 2069 6620 7061 7265 6e74  arent] if parent
-00017920: 203c 206c 656e 286d 795f 6869 7374 6f72   < len(my_histor
-00017930: 795f 6129 2065 6c73 6520 2d31 0a20 2020  y_a) else -1.   
-00017940: 2020 2020 2020 2020 2020 2020 2065 6e64               end
-00017950: 3d30 0a20 2020 2020 2020 2020 2020 2065  =0.            e
-00017960: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-00017970: 2020 2020 2020 2073 7461 7274 3d2d 310a         start=-1.
-00017980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017990: 656e 643d 300a 2020 2020 2020 2020 666f  end=0.        fo
-000179a0: 7220 6920 696e 2072 616e 6765 286d 795f  r i in range(my_
-000179b0: 6869 7374 6f72 795f 615b 7374 6172 745d  history_a[start]
-000179c0: 2c6d 795f 6869 7374 6f72 795f 615b 656e  ,my_history_a[en
-000179d0: 645d 2c2d 3129 3a0a 2020 2020 2020 2020  d],-1):.        
-000179e0: 2020 2020 6966 2074 7265 653a 0a20 2020      if tree:.   
-000179f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00017a00: 7370 6163 653a 0a20 2020 2020 2020 2020  space:.         
-00017a10: 2020 2020 2020 2020 2020 2070 703d 277b             pp='{
-00017a20: 7d20 2d3e 207b 7d27 2e66 6f72 6d61 7428  } -> {}'.format(
-00017a30: 7370 6163 652c 6d79 5f68 6973 746f 7279  space,my_history
-00017a40: 5b69 5d2e 6675 6e63 7469 6f6e 290a 2020  [i].function).  
-00017a50: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00017a60: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00017a70: 2020 2020 2020 2020 7070 3d6d 795f 6869          pp=my_hi
-00017a80: 7374 6f72 795b 695d 2e66 756e 6374 696f  story[i].functio
-00017a90: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
-00017aa0: 2020 6966 2070 7020 3d3d 2027 3c6d 6f64    if pp == '<mod
-00017ab0: 756c 653e 273a 0a20 2020 2020 2020 2020  ule>':.         
-00017ac0: 2020 2020 2020 2020 2020 2069 6620 7368             if sh
-00017ad0: 6f77 3a0a 2020 2020 2020 2020 2020 2020  ow:.            
-00017ae0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00017af0: 7428 7070 290a 2020 2020 2020 2020 2020  t(pp).          
-00017b00: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00017b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b20: 2020 2020 2020 2020 7274 2e61 7070 656e          rt.appen
-00017b30: 6428 7070 290a 2020 2020 2020 2020 2020  d(pp).          
-00017b40: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00017b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b60: 6966 2061 7267 733a 0a20 2020 2020 2020  if args:.       
+000164a0: 2020 2020 2020 2020 6966 2043 6865 636b          if Check
+000164b0: 4f62 6a28 676c 6f62 616c 656e 765b 6969  Obj(globalenv[ii
+000164c0: 5d29 203d 3d20 276d 6f64 756c 6527 2061  ]) == 'module' a
+000164d0: 6e64 2043 6865 636b 4f62 6a28 6c6f 6164  nd CheckObj(load
+000164e0: 6564 2e5f 5f64 6963 745f 5f5b 6969 5d29  ed.__dict__[ii])
+000164f0: 203d 3d20 2763 6c61 7373 6f62 6a27 3a0a   == 'classobj':.
+00016500: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00016510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016520: 2054 4d50 3d67 6c6f 6261 6c65 6e76 5b69   TMP=globalenv[i
+00016530: 695d 2023 206d 6f76 6520 746f 206c 6f63  i] # move to loc
+00016540: 616c 2074 656d 706f 7261 7920 0a20 2020  al temporay .   
+00016550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016560: 2020 2020 2020 2020 2020 2020 2067 6c6f               glo
+00016570: 6261 6c65 6e76 5b69 695d 3d6c 6f61 6465  balenv[ii]=loade
+00016580: 642e 5f5f 6469 6374 5f5f 5b69 695d 0a20  d.__dict__[ii]. 
+00016590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000165a0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+000165b0: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
+000165c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000165d0: 6966 206e 6f74 2066 6f72 6365 3a20 636f  if not force: co
+000165e0: 6e74 696e 7565 2023 204e 6f74 2066 6f72  ntinue # Not for
+000165f0: 6365 2074 6865 6e20 6967 6e6f 7265 2073  ce then ignore s
+00016600: 616d 6520 6e61 6d65 0a20 2020 2020 2020  ame name.       
+00016610: 2020 2020 2020 2020 2020 2020 2067 6c6f               glo
+00016620: 6261 6c65 6e76 5b69 695d 3d6c 6f61 6465  balenv[ii]=loade
+00016630: 642e 5f5f 6469 6374 5f5f 5b69 695d 0a20  d.__dict__[ii]. 
+00016640: 2020 2072 6574 7572 6e20 6c6f 6164 5f66     return load_f
+00016650: 6169 6c65 640a 0a64 6566 204d 6574 686f  ailed..def Metho
+00016660: 6449 6e43 6c61 7373 2863 6c61 7373 5f6e  dInClass(class_n
+00016670: 616d 6529 3a0a 2020 2020 2727 270a 2020  ame):.    '''.  
+00016680: 2020 4765 7420 4d65 7468 6f64 206c 6973    Get Method lis
+00016690: 7420 696e 2043 6c61 7373 0a20 2020 2027  t in Class.    '
+000166a0: 2727 0a20 2020 2072 6574 3d64 6972 2863  ''.    ret=dir(c
+000166b0: 6c61 7373 5f6e 616d 6529 0a20 2020 2069  lass_name).    i
+000166c0: 6620 6861 7361 7474 7228 636c 6173 735f  f hasattr(class_
+000166d0: 6e61 6d65 2c27 5f5f 6261 7365 735f 5f27  name,'__bases__'
+000166e0: 293a 0a20 2020 2020 2020 2066 6f72 2062  ):.        for b
+000166f0: 6173 6520 696e 2063 6c61 7373 5f6e 616d  ase in class_nam
+00016700: 652e 5f5f 6261 7365 735f 5f3a 0a20 2020  e.__bases__:.   
+00016710: 2020 2020 2020 2020 2072 6574 3d72 6574           ret=ret
+00016720: 2b4d 6574 686f 6449 6e43 6c61 7373 2862  +MethodInClass(b
+00016730: 6173 6529 0a20 2020 2072 6574 7572 6e20  ase).    return 
+00016740: 7265 740a 0a64 6566 204f 626a 496e 666f  ret..def ObjInfo
+00016750: 286f 626a 293a 0a20 2020 2027 2727 0a20  (obj):.    '''. 
+00016760: 2020 2047 6574 206f 626a 6563 7420 696e     Get object in
+00016770: 666f 726d 6174 696f 6e20 3a20 7479 7065  formation : type
+00016780: 2c20 6e61 6d65 2c20 6d65 7468 6f64 206c  , name, method l
+00016790: 6973 742c 2070 6174 682c 206d 6f64 756c  ist, path, modul
+000167a0: 655f 6e61 6d65 2c20 6d6f 6475 6c65 5f76  e_name, module_v
+000167b0: 6572 7369 6f6e 2c20 6d6f 6475 6c65 0a20  ersion, module. 
+000167c0: 2020 2027 2727 0a20 2020 2072 743d 7b7d     '''.    rt={}
+000167d0: 0a20 2020 2072 745b 2774 7970 6527 5d3d  .    rt['type']=
+000167e0: 7479 7065 286f 626a 292e 5f5f 6e61 6d65  type(obj).__name
+000167f0: 5f5f 0a20 2020 2072 745b 276e 616d 6527  __.    rt['name'
+00016800: 5d3d 6f62 6a2e 5f5f 6e61 6d65 5f5f 0a20  ]=obj.__name__. 
+00016810: 2020 2072 745b 276d 6574 686f 6473 275d     rt['methods']
+00016820: 3d4d 6574 686f 6449 6e43 6c61 7373 286f  =MethodInClass(o
+00016830: 626a 290a 2020 2020 6966 2072 745b 2774  bj).    if rt['t
+00016840: 7970 6527 5d20 696e 205b 276d 6f64 756c  ype'] in ['modul
+00016850: 6527 5d3a 0a20 2020 2020 2020 2072 745b  e']:.        rt[
+00016860: 2770 6174 6827 5d3d 6f62 6a2e 5f5f 7061  'path']=obj.__pa
+00016870: 7468 5f5f 0a20 2020 2020 2020 2072 745b  th__.        rt[
+00016880: 2776 6572 7369 6f6e 275d 3d4d 6f64 5665  'version']=ModVe
+00016890: 7273 696f 6e28 7274 5b27 6e61 6d65 275d  rsion(rt['name']
+000168a0: 290a 2020 2020 2020 2020 7274 5b27 6d6f  ).        rt['mo
+000168b0: 6475 6c65 5f6e 616d 6527 5d3d 6f62 6a2e  dule_name']=obj.
+000168c0: 5f5f 6e61 6d65 5f5f 0a20 2020 2020 2020  __name__.       
+000168d0: 2072 745b 276d 6f64 756c 6527 5d3d 6f62   rt['module']=ob
+000168e0: 6a0a 2020 2020 656c 6966 2072 745b 2774  j.    elif rt['t
+000168f0: 7970 6527 5d20 696e 205b 2766 756e 6374  ype'] in ['funct
+00016900: 696f 6e27 5d3a 0a20 2020 2020 2020 2072  ion']:.        r
+00016910: 745b 2770 6174 6827 5d3d 6f73 2e70 6174  t['path']=os.pat
+00016920: 682e 6162 7370 6174 6828 696e 7370 6563  h.abspath(inspec
+00016930: 742e 6765 7466 696c 6528 6f62 6a29 290a  t.getfile(obj)).
+00016940: 2020 2020 2020 2020 7274 5b27 6d6f 6475          rt['modu
+00016950: 6c65 275d 3d69 6e73 7065 6374 2e67 6574  le']=inspect.get
+00016960: 6d6f 6475 6c65 286f 626a 290a 2020 2020  module(obj).    
+00016970: 2020 2020 7274 5b27 6d6f 6475 6c65 5f6e      rt['module_n
+00016980: 616d 6527 5d3d 7274 5b27 6d6f 6475 6c65  ame']=rt['module
+00016990: 275d 2e5f 5f6e 616d 655f 5f0a 2020 2020  '].__name__.    
+000169a0: 2020 2020 7274 5b27 6d6f 6475 6c65 5f76      rt['module_v
+000169b0: 6572 7369 6f6e 275d 3d4d 6f64 5665 7273  ersion']=ModVers
+000169c0: 696f 6e28 7274 5b27 6d6f 6475 6c65 5f6e  ion(rt['module_n
+000169d0: 616d 6527 5d29 0a23 2020 2020 2020 2020  ame']).#        
+000169e0: 7274 5b27 6d65 7468 6f64 7327 5d3d 5b72  rt['methods']=[r
+000169f0: 745b 276d 6f64 756c 655f 6e61 6d65 275d  t['module_name']
+00016a00: 5d0a 2020 2020 656c 6966 2072 745b 2774  ].    elif rt['t
+00016a10: 7970 6527 5d20 696e 205b 2763 6c61 7373  ype'] in ['class
+00016a20: 275d 3a0a 2020 2020 2020 2020 7274 5b27  ']:.        rt['
+00016a30: 6d6f 6475 6c65 5f6e 616d 6527 5d3d 6f62  module_name']=ob
+00016a40: 6a2e 5f5f 6d6f 6475 6c65 5f5f 0a20 2020  j.__module__.   
+00016a50: 2020 2020 2072 745b 2770 6174 6827 5d3d       rt['path']=
+00016a60: 6f73 2e70 6174 682e 6162 7370 6174 6828  os.path.abspath(
+00016a70: 7379 732e 6d6f 6475 6c65 735b 7274 5b27  sys.modules[rt['
+00016a80: 6d6f 6475 6c65 5f6e 616d 6527 5d5d 2e5f  module_name']]._
+00016a90: 5f66 696c 655f 5f29 0a20 2020 2020 2020  _file__).       
+00016aa0: 2072 745b 276d 6f64 756c 6527 5d3d 7379   rt['module']=sy
+00016ab0: 732e 6d6f 6475 6c65 735b 7274 5b27 6d6f  s.modules[rt['mo
+00016ac0: 6475 6c65 5f6e 616d 6527 5d5d 0a20 2020  dule_name']].   
+00016ad0: 2020 2020 2072 745b 276d 6f64 756c 655f       rt['module_
+00016ae0: 7665 7273 696f 6e27 5d3d 4d6f 6456 6572  version']=ModVer
+00016af0: 7369 6f6e 2872 745b 276d 6f64 756c 655f  sion(rt['module_
+00016b00: 6e61 6d65 275d 290a 2020 2020 7265 7475  name']).    retu
+00016b10: 726e 2072 740a 0a64 6566 204d 794d 6f64  rn rt..def MyMod
+00016b20: 756c 6528 6465 6661 756c 743d 4661 6c73  ule(default=Fals
+00016b30: 652c 7061 7265 6e74 3d2d 3129 3a0a 2020  e,parent=-1):.  
+00016b40: 2020 2727 270a 2020 2020 4765 7420 6375    '''.    Get cu
+00016b50: 7272 656e 7420 6d6f 6475 6c65 200a 2020  rrent module .  
+00016b60: 2020 2d20 7061 7265 6e74 0a20 2020 2020    - parent.     
+00016b70: 202d 3120 3a20 6d79 2063 7572 7265 6e74   -1 : my current
+00016b80: 2070 7974 686f 6e20 7061 6765 2773 206d   python page's m
+00016b90: 6f64 756c 650a 2020 2020 2020 3020 203a  odule.      0  :
+00016ba0: 206d 7920 6675 6e63 7469 6f6e 2773 206d   my function's m
+00016bb0: 6f64 756c 650a 2020 2020 2020 3120 203a  odule.      1  :
+00016bc0: 206d 7920 7061 7265 6e74 2773 206d 6f64   my parent's mod
+00016bd0: 756c 650a 2020 2020 2727 270a 2020 2020  ule.    '''.    
+00016be0: 6966 2070 6172 656e 7420 3e3d 2030 3a0a  if parent >= 0:.
+00016bf0: 2020 2020 2020 2020 6c6f 633d 312b 7061          loc=1+pa
+00016c00: 7265 6e74 0a20 2020 2065 6c73 653a 0a20  rent.    else:. 
+00016c10: 2020 2020 2020 206c 6f63 3d70 6172 656e         loc=paren
+00016c20: 740a 2020 2020 7472 793a 0a20 2020 2020  t.    try:.     
+00016c30: 2020 2023 6672 616d 653d 696e 7370 6563     #frame=inspec
+00016c40: 742e 7374 6163 6b28 295b 2d31 5d0a 2020  t.stack()[-1].  
+00016c50: 2020 2020 2020 6672 616d 653d 696e 7370        frame=insp
+00016c60: 6563 742e 7374 6163 6b28 290a 2020 2020  ect.stack().    
+00016c70: 2020 2020 6966 206c 656e 2866 7261 6d65      if len(frame
+00016c80: 2920 3c3d 206c 6f63 3a0a 2020 2020 2020  ) <= loc:.      
+00016c90: 2020 2020 2020 6c6f 633d 2d31 0a20 2020        loc=-1.   
+00016ca0: 2020 2020 2072 6574 7572 6e20 696e 7370       return insp
+00016cb0: 6563 742e 6765 746d 6f64 756c 6528 6672  ect.getmodule(fr
+00016cc0: 616d 655b 6c6f 635d 5b30 5d29 0a20 2020  ame[loc][0]).   
+00016cd0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+00016ce0: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+00016cf0: 0a64 6566 2043 616c 6c65 724e 616d 6528  .def CallerName(
+00016d00: 6465 6661 756c 743d 4661 6c73 652c 6465  default=False,de
+00016d10: 7461 696c 3d46 616c 7365 293a 0a20 2020  tail=False):.   
+00016d20: 2027 2727 0a20 2020 2047 6574 2074 6865   '''.    Get the
+00016d30: 2063 616c 6c65 7220 6e61 6d65 206f 6620   caller name of 
+00016d40: 6d79 2067 726f 7570 2066 756e 6374 696f  my group functio
+00016d50: 6e0a 2020 2020 6465 7461 696c 3d54 7275  n.    detail=Tru
+00016d60: 653a 2072 6574 7572 6e20 2866 756e 6320  e: return (func 
+00016d70: 6e61 6d65 2c20 6c69 6e65 206e 756d 6265  name, line numbe
+00016d80: 722c 2066 696c 656e 616d 6529 0a20 2020  r, filename).   
+00016d90: 2064 6566 6175 6c74 2020 2020 3a20 4966   default    : If
+00016da0: 206e 6f74 2066 6f75 6e64 2063 616c 6c65   not found calle
+00016db0: 7220 6e61 6d65 2074 6865 6e20 7265 7475  r name then retu
+00016dc0: 726e 2064 6566 6175 6c74 0a0a 2020 2020  rn default..    
+00016dd0: 6465 6620 4128 293a 2020 2020 2020 2020  def A():        
+00016de0: 2020 2020 2020 2023 4772 6f75 7020 4128         #Group A(
+00016df0: 290a 2020 2020 2020 2020 4361 6c6c 6572  ).        Caller
+00016e00: 4e61 6d65 2829 2020 2020 2020 202d 3e20  Name()       -> 
+00016e10: 4361 6c6c 6564 2062 7920 6d6f 6475 6c65  Called by module
+00016e20: 2773 2041 2829 203d 3e20 410a 2020 2020  's A() => A.    
+00016e30: 2020 2020 4228 290a 2020 2020 6465 6620      B().    def 
+00016e40: 4228 293a 2020 2020 2020 2020 2020 2020  B():            
+00016e50: 2020 2023 4772 6f75 7020 4228 290a 2020     #Group B().  
+00016e60: 2020 2020 2020 4361 6c6c 6572 4e61 6d65        CallerName
+00016e70: 2829 2020 2020 2020 202d 3e20 4361 6c6c  ()       -> Call
+00016e80: 6564 206d 7920 6772 6f75 7020 6279 2041  ed my group by A
+00016e90: 2829 2066 756e 6374 696f 6e20 3d3e 2041  () function => A
+00016ea0: 0a20 2020 2020 2020 2064 6566 2043 2829  .        def C()
+00016eb0: 3a0a 2020 2020 2020 2020 2020 2020 4361  :.            Ca
+00016ec0: 6c6c 6572 4e61 6d65 2829 2020 202d 3e20  llerName()   -> 
+00016ed0: 4361 6c6c 6564 206d 7920 6772 6f75 7020  Called my group 
+00016ee0: 6279 2041 2829 2066 756e 6374 696f 6e20  by A() function 
+00016ef0: 3d3e 2041 0a20 2020 2020 2020 2043 2829  => A.        C()
+00016f00: 0a20 2020 2041 2829 2020 2020 2020 2020  .    A()        
+00016f10: 2020 2020 2020 2020 2020 2020 2d3e 2043              -> C
+00016f20: 616c 6c69 6e67 2064 6566 2041 2829 2069  alling def A() i
+00016f30: 6e20 7079 7468 6f6e 2073 6372 6970 7428  n python script(
+00016f40: 6d6f 6475 6c65 290a 2020 2020 2727 270a  module).    '''.
+00016f50: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+00016f60: 2064 6570 3d6c 656e 2869 6e73 7065 6374   dep=len(inspect
+00016f70: 2e73 7461 636b 2829 292d 320a 2020 2020  .stack())-2.    
+00016f80: 2020 2020 6e61 6d65 3d73 7973 2e5f 6765      name=sys._ge
+00016f90: 7466 7261 6d65 2864 6570 292e 665f 636f  tframe(dep).f_co
+00016fa0: 6465 2e63 6f5f 6e61 6d65 0a20 2020 2020  de.co_name.     
+00016fb0: 2020 2069 6620 6e61 6d65 203d 3d20 275f     if name == '_
+00016fc0: 626f 6f74 7374 7261 705f 696e 6e65 7227  bootstrap_inner'
+00016fd0: 206f 7220 6e61 6d65 203d 3d20 275f 7275   or name == '_ru
+00016fe0: 6e5f 636f 6465 273a 0a20 2020 2020 2020  n_code':.       
+00016ff0: 2020 2020 2064 6570 3d33 0a20 2020 2020       dep=3.     
+00017000: 2020 2069 6620 6465 7461 696c 3a0a 2020     if detail:.  
+00017010: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00017020: 2073 7973 2e5f 6765 7466 7261 6d65 2864   sys._getframe(d
+00017030: 6570 292e 665f 636f 6465 2e63 6f5f 6e61  ep).f_code.co_na
+00017040: 6d65 2c73 7973 2e5f 6765 7466 7261 6d65  me,sys._getframe
+00017050: 2864 6570 292e 665f 6c69 6e65 6e6f 2c73  (dep).f_lineno,s
+00017060: 7973 2e5f 6765 7466 7261 6d65 2864 6570  ys._getframe(dep
+00017070: 292e 665f 636f 6465 2e63 6f5f 6669 6c65  ).f_code.co_file
+00017080: 6e61 6d65 0a20 2020 2020 2020 2072 6574  name.        ret
+00017090: 7572 6e20 7379 732e 5f67 6574 6672 616d  urn sys._getfram
+000170a0: 6528 6465 7029 2e66 5f63 6f64 652e 636f  e(dep).f_code.co
+000170b0: 5f6e 616d 650a 2020 2020 6578 6365 7074  _name.    except
+000170c0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+000170d0: 2064 6566 6175 6c74 0a0a 6465 6620 4672   default..def Fr
+000170e0: 616d 6532 4675 6e63 7469 6f6e 286f 626a  ame2Function(obj
+000170f0: 2c64 6566 6175 6c74 3d46 616c 7365 293a  ,default=False):
+00017100: 0a20 2020 2027 2727 0a20 2020 2047 6574  .    '''.    Get
+00017110: 2046 756e 6374 696f 6e20 4f62 6a65 6374   Function Object
+00017120: 2066 726f 6d20 6672 616d 6520 6f72 2066   from frame or f
+00017130: 7261 6d65 2069 6e66 6f0a 2020 2020 2727  rame info.    ''
+00017140: 270a 2020 2020 6f62 6a5f 7479 7065 3d54  '.    obj_type=T
+00017150: 7970 654e 616d 6528 6f62 6a29 0a20 2020  ypeName(obj).   
+00017160: 2023 6966 206f 626a 5f74 7970 6520 3d3d   #if obj_type ==
+00017170: 2027 6675 6e63 7469 6f6e 273a 2072 6574   'function': ret
+00017180: 7572 6e20 6f62 6a0a 2020 2020 6966 2049  urn obj.    if I
+00017190: 7346 756e 6374 696f 6e28 6f62 6a29 3a20  sFunction(obj): 
+000171a0: 7265 7475 726e 206f 626a 0a20 2020 2069  return obj.    i
+000171b0: 6620 6f62 6a5f 7479 7065 203d 3d20 2766  f obj_type == 'f
+000171c0: 7261 6d65 696e 666f 273a 0a20 2020 2020  rameinfo':.     
+000171d0: 2020 2072 6574 7572 6e20 6763 2e67 6574     return gc.get
+000171e0: 5f72 6566 6572 7265 7273 286f 626a 2e66  _referrers(obj.f
+000171f0: 7261 6d65 2e66 5f63 6f64 6529 5b30 5d0a  rame.f_code)[0].
+00017200: 2020 2020 656c 6966 206f 626a 5f74 7970      elif obj_typ
+00017210: 6520 3d3d 2027 6672 616d 6527 3a0a 2020  e == 'frame':.  
+00017220: 2020 2020 2020 7265 7475 726e 2067 632e        return gc.
+00017230: 6765 745f 7265 6665 7272 6572 7328 6f62  get_referrers(ob
+00017240: 6a2e 665f 636f 6465 295b 305d 0a20 2020  j.f_code)[0].   
+00017250: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+00017260: 0a64 6566 2046 756e 6374 696f 6e4e 616d  .def FunctionNam
+00017270: 6528 7061 7265 6e74 3d30 2c64 6566 6175  e(parent=0,defau
+00017280: 6c74 3d46 616c 7365 2c68 6973 746f 7279  lt=False,history
+00017290: 3d46 616c 7365 2c74 7265 653d 4661 6c73  =False,tree=Fals
+000172a0: 652c 6172 6773 3d46 616c 7365 2c6c 696e  e,args=False,lin
+000172b0: 655f 6e75 6d62 6572 3d46 616c 7365 2c66  e_number=False,f
+000172c0: 756c 6c5f 6669 6c65 6e61 6d65 3d46 616c  ull_filename=Fal
+000172d0: 7365 2c66 696c 656e 616d 653d 4661 6c73  se,filename=Fals
+000172e0: 652c 6f62 6a3d 4661 6c73 652c 7368 6f77  e,obj=False,show
+000172f0: 3d46 616c 7365 293a 0a20 2020 2027 2727  =False):.    '''
+00017300: 0a20 2020 2047 6574 2066 756e 6374 696f  .    Get functio
+00017310: 6e20 6e61 6d65 0a20 2020 2020 2d20 7061  n name.     - pa
+00017320: 7265 6e74 0a20 2020 2020 2020 3020 2020  rent.       0   
+00017330: 2020 2020 2020 2020 203a 206d 7920 6e61           : my na
+00017340: 6d65 2028 6465 6661 756c 7429 0a20 2020  me (default).   
+00017350: 2020 2020 3120 2020 2020 2020 2020 2020      1           
+00017360: 203a 206d 7920 7061 7265 6e74 2066 756e   : my parent fun
+00017370: 6374 696f 6e0a 2020 2020 2020 202e 2e2e  ction.       ...
+00017380: 2020 2020 2020 2020 2020 3a20 676f 696e            : goin
+00017390: 6720 746f 7020 7061 7265 6e74 2066 756e  g top parent fun
+000173a0: 6374 696f 6e0a 2020 2020 202d 2068 6973  ction.     - his
+000173b0: 746f 7279 2020 2020 2020 3a20 4765 7474  tory      : Gett
+000173c0: 696e 6720 6869 7374 6f72 7920 2872 6574  ing history (ret
+000173d0: 7572 6e20 6c69 7374 290a 2020 2020 202d  urn list).     -
+000173e0: 2074 7265 6520 2020 2020 2020 2020 3a20   tree         : 
+000173f0: 7472 6565 2020 2872 6574 7572 6e20 6c69  tree  (return li
+00017400: 7374 290a 2020 2020 2020 2020 2020 2020  st).            
+00017410: 2020 2020 2020 2020 3a20 6966 2065 7869          : if exi
+00017420: 7374 2070 6172 656e 7420 7061 7261 6d65  st parent parame
+00017430: 7465 7220 7468 656e 2068 6973 746f 7279  ter then history
+00017440: 2066 726f 6d20 7061 7265 6e74 2074 6f20   from parent to 
+00017450: 6d65 0a20 2020 2020 2020 2d20 7368 6f77  me.       - show
+00017460: 2020 2020 2020 203a 2073 686f 7720 7472         : show tr
+00017470: 6565 206f 6e20 7363 7265 656e 0a20 2020  ee on screen.   
+00017480: 2020 2d20 6172 6773 2020 2020 2020 2020    - args        
+00017490: 203a 2073 686f 7720 6172 6775 6d65 6e74   : show argument
+000174a0: 730a 2020 2020 202d 206c 696e 655f 6e75  s.     - line_nu
+000174b0: 6d62 6572 2020 3a20 7368 6f77 206c 696e  mber  : show lin
+000174c0: 6520 6e75 6d62 6572 0a20 2020 2020 2d20  e number.     - 
+000174d0: 6669 6c65 6e61 6d65 2020 2020 203a 2073  filename     : s
+000174e0: 686f 7720 6669 6c65 6e61 6d65 0a20 2020  how filename.   
+000174f0: 2020 2d20 6675 6c6c 5f66 696c 656e 616d    - full_filenam
+00017500: 653a 2073 686f 7720 6675 6c6c 2070 6174  e: show full pat
+00017510: 6820 6669 6c65 6e61 6d65 0a20 2020 2020  h filename.     
+00017520: 2d20 6f62 6a20 2020 2020 2020 2020 203a  - obj          :
+00017530: 2047 6574 204f 424a 2028 7265 7475 726e   Get OBJ (return
+00017540: 206c 6973 7429 0a20 2020 2027 2727 0a20   list).    '''. 
+00017550: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+00017560: 6d79 5f68 6973 746f 7279 3d69 6e73 7065  my_history=inspe
+00017570: 6374 2e73 7461 636b 2829 0a20 2020 2065  ct.stack().    e
+00017580: 7863 6570 743a 0a20 2020 2020 2020 2072  xcept:.        r
+00017590: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
+000175a0: 2020 6966 2074 7265 653a 2068 6973 746f    if tree: histo
+000175b0: 7279 3d54 7275 650a 2020 2020 6966 2068  ry=True.    if h
+000175c0: 6973 746f 7279 3a0a 2020 2020 2020 2020  istory:.        
+000175d0: 7274 3d5b 5d0a 2020 2020 2020 2020 7370  rt=[].        sp
+000175e0: 6163 653d 2727 0a20 2020 2020 2020 2023  ace=''.        #
+000175f0: 666f 7220 6920 696e 2072 616e 6765 286c  for i in range(l
+00017600: 656e 286d 795f 6869 7374 6f72 7929 2d31  en(my_history)-1
+00017610: 2c30 2c2d 3129 3a0a 2020 2020 2020 2020  ,0,-1):.        
+00017620: 6d79 5f68 6973 746f 7279 5f6d 3d6c 656e  my_history_m=len
+00017630: 286d 795f 6869 7374 6f72 7929 2d31 0a20  (my_history)-1. 
+00017640: 2020 2020 2020 206d 795f 6869 7374 6f72         my_histor
+00017650: 795f 613d 5b69 2066 6f72 2069 2069 6e20  y_a=[i for i in 
+00017660: 7261 6e67 6528 6c65 6e28 6d79 5f68 6973  range(len(my_his
+00017670: 746f 7279 292d 3129 5d0a 2020 2020 2020  tory)-1)].      
+00017680: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00017690: 7061 7265 6e74 2c73 7472 293a 0a20 2020  parent,str):.   
+000176a0: 2020 2020 2020 2020 2069 6620 272d 2720           if '-' 
+000176b0: 696e 2070 6172 656e 743a 0a20 2020 2020  in parent:.     
+000176c0: 2020 2020 2020 2020 2020 2070 6172 656e             paren
+000176d0: 745f 613d 7061 7265 6e74 2e73 706c 6974  t_a=parent.split
+000176e0: 2827 2d27 290a 2020 2020 2020 2020 2020  ('-').          
+000176f0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+00017700: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00017710: 6172 656e 745f 653d 696e 7428 7061 7265  arent_e=int(pare
+00017720: 6e74 5f61 5b30 5d29 0a20 2020 2020 2020  nt_a[0]).       
+00017730: 2020 2020 2020 2020 2020 2020 2023 6261               #ba
+00017740: 636b 776f 7264 0a20 2020 2020 2020 2020  ckword.         
+00017750: 2020 2020 2020 2020 2020 2065 6e64 3d70             end=p
+00017760: 6172 656e 745f 6520 6966 2070 6172 656e  arent_e if paren
+00017770: 745f 6520 3c20 6c65 6e28 6d79 5f68 6973  t_e < len(my_his
+00017780: 746f 7279 5f61 2920 656c 7365 2030 0a20  tory_a) else 0. 
+00017790: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000177a0: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
+000177b0: 2020 2020 2020 2020 2020 2065 6e64 3d30             end=0
+000177c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000177d0: 2020 2020 2070 6172 656e 745f 653d 6d79       parent_e=my
+000177e0: 5f68 6973 746f 7279 5f61 5b65 6e64 5d0a  _history_a[end].
+000177f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017800: 6966 206c 656e 2870 6172 656e 745f 6129  if len(parent_a)
+00017810: 203d 3d20 323a 0a20 2020 2020 2020 2020   == 2:.         
+00017820: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
+00017830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017840: 2020 2020 2020 2020 7061 7265 6e74 5f73          parent_s
+00017850: 3d69 6e74 2870 6172 656e 745f 615b 315d  =int(parent_a[1]
+00017860: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00017870: 2020 2020 2020 2020 2020 2362 6163 6b77            #backw
+00017880: 6f72 640a 2020 2020 2020 2020 2020 2020  ord.            
+00017890: 2020 2020 2020 2020 2020 2020 7374 6172              star
+000178a0: 743d 7061 7265 6e74 5f73 2069 6620 7061  t=parent_s if pa
+000178b0: 7265 6e74 5f73 203e 2070 6172 656e 745f  rent_s > parent_
+000178c0: 6520 616e 6420 7061 7265 6e74 5f73 203c  e and parent_s <
+000178d0: 206c 656e 286d 795f 6869 7374 6f72 795f   len(my_history_
+000178e0: 6129 2065 6c73 6520 2d31 0a20 2020 2020  a) else -1.     
+000178f0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00017900: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
+00017910: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00017920: 7461 7274 3d2d 310a 2020 2020 2020 2020  tart=-1.        
+00017930: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00017940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017950: 2020 7374 6172 743d 2d31 0a20 2020 2020    start=-1.     
+00017960: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00017970: 2020 2020 2020 2020 2020 2020 2073 7461               sta
+00017980: 7274 3d2d 310a 2020 2020 2020 2020 2020  rt=-1.          
+00017990: 2020 2020 2020 656e 643d 300a 2020 2020        end=0.    
+000179a0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000179b0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+000179c0: 2020 2020 2020 2020 2020 2070 6172 656e             paren
+000179d0: 743d 696e 7428 7061 7265 6e74 290a 2020  t=int(parent).  
+000179e0: 2020 2020 2020 2020 2020 2020 2020 2362                #b
+000179f0: 6163 6b77 6f72 640a 2020 2020 2020 2020  ackword.        
+00017a00: 2020 2020 2020 2020 7374 6172 743d 6d79          start=my
+00017a10: 5f68 6973 746f 7279 5f61 5b70 6172 656e  _history_a[paren
+00017a20: 745d 2069 6620 7061 7265 6e74 203c 206c  t] if parent < l
+00017a30: 656e 286d 795f 6869 7374 6f72 795f 6129  en(my_history_a)
+00017a40: 2065 6c73 6520 2d31 0a20 2020 2020 2020   else -1.       
+00017a50: 2020 2020 2020 2020 2065 6e64 3d30 0a20           end=0. 
+00017a60: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+00017a70: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+00017a80: 2020 2073 7461 7274 3d2d 310a 2020 2020     start=-1.    
+00017a90: 2020 2020 2020 2020 2020 2020 656e 643d              end=
+00017aa0: 300a 2020 2020 2020 2020 666f 7220 6920  0.        for i 
+00017ab0: 696e 2072 616e 6765 286d 795f 6869 7374  in range(my_hist
+00017ac0: 6f72 795f 615b 7374 6172 745d 2c6d 795f  ory_a[start],my_
+00017ad0: 6869 7374 6f72 795f 615b 656e 645d 2c2d  history_a[end],-
+00017ae0: 3129 3a0a 2020 2020 2020 2020 2020 2020  1):.            
+00017af0: 6966 2074 7265 653a 0a20 2020 2020 2020  if tree:.       
+00017b00: 2020 2020 2020 2020 2069 6620 7370 6163           if spac
+00017b10: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00017b20: 2020 2020 2020 2070 703d 277b 7d20 2d3e         pp='{} ->
+00017b30: 207b 7d27 2e66 6f72 6d61 7428 7370 6163   {}'.format(spac
+00017b40: 652c 6d79 5f68 6973 746f 7279 5b69 5d2e  e,my_history[i].
+00017b50: 6675 6e63 7469 6f6e 290a 2020 2020 2020  function).      
+00017b60: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
 00017b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b80: 2061 7267 3d46 756e 6374 696f 6e41 7267   arg=FunctionArg
-00017b90: 7328 4672 616d 6532 4675 6e63 7469 6f6e  s(Frame2Function
-00017ba0: 286d 795f 6869 7374 6f72 795b 695d 2e66  (my_history[i].f
-00017bb0: 7261 6d65 292c 6d6f 6465 3d27 7374 7269  rame),mode='stri
-00017bc0: 6e67 272c 6465 6661 756c 743d 2727 290a  ng',default='').
-00017bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017be0: 2020 2020 2020 2020 6966 2061 7267 3a20          if arg: 
-00017bf0: 7070 3d70 702b 277b 7d27 2e66 6f72 6d61  pp=pp+'{}'.forma
-00017c00: 7428 6172 6729 0a20 2020 2020 2020 2020  t(arg).         
-00017c10: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00017c20: 6c73 653a 2070 703d 7070 2b27 2829 270a  lse: pp=pp+'()'.
-00017c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017c40: 2020 2020 6966 206c 696e 655f 6e75 6d62      if line_numb
-00017c50: 6572 3a20 7070 3d70 702b 2720 6174 207b  er: pp=pp+' at {
-00017c60: 7d27 2e66 6f72 6d61 7428 6d79 5f68 6973  }'.format(my_his
-00017c70: 746f 7279 5b69 5d2e 6c69 6e65 6e6f 290a  tory[i].lineno).
-00017c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017c90: 2020 2020 6966 2066 756c 6c5f 6669 6c65      if full_file
-00017ca0: 6e61 6d65 3a20 7070 3d70 702b 2720 696e  name: pp=pp+' in
-00017cb0: 207b 7d27 2e66 6f72 6d61 7428 6d79 5f68   {}'.format(my_h
-00017cc0: 6973 746f 7279 5b69 5d2e 6669 6c65 6e61  istory[i].filena
-00017cd0: 6d65 290a 2020 2020 2020 2020 2020 2020  me).            
-00017ce0: 2020 2020 2020 2020 656c 6966 2066 696c          elif fil
-00017cf0: 656e 616d 653a 2070 703d 7070 2b27 2069  ename: pp=pp+' i
-00017d00: 6e20 7b7d 272e 666f 726d 6174 286f 732e  n {}'.format(os.
-00017d10: 7061 7468 2e62 6173 656e 616d 6528 6d79  path.basename(my
-00017d20: 5f68 6973 746f 7279 5b69 5d2e 6669 6c65  _history[i].file
-00017d30: 6e61 6d65 2929 0a20 2020 2020 2020 2020  name)).         
-00017d40: 2020 2020 2020 2020 2020 2069 6620 7368             if sh
-00017d50: 6f77 3a0a 2020 2020 2020 2020 2020 2020  ow:.            
-00017d60: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00017d70: 7428 7070 290a 2020 2020 2020 2020 2020  t(pp).          
-00017d80: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00017b80: 2020 2020 7070 3d6d 795f 6869 7374 6f72      pp=my_histor
+00017b90: 795b 695d 2e66 756e 6374 696f 6e0a 2020  y[i].function.  
+00017ba0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00017bb0: 2070 7020 3d3d 2027 3c6d 6f64 756c 653e   pp == '<module>
+00017bc0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00017bd0: 2020 2020 2020 2069 6620 7368 6f77 3a0a         if show:.
+00017be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017bf0: 2020 2020 2020 2020 7072 696e 7428 7070          print(pp
+00017c00: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00017c10: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00017c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017c30: 2020 2020 7274 2e61 7070 656e 6428 7070      rt.append(pp
+00017c40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00017c50: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00017c60: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+00017c70: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
+00017c80: 2020 2020 2020 2020 2020 2020 2061 7267               arg
+00017c90: 3d46 756e 6374 696f 6e41 7267 7328 4672  =FunctionArgs(Fr
+00017ca0: 616d 6532 4675 6e63 7469 6f6e 286d 795f  ame2Function(my_
+00017cb0: 6869 7374 6f72 795b 695d 2e66 7261 6d65  history[i].frame
+00017cc0: 292c 6d6f 6465 3d27 7374 7269 6e67 272c  ),mode='string',
+00017cd0: 6465 6661 756c 743d 2727 290a 2020 2020  default='').    
+00017ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017cf0: 2020 2020 6966 2061 7267 3a20 7070 3d70      if arg: pp=p
+00017d00: 702b 277b 7d27 2e66 6f72 6d61 7428 6172  p+'{}'.format(ar
+00017d10: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
+00017d20: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00017d30: 2070 703d 7070 2b27 2829 270a 2020 2020   pp=pp+'()'.    
+00017d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017d50: 6966 206c 696e 655f 6e75 6d62 6572 3a20  if line_number: 
+00017d60: 7070 3d70 702b 2720 6174 207b 7d27 2e66  pp=pp+' at {}'.f
+00017d70: 6f72 6d61 7428 6d79 5f68 6973 746f 7279  ormat(my_history
+00017d80: 5b69 5d2e 6c69 6e65 6e6f 290a 2020 2020  [i].lineno).    
 00017d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017da0: 2020 2020 2020 2020 7274 2e61 7070 656e          rt.appen
-00017db0: 6428 7070 290a 2020 2020 2020 2020 2020  d(pp).          
-00017dc0: 2020 2020 2020 7370 6163 653d 7370 6163        space=spac
-00017dd0: 652b 2720 2027 0a20 2020 2020 2020 2020  e+'  '.         
-00017de0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00017df0: 2020 2020 2020 2020 2069 6620 6f62 6a3a           if obj:
-00017e00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017e10: 2020 2020 2069 6620 6675 6c6c 5f66 696c       if full_fil
-00017e20: 656e 616d 653a 0a20 2020 2020 2020 2020  ename:.         
-00017e30: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00017e40: 742e 6170 7065 6e64 2828 6d79 5f68 6973  t.append((my_his
-00017e50: 746f 7279 5b69 5d2e 6675 6e63 7469 6f6e  tory[i].function
-00017e60: 2c46 7261 6d65 3246 756e 6374 696f 6e28  ,Frame2Function(
-00017e70: 6d79 5f68 6973 746f 7279 5b69 5d2e 6672  my_history[i].fr
-00017e80: 616d 6529 2c6d 795f 6869 7374 6f72 795b  ame),my_history[
-00017e90: 695d 2e6c 696e 656e 6f2c 6d79 5f68 6973  i].lineno,my_his
-00017ea0: 746f 7279 5b69 5d2e 6669 6c65 6e61 6d65  tory[i].filename
-00017eb0: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-00017ec0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00017ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017ee0: 2020 2020 2072 742e 6170 7065 6e64 2828       rt.append((
-00017ef0: 6d79 5f68 6973 746f 7279 5b69 5d2e 6675  my_history[i].fu
-00017f00: 6e63 7469 6f6e 2c46 7261 6d65 3246 756e  nction,Frame2Fun
-00017f10: 6374 696f 6e28 6d79 5f68 6973 746f 7279  ction(my_history
-00017f20: 5b69 5d2e 6672 616d 6529 2c6d 795f 6869  [i].frame),my_hi
-00017f30: 7374 6f72 795b 695d 2e6c 696e 656e 6f2c  story[i].lineno,
-00017f40: 6f73 2e70 6174 682e 6261 7365 6e61 6d65  os.path.basename
-00017f50: 286d 795f 6869 7374 6f72 795b 695d 2e66  (my_history[i].f
-00017f60: 696c 656e 616d 6529 2929 0a20 2020 2020  ilename))).     
-00017f70: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00017f80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017f90: 2020 2020 2069 6620 6675 6c6c 5f66 696c       if full_fil
-00017fa0: 656e 616d 653a 0a20 2020 2020 2020 2020  ename:.         
-00017fb0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00017fc0: 742e 6170 7065 6e64 2828 6d79 5f68 6973  t.append((my_his
-00017fd0: 746f 7279 5b69 5d2e 6675 6e63 7469 6f6e  tory[i].function
-00017fe0: 2c6d 795f 6869 7374 6f72 795b 695d 2e6c  ,my_history[i].l
-00017ff0: 696e 656e 6f2c 6d79 5f68 6973 746f 7279  ineno,my_history
-00018000: 5b69 5d2e 6669 6c65 6e61 6d65 2929 0a20  [i].filename)). 
-00018010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018020: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00018030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018040: 2072 742e 6170 7065 6e64 2828 6d79 5f68   rt.append((my_h
-00018050: 6973 746f 7279 5b69 5d2e 6675 6e63 7469  istory[i].functi
-00018060: 6f6e 2c6d 795f 6869 7374 6f72 795b 695d  on,my_history[i]
-00018070: 2e6c 696e 656e 6f2c 6f73 2e70 6174 682e  .lineno,os.path.
-00018080: 6261 7365 6e61 6d65 286d 795f 6869 7374  basename(my_hist
-00018090: 6f72 795b 695d 2e66 696c 656e 616d 6529  ory[i].filename)
-000180a0: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
-000180b0: 6e20 7274 0a20 2020 2065 6c69 6620 6973  n rt.    elif is
-000180c0: 696e 7374 616e 6365 2870 6172 656e 742c  instance(parent,
-000180d0: 696e 7429 3a20 2320 7369 6e67 6c65 2066  int): # single f
-000180e0: 756e 6374 696f 6e0a 2020 2020 2020 2020  unction.        
-000180f0: 6966 2070 6172 656e 7420 3e3d 2030 3a0a  if parent >= 0:.
-00018100: 2020 2020 2020 2020 2020 2020 6c6f 633d              loc=
-00018110: 312b 7061 7265 6e74 0a20 2020 2020 2020  1+parent.       
-00018120: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00018130: 2020 206c 6f63 3d70 6172 656e 740a 2020     loc=parent.  
-00018140: 2020 2020 2020 6966 206c 656e 286d 795f        if len(my_
-00018150: 6869 7374 6f72 7929 203c 3d20 6c6f 633a  history) <= loc:
-00018160: 2023 6f75 7420 6f66 2072 616e 6765 0a20   #out of range. 
-00018170: 2020 2020 2020 2020 2020 206c 6f63 3d2d             loc=-
-00018180: 310a 2020 2020 2020 2020 6966 206f 626a  1.        if obj
-00018190: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-000181a0: 7265 7475 726e 206e 616d 6520 616e 6420  return name and 
-000181b0: 6f62 6a65 6374 0a20 2020 2020 2020 2020  object.         
-000181c0: 2020 2072 6574 7572 6e20 286d 795f 6869     return (my_hi
-000181d0: 7374 6f72 795b 6c6f 635d 2e66 756e 6374  story[loc].funct
-000181e0: 696f 6e2c 4672 616d 6532 4675 6e63 7469  ion,Frame2Functi
-000181f0: 6f6e 286d 795f 6869 7374 6f72 795b 6c6f  on(my_history[lo
-00018200: 635d 2e66 7261 6d65 2929 0a20 2020 2020  c].frame)).     
-00018210: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00018220: 2020 2020 2072 743d 6d79 5f68 6973 746f       rt=my_histo
-00018230: 7279 5b6c 6f63 5d2e 6675 6e63 7469 6f6e  ry[loc].function
-00018240: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00018250: 6172 6773 3a0a 2020 2020 2020 2020 2020  args:.          
-00018260: 2020 2020 2020 6172 673d 4675 6e63 7469        arg=Functi
-00018270: 6f6e 4172 6773 2846 7261 6d65 3246 756e  onArgs(Frame2Fun
-00018280: 6374 696f 6e28 6d79 5f68 6973 746f 7279  ction(my_history
-00018290: 5b6c 6f63 5d2e 6672 616d 6529 2c6d 6f64  [loc].frame),mod
-000182a0: 653d 2773 7472 696e 6727 2c64 6566 6175  e='string',defau
-000182b0: 6c74 3d27 2729 0a20 2020 2020 2020 2020  lt='').         
-000182c0: 2020 2020 2020 2069 6620 6172 673a 2072         if arg: r
-000182d0: 743d 7274 2b27 7b7d 272e 666f 726d 6174  t=rt+'{}'.format
-000182e0: 2861 7267 290a 2020 2020 2020 2020 2020  (arg).          
-000182f0: 2020 2020 2020 656c 7365 3a20 7274 3d72        else: rt=r
-00018300: 742b 2728 2927 0a20 2020 2020 2020 2020  t+'()'.         
-00018310: 2020 2069 6620 6c69 6e65 5f6e 756d 6265     if line_numbe
-00018320: 723a 2072 743d 7274 2b27 2061 7420 7b7d  r: rt=rt+' at {}
-00018330: 272e 666f 726d 6174 286d 795f 6869 7374  '.format(my_hist
-00018340: 6f72 795b 6c6f 635d 2e6c 696e 656e 6f29  ory[loc].lineno)
-00018350: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00018360: 6675 6c6c 5f66 696c 656e 616d 653a 2072  full_filename: r
-00018370: 743d 7274 2b27 2069 6e20 7b7d 272e 666f  t=rt+' in {}'.fo
-00018380: 726d 6174 286d 795f 6869 7374 6f72 795b  rmat(my_history[
-00018390: 6c6f 635d 2e66 696c 656e 616d 6529 0a20  loc].filename). 
-000183a0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-000183b0: 6669 6c65 6e61 6d65 3a20 7274 3d72 742b  filename: rt=rt+
-000183c0: 2720 696e 207b 7d27 2e66 6f72 6d61 7428  ' in {}'.format(
-000183d0: 6f73 2e70 6174 682e 6261 7365 6e61 6d65  os.path.basename
-000183e0: 286d 795f 6869 7374 6f72 795b 6c6f 635d  (my_history[loc]
-000183f0: 2e66 696c 656e 616d 6529 290a 2020 2020  .filename)).    
-00018400: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00018410: 740a 0a64 6566 2046 756e 6374 696f 6e4c  t..def FunctionL
-00018420: 6973 7428 6f62 6a3d 4e6f 6e65 293a 0a20  ist(obj=None):. 
-00018430: 2020 2027 2727 0a20 2020 2047 6574 2066     '''.    Get f
-00018440: 756e 6374 696f 6e20 6c69 7374 2069 6e20  unction list in 
-00018450: 7468 6973 206f 626a 6563 740a 2020 2020  this object.    
-00018460: 2727 270a 2020 2020 6161 3d7b 7d0a 2020  '''.    aa={}.  
-00018470: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00018480: 6f62 6a2c 7374 7229 3a0a 2020 2020 2020  obj,str):.      
-00018490: 206f 626a 3d73 7973 2e6d 6f64 756c 6573   obj=sys.modules
-000184a0: 2e67 6574 286f 626a 290a 2020 2020 656c  .get(obj).    el
-000184b0: 6966 2049 734e 6f6e 6528 6f62 6a29 3a0a  if IsNone(obj):.
-000184c0: 2020 2020 2020 206f 626a 3d4d 794d 6f64         obj=MyMod
-000184d0: 756c 6528 6465 6661 756c 743d 4e6f 6e65  ule(default=None
-000184e0: 290a 2020 2020 6966 2054 7970 6528 6f62  ).    if Type(ob
-000184f0: 6a2c 2827 636c 6173 736f 626a 272c 276d  j,('classobj','m
-00018500: 6f64 756c 6527 2c27 696e 7374 616e 6365  odule','instance
-00018510: 2729 293a 0a20 2020 2020 2020 2069 6620  ')):.        if 
-00018520: 5479 7065 286f 626a 2c27 696e 7374 616e  Type(obj,'instan
-00018530: 6365 2729 3a20 6f62 6a3d 6f62 6a2e 5f5f  ce'): obj=obj.__
-00018540: 636c 6173 735f 5f20 2320 6d6f 7665 2043  class__ # move C
-00018550: 4c41 5353 2829 2074 6f20 434c 4153 530a  LASS() to CLASS.
-00018560: 2020 2020 2020 2020 666f 7220 6e61 6d65          for name
-00018570: 2c66 6f62 6a20 696e 2069 6e73 7065 6374  ,fobj in inspect
-00018580: 2e67 6574 6d65 6d62 6572 7328 6f62 6a29  .getmembers(obj)
-00018590: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-000185a0: 2069 6e73 7065 6374 2e69 7366 756e 6374   inspect.isfunct
-000185b0: 696f 6e28 666f 626a 293a 0a20 2020 2020  ion(fobj):.     
-000185c0: 2020 2020 2020 2020 2020 2061 612e 7570             aa.up
-000185d0: 6461 7465 287b 6e61 6d65 3a66 6f62 6a7d  date({name:fobj}
-000185e0: 290a 2020 2020 7265 7475 726e 2061 610a  ).    return aa.
-000185f0: 0a64 6566 2047 6574 436c 6173 7328 6f62  .def GetClass(ob
-00018600: 6a2c 6465 6661 756c 743d 4e6f 6e65 293a  j,default=None):
-00018610: 0a20 2020 2027 2727 0a20 2020 2047 6574  .    '''.    Get
-00018620: 2043 6c61 7373 206f 626a 6563 7420 6672   Class object fr
-00018630: 6f6d 2069 6e73 7461 6e63 652c 6d65 7468  om instance,meth
-00018640: 6f64 2c66 756e 6374 696f 6e0a 2020 2020  od,function.    
-00018650: 2727 270a 2020 2020 6f62 6a5f 7479 7065  '''.    obj_type
-00018660: 3d54 7970 654e 616d 6528 6f62 6a29 0a20  =TypeName(obj). 
-00018670: 2020 2069 6620 6f62 6a5f 7479 7065 2069     if obj_type i
-00018680: 6e20 5b27 696e 7374 616e 6365 275d 3a0a  n ['instance']:.
-00018690: 2020 2020 2020 2020 6f62 6a3d 6f62 6a2e          obj=obj.
-000186a0: 5f5f 636c 6173 735f 5f20 2320 436f 6e76  __class__ # Conv
-000186b0: 6572 7420 696e 7374 616e 6365 2074 6f20  ert instance to 
-000186c0: 636c 6173 736f 626a 0a20 2020 2020 2020  classobj.       
-000186d0: 206f 626a 5f74 7970 653d 5479 7065 4e61   obj_type=TypeNa
-000186e0: 6d65 286f 626a 290a 2020 2020 6966 206f  me(obj).    if o
-000186f0: 626a 5f74 7970 6520 696e 205b 2763 6c61  bj_type in ['cla
-00018700: 7373 6f62 6a27 5d3a 2072 6574 7572 6e20  ssobj']: return 
-00018710: 6f62 6a0a 2020 2020 6966 206f 626a 5f74  obj.    if obj_t
-00018720: 7970 6520 696e 205b 276d 6574 686f 6427  ype in ['method'
-00018730: 5d3a 0a20 2020 2020 2020 206f 626a 5f6e  ]:.        obj_n
-00018740: 616d 6520 3d20 6f62 6a2e 5f5f 6e61 6d65  ame = obj.__name
-00018750: 5f5f 0a20 2020 2020 2020 2069 6620 6f62  __.        if ob
-00018760: 6a2e 5f5f 7365 6c66 5f5f 3a0a 2020 2020  j.__self__:.    
-00018770: 2020 2020 2020 2020 636c 6173 7365 7320          classes 
-00018780: 3d20 5b6f 626a 2e5f 5f73 656c 665f 5f2e  = [obj.__self__.
-00018790: 5f5f 636c 6173 735f 5f5d 0a20 2020 2020  __class__].     
-000187a0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000187b0: 2020 2020 2023 756e 626f 756e 6420 6d65       #unbound me
-000187c0: 7468 6f64 0a20 2020 2020 2020 2020 2020  thod.           
-000187d0: 2063 6c61 7373 6573 203d 205b 6f62 6a2e   classes = [obj.
-000187e0: 696d 5f63 6c61 7373 5d0a 2020 2020 2020  im_class].      
-000187f0: 2020 7768 696c 6520 636c 6173 7365 733a    while classes:
-00018800: 0a20 2020 2020 2020 2020 2020 2063 203d  .            c =
-00018810: 2063 6c61 7373 6573 2e70 6f70 2829 0a20   classes.pop(). 
-00018820: 2020 2020 2020 2020 2020 2069 6620 6f62             if ob
-00018830: 6a5f 6e61 6d65 2069 6e20 632e 5f5f 6469  j_name in c.__di
-00018840: 6374 5f5f 3a0a 2020 2020 2020 2020 2020  ct__:.          
-00018850: 2020 2020 2020 7265 7475 726e 2063 0a20        return c. 
-00018860: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00018870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018880: 2063 6c61 7373 6573 203d 206c 6973 7428   classes = list(
-00018890: 632e 5f5f 6261 7365 735f 5f29 202b 2063  c.__bases__) + c
-000188a0: 6c61 7373 6573 0a20 2020 2065 6c69 6620  lasses.    elif 
-000188b0: 6f62 6a5f 7479 7065 2069 6e20 5b27 6675  obj_type in ['fu
-000188c0: 6e63 7469 6f6e 275d 3a0a 2020 2020 2020  nction']:.      
-000188d0: 2020 6966 2050 7956 6572 2833 293a 0a20    if PyVer(3):. 
-000188e0: 2020 2020 2020 2020 2020 2023 6361 6c6c             #call
-000188f0: 6572 5f6d 6f64 756c 655f 6e61 6d65 3d69  er_module_name=i
-00018900: 6e73 7065 6374 2e63 7572 7265 6e74 6672  nspect.currentfr
-00018910: 616d 6528 292e 665f 6261 636b 2e66 5f67  ame().f_back.f_g
-00018920: 6c6f 6261 6c73 5b27 5f5f 6e61 6d65 5f5f  lobals['__name__
-00018930: 275d 0a20 2020 2020 2020 2020 2020 2023  '].            #
-00018940: 6361 6c6c 6572 5f6d 6f64 756c 653d 7379  caller_module=sy
-00018950: 732e 6d6f 6475 6c65 735b 6361 6c6c 6572  s.modules[caller
-00018960: 5f6d 6f64 756c 655f 6e61 6d65 5d0a 2020  _module_name].  
-00018970: 2020 2020 2020 2020 2020 6361 6c6c 6572            caller
-00018980: 5f6d 6f64 756c 653d 696e 7370 6563 742e  _module=inspect.
-00018990: 6765 746d 6f64 756c 6528 696e 7370 6563  getmodule(inspec
-000189a0: 742e 6375 7272 656e 7466 7261 6d65 2829  t.currentframe()
-000189b0: 2e66 5f62 6163 6b29 0a20 2020 2020 2020  .f_back).       
-000189c0: 2020 2020 2072 6574 7572 6e20 6765 7461       return geta
-000189d0: 7474 7228 6361 6c6c 6572 5f6d 6f64 756c  ttr(caller_modul
-000189e0: 655f 6e61 6d65 2c27 2e27 2e6a 6f69 6e28  e_name,'.'.join(
-000189f0: 6f62 6a2e 5f5f 7175 616c 6e61 6d65 5f5f  obj.__qualname__
-00018a00: 2e73 706c 6974 2827 2e27 295b 3a2d 315d  .split('.')[:-1]
-00018a10: 2929 0a20 2020 2072 6574 7572 6e20 6465  )).    return de
-00018a20: 6661 756c 740a 0a64 6566 2046 756e 6374  fault..def Funct
-00018a30: 696f 6e41 7267 7328 6675 6e63 2c2a 2a6f  ionArgs(func,**o
-00018a40: 7074 7329 3a0a 2020 2020 2727 270a 2020  pts):.    '''.  
-00018a50: 2020 4765 7420 6675 6e63 7469 6f6e 2773    Get function's
-00018a60: 2069 6e70 7574 2041 7267 756d 656e 7473   input Arguments
-00018a70: 0a20 2020 202d 206d 6f64 650a 2020 2020  .    - mode.    
-00018a80: 2020 2d20 6465 6661 756c 7473 203a 2067    - defaults : g
-00018a90: 6574 2064 6566 6175 6c74 2028 563d 3f2c  et default (V=?,
-00018aa0: 2e2e 2e29 0a20 2020 2020 202d 2061 7267  ...).      - arg
-00018ab0: 7320 2020 2020 3a20 6765 7420 6172 6773  s     : get args
-00018ac0: 2020 2856 2c56 322c 2e2e 2e29 0a20 2020    (V,V2,...).   
-00018ad0: 2020 202d 2076 6172 6172 6773 2020 3a20     - varargs  : 
-00018ae0: 6765 7420 7661 7261 7267 7320 282a 5629  get varargs (*V)
-00018af0: 0a20 2020 2020 202d 206b 6579 776f 7264  .      - keyword
-00018b00: 7320 3a20 6765 7420 6b65 7977 6f72 6473  s : get keywords
-00018b10: 2028 2a2a 5629 0a20 2020 2020 202d 2073   (**V).      - s
-00018b20: 7472 696e 6720 2020 3a20 7265 7475 726e  tring   : return
-00018b30: 2061 7267 756d 656e 7473 2074 6f20 7374   arguments to st
-00018b40: 7269 6e67 2066 6f72 6d61 740a 2020 2020  ring format.    
-00018b50: 2020 2d20 6c69 7374 2c74 7570 6c65 3a20    - list,tuple: 
-00018b60: 7265 7475 726e 2061 7267 756d 656e 7473  return arguments
-00018b70: 2074 6f20 6c69 7374 2066 6f72 6d61 740a   to list format.
-00018b80: 2020 2020 2020 6465 6661 756c 7420 6f75        default ou
-00018b90: 7470 7574 203a 2064 6963 7469 6f6e 6961  tput : dictionia
-00018ba0: 7279 2066 6f72 6d61 740a 2020 2020 2d20  ry format.    - 
-00018bb0: 6465 6661 756c 7420 3a20 6966 206e 6f74  default : if not
-00018bc0: 6869 6e67 2074 6865 6e20 7265 7475 726e  hing then return
-00018bd0: 2064 6566 6175 6c74 2076 616c 7565 2028   default value (
-00018be0: 6465 6661 756c 7420 4e6f 6e65 290a 2020  default None).  
-00018bf0: 2020 2727 270a 2020 2020 6d6f 6465 3d6f    '''.    mode=o
-00018c00: 7074 732e 6765 7428 276d 6f64 6527 2c6f  pts.get('mode',o
-00018c10: 7074 732e 6765 7428 2766 6965 6c64 272c  pts.get('field',
-00018c20: 2764 6566 6175 6c74 7327 2929 0a20 2020  'defaults')).   
-00018c30: 2064 6566 6175 6c74 3d6f 7074 732e 6765   default=opts.ge
-00018c40: 7428 2764 6566 6175 6c74 272c 4e6f 6e65  t('default',None
-00018c50: 290a 2020 2020 2369 6620 6e6f 7420 5479  ).    #if not Ty
-00018c60: 7065 2866 756e 632c 2766 756e 6374 696f  pe(func,'functio
-00018c70: 6e27 2c27 6d65 7468 6f64 2729 3a0a 2020  n','method'):.  
-00018c80: 2020 6966 206e 6f74 2049 7346 756e 6374    if not IsFunct
-00018c90: 696f 6e28 6675 6e63 293a 0a20 2020 2020  ion(func):.     
-00018ca0: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
-00018cb0: 740a 2020 2020 7274 3d7b 7d0a 2020 2020  t.    rt={}.    
-00018cc0: 234e 6f74 2073 7570 706f 7274 202a 7620  #Not support *v 
-00018cd0: 7061 7261 6d65 7465 7220 7769 7468 2067  parameter with g
-00018ce0: 6574 6172 6773 7065 6328 290a 2020 2020  etargspec().    
-00018cf0: 2361 7267 732c 2076 6172 6172 6773 2c20  #args, varargs, 
-00018d00: 6b65 7977 6f72 6473 2c20 6465 6661 756c  keywords, defaul
-00018d10: 7473 203d 2069 6e73 7065 6374 2e67 6574  ts = inspect.get
-00018d20: 6172 6773 7065 6328 6675 6e63 290a 2020  argspec(func).  
-00018d30: 2020 2369 6620 6e6f 7420 4973 4e6f 6e65    #if not IsNone
-00018d40: 2864 6566 6175 6c74 7329 3a0a 2020 2020  (defaults):.    
-00018d50: 2320 2020 2064 6566 6175 6c74 733d 6469  #    defaults=di
-00018d60: 6374 287a 6970 2861 7267 735b 2d6c 656e  ct(zip(args[-len
-00018d70: 2864 6566 6175 6c74 7329 3a5d 2c20 6465  (defaults):], de
-00018d80: 6661 756c 7473 2929 0a20 2020 2023 2020  faults)).    #  
-00018d90: 2020 6465 6c20 6172 6773 5b2d 6c65 6e28    del args[-len(
-00018da0: 6465 6661 756c 7473 293a 5d0a 2020 2020  defaults):].    
-00018db0: 2320 2020 2072 745b 2764 6566 6175 6c74  #    rt['default
-00018dc0: 7327 5d3d 6465 6661 756c 7473 0a20 2020  s']=defaults.   
-00018dd0: 2023 2069 6e73 7065 6374 2e67 6574 6361   # inspect.getca
-00018de0: 6c6c 6172 6773 283c 6675 6e63 7469 6f6e  llargs(<function
-00018df0: 3e2c 6461 7461 732e 2e2e 2e29 203a 2061  >,datas....) : a
-00018e00: 7574 6f6d 6174 6963 616c 6c79 206d 6174  utomatically mat
-00018e10: 6368 696e 6720 616e 6420 7075 7420 746f  ching and put to
-00018e20: 203c 6675 6e63 7469 6f6e 733e 2773 2069   <functions>'s i
-00018e30: 6e70 7574 7320 3a20 4368 6563 6b20 6974  nputs : Check it
-00018e40: 206c 6174 6572 0a20 2020 2074 7279 3a0a   later.    try:.
-00018e50: 2020 2020 2020 2020 6172 6720 3d20 696e          arg = in
-00018e60: 7370 6563 742e 6765 7466 756c 6c61 7267  spect.getfullarg
-00018e70: 7370 6563 2866 756e 6329 0a20 2020 2065  spec(func).    e
-00018e80: 7863 6570 743a 0a20 2020 2020 2020 2072  xcept:.        r
-00018e90: 6574 7572 6e20 7274 0a0a 2020 2020 6172  eturn rt..    ar
-00018ea0: 6773 3d61 7267 2e61 7267 730a 2020 2020  gs=arg.args.    
-00018eb0: 7661 7261 7267 733d 6172 672e 7661 7261  varargs=arg.vara
-00018ec0: 7267 730a 2020 2020 6b65 7977 6f72 6473  rgs.    keywords
-00018ed0: 3d61 7267 2e76 6172 6b77 0a20 2020 2064  =arg.varkw.    d
-00018ee0: 6566 6175 6c74 733d 6172 672e 6b77 6f6e  efaults=arg.kwon
-00018ef0: 6c79 6465 6661 756c 7473 0a20 2020 2069  lydefaults.    i
-00018f00: 6620 6e6f 7420 4973 4e6f 6e65 2861 7267  f not IsNone(arg
-00018f10: 2e64 6566 6175 6c74 7329 3a0a 2020 2020  .defaults):.    
-00018f20: 2020 2020 6966 2064 6566 6175 6c74 7320      if defaults 
-00018f30: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00018f40: 2020 2020 2064 6566 6175 6c74 733d 6469       defaults=di
-00018f50: 6374 287a 6970 2861 7267 735b 2d6c 656e  ct(zip(args[-len
-00018f60: 2861 7267 2e64 6566 6175 6c74 7329 3a5d  (arg.defaults):]
-00018f70: 2c61 7267 2e64 6566 6175 6c74 7329 290a  ,arg.defaults)).
-00018f80: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00018f90: 2020 2020 2020 2020 2020 6465 6661 756c            defaul
-00018fa0: 7473 2e75 7064 6174 6528 6469 6374 287a  ts.update(dict(z
-00018fb0: 6970 2861 7267 735b 2d6c 656e 2861 7267  ip(args[-len(arg
-00018fc0: 2e64 6566 6175 6c74 7329 3a5d 2c61 7267  .defaults):],arg
-00018fd0: 2e64 6566 6175 6c74 7329 2929 0a20 2020  .defaults))).   
-00018fe0: 2020 2020 2064 656c 2061 7267 735b 2d6c       del args[-l
-00018ff0: 656e 2861 7267 2e64 6566 6175 6c74 7329  en(arg.defaults)
-00019000: 3a5d 0a0a 2020 2020 6966 206e 6f74 2049  :]..    if not I
-00019010: 734e 6f6e 6528 6465 6661 756c 7473 293a  sNone(defaults):
-00019020: 2072 745b 2764 6566 6175 6c74 7327 5d3d   rt['defaults']=
-00019030: 6465 6661 756c 7473 0a20 2020 2069 6620  defaults.    if 
-00019040: 6172 6773 3a0a 2020 2020 2020 2020 6966  args:.        if
-00019050: 2061 7267 735b 305d 203d 3d20 2773 656c   args[0] == 'sel
-00019060: 6627 3a0a 2020 2020 2020 2020 2020 2020  f':.            
-00019070: 6172 6773 3d61 7267 735b 313a 5d0a 2020  args=args[1:].  
-00019080: 2020 2020 2020 7274 5b27 6172 6773 275d        rt['args']
-00019090: 3d61 7267 730a 2020 2020 6966 2076 6172  =args.    if var
-000190a0: 6172 6773 3a20 7274 5b27 7661 7261 7267  args: rt['vararg
-000190b0: 7327 5d3d 7661 7261 7267 730a 2020 2020  s']=varargs.    
-000190c0: 6966 206b 6579 776f 7264 733a 2072 745b  if keywords: rt[
-000190d0: 276b 6579 776f 7264 7327 5d3d 6b65 7977  'keywords']=keyw
-000190e0: 6f72 6473 0a20 2020 2069 6620 5479 7065  ords.    if Type
-000190f0: 286d 6f64 652c 286c 6973 742c 7475 706c  (mode,(list,tupl
-00019100: 6529 293a 0a20 2020 2020 2020 2072 7473  e)):.        rts
-00019110: 3d5b 5d0a 2020 2020 2020 2020 666f 7220  =[].        for 
-00019120: 6969 2069 6e20 7274 3a0a 2020 2020 2020  ii in rt:.      
-00019130: 2020 2020 2020 7274 732e 6170 7065 6e64        rts.append
-00019140: 2872 742e 6765 7428 6969 2c64 6566 6175  (rt.get(ii,defau
-00019150: 6c74 2929 0a20 2020 2020 2020 2072 6574  lt)).        ret
-00019160: 7572 6e20 7274 730a 2020 2020 656c 7365  urn rts.    else
-00019170: 3a0a 2020 2020 2020 2020 6966 206d 6f64  :.        if mod
-00019180: 6520 696e 205b 2773 7472 272c 2773 7472  e in ['str','str
-00019190: 696e 6727 2c27 666f 726d 6174 275d 3a0a  ing','format']:.
-000191a0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000191b0: 726e 2073 7472 2869 6e73 7065 6374 2e73  rn str(inspect.s
-000191c0: 6967 6e61 7475 7265 2866 756e 6329 290a  ignature(func)).
-000191d0: 2020 2020 2020 2020 2020 2020 2361 7267              #arg
-000191e0: 5f73 7472 3d27 270a 2020 2020 2020 2020  _str=''.        
-000191f0: 2020 2020 2369 6620 7274 3a0a 2020 2020      #if rt:.    
-00019200: 2020 2020 2020 2020 2320 2020 2066 6f72          #    for
-00019210: 207a 2069 6e20 7274 2e67 6574 2827 6172   z in rt.get('ar
-00019220: 6773 272c 5b5d 293a 0a20 2020 2020 2020  gs',[]):.       
-00019230: 2020 2020 2023 2020 2020 2020 2020 2069       #         i
-00019240: 6620 6172 675f 7374 723a 0a20 2020 2020  f arg_str:.     
-00019250: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00019260: 2020 2020 2061 7267 5f73 7472 3d61 7267       arg_str=arg
-00019270: 5f73 7472 2b27 2c7b 7d27 2e66 6f72 6d61  _str+',{}'.forma
-00019280: 7428 7a29 0a20 2020 2020 2020 2020 2020  t(z).           
-00019290: 2023 2020 2020 2020 2020 2065 6c73 653a   #         else:
-000192a0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-000192b0: 2020 2020 2020 2020 2020 2061 7267 5f73             arg_s
-000192c0: 7472 3d27 7b7d 272e 666f 726d 6174 287a  tr='{}'.format(z
-000192d0: 290a 2020 2020 2020 2020 2020 2020 2320  ).            # 
-000192e0: 2020 2069 6620 2776 6172 6172 6773 2720     if 'varargs' 
-000192f0: 696e 2072 743a 0a20 2020 2020 2020 2020  in rt:.         
-00019300: 2020 2023 2020 2020 2020 2020 2069 6620     #         if 
-00019310: 6172 675f 7374 723a 0a20 2020 2020 2020  arg_str:.       
-00019320: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00019330: 2020 2061 7267 5f73 7472 3d61 7267 5f73     arg_str=arg_s
-00019340: 7472 2b27 2c2a 7b7d 272e 666f 726d 6174  tr+',*{}'.format
-00019350: 2872 745b 2776 6172 6172 6773 275d 290a  (rt['varargs']).
-00019360: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-00019370: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00019380: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00019390: 2020 2020 2020 6172 675f 7374 723d 272a        arg_str='*
-000193a0: 7b7d 272e 666f 726d 6174 2872 745b 2776  {}'.format(rt['v
-000193b0: 6172 6172 6773 275d 290a 2020 2020 2020  arargs']).      
-000193c0: 2020 2020 2020 2320 2020 2069 6620 2764        #    if 'd
-000193d0: 6566 6175 6c74 7327 2069 6e20 7274 3a0a  efaults' in rt:.
-000193e0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-000193f0: 2020 2020 2066 6f72 207a 2069 6e20 7274       for z in rt
-00019400: 5b27 6465 6661 756c 7473 275d 3a0a 2020  ['defaults']:.  
-00019410: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00019420: 2020 2020 2020 2020 6966 2061 7267 5f73          if arg_s
-00019430: 7472 3a0a 2020 2020 2020 2020 2020 2020  tr:.            
-00019440: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00019450: 2020 6172 675f 7374 723d 6172 675f 7374    arg_str=arg_st
-00019460: 722b 272c 7b7d 3d27 2e66 6f72 6d61 7428  r+',{}='.format(
-00019470: 7a29 0a20 2020 2020 2020 2020 2020 2023  z).            #
-00019480: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00019490: 653a 0a20 2020 2020 2020 2020 2020 2023  e:.            #
-000194a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000194b0: 2061 7267 5f73 7472 3d27 7b7d 3d27 2e66   arg_str='{}='.f
-000194c0: 6f72 6d61 7428 7a29 0a20 2020 2020 2020  ormat(z).       
-000194d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000194e0: 2020 2069 6620 5479 7065 2872 745b 2764     if Type(rt['d
-000194f0: 6566 6175 6c74 7327 5d5b 7a5d 2c73 7472  efaults'][z],str
-00019500: 293a 0a20 2020 2020 2020 2020 2020 2023  ):.            #
-00019510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019520: 2061 7267 5f73 7472 3d61 7267 5f73 7472   arg_str=arg_str
-00019530: 2b22 277b 7d27 222e 666f 726d 6174 2872  +"'{}'".format(r
-00019540: 745b 2764 6566 6175 6c74 7327 5d5b 7a5d  t['defaults'][z]
-00019550: 290a 2020 2020 2020 2020 2020 2020 2320  ).            # 
-00019560: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00019570: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-00019580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019590: 6172 675f 7374 723d 6172 675f 7374 722b  arg_str=arg_str+
-000195a0: 227b 7d22 2e66 6f72 6d61 7428 7274 5b27  "{}".format(rt['
-000195b0: 6465 6661 756c 7473 275d 5b7a 5d29 0a20  defaults'][z]). 
-000195c0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-000195d0: 6966 2027 6b65 7977 6f72 6473 2720 696e  if 'keywords' in
-000195e0: 2072 743a 0a20 2020 2020 2020 2020 2020   rt:.           
-000195f0: 2023 2020 2020 2020 2020 6966 2061 7267   #        if arg
-00019600: 5f73 7472 3a0a 2020 2020 2020 2020 2020  _str:.          
-00019610: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00019620: 6172 675f 7374 723d 6172 675f 7374 722b  arg_str=arg_str+
-00019630: 272c 2a2a 7b7d 272e 666f 726d 6174 2872  ',**{}'.format(r
-00019640: 745b 276b 6579 776f 7264 7327 5d29 0a20  t['keywords']). 
-00019650: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00019660: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00019670: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00019680: 2020 2020 6172 675f 7374 723d 272a 2a7b      arg_str='**{
-00019690: 7d27 2e66 6f72 6d61 7428 7274 5b27 6b65  }'.format(rt['ke
-000196a0: 7977 6f72 6473 275d 290a 2020 2020 2020  ywords']).      
-000196b0: 2020 2020 2020 2372 6574 7572 6e20 6172        #return ar
-000196c0: 675f 7374 720a 2020 2020 2020 2020 6966  g_str.        if
-000196d0: 206d 6f64 6520 696e 2072 743a 0a20 2020   mode in rt:.   
-000196e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000196f0: 7274 5b6d 6f64 655d 0a20 2020 2020 2020  rt[mode].       
-00019700: 2072 6574 7572 6e20 7274 0a0a 6465 6620   return rt..def 
-00019710: 4172 6773 2873 7263 2c66 6965 6c64 3d27  Args(src,field='
-00019720: 616c 6c27 2c64 6566 6175 6c74 3d7b 7d29  all',default={})
-00019730: 3a0a 2020 2020 2727 270a 2020 2020 4765  :.    '''.    Ge
-00019740: 7420 436c 6173 732c 2069 6e73 7461 6e63  t Class, instanc
-00019750: 6527 7320 676c 6f62 616c 2061 7267 756d  e's global argum
-00019760: 656e 7473 0a20 2020 2047 6574 2046 756e  ents.    Get Fun
-00019770: 6374 696f 6e20 696e 7075 7420 7061 7261  ction input para
-00019780: 6d65 7465 7273 0a20 2020 2027 2727 0a20  meters.    '''. 
-00019790: 2020 2072 743d 7b7d 0a20 2020 2069 6620     rt={}.    if 
-000197a0: 5479 7065 2873 7263 2c28 2763 6c61 7373  Type(src,('class
-000197b0: 6f62 6a27 2c27 696e 7374 616e 6365 2729  obj','instance')
-000197c0: 293a 0a20 2020 2020 2020 2074 7279 3a0a  ):.        try:.
-000197d0: 2020 2020 2020 2020 2020 2020 7372 633d              src=
-000197e0: 6765 7461 7474 7228 7372 632c 275f 5f69  getattr(src,'__i
-000197f0: 6e69 745f 5f27 290a 2020 2020 2020 2020  nit__').        
-00019800: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
-00019810: 2020 2020 7265 7475 726e 2073 7263 2e5f      return src._
-00019820: 5f64 6963 745f 5f0a 2020 2020 2365 6c69  _dict__.    #eli
-00019830: 6620 6e6f 7420 5479 7065 2873 7263 2c27  f not Type(src,'
-00019840: 6675 6e63 7469 6f6e 2729 3a0a 2020 2020  function'):.    
-00019850: 656c 6966 206e 6f74 2049 7346 756e 6374  elif not IsFunct
-00019860: 696f 6e28 7372 6329 3a0a 2020 2020 2020  ion(src):.      
-00019870: 2020 7265 7475 726e 2064 6566 6175 6c74    return default
-00019880: 0a20 2020 2072 6574 7572 6e20 4675 6e63  .    return Func
-00019890: 7469 6f6e 4172 6773 2873 7263 2c6d 6f64  tionArgs(src,mod
-000198a0: 653d 6669 656c 642c 6465 6661 756c 743d  e=field,default=
-000198b0: 6465 6661 756c 7429 0a0a 6465 6620 5661  default)..def Va
-000198c0: 7269 6162 6c65 2873 7263 3d4e 6f6e 652c  riable(src=None,
-000198d0: 6f62 6a3d 4e6f 6e65 2c70 6172 656e 743d  obj=None,parent=
-000198e0: 302c 6869 7374 6f72 793d 4661 6c73 652c  0,history=False,
-000198f0: 6465 6661 756c 743d 4661 6c73 652c 6d6f  default=False,mo
-00019900: 6465 3d27 6c6f 6361 6c27 2c56 6172 5479  de='local',VarTy
-00019910: 7065 3d4e 6f6e 652c 616c 6c74 7970 653d  pe=None,alltype=
-00019920: 5472 7565 293a 0a20 2020 2027 2727 0a20  True):.    '''. 
-00019930: 2020 2047 6574 2061 7661 696c 6162 6c65     Get available
-00019940: 2076 6172 6961 626c 6520 6461 7461 0a20   variable data. 
-00019950: 2020 2020 2d20 7372 633a 200a 2020 2020      - src: .    
-00019960: 2020 2069 6620 4e6f 6e65 3a20 7265 7475     if None: retu
-00019970: 726e 2077 686f 6c65 2065 6e76 6972 6f6e  rn whole environ
-00019980: 6d65 6e74 2028 6469 6374 290a 2020 2020  ment (dict).    
-00019990: 2020 2069 6620 7374 7269 6e67 2074 6865     if string the
-000199a0: 6e20 6669 6e64 2074 6865 2073 7472 696e  n find the strin
-000199b0: 6720 7661 7269 6162 6c65 2069 6e20 7468  g variable in th
-000199c0: 6520 656e 7669 726f 6e6d 656e 740a 2020  e environment.  
-000199d0: 2020 2020 2069 6620 7661 7269 6162 6c65       if variable
-000199e0: 2074 6865 6e20 7265 7475 726e 2074 6861   then return tha
-000199f0: 740a 2020 2020 202d 2070 6172 656e 7420  t.     - parent 
-00019a00: 0a20 2020 2020 2020 3020 3a20 6d79 2066  .       0 : my f
-00019a10: 756e 6374 696f 6e20 2864 6566 6175 6c74  unction (default
-00019a20: 290a 2020 2020 2020 2031 203a 206d 7920  ).       1 : my 
-00019a30: 7061 7265 6e74 7320 6675 6e63 7469 6f6e  parents function
-00019a40: 0a20 2020 2020 2020 2e2e 2e0a 2020 2020  .       ....    
-00019a50: 202d 2068 6973 746f 7279 3a20 6672 6f6d   - history: from
-00019a60: 206d 6520 746f 206d 7920 746f 7020 6f66   me to my top of
-00019a70: 2074 6865 2066 756e 6374 696f 6e73 0a20   the functions. 
-00019a80: 2020 2020 2d20 6d6f 6465 2020 3a20 7661      - mode  : va
-00019a90: 7269 6162 6c65 2061 7265 610a 2020 2020  riable area.    
-00019aa0: 2020 206c 6f63 616c 203a 2066 756e 6374     local : funct
-00019ab0: 696f 6e27 7320 6c6f 6361 6c28 696e 7369  ion's local(insi
-00019ac0: 6465 2920 7661 7269 6162 6c65 0a20 2020  de) variable.   
-00019ad0: 2020 2020 676c 6f62 616c 3a20 6675 6e63      global: func
-00019ae0: 7469 6f6e 2773 2067 6c6f 6261 6c20 7661  tion's global va
-00019af0: 7269 6162 6c65 0a20 2020 2027 2727 0a20  riable.    '''. 
-00019b00: 2020 2073 7263 5f74 7970 653d 5479 7065     src_type=Type
-00019b10: 4e61 6d65 2873 7263 290a 2020 2020 6f62  Name(src).    ob
-00019b20: 6a5f 7479 7065 3d54 7970 654e 616d 6528  j_type=TypeName(
-00019b30: 6f62 6a29 0a20 2020 2070 6172 656e 743d  obj).    parent=
-00019b40: 496e 7428 7061 7265 6e74 290a 2020 2020  Int(parent).    
-00019b50: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
-00019b60: 6528 7061 7265 6e74 2c69 6e74 293a 2070  e(parent,int): p
-00019b70: 6172 656e 743d 300a 2020 2020 6966 2070  arent=0.    if p
-00019b80: 6172 656e 7420 3e3d 2030 3a0a 2020 2020  arent >= 0:.    
-00019b90: 2020 2020 6c6f 633d 312b 7061 7265 6e74      loc=1+parent
-00019ba0: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00019bb0: 2020 206c 6f63 3d70 6172 656e 740a 2020     loc=parent.  
-00019bc0: 2020 696e 7370 7374 3d69 6e73 7065 6374    inspst=inspect
-00019bd0: 2e73 7461 636b 2829 0a20 2020 2023 696e  .stack().    #in
-00019be0: 7370 6563 742e 7374 6163 6b28 295b 6465  spect.stack()[de
-00019bf0: 7074 685d 5b30 5d20 3a20 6672 616d 6520  pth][0] : frame 
-00019c00: 0a20 2020 2023 696e 7370 6563 742e 6765  .    #inspect.ge
-00019c10: 746d 656d 6265 7273 2866 7261 6d65 2920  tmembers(frame) 
-00019c20: 3a20 656e 7669 726f 6e6d 656e 7473 0a20  : environments. 
-00019c30: 2020 2069 6620 6c65 6e28 696e 7370 7374     if len(inspst
-00019c40: 2920 3c3d 206c 6f63 3a20 236f 7574 206f  ) <= loc: #out o
-00019c50: 6620 7261 6e67 650a 2020 2020 2020 2020  f range.        
-00019c60: 6c6f 633d 2d31 0a20 2020 2072 743d 7b7d  loc=-1.    rt={}
-00019c70: 0a20 2020 2069 6620 6f62 6a5f 7479 7065  .    if obj_type
-00019c80: 2069 6e20 5b27 6d6f 6475 6c65 272c 2763   in ['module','c
-00019c90: 6c61 7373 6f62 6a27 2c27 696e 7374 616e  lassobj','instan
-00019ca0: 6365 275d 3a0a 2020 2020 2020 2020 7274  ce']:.        rt
-00019cb0: 2e75 7064 6174 6528 6f62 6a2e 5f5f 6469  .update(obj.__di
-00019cc0: 6374 5f5f 290a 2020 2020 656c 7365 3a20  ct__).    else: 
-00019cd0: 2320 676c 6f62 616c 2061 6e64 206c 6f63  # global and loc
-00019ce0: 616c 7320 7661 7269 6162 6c65 7320 6672  als variables fr
-00019cf0: 6f6d 206d 6520 746f 2074 6f70 0a20 2020  om me to top.   
-00019d00: 2020 2020 2069 6620 6869 7374 6f72 793a       if history:
-00019d10: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00019d20: 2069 2069 6e20 7261 6e67 6528 6c65 6e28   i in range(len(
-00019d30: 696e 7370 7374 292d 312c 302c 2d31 293a  inspst)-1,0,-1):
-00019d40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019d50: 2069 6620 6d6f 6465 2069 6e20 5b27 676c   if mode in ['gl
-00019d60: 6f62 616c 272c 2761 6c6c 275d 3a0a 2020  obal','all']:.  
-00019d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019d80: 2020 7274 2e75 7064 6174 6528 6469 6374    rt.update(dict
-00019d90: 2869 6e73 7065 6374 2e67 6574 6d65 6d62  (inspect.getmemb
-00019da0: 6572 7328 696e 7370 7374 5b69 5d5b 305d  ers(inspst[i][0]
-00019db0: 2929 5b22 665f 676c 6f62 616c 7322 5d29  ))["f_globals"])
-00019dc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019dd0: 2069 6620 6d6f 6465 2069 6e20 5b27 6c6f   if mode in ['lo
-00019de0: 6361 6c27 2c27 616c 6c27 5d3a 0a20 2020  cal','all']:.   
-00019df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019e00: 2072 742e 7570 6461 7465 2864 6963 7428   rt.update(dict(
-00019e10: 696e 7370 6563 742e 6765 746d 656d 6265  inspect.getmembe
-00019e20: 7273 2869 6e73 7073 745b 695d 5b30 5d29  rs(inspst[i][0])
-00019e30: 295b 2266 5f6c 6f63 616c 7322 5d29 0a20  )["f_locals"]). 
-00019e40: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00019e50: 2020 2020 2020 2020 2069 6620 6d6f 6465           if mode
-00019e60: 2069 6e20 5b27 676c 6f62 616c 272c 2761   in ['global','a
-00019e70: 6c6c 275d 3a0a 2020 2020 2020 2020 2020  ll']:.          
-00019e80: 2020 2020 2020 7274 2e75 7064 6174 6528        rt.update(
-00019e90: 6469 6374 2869 6e73 7065 6374 2e67 6574  dict(inspect.get
-00019ea0: 6d65 6d62 6572 7328 696e 7370 7374 5b6c  members(inspst[l
-00019eb0: 6f63 5d5b 305d 2929 5b22 665f 676c 6f62  oc][0]))["f_glob
-00019ec0: 616c 7322 5d29 0a20 2020 2020 2020 2020  als"]).         
-00019ed0: 2020 2069 6620 6d6f 6465 2069 6e20 5b27     if mode in ['
-00019ee0: 6c6f 6361 6c27 2c27 616c 6c27 5d3a 0a20  local','all']:. 
-00019ef0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00019f00: 742e 7570 6461 7465 2864 6963 7428 696e  t.update(dict(in
-00019f10: 7370 6563 742e 6765 746d 656d 6265 7273  spect.getmembers
-00019f20: 2869 6e73 7073 745b 6c6f 635d 5b30 5d29  (inspst[loc][0])
-00019f30: 295b 2266 5f6c 6f63 616c 7322 5d29 0a20  )["f_locals"]). 
-00019f40: 2020 2069 6620 7372 635f 7479 7065 3d3d     if src_type==
-00019f50: 276e 6f6e 6574 7970 6527 3a0a 2020 2020  'nonetype':.    
-00019f60: 2020 2020 6966 2061 6c6c 7479 7065 3a0a      if alltype:.
-00019f70: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00019f80: 726e 2072 740a 2020 2020 2020 2020 6f3d  rn rt.        o=
-00019f90: 7b7d 0a20 2020 2020 2020 2066 6f72 2069  {}.        for i
-00019fa0: 2069 6e20 7274 3a0a 2020 2020 2020 2020   in rt:.        
-00019fb0: 2020 2020 6966 2069 2069 6e20 2827 5f5f      if i in ('__
-00019fc0: 6275 696c 7469 6e73 5f5f 272c 275f 5f63  builtins__','__c
-00019fd0: 6163 6865 645f 5f27 2c27 6d6f 6475 6c65  ached__','module
-00019fe0: 7327 2c27 6d6f 645f 7061 7468 2729 206f  s','mod_path') o
-00019ff0: 7220 5479 7065 4e61 6d65 2872 745b 695d  r TypeName(rt[i]
-0001a000: 2920 696e 2028 2766 756e 6374 696f 6e27  ) in ('function'
-0001a010: 2c27 6d6f 6475 6c65 272c 2763 6c61 7373  ,'module','class
-0001a020: 6f62 6a27 2c27 696e 7374 616e 6365 272c  obj','instance',
-0001a030: 2762 7569 6c74 696e 5f66 756e 6374 696f  'builtin_functio
-0001a040: 6e5f 6f72 5f6d 6574 686f 6427 2c27 6d65  n_or_method','me
-0001a050: 7468 6f64 2729 3a20 0a20 2020 2020 2020  thod'): .       
-0001a060: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
-0001a070: 650a 2020 2020 2020 2020 2020 2020 6f5b  e.            o[
-0001a080: 695d 3d72 745b 695d 0a20 2020 2020 2020  i]=rt[i].       
-0001a090: 2072 6574 7572 6e20 6f0a 2020 2020 656c   return o.    el
-0001a0a0: 6966 2073 7263 5f74 7970 6520 3d3d 2027  if src_type == '
-0001a0b0: 7374 7227 3a0a 2020 2020 2020 2020 6f75  str':.        ou
-0001a0c0: 743d 7274 2e67 6574 2873 7263 2c64 6566  t=rt.get(src,def
-0001a0d0: 6175 6c74 290a 2020 2020 2020 2020 6966  ault).        if
-0001a0e0: 2056 6172 5479 7065 3a20 2320 6966 2070   VarType: # if p
-0001a0f0: 7574 2065 7870 6563 7465 6420 7479 7065  ut expected type
-0001a100: 2074 6865 6e0a 2020 2020 2020 2020 2020   then.          
-0001a110: 2020 6966 2054 7970 6528 6f75 742c 5661    if Type(out,Va
-0001a120: 7254 7970 6529 3a20 7265 7475 726e 206f  rType): return o
-0001a130: 7574 2023 2069 6620 6765 7474 696e 6720  ut # if getting 
-0001a140: 6461 7461 2069 7320 6578 7065 6374 6564  data is expected
-0001a150: 2074 7970 6520 7468 656e 200a 2020 2020   type then .    
-0001a160: 2020 2020 2020 2020 7265 7475 726e 2064          return d
-0001a170: 6566 6175 6c74 2023 2069 6620 6e6f 7420  efault # if not 
-0001a180: 6578 7065 6374 6564 2074 6865 6e20 7265  expected then re
-0001a190: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
-0001a1a0: 2020 2020 2072 6574 7572 6e20 6f75 7420       return out 
-0001a1b0: 2320 6a75 7374 2072 6574 7572 6e20 676f  # just return go
-0001a1c0: 7474 656e 2064 6174 610a 2020 2020 2020  tten data.      
-0001a1d0: 2020 2369 6620 6f62 6a5f 7479 7065 2069    #if obj_type i
-0001a1e0: 6e20 5b27 6d6f 6475 6c65 275d 3a0a 2020  n ['module']:.  
-0001a1f0: 2020 2020 2020 2320 2020 2023 2067 6574        #    # get
-0001a200: 6174 7472 283c 636c 6173 733e 2c27 6e61  attr(<class>,'na
-0001a210: 6d65 2729 203a 2047 6574 2064 6174 610a  me') : Get data.
-0001a220: 2020 2020 2020 2020 2320 2020 2023 2068          #    # h
-0001a230: 6173 6174 7472 283c 636c 6173 733e 2c27  asattr(<class>,'
-0001a240: 6e61 6d65 2729 203a 2063 6865 636b 206e  name') : check n
-0001a250: 616d 650a 2020 2020 2020 2020 2320 2020  ame.        #   
-0001a260: 2023 2073 6574 6174 7472 283c 636c 6173   # setattr(<clas
-0001a270: 733e 2c27 6e61 6d65 2729 203a 2075 7064  s>,'name') : upd
-0001a280: 6174 6520 746f 206e 616d 650a 2020 2020  ate to name.    
-0001a290: 2020 2020 2320 2020 2023 2064 656c 6174      #    # delat
-0001a2a0: 7472 283c 636c 6173 733e 2c27 6e61 6d65  tr(<class>,'name
-0001a2b0: 2729 203a 2072 656d 6f76 6520 6e61 6d65  ') : remove name
-0001a2c0: 0a20 2020 2020 2020 2023 2020 2020 6966  .        #    if
-0001a2d0: 2068 6173 6174 7472 286f 626a 2c73 7263   hasattr(obj,src
-0001a2e0: 293a 2072 6574 7572 6e20 6765 7461 7474  ): return getatt
-0001a2f0: 7228 6f62 6a2c 7372 6329 0a20 2020 2020  r(obj,src).     
-0001a300: 2020 2023 656c 6966 206f 626a 5f74 7970     #elif obj_typ
-0001a310: 6520 696e 205b 2763 6c61 7373 275d 3a0a  e in ['class']:.
-0001a320: 2020 2020 2020 2020 2320 2020 206f 626a          #    obj
-0001a330: 3d6f 626a 2829 0a20 2020 2020 2020 2023  =obj().        #
-0001a340: 2020 2020 6966 2068 6173 6174 7472 286f      if hasattr(o
-0001a350: 626a 2c73 7263 293a 2072 6574 7572 6e20  bj,src): return 
-0001a360: 6765 7461 7474 7228 6f62 6a2c 7372 6329  getattr(obj,src)
-0001a370: 0a20 2020 2020 2020 2023 656c 7365 3a20  .        #else: 
-0001a380: 234e 6f20 6f62 6a65 6374 0a20 2020 2020  #No object.     
-0001a390: 2020 2023 2020 2020 6f75 743d 7274 2e67     #    out=rt.g
-0001a3a0: 6574 2873 7263 2c64 6566 6175 6c74 290a  et(src,default).
-0001a3b0: 2020 2020 2020 2020 2320 2020 2069 6620          #    if 
-0001a3c0: 5661 7254 7970 653a 2023 2069 6620 7075  VarType: # if pu
-0001a3d0: 7420 6578 7065 6374 6564 2074 7970 6520  t expected type 
-0001a3e0: 7468 656e 0a20 2020 2020 2020 2023 2020  then.        #  
-0001a3f0: 2020 2020 2020 6966 2054 7970 6528 6f75        if Type(ou
-0001a400: 742c 5661 7254 7970 6529 3a20 7265 7475  t,VarType): retu
-0001a410: 726e 206f 7574 2023 2069 6620 6765 7474  rn out # if gett
-0001a420: 696e 6720 6461 7461 2069 7320 6578 7065  ing data is expe
-0001a430: 6374 6564 2074 7970 6520 7468 656e 200a  cted type then .
-0001a440: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0001a450: 2072 6574 7572 6e20 6465 6661 756c 7420   return default 
-0001a460: 2320 6966 206e 6f74 2065 7870 6563 7465  # if not expecte
-0001a470: 6420 7468 656e 2072 6574 7572 6e20 6465  d then return de
-0001a480: 6661 756c 740a 2020 2020 2020 2020 2320  fault.        # 
-0001a490: 2020 2072 6574 7572 6e20 6f75 7420 2320     return out # 
-0001a4a0: 6a75 7374 2072 6574 7572 6e20 676f 7474  just return gott
-0001a4b0: 656e 2064 6174 610a 2020 2020 7265 7475  en data.    retu
-0001a4c0: 726e 2064 6566 6175 6c74 0a0a 6465 6620  rn default..def 
-0001a4d0: 556e 6971 2873 7263 2c64 6566 6175 6c74  Uniq(src,default
-0001a4e0: 3d27 6f72 6727 2c73 6f72 743d 4661 6c73  ='org',sort=Fals
-0001a4f0: 652c 7374 7269 703d 4661 6c73 652c 6373  e,strip=False,cs
-0001a500: 7472 6970 3d46 616c 7365 293a 0a20 2020  trip=False):.   
-0001a510: 2027 2727 0a20 2020 206d 616b 6520 746f   '''.    make to
-0001a520: 2075 6e69 7120 6461 7461 0a20 2020 2064   uniq data.    d
-0001a530: 6566 6175 6c74 3d27 6f72 6727 3a20 7265  efault='org': re
-0001a540: 7475 726e 206f 7269 6769 6e61 6c20 6461  turn original da
-0001a550: 7461 0a20 2020 2073 6f72 743d 4661 6c73  ta.    sort=Fals
-0001a560: 6520 2020 3a20 736f 7274 2064 6174 610a  e   : sort data.
-0001a570: 2020 2020 7374 7269 703d 4661 6c73 6520      strip=False 
-0001a580: 203a 2072 656d 6f76 6520 7768 6974 6520   : remove white 
-0001a590: 7370 6163 6520 616e 6420 6d61 6b65 2074  space and make t
-0001a5a0: 6f20 756e 6971 0a20 2020 2063 7374 7269  o uniq.    cstri
-0001a5b0: 703d 4661 6c73 6520 3a20 6368 6563 6b20  p=False : check 
-0001a5c0: 7769 7468 6f75 7420 7768 6974 6520 7370  without white sp
-0001a5d0: 6163 652c 2062 7574 2072 656d 6169 6e20  ace, but remain 
-0001a5e0: 6669 7273 7420 7369 6d69 6c61 7220 6461  first similar da
-0001a5f0: 7461 0a20 2020 2027 2727 0a20 2020 2069  ta.    '''.    i
-0001a600: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
-0001a610: 2c28 6c69 7374 2c74 7570 6c65 2929 3a0a  ,(list,tuple)):.
-0001a620: 2020 2020 2020 2020 7274 3d5b 5d0a 2020          rt=[].  
-0001a630: 2020 2020 2020 6966 2063 7374 7269 703a        if cstrip:
-0001a640: 0a20 2020 2020 2020 2020 2020 206e 7372  .            nsr
-0001a650: 633d 5b69 2e73 7472 6970 2829 2069 6620  c=[i.strip() if 
-0001a660: 6973 696e 7374 616e 6365 2869 2c28 7374  isinstance(i,(st
-0001a670: 722c 6279 7465 7329 2920 656c 7365 2069  r,bytes)) else i
-0001a680: 2066 6f72 2069 2069 6e20 7372 635d 0a20   for i in src]. 
-0001a690: 2020 2020 2020 2020 2020 2063 3d5b 5d0a             c=[].
-0001a6a0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001a6b0: 692c 6420 696e 2065 6e75 6d65 7261 7465  i,d in enumerate
-0001a6c0: 286e 7372 6329 3a0a 2020 2020 2020 2020  (nsrc):.        
-0001a6d0: 2020 2020 2020 2020 6966 2064 206e 6f74          if d not
-0001a6e0: 2069 6e20 633a 0a20 2020 2020 2020 2020   in c:.         
-0001a6f0: 2020 2020 2020 2020 2020 2063 2e61 7070             c.app
-0001a700: 656e 6428 6429 0a20 2020 2020 2020 2020  end(d).         
-0001a710: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
-0001a720: 7065 6e64 2873 7263 5b69 5d29 0a20 2020  pend(src[i]).   
-0001a730: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0001a740: 2020 2020 2020 2069 6620 7374 7269 703a         if strip:
-0001a750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a760: 2073 7263 3d5b 692e 7374 7269 7028 2920   src=[i.strip() 
-0001a770: 6966 2069 7369 6e73 7461 6e63 6528 692c  if isinstance(i,
-0001a780: 2873 7472 2c62 7974 6573 2929 2065 6c73  (str,bytes)) els
-0001a790: 6520 6920 666f 7220 6920 696e 2073 7263  e i for i in src
-0001a7a0: 5d0a 2020 2020 2020 2020 2020 2020 666f  ].            fo
-0001a7b0: 7220 6920 696e 2073 7263 3a0a 2020 2020  r i in src:.    
-0001a7c0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-0001a7d0: 206e 6f74 2069 6e20 7274 3a20 7274 2e61   not in rt: rt.a
-0001a7e0: 7070 656e 6428 6929 0a20 2020 2020 2020  ppend(i).       
-0001a7f0: 2069 6620 736f 7274 3a20 7274 3d53 6f72   if sort: rt=Sor
-0001a800: 7428 7274 290a 2020 2020 2020 2020 7265  t(rt).        re
-0001a810: 7475 726e 2074 7570 6c65 2872 7429 2069  turn tuple(rt) i
-0001a820: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
-0001a830: 2c74 7570 6c65 2920 656c 7365 2072 740a  ,tuple) else rt.
-0001a840: 2020 2020 7265 7475 726e 2044 6566 6175      return Defau
-0001a850: 6c74 2873 7263 2c64 6566 6175 6c74 290a  lt(src,default).
-0001a860: 0a64 6566 2053 706c 6974 2873 7263 2c73  .def Split(src,s
-0001a870: 796d 626f 6c3d 4e6f 6e65 2c64 6566 6175  ymbol=None,defau
-0001a880: 6c74 3d5b 5d2c 7379 6d5f 7370 6c69 7465  lt=[],sym_splite
-0001a890: 723d 277c 272c 6c69 7374 6f6e 6c79 3d54  r='|',listonly=T
-0001a8a0: 7275 6529 3a0a 2020 2020 2727 270a 2020  rue):.    '''.  
-0001a8b0: 2020 6d75 6c74 6970 756c 2073 706c 6974    multipul split
-0001a8c0: 2074 6865 6e20 2761 7c62 7c2e 2e2e 270a   then 'a|b|...'.
-0001a8d0: 2020 2020 7769 7468 6f75 7420 227c 2220      without "|" 
-0001a8e0: 7468 656e 2073 616d 6520 6173 2073 7472  then same as str
-0001a8f0: 696e 6720 7370 6c69 7420 6675 6e63 7469  ing split functi
-0001a900: 6f6e 0a20 2020 2073 796d 626f 6c3d 4e6f  on.    symbol=No
-0001a910: 6e65 206f 7220 273a 7768 6974 6573 7061  ne or ':whitespa
-0001a920: 6365 3a27 203a 2052 656d 6f74 6520 7768  ce:' : Remote wh
-0001a930: 6974 6520 7370 6163 6520 616e 6420 7370  ite space and sp
-0001a940: 6c69 7420 7769 7468 2073 696e 676c 6520  lit with single 
-0001a950: 7370 6163 6528 2720 2729 0a20 2020 2027  space(' ').    '
-0001a960: 2727 0a20 2020 2023 5359 4d42 4f4c 2053  ''.    #SYMBOL S
-0001a970: 706c 6974 0a20 2020 2069 6620 5479 7065  plit.    if Type
-0001a980: 2873 7263 2c28 7374 722c 6279 7465 7329  (src,(str,bytes)
-0001a990: 293a 0a20 2020 2020 2020 2069 6620 7379  ):.        if sy
-0001a9a0: 6d62 6f6c 2069 7320 4e6f 6e65 206f 7220  mbol is None or 
-0001a9b0: 4973 5361 6d65 2873 796d 626f 6c2c 273a  IsSame(symbol,':
-0001a9c0: 7768 6974 6573 7061 6365 3a27 293a 0a20  whitespace:'):. 
-0001a9d0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001a9e0: 6e20 7372 632e 7370 6c69 7428 290a 2020  n src.split().  
-0001a9f0: 2020 2020 2020 656c 6966 206e 6f74 2054        elif not T
-0001aa00: 7970 6528 7379 6d62 6f6c 2c28 7374 722c  ype(symbol,(str,
-0001aa10: 6279 7465 7329 293a 0a20 2020 2020 2020  bytes)):.       
-0001aa20: 2020 2020 2073 796d 626f 6c3d 2720 270a       symbol=' '.
-0001aa30: 2020 2020 2020 2020 6966 206c 656e 2873          if len(s
-0001aa40: 796d 626f 6c29 203e 2031 3a0a 2020 2020  ymbol) > 1:.    
-0001aa50: 2020 2020 2020 2020 6966 2073 796d 5f73          if sym_s
-0001aa60: 706c 6974 6572 3a0a 2020 2020 2020 2020  pliter:.        
-0001aa70: 2020 2020 2020 2020 6966 2054 7970 6528          if Type(
-0001aa80: 7379 6d62 6f6c 2c62 7974 6573 293a 2073  symbol,bytes): s
-0001aa90: 796d 5f73 706c 6974 6572 3d42 7974 6573  ym_spliter=Bytes
-0001aaa0: 2873 796d 5f73 706c 6974 6572 290a 2020  (sym_spliter).  
-0001aab0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0001aac0: 7365 3a20 7379 6d5f 7370 6c69 7465 723d  se: sym_spliter=
-0001aad0: 5374 7228 7379 6d5f 7370 6c69 7465 7229  Str(sym_spliter)
-0001aae0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001aaf0: 2073 796d 626f 6c3d 556e 6971 2873 796d   symbol=Uniq(sym
-0001ab00: 626f 6c2e 7370 6c69 7428 7379 6d5f 7370  bol.split(sym_sp
-0001ab10: 6c69 7465 7229 290a 2020 2020 2020 2020  liter)).        
-0001ab20: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-0001ab30: 2020 2020 2020 2020 206d 7379 6d3d 277c           msym='|
-0001ab40: 272e 6a6f 696e 286d 6170 2872 652e 6573  '.join(map(re.es
-0001ab50: 6361 7065 2c74 7570 6c65 2873 796d 626f  cape,tuple(symbo
-0001ab60: 6c29 2929 0a20 2020 2020 2020 2020 2020  l))).           
-0001ab70: 2020 2020 2069 6620 5479 7065 2873 7263       if Type(src
-0001ab80: 2c27 6279 7465 7327 293a 206d 7379 6d3d  ,'bytes'): msym=
-0001ab90: 4279 7465 7328 6d73 796d 290a 2020 2020  Bytes(msym).    
-0001aba0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0001abb0: 3a20 6d73 796d 3d53 7472 286d 7379 6d29  : msym=Str(msym)
-0001abc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001abd0: 2072 6574 7572 6e20 7265 2e73 706c 6974   return re.split
-0001abe0: 286d 7379 6d2c 7372 6329 2023 2073 706c  (msym,src) # spl
-0001abf0: 6974 6564 2062 7920 277c 2720 6f72 2065  ited by '|' or e
-0001ac00: 7870 7265 7373 696f 6e0a 2020 2020 2020  xpression.      
-0001ac10: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
-0001ac20: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-0001ac30: 7373 0a20 2020 2020 2020 2065 6c73 653a  ss.        else:
-0001ac40: 0a20 2020 2020 2020 2020 2020 2023 204e  .            # N
-0001ac50: 6f72 6d61 6c20 7370 6c69 740a 2020 2020  ormal split.    
-0001ac60: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-0001ac70: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001ac80: 5479 7065 2873 7263 2c27 6279 7465 7327  Type(src,'bytes'
-0001ac90: 293a 2073 796d 626f 6c3d 4279 7465 7328  ): symbol=Bytes(
-0001aca0: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
-0001acb0: 2020 2020 2020 2020 656c 7365 203a 2073          else : s
-0001acc0: 796d 626f 6c3d 5374 7228 7379 6d62 6f6c  ymbol=Str(symbol
-0001acd0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001ace0: 2020 7265 7475 726e 2073 7263 2e73 706c    return src.spl
-0001acf0: 6974 2873 796d 626f 6c29 0a20 2020 2020  it(symbol).     
-0001ad00: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
-0001ad10: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0001ad20: 6173 730a 2020 2020 6966 2064 6566 6175  ass.    if defau
-0001ad30: 6c74 2069 6e20 5b27 6f72 6727 2c7b 276f  lt in ['org',{'o
-0001ad40: 7267 277d 5d3a 0a20 2020 2020 2020 2069  rg'}]:.        i
-0001ad50: 6620 6c69 7374 6f6e 6c79 3a0a 2020 2020  f listonly:.    
-0001ad60: 2020 2020 2020 2020 7265 7475 726e 205b          return [
-0001ad70: 7372 635d 0a20 2020 2020 2020 2072 6574  src].        ret
-0001ad80: 7572 6e20 7372 630a 2020 2020 6966 206c  urn src.    if l
-0001ad90: 6973 746f 6e6c 793a 0a20 2020 2020 2020  istonly:.       
-0001ada0: 2069 6620 6465 6661 756c 7420 3d3d 205b   if default == [
-0001adb0: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
-0001adc0: 6574 7572 6e20 5b5d 0a20 2020 2020 2020  eturn [].       
-0001add0: 2072 6574 7572 6e20 5b64 6566 6175 6c74   return [default
-0001ade0: 5d0a 2020 2020 7265 7475 726e 2064 6566  ].    return def
-0001adf0: 6175 6c74 0a0a 6465 6620 466f 726d 4461  ault..def FormDa
-0001ae00: 7461 282a 7372 632c 6465 6661 756c 743d  ta(*src,default=
-0001ae10: 4e6f 6e65 2c77 616e 745f 7479 7065 3d4e  None,want_type=N
-0001ae20: 6f6e 652c 6572 723d 4661 6c73 6529 3a0a  one,err=False):.
-0001ae30: 2020 2020 2727 270a 2020 2020 636f 6e76      '''.    conv
-0001ae40: 6572 7420 7374 7269 6e67 2064 6174 6120  ert string data 
-0001ae50: 746f 2066 6f72 6d61 740a 2020 2020 2731  to format.    '1
-0001ae60: 2720 3d3e 2031 0a20 2020 206a 736f 6e20  ' => 1.    json 
-0001ae70: 7374 7269 6e67 2074 6f20 6a73 6f6e 2066  string to json f
-0001ae80: 6f72 6d61 740a 2020 2020 227b 2761 273a  ormat.    "{'a':
-0001ae90: 317d 2220 3d3e 207b 2761 273a 317d 0a20  1}" => {'a':1}. 
-0001aea0: 2020 2022 5b31 2c32 2c33 5d22 203d 3e20     "[1,2,3]" => 
-0001aeb0: 5b31 2c32 2c33 5d0a 2020 2020 2e2e 2e2e  [1,2,3].    ....
-0001aec0: 0a20 2020 2027 2727 0a20 2020 2065 633d  .    '''.    ec=
-0001aed0: 4661 6c73 650a 2020 2020 615f 733d 2727  False.    a_s=''
-0001aee0: 0a20 2020 2069 6620 6c65 6e28 7372 6329  .    if len(src)
-0001aef0: 203e 2030 3a0a 2020 2020 2020 2020 666f   > 0:.        fo
-0001af00: 7220 6920 696e 2073 7263 3a0a 2020 2020  r i in src:.    
-0001af10: 2020 2020 2020 2020 615f 743d 5374 7228          a_t=Str(
-0001af20: 692c 6465 6661 756c 743d 276f 7267 2729  i,default='org')
-0001af30: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001af40: 6973 696e 7374 616e 6365 2861 5f74 2c73  isinstance(a_t,s
-0001af50: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
-0001af60: 2020 2020 2069 6620 615f 733a 0a20 2020       if a_s:.   
-0001af70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001af80: 2061 5f73 3d61 5f73 2b27 2727 2027 2727   a_s=a_s+''' '''
-0001af90: 2b61 5f74 0a20 2020 2020 2020 2020 2020  +a_t.           
-0001afa0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0001afb0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0001afc0: 5f73 3d61 5f74 0a20 2020 2020 2020 2020  _s=a_t.         
-0001afd0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0001afe0: 2020 2020 2020 2020 2065 633d 5472 7565           ec=True
-0001aff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b000: 2062 7265 616b 0a20 2020 2069 6620 6563   break.    if ec
-0001b010: 3a0a 2020 2020 2020 2020 6966 2065 7272  :.        if err
-0001b020: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0001b030: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
-0001b040: 2020 2069 6620 6c65 6e28 7372 6329 203d     if len(src) =
-0001b050: 3d20 313a 0a20 2020 2020 2020 2020 2020  = 1:.           
-0001b060: 2072 6574 7572 6e20 7372 635b 305d 0a20   return src[0]. 
-0001b070: 2020 2020 2020 2072 6574 7572 6e20 7372         return sr
-0001b080: 630a 2020 2020 7372 633d 615f 730a 2020  c.    src=a_s.  
-0001b090: 2020 666f 726d 5f73 7263 3d4e 6f6e 650a    form_src=None.
-0001b0a0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0001b0b0: 6528 7372 632c 7374 7229 3a0a 2020 2020  e(src,str):.    
-0001b0c0: 2020 2020 6966 2054 7970 6528 7761 6e74      if Type(want
-0001b0d0: 5f74 7970 652c 2773 7472 2729 3a20 7265  _type,'str'): re
-0001b0e0: 7475 726e 2073 7263 0a20 2020 2020 2020  turn src.       
-0001b0f0: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-0001b100: 2020 666f 726d 5f73 7263 3d61 7374 2e6c    form_src=ast.l
-0001b110: 6974 6572 616c 5f65 7661 6c28 7372 6329  iteral_eval(src)
-0001b120: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
-0001b130: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
-0001b140: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001b150: 2020 666f 726d 5f73 7263 3d6a 736f 6e2e    form_src=json.
-0001b160: 6c6f 6164 7328 7372 6329 0a20 2020 2020  loads(src).     
-0001b170: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
-0001b180: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0001b190: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-0001b1a0: 2020 2020 2020 2020 666f 726d 5f73 7263          form_src
-0001b1b0: 3d65 7661 6c28 7372 6329 0a20 2020 2020  =eval(src).     
-0001b1c0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-0001b1d0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-0001b1e0: 2020 2020 2020 2072 6574 7572 6e20 4465         return De
-0001b1f0: 6661 756c 7428 7372 632c 6465 6661 756c  fault(src,defaul
-0001b200: 7429 0a20 2020 2065 6c73 653a 0a20 2020  t).    else:.   
-0001b210: 2020 2020 2066 6f72 6d5f 7372 633d 7372       form_src=sr
-0001b220: 630a 2020 2020 6966 2049 734e 6f6e 6528  c.    if IsNone(
-0001b230: 7761 6e74 5f74 7970 6529 3a0a 2020 2020  want_type):.    
-0001b240: 2020 2020 7265 7475 726e 2066 6f72 6d5f      return form_
-0001b250: 7372 630a 2020 2020 656c 7365 3a0a 2020  src.    else:.  
-0001b260: 2020 2020 2020 6966 2054 7970 6528 666f        if Type(fo
-0001b270: 726d 5f73 7263 2c77 616e 745f 7479 7065  rm_src,want_type
-0001b280: 293a 2072 6574 7572 6e20 666f 726d 5f73  ): return form_s
-0001b290: 7263 0a20 2020 2020 2020 2072 6574 7572  rc.        retur
-0001b2a0: 6e20 4465 6661 756c 7428 7372 632c 6465  n Default(src,de
-0001b2b0: 6661 756c 7429 0a0a 6465 6620 496e 6465  fault)..def Inde
-0001b2c0: 7846 6f72 6d28 6964 782c 6964 785f 6f6e  xForm(idx,idx_on
-0001b2d0: 6c79 3d46 616c 7365 2c73 796d 626f 6c3d  ly=False,symbol=
-0001b2e0: 4e6f 6e65 293a 0a20 2020 2027 2727 0a20  None):.    '''. 
-0001b2f0: 2020 2072 6574 7572 6e20 3a20 3c54 7275     return : <Tru
-0001b300: 652f 4661 6c73 653e 2c20 496e 6465 7820  e/False>, Index 
-0001b310: 4461 7461 0a20 2020 2020 2d20 4661 6c73  Data.     - Fals
-0001b320: 653a 206e 6f74 2066 6f75 6e64 2049 6e64  e: not found Ind
-0001b330: 6578 2066 6f72 6d20 6672 6f6d 2069 6e70  ex form from inp
-0001b340: 7574 2069 6478 200a 2020 2020 202d 2054  ut idx .     - T
-0001b350: 7275 6520 3a20 666f 756e 6420 496e 6465  rue : found Inde
-0001b360: 780a 2020 2020 496e 6465 7820 4461 7461  x.    Index Data
-0001b370: 0a20 2020 2020 2d20 7475 706c 6528 412c  .     - tuple(A,
-0001b380: 4229 203a 2052 616e 6765 2049 6e64 6578  B) : Range Index
-0001b390: 2028 417e 4229 0a20 2020 2020 2d20 6c69   (A~B).     - li
-0001b3a0: 7374 205b 412c 425d 203a 204f 5220 496e  st [A,B] : OR In
-0001b3b0: 6465 7820 6f72 206b 6579 7320 4120 6f72  dex or keys A or
-0001b3c0: 2042 0a20 2020 2020 2d20 5369 6e67 6c65   B.     - Single
-0001b3d0: 2020 2020 203a 2069 6e74 3a20 496e 6465       : int: Inde
-0001b3e0: 782c 206f 7468 6572 733a 206b 6579 0a20  x, others: key. 
-0001b3f0: 2020 202d 2069 6478 5f6f 6e6c 7920 2020     - idx_only   
-0001b400: 203a 206f 6e6c 7920 7265 7475 726e 2069   : only return i
-0001b410: 6e74 6567 6572 2069 6e64 6578 0a20 2020  nteger index.   
-0001b420: 202d 2073 796d 626f 6c20 2020 3a20 6465   - symbol   : de
-0001b430: 6661 756c 7420 4e6f 6e65 2c20 6966 2069  fault None, if i
-0001b440: 6478 2069 7320 7374 7269 6e67 2061 6e64  dx is string and
-0001b450: 2077 616e 7420 7370 6c69 7420 7769 7468   want split with
-0001b460: 2073 796d 626f 6c0a 2020 2020 2727 270a   symbol.    '''.
-0001b470: 2020 2020 6966 2049 734e 6f6e 6528 6964      if IsNone(id
-0001b480: 7829 3a0a 2020 2020 2020 2020 7265 7475  x):.        retu
-0001b490: 726e 2046 616c 7365 2c4e 6f6e 650a 2020  rn False,None.  
-0001b4a0: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
-0001b4b0: 6528 6964 782c 7374 7229 3a0a 2020 2020  e(idx,str):.    
-0001b4c0: 2020 2020 666f 7220 7320 696e 205b 273a      for s in [':
-0001b4d0: 272c 272d 272c 277e 275d 3a20 2320 5261  ','-','~']: # Ra
-0001b4e0: 6e67 6520 496e 6465 780a 2020 2020 2020  nge Index.      
-0001b4f0: 2020 2020 2020 6966 2073 2069 6e20 6964        if s in id
-0001b500: 783a 0a20 2020 2020 2020 2020 2020 2020  x:.             
-0001b510: 2020 2069 6478 5f61 3d69 6478 2e73 706c     idx_a=idx.spl
-0001b520: 6974 2873 290a 2020 2020 2020 2020 2020  it(s).          
-0001b530: 2020 2020 2020 6966 206c 656e 2869 6478        if len(idx
-0001b540: 5f61 2920 3d3d 2032 3a0a 2020 2020 2020  _a) == 2:.      
-0001b550: 2020 2020 2020 2020 2020 2020 2020 7373                ss
-0001b560: 3d49 6e74 2869 6478 5f61 5b30 5d29 2069  =Int(idx_a[0]) i
-0001b570: 6620 4973 496e 7428 6964 785f 615b 305d  f IsInt(idx_a[0]
-0001b580: 2920 656c 7365 2030 0a20 2020 2020 2020  ) else 0.       
-0001b590: 2020 2020 2020 2020 2020 2020 2065 653d               ee=
-0001b5a0: 496e 7428 6964 785f 615b 315d 2920 6966  Int(idx_a[1]) if
-0001b5b0: 2049 7349 6e74 2869 6478 5f61 5b31 5d29   IsInt(idx_a[1])
-0001b5c0: 2065 6c73 6520 2d31 0a20 2020 2020 2020   else -1.       
-0001b5d0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0001b5e0: 7572 6e20 5472 7565 2c28 7373 2c65 6529  urn True,(ss,ee)
-0001b5f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b600: 2072 6574 7572 6e20 4661 6c73 652c 4e6f   return False,No
-0001b610: 6e65 0a20 2020 2020 2020 2069 6620 277c  ne.        if '|
-0001b620: 2720 696e 2069 6478 3a20 2320 4f52 2049  ' in idx: # OR I
-0001b630: 6e64 6578 0a20 2020 2020 2020 2020 2020  ndex.           
-0001b640: 2069 6478 5f61 3d69 6478 2e73 706c 6974   idx_a=idx.split
-0001b650: 2827 7c27 290a 2020 2020 2020 2020 2020  ('|').          
-0001b660: 2020 6966 2069 6478 5f6f 6e6c 793a 0a20    if idx_only:. 
-0001b670: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001b680: 743d 5b5d 0a20 2020 2020 2020 2020 2020  t=[].           
-0001b690: 2020 2020 2066 6f72 2069 2069 6e20 6964       for i in id
-0001b6a0: 785f 613a 0a20 2020 2020 2020 2020 2020  x_a:.           
-0001b6b0: 2020 2020 2020 2020 2069 6620 4973 496e           if IsIn
-0001b6c0: 7428 6929 3a20 7274 2e61 7070 656e 6428  t(i): rt.append(
-0001b6d0: 496e 7428 6929 290a 2020 2020 2020 2020  Int(i)).        
-0001b6e0: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-0001b6f0: 7275 652c 7274 0a20 2020 2020 2020 2020  rue,rt.         
-0001b700: 2020 2072 6574 7572 6e20 5472 7565 2c69     return True,i
-0001b710: 6478 2e73 706c 6974 2827 7c27 290a 2020  dx.split('|').  
-0001b720: 2020 2020 2020 656c 6966 2027 2f27 2069        elif '/' i
-0001b730: 6e20 6964 783a 2023 2050 6174 6820 696e  n idx: # Path in
-0001b740: 6465 780a 2020 2020 2020 2020 2020 2020  dex.            
-0001b750: 6964 785f 613d 6964 782e 7370 6c69 7428  idx_a=idx.split(
-0001b760: 272f 2729 0a20 2020 2020 2020 2020 2020  '/').           
-0001b770: 2069 6620 6964 785f 615b 305d 203d 3d20   if idx_a[0] == 
-0001b780: 2727 3a0a 2020 2020 2020 2020 2020 2020  '':.            
-0001b790: 2020 2020 7265 7475 726e 204e 6f6e 652c      return None,
-0001b7a0: 6964 785f 615b 313a 5d0a 2020 2020 2020  idx_a[1:].      
-0001b7b0: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
-0001b7c0: 652c 6964 785f 610a 2020 2020 2020 2020  e,idx_a.        
-0001b7d0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0001b7e0: 2020 6966 2069 6478 5f6f 6e6c 793a 0a20    if idx_only:. 
-0001b7f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001b800: 6620 7379 6d62 6f6c 3a0a 2020 2020 2020  f symbol:.      
-0001b810: 2020 2020 2020 2020 2020 2020 2020 6964                id
-0001b820: 7873 3d69 6478 2e73 706c 6974 2873 796d  xs=idx.split(sym
-0001b830: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
-0001b840: 2020 2020 2020 2020 2072 743d 5b5d 0a20           rt=[]. 
-0001b850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b860: 2020 2066 6f72 2069 2069 6e20 6964 7873     for i in idxs
-0001b870: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001b880: 2020 2020 2020 2020 2020 6966 2049 7349            if IsI
-0001b890: 6e74 2869 293a 2072 742e 6170 7065 6e64  nt(i): rt.append
-0001b8a0: 2849 6e74 2869 2929 0a20 2020 2020 2020  (Int(i)).       
-0001b8b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001b8c0: 7274 3a20 7265 7475 726e 2054 7275 652c  rt: return True,
-0001b8d0: 7274 0a20 2020 2020 2020 2020 2020 2020  rt.             
-0001b8e0: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
-0001b8f0: 6c73 652c 4e6f 6e65 0a20 2020 2020 2020  lse,None.       
-0001b900: 2020 2020 2020 2020 2069 6620 4973 496e           if IsIn
-0001b910: 7428 6964 7829 3a0a 2020 2020 2020 2020  t(idx):.        
-0001b920: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001b930: 726e 2054 7275 652c 496e 7428 6964 7829  rn True,Int(idx)
+00017da0: 6966 2066 756c 6c5f 6669 6c65 6e61 6d65  if full_filename
+00017db0: 3a20 7070 3d70 702b 2720 696e 207b 7d27  : pp=pp+' in {}'
+00017dc0: 2e66 6f72 6d61 7428 6d79 5f68 6973 746f  .format(my_histo
+00017dd0: 7279 5b69 5d2e 6669 6c65 6e61 6d65 290a  ry[i].filename).
+00017de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017df0: 2020 2020 656c 6966 2066 696c 656e 616d      elif filenam
+00017e00: 653a 2070 703d 7070 2b27 2069 6e20 7b7d  e: pp=pp+' in {}
+00017e10: 272e 666f 726d 6174 286f 732e 7061 7468  '.format(os.path
+00017e20: 2e62 6173 656e 616d 6528 6d79 5f68 6973  .basename(my_his
+00017e30: 746f 7279 5b69 5d2e 6669 6c65 6e61 6d65  tory[i].filename
+00017e40: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+00017e50: 2020 2020 2020 2069 6620 7368 6f77 3a0a         if show:.
+00017e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017e70: 2020 2020 2020 2020 7072 696e 7428 7070          print(pp
+00017e80: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00017e90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00017ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017eb0: 2020 2020 7274 2e61 7070 656e 6428 7070      rt.append(pp
+00017ec0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00017ed0: 2020 7370 6163 653d 7370 6163 652b 2720    space=space+' 
+00017ee0: 2027 0a20 2020 2020 2020 2020 2020 2065   '.            e
+00017ef0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00017f00: 2020 2020 2069 6620 6f62 6a3a 0a20 2020       if obj:.   
+00017f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017f20: 2069 6620 6675 6c6c 5f66 696c 656e 616d   if full_filenam
+00017f30: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00017f40: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
+00017f50: 7065 6e64 2828 6d79 5f68 6973 746f 7279  pend((my_history
+00017f60: 5b69 5d2e 6675 6e63 7469 6f6e 2c46 7261  [i].function,Fra
+00017f70: 6d65 3246 756e 6374 696f 6e28 6d79 5f68  me2Function(my_h
+00017f80: 6973 746f 7279 5b69 5d2e 6672 616d 6529  istory[i].frame)
+00017f90: 2c6d 795f 6869 7374 6f72 795b 695d 2e6c  ,my_history[i].l
+00017fa0: 696e 656e 6f2c 6d79 5f68 6973 746f 7279  ineno,my_history
+00017fb0: 5b69 5d2e 6669 6c65 6e61 6d65 2929 0a20  [i].filename)). 
+00017fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017fd0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00017fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017ff0: 2072 742e 6170 7065 6e64 2828 6d79 5f68   rt.append((my_h
+00018000: 6973 746f 7279 5b69 5d2e 6675 6e63 7469  istory[i].functi
+00018010: 6f6e 2c46 7261 6d65 3246 756e 6374 696f  on,Frame2Functio
+00018020: 6e28 6d79 5f68 6973 746f 7279 5b69 5d2e  n(my_history[i].
+00018030: 6672 616d 6529 2c6d 795f 6869 7374 6f72  frame),my_histor
+00018040: 795b 695d 2e6c 696e 656e 6f2c 6f73 2e70  y[i].lineno,os.p
+00018050: 6174 682e 6261 7365 6e61 6d65 286d 795f  ath.basename(my_
+00018060: 6869 7374 6f72 795b 695d 2e66 696c 656e  history[i].filen
+00018070: 616d 6529 2929 0a20 2020 2020 2020 2020  ame))).         
+00018080: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00018090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000180a0: 2069 6620 6675 6c6c 5f66 696c 656e 616d   if full_filenam
+000180b0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000180c0: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
+000180d0: 7065 6e64 2828 6d79 5f68 6973 746f 7279  pend((my_history
+000180e0: 5b69 5d2e 6675 6e63 7469 6f6e 2c6d 795f  [i].function,my_
+000180f0: 6869 7374 6f72 795b 695d 2e6c 696e 656e  history[i].linen
+00018100: 6f2c 6d79 5f68 6973 746f 7279 5b69 5d2e  o,my_history[i].
+00018110: 6669 6c65 6e61 6d65 2929 0a20 2020 2020  filename)).     
+00018120: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00018130: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00018140: 2020 2020 2020 2020 2020 2020 2072 742e               rt.
+00018150: 6170 7065 6e64 2828 6d79 5f68 6973 746f  append((my_histo
+00018160: 7279 5b69 5d2e 6675 6e63 7469 6f6e 2c6d  ry[i].function,m
+00018170: 795f 6869 7374 6f72 795b 695d 2e6c 696e  y_history[i].lin
+00018180: 656e 6f2c 6f73 2e70 6174 682e 6261 7365  eno,os.path.base
+00018190: 6e61 6d65 286d 795f 6869 7374 6f72 795b  name(my_history[
+000181a0: 695d 2e66 696c 656e 616d 6529 2929 0a20  i].filename))). 
+000181b0: 2020 2020 2020 2072 6574 7572 6e20 7274         return rt
+000181c0: 0a20 2020 2065 6c69 6620 6973 696e 7374  .    elif isinst
+000181d0: 616e 6365 2870 6172 656e 742c 696e 7429  ance(parent,int)
+000181e0: 3a20 2320 7369 6e67 6c65 2066 756e 6374  : # single funct
+000181f0: 696f 6e0a 2020 2020 2020 2020 6966 2070  ion.        if p
+00018200: 6172 656e 7420 3e3d 2030 3a0a 2020 2020  arent >= 0:.    
+00018210: 2020 2020 2020 2020 6c6f 633d 312b 7061          loc=1+pa
+00018220: 7265 6e74 0a20 2020 2020 2020 2065 6c73  rent.        els
+00018230: 653a 0a20 2020 2020 2020 2020 2020 206c  e:.            l
+00018240: 6f63 3d70 6172 656e 740a 2020 2020 2020  oc=parent.      
+00018250: 2020 6966 206c 656e 286d 795f 6869 7374    if len(my_hist
+00018260: 6f72 7929 203c 3d20 6c6f 633a 2023 6f75  ory) <= loc: #ou
+00018270: 7420 6f66 2072 616e 6765 0a20 2020 2020  t of range.     
+00018280: 2020 2020 2020 206c 6f63 3d2d 310a 2020         loc=-1.  
+00018290: 2020 2020 2020 6966 206f 626a 3a0a 2020        if obj:.  
+000182a0: 2020 2020 2020 2020 2020 2320 7265 7475            # retu
+000182b0: 726e 206e 616d 6520 616e 6420 6f62 6a65  rn name and obje
+000182c0: 6374 0a20 2020 2020 2020 2020 2020 2072  ct.            r
+000182d0: 6574 7572 6e20 286d 795f 6869 7374 6f72  eturn (my_histor
+000182e0: 795b 6c6f 635d 2e66 756e 6374 696f 6e2c  y[loc].function,
+000182f0: 4672 616d 6532 4675 6e63 7469 6f6e 286d  Frame2Function(m
+00018300: 795f 6869 7374 6f72 795b 6c6f 635d 2e66  y_history[loc].f
+00018310: 7261 6d65 2929 0a20 2020 2020 2020 2065  rame)).        e
+00018320: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00018330: 2072 743d 6d79 5f68 6973 746f 7279 5b6c   rt=my_history[l
+00018340: 6f63 5d2e 6675 6e63 7469 6f6e 0a20 2020  oc].function.   
+00018350: 2020 2020 2020 2020 2069 6620 6172 6773           if args
+00018360: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00018370: 2020 6172 673d 4675 6e63 7469 6f6e 4172    arg=FunctionAr
+00018380: 6773 2846 7261 6d65 3246 756e 6374 696f  gs(Frame2Functio
+00018390: 6e28 6d79 5f68 6973 746f 7279 5b6c 6f63  n(my_history[loc
+000183a0: 5d2e 6672 616d 6529 2c6d 6f64 653d 2773  ].frame),mode='s
+000183b0: 7472 696e 6727 2c64 6566 6175 6c74 3d27  tring',default='
+000183c0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+000183d0: 2020 2069 6620 6172 673a 2072 743d 7274     if arg: rt=rt
+000183e0: 2b27 7b7d 272e 666f 726d 6174 2861 7267  +'{}'.format(arg
+000183f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00018400: 2020 656c 7365 3a20 7274 3d72 742b 2728    else: rt=rt+'(
+00018410: 2927 0a20 2020 2020 2020 2020 2020 2069  )'.            i
+00018420: 6620 6c69 6e65 5f6e 756d 6265 723a 2072  f line_number: r
+00018430: 743d 7274 2b27 2061 7420 7b7d 272e 666f  t=rt+' at {}'.fo
+00018440: 726d 6174 286d 795f 6869 7374 6f72 795b  rmat(my_history[
+00018450: 6c6f 635d 2e6c 696e 656e 6f29 0a20 2020  loc].lineno).   
+00018460: 2020 2020 2020 2020 2069 6620 6675 6c6c           if full
+00018470: 5f66 696c 656e 616d 653a 2072 743d 7274  _filename: rt=rt
+00018480: 2b27 2069 6e20 7b7d 272e 666f 726d 6174  +' in {}'.format
+00018490: 286d 795f 6869 7374 6f72 795b 6c6f 635d  (my_history[loc]
+000184a0: 2e66 696c 656e 616d 6529 0a20 2020 2020  .filename).     
+000184b0: 2020 2020 2020 2065 6c69 6620 6669 6c65         elif file
+000184c0: 6e61 6d65 3a20 7274 3d72 742b 2720 696e  name: rt=rt+' in
+000184d0: 207b 7d27 2e66 6f72 6d61 7428 6f73 2e70   {}'.format(os.p
+000184e0: 6174 682e 6261 7365 6e61 6d65 286d 795f  ath.basename(my_
+000184f0: 6869 7374 6f72 795b 6c6f 635d 2e66 696c  history[loc].fil
+00018500: 656e 616d 6529 290a 2020 2020 2020 2020  ename)).        
+00018510: 2020 2020 7265 7475 726e 2072 740a 0a64      return rt..d
+00018520: 6566 2046 756e 6374 696f 6e4c 6973 7428  ef FunctionList(
+00018530: 6f62 6a3d 4e6f 6e65 293a 0a20 2020 2027  obj=None):.    '
+00018540: 2727 0a20 2020 2047 6574 2066 756e 6374  ''.    Get funct
+00018550: 696f 6e20 6c69 7374 2069 6e20 7468 6973  ion list in this
+00018560: 206f 626a 6563 740a 2020 2020 2727 270a   object.    '''.
+00018570: 2020 2020 6161 3d7b 7d0a 2020 2020 6966      aa={}.    if
+00018580: 2069 7369 6e73 7461 6e63 6528 6f62 6a2c   isinstance(obj,
+00018590: 7374 7229 3a0a 2020 2020 2020 206f 626a  str):.       obj
+000185a0: 3d73 7973 2e6d 6f64 756c 6573 2e67 6574  =sys.modules.get
+000185b0: 286f 626a 290a 2020 2020 656c 6966 2049  (obj).    elif I
+000185c0: 734e 6f6e 6528 6f62 6a29 3a0a 2020 2020  sNone(obj):.    
+000185d0: 2020 206f 626a 3d4d 794d 6f64 756c 6528     obj=MyModule(
+000185e0: 6465 6661 756c 743d 4e6f 6e65 290a 2020  default=None).  
+000185f0: 2020 6966 2054 7970 6528 6f62 6a2c 2827    if Type(obj,('
+00018600: 636c 6173 736f 626a 272c 276d 6f64 756c  classobj','modul
+00018610: 6527 2c27 696e 7374 616e 6365 2729 293a  e','instance')):
+00018620: 0a20 2020 2020 2020 2069 6620 5479 7065  .        if Type
+00018630: 286f 626a 2c27 696e 7374 616e 6365 2729  (obj,'instance')
+00018640: 3a20 6f62 6a3d 6f62 6a2e 5f5f 636c 6173  : obj=obj.__clas
+00018650: 735f 5f20 2320 6d6f 7665 2043 4c41 5353  s__ # move CLASS
+00018660: 2829 2074 6f20 434c 4153 530a 2020 2020  () to CLASS.    
+00018670: 2020 2020 666f 7220 6e61 6d65 2c66 6f62      for name,fob
+00018680: 6a20 696e 2069 6e73 7065 6374 2e67 6574  j in inspect.get
+00018690: 6d65 6d62 6572 7328 6f62 6a29 3a0a 2020  members(obj):.  
+000186a0: 2020 2020 2020 2020 2020 6966 2069 6e73            if ins
+000186b0: 7065 6374 2e69 7366 756e 6374 696f 6e28  pect.isfunction(
+000186c0: 666f 626a 293a 0a20 2020 2020 2020 2020  fobj):.         
+000186d0: 2020 2020 2020 2061 612e 7570 6461 7465         aa.update
+000186e0: 287b 6e61 6d65 3a66 6f62 6a7d 290a 2020  ({name:fobj}).  
+000186f0: 2020 7265 7475 726e 2061 610a 0a64 6566    return aa..def
+00018700: 2047 6574 436c 6173 7328 6f62 6a2c 6465   GetClass(obj,de
+00018710: 6661 756c 743d 4e6f 6e65 293a 0a20 2020  fault=None):.   
+00018720: 2027 2727 0a20 2020 2047 6574 2043 6c61   '''.    Get Cla
+00018730: 7373 206f 626a 6563 7420 6672 6f6d 2069  ss object from i
+00018740: 6e73 7461 6e63 652c 6d65 7468 6f64 2c66  nstance,method,f
+00018750: 756e 6374 696f 6e0a 2020 2020 2727 270a  unction.    '''.
+00018760: 2020 2020 6f62 6a5f 7479 7065 3d54 7970      obj_type=Typ
+00018770: 654e 616d 6528 6f62 6a29 0a20 2020 2069  eName(obj).    i
+00018780: 6620 6f62 6a5f 7479 7065 2069 6e20 5b27  f obj_type in ['
+00018790: 696e 7374 616e 6365 275d 3a0a 2020 2020  instance']:.    
+000187a0: 2020 2020 6f62 6a3d 6f62 6a2e 5f5f 636c      obj=obj.__cl
+000187b0: 6173 735f 5f20 2320 436f 6e76 6572 7420  ass__ # Convert 
+000187c0: 696e 7374 616e 6365 2074 6f20 636c 6173  instance to clas
+000187d0: 736f 626a 0a20 2020 2020 2020 206f 626a  sobj.        obj
+000187e0: 5f74 7970 653d 5479 7065 4e61 6d65 286f  _type=TypeName(o
+000187f0: 626a 290a 2020 2020 6966 206f 626a 5f74  bj).    if obj_t
+00018800: 7970 6520 696e 205b 2763 6c61 7373 6f62  ype in ['classob
+00018810: 6a27 5d3a 2072 6574 7572 6e20 6f62 6a0a  j']: return obj.
+00018820: 2020 2020 6966 206f 626a 5f74 7970 6520      if obj_type 
+00018830: 696e 205b 276d 6574 686f 6427 5d3a 0a20  in ['method']:. 
+00018840: 2020 2020 2020 206f 626a 5f6e 616d 6520         obj_name 
+00018850: 3d20 6f62 6a2e 5f5f 6e61 6d65 5f5f 0a20  = obj.__name__. 
+00018860: 2020 2020 2020 2069 6620 6f62 6a2e 5f5f         if obj.__
+00018870: 7365 6c66 5f5f 3a0a 2020 2020 2020 2020  self__:.        
+00018880: 2020 2020 636c 6173 7365 7320 3d20 5b6f      classes = [o
+00018890: 626a 2e5f 5f73 656c 665f 5f2e 5f5f 636c  bj.__self__.__cl
+000188a0: 6173 735f 5f5d 0a20 2020 2020 2020 2065  ass__].        e
+000188b0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000188c0: 2023 756e 626f 756e 6420 6d65 7468 6f64   #unbound method
+000188d0: 0a20 2020 2020 2020 2020 2020 2063 6c61  .            cla
+000188e0: 7373 6573 203d 205b 6f62 6a2e 696d 5f63  sses = [obj.im_c
+000188f0: 6c61 7373 5d0a 2020 2020 2020 2020 7768  lass].        wh
+00018900: 696c 6520 636c 6173 7365 733a 0a20 2020  ile classes:.   
+00018910: 2020 2020 2020 2020 2063 203d 2063 6c61           c = cla
+00018920: 7373 6573 2e70 6f70 2829 0a20 2020 2020  sses.pop().     
+00018930: 2020 2020 2020 2069 6620 6f62 6a5f 6e61         if obj_na
+00018940: 6d65 2069 6e20 632e 5f5f 6469 6374 5f5f  me in c.__dict__
+00018950: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00018960: 2020 7265 7475 726e 2063 0a20 2020 2020    return c.     
+00018970: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00018980: 2020 2020 2020 2020 2020 2020 2063 6c61               cla
+00018990: 7373 6573 203d 206c 6973 7428 632e 5f5f  sses = list(c.__
+000189a0: 6261 7365 735f 5f29 202b 2063 6c61 7373  bases__) + class
+000189b0: 6573 0a20 2020 2065 6c69 6620 6f62 6a5f  es.    elif obj_
+000189c0: 7479 7065 2069 6e20 5b27 6675 6e63 7469  type in ['functi
+000189d0: 6f6e 275d 3a0a 2020 2020 2020 2020 6966  on']:.        if
+000189e0: 2050 7956 6572 2833 293a 0a20 2020 2020   PyVer(3):.     
+000189f0: 2020 2020 2020 2023 6361 6c6c 6572 5f6d         #caller_m
+00018a00: 6f64 756c 655f 6e61 6d65 3d69 6e73 7065  odule_name=inspe
+00018a10: 6374 2e63 7572 7265 6e74 6672 616d 6528  ct.currentframe(
+00018a20: 292e 665f 6261 636b 2e66 5f67 6c6f 6261  ).f_back.f_globa
+00018a30: 6c73 5b27 5f5f 6e61 6d65 5f5f 275d 0a20  ls['__name__']. 
+00018a40: 2020 2020 2020 2020 2020 2023 6361 6c6c             #call
+00018a50: 6572 5f6d 6f64 756c 653d 7379 732e 6d6f  er_module=sys.mo
+00018a60: 6475 6c65 735b 6361 6c6c 6572 5f6d 6f64  dules[caller_mod
+00018a70: 756c 655f 6e61 6d65 5d0a 2020 2020 2020  ule_name].      
+00018a80: 2020 2020 2020 6361 6c6c 6572 5f6d 6f64        caller_mod
+00018a90: 756c 653d 696e 7370 6563 742e 6765 746d  ule=inspect.getm
+00018aa0: 6f64 756c 6528 696e 7370 6563 742e 6375  odule(inspect.cu
+00018ab0: 7272 656e 7466 7261 6d65 2829 2e66 5f62  rrentframe().f_b
+00018ac0: 6163 6b29 0a20 2020 2020 2020 2020 2020  ack).           
+00018ad0: 2072 6574 7572 6e20 6765 7461 7474 7228   return getattr(
+00018ae0: 6361 6c6c 6572 5f6d 6f64 756c 655f 6e61  caller_module_na
+00018af0: 6d65 2c27 2e27 2e6a 6f69 6e28 6f62 6a2e  me,'.'.join(obj.
+00018b00: 5f5f 7175 616c 6e61 6d65 5f5f 2e73 706c  __qualname__.spl
+00018b10: 6974 2827 2e27 295b 3a2d 315d 2929 0a20  it('.')[:-1])). 
+00018b20: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
+00018b30: 740a 0a64 6566 2046 756e 6374 696f 6e41  t..def FunctionA
+00018b40: 7267 7328 6675 6e63 2c2a 2a6f 7074 7329  rgs(func,**opts)
+00018b50: 3a0a 2020 2020 2727 270a 2020 2020 4765  :.    '''.    Ge
+00018b60: 7420 6675 6e63 7469 6f6e 2773 2069 6e70  t function's inp
+00018b70: 7574 2041 7267 756d 656e 7473 0a20 2020  ut Arguments.   
+00018b80: 202d 206d 6f64 650a 2020 2020 2020 2d20   - mode.      - 
+00018b90: 6465 6661 756c 7473 203a 2067 6574 2064  defaults : get d
+00018ba0: 6566 6175 6c74 2028 563d 3f2c 2e2e 2e29  efault (V=?,...)
+00018bb0: 0a20 2020 2020 202d 2061 7267 7320 2020  .      - args   
+00018bc0: 2020 3a20 6765 7420 6172 6773 2020 2856    : get args  (V
+00018bd0: 2c56 322c 2e2e 2e29 0a20 2020 2020 202d  ,V2,...).      -
+00018be0: 2076 6172 6172 6773 2020 3a20 6765 7420   varargs  : get 
+00018bf0: 7661 7261 7267 7320 282a 5629 0a20 2020  varargs (*V).   
+00018c00: 2020 202d 206b 6579 776f 7264 7320 3a20     - keywords : 
+00018c10: 6765 7420 6b65 7977 6f72 6473 2028 2a2a  get keywords (**
+00018c20: 5629 0a20 2020 2020 202d 2073 7472 696e  V).      - strin
+00018c30: 6720 2020 3a20 7265 7475 726e 2061 7267  g   : return arg
+00018c40: 756d 656e 7473 2074 6f20 7374 7269 6e67  uments to string
+00018c50: 2066 6f72 6d61 740a 2020 2020 2020 2d20   format.      - 
+00018c60: 6c69 7374 2c74 7570 6c65 3a20 7265 7475  list,tuple: retu
+00018c70: 726e 2061 7267 756d 656e 7473 2074 6f20  rn arguments to 
+00018c80: 6c69 7374 2066 6f72 6d61 740a 2020 2020  list format.    
+00018c90: 2020 6465 6661 756c 7420 6f75 7470 7574    default output
+00018ca0: 203a 2064 6963 7469 6f6e 6961 7279 2066   : dictioniary f
+00018cb0: 6f72 6d61 740a 2020 2020 2d20 6465 6661  ormat.    - defa
+00018cc0: 756c 7420 3a20 6966 206e 6f74 6869 6e67  ult : if nothing
+00018cd0: 2074 6865 6e20 7265 7475 726e 2064 6566   then return def
+00018ce0: 6175 6c74 2076 616c 7565 2028 6465 6661  ault value (defa
+00018cf0: 756c 7420 4e6f 6e65 290a 2020 2020 2727  ult None).    ''
+00018d00: 270a 2020 2020 6d6f 6465 3d6f 7074 732e  '.    mode=opts.
+00018d10: 6765 7428 276d 6f64 6527 2c6f 7074 732e  get('mode',opts.
+00018d20: 6765 7428 2766 6965 6c64 272c 2764 6566  get('field','def
+00018d30: 6175 6c74 7327 2929 0a20 2020 2064 6566  aults')).    def
+00018d40: 6175 6c74 3d6f 7074 732e 6765 7428 2764  ault=opts.get('d
+00018d50: 6566 6175 6c74 272c 4e6f 6e65 290a 2020  efault',None).  
+00018d60: 2020 2369 6620 6e6f 7420 5479 7065 2866    #if not Type(f
+00018d70: 756e 632c 2766 756e 6374 696f 6e27 2c27  unc,'function','
+00018d80: 6d65 7468 6f64 2729 3a0a 2020 2020 6966  method'):.    if
+00018d90: 206e 6f74 2049 7346 756e 6374 696f 6e28   not IsFunction(
+00018da0: 6675 6e63 293a 0a20 2020 2020 2020 2072  func):.        r
+00018db0: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
+00018dc0: 2020 7274 3d7b 7d0a 2020 2020 234e 6f74    rt={}.    #Not
+00018dd0: 2073 7570 706f 7274 202a 7620 7061 7261   support *v para
+00018de0: 6d65 7465 7220 7769 7468 2067 6574 6172  meter with getar
+00018df0: 6773 7065 6328 290a 2020 2020 2361 7267  gspec().    #arg
+00018e00: 732c 2076 6172 6172 6773 2c20 6b65 7977  s, varargs, keyw
+00018e10: 6f72 6473 2c20 6465 6661 756c 7473 203d  ords, defaults =
+00018e20: 2069 6e73 7065 6374 2e67 6574 6172 6773   inspect.getargs
+00018e30: 7065 6328 6675 6e63 290a 2020 2020 2369  pec(func).    #i
+00018e40: 6620 6e6f 7420 4973 4e6f 6e65 2864 6566  f not IsNone(def
+00018e50: 6175 6c74 7329 3a0a 2020 2020 2320 2020  aults):.    #   
+00018e60: 2064 6566 6175 6c74 733d 6469 6374 287a   defaults=dict(z
+00018e70: 6970 2861 7267 735b 2d6c 656e 2864 6566  ip(args[-len(def
+00018e80: 6175 6c74 7329 3a5d 2c20 6465 6661 756c  aults):], defaul
+00018e90: 7473 2929 0a20 2020 2023 2020 2020 6465  ts)).    #    de
+00018ea0: 6c20 6172 6773 5b2d 6c65 6e28 6465 6661  l args[-len(defa
+00018eb0: 756c 7473 293a 5d0a 2020 2020 2320 2020  ults):].    #   
+00018ec0: 2072 745b 2764 6566 6175 6c74 7327 5d3d   rt['defaults']=
+00018ed0: 6465 6661 756c 7473 0a20 2020 2023 2069  defaults.    # i
+00018ee0: 6e73 7065 6374 2e67 6574 6361 6c6c 6172  nspect.getcallar
+00018ef0: 6773 283c 6675 6e63 7469 6f6e 3e2c 6461  gs(<function>,da
+00018f00: 7461 732e 2e2e 2e29 203a 2061 7574 6f6d  tas....) : autom
+00018f10: 6174 6963 616c 6c79 206d 6174 6368 696e  atically matchin
+00018f20: 6720 616e 6420 7075 7420 746f 203c 6675  g and put to <fu
+00018f30: 6e63 7469 6f6e 733e 2773 2069 6e70 7574  nctions>'s input
+00018f40: 7320 3a20 4368 6563 6b20 6974 206c 6174  s : Check it lat
+00018f50: 6572 0a20 2020 2074 7279 3a0a 2020 2020  er.    try:.    
+00018f60: 2020 2020 6172 6720 3d20 696e 7370 6563      arg = inspec
+00018f70: 742e 6765 7466 756c 6c61 7267 7370 6563  t.getfullargspec
+00018f80: 2866 756e 6329 0a20 2020 2065 7863 6570  (func).    excep
+00018f90: 743a 0a20 2020 2020 2020 2072 6574 7572  t:.        retur
+00018fa0: 6e20 7274 0a0a 2020 2020 6172 6773 3d61  n rt..    args=a
+00018fb0: 7267 2e61 7267 730a 2020 2020 7661 7261  rg.args.    vara
+00018fc0: 7267 733d 6172 672e 7661 7261 7267 730a  rgs=arg.varargs.
+00018fd0: 2020 2020 6b65 7977 6f72 6473 3d61 7267      keywords=arg
+00018fe0: 2e76 6172 6b77 0a20 2020 2064 6566 6175  .varkw.    defau
+00018ff0: 6c74 733d 6172 672e 6b77 6f6e 6c79 6465  lts=arg.kwonlyde
+00019000: 6661 756c 7473 0a20 2020 2069 6620 6e6f  faults.    if no
+00019010: 7420 4973 4e6f 6e65 2861 7267 2e64 6566  t IsNone(arg.def
+00019020: 6175 6c74 7329 3a0a 2020 2020 2020 2020  aults):.        
+00019030: 6966 2064 6566 6175 6c74 7320 6973 204e  if defaults is N
+00019040: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00019050: 2064 6566 6175 6c74 733d 6469 6374 287a   defaults=dict(z
+00019060: 6970 2861 7267 735b 2d6c 656e 2861 7267  ip(args[-len(arg
+00019070: 2e64 6566 6175 6c74 7329 3a5d 2c61 7267  .defaults):],arg
+00019080: 2e64 6566 6175 6c74 7329 290a 2020 2020  .defaults)).    
+00019090: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000190a0: 2020 2020 2020 6465 6661 756c 7473 2e75        defaults.u
+000190b0: 7064 6174 6528 6469 6374 287a 6970 2861  pdate(dict(zip(a
+000190c0: 7267 735b 2d6c 656e 2861 7267 2e64 6566  rgs[-len(arg.def
+000190d0: 6175 6c74 7329 3a5d 2c61 7267 2e64 6566  aults):],arg.def
+000190e0: 6175 6c74 7329 2929 0a20 2020 2020 2020  aults))).       
+000190f0: 2064 656c 2061 7267 735b 2d6c 656e 2861   del args[-len(a
+00019100: 7267 2e64 6566 6175 6c74 7329 3a5d 0a0a  rg.defaults):]..
+00019110: 2020 2020 6966 206e 6f74 2049 734e 6f6e      if not IsNon
+00019120: 6528 6465 6661 756c 7473 293a 2072 745b  e(defaults): rt[
+00019130: 2764 6566 6175 6c74 7327 5d3d 6465 6661  'defaults']=defa
+00019140: 756c 7473 0a20 2020 2069 6620 6172 6773  ults.    if args
+00019150: 3a0a 2020 2020 2020 2020 6966 2061 7267  :.        if arg
+00019160: 735b 305d 203d 3d20 2773 656c 6627 3a0a  s[0] == 'self':.
+00019170: 2020 2020 2020 2020 2020 2020 6172 6773              args
+00019180: 3d61 7267 735b 313a 5d0a 2020 2020 2020  =args[1:].      
+00019190: 2020 7274 5b27 6172 6773 275d 3d61 7267    rt['args']=arg
+000191a0: 730a 2020 2020 6966 2076 6172 6172 6773  s.    if varargs
+000191b0: 3a20 7274 5b27 7661 7261 7267 7327 5d3d  : rt['varargs']=
+000191c0: 7661 7261 7267 730a 2020 2020 6966 206b  varargs.    if k
+000191d0: 6579 776f 7264 733a 2072 745b 276b 6579  eywords: rt['key
+000191e0: 776f 7264 7327 5d3d 6b65 7977 6f72 6473  words']=keywords
+000191f0: 0a20 2020 2069 6620 5479 7065 286d 6f64  .    if Type(mod
+00019200: 652c 286c 6973 742c 7475 706c 6529 293a  e,(list,tuple)):
+00019210: 0a20 2020 2020 2020 2072 7473 3d5b 5d0a  .        rts=[].
+00019220: 2020 2020 2020 2020 666f 7220 6969 2069          for ii i
+00019230: 6e20 7274 3a0a 2020 2020 2020 2020 2020  n rt:.          
+00019240: 2020 7274 732e 6170 7065 6e64 2872 742e    rts.append(rt.
+00019250: 6765 7428 6969 2c64 6566 6175 6c74 2929  get(ii,default))
+00019260: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00019270: 7274 730a 2020 2020 656c 7365 3a0a 2020  rts.    else:.  
+00019280: 2020 2020 2020 6966 206d 6f64 6520 696e        if mode in
+00019290: 205b 2773 7472 272c 2773 7472 696e 6727   ['str','string'
+000192a0: 2c27 666f 726d 6174 275d 3a0a 2020 2020  ,'format']:.    
+000192b0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+000192c0: 7472 2869 6e73 7065 6374 2e73 6967 6e61  tr(inspect.signa
+000192d0: 7475 7265 2866 756e 6329 290a 2020 2020  ture(func)).    
+000192e0: 2020 2020 2020 2020 2361 7267 5f73 7472          #arg_str
+000192f0: 3d27 270a 2020 2020 2020 2020 2020 2020  =''.            
+00019300: 2369 6620 7274 3a0a 2020 2020 2020 2020  #if rt:.        
+00019310: 2020 2020 2320 2020 2066 6f72 207a 2069      #    for z i
+00019320: 6e20 7274 2e67 6574 2827 6172 6773 272c  n rt.get('args',
+00019330: 5b5d 293a 0a20 2020 2020 2020 2020 2020  []):.           
+00019340: 2023 2020 2020 2020 2020 2069 6620 6172   #         if ar
+00019350: 675f 7374 723a 0a20 2020 2020 2020 2020  g_str:.         
+00019360: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00019370: 2061 7267 5f73 7472 3d61 7267 5f73 7472   arg_str=arg_str
+00019380: 2b27 2c7b 7d27 2e66 6f72 6d61 7428 7a29  +',{}'.format(z)
+00019390: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+000193a0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000193b0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+000193c0: 2020 2020 2020 2061 7267 5f73 7472 3d27         arg_str='
+000193d0: 7b7d 272e 666f 726d 6174 287a 290a 2020  {}'.format(z).  
+000193e0: 2020 2020 2020 2020 2020 2320 2020 2069            #    i
+000193f0: 6620 2776 6172 6172 6773 2720 696e 2072  f 'varargs' in r
+00019400: 743a 0a20 2020 2020 2020 2020 2020 2023  t:.            #
+00019410: 2020 2020 2020 2020 2069 6620 6172 675f           if arg_
+00019420: 7374 723a 0a20 2020 2020 2020 2020 2020  str:.           
+00019430: 2023 2020 2020 2020 2020 2020 2020 2061   #             a
+00019440: 7267 5f73 7472 3d61 7267 5f73 7472 2b27  rg_str=arg_str+'
+00019450: 2c2a 7b7d 272e 666f 726d 6174 2872 745b  ,*{}'.format(rt[
+00019460: 2776 6172 6172 6773 275d 290a 2020 2020  'varargs']).    
+00019470: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00019480: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00019490: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000194a0: 2020 6172 675f 7374 723d 272a 7b7d 272e    arg_str='*{}'.
+000194b0: 666f 726d 6174 2872 745b 2776 6172 6172  format(rt['varar
+000194c0: 6773 275d 290a 2020 2020 2020 2020 2020  gs']).          
+000194d0: 2020 2320 2020 2069 6620 2764 6566 6175    #    if 'defau
+000194e0: 6c74 7327 2069 6e20 7274 3a0a 2020 2020  lts' in rt:.    
+000194f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00019500: 2066 6f72 207a 2069 6e20 7274 5b27 6465   for z in rt['de
+00019510: 6661 756c 7473 275d 3a0a 2020 2020 2020  faults']:.      
+00019520: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00019530: 2020 2020 6966 2061 7267 5f73 7472 3a0a      if arg_str:.
+00019540: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00019550: 2020 2020 2020 2020 2020 2020 2020 6172                ar
+00019560: 675f 7374 723d 6172 675f 7374 722b 272c  g_str=arg_str+',
+00019570: 7b7d 3d27 2e66 6f72 6d61 7428 7a29 0a20  {}='.format(z). 
+00019580: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00019590: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+000195a0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+000195b0: 2020 2020 2020 2020 2020 2020 2061 7267               arg
+000195c0: 5f73 7472 3d27 7b7d 3d27 2e66 6f72 6d61  _str='{}='.forma
+000195d0: 7428 7a29 0a20 2020 2020 2020 2020 2020  t(z).           
+000195e0: 2023 2020 2020 2020 2020 2020 2020 2069   #             i
+000195f0: 6620 5479 7065 2872 745b 2764 6566 6175  f Type(rt['defau
+00019600: 6c74 7327 5d5b 7a5d 2c73 7472 293a 0a20  lts'][z],str):. 
+00019610: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00019620: 2020 2020 2020 2020 2020 2020 2061 7267               arg
+00019630: 5f73 7472 3d61 7267 5f73 7472 2b22 277b  _str=arg_str+"'{
+00019640: 7d27 222e 666f 726d 6174 2872 745b 2764  }'".format(rt['d
+00019650: 6566 6175 6c74 7327 5d5b 7a5d 290a 2020  efaults'][z]).  
+00019660: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00019670: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00019680: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00019690: 2020 2020 2020 2020 2020 2020 6172 675f              arg_
+000196a0: 7374 723d 6172 675f 7374 722b 227b 7d22  str=arg_str+"{}"
+000196b0: 2e66 6f72 6d61 7428 7274 5b27 6465 6661  .format(rt['defa
+000196c0: 756c 7473 275d 5b7a 5d29 0a20 2020 2020  ults'][z]).     
+000196d0: 2020 2020 2020 2023 2020 2020 6966 2027         #    if '
+000196e0: 6b65 7977 6f72 6473 2720 696e 2072 743a  keywords' in rt:
+000196f0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+00019700: 2020 2020 2020 6966 2061 7267 5f73 7472        if arg_str
+00019710: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
+00019720: 2020 2020 2020 2020 2020 2020 6172 675f              arg_
+00019730: 7374 723d 6172 675f 7374 722b 272c 2a2a  str=arg_str+',**
+00019740: 7b7d 272e 666f 726d 6174 2872 745b 276b  {}'.format(rt['k
+00019750: 6579 776f 7264 7327 5d29 0a20 2020 2020  eywords']).     
+00019760: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00019770: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00019780: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00019790: 6172 675f 7374 723d 272a 2a7b 7d27 2e66  arg_str='**{}'.f
+000197a0: 6f72 6d61 7428 7274 5b27 6b65 7977 6f72  ormat(rt['keywor
+000197b0: 6473 275d 290a 2020 2020 2020 2020 2020  ds']).          
+000197c0: 2020 2372 6574 7572 6e20 6172 675f 7374    #return arg_st
+000197d0: 720a 2020 2020 2020 2020 6966 206d 6f64  r.        if mod
+000197e0: 6520 696e 2072 743a 0a20 2020 2020 2020  e in rt:.       
+000197f0: 2020 2020 2072 6574 7572 6e20 7274 5b6d       return rt[m
+00019800: 6f64 655d 0a20 2020 2020 2020 2072 6574  ode].        ret
+00019810: 7572 6e20 7274 0a0a 6465 6620 4172 6773  urn rt..def Args
+00019820: 2873 7263 2c66 6965 6c64 3d27 616c 6c27  (src,field='all'
+00019830: 2c64 6566 6175 6c74 3d7b 7d29 3a0a 2020  ,default={}):.  
+00019840: 2020 2727 270a 2020 2020 4765 7420 436c    '''.    Get Cl
+00019850: 6173 732c 2069 6e73 7461 6e63 6527 7320  ass, instance's 
+00019860: 676c 6f62 616c 2061 7267 756d 656e 7473  global arguments
+00019870: 0a20 2020 2047 6574 2046 756e 6374 696f  .    Get Functio
+00019880: 6e20 696e 7075 7420 7061 7261 6d65 7465  n input paramete
+00019890: 7273 0a20 2020 2027 2727 0a20 2020 2072  rs.    '''.    r
+000198a0: 743d 7b7d 0a20 2020 2069 6620 5479 7065  t={}.    if Type
+000198b0: 2873 7263 2c28 2763 6c61 7373 6f62 6a27  (src,('classobj'
+000198c0: 2c27 696e 7374 616e 6365 2729 293a 0a20  ,'instance')):. 
+000198d0: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+000198e0: 2020 2020 2020 2020 7372 633d 6765 7461          src=geta
+000198f0: 7474 7228 7372 632c 275f 5f69 6e69 745f  ttr(src,'__init_
+00019900: 5f27 290a 2020 2020 2020 2020 6578 6365  _').        exce
+00019910: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
+00019920: 7265 7475 726e 2073 7263 2e5f 5f64 6963  return src.__dic
+00019930: 745f 5f0a 2020 2020 2365 6c69 6620 6e6f  t__.    #elif no
+00019940: 7420 5479 7065 2873 7263 2c27 6675 6e63  t Type(src,'func
+00019950: 7469 6f6e 2729 3a0a 2020 2020 656c 6966  tion'):.    elif
+00019960: 206e 6f74 2049 7346 756e 6374 696f 6e28   not IsFunction(
+00019970: 7372 6329 3a0a 2020 2020 2020 2020 7265  src):.        re
+00019980: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
+00019990: 2072 6574 7572 6e20 4675 6e63 7469 6f6e   return Function
+000199a0: 4172 6773 2873 7263 2c6d 6f64 653d 6669  Args(src,mode=fi
+000199b0: 656c 642c 6465 6661 756c 743d 6465 6661  eld,default=defa
+000199c0: 756c 7429 0a0a 6465 6620 5661 7269 6162  ult)..def Variab
+000199d0: 6c65 2873 7263 3d4e 6f6e 652c 6f62 6a3d  le(src=None,obj=
+000199e0: 4e6f 6e65 2c70 6172 656e 743d 302c 6869  None,parent=0,hi
+000199f0: 7374 6f72 793d 4661 6c73 652c 6465 6661  story=False,defa
+00019a00: 756c 743d 4661 6c73 652c 6d6f 6465 3d27  ult=False,mode='
+00019a10: 6c6f 6361 6c27 2c56 6172 5479 7065 3d4e  local',VarType=N
+00019a20: 6f6e 652c 616c 6c74 7970 653d 5472 7565  one,alltype=True
+00019a30: 293a 0a20 2020 2027 2727 0a20 2020 2047  ):.    '''.    G
+00019a40: 6574 2061 7661 696c 6162 6c65 2076 6172  et available var
+00019a50: 6961 626c 6520 6461 7461 0a20 2020 2020  iable data.     
+00019a60: 2d20 7372 633a 200a 2020 2020 2020 2069  - src: .       i
+00019a70: 6620 4e6f 6e65 3a20 7265 7475 726e 2077  f None: return w
+00019a80: 686f 6c65 2065 6e76 6972 6f6e 6d65 6e74  hole environment
+00019a90: 2028 6469 6374 290a 2020 2020 2020 2069   (dict).       i
+00019aa0: 6620 7374 7269 6e67 2074 6865 6e20 6669  f string then fi
+00019ab0: 6e64 2074 6865 2073 7472 696e 6720 7661  nd the string va
+00019ac0: 7269 6162 6c65 2069 6e20 7468 6520 656e  riable in the en
+00019ad0: 7669 726f 6e6d 656e 740a 2020 2020 2020  vironment.      
+00019ae0: 2069 6620 7661 7269 6162 6c65 2074 6865   if variable the
+00019af0: 6e20 7265 7475 726e 2074 6861 740a 2020  n return that.  
+00019b00: 2020 202d 2070 6172 656e 7420 0a20 2020     - parent .   
+00019b10: 2020 2020 3020 3a20 6d79 2066 756e 6374      0 : my funct
+00019b20: 696f 6e20 2864 6566 6175 6c74 290a 2020  ion (default).  
+00019b30: 2020 2020 2031 203a 206d 7920 7061 7265       1 : my pare
+00019b40: 6e74 7320 6675 6e63 7469 6f6e 0a20 2020  nts function.   
+00019b50: 2020 2020 2e2e 2e0a 2020 2020 202d 2068      ....     - h
+00019b60: 6973 746f 7279 3a20 6672 6f6d 206d 6520  istory: from me 
+00019b70: 746f 206d 7920 746f 7020 6f66 2074 6865  to my top of the
+00019b80: 2066 756e 6374 696f 6e73 0a20 2020 2020   functions.     
+00019b90: 2d20 6d6f 6465 2020 3a20 7661 7269 6162  - mode  : variab
+00019ba0: 6c65 2061 7265 610a 2020 2020 2020 206c  le area.       l
+00019bb0: 6f63 616c 203a 2066 756e 6374 696f 6e27  ocal : function'
+00019bc0: 7320 6c6f 6361 6c28 696e 7369 6465 2920  s local(inside) 
+00019bd0: 7661 7269 6162 6c65 0a20 2020 2020 2020  variable.       
+00019be0: 676c 6f62 616c 3a20 6675 6e63 7469 6f6e  global: function
+00019bf0: 2773 2067 6c6f 6261 6c20 7661 7269 6162  's global variab
+00019c00: 6c65 0a20 2020 2027 2727 0a20 2020 2073  le.    '''.    s
+00019c10: 7263 5f74 7970 653d 5479 7065 4e61 6d65  rc_type=TypeName
+00019c20: 2873 7263 290a 2020 2020 6f62 6a5f 7479  (src).    obj_ty
+00019c30: 7065 3d54 7970 654e 616d 6528 6f62 6a29  pe=TypeName(obj)
+00019c40: 0a20 2020 2070 6172 656e 743d 496e 7428  .    parent=Int(
+00019c50: 7061 7265 6e74 290a 2020 2020 6966 206e  parent).    if n
+00019c60: 6f74 2069 7369 6e73 7461 6e63 6528 7061  ot isinstance(pa
+00019c70: 7265 6e74 2c69 6e74 293a 2070 6172 656e  rent,int): paren
+00019c80: 743d 300a 2020 2020 6966 2070 6172 656e  t=0.    if paren
+00019c90: 7420 3e3d 2030 3a0a 2020 2020 2020 2020  t >= 0:.        
+00019ca0: 6c6f 633d 312b 7061 7265 6e74 0a20 2020  loc=1+parent.   
+00019cb0: 2065 6c73 653a 0a20 2020 2020 2020 206c   else:.        l
+00019cc0: 6f63 3d70 6172 656e 740a 2020 2020 696e  oc=parent.    in
+00019cd0: 7370 7374 3d69 6e73 7065 6374 2e73 7461  spst=inspect.sta
+00019ce0: 636b 2829 0a20 2020 2023 696e 7370 6563  ck().    #inspec
+00019cf0: 742e 7374 6163 6b28 295b 6465 7074 685d  t.stack()[depth]
+00019d00: 5b30 5d20 3a20 6672 616d 6520 0a20 2020  [0] : frame .   
+00019d10: 2023 696e 7370 6563 742e 6765 746d 656d   #inspect.getmem
+00019d20: 6265 7273 2866 7261 6d65 2920 3a20 656e  bers(frame) : en
+00019d30: 7669 726f 6e6d 656e 7473 0a20 2020 2069  vironments.    i
+00019d40: 6620 6c65 6e28 696e 7370 7374 2920 3c3d  f len(inspst) <=
+00019d50: 206c 6f63 3a20 236f 7574 206f 6620 7261   loc: #out of ra
+00019d60: 6e67 650a 2020 2020 2020 2020 6c6f 633d  nge.        loc=
+00019d70: 2d31 0a20 2020 2072 743d 7b7d 0a20 2020  -1.    rt={}.   
+00019d80: 2069 6620 6f62 6a5f 7479 7065 2069 6e20   if obj_type in 
+00019d90: 5b27 6d6f 6475 6c65 272c 2763 6c61 7373  ['module','class
+00019da0: 6f62 6a27 2c27 696e 7374 616e 6365 275d  obj','instance']
+00019db0: 3a0a 2020 2020 2020 2020 7274 2e75 7064  :.        rt.upd
+00019dc0: 6174 6528 6f62 6a2e 5f5f 6469 6374 5f5f  ate(obj.__dict__
+00019dd0: 290a 2020 2020 656c 7365 3a20 2320 676c  ).    else: # gl
+00019de0: 6f62 616c 2061 6e64 206c 6f63 616c 7320  obal and locals 
+00019df0: 7661 7269 6162 6c65 7320 6672 6f6d 206d  variables from m
+00019e00: 6520 746f 2074 6f70 0a20 2020 2020 2020  e to top.       
+00019e10: 2069 6620 6869 7374 6f72 793a 0a20 2020   if history:.   
+00019e20: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+00019e30: 6e20 7261 6e67 6528 6c65 6e28 696e 7370  n range(len(insp
+00019e40: 7374 292d 312c 302c 2d31 293a 0a20 2020  st)-1,0,-1):.   
+00019e50: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00019e60: 6d6f 6465 2069 6e20 5b27 676c 6f62 616c  mode in ['global
+00019e70: 272c 2761 6c6c 275d 3a0a 2020 2020 2020  ','all']:.      
+00019e80: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+00019e90: 2e75 7064 6174 6528 6469 6374 2869 6e73  .update(dict(ins
+00019ea0: 7065 6374 2e67 6574 6d65 6d62 6572 7328  pect.getmembers(
+00019eb0: 696e 7370 7374 5b69 5d5b 305d 2929 5b22  inspst[i][0]))["
+00019ec0: 665f 676c 6f62 616c 7322 5d29 0a20 2020  f_globals"]).   
+00019ed0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00019ee0: 6d6f 6465 2069 6e20 5b27 6c6f 6361 6c27  mode in ['local'
+00019ef0: 2c27 616c 6c27 5d3a 0a20 2020 2020 2020  ,'all']:.       
+00019f00: 2020 2020 2020 2020 2020 2020 2072 742e               rt.
+00019f10: 7570 6461 7465 2864 6963 7428 696e 7370  update(dict(insp
+00019f20: 6563 742e 6765 746d 656d 6265 7273 2869  ect.getmembers(i
+00019f30: 6e73 7073 745b 695d 5b30 5d29 295b 2266  nspst[i][0]))["f
+00019f40: 5f6c 6f63 616c 7322 5d29 0a20 2020 2020  _locals"]).     
+00019f50: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00019f60: 2020 2020 2069 6620 6d6f 6465 2069 6e20       if mode in 
+00019f70: 5b27 676c 6f62 616c 272c 2761 6c6c 275d  ['global','all']
+00019f80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00019f90: 2020 7274 2e75 7064 6174 6528 6469 6374    rt.update(dict
+00019fa0: 2869 6e73 7065 6374 2e67 6574 6d65 6d62  (inspect.getmemb
+00019fb0: 6572 7328 696e 7370 7374 5b6c 6f63 5d5b  ers(inspst[loc][
+00019fc0: 305d 2929 5b22 665f 676c 6f62 616c 7322  0]))["f_globals"
+00019fd0: 5d29 0a20 2020 2020 2020 2020 2020 2069  ]).            i
+00019fe0: 6620 6d6f 6465 2069 6e20 5b27 6c6f 6361  f mode in ['loca
+00019ff0: 6c27 2c27 616c 6c27 5d3a 0a20 2020 2020  l','all']:.     
+0001a000: 2020 2020 2020 2020 2020 2072 742e 7570             rt.up
+0001a010: 6461 7465 2864 6963 7428 696e 7370 6563  date(dict(inspec
+0001a020: 742e 6765 746d 656d 6265 7273 2869 6e73  t.getmembers(ins
+0001a030: 7073 745b 6c6f 635d 5b30 5d29 295b 2266  pst[loc][0]))["f
+0001a040: 5f6c 6f63 616c 7322 5d29 0a20 2020 2069  _locals"]).    i
+0001a050: 6620 7372 635f 7479 7065 3d3d 276e 6f6e  f src_type=='non
+0001a060: 6574 7970 6527 3a0a 2020 2020 2020 2020  etype':.        
+0001a070: 6966 2061 6c6c 7479 7065 3a0a 2020 2020  if alltype:.    
+0001a080: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+0001a090: 740a 2020 2020 2020 2020 6f3d 7b7d 0a20  t.        o={}. 
+0001a0a0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+0001a0b0: 7274 3a0a 2020 2020 2020 2020 2020 2020  rt:.            
+0001a0c0: 6966 2069 2069 6e20 2827 5f5f 6275 696c  if i in ('__buil
+0001a0d0: 7469 6e73 5f5f 272c 275f 5f63 6163 6865  tins__','__cache
+0001a0e0: 645f 5f27 2c27 6d6f 6475 6c65 7327 2c27  d__','modules','
+0001a0f0: 6d6f 645f 7061 7468 2729 206f 7220 5479  mod_path') or Ty
+0001a100: 7065 4e61 6d65 2872 745b 695d 2920 696e  peName(rt[i]) in
+0001a110: 2028 2766 756e 6374 696f 6e27 2c27 6d6f   ('function','mo
+0001a120: 6475 6c65 272c 2763 6c61 7373 6f62 6a27  dule','classobj'
+0001a130: 2c27 696e 7374 616e 6365 272c 2762 7569  ,'instance','bui
+0001a140: 6c74 696e 5f66 756e 6374 696f 6e5f 6f72  ltin_function_or
+0001a150: 5f6d 6574 686f 6427 2c27 6d65 7468 6f64  _method','method
+0001a160: 2729 3a20 0a20 2020 2020 2020 2020 2020  '): .           
+0001a170: 2020 2020 2063 6f6e 7469 6e75 650a 2020       continue.  
+0001a180: 2020 2020 2020 2020 2020 6f5b 695d 3d72            o[i]=r
+0001a190: 745b 695d 0a20 2020 2020 2020 2072 6574  t[i].        ret
+0001a1a0: 7572 6e20 6f0a 2020 2020 656c 6966 2073  urn o.    elif s
+0001a1b0: 7263 5f74 7970 6520 3d3d 2027 7374 7227  rc_type == 'str'
+0001a1c0: 3a0a 2020 2020 2020 2020 6f75 743d 7274  :.        out=rt
+0001a1d0: 2e67 6574 2873 7263 2c64 6566 6175 6c74  .get(src,default
+0001a1e0: 290a 2020 2020 2020 2020 6966 2056 6172  ).        if Var
+0001a1f0: 5479 7065 3a20 2320 6966 2070 7574 2065  Type: # if put e
+0001a200: 7870 6563 7465 6420 7479 7065 2074 6865  xpected type the
+0001a210: 6e0a 2020 2020 2020 2020 2020 2020 6966  n.            if
+0001a220: 2054 7970 6528 6f75 742c 5661 7254 7970   Type(out,VarTyp
+0001a230: 6529 3a20 7265 7475 726e 206f 7574 2023  e): return out #
+0001a240: 2069 6620 6765 7474 696e 6720 6461 7461   if getting data
+0001a250: 2069 7320 6578 7065 6374 6564 2074 7970   is expected typ
+0001a260: 6520 7468 656e 200a 2020 2020 2020 2020  e then .        
+0001a270: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
+0001a280: 6c74 2023 2069 6620 6e6f 7420 6578 7065  lt # if not expe
+0001a290: 6374 6564 2074 6865 6e20 7265 7475 726e  cted then return
+0001a2a0: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
+0001a2b0: 2072 6574 7572 6e20 6f75 7420 2320 6a75   return out # ju
+0001a2c0: 7374 2072 6574 7572 6e20 676f 7474 656e  st return gotten
+0001a2d0: 2064 6174 610a 2020 2020 2020 2020 2369   data.        #i
+0001a2e0: 6620 6f62 6a5f 7479 7065 2069 6e20 5b27  f obj_type in ['
+0001a2f0: 6d6f 6475 6c65 275d 3a0a 2020 2020 2020  module']:.      
+0001a300: 2020 2320 2020 2023 2067 6574 6174 7472    #    # getattr
+0001a310: 283c 636c 6173 733e 2c27 6e61 6d65 2729  (<class>,'name')
+0001a320: 203a 2047 6574 2064 6174 610a 2020 2020   : Get data.    
+0001a330: 2020 2020 2320 2020 2023 2068 6173 6174      #    # hasat
+0001a340: 7472 283c 636c 6173 733e 2c27 6e61 6d65  tr(<class>,'name
+0001a350: 2729 203a 2063 6865 636b 206e 616d 650a  ') : check name.
+0001a360: 2020 2020 2020 2020 2320 2020 2023 2073          #    # s
+0001a370: 6574 6174 7472 283c 636c 6173 733e 2c27  etattr(<class>,'
+0001a380: 6e61 6d65 2729 203a 2075 7064 6174 6520  name') : update 
+0001a390: 746f 206e 616d 650a 2020 2020 2020 2020  to name.        
+0001a3a0: 2320 2020 2023 2064 656c 6174 7472 283c  #    # delattr(<
+0001a3b0: 636c 6173 733e 2c27 6e61 6d65 2729 203a  class>,'name') :
+0001a3c0: 2072 656d 6f76 6520 6e61 6d65 0a20 2020   remove name.   
+0001a3d0: 2020 2020 2023 2020 2020 6966 2068 6173       #    if has
+0001a3e0: 6174 7472 286f 626a 2c73 7263 293a 2072  attr(obj,src): r
+0001a3f0: 6574 7572 6e20 6765 7461 7474 7228 6f62  eturn getattr(ob
+0001a400: 6a2c 7372 6329 0a20 2020 2020 2020 2023  j,src).        #
+0001a410: 656c 6966 206f 626a 5f74 7970 6520 696e  elif obj_type in
+0001a420: 205b 2763 6c61 7373 275d 3a0a 2020 2020   ['class']:.    
+0001a430: 2020 2020 2320 2020 206f 626a 3d6f 626a      #    obj=obj
+0001a440: 2829 0a20 2020 2020 2020 2023 2020 2020  ().        #    
+0001a450: 6966 2068 6173 6174 7472 286f 626a 2c73  if hasattr(obj,s
+0001a460: 7263 293a 2072 6574 7572 6e20 6765 7461  rc): return geta
+0001a470: 7474 7228 6f62 6a2c 7372 6329 0a20 2020  ttr(obj,src).   
+0001a480: 2020 2020 2023 656c 7365 3a20 234e 6f20       #else: #No 
+0001a490: 6f62 6a65 6374 0a20 2020 2020 2020 2023  object.        #
+0001a4a0: 2020 2020 6f75 743d 7274 2e67 6574 2873      out=rt.get(s
+0001a4b0: 7263 2c64 6566 6175 6c74 290a 2020 2020  rc,default).    
+0001a4c0: 2020 2020 2320 2020 2069 6620 5661 7254      #    if VarT
+0001a4d0: 7970 653a 2023 2069 6620 7075 7420 6578  ype: # if put ex
+0001a4e0: 7065 6374 6564 2074 7970 6520 7468 656e  pected type then
+0001a4f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0001a500: 2020 6966 2054 7970 6528 6f75 742c 5661    if Type(out,Va
+0001a510: 7254 7970 6529 3a20 7265 7475 726e 206f  rType): return o
+0001a520: 7574 2023 2069 6620 6765 7474 696e 6720  ut # if getting 
+0001a530: 6461 7461 2069 7320 6578 7065 6374 6564  data is expected
+0001a540: 2074 7970 6520 7468 656e 200a 2020 2020   type then .    
+0001a550: 2020 2020 2320 2020 2020 2020 2072 6574      #        ret
+0001a560: 7572 6e20 6465 6661 756c 7420 2320 6966  urn default # if
+0001a570: 206e 6f74 2065 7870 6563 7465 6420 7468   not expected th
+0001a580: 656e 2072 6574 7572 6e20 6465 6661 756c  en return defaul
+0001a590: 740a 2020 2020 2020 2020 2320 2020 2072  t.        #    r
+0001a5a0: 6574 7572 6e20 6f75 7420 2320 6a75 7374  eturn out # just
+0001a5b0: 2072 6574 7572 6e20 676f 7474 656e 2064   return gotten d
+0001a5c0: 6174 610a 2020 2020 7265 7475 726e 2064  ata.    return d
+0001a5d0: 6566 6175 6c74 0a0a 6465 6620 556e 6971  efault..def Uniq
+0001a5e0: 2873 7263 2c64 6566 6175 6c74 3d27 6f72  (src,default='or
+0001a5f0: 6727 2c73 6f72 743d 4661 6c73 652c 7374  g',sort=False,st
+0001a600: 7269 703d 4661 6c73 652c 6373 7472 6970  rip=False,cstrip
+0001a610: 3d46 616c 7365 293a 0a20 2020 2027 2727  =False):.    '''
+0001a620: 0a20 2020 206d 616b 6520 746f 2075 6e69  .    make to uni
+0001a630: 7120 6461 7461 0a20 2020 2064 6566 6175  q data.    defau
+0001a640: 6c74 3d27 6f72 6727 3a20 7265 7475 726e  lt='org': return
+0001a650: 206f 7269 6769 6e61 6c20 6461 7461 0a20   original data. 
+0001a660: 2020 2073 6f72 743d 4661 6c73 6520 2020     sort=False   
+0001a670: 3a20 736f 7274 2064 6174 610a 2020 2020  : sort data.    
+0001a680: 7374 7269 703d 4661 6c73 6520 203a 2072  strip=False  : r
+0001a690: 656d 6f76 6520 7768 6974 6520 7370 6163  emove white spac
+0001a6a0: 6520 616e 6420 6d61 6b65 2074 6f20 756e  e and make to un
+0001a6b0: 6971 0a20 2020 2063 7374 7269 703d 4661  iq.    cstrip=Fa
+0001a6c0: 6c73 6520 3a20 6368 6563 6b20 7769 7468  lse : check with
+0001a6d0: 6f75 7420 7768 6974 6520 7370 6163 652c  out white space,
+0001a6e0: 2062 7574 2072 656d 6169 6e20 6669 7273   but remain firs
+0001a6f0: 7420 7369 6d69 6c61 7220 6461 7461 0a20  t similar data. 
+0001a700: 2020 2027 2727 0a20 2020 2069 6620 6973     '''.    if is
+0001a710: 696e 7374 616e 6365 2873 7263 2c28 6c69  instance(src,(li
+0001a720: 7374 2c74 7570 6c65 2929 3a0a 2020 2020  st,tuple)):.    
+0001a730: 2020 2020 7274 3d5b 5d0a 2020 2020 2020      rt=[].      
+0001a740: 2020 6966 2063 7374 7269 703a 0a20 2020    if cstrip:.   
+0001a750: 2020 2020 2020 2020 206e 7372 633d 5b69           nsrc=[i
+0001a760: 2e73 7472 6970 2829 2069 6620 6973 696e  .strip() if isin
+0001a770: 7374 616e 6365 2869 2c28 7374 722c 6279  stance(i,(str,by
+0001a780: 7465 7329 2920 656c 7365 2069 2066 6f72  tes)) else i for
+0001a790: 2069 2069 6e20 7372 635d 0a20 2020 2020   i in src].     
+0001a7a0: 2020 2020 2020 2063 3d5b 5d0a 2020 2020         c=[].    
+0001a7b0: 2020 2020 2020 2020 666f 7220 692c 6420          for i,d 
+0001a7c0: 696e 2065 6e75 6d65 7261 7465 286e 7372  in enumerate(nsr
+0001a7d0: 6329 3a0a 2020 2020 2020 2020 2020 2020  c):.            
+0001a7e0: 2020 2020 6966 2064 206e 6f74 2069 6e20      if d not in 
+0001a7f0: 633a 0a20 2020 2020 2020 2020 2020 2020  c:.             
+0001a800: 2020 2020 2020 2063 2e61 7070 656e 6428         c.append(
+0001a810: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
+0001a820: 2020 2020 2020 2072 742e 6170 7065 6e64         rt.append
+0001a830: 2873 7263 5b69 5d29 0a20 2020 2020 2020  (src[i]).       
+0001a840: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0001a850: 2020 2069 6620 7374 7269 703a 0a20 2020     if strip:.   
+0001a860: 2020 2020 2020 2020 2020 2020 2073 7263               src
+0001a870: 3d5b 692e 7374 7269 7028 2920 6966 2069  =[i.strip() if i
+0001a880: 7369 6e73 7461 6e63 6528 692c 2873 7472  sinstance(i,(str
+0001a890: 2c62 7974 6573 2929 2065 6c73 6520 6920  ,bytes)) else i 
+0001a8a0: 666f 7220 6920 696e 2073 7263 5d0a 2020  for i in src].  
+0001a8b0: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
+0001a8c0: 696e 2073 7263 3a0a 2020 2020 2020 2020  in src:.        
+0001a8d0: 2020 2020 2020 2020 6966 2069 206e 6f74          if i not
+0001a8e0: 2069 6e20 7274 3a20 7274 2e61 7070 656e   in rt: rt.appen
+0001a8f0: 6428 6929 0a20 2020 2020 2020 2069 6620  d(i).        if 
+0001a900: 736f 7274 3a20 7274 3d53 6f72 7428 7274  sort: rt=Sort(rt
+0001a910: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+0001a920: 2074 7570 6c65 2872 7429 2069 6620 6973   tuple(rt) if is
+0001a930: 696e 7374 616e 6365 2873 7263 2c74 7570  instance(src,tup
+0001a940: 6c65 2920 656c 7365 2072 740a 2020 2020  le) else rt.    
+0001a950: 7265 7475 726e 2044 6566 6175 6c74 2873  return Default(s
+0001a960: 7263 2c64 6566 6175 6c74 290a 0a64 6566  rc,default)..def
+0001a970: 2053 706c 6974 2873 7263 2c73 796d 626f   Split(src,symbo
+0001a980: 6c3d 4e6f 6e65 2c64 6566 6175 6c74 3d5b  l=None,default=[
+0001a990: 5d2c 7379 6d5f 7370 6c69 7465 723d 277c  ],sym_spliter='|
+0001a9a0: 272c 6c69 7374 6f6e 6c79 3d54 7275 6529  ',listonly=True)
+0001a9b0: 3a0a 2020 2020 2727 270a 2020 2020 6d75  :.    '''.    mu
+0001a9c0: 6c74 6970 756c 2073 706c 6974 2074 6865  ltipul split the
+0001a9d0: 6e20 2761 7c62 7c2e 2e2e 270a 2020 2020  n 'a|b|...'.    
+0001a9e0: 7769 7468 6f75 7420 227c 2220 7468 656e  without "|" then
+0001a9f0: 2073 616d 6520 6173 2073 7472 696e 6720   same as string 
+0001aa00: 7370 6c69 7420 6675 6e63 7469 6f6e 0a20  split function. 
+0001aa10: 2020 2073 796d 626f 6c3d 4e6f 6e65 206f     symbol=None o
+0001aa20: 7220 273a 7768 6974 6573 7061 6365 3a27  r ':whitespace:'
+0001aa30: 203a 2052 656d 6f74 6520 7768 6974 6520   : Remote white 
+0001aa40: 7370 6163 6520 616e 6420 7370 6c69 7420  space and split 
+0001aa50: 7769 7468 2073 696e 676c 6520 7370 6163  with single spac
+0001aa60: 6528 2720 2729 0a20 2020 2027 2727 0a20  e(' ').    '''. 
+0001aa70: 2020 2023 5359 4d42 4f4c 2053 706c 6974     #SYMBOL Split
+0001aa80: 0a20 2020 2069 6620 5479 7065 2873 7263  .    if Type(src
+0001aa90: 2c28 7374 722c 6279 7465 7329 293a 0a20  ,(str,bytes)):. 
+0001aaa0: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
+0001aab0: 2069 7320 4e6f 6e65 206f 7220 4973 5361   is None or IsSa
+0001aac0: 6d65 2873 796d 626f 6c2c 273a 7768 6974  me(symbol,':whit
+0001aad0: 6573 7061 6365 3a27 293a 0a20 2020 2020  espace:'):.     
+0001aae0: 2020 2020 2020 2072 6574 7572 6e20 7372         return sr
+0001aaf0: 632e 7370 6c69 7428 290a 2020 2020 2020  c.split().      
+0001ab00: 2020 656c 6966 206e 6f74 2054 7970 6528    elif not Type(
+0001ab10: 7379 6d62 6f6c 2c28 7374 722c 6279 7465  symbol,(str,byte
+0001ab20: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
+0001ab30: 2073 796d 626f 6c3d 2720 270a 2020 2020   symbol=' '.    
+0001ab40: 2020 2020 6966 206c 656e 2873 796d 626f      if len(symbo
+0001ab50: 6c29 203e 2031 3a0a 2020 2020 2020 2020  l) > 1:.        
+0001ab60: 2020 2020 6966 2073 796d 5f73 706c 6974      if sym_split
+0001ab70: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
+0001ab80: 2020 2020 6966 2054 7970 6528 7379 6d62      if Type(symb
+0001ab90: 6f6c 2c62 7974 6573 293a 2073 796d 5f73  ol,bytes): sym_s
+0001aba0: 706c 6974 6572 3d42 7974 6573 2873 796d  pliter=Bytes(sym
+0001abb0: 5f73 706c 6974 6572 290a 2020 2020 2020  _spliter).      
+0001abc0: 2020 2020 2020 2020 2020 656c 7365 3a20            else: 
+0001abd0: 7379 6d5f 7370 6c69 7465 723d 5374 7228  sym_spliter=Str(
+0001abe0: 7379 6d5f 7370 6c69 7465 7229 0a20 2020  sym_spliter).   
+0001abf0: 2020 2020 2020 2020 2020 2020 2073 796d               sym
+0001ac00: 626f 6c3d 556e 6971 2873 796d 626f 6c2e  bol=Uniq(symbol.
+0001ac10: 7370 6c69 7428 7379 6d5f 7370 6c69 7465  split(sym_splite
+0001ac20: 7229 290a 2020 2020 2020 2020 2020 2020  r)).            
+0001ac30: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+0001ac40: 2020 2020 206d 7379 6d3d 277c 272e 6a6f       msym='|'.jo
+0001ac50: 696e 286d 6170 2872 652e 6573 6361 7065  in(map(re.escape
+0001ac60: 2c74 7570 6c65 2873 796d 626f 6c29 2929  ,tuple(symbol)))
+0001ac70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ac80: 2069 6620 5479 7065 2873 7263 2c27 6279   if Type(src,'by
+0001ac90: 7465 7327 293a 206d 7379 6d3d 4279 7465  tes'): msym=Byte
+0001aca0: 7328 6d73 796d 290a 2020 2020 2020 2020  s(msym).        
+0001acb0: 2020 2020 2020 2020 656c 7365 3a20 6d73          else: ms
+0001acc0: 796d 3d53 7472 286d 7379 6d29 0a20 2020  ym=Str(msym).   
+0001acd0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001ace0: 7572 6e20 7265 2e73 706c 6974 286d 7379  urn re.split(msy
+0001acf0: 6d2c 7372 6329 2023 2073 706c 6974 6564  m,src) # splited
+0001ad00: 2062 7920 277c 2720 6f72 2065 7870 7265   by '|' or expre
+0001ad10: 7373 696f 6e0a 2020 2020 2020 2020 2020  ssion.          
+0001ad20: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
+0001ad30: 2020 2020 2020 2020 2020 7061 7373 0a20            pass. 
+0001ad40: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0001ad50: 2020 2020 2020 2020 2023 204e 6f72 6d61           # Norma
+0001ad60: 6c20 7370 6c69 740a 2020 2020 2020 2020  l split.        
+0001ad70: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+0001ad80: 2020 2020 2020 2020 2069 6620 5479 7065           if Type
+0001ad90: 2873 7263 2c27 6279 7465 7327 293a 2073  (src,'bytes'): s
+0001ada0: 796d 626f 6c3d 4279 7465 7328 7379 6d62  ymbol=Bytes(symb
+0001adb0: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
+0001adc0: 2020 2020 656c 7365 203a 2073 796d 626f      else : symbo
+0001add0: 6c3d 5374 7228 7379 6d62 6f6c 290a 2020  l=Str(symbol).  
+0001ade0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001adf0: 7475 726e 2073 7263 2e73 706c 6974 2873  turn src.split(s
+0001ae00: 796d 626f 6c29 0a20 2020 2020 2020 2020  ymbol).         
+0001ae10: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
+0001ae20: 2020 2020 2020 2020 2020 2070 6173 730a             pass.
+0001ae30: 2020 2020 6966 2064 6566 6175 6c74 2069      if default i
+0001ae40: 6e20 5b27 6f72 6727 2c7b 276f 7267 277d  n ['org',{'org'}
+0001ae50: 5d3a 0a20 2020 2020 2020 2069 6620 6c69  ]:.        if li
+0001ae60: 7374 6f6e 6c79 3a0a 2020 2020 2020 2020  stonly:.        
+0001ae70: 2020 2020 7265 7475 726e 205b 7372 635d      return [src]
+0001ae80: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0001ae90: 7372 630a 2020 2020 6966 206c 6973 746f  src.    if listo
+0001aea0: 6e6c 793a 0a20 2020 2020 2020 2069 6620  nly:.        if 
+0001aeb0: 6465 6661 756c 7420 3d3d 205b 5d3a 0a20  default == []:. 
+0001aec0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001aed0: 6e20 5b5d 0a20 2020 2020 2020 2072 6574  n [].        ret
+0001aee0: 7572 6e20 5b64 6566 6175 6c74 5d0a 2020  urn [default].  
+0001aef0: 2020 7265 7475 726e 2064 6566 6175 6c74    return default
+0001af00: 0a0a 6465 6620 466f 726d 4461 7461 282a  ..def FormData(*
+0001af10: 7372 632c 6465 6661 756c 743d 4e6f 6e65  src,default=None
+0001af20: 2c77 616e 745f 7479 7065 3d4e 6f6e 652c  ,want_type=None,
+0001af30: 6572 723d 4661 6c73 6529 3a0a 2020 2020  err=False):.    
+0001af40: 2727 270a 2020 2020 636f 6e76 6572 7420  '''.    convert 
+0001af50: 7374 7269 6e67 2064 6174 6120 746f 2066  string data to f
+0001af60: 6f72 6d61 740a 2020 2020 2731 2720 3d3e  ormat.    '1' =>
+0001af70: 2031 0a20 2020 206a 736f 6e20 7374 7269   1.    json stri
+0001af80: 6e67 2074 6f20 6a73 6f6e 2066 6f72 6d61  ng to json forma
+0001af90: 740a 2020 2020 227b 2761 273a 317d 2220  t.    "{'a':1}" 
+0001afa0: 3d3e 207b 2761 273a 317d 0a20 2020 2022  => {'a':1}.    "
+0001afb0: 5b31 2c32 2c33 5d22 203d 3e20 5b31 2c32  [1,2,3]" => [1,2
+0001afc0: 2c33 5d0a 2020 2020 2e2e 2e2e 0a20 2020  ,3].    .....   
+0001afd0: 2027 2727 0a20 2020 2065 633d 4661 6c73   '''.    ec=Fals
+0001afe0: 650a 2020 2020 615f 733d 2727 0a20 2020  e.    a_s=''.   
+0001aff0: 2069 6620 6c65 6e28 7372 6329 203e 2030   if len(src) > 0
+0001b000: 3a0a 2020 2020 2020 2020 666f 7220 6920  :.        for i 
+0001b010: 696e 2073 7263 3a0a 2020 2020 2020 2020  in src:.        
+0001b020: 2020 2020 615f 743d 5374 7228 692c 6465      a_t=Str(i,de
+0001b030: 6661 756c 743d 276f 7267 2729 0a20 2020  fault='org').   
+0001b040: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+0001b050: 7374 616e 6365 2861 5f74 2c73 7472 293a  stance(a_t,str):
+0001b060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b070: 2069 6620 615f 733a 0a20 2020 2020 2020   if a_s:.       
+0001b080: 2020 2020 2020 2020 2020 2020 2061 5f73               a_s
+0001b090: 3d61 5f73 2b27 2727 2027 2727 2b61 5f74  =a_s+''' '''+a_t
+0001b0a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b0b0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0001b0c0: 2020 2020 2020 2020 2020 2061 5f73 3d61             a_s=a
+0001b0d0: 5f74 0a20 2020 2020 2020 2020 2020 2065  _t.            e
+0001b0e0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001b0f0: 2020 2020 2065 633d 5472 7565 0a20 2020       ec=True.   
+0001b100: 2020 2020 2020 2020 2020 2020 2062 7265               bre
+0001b110: 616b 0a20 2020 2069 6620 6563 3a0a 2020  ak.    if ec:.  
+0001b120: 2020 2020 2020 6966 2065 7272 3a0a 2020        if err:.  
+0001b130: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001b140: 2046 616c 7365 0a20 2020 2020 2020 2069   False.        i
+0001b150: 6620 6c65 6e28 7372 6329 203d 3d20 313a  f len(src) == 1:
+0001b160: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0001b170: 7572 6e20 7372 635b 305d 0a20 2020 2020  urn src[0].     
+0001b180: 2020 2072 6574 7572 6e20 7372 630a 2020     return src.  
+0001b190: 2020 7372 633d 615f 730a 2020 2020 666f    src=a_s.    fo
+0001b1a0: 726d 5f73 7263 3d4e 6f6e 650a 2020 2020  rm_src=None.    
+0001b1b0: 6966 2069 7369 6e73 7461 6e63 6528 7372  if isinstance(sr
+0001b1c0: 632c 7374 7229 3a0a 2020 2020 2020 2020  c,str):.        
+0001b1d0: 6966 2054 7970 6528 7761 6e74 5f74 7970  if Type(want_typ
+0001b1e0: 652c 2773 7472 2729 3a20 7265 7475 726e  e,'str'): return
+0001b1f0: 2073 7263 0a20 2020 2020 2020 2074 7279   src.        try
+0001b200: 3a0a 2020 2020 2020 2020 2020 2020 666f  :.            fo
+0001b210: 726d 5f73 7263 3d61 7374 2e6c 6974 6572  rm_src=ast.liter
+0001b220: 616c 5f65 7661 6c28 7372 6329 0a20 2020  al_eval(src).   
+0001b230: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
+0001b240: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
+0001b250: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+0001b260: 726d 5f73 7263 3d6a 736f 6e2e 6c6f 6164  rm_src=json.load
+0001b270: 7328 7372 6329 0a20 2020 2020 2020 2020  s(src).         
+0001b280: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
+0001b290: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
+0001b2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b2b0: 2020 2020 666f 726d 5f73 7263 3d65 7661      form_src=eva
+0001b2c0: 6c28 7372 6329 0a20 2020 2020 2020 2020  l(src).         
+0001b2d0: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
+0001b2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b2f0: 2020 2072 6574 7572 6e20 4465 6661 756c     return Defaul
+0001b300: 7428 7372 632c 6465 6661 756c 7429 0a20  t(src,default). 
+0001b310: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0001b320: 2066 6f72 6d5f 7372 633d 7372 630a 2020   form_src=src.  
+0001b330: 2020 6966 2049 734e 6f6e 6528 7761 6e74    if IsNone(want
+0001b340: 5f74 7970 6529 3a0a 2020 2020 2020 2020  _type):.        
+0001b350: 7265 7475 726e 2066 6f72 6d5f 7372 630a  return form_src.
+0001b360: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0001b370: 2020 6966 2054 7970 6528 666f 726d 5f73    if Type(form_s
+0001b380: 7263 2c77 616e 745f 7479 7065 293a 2072  rc,want_type): r
+0001b390: 6574 7572 6e20 666f 726d 5f73 7263 0a20  eturn form_src. 
+0001b3a0: 2020 2020 2020 2072 6574 7572 6e20 4465         return De
+0001b3b0: 6661 756c 7428 7372 632c 6465 6661 756c  fault(src,defaul
+0001b3c0: 7429 0a0a 6465 6620 496e 6465 7846 6f72  t)..def IndexFor
+0001b3d0: 6d28 6964 782c 6964 785f 6f6e 6c79 3d46  m(idx,idx_only=F
+0001b3e0: 616c 7365 2c73 796d 626f 6c3d 4e6f 6e65  alse,symbol=None
+0001b3f0: 293a 0a20 2020 2027 2727 0a20 2020 2072  ):.    '''.    r
+0001b400: 6574 7572 6e20 3a20 3c54 7275 652f 4661  eturn : <True/Fa
+0001b410: 6c73 653e 2c20 496e 6465 7820 4461 7461  lse>, Index Data
+0001b420: 0a20 2020 2020 2d20 4661 6c73 653a 206e  .     - False: n
+0001b430: 6f74 2066 6f75 6e64 2049 6e64 6578 2066  ot found Index f
+0001b440: 6f72 6d20 6672 6f6d 2069 6e70 7574 2069  orm from input i
+0001b450: 6478 200a 2020 2020 202d 2054 7275 6520  dx .     - True 
+0001b460: 3a20 666f 756e 6420 496e 6465 780a 2020  : found Index.  
+0001b470: 2020 496e 6465 7820 4461 7461 0a20 2020    Index Data.   
+0001b480: 2020 2d20 7475 706c 6528 412c 4229 203a    - tuple(A,B) :
+0001b490: 2052 616e 6765 2049 6e64 6578 2028 417e   Range Index (A~
+0001b4a0: 4229 0a20 2020 2020 2d20 6c69 7374 205b  B).     - list [
+0001b4b0: 412c 425d 203a 204f 5220 496e 6465 7820  A,B] : OR Index 
+0001b4c0: 6f72 206b 6579 7320 4120 6f72 2042 0a20  or keys A or B. 
+0001b4d0: 2020 2020 2d20 5369 6e67 6c65 2020 2020      - Single    
+0001b4e0: 203a 2069 6e74 3a20 496e 6465 782c 206f   : int: Index, o
+0001b4f0: 7468 6572 733a 206b 6579 0a20 2020 202d  thers: key.    -
+0001b500: 2069 6478 5f6f 6e6c 7920 2020 203a 206f   idx_only    : o
+0001b510: 6e6c 7920 7265 7475 726e 2069 6e74 6567  nly return integ
+0001b520: 6572 2069 6e64 6578 0a20 2020 202d 2073  er index.    - s
+0001b530: 796d 626f 6c20 2020 3a20 6465 6661 756c  ymbol   : defaul
+0001b540: 7420 4e6f 6e65 2c20 6966 2069 6478 2069  t None, if idx i
+0001b550: 7320 7374 7269 6e67 2061 6e64 2077 616e  s string and wan
+0001b560: 7420 7370 6c69 7420 7769 7468 2073 796d  t split with sym
+0001b570: 626f 6c0a 2020 2020 2727 270a 2020 2020  bol.    '''.    
+0001b580: 6966 2049 734e 6f6e 6528 6964 7829 3a0a  if IsNone(idx):.
+0001b590: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+0001b5a0: 616c 7365 2c4e 6f6e 650a 2020 2020 656c  alse,None.    el
+0001b5b0: 6966 2069 7369 6e73 7461 6e63 6528 6964  if isinstance(id
+0001b5c0: 782c 7374 7229 3a0a 2020 2020 2020 2020  x,str):.        
+0001b5d0: 666f 7220 7320 696e 205b 273a 272c 272d  for s in [':','-
+0001b5e0: 272c 277e 275d 3a20 2320 5261 6e67 6520  ','~']: # Range 
+0001b5f0: 496e 6465 780a 2020 2020 2020 2020 2020  Index.          
+0001b600: 2020 6966 2073 2069 6e20 6964 783a 0a20    if s in idx:. 
+0001b610: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001b620: 6478 5f61 3d69 6478 2e73 706c 6974 2873  dx_a=idx.split(s
+0001b630: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001b640: 2020 6966 206c 656e 2869 6478 5f61 2920    if len(idx_a) 
+0001b650: 3d3d 2032 3a0a 2020 2020 2020 2020 2020  == 2:.          
+0001b660: 2020 2020 2020 2020 2020 7373 3d49 6e74            ss=Int
+0001b670: 2869 6478 5f61 5b30 5d29 2069 6620 4973  (idx_a[0]) if Is
+0001b680: 496e 7428 6964 785f 615b 305d 2920 656c  Int(idx_a[0]) el
+0001b690: 7365 2030 0a20 2020 2020 2020 2020 2020  se 0.           
+0001b6a0: 2020 2020 2020 2020 2065 653d 496e 7428           ee=Int(
+0001b6b0: 6964 785f 615b 315d 2920 6966 2049 7349  idx_a[1]) if IsI
+0001b6c0: 6e74 2869 6478 5f61 5b31 5d29 2065 6c73  nt(idx_a[1]) els
+0001b6d0: 6520 2d31 0a20 2020 2020 2020 2020 2020  e -1.           
+0001b6e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001b6f0: 5472 7565 2c28 7373 2c65 6529 0a20 2020  True,(ss,ee).   
+0001b700: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001b710: 7572 6e20 4661 6c73 652c 4e6f 6e65 0a20  urn False,None. 
+0001b720: 2020 2020 2020 2069 6620 277c 2720 696e         if '|' in
+0001b730: 2069 6478 3a20 2320 4f52 2049 6e64 6578   idx: # OR Index
+0001b740: 0a20 2020 2020 2020 2020 2020 2069 6478  .            idx
+0001b750: 5f61 3d69 6478 2e73 706c 6974 2827 7c27  _a=idx.split('|'
+0001b760: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+0001b770: 2069 6478 5f6f 6e6c 793a 0a20 2020 2020   idx_only:.     
+0001b780: 2020 2020 2020 2020 2020 2072 743d 5b5d             rt=[]
+0001b790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b7a0: 2066 6f72 2069 2069 6e20 6964 785f 613a   for i in idx_a:
+0001b7b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b7c0: 2020 2020 2069 6620 4973 496e 7428 6929       if IsInt(i)
+0001b7d0: 3a20 7274 2e61 7070 656e 6428 496e 7428  : rt.append(Int(
+0001b7e0: 6929 290a 2020 2020 2020 2020 2020 2020  i)).            
+0001b7f0: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
+0001b800: 7274 0a20 2020 2020 2020 2020 2020 2072  rt.            r
+0001b810: 6574 7572 6e20 5472 7565 2c69 6478 2e73  eturn True,idx.s
+0001b820: 706c 6974 2827 7c27 290a 2020 2020 2020  plit('|').      
+0001b830: 2020 656c 6966 2027 2f27 2069 6e20 6964    elif '/' in id
+0001b840: 783a 2023 2050 6174 6820 696e 6465 780a  x: # Path index.
+0001b850: 2020 2020 2020 2020 2020 2020 6964 785f              idx_
+0001b860: 613d 6964 782e 7370 6c69 7428 272f 2729  a=idx.split('/')
+0001b870: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001b880: 6964 785f 615b 305d 203d 3d20 2727 3a0a  idx_a[0] == '':.
+0001b890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b8a0: 7265 7475 726e 204e 6f6e 652c 6964 785f  return None,idx_
+0001b8b0: 615b 313a 5d0a 2020 2020 2020 2020 2020  a[1:].          
+0001b8c0: 2020 7265 7475 726e 204e 6f6e 652c 6964    return None,id
+0001b8d0: 785f 610a 2020 2020 2020 2020 656c 7365  x_a.        else
+0001b8e0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+0001b8f0: 2069 6478 5f6f 6e6c 793a 0a20 2020 2020   idx_only:.     
+0001b900: 2020 2020 2020 2020 2020 2069 6620 7379             if sy
+0001b910: 6d62 6f6c 3a0a 2020 2020 2020 2020 2020  mbol:.          
+0001b920: 2020 2020 2020 2020 2020 6964 7873 3d69            idxs=i
+0001b930: 6478 2e73 706c 6974 2873 796d 626f 6c29  dx.split(symbol)
 0001b940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b950: 2072 6574 7572 6e20 4661 6c73 652c 4e6f   return False,No
-0001b960: 6e65 0a20 2020 2065 6c69 6620 6973 696e  ne.    elif isin
-0001b970: 7374 616e 6365 2869 6478 2c6c 6973 7429  stance(idx,list)
-0001b980: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-0001b990: 2054 7275 652c 6964 780a 2020 2020 656c   True,idx.    el
-0001b9a0: 6966 2069 7369 6e73 7461 6e63 6528 6964  if isinstance(id
-0001b9b0: 782c 7475 706c 6529 2061 6e64 206c 656e  x,tuple) and len
-0001b9c0: 2869 6478 2920 3d3d 2032 3a0a 2020 2020  (idx) == 2:.    
-0001b9d0: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
-0001b9e0: 6964 780a 2020 2020 7265 7475 726e 2054  idx.    return T
-0001b9f0: 7275 652c 6964 7820 2320 5265 7475 726e  rue,idx # Return
-0001ba00: 206f 7269 6769 6e61 6c0a 0a64 6566 2047   original..def G
-0001ba10: 6574 282a 696e 7073 2c2a 2a6f 7074 7329  et(*inps,**opts)
-0001ba20: 3a0a 2020 2020 2727 270a 2020 2020 4765  :.    '''.    Ge
-0001ba30: 7420 2841 6e79 2920 736f 6d65 7468 696e  t (Any) somethin
-0001ba40: 670a 2020 2020 4765 7428 2777 686f 616d  g.    Get('whoam
-0001ba50: 6927 2920 203a 2072 6574 7572 6e20 6d79  i')  : return my
-0001ba60: 2066 756e 6374 696f 6e20 6e61 6d65 0a20   function name. 
-0001ba70: 2020 2047 6574 2827 6675 6e63 6c69 7374     Get('funclist
-0001ba80: 2729 3a20 7265 7475 726e 206d 7920 6d6f  '): return my mo
-0001ba90: 6475 6c65 2773 2066 756e 6374 696f 6e20  dule's function 
-0001baa0: 6c69 7374 0a20 2020 2020 2d20 7061 7265  list.     - pare
-0001bab0: 6e74 3d31 2020 2020 3a20 6d79 2070 6172  nt=1    : my par
-0001bac0: 656e 7427 7320 6675 6e63 7469 6f6e 206c  ent's function l
-0001bad0: 6973 740a 2020 2020 4765 7428 3c6c 6973  ist.    Get(<lis
-0001bae0: 747c 7374 7269 6e67 7c64 6963 747c 696e  t|string|dict|in
-0001baf0: 747c 2e2e 2e3e 2c3c 696e 6465 787c 6b65  t|...>,<index|ke
-0001bb00: 797c 6b65 7970 6174 683e 293a 2047 6574  y|keypath>): Get
-0001bb10: 2064 6174 6120 6174 2074 6865 203c 696e   data at the <in
-0001bb20: 6465 787c 6b65 797c 6b65 7970 6174 683e  dex|key|keypath>
-0001bb30: 0a20 2020 2020 2d20 6b65 7970 6174 6820  .     - keypath 
-0001bb40: 3a20 272f 612f 622f 6327 203d 3e20 7b27  : '/a/b/c' => {'
-0001bb50: 6127 3a7b 2762 273a 7b27 6327 3a31 2c27  a':{'b':{'c':1,'
-0001bb60: 6427 7d7d 7d20 3d3e 2072 6574 7572 6e20  d'}}} => return 
-0001bb70: 6327 7320 310a 2020 2020 202d 206b 6579  c's 1.     - key
-0001bb80: 2020 2020 203a 0a20 2020 2020 2020 5261       :.       Ra
-0001bb90: 6e67 6520 466f 726d 6174 2066 726f 6d20  nge Format from 
-0001bba0: 3120 746f 2035 3a20 7475 706c 6520 666f  1 to 5: tuple fo
-0001bbb0: 726d 6174 2028 312c 3529 2c20 5374 7269  rmat (1,5), Stri
-0001bbc0: 6e67 2066 6f72 6d61 7420 2731 2d35 2720  ng format '1-5' 
-0001bbd0: 6f72 2027 313a 3527 206f 7220 2731 7e35  or '1:5' or '1~5
-0001bbe0: 270a 2020 2020 2020 204f 5220 6461 7461  '.       OR data
-0001bbf0: 2031 2c33 2c35 2020 2020 2020 2020 2020   1,3,5          
-0001bc00: 203a 206c 6973 7420 666f 726d 6174 2020   : list format  
-0001bc10: 5b31 2c33 2c35 5d2c 2053 7472 696e 6720  [1,3,5], String 
-0001bc20: 666f 726d 6174 2027 317c 337c 3527 0a20  format '1|3|5'. 
-0001bc30: 2020 2020 2020 2020 2d20 6966 2066 6f75          - if fou
-0001bc40: 6e64 2061 6e79 2064 6174 6120 7468 656e  nd any data then
-0001bc50: 2067 6574 7469 6e67 2074 6861 7420 6461   getting that da
-0001bc60: 7461 206f 6e6c 790a 2020 2020 2020 2020  ta only.        
-0001bc70: 202d 2069 6620 7573 6520 6669 6c6c 5f75   - if use fill_u
-0001bc80: 7020 6f70 7469 6f6e 2074 6865 6e20 6966  p option then if
-0001bc90: 2065 7272 6f72 206f 6620 6120 6b65 7920   error of a key 
-0001bca0: 7468 656e 2066 696c 6c20 746f 203c 6669  then fill to <fi
-0001bcb0: 6c6c 5f75 703e 2076 616c 7565 2061 7420  ll_up> value at 
-0001bcc0: 7468 6520 6572 726f 7220 6c6f 6361 7469  the error locati
-0001bcd0: 6f6e 2e0a 2020 2020 202d 2069 6e64 6578  on..     - index
-0001bce0: 2020 203a 2069 6e74 6567 6572 2020 2020     : integer    
-0001bcf0: 2020 203a 2073 696e 676c 6520 6461 7461     : single data
-0001bd00: 0a20 2020 2047 6574 2827 5f74 6869 735f  .    Get('_this_
-0001bd10: 272c 3c6b 6579 3e29 3a20 6d79 2066 756e  ',<key>): my fun
-0001bd20: 6374 696f 6e73 2773 203c 6b65 793e 0a20  ctions's <key>. 
-0001bd30: 2020 2047 6574 2827 3c76 6172 206e 616d     Get('<var nam
-0001bd40: 653e 2729 2020 3a20 7265 7475 726e 2076  e>')  : return v
-0001bd50: 6172 6961 626c 6520 6461 7461 0a20 2020  ariable data.   
-0001bd60: 2047 6574 2827 5f74 6869 735f 272c 2761   Get('_this_','a
-0001bd70: 7267 7327 2920 203a 2072 6574 7572 6e20  rgs')  : return 
-0001bd80: 6d79 2066 756e 6374 696f 6e73 2041 7267  my functions Arg
-0001bd90: 756d 656e 7473 0a20 2020 2047 6574 283c  uments.    Get(<
-0001bda0: 6675 6e63 7469 6f6e 3e2c 2761 7267 7327  function>,'args'
-0001bdb0: 2920 203a 2072 6574 7572 6e20 7468 6520  )  : return the 
-0001bdc0: 6675 6e63 7469 6f6e 7320 4172 6775 6d65  functions Argume
-0001bdd0: 6e74 730a 2020 2020 3c6f 7074 696f 6e3e  nts.    <option>
-0001bde0: 0a20 2020 2020 2066 696c 6c5f 7570 203a  .      fill_up :
-0001bdf0: 2049 6620 6572 726f 7220 6f66 2074 6865   If error of the
-0001be00: 206b 6579 2773 2076 616c 7565 2074 6865   key's value the
-0001be10: 6e20 6669 6c6c 2075 7020 3c66 696c 6c5f  n fill up <fill_
-0001be20: 7570 3e20 746f 2072 6967 6874 2070 6f73  up> to right pos
-0001be30: 6974 696f 6e20 7768 656e 2074 6865 203c  ition when the <
-0001be40: 6b65 793e 2069 7320 6c69 7374 0a20 2020  key> is list.   
-0001be50: 2020 2064 6566 6175 6c74 203a 204e 6f6e     default : Non
-0001be60: 652c 2061 6e79 2069 7373 7565 0a20 2020  e, any issue.   
-0001be70: 2020 2065 7272 2020 2020 203a 2046 616c     err     : Fal
-0001be80: 7365 2c20 6966 2061 6e79 2065 7272 6f72  se, if any error
-0001be90: 2074 6865 6e20 6967 6e6f 7265 2074 6865   then ignore the
-0001bea0: 2064 6174 610a 2020 2020 2020 6964 785f   data.      idx_
-0001beb0: 6f6e 6c79 3a20 6966 2069 6e70 7574 2064  only: if input d
-0001bec0: 6174 6120 6973 2064 6963 7469 6f6e 6172  ata is dictionar
-0001bed0: 7920 7468 656e 2063 6f6e 7665 7274 2064  y then convert d
-0001bee0: 6963 7469 6f6e 6172 7927 7320 6b65 7973  ictionary's keys
-0001bef0: 2074 6f20 696e 7075 7420 6461 7461 2e20   to input data. 
-0001bf00: 536f 2c20 696e 7420 6964 7820 6361 6e20  So, int idx can 
-0001bf10: 6765 7420 6b65 7973 286c 6973 7429 206e  get keys(list) n
-0001bf20: 616d 650a 2020 2020 2020 5f74 7970 655f  ame.      _type_
-0001bf30: 2020 3a20 6465 6669 6e65 2074 6f20 696e    : define to in
-0001bf40: 7075 7420 6461 7461 2773 2064 6174 6120  put data's data 
-0001bf50: 666f 726d 6174 2028 6578 3a20 286c 6973  format (ex: (lis
-0001bf60: 742c 7475 706c 6529 290a 2020 2020 2020  t,tuple)).      
-0001bf70: 6d65 7468 6f64 2020 3a20 6966 2069 6e70  method  : if inp
-0001bf80: 7574 2069 7320 7265 7175 6573 7420 7468  ut is request th
-0001bf90: 656e 2063 616e 2064 6566 696e 6520 6d65  en can define me
-0001bfa0: 7468 6f64 2827 4745 5427 2c27 504f 5354  thod('GET','POST
-0001bfb0: 272c 2e2e 2e29 0a20 2020 2020 2073 7472  ',...).      str
-0001bfc0: 6970 2020 203a 2064 6566 6175 6c74 3a20  ip   : default: 
-0001bfd0: 4661 6c73 652c 2069 7420 6361 6e20 7374  False, it can st
-0001bfe0: 7269 7020 7768 6974 6520 7370 6163 650a  rip white space.
-0001bff0: 2020 2020 2020 7065 656c 2020 2020 3a20        peel    : 
-0001c000: 0a20 2020 2020 2020 2020 2066 6f72 6365  .          force
-0001c010: 3a20 6a75 7374 2074 616b 6520 6669 7273  : just take firs
-0001c020: 7420 6461 7461 2069 6e20 7468 6520 6c69  t data in the li
-0001c030: 7374 2c74 7570 6c65 2028 6966 2064 6174  st,tuple (if dat
-0001c040: 6120 666f 726d 6174 2068 6173 2061 6e79  a format has any
-0001c050: 2066 6f72 6d20 616c 736f 204f 4b2c 206a   form also OK, j
-0001c060: 7573 7420 7265 7475 726e 2074 6865 2064  ust return the d
-0001c070: 6174 6129 0a20 2020 2020 2020 2020 2054  ata).          T
-0001c080: 7275 6520 3a20 7369 6e67 6c65 2064 6174  rue : single dat
-0001c090: 6128 6c69 7374 2c74 7570 6c65 2c64 6963  a(list,tuple,dic
-0001c0a0: 7429 2074 6865 6e20 7065 656c 2074 6f20  t) then peel to 
-0001c0b0: 6461 7461 2028 6966 2064 6174 6120 666f  data (if data fo
-0001c0c0: 726d 6174 2069 7320 6c69 7374 2c74 7570  rmat is list,tup
-0001c0d0: 6c65 2c64 6963 742e 2e2e 2074 6865 6e20  le,dict... then 
-0001c0e0: 7265 7475 726e 2064 6566 6175 6c74 290a  return default).
-0001c0f0: 2020 2020 2020 2020 2020 4661 6c73 653a            False:
-0001c100: 2072 6574 7572 6e20 666f 756e 6465 6420   return founded 
-0001c110: 6461 7461 2028 616e 7920 666f 726d 6174  data (any format
-0001c120: 290a 2020 2020 2020 6f75 7420 2020 2020  ).      out     
-0001c130: 3a20 6465 6669 6e65 2074 6f20 6f75 7470  : define to outp
-0001c140: 7574 2064 6174 6120 286c 6973 742d 3e20  ut data (list-> 
-0001c150: 6f75 7470 7574 2077 696c 6c20 6c69 7374  output will list
-0001c160: 2c20 2e2e 2e29 2c20 6966 2077 726f 6e67  , ...), if wrong
-0001c170: 2066 6f72 6d61 7420 7468 656e 2072 6574   format then ret
-0001c180: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
-0001c190: 2727 270a 2020 2020 6465 6661 756c 743d  '''.    default=
-0001c1a0: 6f70 7473 2e67 6574 2827 6465 6661 756c  opts.get('defaul
-0001c1b0: 7427 290a 2020 2020 6572 723d 6f70 7473  t').    err=opts
-0001c1c0: 2e67 6574 2827 6572 7227 2c6f 7074 732e  .get('err',opts.
-0001c1d0: 6765 7428 2765 7272 6f72 272c 4661 6c73  get('error',Fals
-0001c1e0: 6529 290a 2020 2020 6669 6c6c 5f75 703d  e)).    fill_up=
-0001c1f0: 6f70 7473 2e67 6574 2827 6669 6c6c 5f75  opts.get('fill_u
-0001c200: 7027 2c27 5f66 416c 7345 5f27 290a 2020  p','_fAlsE_').  
-0001c210: 2020 6964 785f 6f6e 6c79 3d6f 7074 732e    idx_only=opts.
-0001c220: 6765 7428 2769 6478 5f6f 6e6c 7927 2c6f  get('idx_only',o
-0001c230: 7074 732e 6765 7428 2769 6e64 6578 5f6f  pts.get('index_o
-0001c240: 6e6c 7927 2c46 616c 7365 2929 0a20 2020  nly',False)).   
-0001c250: 205f 7479 7065 3d6f 7074 732e 6765 7428   _type=opts.get(
-0001c260: 275f 7479 7065 5f27 2c6f 7074 732e 6765  '_type_',opts.ge
-0001c270: 7428 2774 7970 6527 2929 0a20 2020 206f  t('type')).    o
-0001c280: 7574 3d6f 7074 732e 6765 7428 276f 7574  ut=opts.get('out
-0001c290: 272c 6f70 7473 2e67 6574 2827 6f75 745f  ',opts.get('out_
-0001c2a0: 666f 726d 272c 2772 6177 2729 290a 2020  form','raw')).  
-0001c2b0: 2020 7065 656c 3d6f 7074 732e 6765 7428    peel=opts.get(
-0001c2c0: 2770 6565 6c27 290a 2020 2020 7374 7269  'peel').    stri
-0001c2d0: 703d 6f70 7473 2e67 6574 2827 7374 7269  p=opts.get('stri
-0001c2e0: 7027 2c46 616c 7365 290a 0a20 2020 2069  p',False)..    i
-0001c2f0: 6620 6c65 6e28 696e 7073 2920 3d3d 2030  f len(inps) == 0
-0001c300: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-0001c310: 2044 6566 6175 6c74 2869 6e70 732c 6465   Default(inps,de
-0001c320: 6661 756c 7429 0a20 2020 2069 6620 6c65  fault).    if le
-0001c330: 6e28 696e 7073 2920 3d3d 2031 3a0a 2020  n(inps) == 1:.  
-0001c340: 2020 2020 2020 6966 2069 6e70 735b 305d        if inps[0]
-0001c350: 2069 6e20 5b27 7768 6f61 6d69 272c 276d   in ['whoami','m
-0001c360: 796e 616d 6527 2c27 6675 6e63 6e61 6d65  yname','funcname
-0001c370: 272c 2766 756e 6374 696f 6e6e 616d 6527  ','functionname'
-0001c380: 2c27 4675 6e63 7469 6f6e 4e61 6d65 275d  ,'FunctionName']
-0001c390: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0001c3a0: 7475 726e 2046 756e 6374 696f 6e4e 616d  turn FunctionNam
-0001c3b0: 6528 7061 7265 6e74 3d6f 7074 732e 6765  e(parent=opts.ge
-0001c3c0: 7428 2770 6172 656e 7427 2c31 2929 2023  t('parent',1)) #
-0001c3d0: 206d 7920 7061 7265 6e74 2773 2066 756e   my parent's fun
-0001c3e0: 6374 696f 6e20 6e61 6d65 0a20 2020 2020  ction name.     
-0001c3f0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-0001c400: 6365 2869 6e70 735b 305d 2c73 7472 293a  ce(inps[0],str):
-0001c410: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001c420: 696e 7073 5b30 5d2e 6c6f 7765 7228 2920  inps[0].lower() 
-0001c430: 696e 205b 2766 756e 6327 2c27 6675 6e63  in ['func','func
-0001c440: 7469 6f6e 272c 2766 756e 6374 696f 6e73  tion','functions
-0001c450: 272c 2766 756e 636c 6973 7427 2c27 6675  ','funclist','fu
-0001c460: 6e63 5f6c 6973 7427 2c27 6c69 7374 275d  nc_list','list']
-0001c470: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001c480: 2020 7265 7475 726e 2046 756e 6374 696f    return Functio
-0001c490: 6e4c 6973 7428 7061 7265 6e74 3d6f 7074  nList(parent=opt
-0001c4a0: 732e 6765 7428 2770 6172 656e 7427 2c2d  s.get('parent',-
-0001c4b0: 3129 2920 2320 6465 6661 756c 743a 206d  1)) # default: m
-0001c4c0: 7920 7061 6765 2773 2066 756e 6374 696f  y page's functio
-0001c4d0: 6e20 6c69 7374 0a20 2020 2020 2020 2020  n list.         
-0001c4e0: 2020 2072 6574 7572 6e20 5661 7269 6162     return Variab
-0001c4f0: 6c65 2869 6e70 735b 305d 2c70 6172 656e  le(inps[0],paren
-0001c500: 743d 6f70 7473 2e67 6574 2827 7061 7265  t=opts.get('pare
-0001c510: 6e74 272c 3129 2920 2320 6d79 2070 6172  nt',1)) # my par
-0001c520: 656e 7427 7320 7661 7269 6162 6c65 0a20  ent's variable. 
-0001c530: 2020 2069 6e70 733d 6c69 7374 2869 6e70     inps=list(inp
-0001c540: 7329 0a20 2020 206f 626a 3d69 6e70 735b  s).    obj=inps[
-0001c550: 305d 0a20 2020 2069 6620 4973 4e6f 6e65  0].    if IsNone
-0001c560: 286f 626a 293a 0a20 2020 2020 2020 2072  (obj):.        r
-0001c570: 6574 7572 6e20 4465 6661 756c 7428 6f62  eturn Default(ob
-0001c580: 6a2c 6465 6661 756c 7429 0a20 2020 2064  j,default).    d
-0001c590: 656c 2069 6e70 735b 305d 0a20 2020 2069  el inps[0].    i
-0001c5a0: 6620 6c65 6e28 696e 7073 2920 3d3d 2031  f len(inps) == 1
-0001c5b0: 3a0a 2020 2020 2020 2020 6964 783d 696e  :.        idx=in
-0001c5c0: 7073 5b30 5d0a 2020 2020 656c 6966 206c  ps[0].    elif l
-0001c5d0: 656e 2869 6e70 7329 203e 2031 3a0a 2020  en(inps) > 1:.  
-0001c5e0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0001c5f0: 6e63 6528 6f62 6a2c 286c 6973 742c 7475  nce(obj,(list,tu
-0001c600: 706c 6529 2920 616e 6420 6e6f 7420 6973  ple)) and not is
-0001c610: 696e 7374 616e 6365 2869 6e70 735b 2d31  instance(inps[-1
-0001c620: 5d2c 696e 7429 2061 6e64 2027 6465 6661  ],int) and 'defa
-0001c630: 756c 7427 206e 6f74 2069 6e20 6f70 7473  ult' not in opts
-0001c640: 3a0a 2020 2020 2020 2020 2020 2020 6964  :.            id
-0001c650: 783d 696e 7073 5b3a 2d31 5d0a 2020 2020  x=inps[:-1].    
-0001c660: 2020 2020 2020 2020 6465 6661 756c 743d          default=
-0001c670: 696e 7073 5b2d 315d 0a20 2020 2020 2020  inps[-1].       
-0001c680: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0001c690: 2020 2069 6478 3d69 6e70 735b 3a5d 0a20     idx=inps[:]. 
-0001c6a0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0001c6b0: 2069 6478 3d4e 6f6e 650a 2020 2020 2357   idx=None.    #W
-0001c6c0: 6865 6e20 6368 6563 6b20 7479 7065 0a20  hen check type. 
-0001c6d0: 2020 2069 6620 5f74 7970 6520 6973 206e     if _type is n
-0001c6e0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0001c6f0: 2069 6620 6e6f 7420 5479 7065 286f 626a   if not Type(obj
-0001c700: 2c5f 7479 7065 293a 0a20 2020 2020 2020  ,_type):.       
-0001c710: 2020 2020 2072 6574 7572 6e20 4465 6661       return Defa
-0001c720: 756c 7428 6f62 6a2c 6465 6661 756c 7429  ult(obj,default)
-0001c730: 0a20 2020 206f 6b2c 6e69 6478 3d49 6e64  .    ok,nidx=Ind
-0001c740: 6578 466f 726d 2869 6478 2c69 6478 5f6f  exForm(idx,idx_o
-0001c750: 6e6c 793d 6964 785f 6f6e 6c79 290a 2020  nly=idx_only).  
-0001c760: 2020 6964 785f 7479 7065 3d74 7970 6528    idx_type=type(
-0001c770: 6e69 6478 292e 5f5f 6e61 6d65 5f5f 0a20  nidx).__name__. 
-0001c780: 2020 2069 6620 6f62 6a20 3d3d 2027 5f74     if obj == '_t
-0001c790: 6869 735f 273a 0a20 2020 2020 2020 206f  his_':.        o
-0001c7a0: 626a 5f74 7970 653d 2766 756e 6374 696f  bj_type='functio
-0001c7b0: 6e27 0a20 2020 2065 6c73 653a 0a20 2020  n'.    else:.   
-0001c7c0: 2020 2020 206f 626a 5f74 7970 653d 5479       obj_type=Ty
-0001c7d0: 7065 4e61 6d65 286f 626a 290a 2020 2020  peName(obj).    
-0001c7e0: 2020 2020 0a20 2020 2069 6620 6f6b 2061      .    if ok a
-0001c7f0: 6e64 206f 626a 5f74 7970 6520 696e 2028  nd obj_type in (
-0001c800: 276c 6973 7427 2c27 7475 706c 6527 2c27  'list','tuple','
-0001c810: 7374 7227 2c27 6279 7465 7327 293a 0a20  str','bytes'):. 
-0001c820: 2020 2020 2020 2069 6620 6964 785f 7479         if idx_ty
-0001c830: 7065 203d 3d20 2774 7570 6c65 273a 0a20  pe == 'tuple':. 
-0001c840: 2020 2020 2020 2020 2020 2073 733d 5f6f             ss=_o
-0001c850: 626a 5f6d 6178 5f69 6478 5f28 6f62 6a2c  bj_max_idx_(obj,
-0001c860: 496e 7428 6e69 6478 5b30 5d29 2c65 7272  Int(nidx[0]),err
-0001c870: 290a 2020 2020 2020 2020 2020 2020 6565  ).            ee
-0001c880: 3d5f 6f62 6a5f 6d61 785f 6964 785f 286f  =_obj_max_idx_(o
-0001c890: 626a 2c49 6e74 286e 6964 785b 315d 292c  bj,Int(nidx[1]),
-0001c8a0: 6572 7229 0a20 2020 2020 2020 2020 2020  err).           
-0001c8b0: 2069 6620 5479 7065 2873 732c 696e 7429   if Type(ss,int)
-0001c8c0: 2061 6e64 2054 7970 6528 6565 2c69 6e74   and Type(ee,int
-0001c8d0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0001c8e0: 2020 2072 6574 7572 6e20 6f62 6a5b 7373     return obj[ss
-0001c8f0: 3a65 652b 315d 0a20 2020 2020 2020 2065  :ee+1].        e
-0001c900: 6c69 6620 6964 785f 7479 7065 203d 3d20  lif idx_type == 
-0001c910: 276c 6973 7427 3a0a 2020 2020 2020 2020  'list':.        
-0001c920: 2020 2020 7274 3d5b 5d0a 2020 2020 2020      rt=[].      
-0001c930: 2020 2020 2020 666f 7220 6920 696e 206e        for i in n
-0001c940: 6964 783a 0a20 2020 2020 2020 2020 2020  idx:.           
-0001c950: 2020 2020 2069 783d 5f6f 626a 5f6d 6178       ix=_obj_max
-0001c960: 5f69 6478 5f28 6f62 6a2c 496e 7428 692c  _idx_(obj,Int(i,
-0001c970: 6465 6661 756c 743d 4661 6c73 652c 6572  default=False,er
-0001c980: 723d 5472 7565 292c 6572 7229 0a20 2020  r=True),err).   
-0001c990: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001c9a0: 5479 7065 2869 782c 696e 7429 3a0a 2020  Type(ix,int):.  
-0001c9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c9c0: 2020 7274 2e61 7070 656e 6428 6f62 6a5b    rt.append(obj[
-0001c9d0: 6978 5d29 0a20 2020 2020 2020 2020 2020  ix]).           
-0001c9e0: 2020 2020 2065 6c69 6620 6669 6c6c 5f75       elif fill_u
-0001c9f0: 7020 213d 2027 5f66 416c 7345 5f27 3a0a  p != '_fAlsE_':.
-0001ca00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ca10: 2020 2020 7274 2e61 7070 656e 6428 6669      rt.append(fi
-0001ca20: 6c6c 5f75 7029 0a20 2020 2020 2020 2020  ll_up).         
-0001ca30: 2020 2072 6574 7572 6e20 4f75 7446 6f72     return OutFor
-0001ca40: 6d61 7428 7274 2c6f 7574 3d6f 7574 2c64  mat(rt,out=out,d
-0001ca50: 6566 6175 6c74 3d64 6566 6175 6c74 2c6f  efault=default,o
-0001ca60: 7267 3d6f 626a 2c70 6565 6c3d 7065 656c  rg=obj,peel=peel
-0001ca70: 2c73 7472 6970 3d73 7472 6970 290a 2020  ,strip=strip).  
-0001ca80: 2020 2020 2020 656c 6966 2069 6478 5f74        elif idx_t
-0001ca90: 7970 6520 3d3d 2027 696e 7427 3a0a 2020  ype == 'int':.  
-0001caa0: 2020 2020 2020 2020 2020 6978 3d5f 6f62            ix=_ob
-0001cab0: 6a5f 6d61 785f 6964 785f 286f 626a 2c6e  j_max_idx_(obj,n
-0001cac0: 6964 782c 6572 7229 0a20 2020 2020 2020  idx,err).       
-0001cad0: 2020 2020 2069 6620 5479 7065 2869 782c       if Type(ix,
-0001cae0: 696e 7429 3a20 7265 7475 726e 206f 626a  int): return obj
-0001caf0: 5b69 785d 0a20 2020 2020 2020 2069 6620  [ix].        if 
-0001cb00: 6964 7820 696e 2064 6972 286f 626a 293a  idx in dir(obj):
-0001cb10: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0001cb20: 7572 6e20 6f62 6a2e 5f5f 6469 6374 5f5f  urn obj.__dict__
-0001cb30: 2e67 6574 2869 6478 290a 2020 2020 2020  .get(idx).      
-0001cb40: 2020 7265 7475 726e 2044 6566 6175 6c74    return Default
-0001cb50: 286f 626a 2c64 6566 6175 6c74 290a 2020  (obj,default).  
-0001cb60: 2020 656c 6966 206f 626a 5f74 7970 6520    elif obj_type 
-0001cb70: 696e 2028 2764 6963 7427 293a 0a20 2020  in ('dict'):.   
-0001cb80: 2020 2020 2072 6574 7572 6e20 4449 4354       return DICT
-0001cb90: 286f 626a 292e 4765 7428 6964 782c 2a2a  (obj).Get(idx,**
-0001cba0: 6f70 7473 290a 2020 2020 656c 6966 206f  opts).    elif o
-0001cbb0: 626a 5f74 7970 6520 696e 2028 2766 756e  bj_type in ('fun
-0001cbc0: 6374 696f 6e27 293a 2023 3f3f 3f0a 2020  ction'): #???.  
-0001cbd0: 2020 2020 2020 6966 206f 6b3a 0a20 2020        if ok:.   
-0001cbe0: 2020 2020 2020 2020 2069 6620 6964 785f           if idx_
-0001cbf0: 7479 7065 203d 3d20 2773 7472 273a 0a20  type == 'str':. 
-0001cc00: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001cc10: 6620 6e69 6478 2e6c 6f77 6572 2829 2069  f nidx.lower() i
-0001cc20: 6e20 5b27 6172 6773 272c 2761 7267 756d  n ['args','argum
-0001cc30: 656e 7473 275d 3a0a 2020 2020 2020 2020  ents']:.        
-0001cc40: 2020 2020 2020 2020 2020 2020 6966 206f              if o
-0001cc50: 626a 203d 3d20 275f 7468 6973 5f27 3a0a  bj == '_this_':.
-0001cc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cc70: 2020 2020 2020 2020 6f62 6a3d 696e 7370          obj=insp
-0001cc80: 6563 742e 6765 746d 656d 6265 7273 284d  ect.getmembers(M
-0001cc90: 794d 6f64 756c 6528 2929 2e67 6574 2843  yModule()).get(C
-0001cca0: 616c 6c65 724e 616d 6528 2929 0a20 2020  allerName()).   
-0001ccb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ccc0: 2072 6574 7572 6e20 4675 6e63 7469 6f6e   return Function
-0001ccd0: 4172 6773 286f 626a 290a 2020 2020 2020  Args(obj).      
-0001cce0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0001ccf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cd00: 2020 2020 6966 206f 626a 203d 3d20 275f      if obj == '_
-0001cd10: 7468 6973 5f27 3a0a 2020 2020 2020 2020  this_':.        
-0001cd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cd30: 7265 7475 726e 2056 6172 6961 626c 6528  return Variable(
-0001cd40: 6e69 6478 2c70 6172 656e 743d 3129 0a20  nidx,parent=1). 
-0001cd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cd60: 2020 2072 6574 7572 6e20 5661 7261 626c     return Varabl
-0001cd70: 6528 6e69 6478 2c6f 626a 290a 2020 2020  e(nidx,obj).    
-0001cd80: 2020 2020 2020 2020 656c 6966 2069 6478          elif idx
-0001cd90: 5f74 7970 6520 3d3d 2027 6c69 7374 273a  _type == 'list':
-0001cda0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001cdb0: 2072 743d 5b5d 0a20 2020 2020 2020 2020   rt=[].         
-0001cdc0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-0001cdd0: 6e69 6478 3a0a 2020 2020 2020 2020 2020  nidx:.          
-0001cde0: 2020 2020 2020 2020 2020 6966 2054 7970            if Typ
-0001cdf0: 6528 692c 7374 7229 2061 6e64 2069 2e6c  e(i,str) and i.l
-0001ce00: 6f77 6572 2829 2069 6e20 5b27 6172 6773  ower() in ['args
-0001ce10: 272c 2761 7267 756d 656e 7473 275d 3a0a  ','arguments']:.
-0001ce20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ce30: 2020 2020 2020 2020 6966 206f 626a 203d          if obj =
-0001ce40: 3d20 275f 7468 6973 5f27 3a0a 2020 2020  = '_this_':.    
-0001ce50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ce60: 2020 2020 2020 2020 6f62 6a32 3d69 6e73          obj2=ins
-0001ce70: 7065 6374 2e67 6574 6d65 6d62 6572 7328  pect.getmembers(
-0001ce80: 4d79 4d6f 6475 6c65 2829 292e 6765 7428  MyModule()).get(
-0001ce90: 4361 6c6c 6572 4e61 6d65 2829 290a 2020  CallerName()).  
-0001cea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ceb0: 2020 2020 2020 2020 2020 7274 2e61 7070            rt.app
-0001cec0: 656e 6428 4675 6e63 7469 6f6e 4172 6773  end(FunctionArgs
-0001ced0: 286f 626a 3229 290a 2020 2020 2020 2020  (obj2)).        
-0001cee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cef0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0001cf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cf10: 2020 7274 2e61 7070 656e 6428 4675 6e63    rt.append(Func
-0001cf20: 7469 6f6e 4172 6773 286f 626a 2929 0a20  tionArgs(obj)). 
+0001b950: 2020 2020 2072 743d 5b5d 0a20 2020 2020       rt=[].     
+0001b960: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001b970: 6f72 2069 2069 6e20 6964 7873 3a0a 2020  or i in idxs:.  
+0001b980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b990: 2020 2020 2020 6966 2049 7349 6e74 2869        if IsInt(i
+0001b9a0: 293a 2072 742e 6170 7065 6e64 2849 6e74  ): rt.append(Int
+0001b9b0: 2869 2929 0a20 2020 2020 2020 2020 2020  (i)).           
+0001b9c0: 2020 2020 2020 2020 2069 6620 7274 3a20           if rt: 
+0001b9d0: 7265 7475 726e 2054 7275 652c 7274 0a20  return True,rt. 
+0001b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b9f0: 2020 2072 6574 7572 6e20 4661 6c73 652c     return False,
+0001ba00: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0001ba10: 2020 2020 2069 6620 4973 496e 7428 6964       if IsInt(id
+0001ba20: 7829 3a0a 2020 2020 2020 2020 2020 2020  x):.            
+0001ba30: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+0001ba40: 7275 652c 496e 7428 6964 7829 0a20 2020  rue,Int(idx).   
+0001ba50: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001ba60: 7572 6e20 4661 6c73 652c 4e6f 6e65 0a20  urn False,None. 
+0001ba70: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+0001ba80: 6365 2869 6478 2c6c 6973 7429 3a0a 2020  ce(idx,list):.  
+0001ba90: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+0001baa0: 652c 6964 780a 2020 2020 656c 6966 2069  e,idx.    elif i
+0001bab0: 7369 6e73 7461 6e63 6528 6964 782c 7475  sinstance(idx,tu
+0001bac0: 706c 6529 2061 6e64 206c 656e 2869 6478  ple) and len(idx
+0001bad0: 2920 3d3d 2032 3a0a 2020 2020 2020 2020  ) == 2:.        
+0001bae0: 7265 7475 726e 2054 7275 652c 6964 780a  return True,idx.
+0001baf0: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
+0001bb00: 6964 7820 2320 5265 7475 726e 206f 7269  idx # Return ori
+0001bb10: 6769 6e61 6c0a 0a64 6566 2047 6574 282a  ginal..def Get(*
+0001bb20: 696e 7073 2c2a 2a6f 7074 7329 3a0a 2020  inps,**opts):.  
+0001bb30: 2020 2727 270a 2020 2020 4765 7420 2841    '''.    Get (A
+0001bb40: 6e79 2920 736f 6d65 7468 696e 670a 2020  ny) something.  
+0001bb50: 2020 4765 7428 2777 686f 616d 6927 2920    Get('whoami') 
+0001bb60: 203a 2072 6574 7572 6e20 6d79 2066 756e   : return my fun
+0001bb70: 6374 696f 6e20 6e61 6d65 0a20 2020 2047  ction name.    G
+0001bb80: 6574 2827 6675 6e63 6c69 7374 2729 3a20  et('funclist'): 
+0001bb90: 7265 7475 726e 206d 7920 6d6f 6475 6c65  return my module
+0001bba0: 2773 2066 756e 6374 696f 6e20 6c69 7374  's function list
+0001bbb0: 0a20 2020 2020 2d20 7061 7265 6e74 3d31  .     - parent=1
+0001bbc0: 2020 2020 3a20 6d79 2070 6172 656e 7427      : my parent'
+0001bbd0: 7320 6675 6e63 7469 6f6e 206c 6973 740a  s function list.
+0001bbe0: 2020 2020 4765 7428 3c6c 6973 747c 7374      Get(<list|st
+0001bbf0: 7269 6e67 7c64 6963 747c 696e 747c 2e2e  ring|dict|int|..
+0001bc00: 2e3e 2c3c 696e 6465 787c 6b65 797c 6b65  .>,<index|key|ke
+0001bc10: 7970 6174 683e 293a 2047 6574 2064 6174  ypath>): Get dat
+0001bc20: 6120 6174 2074 6865 203c 696e 6465 787c  a at the <index|
+0001bc30: 6b65 797c 6b65 7970 6174 683e 0a20 2020  key|keypath>.   
+0001bc40: 2020 2d20 6b65 7970 6174 6820 3a20 272f    - keypath : '/
+0001bc50: 612f 622f 6327 203d 3e20 7b27 6127 3a7b  a/b/c' => {'a':{
+0001bc60: 2762 273a 7b27 6327 3a31 2c27 6427 7d7d  'b':{'c':1,'d'}}
+0001bc70: 7d20 3d3e 2072 6574 7572 6e20 6327 7320  } => return c's 
+0001bc80: 310a 2020 2020 202d 206b 6579 2020 2020  1.     - key    
+0001bc90: 203a 0a20 2020 2020 2020 5261 6e67 6520   :.       Range 
+0001bca0: 466f 726d 6174 2066 726f 6d20 3120 746f  Format from 1 to
+0001bcb0: 2035 3a20 7475 706c 6520 666f 726d 6174   5: tuple format
+0001bcc0: 2028 312c 3529 2c20 5374 7269 6e67 2066   (1,5), String f
+0001bcd0: 6f72 6d61 7420 2731 2d35 2720 6f72 2027  ormat '1-5' or '
+0001bce0: 313a 3527 206f 7220 2731 7e35 270a 2020  1:5' or '1~5'.  
+0001bcf0: 2020 2020 204f 5220 6461 7461 2031 2c33       OR data 1,3
+0001bd00: 2c35 2020 2020 2020 2020 2020 203a 206c  ,5           : l
+0001bd10: 6973 7420 666f 726d 6174 2020 5b31 2c33  ist format  [1,3
+0001bd20: 2c35 5d2c 2053 7472 696e 6720 666f 726d  ,5], String form
+0001bd30: 6174 2027 317c 337c 3527 0a20 2020 2020  at '1|3|5'.     
+0001bd40: 2020 2020 2d20 6966 2066 6f75 6e64 2061      - if found a
+0001bd50: 6e79 2064 6174 6120 7468 656e 2067 6574  ny data then get
+0001bd60: 7469 6e67 2074 6861 7420 6461 7461 206f  ting that data o
+0001bd70: 6e6c 790a 2020 2020 2020 2020 202d 2069  nly.         - i
+0001bd80: 6620 7573 6520 6669 6c6c 5f75 7020 6f70  f use fill_up op
+0001bd90: 7469 6f6e 2074 6865 6e20 6966 2065 7272  tion then if err
+0001bda0: 6f72 206f 6620 6120 6b65 7920 7468 656e  or of a key then
+0001bdb0: 2066 696c 6c20 746f 203c 6669 6c6c 5f75   fill to <fill_u
+0001bdc0: 703e 2076 616c 7565 2061 7420 7468 6520  p> value at the 
+0001bdd0: 6572 726f 7220 6c6f 6361 7469 6f6e 2e0a  error location..
+0001bde0: 2020 2020 202d 2069 6e64 6578 2020 203a       - index   :
+0001bdf0: 2069 6e74 6567 6572 2020 2020 2020 203a   integer       :
+0001be00: 2073 696e 676c 6520 6461 7461 0a20 2020   single data.   
+0001be10: 2047 6574 2827 5f74 6869 735f 272c 3c6b   Get('_this_',<k
+0001be20: 6579 3e29 3a20 6d79 2066 756e 6374 696f  ey>): my functio
+0001be30: 6e73 2773 203c 6b65 793e 0a20 2020 2047  ns's <key>.    G
+0001be40: 6574 2827 3c76 6172 206e 616d 653e 2729  et('<var name>')
+0001be50: 2020 3a20 7265 7475 726e 2076 6172 6961    : return varia
+0001be60: 626c 6520 6461 7461 0a20 2020 2047 6574  ble data.    Get
+0001be70: 2827 5f74 6869 735f 272c 2761 7267 7327  ('_this_','args'
+0001be80: 2920 203a 2072 6574 7572 6e20 6d79 2066  )  : return my f
+0001be90: 756e 6374 696f 6e73 2041 7267 756d 656e  unctions Argumen
+0001bea0: 7473 0a20 2020 2047 6574 283c 6675 6e63  ts.    Get(<func
+0001beb0: 7469 6f6e 3e2c 2761 7267 7327 2920 203a  tion>,'args')  :
+0001bec0: 2072 6574 7572 6e20 7468 6520 6675 6e63   return the func
+0001bed0: 7469 6f6e 7320 4172 6775 6d65 6e74 730a  tions Arguments.
+0001bee0: 2020 2020 3c6f 7074 696f 6e3e 0a20 2020      <option>.   
+0001bef0: 2020 2066 696c 6c5f 7570 203a 2049 6620     fill_up : If 
+0001bf00: 6572 726f 7220 6f66 2074 6865 206b 6579  error of the key
+0001bf10: 2773 2076 616c 7565 2074 6865 6e20 6669  's value then fi
+0001bf20: 6c6c 2075 7020 3c66 696c 6c5f 7570 3e20  ll up <fill_up> 
+0001bf30: 746f 2072 6967 6874 2070 6f73 6974 696f  to right positio
+0001bf40: 6e20 7768 656e 2074 6865 203c 6b65 793e  n when the <key>
+0001bf50: 2069 7320 6c69 7374 0a20 2020 2020 2064   is list.      d
+0001bf60: 6566 6175 6c74 203a 204e 6f6e 652c 2061  efault : None, a
+0001bf70: 6e79 2069 7373 7565 0a20 2020 2020 2065  ny issue.      e
+0001bf80: 7272 2020 2020 203a 2046 616c 7365 2c20  rr     : False, 
+0001bf90: 6966 2061 6e79 2065 7272 6f72 2074 6865  if any error the
+0001bfa0: 6e20 6967 6e6f 7265 2074 6865 2064 6174  n ignore the dat
+0001bfb0: 610a 2020 2020 2020 6964 785f 6f6e 6c79  a.      idx_only
+0001bfc0: 3a20 6966 2069 6e70 7574 2064 6174 6120  : if input data 
+0001bfd0: 6973 2064 6963 7469 6f6e 6172 7920 7468  is dictionary th
+0001bfe0: 656e 2063 6f6e 7665 7274 2064 6963 7469  en convert dicti
+0001bff0: 6f6e 6172 7927 7320 6b65 7973 2074 6f20  onary's keys to 
+0001c000: 696e 7075 7420 6461 7461 2e20 536f 2c20  input data. So, 
+0001c010: 696e 7420 6964 7820 6361 6e20 6765 7420  int idx can get 
+0001c020: 6b65 7973 286c 6973 7429 206e 616d 650a  keys(list) name.
+0001c030: 2020 2020 2020 5f74 7970 655f 2020 3a20        _type_  : 
+0001c040: 6465 6669 6e65 2074 6f20 696e 7075 7420  define to input 
+0001c050: 6461 7461 2773 2064 6174 6120 666f 726d  data's data form
+0001c060: 6174 2028 6578 3a20 286c 6973 742c 7475  at (ex: (list,tu
+0001c070: 706c 6529 290a 2020 2020 2020 6d65 7468  ple)).      meth
+0001c080: 6f64 2020 3a20 6966 2069 6e70 7574 2069  od  : if input i
+0001c090: 7320 7265 7175 6573 7420 7468 656e 2063  s request then c
+0001c0a0: 616e 2064 6566 696e 6520 6d65 7468 6f64  an define method
+0001c0b0: 2827 4745 5427 2c27 504f 5354 272c 2e2e  ('GET','POST',..
+0001c0c0: 2e29 0a20 2020 2020 2073 7472 6970 2020  .).      strip  
+0001c0d0: 203a 2064 6566 6175 6c74 3a20 4661 6c73   : default: Fals
+0001c0e0: 652c 2069 7420 6361 6e20 7374 7269 7020  e, it can strip 
+0001c0f0: 7768 6974 6520 7370 6163 650a 2020 2020  white space.    
+0001c100: 2020 7065 656c 2020 2020 3a20 0a20 2020    peel    : .   
+0001c110: 2020 2020 2020 2066 6f72 6365 3a20 6a75         force: ju
+0001c120: 7374 2074 616b 6520 6669 7273 7420 6461  st take first da
+0001c130: 7461 2069 6e20 7468 6520 6c69 7374 2c74  ta in the list,t
+0001c140: 7570 6c65 2028 6966 2064 6174 6120 666f  uple (if data fo
+0001c150: 726d 6174 2068 6173 2061 6e79 2066 6f72  rmat has any for
+0001c160: 6d20 616c 736f 204f 4b2c 206a 7573 7420  m also OK, just 
+0001c170: 7265 7475 726e 2074 6865 2064 6174 6129  return the data)
+0001c180: 0a20 2020 2020 2020 2020 2054 7275 6520  .          True 
+0001c190: 3a20 7369 6e67 6c65 2064 6174 6128 6c69  : single data(li
+0001c1a0: 7374 2c74 7570 6c65 2c64 6963 7429 2074  st,tuple,dict) t
+0001c1b0: 6865 6e20 7065 656c 2074 6f20 6461 7461  hen peel to data
+0001c1c0: 2028 6966 2064 6174 6120 666f 726d 6174   (if data format
+0001c1d0: 2069 7320 6c69 7374 2c74 7570 6c65 2c64   is list,tuple,d
+0001c1e0: 6963 742e 2e2e 2074 6865 6e20 7265 7475  ict... then retu
+0001c1f0: 726e 2064 6566 6175 6c74 290a 2020 2020  rn default).    
+0001c200: 2020 2020 2020 4661 6c73 653a 2072 6574        False: ret
+0001c210: 7572 6e20 666f 756e 6465 6420 6461 7461  urn founded data
+0001c220: 2028 616e 7920 666f 726d 6174 290a 2020   (any format).  
+0001c230: 2020 2020 6f75 7420 2020 2020 3a20 6465      out     : de
+0001c240: 6669 6e65 2074 6f20 6f75 7470 7574 2064  fine to output d
+0001c250: 6174 6120 286c 6973 742d 3e20 6f75 7470  ata (list-> outp
+0001c260: 7574 2077 696c 6c20 6c69 7374 2c20 2e2e  ut will list, ..
+0001c270: 2e29 2c20 6966 2077 726f 6e67 2066 6f72  .), if wrong for
+0001c280: 6d61 7420 7468 656e 2072 6574 7572 6e20  mat then return 
+0001c290: 6465 6661 756c 740a 2020 2020 2727 270a  default.    '''.
+0001c2a0: 2020 2020 6465 6661 756c 743d 6f70 7473      default=opts
+0001c2b0: 2e67 6574 2827 6465 6661 756c 7427 290a  .get('default').
+0001c2c0: 2020 2020 6572 723d 6f70 7473 2e67 6574      err=opts.get
+0001c2d0: 2827 6572 7227 2c6f 7074 732e 6765 7428  ('err',opts.get(
+0001c2e0: 2765 7272 6f72 272c 4661 6c73 6529 290a  'error',False)).
+0001c2f0: 2020 2020 6669 6c6c 5f75 703d 6f70 7473      fill_up=opts
+0001c300: 2e67 6574 2827 6669 6c6c 5f75 7027 2c27  .get('fill_up','
+0001c310: 5f66 416c 7345 5f27 290a 2020 2020 6964  _fAlsE_').    id
+0001c320: 785f 6f6e 6c79 3d6f 7074 732e 6765 7428  x_only=opts.get(
+0001c330: 2769 6478 5f6f 6e6c 7927 2c6f 7074 732e  'idx_only',opts.
+0001c340: 6765 7428 2769 6e64 6578 5f6f 6e6c 7927  get('index_only'
+0001c350: 2c46 616c 7365 2929 0a20 2020 205f 7479  ,False)).    _ty
+0001c360: 7065 3d6f 7074 732e 6765 7428 275f 7479  pe=opts.get('_ty
+0001c370: 7065 5f27 2c6f 7074 732e 6765 7428 2774  pe_',opts.get('t
+0001c380: 7970 6527 2929 0a20 2020 206f 7574 3d6f  ype')).    out=o
+0001c390: 7074 732e 6765 7428 276f 7574 272c 6f70  pts.get('out',op
+0001c3a0: 7473 2e67 6574 2827 6f75 745f 666f 726d  ts.get('out_form
+0001c3b0: 272c 2772 6177 2729 290a 2020 2020 7065  ','raw')).    pe
+0001c3c0: 656c 3d6f 7074 732e 6765 7428 2770 6565  el=opts.get('pee
+0001c3d0: 6c27 290a 2020 2020 7374 7269 703d 6f70  l').    strip=op
+0001c3e0: 7473 2e67 6574 2827 7374 7269 7027 2c46  ts.get('strip',F
+0001c3f0: 616c 7365 290a 0a20 2020 2069 6620 6c65  alse)..    if le
+0001c400: 6e28 696e 7073 2920 3d3d 2030 3a0a 2020  n(inps) == 0:.  
+0001c410: 2020 2020 2020 7265 7475 726e 2044 6566        return Def
+0001c420: 6175 6c74 2869 6e70 732c 6465 6661 756c  ault(inps,defaul
+0001c430: 7429 0a20 2020 2069 6620 6c65 6e28 696e  t).    if len(in
+0001c440: 7073 2920 3d3d 2031 3a0a 2020 2020 2020  ps) == 1:.      
+0001c450: 2020 6966 2069 6e70 735b 305d 2069 6e20    if inps[0] in 
+0001c460: 5b27 7768 6f61 6d69 272c 276d 796e 616d  ['whoami','mynam
+0001c470: 6527 2c27 6675 6e63 6e61 6d65 272c 2766  e','funcname','f
+0001c480: 756e 6374 696f 6e6e 616d 6527 2c27 4675  unctionname','Fu
+0001c490: 6e63 7469 6f6e 4e61 6d65 275d 3a0a 2020  nctionName']:.  
+0001c4a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001c4b0: 2046 756e 6374 696f 6e4e 616d 6528 7061   FunctionName(pa
+0001c4c0: 7265 6e74 3d6f 7074 732e 6765 7428 2770  rent=opts.get('p
+0001c4d0: 6172 656e 7427 2c31 2929 2023 206d 7920  arent',1)) # my 
+0001c4e0: 7061 7265 6e74 2773 2066 756e 6374 696f  parent's functio
+0001c4f0: 6e20 6e61 6d65 0a20 2020 2020 2020 2065  n name.        e
+0001c500: 6c69 6620 6973 696e 7374 616e 6365 2869  lif isinstance(i
+0001c510: 6e70 735b 305d 2c73 7472 293a 0a20 2020  nps[0],str):.   
+0001c520: 2020 2020 2020 2020 2069 6620 696e 7073           if inps
+0001c530: 5b30 5d2e 6c6f 7765 7228 2920 696e 205b  [0].lower() in [
+0001c540: 2766 756e 6327 2c27 6675 6e63 7469 6f6e  'func','function
+0001c550: 272c 2766 756e 6374 696f 6e73 272c 2766  ','functions','f
+0001c560: 756e 636c 6973 7427 2c27 6675 6e63 5f6c  unclist','func_l
+0001c570: 6973 7427 2c27 6c69 7374 275d 3a0a 2020  ist','list']:.  
+0001c580: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001c590: 7475 726e 2046 756e 6374 696f 6e4c 6973  turn FunctionLis
+0001c5a0: 7428 7061 7265 6e74 3d6f 7074 732e 6765  t(parent=opts.ge
+0001c5b0: 7428 2770 6172 656e 7427 2c2d 3129 2920  t('parent',-1)) 
+0001c5c0: 2320 6465 6661 756c 743a 206d 7920 7061  # default: my pa
+0001c5d0: 6765 2773 2066 756e 6374 696f 6e20 6c69  ge's function li
+0001c5e0: 7374 0a20 2020 2020 2020 2020 2020 2072  st.            r
+0001c5f0: 6574 7572 6e20 5661 7269 6162 6c65 2869  eturn Variable(i
+0001c600: 6e70 735b 305d 2c70 6172 656e 743d 6f70  nps[0],parent=op
+0001c610: 7473 2e67 6574 2827 7061 7265 6e74 272c  ts.get('parent',
+0001c620: 3129 2920 2320 6d79 2070 6172 656e 7427  1)) # my parent'
+0001c630: 7320 7661 7269 6162 6c65 0a20 2020 2069  s variable.    i
+0001c640: 6e70 733d 6c69 7374 2869 6e70 7329 0a20  nps=list(inps). 
+0001c650: 2020 206f 626a 3d69 6e70 735b 305d 0a20     obj=inps[0]. 
+0001c660: 2020 2069 6620 4973 4e6f 6e65 286f 626a     if IsNone(obj
+0001c670: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+0001c680: 6e20 4465 6661 756c 7428 6f62 6a2c 6465  n Default(obj,de
+0001c690: 6661 756c 7429 0a20 2020 2064 656c 2069  fault).    del i
+0001c6a0: 6e70 735b 305d 0a20 2020 2069 6620 6c65  nps[0].    if le
+0001c6b0: 6e28 696e 7073 2920 3d3d 2031 3a0a 2020  n(inps) == 1:.  
+0001c6c0: 2020 2020 2020 6964 783d 696e 7073 5b30        idx=inps[0
+0001c6d0: 5d0a 2020 2020 656c 6966 206c 656e 2869  ].    elif len(i
+0001c6e0: 6e70 7329 203e 2031 3a0a 2020 2020 2020  nps) > 1:.      
+0001c6f0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0001c700: 6f62 6a2c 286c 6973 742c 7475 706c 6529  obj,(list,tuple)
+0001c710: 2920 616e 6420 6e6f 7420 6973 696e 7374  ) and not isinst
+0001c720: 616e 6365 2869 6e70 735b 2d31 5d2c 696e  ance(inps[-1],in
+0001c730: 7429 2061 6e64 2027 6465 6661 756c 7427  t) and 'default'
+0001c740: 206e 6f74 2069 6e20 6f70 7473 3a0a 2020   not in opts:.  
+0001c750: 2020 2020 2020 2020 2020 6964 783d 696e            idx=in
+0001c760: 7073 5b3a 2d31 5d0a 2020 2020 2020 2020  ps[:-1].        
+0001c770: 2020 2020 6465 6661 756c 743d 696e 7073      default=inps
+0001c780: 5b2d 315d 0a20 2020 2020 2020 2065 6c73  [-1].        els
+0001c790: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
+0001c7a0: 6478 3d69 6e70 735b 3a5d 0a20 2020 2065  dx=inps[:].    e
+0001c7b0: 6c73 653a 0a20 2020 2020 2020 2069 6478  lse:.        idx
+0001c7c0: 3d4e 6f6e 650a 2020 2020 2357 6865 6e20  =None.    #When 
+0001c7d0: 6368 6563 6b20 7479 7065 0a20 2020 2069  check type.    i
+0001c7e0: 6620 5f74 7970 6520 6973 206e 6f74 204e  f _type is not N
+0001c7f0: 6f6e 653a 0a20 2020 2020 2020 2069 6620  one:.        if 
+0001c800: 6e6f 7420 5479 7065 286f 626a 2c5f 7479  not Type(obj,_ty
+0001c810: 7065 293a 0a20 2020 2020 2020 2020 2020  pe):.           
+0001c820: 2072 6574 7572 6e20 4465 6661 756c 7428   return Default(
+0001c830: 6f62 6a2c 6465 6661 756c 7429 0a20 2020  obj,default).   
+0001c840: 206f 6b2c 6e69 6478 3d49 6e64 6578 466f   ok,nidx=IndexFo
+0001c850: 726d 2869 6478 2c69 6478 5f6f 6e6c 793d  rm(idx,idx_only=
+0001c860: 6964 785f 6f6e 6c79 290a 2020 2020 6964  idx_only).    id
+0001c870: 785f 7479 7065 3d74 7970 6528 6e69 6478  x_type=type(nidx
+0001c880: 292e 5f5f 6e61 6d65 5f5f 0a20 2020 2069  ).__name__.    i
+0001c890: 6620 6f62 6a20 3d3d 2027 5f74 6869 735f  f obj == '_this_
+0001c8a0: 273a 0a20 2020 2020 2020 206f 626a 5f74  ':.        obj_t
+0001c8b0: 7970 653d 2766 756e 6374 696f 6e27 0a20  ype='function'. 
+0001c8c0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0001c8d0: 206f 626a 5f74 7970 653d 5479 7065 4e61   obj_type=TypeNa
+0001c8e0: 6d65 286f 626a 290a 2020 2020 2020 2020  me(obj).        
+0001c8f0: 0a20 2020 2069 6620 6f6b 2061 6e64 206f  .    if ok and o
+0001c900: 626a 5f74 7970 6520 696e 2028 276c 6973  bj_type in ('lis
+0001c910: 7427 2c27 7475 706c 6527 2c27 7374 7227  t','tuple','str'
+0001c920: 2c27 6279 7465 7327 293a 0a20 2020 2020  ,'bytes'):.     
+0001c930: 2020 2069 6620 6964 785f 7479 7065 203d     if idx_type =
+0001c940: 3d20 2774 7570 6c65 273a 0a20 2020 2020  = 'tuple':.     
+0001c950: 2020 2020 2020 2073 733d 5f6f 626a 5f6d         ss=_obj_m
+0001c960: 6178 5f69 6478 5f28 6f62 6a2c 496e 7428  ax_idx_(obj,Int(
+0001c970: 6e69 6478 5b30 5d29 2c65 7272 290a 2020  nidx[0]),err).  
+0001c980: 2020 2020 2020 2020 2020 6565 3d5f 6f62            ee=_ob
+0001c990: 6a5f 6d61 785f 6964 785f 286f 626a 2c49  j_max_idx_(obj,I
+0001c9a0: 6e74 286e 6964 785b 315d 292c 6572 7229  nt(nidx[1]),err)
+0001c9b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001c9c0: 5479 7065 2873 732c 696e 7429 2061 6e64  Type(ss,int) and
+0001c9d0: 2054 7970 6528 6565 2c69 6e74 293a 0a20   Type(ee,int):. 
+0001c9e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001c9f0: 6574 7572 6e20 6f62 6a5b 7373 3a65 652b  eturn obj[ss:ee+
+0001ca00: 315d 0a20 2020 2020 2020 2065 6c69 6620  1].        elif 
+0001ca10: 6964 785f 7479 7065 203d 3d20 276c 6973  idx_type == 'lis
+0001ca20: 7427 3a0a 2020 2020 2020 2020 2020 2020  t':.            
+0001ca30: 7274 3d5b 5d0a 2020 2020 2020 2020 2020  rt=[].          
+0001ca40: 2020 666f 7220 6920 696e 206e 6964 783a    for i in nidx:
+0001ca50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ca60: 2069 783d 5f6f 626a 5f6d 6178 5f69 6478   ix=_obj_max_idx
+0001ca70: 5f28 6f62 6a2c 496e 7428 692c 6465 6661  _(obj,Int(i,defa
+0001ca80: 756c 743d 4661 6c73 652c 6572 723d 5472  ult=False,err=Tr
+0001ca90: 7565 292c 6572 7229 0a20 2020 2020 2020  ue),err).       
+0001caa0: 2020 2020 2020 2020 2069 6620 5479 7065           if Type
+0001cab0: 2869 782c 696e 7429 3a0a 2020 2020 2020  (ix,int):.      
+0001cac0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+0001cad0: 2e61 7070 656e 6428 6f62 6a5b 6978 5d29  .append(obj[ix])
+0001cae0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001caf0: 2065 6c69 6620 6669 6c6c 5f75 7020 213d   elif fill_up !=
+0001cb00: 2027 5f66 416c 7345 5f27 3a0a 2020 2020   '_fAlsE_':.    
+0001cb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cb20: 7274 2e61 7070 656e 6428 6669 6c6c 5f75  rt.append(fill_u
+0001cb30: 7029 0a20 2020 2020 2020 2020 2020 2072  p).            r
+0001cb40: 6574 7572 6e20 4f75 7446 6f72 6d61 7428  eturn OutFormat(
+0001cb50: 7274 2c6f 7574 3d6f 7574 2c64 6566 6175  rt,out=out,defau
+0001cb60: 6c74 3d64 6566 6175 6c74 2c6f 7267 3d6f  lt=default,org=o
+0001cb70: 626a 2c70 6565 6c3d 7065 656c 2c73 7472  bj,peel=peel,str
+0001cb80: 6970 3d73 7472 6970 290a 2020 2020 2020  ip=strip).      
+0001cb90: 2020 656c 6966 2069 6478 5f74 7970 6520    elif idx_type 
+0001cba0: 3d3d 2027 696e 7427 3a0a 2020 2020 2020  == 'int':.      
+0001cbb0: 2020 2020 2020 6978 3d5f 6f62 6a5f 6d61        ix=_obj_ma
+0001cbc0: 785f 6964 785f 286f 626a 2c6e 6964 782c  x_idx_(obj,nidx,
+0001cbd0: 6572 7229 0a20 2020 2020 2020 2020 2020  err).           
+0001cbe0: 2069 6620 5479 7065 2869 782c 696e 7429   if Type(ix,int)
+0001cbf0: 3a20 7265 7475 726e 206f 626a 5b69 785d  : return obj[ix]
+0001cc00: 0a20 2020 2020 2020 2069 6620 6964 7820  .        if idx 
+0001cc10: 696e 2064 6972 286f 626a 293a 0a20 2020  in dir(obj):.   
+0001cc20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001cc30: 6f62 6a2e 5f5f 6469 6374 5f5f 2e67 6574  obj.__dict__.get
+0001cc40: 2869 6478 290a 2020 2020 2020 2020 7265  (idx).        re
+0001cc50: 7475 726e 2044 6566 6175 6c74 286f 626a  turn Default(obj
+0001cc60: 2c64 6566 6175 6c74 290a 2020 2020 656c  ,default).    el
+0001cc70: 6966 206f 626a 5f74 7970 6520 696e 2028  if obj_type in (
+0001cc80: 2764 6963 7427 293a 0a20 2020 2020 2020  'dict'):.       
+0001cc90: 2072 6574 7572 6e20 4449 4354 286f 626a   return DICT(obj
+0001cca0: 292e 4765 7428 6964 782c 2a2a 6f70 7473  ).Get(idx,**opts
+0001ccb0: 290a 2020 2020 656c 6966 206f 626a 5f74  ).    elif obj_t
+0001ccc0: 7970 6520 696e 2028 2766 756e 6374 696f  ype in ('functio
+0001ccd0: 6e27 293a 2023 3f3f 3f0a 2020 2020 2020  n'): #???.      
+0001cce0: 2020 6966 206f 6b3a 0a20 2020 2020 2020    if ok:.       
+0001ccf0: 2020 2020 2069 6620 6964 785f 7479 7065       if idx_type
+0001cd00: 203d 3d20 2773 7472 273a 0a20 2020 2020   == 'str':.     
+0001cd10: 2020 2020 2020 2020 2020 2069 6620 6e69             if ni
+0001cd20: 6478 2e6c 6f77 6572 2829 2069 6e20 5b27  dx.lower() in ['
+0001cd30: 6172 6773 272c 2761 7267 756d 656e 7473  args','arguments
+0001cd40: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+0001cd50: 2020 2020 2020 2020 6966 206f 626a 203d          if obj =
+0001cd60: 3d20 275f 7468 6973 5f27 3a0a 2020 2020  = '_this_':.    
+0001cd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cd80: 2020 2020 6f62 6a3d 696e 7370 6563 742e      obj=inspect.
+0001cd90: 6765 746d 656d 6265 7273 284d 794d 6f64  getmembers(MyMod
+0001cda0: 756c 6528 2929 2e67 6574 2843 616c 6c65  ule()).get(Calle
+0001cdb0: 724e 616d 6528 2929 0a20 2020 2020 2020  rName()).       
+0001cdc0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001cdd0: 7572 6e20 4675 6e63 7469 6f6e 4172 6773  urn FunctionArgs
+0001cde0: 286f 626a 290a 2020 2020 2020 2020 2020  (obj).          
+0001cdf0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0001ce00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ce10: 6966 206f 626a 203d 3d20 275f 7468 6973  if obj == '_this
+0001ce20: 5f27 3a0a 2020 2020 2020 2020 2020 2020  _':.            
+0001ce30: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001ce40: 726e 2056 6172 6961 626c 6528 6e69 6478  rn Variable(nidx
+0001ce50: 2c70 6172 656e 743d 3129 0a20 2020 2020  ,parent=1).     
+0001ce60: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001ce70: 6574 7572 6e20 5661 7261 626c 6528 6e69  eturn Varable(ni
+0001ce80: 6478 2c6f 626a 290a 2020 2020 2020 2020  dx,obj).        
+0001ce90: 2020 2020 656c 6966 2069 6478 5f74 7970      elif idx_typ
+0001cea0: 6520 3d3d 2027 6c69 7374 273a 0a20 2020  e == 'list':.   
+0001ceb0: 2020 2020 2020 2020 2020 2020 2072 743d               rt=
+0001cec0: 5b5d 0a20 2020 2020 2020 2020 2020 2020  [].             
+0001ced0: 2020 2066 6f72 2069 2069 6e20 6e69 6478     for i in nidx
+0001cee0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001cef0: 2020 2020 2020 6966 2054 7970 6528 692c        if Type(i,
+0001cf00: 7374 7229 2061 6e64 2069 2e6c 6f77 6572  str) and i.lower
+0001cf10: 2829 2069 6e20 5b27 6172 6773 272c 2761  () in ['args','a
+0001cf20: 7267 756d 656e 7473 275d 3a0a 2020 2020  rguments']:.    
 0001cf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cf40: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0001cf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cf60: 2069 6620 6f62 6a20 3d3d 2027 5f74 6869   if obj == '_thi
-0001cf70: 735f 273a 0a20 2020 2020 2020 2020 2020  s_':.           
-0001cf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cf90: 2072 742e 6170 7065 6e64 2856 6172 6961   rt.append(Varia
-0001cfa0: 626c 6528 6e69 6478 2c70 6172 656e 743d  ble(nidx,parent=
-0001cfb0: 3129 290a 2020 2020 2020 2020 2020 2020  1)).            
-0001cfc0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0001cfd0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001cfe0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-0001cff0: 2e61 7070 656e 6428 5661 7269 6162 6c65  .append(Variable
-0001d000: 286e 6964 782c 6f62 6a29 290a 2020 2020  (nidx,obj)).    
-0001d010: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001d020: 726e 204f 7574 466f 726d 6174 2872 742c  rn OutFormat(rt,
-0001d030: 6f75 743d 6f75 742c 6465 6661 756c 743d  out=out,default=
-0001d040: 6465 6661 756c 742c 6f72 673d 6f62 6a2c  default,org=obj,
-0001d050: 7065 656c 3d70 6565 6c2c 7374 7269 703d  peel=peel,strip=
-0001d060: 7374 7269 7029 0a20 2020 2065 6c69 6620  strip).    elif 
-0001d070: 6f62 6a5f 7479 7065 2069 6e20 2827 696e  obj_type in ('in
-0001d080: 7374 616e 6365 272c 2763 6c61 7373 6f62  stance','classob
-0001d090: 6a27 2c27 6d6f 6475 6c65 2729 3a0a 2020  j','module'):.  
-0001d0a0: 2020 2020 2020 6966 2054 7970 6528 6964        if Type(id
-0001d0b0: 782c 7374 7229 2061 6e64 2069 6478 2e6c  x,str) and idx.l
-0001d0c0: 6f77 6572 2829 2069 6e20 5b27 6675 6e63  ower() in ['func
-0001d0d0: 272c 2766 756e 6374 696f 6e27 2c27 6675  ','function','fu
-0001d0e0: 6e63 7469 6f6e 7327 2c27 6675 6e63 6c69  nctions','funcli
-0001d0f0: 7374 272c 2766 756e 635f 6c69 7374 272c  st','func_list',
-0001d100: 276c 6973 7427 5d3a 0a20 2020 2020 2020  'list']:.       
-0001d110: 2020 2020 2072 6574 7572 6e20 4675 6e63       return Func
-0001d120: 7469 6f6e 4c69 7374 286f 626a 290a 2020  tionList(obj).  
-0001d130: 2020 2020 2020 656c 6966 2069 6478 5f74        elif idx_t
-0001d140: 7970 6520 696e 205b 276c 6973 7427 2c27  ype in ['list','
-0001d150: 7475 706c 6527 5d3a 2023 4f52 2049 6e64  tuple']: #OR Ind
-0001d160: 6578 0a20 2020 2020 2020 2020 2020 2072  ex.            r
-0001d170: 743d 5b5d 0a20 2020 2020 2020 2020 2020  t=[].           
-0001d180: 2023 2067 6574 2066 756e 6374 696f 6e20   # get function 
-0001d190: 6f62 6a65 6374 206f 6620 6669 6e64 696e  object of findin
-0001d1a0: 6720 7374 7269 6e67 206e 616d 6520 696e  g string name in
-0001d1b0: 2074 6865 2063 6c61 7373 2f69 6e73 7461   the class/insta
-0001d1c0: 6e63 650a 2020 2020 2020 2020 2020 2020  nce.            
-0001d1d0: 666f 7220 6666 2069 6e20 6e69 6478 3a0a  for ff in nidx:.
-0001d1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d1f0: 6966 2069 7369 6e73 7461 6e63 6528 6666  if isinstance(ff
-0001d200: 2c73 7472 293a 0a20 2020 2020 2020 2020  ,str):.         
-0001d210: 2020 2020 2020 2020 2020 2069 6620 6666             if ff
-0001d220: 2069 6e20 5b27 5f5f 6e61 6d65 5f5f 272c   in ['__name__',
-0001d230: 276d 6574 686f 645f 6e61 6d65 272c 275f  'method_name','_
-0001d240: 5f6d 6574 686f 645f 5f27 5d3a 2023 4765  _method__']: #Ge
-0001d250: 7420 4d65 7468 6f64 206e 616d 6520 6c69  t Method name li
-0001d260: 7374 2069 6e20 636c 6173 730a 2020 2020  st in class.    
-0001d270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d280: 2020 2020 6966 206f 626a 5f74 7970 6520      if obj_type 
-0001d290: 696e 2028 2763 6c61 7373 6f62 6a27 293a  in ('classobj'):
-0001d2a0: 206f 626a 3d6f 626a 2829 2023 206d 6f76   obj=obj() # mov
-0001d2b0: 6520 6672 6f6d 2043 4c41 5353 2074 6f20  e from CLASS to 
-0001d2c0: 434c 4153 5328 290a 2020 2020 2020 2020  CLASS().        
-0001d2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d2e0: 6966 2054 7970 6528 6f62 6a2c 2769 6e73  if Type(obj,'ins
-0001d2f0: 7461 6e63 6527 293a 0a20 2020 2020 2020  tance'):.       
-0001d300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d310: 2020 2020 2072 743d 7274 2b4d 6574 686f       rt=rt+Metho
-0001d320: 6449 6e43 6c61 7373 286f 626a 290a 2020  dInClass(obj).  
-0001d330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d340: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0001d350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d360: 7274 2e61 7070 656e 6428 6765 7461 7474  rt.append(getatt
-0001d370: 7228 6f62 6a2c 6666 2c64 6566 6175 6c74  r(obj,ff,default
-0001d380: 2929 0a20 2020 2020 2020 2020 2020 2072  )).            r
-0001d390: 6574 7572 6e20 4f75 7446 6f72 6d61 7428  eturn OutFormat(
-0001d3a0: 7274 2c6f 7574 3d6f 7574 2c64 6566 6175  rt,out=out,defau
-0001d3b0: 6c74 3d64 6566 6175 6c74 2c6f 7267 3d6f  lt=default,org=o
-0001d3c0: 626a 2c70 6565 6c3d 7065 656c 2c73 7472  bj,peel=peel,str
-0001d3d0: 6970 3d73 7472 6970 290a 2020 2020 2020  ip=strip).      
-0001d3e0: 2020 656c 6966 2069 6478 5f74 7970 6520    elif idx_type 
-0001d3f0: 3d3d 2027 7374 7227 3a0a 2020 2020 2020  == 'str':.      
-0001d400: 2020 2020 2020 6966 206f 626a 5f74 7970        if obj_typ
-0001d410: 6520 3d3d 2027 636c 6173 736f 626a 273a  e == 'classobj':
-0001d420: 206f 626a 3d6f 626a 2829 2023 206d 6f76   obj=obj() # mov
-0001d430: 6520 434c 4153 5320 746f 2043 4c41 5353  e CLASS to CLASS
-0001d440: 2829 0a20 2020 2020 2020 2020 2020 2072  ().            r
-0001d450: 6574 7572 6e20 6765 7461 7474 7228 6f62  eturn getattr(ob
-0001d460: 6a2c 6e69 6478 2c44 6566 6175 6c74 286f  j,nidx,Default(o
-0001d470: 626a 2c64 6566 6175 6c74 2929 0a20 2020  bj,default)).   
-0001d480: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0001d490: 2020 2020 2020 2069 6620 5479 7065 286f         if Type(o
-0001d4a0: 626a 2c27 636c 6173 736f 626a 2729 3a20  bj,'classobj'): 
-0001d4b0: 6f62 6a3d 6f62 6a28 2920 2320 6d6f 7665  obj=obj() # move
-0001d4c0: 2066 726f 6d20 434c 4153 5320 746f 2043   from CLASS to C
-0001d4d0: 4c41 5353 2829 0a20 2020 2020 2020 2020  LASS().         
-0001d4e0: 2020 2069 6620 6f6b 2069 7320 4661 6c73     if ok is Fals
-0001d4f0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0001d500: 2020 2072 6574 7572 6e20 6f62 6a2e 5f5f     return obj.__
-0001d510: 6469 6374 5f5f 0a20 2020 2020 2020 2020  dict__.         
-0001d520: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0001d530: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001d540: 4765 7428 6f62 6a2e 5f5f 6469 6374 5f5f  Get(obj.__dict__
-0001d550: 2c69 6478 2c64 6566 6175 6c74 2c65 7272  ,idx,default,err
-0001d560: 2920 2320 636f 6e76 6572 7465 6420 6f62  ) # converted ob
-0001d570: 6a20 7769 7468 206f 7269 6769 6e61 6c20  j with original 
-0001d580: 6964 780a 2020 2020 656c 6966 206f 626a  idx.    elif obj
-0001d590: 5f74 7970 6520 696e 2028 2772 6573 706f  _type in ('respo
-0001d5a0: 6e73 6527 293a 2023 2057 6562 2044 6174  nse'): # Web Dat
-0001d5b0: 610a 2020 2020 2020 2020 6966 206f 6b3a  a.        if ok:
-0001d5c0: 0a20 2020 2020 2020 2020 2020 2064 6566  .            def
-0001d5d0: 205f 7765 625f 286f 626a 2c6e 6964 7829   _web_(obj,nidx)
-0001d5e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001d5f0: 2020 6966 206e 6964 7820 696e 205b 2772    if nidx in ['r
-0001d600: 6327 2c27 7374 6174 7573 272c 2763 6f64  c','status','cod
-0001d610: 6527 2c27 7374 6174 6527 2c27 7374 6174  e','state','stat
-0001d620: 7573 5f63 6f64 6527 5d3a 0a20 2020 2020  us_code']:.     
-0001d630: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001d640: 6574 7572 6e20 6f62 6a2e 7374 6174 7573  eturn obj.status
-0001d650: 5f63 6f64 650a 2020 2020 2020 2020 2020  _code.          
-0001d660: 2020 2020 2020 656c 6966 206e 6964 7820        elif nidx 
-0001d670: 696e 205b 2764 6174 6127 2c27 7661 6c75  in ['data','valu
-0001d680: 6527 2c27 6a73 6f6e 275d 3a0a 2020 2020  e','json']:.    
-0001d690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d6a0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-0001d6b0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0001d6c0: 7572 6e20 466f 726d 4461 7461 286f 626a  urn FormData(obj
-0001d6d0: 2e74 6578 7429 0a20 2020 2020 2020 2020  .text).         
-0001d6e0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-0001d6f0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-0001d700: 2020 2020 2020 2020 2020 2069 6620 6572             if er
-0001d710: 7220 6973 2054 7275 653a 2072 6574 7572  r is True: retur
-0001d720: 6e20 4465 6661 756c 7428 6f62 6a2c 6465  n Default(obj,de
-0001d730: 6661 756c 7429 0a20 2020 2020 2020 2020  fault).         
-0001d740: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001d750: 6574 7572 6e20 6f62 6a2e 7465 7874 0a20  eturn obj.text. 
-0001d760: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0001d770: 6c69 6620 6e69 6478 2069 6e20 5b27 7465  lif nidx in ['te
-0001d780: 7874 272c 2773 7472 272c 2773 7472 696e  xt','str','strin
-0001d790: 6727 5d3a 0a20 2020 2020 2020 2020 2020  g']:.           
-0001d7a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001d7b0: 6f62 6a2e 7465 7874 0a20 2020 2020 2020  obj.text.       
-0001d7c0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0001d7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d7e0: 2020 2072 6574 7572 6e20 6f62 6a0a 2020     return obj.  
-0001d7f0: 2020 2020 2020 2020 2020 6966 2069 6478            if idx
-0001d800: 5f74 7970 653d 3d27 7374 7227 3a0a 2020  _type=='str':.  
-0001d810: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001d820: 7475 726e 205f 7765 625f 286f 626a 2c6e  turn _web_(obj,n
-0001d830: 6964 7829 0a20 2020 2020 2020 2020 2020  idx).           
-0001d840: 2065 6c69 6620 6964 785f 7479 7065 203d   elif idx_type =
-0001d850: 3d20 276c 6973 7427 3a0a 2020 2020 2020  = 'list':.      
-0001d860: 2020 2020 2020 2020 2020 7274 3d5b 5d0a            rt=[].
-0001d870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d880: 666f 7220 696b 6579 2069 6e20 6e69 6478  for ikey in nidx
-0001d890: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001d8a0: 2020 2020 2020 7274 2e61 7070 656e 6428        rt.append(
-0001d8b0: 5f77 6562 5f28 6f62 6a2c 696b 6579 2929  _web_(obj,ikey))
-0001d8c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d8d0: 2072 6574 7572 6e20 4f75 7446 6f72 6d61   return OutForma
-0001d8e0: 7428 7274 2c6f 7574 3d6f 7574 2c64 6566  t(rt,out=out,def
-0001d8f0: 6175 6c74 3d64 6566 6175 6c74 2c6f 7267  ault=default,org
-0001d900: 3d6f 626a 2c70 6565 6c3d 7065 656c 2c73  =obj,peel=peel,s
-0001d910: 7472 6970 3d73 7472 6970 290a 2020 2020  trip=strip).    
-0001d920: 656c 6966 206f 626a 5f74 7970 6520 696e  elif obj_type in
-0001d930: 2028 2772 6571 7565 7374 2729 3a20 2320   ('request'): # 
-0001d940: 5765 6220 4461 7461 320a 2020 2020 2020  Web Data2.      
-0001d950: 2020 7274 3d5b 5d0a 2020 2020 2020 2020    rt=[].        
-0001d960: 6d65 7468 6f64 3d6f 7074 732e 6765 7428  method=opts.get(
-0001d970: 276d 6574 686f 6427 2c4e 6f6e 6529 0a20  'method',None). 
-0001d980: 2020 2020 2020 2069 6620 4973 4e6f 6e65         if IsNone
-0001d990: 286d 6574 686f 6429 3a20 6d65 7468 6f64  (method): method
-0001d9a0: 3d6f 626a 2e6d 6574 686f 642e 7570 7065  =obj.method.uppe
-0001d9b0: 7228 290a 2020 2020 2020 2020 656c 6966  r().        elif
-0001d9c0: 2069 7369 6e73 7461 6e63 6528 6d65 7468   isinstance(meth
-0001d9d0: 6f64 2c73 7472 293a 206d 6574 686f 643d  od,str): method=
-0001d9e0: 6d65 7468 6f64 2e75 7070 6572 2829 0a0a  method.upper()..
-0001d9f0: 2020 2020 2020 2020 6966 206f 6b3a 0a20          if ok:. 
-0001da00: 2020 2020 2020 2020 2020 2064 6566 205f             def _
-0001da10: 7765 625f 6461 7461 286f 626a 2c6e 6b65  web_data(obj,nke
-0001da20: 792c 6d65 7468 6f64 2c64 6566 6175 6c74  y,method,default
-0001da30: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0001da40: 2020 2069 6620 6e6b 6579 2e6c 6f77 6572     if nkey.lower
-0001da50: 2829 203d 3d20 276d 6574 686f 6427 3a0a  () == 'method':.
-0001da60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001da70: 2020 2020 7265 7475 726e 206d 6574 686f      return metho
-0001da80: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
-0001da90: 2020 6966 206d 6574 686f 643d 3d27 4745    if method=='GE
-0001daa0: 5427 3a0a 2020 2020 2020 2020 2020 2020  T':.            
-0001dab0: 2020 2020 2020 2020 7274 3d6f 626a 2e47          rt=obj.G
-0001dac0: 4554 2e67 6574 286e 6b65 7929 0a20 2020  ET.get(nkey).   
-0001dad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dae0: 2069 6620 6e6f 7420 4973 4e6f 6e65 2872   if not IsNone(r
-0001daf0: 7429 3a20 7265 7475 726e 2072 740a 2020  t): return rt.  
-0001db00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001db10: 2020 7265 7475 726e 2044 6566 6175 6c74    return Default
-0001db20: 286f 626a 2c64 6566 6175 6c74 290a 2020  (obj,default).  
-0001db30: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0001db40: 6966 206d 6574 686f 643d 3d27 4649 4c45  if method=='FILE
-0001db50: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-0001db60: 2020 2020 2020 2072 743d 6f62 6a2e 4649         rt=obj.FI
-0001db70: 4c45 532e 6765 746c 6973 7428 6e6b 6579  LES.getlist(nkey
-0001db80: 2c64 6566 6175 6c74 290a 2020 2020 2020  ,default).      
+0001cf40: 2020 2020 6966 206f 626a 203d 3d20 275f      if obj == '_
+0001cf50: 7468 6973 5f27 3a0a 2020 2020 2020 2020  this_':.        
+0001cf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cf70: 2020 2020 6f62 6a32 3d69 6e73 7065 6374      obj2=inspect
+0001cf80: 2e67 6574 6d65 6d62 6572 7328 4d79 4d6f  .getmembers(MyMo
+0001cf90: 6475 6c65 2829 292e 6765 7428 4361 6c6c  dule()).get(Call
+0001cfa0: 6572 4e61 6d65 2829 290a 2020 2020 2020  erName()).      
+0001cfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cfc0: 2020 2020 2020 7274 2e61 7070 656e 6428        rt.append(
+0001cfd0: 4675 6e63 7469 6f6e 4172 6773 286f 626a  FunctionArgs(obj
+0001cfe0: 3229 290a 2020 2020 2020 2020 2020 2020  2)).            
+0001cff0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0001d000: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001d010: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+0001d020: 2e61 7070 656e 6428 4675 6e63 7469 6f6e  .append(Function
+0001d030: 4172 6773 286f 626a 2929 0a20 2020 2020  Args(obj)).     
+0001d040: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0001d050: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001d060: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001d070: 6f62 6a20 3d3d 2027 5f74 6869 735f 273a  obj == '_this_':
+0001d080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d090: 2020 2020 2020 2020 2020 2020 2072 742e               rt.
+0001d0a0: 6170 7065 6e64 2856 6172 6961 626c 6528  append(Variable(
+0001d0b0: 6e69 6478 2c70 6172 656e 743d 3129 290a  nidx,parent=1)).
+0001d0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d0d0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0001d0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d0f0: 2020 2020 2020 2020 2020 7274 2e61 7070            rt.app
+0001d100: 656e 6428 5661 7269 6162 6c65 286e 6964  end(Variable(nid
+0001d110: 782c 6f62 6a29 290a 2020 2020 2020 2020  x,obj)).        
+0001d120: 2020 2020 2020 2020 7265 7475 726e 204f          return O
+0001d130: 7574 466f 726d 6174 2872 742c 6f75 743d  utFormat(rt,out=
+0001d140: 6f75 742c 6465 6661 756c 743d 6465 6661  out,default=defa
+0001d150: 756c 742c 6f72 673d 6f62 6a2c 7065 656c  ult,org=obj,peel
+0001d160: 3d70 6565 6c2c 7374 7269 703d 7374 7269  =peel,strip=stri
+0001d170: 7029 0a20 2020 2065 6c69 6620 6f62 6a5f  p).    elif obj_
+0001d180: 7479 7065 2069 6e20 2827 696e 7374 616e  type in ('instan
+0001d190: 6365 272c 2763 6c61 7373 6f62 6a27 2c27  ce','classobj','
+0001d1a0: 6d6f 6475 6c65 2729 3a0a 2020 2020 2020  module'):.      
+0001d1b0: 2020 6966 2054 7970 6528 6964 782c 7374    if Type(idx,st
+0001d1c0: 7229 2061 6e64 2069 6478 2e6c 6f77 6572  r) and idx.lower
+0001d1d0: 2829 2069 6e20 5b27 6675 6e63 272c 2766  () in ['func','f
+0001d1e0: 756e 6374 696f 6e27 2c27 6675 6e63 7469  unction','functi
+0001d1f0: 6f6e 7327 2c27 6675 6e63 6c69 7374 272c  ons','funclist',
+0001d200: 2766 756e 635f 6c69 7374 272c 276c 6973  'func_list','lis
+0001d210: 7427 5d3a 0a20 2020 2020 2020 2020 2020  t']:.           
+0001d220: 2072 6574 7572 6e20 4675 6e63 7469 6f6e   return Function
+0001d230: 4c69 7374 286f 626a 290a 2020 2020 2020  List(obj).      
+0001d240: 2020 656c 6966 2069 6478 5f74 7970 6520    elif idx_type 
+0001d250: 696e 205b 276c 6973 7427 2c27 7475 706c  in ['list','tupl
+0001d260: 6527 5d3a 2023 4f52 2049 6e64 6578 0a20  e']: #OR Index. 
+0001d270: 2020 2020 2020 2020 2020 2072 743d 5b5d             rt=[]
+0001d280: 0a20 2020 2020 2020 2020 2020 2023 2067  .            # g
+0001d290: 6574 2066 756e 6374 696f 6e20 6f62 6a65  et function obje
+0001d2a0: 6374 206f 6620 6669 6e64 696e 6720 7374  ct of finding st
+0001d2b0: 7269 6e67 206e 616d 6520 696e 2074 6865  ring name in the
+0001d2c0: 2063 6c61 7373 2f69 6e73 7461 6e63 650a   class/instance.
+0001d2d0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0001d2e0: 6666 2069 6e20 6e69 6478 3a0a 2020 2020  ff in nidx:.    
+0001d2f0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0001d300: 7369 6e73 7461 6e63 6528 6666 2c73 7472  sinstance(ff,str
+0001d310: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0001d320: 2020 2020 2020 2069 6620 6666 2069 6e20         if ff in 
+0001d330: 5b27 5f5f 6e61 6d65 5f5f 272c 276d 6574  ['__name__','met
+0001d340: 686f 645f 6e61 6d65 272c 275f 5f6d 6574  hod_name','__met
+0001d350: 686f 645f 5f27 5d3a 2023 4765 7420 4d65  hod__']: #Get Me
+0001d360: 7468 6f64 206e 616d 6520 6c69 7374 2069  thod name list i
+0001d370: 6e20 636c 6173 730a 2020 2020 2020 2020  n class.        
+0001d380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d390: 6966 206f 626a 5f74 7970 6520 696e 2028  if obj_type in (
+0001d3a0: 2763 6c61 7373 6f62 6a27 293a 206f 626a  'classobj'): obj
+0001d3b0: 3d6f 626a 2829 2023 206d 6f76 6520 6672  =obj() # move fr
+0001d3c0: 6f6d 2043 4c41 5353 2074 6f20 434c 4153  om CLASS to CLAS
+0001d3d0: 5328 290a 2020 2020 2020 2020 2020 2020  S().            
+0001d3e0: 2020 2020 2020 2020 2020 2020 6966 2054              if T
+0001d3f0: 7970 6528 6f62 6a2c 2769 6e73 7461 6e63  ype(obj,'instanc
+0001d400: 6527 293a 0a20 2020 2020 2020 2020 2020  e'):.           
+0001d410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d420: 2072 743d 7274 2b4d 6574 686f 6449 6e43   rt=rt+MethodInC
+0001d430: 6c61 7373 286f 626a 290a 2020 2020 2020  lass(obj).      
+0001d440: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0001d450: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0001d460: 2020 2020 2020 2020 2020 2020 7274 2e61              rt.a
+0001d470: 7070 656e 6428 6765 7461 7474 7228 6f62  ppend(getattr(ob
+0001d480: 6a2c 6666 2c64 6566 6175 6c74 2929 0a20  j,ff,default)). 
+0001d490: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001d4a0: 6e20 4f75 7446 6f72 6d61 7428 7274 2c6f  n OutFormat(rt,o
+0001d4b0: 7574 3d6f 7574 2c64 6566 6175 6c74 3d64  ut=out,default=d
+0001d4c0: 6566 6175 6c74 2c6f 7267 3d6f 626a 2c70  efault,org=obj,p
+0001d4d0: 6565 6c3d 7065 656c 2c73 7472 6970 3d73  eel=peel,strip=s
+0001d4e0: 7472 6970 290a 2020 2020 2020 2020 656c  trip).        el
+0001d4f0: 6966 2069 6478 5f74 7970 6520 3d3d 2027  if idx_type == '
+0001d500: 7374 7227 3a0a 2020 2020 2020 2020 2020  str':.          
+0001d510: 2020 6966 206f 626a 5f74 7970 6520 3d3d    if obj_type ==
+0001d520: 2027 636c 6173 736f 626a 273a 206f 626a   'classobj': obj
+0001d530: 3d6f 626a 2829 2023 206d 6f76 6520 434c  =obj() # move CL
+0001d540: 4153 5320 746f 2043 4c41 5353 2829 0a20  ASS to CLASS(). 
+0001d550: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001d560: 6e20 6765 7461 7474 7228 6f62 6a2c 6e69  n getattr(obj,ni
+0001d570: 6478 2c44 6566 6175 6c74 286f 626a 2c64  dx,Default(obj,d
+0001d580: 6566 6175 6c74 2929 0a20 2020 2020 2020  efault)).       
+0001d590: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0001d5a0: 2020 2069 6620 5479 7065 286f 626a 2c27     if Type(obj,'
+0001d5b0: 636c 6173 736f 626a 2729 3a20 6f62 6a3d  classobj'): obj=
+0001d5c0: 6f62 6a28 2920 2320 6d6f 7665 2066 726f  obj() # move fro
+0001d5d0: 6d20 434c 4153 5320 746f 2043 4c41 5353  m CLASS to CLASS
+0001d5e0: 2829 0a20 2020 2020 2020 2020 2020 2069  ().            i
+0001d5f0: 6620 6f6b 2069 7320 4661 6c73 653a 0a20  f ok is False:. 
+0001d600: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001d610: 6574 7572 6e20 6f62 6a2e 5f5f 6469 6374  eturn obj.__dict
+0001d620: 5f5f 0a20 2020 2020 2020 2020 2020 2065  __.            e
+0001d630: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001d640: 2020 2020 2072 6574 7572 6e20 4765 7428       return Get(
+0001d650: 6f62 6a2e 5f5f 6469 6374 5f5f 2c69 6478  obj.__dict__,idx
+0001d660: 2c64 6566 6175 6c74 2c65 7272 2920 2320  ,default,err) # 
+0001d670: 636f 6e76 6572 7465 6420 6f62 6a20 7769  converted obj wi
+0001d680: 7468 206f 7269 6769 6e61 6c20 6964 780a  th original idx.
+0001d690: 2020 2020 656c 6966 206f 626a 5f74 7970      elif obj_typ
+0001d6a0: 6520 696e 2028 2772 6573 706f 6e73 6527  e in ('response'
+0001d6b0: 293a 2023 2057 6562 2044 6174 610a 2020  ): # Web Data.  
+0001d6c0: 2020 2020 2020 6966 206f 6b3a 0a20 2020        if ok:.   
+0001d6d0: 2020 2020 2020 2020 2064 6566 205f 7765           def _we
+0001d6e0: 625f 286f 626a 2c6e 6964 7829 3a0a 2020  b_(obj,nidx):.  
+0001d6f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0001d700: 206e 6964 7820 696e 205b 2772 6327 2c27   nidx in ['rc','
+0001d710: 7374 6174 7573 272c 2763 6f64 6527 2c27  status','code','
+0001d720: 7374 6174 6527 2c27 7374 6174 7573 5f63  state','status_c
+0001d730: 6f64 6527 5d3a 0a20 2020 2020 2020 2020  ode']:.         
+0001d740: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001d750: 6e20 6f62 6a2e 7374 6174 7573 5f63 6f64  n obj.status_cod
+0001d760: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0001d770: 2020 656c 6966 206e 6964 7820 696e 205b    elif nidx in [
+0001d780: 2764 6174 6127 2c27 7661 6c75 6527 2c27  'data','value','
+0001d790: 6a73 6f6e 275d 3a0a 2020 2020 2020 2020  json']:.        
+0001d7a0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+0001d7b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d7c0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001d7d0: 466f 726d 4461 7461 286f 626a 2e74 6578  FormData(obj.tex
+0001d7e0: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
+0001d7f0: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
+0001d800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d810: 2020 2020 2020 2069 6620 6572 7220 6973         if err is
+0001d820: 2054 7275 653a 2072 6574 7572 6e20 4465   True: return De
+0001d830: 6661 756c 7428 6f62 6a2c 6465 6661 756c  fault(obj,defaul
+0001d840: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
+0001d850: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001d860: 6e20 6f62 6a2e 7465 7874 0a20 2020 2020  n obj.text.     
+0001d870: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0001d880: 6e69 6478 2069 6e20 5b27 7465 7874 272c  nidx in ['text',
+0001d890: 2773 7472 272c 2773 7472 696e 6727 5d3a  'str','string']:
+0001d8a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d8b0: 2020 2020 2072 6574 7572 6e20 6f62 6a2e       return obj.
+0001d8c0: 7465 7874 0a20 2020 2020 2020 2020 2020  text.           
+0001d8d0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0001d8e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001d8f0: 6574 7572 6e20 6f62 6a0a 2020 2020 2020  eturn obj.      
+0001d900: 2020 2020 2020 6966 2069 6478 5f74 7970        if idx_typ
+0001d910: 653d 3d27 7374 7227 3a0a 2020 2020 2020  e=='str':.      
+0001d920: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001d930: 205f 7765 625f 286f 626a 2c6e 6964 7829   _web_(obj,nidx)
+0001d940: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+0001d950: 6620 6964 785f 7479 7065 203d 3d20 276c  f idx_type == 'l
+0001d960: 6973 7427 3a0a 2020 2020 2020 2020 2020  ist':.          
+0001d970: 2020 2020 2020 7274 3d5b 5d0a 2020 2020        rt=[].    
+0001d980: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0001d990: 696b 6579 2069 6e20 6e69 6478 3a0a 2020  ikey in nidx:.  
+0001d9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d9b0: 2020 7274 2e61 7070 656e 6428 5f77 6562    rt.append(_web
+0001d9c0: 5f28 6f62 6a2c 696b 6579 2929 0a20 2020  _(obj,ikey)).   
+0001d9d0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001d9e0: 7572 6e20 4f75 7446 6f72 6d61 7428 7274  urn OutFormat(rt
+0001d9f0: 2c6f 7574 3d6f 7574 2c64 6566 6175 6c74  ,out=out,default
+0001da00: 3d64 6566 6175 6c74 2c6f 7267 3d6f 626a  =default,org=obj
+0001da10: 2c70 6565 6c3d 7065 656c 2c73 7472 6970  ,peel=peel,strip
+0001da20: 3d73 7472 6970 290a 2020 2020 656c 6966  =strip).    elif
+0001da30: 206f 626a 5f74 7970 6520 696e 2028 2772   obj_type in ('r
+0001da40: 6571 7565 7374 2729 3a20 2320 5765 6220  equest'): # Web 
+0001da50: 4461 7461 320a 2020 2020 2020 2020 7274  Data2.        rt
+0001da60: 3d5b 5d0a 2020 2020 2020 2020 6d65 7468  =[].        meth
+0001da70: 6f64 3d6f 7074 732e 6765 7428 276d 6574  od=opts.get('met
+0001da80: 686f 6427 2c4e 6f6e 6529 0a20 2020 2020  hod',None).     
+0001da90: 2020 2069 6620 4973 4e6f 6e65 286d 6574     if IsNone(met
+0001daa0: 686f 6429 3a20 6d65 7468 6f64 3d6f 626a  hod): method=obj
+0001dab0: 2e6d 6574 686f 642e 7570 7065 7228 290a  .method.upper().
+0001dac0: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
+0001dad0: 6e73 7461 6e63 6528 6d65 7468 6f64 2c73  nstance(method,s
+0001dae0: 7472 293a 206d 6574 686f 643d 6d65 7468  tr): method=meth
+0001daf0: 6f64 2e75 7070 6572 2829 0a0a 2020 2020  od.upper()..    
+0001db00: 2020 2020 6966 206f 6b3a 0a20 2020 2020      if ok:.     
+0001db10: 2020 2020 2020 2064 6566 205f 7765 625f         def _web_
+0001db20: 6461 7461 286f 626a 2c6e 6b65 792c 6d65  data(obj,nkey,me
+0001db30: 7468 6f64 2c64 6566 6175 6c74 293a 0a20  thod,default):. 
+0001db40: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001db50: 6620 6e6b 6579 2e6c 6f77 6572 2829 203d  f nkey.lower() =
+0001db60: 3d20 276d 6574 686f 6427 3a0a 2020 2020  = 'method':.    
+0001db70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001db80: 7265 7475 726e 206d 6574 686f 640a 2020  return method.  
 0001db90: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0001dba0: 206e 6f74 2049 734e 6f6e 6528 7274 293a   not IsNone(rt):
-0001dbb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001dbc0: 2020 2020 2020 2020 2023 7265 7475 726e           #return
-0001dbd0: 204f 7574 466f 726d 6174 2872 742c 6f75   OutFormat(rt,ou
-0001dbe0: 743d 2772 6177 272c 7065 656c 3d70 6565  t='raw',peel=pee
-0001dbf0: 6c2c 7374 7269 703d 7374 7269 702c 6465  l,strip=strip,de
-0001dc00: 6661 756c 743d 6465 6661 756c 7429 0a20  fault=default). 
-0001dc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dc20: 2020 2020 2020 2072 6574 7572 6e20 4f75         return Ou
-0001dc30: 7446 6f72 6d61 7428 7274 2c6f 7574 3d6f  tFormat(rt,out=o
-0001dc40: 7574 2c70 6565 6c3d 7065 656c 2c73 7472  ut,peel=peel,str
-0001dc50: 6970 3d73 7472 6970 2c64 6566 6175 6c74  ip=strip,default
-0001dc60: 3d64 6566 6175 6c74 290a 2020 2020 2020  =default).      
-0001dc70: 2020 2020 2020 2020 2020 2020 2020 2369                #i
-0001dc80: 6620 6e6f 7420 4973 4e6f 6e65 2872 7429  f not IsNone(rt)
-0001dc90: 3a20 7265 7475 726e 2072 740a 2020 2020  : return rt.    
-0001dca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dcb0: 2372 743d 6f62 6a2e 4649 4c45 532e 6765  #rt=obj.FILES.ge
-0001dcc0: 7428 6e6b 6579 2c64 6566 6175 6c74 290a  t(nkey,default).
-0001dcd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dce0: 2020 2020 2369 6620 6e6f 7420 4973 4e6f      #if not IsNo
-0001dcf0: 6e65 2872 7429 3a20 7265 7475 726e 2072  ne(rt): return r
-0001dd00: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
-0001dd10: 2020 2020 2020 7265 7475 726e 2044 6566        return Def
-0001dd20: 6175 6c74 286f 626a 2c64 6566 6175 6c74  ault(obj,default
-0001dd30: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001dd40: 2020 656c 6966 206d 6574 686f 643d 3d27    elif method=='
-0001dd50: 504f 5354 273a 0a20 2020 2020 2020 2020  POST':.         
-0001dd60: 2020 2020 2020 2020 2020 2072 743d 6f62             rt=ob
-0001dd70: 6a2e 4649 4c45 532e 6765 746c 6973 7428  j.FILES.getlist(
-0001dd80: 6e6b 6579 290a 2020 2020 2020 2020 2020  nkey).          
-0001dd90: 2020 2020 2020 2020 2020 2372 7432 3d6f            #rt2=o
-0001dda0: 626a 2e46 494c 4553 2e67 6574 286e 6b65  bj.FILES.get(nke
-0001ddb0: 7929 0a20 2020 2020 2020 2020 2020 2020  y).             
-0001ddc0: 2020 2020 2020 2069 6620 6e6f 7420 4973         if not Is
-0001ddd0: 4e6f 6e65 2872 7429 3a0a 2020 2020 2020  None(rt):.      
+0001dba0: 206d 6574 686f 643d 3d27 4745 5427 3a0a   method=='GET':.
+0001dbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dbc0: 2020 2020 7274 3d6f 626a 2e47 4554 2e67      rt=obj.GET.g
+0001dbd0: 6574 286e 6b65 7929 0a20 2020 2020 2020  et(nkey).       
+0001dbe0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001dbf0: 6e6f 7420 4973 4e6f 6e65 2872 7429 3a20  not IsNone(rt): 
+0001dc00: 7265 7475 726e 2072 740a 2020 2020 2020  return rt.      
+0001dc10: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001dc20: 7475 726e 2044 6566 6175 6c74 286f 626a  turn Default(obj
+0001dc30: 2c64 6566 6175 6c74 290a 2020 2020 2020  ,default).      
+0001dc40: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
+0001dc50: 6574 686f 643d 3d27 4649 4c45 273a 0a20  ethod=='FILE':. 
+0001dc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dc70: 2020 2072 743d 6f62 6a2e 4649 4c45 532e     rt=obj.FILES.
+0001dc80: 6765 746c 6973 7428 6e6b 6579 2c64 6566  getlist(nkey,def
+0001dc90: 6175 6c74 290a 2020 2020 2020 2020 2020  ault).          
+0001dca0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+0001dcb0: 2049 734e 6f6e 6528 7274 293a 0a20 2020   IsNone(rt):.   
+0001dcc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dcd0: 2020 2020 2023 7265 7475 726e 204f 7574       #return Out
+0001dce0: 466f 726d 6174 2872 742c 6f75 743d 2772  Format(rt,out='r
+0001dcf0: 6177 272c 7065 656c 3d70 6565 6c2c 7374  aw',peel=peel,st
+0001dd00: 7269 703d 7374 7269 702c 6465 6661 756c  rip=strip,defaul
+0001dd10: 743d 6465 6661 756c 7429 0a20 2020 2020  t=default).     
+0001dd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dd30: 2020 2072 6574 7572 6e20 4f75 7446 6f72     return OutFor
+0001dd40: 6d61 7428 7274 2c6f 7574 3d6f 7574 2c70  mat(rt,out=out,p
+0001dd50: 6565 6c3d 7065 656c 2c73 7472 6970 3d73  eel=peel,strip=s
+0001dd60: 7472 6970 2c64 6566 6175 6c74 3d64 6566  trip,default=def
+0001dd70: 6175 6c74 290a 2020 2020 2020 2020 2020  ault).          
+0001dd80: 2020 2020 2020 2020 2020 2369 6620 6e6f            #if no
+0001dd90: 7420 4973 4e6f 6e65 2872 7429 3a20 7265  t IsNone(rt): re
+0001dda0: 7475 726e 2072 740a 2020 2020 2020 2020  turn rt.        
+0001ddb0: 2020 2020 2020 2020 2020 2020 2372 743d              #rt=
+0001ddc0: 6f62 6a2e 4649 4c45 532e 6765 7428 6e6b  obj.FILES.get(nk
+0001ddd0: 6579 2c64 6566 6175 6c74 290a 2020 2020  ey,default).    
 0001dde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ddf0: 2020 2372 6574 7572 6e20 4f75 7446 6f72    #return OutFor
-0001de00: 6d61 7428 7274 2c6f 7574 3d27 7261 7727  mat(rt,out='raw'
-0001de10: 2c70 6565 6c3d 7065 656c 2c73 7472 6970  ,peel=peel,strip
-0001de20: 3d73 7472 6970 2c64 6566 6175 6c74 3d64  =strip,default=d
-0001de30: 6566 6175 6c74 290a 2020 2020 2020 2020  efault).        
-0001de40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001de50: 7265 7475 726e 204f 7574 466f 726d 6174  return OutFormat
-0001de60: 2872 742c 6f75 743d 6f75 742c 7065 656c  (rt,out=out,peel
-0001de70: 3d70 6565 6c2c 7374 7269 703d 7374 7269  =peel,strip=stri
-0001de80: 702c 6465 6661 756c 743d 6465 6661 756c  p,default=defaul
-0001de90: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-0001dea0: 2020 2020 2020 2072 743d 6f62 6a2e 504f         rt=obj.PO
-0001deb0: 5354 2e67 6574 6c69 7374 286e 6b65 7929  ST.getlist(nkey)
-0001dec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ded0: 2020 2020 2023 7274 3d6f 626a 2e50 4f53       #rt=obj.POS
-0001dee0: 542e 6765 7428 6e6b 6579 290a 2020 2020  T.get(nkey).    
-0001def0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001df00: 6966 206e 6f74 2049 734e 6f6e 6528 7274  if not IsNone(rt
-0001df10: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0001df20: 2020 2020 2020 2020 2020 2023 7265 7475             #retu
-0001df30: 726e 204f 7574 466f 726d 6174 2872 742c  rn OutFormat(rt,
-0001df40: 6f75 743d 2772 6177 272c 7065 656c 3d70  out='raw',peel=p
-0001df50: 6565 6c2c 7374 7269 703d 7374 7269 702c  eel,strip=strip,
-0001df60: 6465 6661 756c 743d 6465 6661 756c 7429  default=default)
-0001df70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001df80: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001df90: 4f75 7446 6f72 6d61 7428 7274 2c6f 7574  OutFormat(rt,out
-0001dfa0: 3d6f 7574 2c70 6565 6c3d 7065 656c 2c73  =out,peel=peel,s
-0001dfb0: 7472 6970 3d73 7472 6970 2c64 6566 6175  trip=strip,defau
-0001dfc0: 6c74 3d64 6566 6175 6c74 290a 2020 2020  lt=default).    
+0001ddf0: 2369 6620 6e6f 7420 4973 4e6f 6e65 2872  #if not IsNone(r
+0001de00: 7429 3a20 7265 7475 726e 2072 740a 2020  t): return rt.  
+0001de10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001de20: 2020 7265 7475 726e 2044 6566 6175 6c74    return Default
+0001de30: 286f 626a 2c64 6566 6175 6c74 290a 2020  (obj,default).  
+0001de40: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0001de50: 6966 206d 6574 686f 643d 3d27 504f 5354  if method=='POST
+0001de60: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+0001de70: 2020 2020 2020 2072 743d 6f62 6a2e 4649         rt=obj.FI
+0001de80: 4c45 532e 6765 746c 6973 7428 6e6b 6579  LES.getlist(nkey
+0001de90: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001dea0: 2020 2020 2020 2372 7432 3d6f 626a 2e46        #rt2=obj.F
+0001deb0: 494c 4553 2e67 6574 286e 6b65 7929 0a20  ILES.get(nkey). 
+0001dec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ded0: 2020 2069 6620 6e6f 7420 4973 4e6f 6e65     if not IsNone
+0001dee0: 2872 7429 3a0a 2020 2020 2020 2020 2020  (rt):.          
+0001def0: 2020 2020 2020 2020 2020 2020 2020 2372                #r
+0001df00: 6574 7572 6e20 4f75 7446 6f72 6d61 7428  eturn OutFormat(
+0001df10: 7274 2c6f 7574 3d27 7261 7727 2c70 6565  rt,out='raw',pee
+0001df20: 6c3d 7065 656c 2c73 7472 6970 3d73 7472  l=peel,strip=str
+0001df30: 6970 2c64 6566 6175 6c74 3d64 6566 6175  ip,default=defau
+0001df40: 6c74 290a 2020 2020 2020 2020 2020 2020  lt).            
+0001df50: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001df60: 726e 204f 7574 466f 726d 6174 2872 742c  rn OutFormat(rt,
+0001df70: 6f75 743d 6f75 742c 7065 656c 3d70 6565  out=out,peel=pee
+0001df80: 6c2c 7374 7269 703d 7374 7269 702c 6465  l,strip=strip,de
+0001df90: 6661 756c 743d 6465 6661 756c 7429 0a20  fault=default). 
+0001dfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dfb0: 2020 2072 743d 6f62 6a2e 504f 5354 2e67     rt=obj.POST.g
+0001dfc0: 6574 6c69 7374 286e 6b65 7929 0a20 2020  etlist(nkey).   
 0001dfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dfe0: 7265 7475 726e 2044 6566 6175 6c74 286f  return Default(o
-0001dff0: 626a 2c64 6566 6175 6c74 290a 2020 2020  bj,default).    
-0001e000: 2020 2020 2020 2020 6966 2069 6478 5f74          if idx_t
-0001e010: 7970 6520 3d3d 2027 7374 7227 3a0a 2020  ype == 'str':.  
-0001e020: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001e030: 7475 726e 205f 7765 625f 6461 7461 286f  turn _web_data(o
-0001e040: 626a 2c6e 6964 782c 6d65 7468 6f64 2c64  bj,nidx,method,d
-0001e050: 6566 6175 6c74 290a 2020 2020 2020 2020  efault).        
-0001e060: 2020 2020 656c 6966 2069 6478 5f74 7970      elif idx_typ
-0001e070: 6520 3d3d 2027 6c69 7374 273a 0a20 2020  e == 'list':.   
-0001e080: 2020 2020 2020 2020 2020 2020 2072 743d               rt=
-0001e090: 5b5d 0a20 2020 2020 2020 2020 2020 2020  [].             
-0001e0a0: 2020 2066 6f72 2069 2069 6e20 6e69 6478     for i in nidx
-0001e0b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001e0c0: 2020 2020 2020 7274 2e61 7070 656e 6428        rt.append(
-0001e0d0: 5f77 6562 5f64 6174 6128 6f62 6a2c 692c  _web_data(obj,i,
-0001e0e0: 6d65 7468 6f64 2c64 6566 6175 6c74 2929  method,default))
-0001e0f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e100: 2072 6574 7572 6e20 4f75 7446 6f72 6d61   return OutForma
-0001e110: 7428 7274 2c6f 7574 3d6f 7574 2c64 6566  t(rt,out=out,def
-0001e120: 6175 6c74 3d64 6566 6175 6c74 2c6f 7267  ault=default,org
-0001e130: 3d6f 626a 2c70 6565 6c3d 7065 656c 2c73  =obj,peel=peel,s
-0001e140: 7472 6970 3d73 7472 6970 290a 2020 2020  trip=strip).    
-0001e150: 656c 6966 206f 626a 5f74 7970 6520 696e  elif obj_type in
-0001e160: 2028 2749 6d6d 7574 6162 6c65 4d75 6c74   ('ImmutableMult
-0001e170: 6944 6963 7427 293a 2023 2046 6c61 736b  iDict'): # Flask
-0001e180: 2057 6562 2044 6174 610a 2020 2020 2020   Web Data.      
-0001e190: 2020 746d 703d 7b7d 0a20 2020 2020 2020    tmp={}.       
-0001e1a0: 2069 6620 6f62 6a3a 0a20 2020 2020 2020   if obj:.       
-0001e1b0: 2020 2020 2066 6f72 2069 6920 696e 206f       for ii in o
-0001e1c0: 626a 3a0a 2020 2020 2020 2020 2020 2020  bj:.            
-0001e1d0: 2020 2020 746d 705b 6969 5d3d 6f62 6a5b      tmp[ii]=obj[
-0001e1e0: 6969 5d0a 2020 2020 2020 2020 7265 7475  ii].        retu
-0001e1f0: 726e 2047 6574 2874 6d70 2c69 6478 2c64  rn Get(tmp,idx,d
-0001e200: 6566 6175 6c74 2c65 7272 2920 0a20 2020  efault,err) .   
-0001e210: 2065 6c69 6620 6f62 6a5f 7479 7065 2069   elif obj_type i
-0001e220: 6e20 2827 6b44 6963 7427 2c27 6b4c 6973  n ('kDict','kLis
-0001e230: 7427 2c27 4449 4354 2729 3a20 0a20 2020  t','DICT'): .   
-0001e240: 2020 2020 2072 6574 7572 6e20 4765 7428       return Get(
-0001e250: 6f62 6a2e 4765 7428 292c 6964 782c 6465  obj.Get(),idx,de
-0001e260: 6661 756c 742c 6572 7229 200a 2020 2020  fault,err) .    
-0001e270: 7265 7475 726e 204f 7574 466f 726d 6174  return OutFormat
-0001e280: 285b 5d2c 6f75 743d 6f75 742c 6465 6661  ([],out=out,defa
-0001e290: 756c 743d 6465 6661 756c 742c 6f72 673d  ult=default,org=
-0001e2a0: 6f62 6a2c 7065 656c 3d70 6565 6c2c 7374  obj,peel=peel,st
-0001e2b0: 7269 703d 7374 7269 7029 0a0a 0a64 6566  rip=strip)...def
-0001e2c0: 2054 7279 436f 6465 2863 6f64 652c 6465   TryCode(code,de
-0001e2d0: 6661 756c 743d 4661 6c73 652c 5f72 6574  fault=False,_ret
-0001e2e0: 7572 6e5f 3d54 7275 6529 3a0a 2020 2020  urn_=True):.    
-0001e2f0: 2727 270a 2020 2020 5275 6e20 7374 7269  '''.    Run stri
-0001e300: 6e67 2063 6f64 650a 2020 2020 6465 6661  ng code.    defa
-0001e310: 756c 7420 3a46 616c 7365 0a20 2020 205f  ult :False.    _
-0001e320: 7265 7475 726e 5f3a 2054 7275 653a 2072  return_: True: r
-0001e330: 6574 7572 6e20 6f75 7470 7574 2c20 4661  eturn output, Fa
-0001e340: 6c73 653a 2070 7269 6e74 206f 6e20 7363  lse: print on sc
-0001e350: 7265 656e 0a20 2020 2027 2727 0a20 2020  reen.    '''.   
-0001e360: 2069 6620 5479 7065 2863 6f64 652c 7374   if Type(code,st
-0001e370: 7229 3a0a 2020 2020 2020 2020 6572 723d  r):.        err=
-0001e380: 4e6f 6e65 0a20 2020 2020 2020 2072 743d  None.        rt=
-0001e390: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
-0001e3a0: 5f72 6574 7572 6e5f 3a0a 2020 2020 2020  _return_:.      
-0001e3b0: 2020 2020 2020 2320 6372 6561 7465 2066        # create f
-0001e3c0: 696c 652d 6c69 6b65 2073 7472 696e 6720  ile-like string 
-0001e3d0: 746f 2063 6170 7475 7265 206f 7574 7075  to capture outpu
-0001e3e0: 740a 2020 2020 2020 2020 2020 2020 636f  t.            co
-0001e3f0: 6465 4f75 7420 3d20 5374 7269 6e67 494f  deOut = StringIO
-0001e400: 2829 0a20 2020 2020 2020 2020 2020 2063  ().            c
-0001e410: 6f64 6545 7272 203d 2053 7472 696e 6749  odeErr = StringI
-0001e420: 4f28 290a 2020 2020 2020 2020 2020 2020  O().            
-0001e430: 7379 732e 7374 646f 7574 2e66 6c75 7368  sys.stdout.flush
-0001e440: 2829 0a20 2020 2020 2020 2020 2020 2073  ().            s
-0001e450: 7973 2e73 7464 6572 722e 666c 7573 6828  ys.stderr.flush(
-0001e460: 290a 2020 2020 2020 2020 2020 2020 7379  ).            sy
-0001e470: 732e 7374 646f 7574 3d63 6f64 654f 7574  s.stdout=codeOut
-0001e480: 2023 2053 7461 6e64 6172 6420 4f75 7420   # Standard Out 
-0001e490: 6672 6f6d 2061 7070 6c69 6361 7469 6f6e  from application
-0001e4a0: 0a20 2020 2020 2020 2020 2020 2073 7973  .            sys
-0001e4b0: 2e73 7464 6572 723d 636f 6465 4572 7220  .stderr=codeErr 
-0001e4c0: 2320 5374 616e 6461 7264 2045 7272 6f72  # Standard Error
-0001e4d0: 2066 726f 6d20 6170 706c 6963 6174 696f   from applicatio
-0001e4e0: 6e0a 2020 2020 2020 2020 7472 793a 0a20  n.        try:. 
-0001e4f0: 2020 2020 2020 2020 2020 2065 7865 6328             exec(
-0001e500: 636f 6465 290a 2020 2020 2020 2020 6578  code).        ex
-0001e510: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-0001e520: 2020 2343 6f64 6520 4572 726f 7220 6d65    #Code Error me
-0001e530: 7373 6167 650a 2020 2020 2020 2020 2020  ssage.          
-0001e540: 2020 6572 723d 4578 6365 7074 4d65 7373    err=ExceptMess
-0001e550: 6167 6528 290a 2020 2020 2020 2020 6669  age().        fi
-0001e560: 6e61 6c6c 793a 0a20 2020 2020 2020 2020  nally:.         
-0001e570: 2020 2069 6620 5f72 6574 7572 6e5f 3a0a     if _return_:.
-0001e580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e590: 7379 732e 7374 646f 7574 2e66 6c75 7368  sys.stdout.flush
-0001e5a0: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
-0001e5b0: 2020 2073 7973 2e73 7464 6572 722e 666c     sys.stderr.fl
-0001e5c0: 7573 6828 290a 2020 2020 2020 2020 2020  ush().          
-0001e5d0: 2020 2020 2020 2372 6563 6f76 6572 2f72        #recover/r
-0001e5e0: 6573 746f 7265 2073 7464 6f75 7420 616e  estore stdout an
-0001e5f0: 6420 7374 6465 7272 0a20 2020 2020 2020  d stderr.       
-0001e600: 2020 2020 2020 2020 2073 7973 2e73 7464           sys.std
-0001e610: 6f75 743d 7379 732e 5f5f 7374 646f 7574  out=sys.__stdout
-0001e620: 5f5f 0a20 2020 2020 2020 2020 2020 2020  __.             
-0001e630: 2020 2073 7973 2e73 7464 6572 723d 7379     sys.stderr=sy
-0001e640: 732e 5f5f 7374 6465 7272 5f5f 0a20 2020  s.__stderr__.   
-0001e650: 2020 2020 2020 2020 2020 2020 2023 4765               #Ge
-0001e660: 7420 7661 6c75 6520 0a20 2020 2020 2020  t value .       
-0001e670: 2020 2020 2020 2020 2072 743d 636f 6465           rt=code
-0001e680: 4f75 742e 6765 7476 616c 7565 2829 0a20  Out.getvalue(). 
-0001e690: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0001e6a0: 723d 636f 6465 4572 722e 6765 7476 616c  r=codeErr.getval
-0001e6b0: 7565 2829 0a20 2020 2020 2020 2020 2020  ue().           
-0001e6c0: 2020 2020 2023 436c 6f73 6520 494f 0a20       #Close IO. 
-0001e6d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0001e6e0: 6f64 654f 7574 2e63 6c6f 7365 2829 0a20  odeOut.close(). 
-0001e6f0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0001e700: 6f64 6545 7272 2e63 6c6f 7365 2829 0a20  odeErr.close(). 
-0001e710: 2020 2020 2020 2020 2020 2069 6620 6572             if er
-0001e720: 723a 2023 436f 6465 2045 7272 6f72 0a20  r: #Code Error. 
-0001e730: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001e740: 6620 5f72 6574 7572 6e5f 3a0a 2020 2020  f _return_:.    
-0001e750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e760: 7265 7475 726e 2046 616c 7365 2c72 742c  return False,rt,
-0001e770: 6572 720a 2020 2020 2020 2020 2020 2020  err.            
-0001e780: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0001e790: 2020 2020 2020 2020 2020 2020 2020 5374                St
-0001e7a0: 6445 7272 2865 7272 290a 2020 2020 2020  dErr(err).      
-0001e7b0: 2020 2020 2020 6966 205f 7265 7475 726e        if _return
-0001e7c0: 5f3a 0a20 2020 2020 2020 2020 2020 2020  _:.             
-0001e7d0: 2020 2023 2053 7461 6e64 6172 6420 4f75     # Standard Ou
-0001e7e0: 7420 616e 6420 4572 726f 720a 2020 2020  t and Error.    
-0001e7f0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001e800: 726e 2054 7275 652c 7274 2c65 720a 2020  rn True,rt,er.  
-0001e810: 2020 6966 205f 7265 7475 726e 5f3a 0a20    if _return_:. 
-0001e820: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
-0001e830: 6c73 652c 7274 2c27 4e6f 7420 5374 7269  lse,rt,'Not Stri
-0001e840: 6e67 2063 6f64 652e 2072 6571 7569 7265  ng code. require
-0001e850: 6420 2a53 5452 494e 472a 2043 6f64 652e  d *STRING* Code.
-0001e860: 2720 2023 4e6f 7420 6120 7374 7269 6e67  '  #Not a string
-0001e870: 2063 6f64 650a 0a64 6566 2045 7863 6570   code..def Excep
-0001e880: 744d 6573 7361 6765 286d 7367 3d27 272c  tMessage(msg='',
-0001e890: 6465 6661 756c 743d 4e6f 6e65 293a 0a20  default=None):. 
-0001e8a0: 2020 2027 2727 0a20 2020 2054 7279 3a0a     '''.    Try:.
-0001e8b0: 2020 2020 2020 2041 4141 0a20 2020 2045         AAA.    E
-0001e8c0: 7863 6570 743a 0a20 2020 2020 2020 6572  xcept:.       er
-0001e8d0: 723d 4578 6365 7074 4d65 7373 6167 6528  r=ExceptMessage(
-0001e8e0: 2920 3d3e 2049 6620 6578 6365 7074 696e  ) => If exceptin
-0001e8f0: 6720 7468 656e 2074 616b 656e 2065 7272  g then taken err
-0001e900: 6f72 206f 7220 7472 6163 6562 6163 6b20  or or traceback 
-0001e910: 636f 6465 2061 6e64 2072 6574 7572 6e20  code and return 
-0001e920: 6974 0a20 2020 2027 2727 0a20 2020 2065  it.    '''.    e
-0001e930: 3d73 7973 2e65 7863 5f69 6e66 6f28 295b  =sys.exc_info()[
-0001e940: 305d 0a20 2020 2065 723d 7472 6163 6562  0].    er=traceb
-0001e950: 6163 6b2e 666f 726d 6174 5f65 7863 2829  ack.format_exc()
-0001e960: 0a20 2020 2069 6620 6520 6f72 2065 7220  .    if e or er 
-0001e970: 213d 2027 4e6f 6e65 5479 7065 3a20 4e6f  != 'NoneType: No
-0001e980: 6e65 5c6e 273a 0a20 2020 2020 2020 2069  ne\n':.        i
-0001e990: 6620 6d73 673a 0a20 2020 2020 2020 2020  f msg:.         
-0001e9a0: 2020 206d 7367 3d27 7b7d 5c6e 5c6e 7b7d     msg='{}\n\n{}
-0001e9b0: 5c6e 5c6e 7b7d 272e 666f 726d 6174 286d  \n\n{}'.format(m
-0001e9c0: 7367 2c65 2c65 7229 0a20 2020 2020 2020  sg,e,er).       
-0001e9d0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0001e9e0: 2020 206d 7367 3d27 5c6e 5c6e 7b7d 5c6e     msg='\n\n{}\n
-0001e9f0: 5c6e 7b7d 272e 666f 726d 6174 2865 2c65  \n{}'.format(e,e
-0001ea00: 7229 0a20 2020 2020 2020 2072 6574 7572  r).        retur
-0001ea10: 6e20 6d73 670a 2020 2020 7265 7475 726e  n msg.    return
-0001ea20: 2064 6566 6175 6c74 0a0a 6465 6620 4970   default..def Ip
-0001ea30: 5634 2869 703d 4e6f 6e65 2c6f 7574 3d27  V4(ip=None,out='
-0001ea40: 7374 7227 2c64 6566 6175 6c74 3d46 616c  str',default=Fal
-0001ea50: 7365 2c70 6f72 743d 4e6f 6e65 2c62 6d63  se,port=None,bmc
-0001ea60: 3d46 616c 7365 2c75 7365 643d 4661 6c73  =False,used=Fals
-0001ea70: 652c 706f 6f6c 3d4e 6f6e 652c 7375 7070  e,pool=None,supp
-0001ea80: 6f72 745f 686f 7374 6e61 6d65 3d46 616c  ort_hostname=Fal
-0001ea90: 7365 2c69 666e 616d 653d 4661 6c73 6529  se,ifname=False)
-0001eaa0: 3a0a 2020 2020 2727 270a 2020 2020 6368  :.    '''.    ch
-0001eab0: 6563 6b2f 636f 6e76 6572 7420 4950 0a20  eck/convert IP. 
-0001eac0: 2020 2069 7020 3a20 696e 742c 2073 7472     ip : int, str
-0001ead0: 2c20 646f 6d61 696e 6e61 6d65 2c20 6574  , domainname, et
-0001eae0: 6865 726e 6574 2064 6576 206e 616d 652c  hernet dev name,
-0001eaf0: 204e 6f6e 650a 2020 2020 6f75 743a 0a20   None.    out:. 
-0001eb00: 2020 2020 2073 7472 203a 2064 6566 6175       str : defau
-0001eb10: 6c74 203a 2063 6f6e 7665 7274 2074 6f20  lt : convert to 
-0001eb20: 7878 782e 7878 782e 7878 782e 7878 7820  xxx.xxx.xxx.xxx 
-0001eb30: 666f 726d 6174 0a20 2020 2020 2069 6e74  format.      int
-0001eb40: 203a 2063 6f6e 7665 7274 2074 6f20 696e   : convert to in
-0001eb50: 7420 666f 726d 6174 0a20 2020 2020 2068  t format.      h
-0001eb60: 6578 203a 2063 6f6e 7665 7274 2074 6f20  ex : convert to 
-0001eb70: 6865 7820 666f 726d 6174 0a20 2020 2070  hex format.    p
-0001eb80: 6f72 743a 2069 6620 796f 7520 7761 6e74  ort: if you want
-0001eb90: 2063 6865 636b 2074 6865 2049 5020 7769   check the IP wi
-0001eba0: 7468 2070 6f72 7420 7468 656e 2074 7970  th port then typ
-0001ebb0: 650a 2020 2020 626d 6320 3a20 6465 6661  e.    bmc : defa
-0001ebc0: 756c 7420 4661 6c73 652c 2054 7275 653a  ult False, True:
-0001ebd0: 2063 6865 636b 2042 4d43 2070 6f72 7420   check BMC port 
-0001ebe0: 2836 3233 2c36 3634 2c34 3433 290a 2020  (623,664,443).  
-0001ebf0: 2020 7265 7475 726e 203a 2049 502c 2069    return : IP, i
-0001ec00: 6620 6661 696c 2074 6865 6e20 7265 7475  f fail then retu
-0001ec10: 726e 2064 6566 6175 6c74 2076 616c 7565  rn default value
-0001ec20: 0a20 2020 2075 7365 643a 0a20 2020 2020  .    used:.     
-0001ec30: 202a 2072 6571 7569 7265 6420 706f 7274   * required port
-0001ec40: 206f 7074 696f 6e2c 2062 7574 2063 6865   option, but che
-0001ec50: 636b 2077 6974 6820 7369 6e67 6c65 2070  ck with single p
-0001ec60: 6f72 740a 2020 2020 2020 4661 6c73 653a  ort.      False:
-0001ec70: 2064 6566 6175 6c74 2028 6e6f 7420 6368   default (not ch
-0001ec80: 6563 6b29 0a20 2020 2020 2054 7275 653a  eck).      True:
-0001ec90: 2043 6865 636b 2049 5020 616c 7265 6164   Check IP alread
-0001eca0: 7920 7573 6564 2074 6865 2070 6f72 7428  y used the port(
-0001ecb0: 7265 7475 726e 2054 7275 6529 206f 7220  return True) or 
-0001ecc0: 7374 696c 6c20 6176 6169 6c61 626c 6528  still available(
-0001ecd0: 7265 7475 726e 2046 616c 7365 290a 2020  return False).  
-0001ece0: 2020 706f 6f6c 3a0a 2020 2020 2020 5475    pool:.      Tu
-0001ecf0: 706c 653a 2069 6620 6769 7665 2049 5020  ple: if give IP 
-0001ed00: 506f 6f6c 2873 7461 7274 2c65 6e64 2920  Pool(start,end) 
-0001ed10: 7468 656e 2063 6865 636b 2074 6865 2049  then check the I
-0001ed20: 5020 6973 2069 6e20 7468 6520 504f 4f4c  P is in the POOL
-0001ed30: 2072 616e 6765 206f 7220 6e6f 742e 0a20   range or not.. 
-0001ed40: 2020 2020 204c 6973 7420 3a20 4950 2069       List : IP i
-0001ed50: 7320 696e 2074 6865 2050 6f6f 6c20 6c69  s in the Pool li
-0001ed60: 7374 0a20 2020 2069 666e 616d 653a 0a20  st.    ifname:. 
-0001ed70: 2020 2020 2054 7275 653a 2069 7020 7769       True: ip wi
-0001ed80: 6c6c 206e 6574 776f 726b 2064 6576 6963  ll network devic
-0001ed90: 6520 6e61 6d65 2074 6865 6e20 6669 6e64  e name then find
-0001eda0: 2069 7020 6164 6472 6573 730a 2020 2020   ip address.    
-0001edb0: 2727 270a 2020 2020 6966 2069 666e 616d  '''.    if ifnam
-0001edc0: 6520 6973 2054 7275 653a 0a20 2020 2020  e is True:.     
-0001edd0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0001ede0: 2869 702c 7374 7229 2061 6e64 2069 703a  (ip,str) and ip:
-0001edf0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001ee00: 6e6f 7420 6f73 2e70 6174 682e 6973 6469  not os.path.isdi
-0001ee10: 7228 272f 7379 732f 636c 6173 732f 6e65  r('/sys/class/ne
-0001ee20: 742f 7b7d 272e 666f 726d 6174 2869 7029  t/{}'.format(ip)
-0001ee30: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0001ee40: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
-0001ee50: 740a 2020 2020 2020 2020 2020 2020 7472  t.            tr
-0001ee60: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-0001ee70: 2020 2073 203d 2073 6f63 6b65 742e 736f     s = socket.so
-0001ee80: 636b 6574 2873 6f63 6b65 742e 4146 5f49  cket(socket.AF_I
-0001ee90: 4e45 542c 2073 6f63 6b65 742e 534f 434b  NET, socket.SOCK
-0001eea0: 5f44 4752 414d 290a 2020 2020 2020 2020  _DGRAM).        
-0001eeb0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0001eec0: 6f63 6b65 742e 696e 6574 5f6e 746f 6128  ocket.inet_ntoa(
-0001eed0: 6663 6e74 6c2e 696f 6374 6c28 0a20 2020  fcntl.ioctl(.   
-0001eee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001eef0: 2073 2e66 696c 656e 6f28 292c 0a20 2020   s.fileno(),.   
-0001ef00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ef10: 2030 7838 3931 352c 2020 2320 5349 4f43   0x8915,  # SIOC
-0001ef20: 4749 4641 4444 520a 2020 2020 2020 2020  GIFADDR.        
-0001ef30: 2020 2020 2020 2020 2020 2020 7374 7275              stru
-0001ef40: 6374 2e70 6163 6b28 2732 3536 7327 2c20  ct.pack('256s', 
-0001ef50: 6970 5b3a 3135 5d29 0a20 2020 2020 2020  ip[:15]).       
-0001ef60: 2020 2020 2020 2020 2029 5b32 303a 3234           )[20:24
-0001ef70: 5d29 0a20 2020 2020 2020 2020 2020 2065  ]).            e
-0001ef80: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-0001ef90: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-0001efa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001efb0: 6465 765f 696e 666f 3d6f 732e 706f 7065  dev_info=os.pope
-0001efc0: 6e28 2769 7020 6164 6472 2073 686f 7720  n('ip addr show 
-0001efd0: 7b7d 272e 666f 726d 6174 2869 7029 290a  {}'.format(ip)).
-0001efe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001eff0: 2020 2020 6966 2064 6576 5f69 6e66 6f3a      if dev_info:
-0001f000: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f010: 2020 2020 2020 2020 2066 6f75 6e64 5f69           found_i
-0001f020: 703d 6465 765f 696e 666f 2e72 6561 6428  p=dev_info.read(
-0001f030: 292e 7370 6c69 7428 2269 6e65 7420 2229  ).split("inet ")
-0001f040: 5b31 5d2e 7370 6c69 7428 222f 2229 5b30  [1].split("/")[0
-0001f050: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-0001f060: 2020 2020 2020 2020 2020 6465 765f 696e            dev_in
-0001f070: 666f 2e63 6c6f 7365 2829 0a20 2020 2020  fo.close().     
-0001f080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f090: 2020 2072 6574 7572 6e20 666f 756e 645f     return found_
-0001f0a0: 6970 0a20 2020 2020 2020 2020 2020 2020  ip.             
-0001f0b0: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-0001f0c0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001f0d0: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
-0001f0e0: 2020 2020 2020 7265 7475 726e 2073 6f63        return soc
-0001f0f0: 6b65 742e 6765 7468 6f73 7462 796e 616d  ket.gethostbynam
-0001f100: 6528 736f 636b 6574 2e67 6574 686f 7374  e(socket.gethost
-0001f110: 6e61 6d65 2829 290a 0a20 2020 2069 6620  name())..    if 
-0001f120: 4973 4e6f 6e65 2869 7029 3a20 7265 7475  IsNone(ip): retu
-0001f130: 726e 2064 6566 6175 6c74 2020 2020 0a0a  rn default    ..
-0001f140: 2020 2020 6465 6620 4973 4f70 656e 506f      def IsOpenPo
-0001f150: 7274 2869 702c 706f 7274 293a 0a20 2020  rt(ip,port):.   
-0001f160: 2020 2020 2027 2727 0a20 2020 2020 2020       '''.       
-0001f170: 2049 7420 636f 6e6e 6563 7469 6f6e 6162   It connectionab
-0001f180: 6c65 2070 6f72 7428 3f29 206c 696b 6520  le port(?) like 
-0001f190: 6173 2073 7368 2c20 6674 702c 2074 656c  as ssh, ftp, tel
-0001f1a0: 6e65 742c 2077 6562 2c20 2e2e 2e0a 2020  net, web, ....  
-0001f1b0: 2020 2020 2020 2727 270a 2020 2020 2020        '''.      
-0001f1c0: 2020 7463 705f 736b 203d 2073 6f63 6b65    tcp_sk = socke
-0001f1d0: 742e 736f 636b 6574 2873 6f63 6b65 742e  t.socket(socket.
-0001f1e0: 4146 5f49 4e45 542c 2073 6f63 6b65 742e  AF_INET, socket.
-0001f1f0: 534f 434b 5f53 5452 4541 4d29 0a20 2020  SOCK_STREAM).   
-0001f200: 2020 2020 2074 6370 5f73 6b2e 7365 7473       tcp_sk.sets
-0001f210: 6f63 6b6f 7074 2873 6f63 6b65 742e 534f  ockopt(socket.SO
-0001f220: 4c5f 534f 434b 4554 2c20 736f 636b 6574  L_SOCKET, socket
-0001f230: 2e53 4f5f 5245 5553 4541 4444 522c 2031  .SO_REUSEADDR, 1
-0001f240: 290a 2020 2020 2020 2020 7463 705f 736b  ).        tcp_sk
-0001f250: 2e73 6574 7469 6d65 6f75 7428 3129 0a20  .settimeout(1). 
-0001f260: 2020 2020 2020 2072 743d 5b5d 0a20 2020         rt=[].   
-0001f270: 2020 2020 2066 6f72 2070 7420 696e 2070       for pt in p
-0001f280: 6f72 743a 0a20 2020 2020 2020 2020 2020  ort:.           
-0001f290: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-0001f2a0: 2020 2020 2020 7463 705f 736b 2e63 6f6e        tcp_sk.con
-0001f2b0: 6e65 6374 2828 6970 2c70 7429 290a 2020  nect((ip,pt)).  
-0001f2c0: 2020 2020 2020 2020 2020 2020 2020 7463                tc
-0001f2d0: 705f 736b 2e63 6c6f 7365 2829 0a20 2020  p_sk.close().   
-0001f2e0: 2020 2020 2020 2020 2020 2020 2072 742e               rt.
-0001f2f0: 6170 7065 6e64 2870 7429 0a20 2020 2020  append(pt).     
-0001f300: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
-0001f310: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0001f320: 6173 730a 2020 2020 2020 2020 7265 7475  ass.        retu
-0001f330: 726e 2072 740a 2020 2020 6465 6620 4973  rn rt.    def Is
-0001f340: 5573 6564 506f 7274 2869 702c 706f 7274  UsedPort(ip,port
-0001f350: 293a 0a20 2020 2020 2020 2027 2727 0a20  ):.        '''. 
-0001f360: 2020 2020 2020 2054 6865 2049 5020 616c         The IP al
-0001f370: 7265 6164 7920 7573 6564 2074 6865 2070  ready used the p
-0001f380: 6f72 742c 2069 7420 6a75 7374 2063 6865  ort, it just che
-0001f390: 636b 7570 2061 7661 696c 6162 6c65 2070  ckup available p
-0001f3a0: 6f72 7420 6f72 2061 6c72 6561 6420 7573  ort or alread us
-0001f3b0: 6564 0a20 2020 2020 2020 2027 2727 0a20  ed.        '''. 
-0001f3c0: 2020 2020 2020 2069 6620 4973 4e6f 6e65         if IsNone
-0001f3d0: 2869 702c 6368 6b5f 7661 6c3d 5b4e 6f6e  (ip,chk_val=[Non
-0001f3e0: 652c 2727 2c27 6c6f 6361 6c68 6f73 7427  e,'','localhost'
-0001f3f0: 2c27 6c6f 6361 6c27 5d29 3a0a 2020 2020  ,'local']):.    
-0001f400: 2020 2020 2020 2020 6970 3d27 3132 372e          ip='127.
-0001f410: 302e 302e 3127 0a20 2020 2020 2020 2073  0.0.1'.        s
-0001f420: 6f63 3d73 6f63 6b65 742e 736f 636b 6574  oc=socket.socket
-0001f430: 2873 6f63 6b65 742e 4146 5f49 4e45 542c  (socket.AF_INET,
-0001f440: 2073 6f63 6b65 742e 534f 434b 5f53 5452   socket.SOCK_STR
-0001f450: 4541 4d29 0a20 2020 2020 2020 2072 743d  EAM).        rt=
-0001f460: 5b5d 0a20 2020 2020 2020 2066 6f72 2070  [].        for p
-0001f470: 7420 696e 2070 6f72 743a 0a20 2020 2020  t in port:.     
-0001f480: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-0001f490: 2020 2020 2020 2020 2020 2020 6c6f 6361              loca
-0001f4a0: 7469 6f6e 3d28 6970 2c70 7429 0a20 2020  tion=(ip,pt).   
-0001f4b0: 2020 2020 2020 2020 2020 2020 2072 743d               rt=
-0001f4c0: 736f 632e 636f 6e6e 6563 745f 6578 286c  soc.connect_ex(l
-0001f4d0: 6f63 6174 696f 6e29 0a20 2020 2020 2020  ocation).       
-0001f4e0: 2020 2020 2020 2020 2073 6f63 2e63 6c6f           soc.clo
-0001f4f0: 7365 2829 0a20 2020 2020 2020 2020 2020  se().           
-0001f500: 2020 2020 2023 7274 3d3d 3020 7468 656e       #rt==0 then
-0001f510: 2061 6c72 6561 6479 2075 7365 640a 2020   already used.  
-0001f520: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0001f530: 2072 7420 3d3d 2030 3a20 7274 2e61 7070   rt == 0: rt.app
-0001f540: 656e 6428 7074 290a 2020 2020 2020 2020  end(pt).        
-0001f550: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
-0001f560: 2020 2020 2020 2020 2020 2020 7061 7373              pass
-0001f570: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001f580: 7274 0a20 2020 2069 6620 706f 7274 203d  rt.    if port =
-0001f590: 3d20 2762 6d63 273a 0a20 2020 2020 2020  = 'bmc':.       
-0001f5a0: 2062 6d63 3d54 7275 650a 2020 2020 2020   bmc=True.      
-0001f5b0: 2020 706f 7274 3d4e 6f6e 650a 2020 2020    port=None.    
-0001f5c0: 6966 2062 6d63 3a20 2320 5570 6461 7465  if bmc: # Update
-0001f5d0: 2042 4d43 2050 6f72 740a 2020 2020 2020   BMC Port.      
-0001f5e0: 2020 6465 6661 756c 745f 626d 635f 706f    default_bmc_po
-0001f5f0: 7274 3d5b 3632 332c 3636 342c 3434 335d  rt=[623,664,443]
-0001f600: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-0001f610: 4973 4e6f 6e65 2870 6f72 7429 3a0a 2020  IsNone(port):.  
-0001f620: 2020 2020 2020 2020 2020 706f 7274 3d49            port=I
-0001f630: 6e74 2870 6f72 742c 6465 6661 756c 743d  nt(port,default=
-0001f640: 4661 6c73 6529 0a20 2020 2020 2020 2020  False).         
-0001f650: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0001f660: 2870 6f72 742c 286c 6973 742c 7475 706c  (port,(list,tupl
-0001f670: 6529 293a 0a20 2020 2020 2020 2020 2020  e)):.           
-0001f680: 2020 2020 2066 6f72 2069 2069 6e20 706f       for i in po
-0001f690: 7274 3a0a 2020 2020 2020 2020 2020 2020  rt:.            
-0001f6a0: 2020 2020 2020 2020 6966 2069 206e 6f74          if i not
-0001f6b0: 2069 6e20 6465 6661 756c 745f 626d 635f   in default_bmc_
-0001f6c0: 706f 7274 3a20 6465 6661 756c 745f 626d  port: default_bm
-0001f6d0: 635f 706f 7274 2e61 7070 656e 6428 6929  c_port.append(i)
-0001f6e0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-0001f6f0: 6620 6973 696e 7374 616e 6365 2870 6f72  f isinstance(por
-0001f700: 742c 696e 7429 3a0a 2020 2020 2020 2020  t,int):.        
-0001f710: 2020 2020 2020 2020 6966 2070 6f72 7420          if port 
-0001f720: 6e6f 7420 696e 2064 6566 6175 6c74 5f62  not in default_b
-0001f730: 6d63 5f70 6f72 743a 0a20 2020 2020 2020  mc_port:.       
-0001f740: 2020 2020 2020 2020 2020 2020 2064 6566               def
-0001f750: 6175 6c74 5f62 6d63 5f70 6f72 742e 6170  ault_bmc_port.ap
-0001f760: 7065 6e64 2870 6f72 7429 0a20 2020 2020  pend(port).     
-0001f770: 2020 2070 6f72 743d 7475 706c 6528 6465     port=tuple(de
-0001f780: 6661 756c 745f 626d 635f 706f 7274 290a  fault_bmc_port).
-0001f790: 2020 2020 6966 2070 6f72 743a 0a20 2020      if port:.   
-0001f7a0: 2020 2020 2070 6f72 743d 496e 7428 706f       port=Int(po
-0001f7b0: 7274 2c64 6566 6175 6c74 3d46 616c 7365  rt,default=False
-0001f7c0: 290a 2020 2020 2020 2020 6966 2070 6f72  ).        if por
-0001f7d0: 7420 6973 2046 616c 7365 3a20 7265 7475  t is False: retu
-0001f7e0: 726e 2064 6566 6175 6c74 0a20 2020 2020  rn default.     
-0001f7f0: 2020 2069 6620 5479 7065 2870 6f72 742c     if Type(port,
-0001f800: 696e 7429 3a20 706f 7274 3d5b 706f 7274  int): port=[port
-0001f810: 5d0a 2020 2020 6970 5f69 6e74 3d4e 6f6e  ].    ip_int=Non
-0001f820: 650a 2020 2020 6966 2069 7369 6e73 7461  e.    if isinsta
-0001f830: 6e63 6528 6970 2c73 7472 293a 0a20 2020  nce(ip,str):.   
-0001f840: 2020 2020 2069 7073 7472 3d69 702e 7374       ipstr=ip.st
-0001f850: 7269 7028 290a 2020 2020 2020 2020 6966  rip().        if
-0001f860: 2027 3078 2720 696e 2069 7073 7472 3a0a   '0x' in ipstr:.
-0001f870: 2020 2020 2020 2020 2020 2020 6970 5f69              ip_i
-0001f880: 6e74 3d69 6e74 2869 7073 7472 2c31 3629  nt=int(ipstr,16)
-0001f890: 0a20 2020 2020 2020 2065 6c69 6620 6970  .        elif ip
-0001f8a0: 7374 722e 6973 6469 6769 7428 293a 0a20  str.isdigit():. 
-0001f8b0: 2020 2020 2020 2020 2020 2069 705f 696e             ip_in
-0001f8c0: 743d 696e 7428 6970 7374 7229 0a20 2020  t=int(ipstr).   
-0001f8d0: 2020 2020 2065 6c69 6620 272e 2720 696e       elif '.' in
-0001f8e0: 2069 7073 7472 3a0a 2020 2020 2020 2020   ipstr:.        
-0001f8f0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-0001f900: 2020 2020 2020 2020 2069 705f 696e 743d           ip_int=
-0001f910: 7374 7275 6374 2e75 6e70 6163 6b28 2221  struct.unpack("!
-0001f920: 4922 2c20 736f 636b 6574 2e69 6e65 745f  I", socket.inet_
-0001f930: 6174 6f6e 2869 7073 7472 2929 5b30 5d20  aton(ipstr))[0] 
-0001f940: 2320 636f 6e76 6572 7420 496e 7420 4950  # convert Int IP
-0001f950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f960: 2023 7374 7275 6374 2e75 6e70 6163 6b28   #struct.unpack(
-0001f970: 2221 4c22 2c20 736f 636b 6574 2e69 6e65  "!L", socket.ine
-0001f980: 745f 6174 6f6e 2869 7029 295b 305d 0a20  t_aton(ip))[0]. 
-0001f990: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-0001f9a0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-0001f9b0: 2020 2069 6620 7375 7070 6f72 745f 686f     if support_ho
-0001f9c0: 7374 6e61 6d65 3a0a 2020 2020 2020 2020  stname:.        
-0001f9d0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-0001f9e0: 2023 2068 6f73 746e 616d 6520 6162 632e   # hostname abc.
-0001f9f0: 6465 6620 6361 7365 0a20 2020 2020 2020  def case.       
-0001fa00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fa10: 2072 6574 7572 6e20 4970 5634 2873 6f63   return IpV4(soc
-0001fa20: 6b65 742e 6765 7468 6f73 7462 796e 616d  ket.gethostbynam
-0001fa30: 6528 6970 7374 7229 2c6f 7574 3d6f 7574  e(ipstr),out=out
-0001fa40: 2c64 6566 6175 6c74 3d64 6566 6175 6c74  ,default=default
-0001fa50: 2c70 6f72 743d 706f 7274 2c62 6d63 3d62  ,port=port,bmc=b
-0001fa60: 6d63 2c75 7365 643d 7573 6564 2c70 6f6f  mc,used=used,poo
-0001fa70: 6c3d 706f 6f6c 290a 2020 2020 2020 2020  l=pool).        
-0001fa80: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0001fa90: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
-0001faa0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001fab0: 726e 2064 6566 6175 6c74 0a20 2020 2020  rn default.     
-0001fac0: 2020 2065 6c69 6620 7375 7070 6f72 745f     elif support_
-0001fad0: 686f 7374 6e61 6d65 3a20 2320 686f 7374  hostname: # host
-0001fae0: 6e61 6d65 2061 6263 2063 6173 650a 2020  name abc case.  
-0001faf0: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
-0001fb00: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001fb10: 6574 7572 6e20 4970 5634 2873 6f63 6b65  eturn IpV4(socke
-0001fb20: 742e 6765 7468 6f73 7462 796e 616d 6528  t.gethostbyname(
-0001fb30: 6970 7374 7229 2c6f 7574 3d6f 7574 2c64  ipstr),out=out,d
-0001fb40: 6566 6175 6c74 3d64 6566 6175 6c74 2c70  efault=default,p
-0001fb50: 6f72 743d 706f 7274 2c62 6d63 3d62 6d63  ort=port,bmc=bmc
-0001fb60: 2c75 7365 643d 7573 6564 2c70 6f6f 6c3d  ,used=used,pool=
-0001fb70: 706f 6f6c 290a 2020 2020 2020 2020 2020  pool).          
-0001fb80: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
-0001fb90: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001fba0: 2064 6566 6175 6c74 0a20 2020 2065 6c69   default.    eli
-0001fbb0: 6620 6973 696e 7374 616e 6365 2869 702c  f isinstance(ip,
-0001fbc0: 696e 7429 2061 6e64 206e 6f74 2069 7369  int) and not isi
-0001fbd0: 6e73 7461 6e63 6528 6970 2c62 6f6f 6c29  nstance(ip,bool)
-0001fbe0: 3a0a 2020 2020 2020 2020 7472 793a 0a20  :.        try:. 
-0001fbf0: 2020 2020 2020 2020 2020 2073 6f63 6b65             socke
-0001fc00: 742e 696e 6574 5f6e 746f 6128 7374 7275  t.inet_ntoa(stru
-0001fc10: 6374 2e70 6163 6b28 2221 4922 2c20 6970  ct.pack("!I", ip
-0001fc20: 2929 2023 2063 6865 636b 2069 6e74 2069  )) # check int i
-0001fc30: 7320 4950 206f 7220 6e6f 740a 2020 2020  s IP or not.    
-0001fc40: 2020 2020 2020 2020 6970 5f69 6e74 3d69          ip_int=i
-0001fc50: 700a 2020 2020 2020 2020 6578 6365 7074  p.        except
-0001fc60: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0001fc70: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
-0001fc80: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
-0001fc90: 2869 702c 7479 7065 2868 6578 2929 3a0a  (ip,type(hex)):.
-0001fca0: 2020 2020 2020 2020 6970 5f69 6e74 3d69          ip_int=i
-0001fcb0: 6e74 2869 702c 3136 290a 0a20 2020 2069  nt(ip,16)..    i
-0001fcc0: 6620 6e6f 7420 4973 4e6f 6e65 2869 705f  f not IsNone(ip_
-0001fcd0: 696e 7429 3a0a 2020 2020 2020 2020 7472  int):.        tr
-0001fce0: 793a 0a20 2020 2020 2020 2020 2020 2069  y:.            i
-0001fcf0: 6620 6f75 7420 696e 205b 2769 6e74 272c  f out in ['int',
-0001fd00: 696e 745d 3a0a 2020 2020 2020 2020 2020  int]:.          
-0001fd10: 2020 2020 2020 7265 7475 726e 2069 705f        return ip_
-0001fd20: 696e 740a 2020 2020 2020 2020 2020 2020  int.            
-0001fd30: 656c 6966 206f 7574 2069 6e20 5b27 6865  elif out in ['he
-0001fd40: 7827 2c68 6578 5d3a 0a20 2020 2020 2020  x',hex]:.       
-0001fd50: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001fd60: 6865 7828 6970 5f69 6e74 290a 2020 2020  hex(ip_int).    
-0001fd70: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-0001fd80: 6e73 7461 6e63 6528 706f 6f6c 2c74 7570  nstance(pool,tup
-0001fd90: 6c65 293a 0a20 2020 2020 2020 2020 2020  le):.           
-0001fda0: 2020 2020 2069 6620 6c65 6e28 706f 6f6c       if len(pool
-0001fdb0: 2920 3d3d 2031 3a0a 2020 2020 2020 2020  ) == 1:.        
-0001fdc0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001fdd0: 726e 2049 7056 3428 706f 6f6c 5b30 5d2c  rn IpV4(pool[0],
-0001fde0: 6f75 743d 696e 7429 203c 3d20 6970 5f69  out=int) <= ip_i
-0001fdf0: 6e74 0a20 2020 2020 2020 2020 2020 2020  nt.             
-0001fe00: 2020 2065 6c69 6620 6c65 6e28 706f 6f6c     elif len(pool
-0001fe10: 2920 3d3d 2032 3a0a 2020 2020 2020 2020  ) == 2:.        
-0001fe20: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0001fe30: 6f74 2070 6f6f 6c5b 305d 2061 6e64 2070  ot pool[0] and p
-0001fe40: 6f6f 6c5b 315d 3a0a 2020 2020 2020 2020  ool[1]:.        
-0001fe50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fe60: 7265 7475 726e 2069 705f 696e 7420 3c3d  return ip_int <=
-0001fe70: 2049 7056 3428 706f 6f6c 5b31 5d2c 6f75   IpV4(pool[1],ou
-0001fe80: 743d 696e 7429 0a20 2020 2020 2020 2020  t=int).         
-0001fe90: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0001fea0: 6e6f 7420 706f 6f6c 5b31 5d20 616e 6420  not pool[1] and 
-0001feb0: 706f 6f6c 5b30 5d3a 0a20 2020 2020 2020  pool[0]:.       
-0001fec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fed0: 2072 6574 7572 6e20 4970 5634 2870 6f6f   return IpV4(poo
-0001fee0: 6c5b 305d 2c6f 7574 3d69 6e74 2920 3c3d  l[0],out=int) <=
-0001fef0: 2069 705f 696e 7420 0a20 2020 2020 2020   ip_int .       
-0001ff00: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-0001ff10: 6620 706f 6f6c 5b30 5d20 616e 6420 706f  f pool[0] and po
-0001ff20: 6f6c 5b31 5d3a 0a20 2020 2020 2020 2020  ol[1]:.         
-0001ff30: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001ff40: 6574 7572 6e20 4970 5634 2870 6f6f 6c5b  eturn IpV4(pool[
-0001ff50: 305d 2c6f 7574 3d69 6e74 2920 3c3d 2069  0],out=int) <= i
-0001ff60: 705f 696e 7420 3c3d 2049 7056 3428 706f  p_int <= IpV4(po
-0001ff70: 6f6c 5b31 5d2c 6f75 743d 696e 7429 0a20  ol[1],out=int). 
-0001ff80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ff90: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0001ffa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ffb0: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
-0001ffc0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0001ffd0: 2069 7369 6e73 7461 6e63 6528 706f 6f6c   isinstance(pool
-0001ffe0: 2c6c 6973 7429 3a0a 2020 2020 2020 2020  ,list):.        
-0001fff0: 2020 2020 2020 2020 706f 6f6c 3d5b 4970          pool=[Ip
-00020000: 5634 2869 2c6f 7574 3d69 6e74 2920 666f  V4(i,out=int) fo
-00020010: 7220 6920 696e 2070 6f6f 6c5d 0a20 2020  r i in pool].   
-00020020: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00020030: 7572 6e20 6970 5f69 6e74 2069 6e20 706f  urn ip_int in po
-00020040: 6f6c 0a20 2020 2020 2020 2020 2020 2065  ol.            e
-00020050: 6c73 653a 2023 6465 6661 756c 7420 746f  lse: #default to
-00020060: 2073 7472 0a20 2020 2020 2020 2020 2020   str.           
-00020070: 2020 2020 2069 705f 7374 723d 736f 636b       ip_str=sock
-00020080: 6574 2e69 6e65 745f 6e74 6f61 2873 7472  et.inet_ntoa(str
-00020090: 7563 742e 7061 636b 2822 2149 222c 2069  uct.pack("!I", i
-000200a0: 705f 696e 7429 290a 2020 2020 2020 2020  p_int)).        
-000200b0: 2020 2020 2020 2020 6966 2070 6f72 743a          if port:
-000200c0: 2023 2049 6620 6269 6e67 2050 6f72 7420   # If bing Port 
-000200d0: 7468 656e 2063 6865 636b 2074 6865 2070  then check the p
-000200e0: 6f72 740a 2020 2020 2020 2020 2020 2020  ort.            
-000200f0: 2020 2020 2020 2020 6966 2075 7365 643a          if used:
-00020100: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020110: 2020 2020 2020 2020 2072 743d 4973 5573           rt=IsUs
-00020120: 6564 506f 7274 2869 705f 7374 722c 706f  edPort(ip_str,po
-00020130: 7274 290a 2020 2020 2020 2020 2020 2020  rt).            
-00020140: 2020 2020 2020 2020 2020 2020 6966 2072              if r
-00020150: 743a 2072 6574 7572 6e20 7274 0a20 2020  t: return rt.   
-00020160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020170: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00020180: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00020190: 743d 4973 4f70 656e 506f 7274 2869 705f  t=IsOpenPort(ip_
-000201a0: 7374 722c 706f 7274 290a 2020 2020 2020  str,port).      
-000201b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000201c0: 2020 6966 2072 743a 2072 6574 7572 6e20    if rt: return 
-000201d0: 7274 0a20 2020 2020 2020 2020 2020 2020  rt.             
-000201e0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000201f0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00020200: 7572 6e20 6970 5f73 7472 0a20 2020 2020  urn ip_str.     
-00020210: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-00020220: 2020 2020 2020 2070 6173 730a 2020 2020         pass.    
-00020230: 7265 7475 726e 2064 6566 6175 6c74 0a0a  return default..
-00020240: 6465 6620 7069 6e67 2868 6f73 742c 2a2a  def ping(host,**
-00020250: 6f70 7473 293a 0a20 2020 2049 434d 505f  opts):.    ICMP_
-00020260: 4543 484f 5f52 4551 5545 5354 203d 2038  ECHO_REQUEST = 8
-00020270: 2023 2053 6565 6d73 2074 6f20 6265 2074   # Seems to be t
-00020280: 6865 2073 616d 6520 6f6e 2053 6f6c 6172  he same on Solar
-00020290: 6973 2e20 4672 6f6d 202f 7573 722f 696e  is. From /usr/in
-000202a0: 636c 7564 652f 6c69 6e75 782f 6963 6d70  clude/linux/icmp
-000202b0: 2e68 3b0a 2020 2020 4943 4d50 5f43 4f44  .h;.    ICMP_COD
-000202c0: 4520 3d20 736f 636b 6574 2e67 6574 7072  E = socket.getpr
-000202d0: 6f74 6f62 796e 616d 6528 2769 636d 7027  otobyname('icmp'
-000202e0: 290a 2020 2020 4552 524f 525f 4445 5343  ).    ERROR_DESC
-000202f0: 5220 3d20 7b0a 2020 2020 2020 2020 313a  R = {.        1:
-00020300: 2027 202d 204e 6f74 6520 7468 6174 2049   ' - Note that I
-00020310: 434d 5020 6d65 7373 6167 6573 2063 616e  CMP messages can
-00020320: 206f 6e6c 7920 6265 2027 0a20 2020 2020   only be '.     
-00020330: 2020 2020 2020 2773 656e 7420 6672 6f6d        'sent from
-00020340: 2070 726f 6365 7373 6573 2072 756e 6e69   processes runni
-00020350: 6e67 2061 7320 726f 6f74 2e27 2c0a 2020  ng as root.',.  
-00020360: 2020 2020 2020 3130 3031 333a 2027 202d        10013: ' -
-00020370: 204e 6f74 6520 7468 6174 2049 434d 5020   Note that ICMP 
-00020380: 6d65 7373 6167 6573 2063 616e 206f 6e6c  messages can onl
-00020390: 7920 6265 2073 656e 7420 6279 270a 2020  y be sent by'.  
-000203a0: 2020 2020 2020 2020 2020 2020 2027 2075               ' u
-000203b0: 7365 7273 206f 7220 7072 6f63 6573 7365  sers or processe
-000203c0: 7320 7769 7468 2061 646d 696e 6973 7472  s with administr
-000203d0: 6174 6f72 2072 6967 6874 732e 270a 2020  ator rights.'.  
-000203e0: 2020 2020 2020 7d0a 2020 2020 6465 6620        }.    def 
-000203f0: 6368 6563 6b73 756d 286d 7367 293a 0a20  checksum(msg):. 
-00020400: 2020 2020 2020 2073 756d 203d 2030 0a20         sum = 0. 
-00020410: 2020 2020 2020 2073 697a 6520 3d20 286c         size = (l
-00020420: 656e 286d 7367 2920 2f2f 2032 2920 2a20  en(msg) // 2) * 
-00020430: 320a 2020 2020 2020 2020 666f 7220 6320  2.        for c 
-00020440: 696e 2072 616e 6765 2830 2c73 697a 652c  in range(0,size,
-00020450: 2032 293a 0a20 2020 2020 2020 2020 2020   2):.           
-00020460: 2073 756d 203d 2028 7375 6d20 2b20 6f72   sum = (sum + or
-00020470: 6428 6d73 675b 6320 2b20 315d 292a 3235  d(msg[c + 1])*25
-00020480: 362b 6f72 6428 6d73 675b 635d 2929 2026  6+ord(msg[c])) &
-00020490: 2030 7866 6666 6666 6666 660a 2020 2020   0xffffffff.    
-000204a0: 2020 2020 6966 2073 697a 6520 3c20 6c65      if size < le
-000204b0: 6e28 6d73 6729 3a0a 2020 2020 2020 2020  n(msg):.        
-000204c0: 2020 2020 7375 6d20 3d20 2873 756d 2b6f      sum = (sum+o
-000204d0: 7264 286d 7367 5b6c 656e 286d 7367 2920  rd(msg[len(msg) 
-000204e0: 2d20 315d 2929 2026 2030 7866 6666 6666  - 1])) & 0xfffff
-000204f0: 6666 660a 2020 2020 2020 2020 7261 203d  fff.        ra =
-00020500: 207e 2828 7375 6d20 3e3e 2031 3629 202b   ~((sum >> 16) +
-00020510: 2028 7375 6d20 2620 3078 6666 6666 2920   (sum & 0xffff) 
-00020520: 2b20 2873 756d 203e 3e20 3136 2929 2026  + (sum >> 16)) &
-00020530: 2030 7866 6666 660a 2020 2020 2020 2020   0xffff.        
-00020540: 7261 203d 2072 6120 3e3e 2038 207c 2028  ra = ra >> 8 | (
-00020550: 7261 203c 3c20 3820 2620 3078 6666 3030  ra << 8 & 0xff00
-00020560: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00020570: 2072 610a 0a20 2020 2064 6566 206d 6b5f   ra..    def mk_
-00020580: 7061 636b 6574 2873 697a 6529 3a0a 2020  packet(size):.  
-00020590: 2020 2020 2020 2222 224d 616b 6520 6120        """Make a 
-000205a0: 6e65 7720 6563 686f 2072 6571 7565 7374  new echo request
-000205b0: 2070 6163 6b65 7420 6163 636f 7264 696e   packet accordin
-000205c0: 6720 746f 2073 697a 6522 2222 0a20 2020  g to size""".   
-000205d0: 2020 2020 2023 2048 6561 6465 7220 6973       # Header is
-000205e0: 2074 7970 6520 2838 292c 2063 6f64 6520   type (8), code 
-000205f0: 2838 292c 2063 6865 636b 7375 6d20 2831  (8), checksum (1
-00020600: 3629 2c20 6964 2028 3136 292c 2073 6571  6), id (16), seq
-00020610: 7565 6e63 6520 2831 3629 0a20 2020 2020  uence (16).     
-00020620: 2020 2068 6561 6465 7220 3d20 7374 7275     header = stru
-00020630: 6374 2e70 6163 6b28 2762 6248 4868 272c  ct.pack('bbHHh',
-00020640: 2049 434d 505f 4543 484f 5f52 4551 5545   ICMP_ECHO_REQUE
-00020650: 5354 2c20 302c 2030 2c20 7369 7a65 2c20  ST, 0, 0, size, 
-00020660: 3129 0a20 2020 2020 2020 2023 6461 7461  1).        #data
-00020670: 203d 2073 7472 7563 742e 6361 6c63 7369   = struct.calcsi
-00020680: 7a65 2827 6262 4848 6827 2920 2a20 2751  ze('bbHHh') * 'Q
-00020690: 270a 2020 2020 2020 2020 6461 7461 203d  '.        data =
-000206a0: 2073 697a 6520 2a20 2751 270a 2020 2020   size * 'Q'.    
-000206b0: 2020 2020 6d79 5f63 6865 636b 7375 6d20      my_checksum 
-000206c0: 3d20 6368 6563 6b73 756d 2853 7472 2868  = checksum(Str(h
-000206d0: 6561 6465 7229 202b 2064 6174 6129 0a20  eader) + data). 
-000206e0: 2020 2020 2020 2068 6561 6465 7220 3d20         header = 
-000206f0: 7374 7275 6374 2e70 6163 6b28 2762 6248  struct.pack('bbH
-00020700: 4868 272c 2049 434d 505f 4543 484f 5f52  Hh', ICMP_ECHO_R
-00020710: 4551 5545 5354 2c20 302c 0a20 2020 2020  EQUEST, 0,.     
-00020720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020730: 2020 2020 2020 2020 736f 636b 6574 2e68          socket.h
-00020740: 746f 6e73 286d 795f 6368 6563 6b73 756d  tons(my_checksum
-00020750: 292c 2073 697a 652c 2031 290a 2020 2020  ), size, 1).    
-00020760: 2020 2020 7265 7475 726e 2068 6561 6465      return heade
-00020770: 7220 2b20 4279 7465 7328 6461 7461 290a  r + Bytes(data).
-00020780: 0a20 2020 2064 6566 2072 6563 6569 7665  .    def receive
-00020790: 286d 795f 736f 636b 6574 2c20 7373 697a  (my_socket, ssiz
-000207a0: 652c 2073 7469 6d65 2c20 7469 6d65 6f75  e, stime, timeou
-000207b0: 7429 3a0a 2020 2020 2020 2020 7768 696c  t):.        whil
-000207c0: 6520 5472 7565 3a0a 2020 2020 2020 2020  e True:.        
-000207d0: 2020 2020 6966 2074 696d 656f 7574 203c      if timeout <
-000207e0: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
-000207f0: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
-00020800: 2020 2020 2020 2020 7265 6164 7920 3d20          ready = 
-00020810: 7365 6c65 6374 2e73 656c 6563 7428 5b6d  select.select([m
-00020820: 795f 736f 636b 6574 5d2c 205b 5d2c 205b  y_socket], [], [
-00020830: 5d2c 2074 696d 656f 7574 290a 2020 2020  ], timeout).    
-00020840: 2020 2020 2020 2020 6966 2072 6561 6479          if ready
-00020850: 5b30 5d20 3d3d 205b 5d3a 2023 2054 696d  [0] == []: # Tim
-00020860: 656f 7574 0a20 2020 2020 2020 2020 2020  eout.           
-00020870: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
-00020880: 2020 2020 2020 2020 7265 6365 6976 6564          received
-00020890: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
-000208a0: 6528 290a 2020 2020 2020 2020 2020 2020  e().            
-000208b0: 7061 636b 6574 2c20 6164 6472 203d 206d  packet, addr = m
-000208c0: 795f 736f 636b 6574 2e72 6563 7666 726f  y_socket.recvfro
-000208d0: 6d28 3130 3234 290a 2020 2020 2020 2020  m(1024).        
-000208e0: 2020 2020 7479 7065 2c20 636f 6465 2c20      type, code, 
-000208f0: 6368 6563 6b73 756d 2c20 6773 697a 652c  checksum, gsize,
-00020900: 2073 6571 203d 2073 7472 7563 742e 756e   seq = struct.un
-00020910: 7061 636b 2827 6262 4848 6827 2c20 7061  pack('bbHHh', pa
-00020920: 636b 6574 5b32 303a 3238 5d29 2023 2047  cket[20:28]) # G
-00020930: 6574 2048 6561 6465 720a 2020 2020 2020  et Header.      
-00020940: 2020 2020 2020 6966 2067 7369 7a65 203d        if gsize =
-00020950: 3d20 7373 697a 653a 0a20 2020 2020 2020  = ssize:.       
-00020960: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00020970: 7265 6365 6976 6564 5f74 696d 6520 2d20  received_time - 
-00020980: 7374 696d 650a 2020 2020 2020 2020 2020  stime.          
-00020990: 2020 7469 6d65 6f75 7420 2d3d 2072 6563    timeout -= rec
-000209a0: 6569 7665 645f 7469 6d65 202d 2073 7469  eived_time - sti
-000209b0: 6d65 0a0a 2020 2020 6465 6620 7069 6e67  me..    def ping
-000209c0: 5f66 756e 6328 6970 2c74 696d 656f 7574  _func(ip,timeout
-000209d0: 3d31 2c73 697a 653d 3634 293a 0a20 2020  =1,size=64):.   
-000209e0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-000209f0: 2020 2020 2020 6d79 5f73 6f63 6b65 7420        my_socket 
-00020a00: 3d20 736f 636b 6574 2e73 6f63 6b65 7428  = socket.socket(
-00020a10: 736f 636b 6574 2e41 465f 494e 4554 2c20  socket.AF_INET, 
-00020a20: 736f 636b 6574 2e53 4f43 4b5f 5241 572c  socket.SOCK_RAW,
-00020a30: 2049 434d 505f 434f 4445 290a 2020 2020   ICMP_CODE).    
-00020a40: 2020 2020 6578 6365 7074 2073 6f63 6b65      except socke
-00020a50: 742e 6572 726f 7220 6173 2065 3a0a 2020  t.error as e:.  
-00020a60: 2020 2020 2020 2020 2020 6966 2065 2e65            if e.e
-00020a70: 7272 6e6f 2069 6e20 4552 524f 525f 4445  rrno in ERROR_DE
-00020a80: 5343 523a 0a20 2020 2020 2020 2020 2020  SCR:.           
-00020a90: 2020 2020 2072 6169 7365 2073 6f63 6b65       raise socke
-00020aa0: 742e 6572 726f 7228 2727 2e6a 6f69 6e28  t.error(''.join(
-00020ab0: 2865 2e61 7267 735b 315d 2c20 4552 524f  (e.args[1], ERRO
-00020ac0: 525f 4445 5343 525b 652e 6572 726e 6f5d  R_DESCR[e.errno]
-00020ad0: 2929 290a 2020 2020 2020 2020 2020 2020  ))).            
-00020ae0: 2020 2020 2372 6169 7365 2073 6f63 6b65      #raise socke
-00020af0: 742e 6572 726f 7228 4a6f 696e 2828 652e  t.error(Join((e.
-00020b00: 6172 6773 5b31 5d2c 2045 5252 4f52 5f44  args[1], ERROR_D
-00020b10: 4553 4352 5b65 2e65 7272 6e6f 5d29 2c73  ESCR[e.errno]),s
-00020b20: 796d 626f 6c3d 2727 2929 0a20 2020 2020  ymbol='')).     
-00020b30: 2020 2020 2020 2072 6169 7365 0a20 2020         raise.   
-00020b40: 2020 2020 2069 6620 7369 7a65 2069 6e20       if size in 
-00020b50: 5b27 726e 6427 2c27 7261 6e64 6f6d 275d  ['rnd','random']
-00020b60: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-00020b70: 4d61 7869 6d75 6d20 7369 7a65 2066 6f72  Maximum size for
-00020b80: 2061 6e20 756e 7369 676e 6564 2073 686f   an unsigned sho
-00020b90: 7274 2069 6e74 2063 206f 626a 6563 7428  rt int c object(
-00020ba0: 3635 3533 3529 0a20 2020 2020 2020 2020  65535).         
-00020bb0: 2020 2073 697a 6520 3d20 696e 7428 2869     size = int((i
-00020bc0: 6428 7469 6d65 6f75 7429 202a 2072 616e  d(timeout) * ran
-00020bd0: 646f 6d2e 7261 6e64 6f6d 2829 2920 2520  dom.random()) % 
-00020be0: 3635 3533 3529 0a20 2020 2020 2020 2070  65535).        p
-00020bf0: 6163 6b65 7420 3d20 6d6b 5f70 6163 6b65  acket = mk_packe
-00020c00: 7428 7369 7a65 290a 2020 2020 2020 2020  t(size).        
-00020c10: 7768 696c 6520 7061 636b 6574 3a0a 2020  while packet:.  
-00020c20: 2020 2020 2020 2020 2020 7365 6e74 203d            sent =
-00020c30: 206d 795f 736f 636b 6574 2e73 656e 6474   my_socket.sendt
-00020c40: 6f28 7061 636b 6574 2c20 2869 702c 2031  o(packet, (ip, 1
-00020c50: 2929 2023 2049 434d 5020 6861 7665 206e  )) # ICMP have n
-00020c60: 6f20 706f 7274 2c20 536f 206a 7573 7420  o port, So just 
-00020c70: 7075 7420 6475 6d6d 7920 706f 7274 2031  put dummy port 1
-00020c80: 0a20 2020 2020 2020 2020 2020 2070 6163  .            pac
-00020c90: 6b65 7420 3d20 7061 636b 6574 5b73 656e  ket = packet[sen
-00020ca0: 743a 5d0a 2020 2020 2020 2020 6465 6c61  t:].        dela
-00020cb0: 7920 3d20 7265 6365 6976 6528 6d79 5f73  y = receive(my_s
-00020cc0: 6f63 6b65 742c 2073 697a 652c 2054 494d  ocket, size, TIM
-00020cd0: 4528 292e 5469 6d65 2829 2c20 7469 6d65  E().Time(), time
-00020ce0: 6f75 7429 0a20 2020 2020 2020 206d 795f  out).        my_
-00020cf0: 736f 636b 6574 2e63 6c6f 7365 2829 0a20  socket.close(). 
-00020d00: 2020 2020 2020 2069 6620 6465 6c61 793a         if delay:
-00020d10: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00020d20: 7572 6e20 6465 6c61 792c 7369 7a65 0a0a  urn delay,size..
-00020d30: 2020 2020 6465 6620 5f70 696e 675f 2869      def _ping_(i
-00020d40: 702c 7469 6d65 6f75 743d 312c 7369 7a65  p,timeout=1,size
-00020d50: 3d36 342c 6c6f 675f 666f 726d 6174 3d27  =64,log_format='
-00020d60: 7069 6e67 2729 3a0a 2020 2020 2020 2020  ping'):.        
-00020d70: 2020 2020 7069 6e67 5f63 6d64 3d66 696e      ping_cmd=fin
-00020d80: 645f 6578 6563 7574 6162 6c65 2827 7069  d_executable('pi
-00020d90: 6e67 2729 0a20 2020 2020 2020 2020 2020  ng').           
-00020da0: 2069 6620 7069 6e67 5f63 6d64 3a0a 2020   if ping_cmd:.  
-00020db0: 2020 2020 2020 2020 2020 2020 2020 7069                pi
-00020dc0: 6e67 5f73 3d73 697a 652d 3820 6966 2073  ng_s=size-8 if s
-00020dd0: 697a 6520 3e3d 2038 2065 6c73 6520 300a  ize >= 8 else 0.
-00020de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020df0: 7263 3d72 7368 656c 6c28 2270 696e 6720  rc=rshell("ping 
-00020e00: 2d73 207b 7d20 2d63 2031 207b 7d22 2e66  -s {} -c 1 {}".f
-00020e10: 6f72 6d61 7428 7069 6e67 5f73 2c68 6f73  ormat(ping_s,hos
-00020e20: 7429 290a 2020 2020 2020 2020 2020 2020  t)).            
-00020e30: 2020 2020 6465 6c61 793d 5b5d 0a20 2020      delay=[].   
-00020e40: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00020e50: 7263 5b30 5d20 3d3d 2030 3a0a 2020 2020  rc[0] == 0:.    
-00020e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020e70: 6465 6c61 793d 5b5d 0a20 2020 2020 2020  delay=[].       
-00020e80: 2020 2020 2020 2020 2020 2020 2074 743d               tt=
-00020e90: 7263 5b31 5d2e 7370 6c69 7428 275c 6e27  rc[1].split('\n'
-00020ea0: 295b 315d 2e73 706c 6974 2829 0a20 2020  )[1].split().   
-00020eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020ec0: 2064 656c 6179 3d5b 666c 6f61 7428 7474   delay=[float(tt
-00020ed0: 5b36 5d2e 7370 6c69 7428 273d 2729 5b31  [6].split('=')[1
-00020ee0: 5d29 2f31 3030 302c 7474 5b30 5d5d 0a20  ])/1000,tt[0]]. 
-00020ef0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00020f00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020f10: 6465 6c61 793d 7069 6e67 5f66 756e 6328  delay=ping_func(
-00020f20: 6970 2c74 696d 656f 7574 2c73 697a 6529  ip,timeout,size)
-00020f30: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00020f40: 6c6f 675f 666f 726d 6174 203d 3d20 2770  log_format == 'p
-00020f50: 696e 6727 3a0a 2020 2020 2020 2020 2020  ing':.          
-00020f60: 2020 2020 2020 6966 2064 656c 6179 3a0a        if delay:.
-00020f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020f80: 2020 2020 7265 7475 726e 2030 2c69 702c      return 0,ip,
-00020f90: 7369 7a65 2c74 696d 656f 7574 2c64 656c  size,timeout,del
-00020fa0: 6179 5b31 5d2c 726f 756e 6428 6465 6c61  ay[1],round(dela
-00020fb0: 795b 305d 2a31 3030 302e 302c 3429 0a20  y[0]*1000.0,4). 
-00020fc0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00020fd0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00020fe0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00020ff0: 312c 6970 2c73 697a 652c 7469 6d65 6f75  1,ip,size,timeou
-00021000: 742c 4e6f 6e65 2c4e 6f6e 650a 2020 2020  t,None,None.    
-00021010: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00021020: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00021030: 2064 656c 6179 3a0a 2020 2020 2020 2020   delay:.        
-00021040: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00021050: 726e 2030 2c27 2e27 2c73 697a 652c 7469  rn 0,'.',size,ti
-00021060: 6d65 6f75 742c 4e6f 6e65 2c4e 6f6e 650a  meout,None,None.
-00021070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021080: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00021090: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000210a0: 2031 2c27 7827 2c73 697a 652c 7469 6d65   1,'x',size,time
-000210b0: 6f75 742c 4e6f 6e65 2c4e 6f6e 650a 0a20  out,None,None.. 
-000210c0: 2020 2027 2727 0a20 2020 2073 616d 6520     '''.    same 
-000210d0: 6173 2070 696e 6720 636f 6d6d 616e 640a  as ping command.
-000210e0: 2020 2020 5472 7565 203a 2070 696e 6769      True : pingi
-000210f0: 6e67 0a20 2020 2046 616c 7365 3a20 6361  ng.    False: ca
-00021100: 6e20 6e6f 7420 7069 6e67 0a20 2020 2030  n not ping.    0
-00021110: 2020 2020 3a20 4361 6e63 656c 6564 2070      : Canceled p
-00021120: 696e 670a 2020 2020 2727 270a 2020 2020  ing.    '''.    
-00021130: 636f 756e 743d 496e 7428 6f70 7473 2e67  count=Int(opts.g
-00021140: 6574 2827 636f 756e 7427 292c 3029 0a20  et('count'),0). 
-00021150: 2020 2069 6e74 6572 7661 6c3d 496e 7428     interval=Int(
-00021160: 6f70 7473 2e67 6574 2827 696e 7465 7276  opts.get('interv
-00021170: 616c 2729 2c31 290a 2020 2020 6b65 6570  al'),1).    keep
-00021180: 5f67 6f6f 643d 496e 7428 6f70 7473 2e67  _good=Int(opts.g
-00021190: 6574 2827 6b65 6570 5f67 6f6f 6427 2c6f  et('keep_good',o
-000211a0: 7074 732e 6765 7428 276b 6565 705f 7069  pts.get('keep_pi
-000211b0: 6e67 272c 6f70 7473 2e67 6574 2827 6b65  ng',opts.get('ke
-000211c0: 6570 272c 6f70 7473 2e67 6574 2827 676f  ep',opts.get('go
-000211d0: 6f64 272c 6f70 7473 2e67 6574 2827 7069  od',opts.get('pi
-000211e0: 6e67 696e 6727 2929 2929 292c 3029 0a20  nging'))))),0). 
-000211f0: 2020 206b 6565 705f 6261 643d 496e 7428     keep_bad=Int(
-00021200: 6f70 7473 2e67 6574 2827 6b65 6570 5f62  opts.get('keep_b
-00021210: 6164 272c 6f70 7473 2e67 6574 2827 6261  ad',opts.get('ba
-00021220: 6427 2929 2c30 290a 2020 2020 7469 6d65  d')),0).    time
-00021230: 6f75 743d 496e 7428 6f70 7473 2e67 6574  out=Int(opts.get
-00021240: 2827 7469 6d65 6f75 7427 2c6f 7074 732e  ('timeout',opts.
-00021250: 6765 7428 2774 696d 656f 7574 5f73 6563  get('timeout_sec
-00021260: 2729 292c 3029 0a20 2020 206c 6f73 745f  ')),0).    lost_
-00021270: 6d6f 6e3d 6f70 7473 2e67 6574 2827 6c6f  mon=opts.get('lo
-00021280: 7374 5f6d 6f6e 272c 4661 6c73 6529 0a20  st_mon',False). 
-00021290: 2020 206c 6f67 3d6f 7074 732e 6765 7428     log=opts.get(
-000212a0: 276c 6f67 272c 4e6f 6e65 290a 2020 2020  'log',None).    
-000212b0: 6c6f 675f 666f 726d 6174 3d6f 7074 732e  log_format=opts.
-000212c0: 6765 7428 276c 6f67 5f66 6f72 6d61 7427  get('log_format'
-000212d0: 2c27 2e27 290a 2020 2020 616c 6976 655f  ,'.').    alive_
-000212e0: 706f 7274 3d6f 7074 732e 6765 7428 2761  port=opts.get('a
-000212f0: 6c69 7665 5f70 6f72 7427 290a 2020 2020  live_port').    
-00021300: 656e 645f 6e65 776c 696e 653d 6f70 7473  end_newline=opts
-00021310: 2e67 6574 2827 656e 645f 6e65 776c 696e  .get('end_newlin
-00021320: 6527 2c6f 7074 732e 6765 7428 276e 6577  e',opts.get('new
-00021330: 6c69 6e65 272c 6f70 7473 2e67 6574 2827  line',opts.get('
-00021340: 656e 6427 2c27 5c6e 2729 2929 0a20 2020  end','\n'))).   
-00021350: 2063 616e 6365 6c5f 6675 6e63 3d6f 7074   cancel_func=opt
-00021360: 732e 6765 7428 2763 616e 6365 6c5f 6675  s.get('cancel_fu
-00021370: 6e63 272c 6f70 7473 2e67 6574 2827 7374  nc',opts.get('st
-00021380: 6f70 5f66 756e 6327 2c6f 7074 732e 6765  op_func',opts.ge
-00021390: 7428 2763 616e 6365 6c27 2c6f 7074 732e  t('cancel',opts.
-000213a0: 6765 7428 2773 746f 7027 2c4e 6f6e 6529  get('stop',None)
-000213b0: 2929 290a 2020 2020 6966 2061 6c69 7665  ))).    if alive
-000213c0: 5f70 6f72 743a 0a20 2020 2020 2020 2072  _port:.        r
-000213d0: 6574 7572 6e20 5472 7565 2069 6620 4970  eturn True if Ip
-000213e0: 5634 2868 6f73 742c 706f 7274 3d61 6c69  V4(host,port=ali
-000213f0: 7665 5f70 6f72 742c 7375 7070 6f72 745f  ve_port,support_
-00021400: 686f 7374 6e61 6d65 3d6f 7074 732e 6765  hostname=opts.ge
-00021410: 7428 2773 7570 706f 7274 5f68 6f73 746e  t('support_hostn
-00021420: 616d 6527 2c54 7275 6529 2920 656c 7365  ame',True)) else
-00021430: 2046 616c 7365 0a20 2020 2067 6f6f 643d   False.    good=
-00021440: 4661 6c73 650a 2020 2020 5469 6d65 3d54  False.    Time=T
-00021450: 494d 4528 290a 2020 2020 6754 696d 653d  IME().    gTime=
-00021460: 5449 4d45 2829 0a20 2020 2062 5469 6d65  TIME().    bTime
-00021470: 3d54 494d 4528 290a 2020 2020 6473 7069  =TIME().    dspi
-00021480: 3d27 6427 2069 6620 6c6f 675f 666f 726d  ='d' if log_form
-00021490: 6174 203d 3d27 6427 2065 6c73 6520 2773  at =='d' else 's
-000214a0: 2720 6966 206c 6f67 5f66 6f72 6d61 7420  ' if log_format 
-000214b0: 6e6f 7420 696e 205b 276e 272c 2769 275d  not in ['n','i']
-000214c0: 2065 6c73 6520 2769 270a 2020 2020 6c6f   else 'i'.    lo
-000214d0: 6361 6c5f 7072 696e 7465 643d 4661 6c73  cal_printed=Fals
-000214e0: 650a 2020 2020 693d 300a 2020 2020 7768  e.    i=0.    wh
-000214f0: 696c 6520 5472 7565 3a0a 2020 2020 2020  ile True:.      
-00021500: 2069 6620 4973 4272 6561 6b28 6361 6e63   if IsBreak(canc
-00021510: 656c 5f66 756e 6329 3a0a 2020 2020 2020  el_func):.      
-00021520: 2020 2020 7072 696e 7466 2827 2d20 7069      printf('- pi
-00021530: 6e67 287b 7d29 202d 2043 616e 6365 6c65  ng({}) - Cancele
-00021540: 642f 5374 6f70 7065 6420 7069 6e67 2062  d/Stopped ping b
-00021550: 7920 6361 6e63 656c 2073 6967 6e61 6c27  y cancel signal'
-00021560: 2e66 6f72 6d61 7428 686f 7374 292c 6669  .format(host),fi
-00021570: 7273 745f 6e65 776c 696e 653d 5472 7565  rst_newline=True
-00021580: 2c6c 6f67 3d6c 6f67 2c64 7370 3d64 7370  ,log=log,dsp=dsp
-00021590: 6929 0a20 2020 2020 2020 2020 2062 7265  i).          bre
-000215a0: 616b 0a20 2020 2020 2020 7263 3d5f 7069  ak.       rc=_pi
-000215b0: 6e67 5f28 686f 7374 2c74 696d 656f 7574  ng_(host,timeout
-000215c0: 3d31 2c73 697a 653d 3634 2c6c 6f67 5f66  =1,size=64,log_f
-000215d0: 6f72 6d61 743d 6c6f 675f 666f 726d 6174  ormat=log_format
-000215e0: 290a 2020 2020 2020 2069 6620 7263 5b30  ).       if rc[0
-000215f0: 5d20 3d3d 2030 3a0a 2020 2020 2020 2020  ] == 0:.        
-00021600: 2020 676f 6f64 3d54 7275 650a 2020 2020    good=True.    
-00021610: 2020 2020 2020 6966 206e 6f74 2063 6f75        if not cou
-00021620: 6e74 3a0a 2020 2020 2020 2020 2020 2020  nt:.            
-00021630: 2020 6254 696d 652e 5265 7365 7428 290a    bTime.Reset().
-00021640: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00021650: 206b 6565 705f 676f 6f64 3a0a 2020 2020   keep_good:.    
-00021660: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00021670: 2067 5469 6d65 2e4f 7574 286b 6565 705f   gTime.Out(keep_
-00021680: 676f 6f64 293a 2062 7265 616b 0a20 2020  good): break.   
-00021690: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000216a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000216b0: 2020 2062 7265 616b 0a20 2020 2020 2020     break.       
-000216c0: 2020 2069 6620 6c6f 675f 666f 726d 6174     if log_format
-000216d0: 203d 3d20 2770 696e 6727 3a0a 2020 2020   == 'ping':.    
-000216e0: 2020 2020 2020 2020 2020 7072 696e 7466            printf
-000216f0: 2827 7b7d 2062 7974 6573 2066 726f 6d20  ('{} bytes from 
-00021700: 7b7d 3a20 6963 6d70 5f73 6571 3d7b 7d20  {}: icmp_seq={} 
-00021710: 7474 6c3d 7b7d 2074 696d 653d 7b7d 206d  ttl={} time={} m
-00021720: 7327 2e66 6f72 6d61 7428 7263 5b34 5d2c  s'.format(rc[4],
-00021730: 7263 5b31 5d2c 692c 7263 5b32 5d2c 7263  rc[1],i,rc[2],rc
-00021740: 5b35 5d29 2c6c 6f67 3d6c 6f67 2c64 7370  [5]),log=log,dsp
-00021750: 3d64 7370 6929 0a20 2020 2020 2020 2020  =dspi).         
-00021760: 2065 6c69 6620 6473 7069 2069 6e20 5b27   elif dspi in ['
-00021770: 6427 2c27 7327 5d3a 0a20 2020 2020 2020  d','s']:.       
-00021780: 2020 2020 2020 2070 7269 6e74 6628 272e         printf('.
-00021790: 272c 6469 7265 6374 3d54 7275 652c 6c6f  ',direct=True,lo
-000217a0: 673d 6c6f 672c 6c6f 675f 6c65 7665 6c3d  g=log,log_level=
-000217b0: 312c 6473 703d 6473 7069 2c73 6372 5f64  1,dsp=dspi,scr_d
-000217c0: 6267 3d46 616c 7365 290a 2020 2020 2020  bg=False).      
-000217d0: 2020 2020 2020 2020 6c6f 6361 6c5f 7072          local_pr
-000217e0: 696e 7465 643d 5472 7565 0a20 2020 2020  inted=True.     
-000217f0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00021800: 2020 676f 6f64 3d46 616c 7365 0a20 2020    good=False.   
-00021810: 2020 2020 2020 2069 6620 6e6f 7420 636f         if not co
-00021820: 756e 743a 0a20 2020 2020 2020 2020 2020  unt:.           
-00021830: 2020 2067 5469 6d65 2e52 6573 6574 2829     gTime.Reset()
-00021840: 0a20 2020 2020 2020 2020 2020 2020 2069  .              i
-00021850: 6620 6b65 6570 5f62 6164 3a0a 2020 2020  f keep_bad:.    
-00021860: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00021870: 2062 5469 6d65 2e4f 7574 286b 6565 705f   bTime.Out(keep_
-00021880: 6261 6429 3a20 6272 6561 6b0a 2020 2020  bad): break.    
-00021890: 2020 2020 2020 6966 206c 6f67 5f66 6f72        if log_for
-000218a0: 6d61 7420 3d3d 2027 7069 6e67 273a 0a20  mat == 'ping':. 
-000218b0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-000218c0: 6e74 6628 277b 7d20 6963 6d70 5f73 6571  ntf('{} icmp_seq
-000218d0: 3d7b 7d20 7469 6d65 6f75 7420 287b 7d20  ={} timeout ({} 
-000218e0: 7365 636f 6e64 2927 2e66 6f72 6d61 7428  second)'.format(
-000218f0: 7263 5b31 5d2c 692c 7263 5b33 5d29 2c6c  rc[1],i,rc[3]),l
-00021900: 6f67 3d6c 6f67 2c64 7370 3d64 7370 6929  og=log,dsp=dspi)
-00021910: 0a20 2020 2020 2020 2020 2065 6c69 6620  .          elif 
-00021920: 6473 7069 2069 6e20 5b27 6427 2c27 7327  dspi in ['d','s'
-00021930: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-00021940: 2070 7269 6e74 6628 2778 272c 6469 7265   printf('x',dire
-00021950: 6374 3d54 7275 652c 6c6f 675f 6c65 7665  ct=True,log_leve
-00021960: 6c3d 312c 6c6f 673d 6c6f 672c 2064 7370  l=1,log=log, dsp
-00021970: 3d64 7370 692c 7363 725f 6462 673d 4661  =dspi,scr_dbg=Fa
-00021980: 6c73 6529 0a20 2020 2020 2020 2020 2020  lse).           
-00021990: 2020 206c 6f63 616c 5f70 7269 6e74 6564     local_printed
-000219a0: 3d54 7275 650a 2020 2020 2020 2069 6620  =True.       if 
-000219b0: 636f 756e 743a 0a20 2020 2020 2020 2020  count:.         
-000219c0: 2020 636f 756e 742d 3d31 0a20 2020 2020    count-=1.     
-000219d0: 2020 2020 2020 6966 2063 6f75 6e74 203c        if count <
-000219e0: 2031 3a20 6272 6561 6b0a 2020 2020 2020   1: break.      
-000219f0: 2069 6620 5469 6d65 2e4f 7574 2874 696d   if Time.Out(tim
-00021a00: 656f 7574 293a 2062 7265 616b 0a20 2020  eout): break.   
-00021a10: 2020 2020 7469 6d65 2e73 6c65 6570 2869      time.sleep(i
-00021a20: 6e74 6572 7661 6c29 0a20 2020 2020 2020  nterval).       
-00021a30: 692b 3d31 0a20 2020 2069 6620 656e 645f  i+=1.    if end_
-00021a40: 6e65 776c 696e 653a 0a20 2020 2020 2020  newline:.       
-00021a50: 2069 6620 6c6f 6361 6c5f 7072 696e 7465   if local_printe
-00021a60: 643a 2070 7269 6e74 6628 2727 2c6c 6f67  d: printf('',log
-00021a70: 3d6c 6f67 2c20 6e6f 5f69 6e74 726f 3d54  =log, no_intro=T
-00021a80: 7275 652c 2064 7370 3d64 7370 692c 6361  rue, dsp=dspi,ca
-00021a90: 6c6c 6572 5f70 6172 656e 743d 312c 6967  ller_parent=1,ig
-00021aa0: 6e6f 7265 5f65 6d70 7479 3d46 616c 7365  nore_empty=False
-00021ab0: 290a 2020 2020 7265 7475 726e 2067 6f6f  ).    return goo
-00021ac0: 640a 0a63 6c61 7373 2050 4147 453a 0a20  d..class PAGE:. 
-00021ad0: 2020 2027 2727 0a20 2020 2057 6562 2073     '''.    Web s
-00021ae0: 6974 6520 7061 6765 2061 6e64 2055 524c  ite page and URL
-00021af0: 2064 6573 6967 6e0a 2020 2020 2727 270a   design.    '''.
-00021b00: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-00021b10: 2873 656c 662c 7265 7175 6573 743d 4e6f  (self,request=No
-00021b20: 6e65 2c64 6174 613d 4e6f 6e65 2c62 6173  ne,data=None,bas
-00021b30: 653d 2727 2c6f 7468 6572 733d 4e6f 6e65  e='',others=None
-00021b40: 2c70 7261 6e67 653d 3235 293a 0a20 2020  ,prange=25):.   
-00021b50: 2020 2020 2069 6620 7265 7175 6573 743a       if request:
-00021b60: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00021b70: 662e 7265 7175 6573 7473 3d72 6571 7565  f.requests=reque
-00021b80: 7374 0a20 2020 2020 2020 2065 6c73 653a  st.        else:
-00021b90: 0a20 2020 2020 2020 2020 2020 2049 6d70  .            Imp
-00021ba0: 6f72 7428 2769 6d70 6f72 7420 7265 7175  ort('import requ
-00021bb0: 6573 7473 2729 0a20 2020 2020 2020 2020  ests').         
-00021bc0: 2020 2073 656c 662e 7265 7175 6573 7473     self.requests
-00021bd0: 3d72 6571 7565 7374 730a 2020 2020 2020  =requests.      
-00021be0: 2020 7365 6c66 2e70 7261 6e67 653d 7072    self.prange=pr
-00021bf0: 616e 6765 0a20 2020 2020 2020 2073 656c  ange.        sel
-00021c00: 662e 7061 7261 6d65 7465 7273 3d64 6963  f.parameters=dic
-00021c10: 7428 7365 6c66 2e72 6571 7565 7374 732e  t(self.requests.
-00021c20: 6172 6773 290a 2020 2020 2020 2020 7061  args).        pa
-00021c30: 6765 3d73 656c 662e 7265 7175 6573 7473  ge=self.requests
-00021c40: 2e61 7267 732e 6765 7428 2770 6167 6527  .args.get('page'
-00021c50: 2c30 290a 2020 2020 2020 2020 6966 2073  ,0).        if s
-00021c60: 656c 662e 7265 7175 6573 7473 2e6d 6574  elf.requests.met
-00021c70: 686f 643d 3d27 504f 5354 273a 0a20 2020  hod=='POST':.   
-00021c80: 2020 2020 2020 2020 2070 6172 616d 6574           paramet
-00021c90: 6572 733d 6469 6374 2873 656c 662e 7265  ers=dict(self.re
-00021ca0: 7175 6573 7473 2e66 6f72 6d29 0a20 2020  quests.form).   
-00021cb0: 2020 2020 2020 2020 2073 656c 662e 7061           self.pa
-00021cc0: 7261 6d65 7465 7273 2e75 7064 6174 6528  rameters.update(
-00021cd0: 7061 7261 6d65 7465 7273 290a 2020 2020  parameters).    
-00021ce0: 2020 2020 2020 2020 6966 2027 7061 6765          if 'page
-00021cf0: 2720 696e 2073 656c 662e 7061 7261 6d65  ' in self.parame
-00021d00: 7465 7273 3a20 7061 6765 3d73 656c 662e  ters: page=self.
-00021d10: 7061 7261 6d65 7465 7273 2e67 6574 2827  parameters.get('
-00021d20: 7061 6765 2729 0a20 2020 2020 2020 2074  page').        t
-00021d30: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-00021d40: 7365 6c66 2e70 6167 653d 696e 7428 7061  self.page=int(pa
-00021d50: 6765 290a 2020 2020 2020 2020 6578 6365  ge).        exce
-00021d60: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
-00021d70: 7365 6c66 2e70 6167 653d 300a 2020 2020  self.page=0.    
-00021d80: 2020 2020 7365 6c66 2e74 6f74 616c 3d30      self.total=0
-00021d90: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-00021da0: 7374 616e 6365 2864 6174 612c 286c 6973  stance(data,(lis
-00021db0: 742c 6469 6374 2c74 7570 6c65 2929 3a0a  t,dict,tuple)):.
-00021dc0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00021dd0: 2e74 6f74 616c 3d6c 656e 2864 6174 6129  .total=len(data)
-00021de0: 0a20 2020 2020 2020 2073 656c 662e 746f  .        self.to
-00021df0: 7461 6c5f 7061 6765 3d73 656c 662e 746f  tal_page=self.to
-00021e00: 7461 6c2f 2f73 656c 662e 7072 616e 6765  tal//self.prange
-00021e10: 0a20 2020 2020 2020 2073 656c 662e 6261  .        self.ba
-00021e20: 7365 3d62 6173 650a 2020 2020 2020 2020  se=base.        
-00021e30: 7365 6c66 2e6f 7468 6572 733d 6f74 6865  self.others=othe
-00021e40: 7273 0a20 2020 2020 2020 2073 656c 662e  rs.        self.
-00021e50: 7374 6172 743d 7365 6c66 2e70 6167 652a  start=self.page*
-00021e60: 7365 6c66 2e70 7261 6e67 650a 2020 2020  self.prange.    
-00021e70: 2020 2020 7365 6c66 2e65 6e64 3d73 656c      self.end=sel
-00021e80: 662e 7374 6172 742b 7365 6c66 2e70 7261  f.start+self.pra
-00021e90: 6e67 650a 2020 2020 6465 6620 7572 6c28  nge.    def url(
-00021ea0: 7365 6c66 2c62 6173 653d 4e6f 6e65 2c69  self,base=None,i
-00021eb0: 676e 6f72 653d 4e6f 6e65 2c2a 2a6f 7074  gnore=None,**opt
-00021ec0: 7329 3a0a 2020 2020 2020 2020 6172 6773  s):.        args
-00021ed0: 3d27 270a 2020 2020 2020 2020 666f 7220  =''.        for 
-00021ee0: 6920 696e 2073 656c 662e 7061 7261 6d65  i in self.parame
-00021ef0: 7465 7273 3a0a 2020 2020 2020 2020 2020  ters:.          
-00021f00: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00021f10: 6967 6e6f 7265 2c6c 6973 7429 2061 6e64  ignore,list) and
-00021f20: 2069 2069 6e20 6967 6e6f 7265 3a20 636f   i in ignore: co
-00021f30: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
-00021f40: 2020 2069 6620 6920 696e 206f 7074 733a     if i in opts:
-00021f50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021f60: 206f 6f3d 6f70 7473 2e70 6f70 2869 290a   oo=opts.pop(i).
-00021f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021f80: 6172 6773 3d61 7267 732b 277b 7d7b 7d3d  args=args+'{}{}=
-00021f90: 7b7d 272e 666f 726d 6174 2827 2627 2069  {}'.format('&' i
-00021fa0: 6620 6172 6773 2065 6c73 6520 2727 2c69  f args else '',i
-00021fb0: 2c6f 6f29 0a20 2020 2020 2020 2020 2020  ,oo).           
-00021fc0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00021fd0: 2020 2020 2020 2061 7267 733d 6172 6773         args=args
-00021fe0: 2b27 7b7d 7b7d 3d7b 7d27 2e66 6f72 6d61  +'{}{}={}'.forma
-00021ff0: 7428 2726 2720 6966 2061 7267 7320 656c  t('&' if args el
-00022000: 7365 2027 272c 692c 7365 6c66 2e70 6172  se '',i,self.par
-00022010: 616d 6574 6572 735b 695d 290a 2020 2020  ameters[i]).    
-00022020: 2020 2020 666f 7220 6920 696e 206f 7074      for i in opt
-00022030: 733a 0a20 2020 2020 2020 2020 2020 2061  s:.            a
-00022040: 7267 733d 6172 6773 2b27 7b7d 7b7d 3d7b  rgs=args+'{}{}={
-00022050: 7d27 2e66 6f72 6d61 7428 2726 2720 6966  }'.format('&' if
-00022060: 2061 7267 7320 656c 7365 2027 272c 692c   args else '',i,
-00022070: 6f70 7473 5b69 5d29 0a20 2020 2020 2020  opts[i]).       
-00022080: 2069 6620 6973 696e 7374 616e 6365 2862   if isinstance(b
-00022090: 6173 652c 7374 7229 2061 6e64 2062 6173  ase,str) and bas
-000220a0: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
-000220b0: 6620 6261 7365 5b2d 315d 203d 3d20 273f  f base[-1] == '?
-000220c0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-000220d0: 2020 2072 6574 7572 6e20 6261 7365 2b20     return base+ 
-000220e0: 6172 6773 0a20 2020 2020 2020 2020 2020  args.           
-000220f0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00022100: 2020 2020 2020 2072 6574 7572 6e20 6261         return ba
-00022110: 7365 2b27 3f27 202b 2061 7267 730a 2020  se+'?' + args.  
-00022120: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00022130: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00022140: 656c 662e 6261 7365 2b27 3f27 202b 2061  elf.base+'?' + a
-00022150: 7267 730a 2020 2020 6465 6620 6765 7428  rgs.    def get(
-00022160: 7365 6c66 2c6e 616d 653d 4e6f 6e65 293a  self,name=None):
-00022170: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-00022180: 7374 616e 6365 2873 656c 662e 7061 7261  stance(self.para
-00022190: 6d65 7465 7273 2c64 6963 7429 3a0a 2020  meters,dict):.  
-000221a0: 2020 2020 2020 2020 2020 6966 206e 616d            if nam
-000221b0: 6520 616e 6420 6e61 6d65 2069 6e20 7365  e and name in se
-000221c0: 6c66 2e70 6172 616d 6574 6572 733a 0a20  lf.parameters:. 
+0001dfe0: 2023 7274 3d6f 626a 2e50 4f53 542e 6765   #rt=obj.POST.ge
+0001dff0: 7428 6e6b 6579 290a 2020 2020 2020 2020  t(nkey).        
+0001e000: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0001e010: 6f74 2049 734e 6f6e 6528 7274 293a 0a20  ot IsNone(rt):. 
+0001e020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e030: 2020 2020 2020 2023 7265 7475 726e 204f         #return O
+0001e040: 7574 466f 726d 6174 2872 742c 6f75 743d  utFormat(rt,out=
+0001e050: 2772 6177 272c 7065 656c 3d70 6565 6c2c  'raw',peel=peel,
+0001e060: 7374 7269 703d 7374 7269 702c 6465 6661  strip=strip,defa
+0001e070: 756c 743d 6465 6661 756c 7429 0a20 2020  ult=default).   
+0001e080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e090: 2020 2020 2072 6574 7572 6e20 4f75 7446       return OutF
+0001e0a0: 6f72 6d61 7428 7274 2c6f 7574 3d6f 7574  ormat(rt,out=out
+0001e0b0: 2c70 6565 6c3d 7065 656c 2c73 7472 6970  ,peel=peel,strip
+0001e0c0: 3d73 7472 6970 2c64 6566 6175 6c74 3d64  =strip,default=d
+0001e0d0: 6566 6175 6c74 290a 2020 2020 2020 2020  efault).        
+0001e0e0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001e0f0: 726e 2044 6566 6175 6c74 286f 626a 2c64  rn Default(obj,d
+0001e100: 6566 6175 6c74 290a 2020 2020 2020 2020  efault).        
+0001e110: 2020 2020 6966 2069 6478 5f74 7970 6520      if idx_type 
+0001e120: 3d3d 2027 7374 7227 3a0a 2020 2020 2020  == 'str':.      
+0001e130: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001e140: 205f 7765 625f 6461 7461 286f 626a 2c6e   _web_data(obj,n
+0001e150: 6964 782c 6d65 7468 6f64 2c64 6566 6175  idx,method,defau
+0001e160: 6c74 290a 2020 2020 2020 2020 2020 2020  lt).            
+0001e170: 656c 6966 2069 6478 5f74 7970 6520 3d3d  elif idx_type ==
+0001e180: 2027 6c69 7374 273a 0a20 2020 2020 2020   'list':.       
+0001e190: 2020 2020 2020 2020 2072 743d 5b5d 0a20           rt=[]. 
+0001e1a0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001e1b0: 6f72 2069 2069 6e20 6e69 6478 3a0a 2020  or i in nidx:.  
+0001e1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e1d0: 2020 7274 2e61 7070 656e 6428 5f77 6562    rt.append(_web
+0001e1e0: 5f64 6174 6128 6f62 6a2c 692c 6d65 7468  _data(obj,i,meth
+0001e1f0: 6f64 2c64 6566 6175 6c74 2929 0a20 2020  od,default)).   
+0001e200: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001e210: 7572 6e20 4f75 7446 6f72 6d61 7428 7274  urn OutFormat(rt
+0001e220: 2c6f 7574 3d6f 7574 2c64 6566 6175 6c74  ,out=out,default
+0001e230: 3d64 6566 6175 6c74 2c6f 7267 3d6f 626a  =default,org=obj
+0001e240: 2c70 6565 6c3d 7065 656c 2c73 7472 6970  ,peel=peel,strip
+0001e250: 3d73 7472 6970 290a 2020 2020 656c 6966  =strip).    elif
+0001e260: 206f 626a 5f74 7970 6520 696e 2028 2749   obj_type in ('I
+0001e270: 6d6d 7574 6162 6c65 4d75 6c74 6944 6963  mmutableMultiDic
+0001e280: 7427 293a 2023 2046 6c61 736b 2057 6562  t'): # Flask Web
+0001e290: 2044 6174 610a 2020 2020 2020 2020 746d   Data.        tm
+0001e2a0: 703d 7b7d 0a20 2020 2020 2020 2069 6620  p={}.        if 
+0001e2b0: 6f62 6a3a 0a20 2020 2020 2020 2020 2020  obj:.           
+0001e2c0: 2066 6f72 2069 6920 696e 206f 626a 3a0a   for ii in obj:.
+0001e2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e2e0: 746d 705b 6969 5d3d 6f62 6a5b 6969 5d0a  tmp[ii]=obj[ii].
+0001e2f0: 2020 2020 2020 2020 7265 7475 726e 2047          return G
+0001e300: 6574 2874 6d70 2c69 6478 2c64 6566 6175  et(tmp,idx,defau
+0001e310: 6c74 2c65 7272 2920 0a20 2020 2065 6c69  lt,err) .    eli
+0001e320: 6620 6f62 6a5f 7479 7065 2069 6e20 2827  f obj_type in ('
+0001e330: 6b44 6963 7427 2c27 6b4c 6973 7427 2c27  kDict','kList','
+0001e340: 4449 4354 2729 3a20 0a20 2020 2020 2020  DICT'): .       
+0001e350: 2072 6574 7572 6e20 4765 7428 6f62 6a2e   return Get(obj.
+0001e360: 4765 7428 292c 6964 782c 6465 6661 756c  Get(),idx,defaul
+0001e370: 742c 6572 7229 200a 2020 2020 7265 7475  t,err) .    retu
+0001e380: 726e 204f 7574 466f 726d 6174 285b 5d2c  rn OutFormat([],
+0001e390: 6f75 743d 6f75 742c 6465 6661 756c 743d  out=out,default=
+0001e3a0: 6465 6661 756c 742c 6f72 673d 6f62 6a2c  default,org=obj,
+0001e3b0: 7065 656c 3d70 6565 6c2c 7374 7269 703d  peel=peel,strip=
+0001e3c0: 7374 7269 7029 0a0a 0a64 6566 2054 7279  strip)...def Try
+0001e3d0: 436f 6465 2863 6f64 652c 6465 6661 756c  Code(code,defaul
+0001e3e0: 743d 4661 6c73 652c 5f72 6574 7572 6e5f  t=False,_return_
+0001e3f0: 3d54 7275 6529 3a0a 2020 2020 2727 270a  =True):.    '''.
+0001e400: 2020 2020 5275 6e20 7374 7269 6e67 2063      Run string c
+0001e410: 6f64 650a 2020 2020 6465 6661 756c 7420  ode.    default 
+0001e420: 3a46 616c 7365 0a20 2020 205f 7265 7475  :False.    _retu
+0001e430: 726e 5f3a 2054 7275 653a 2072 6574 7572  rn_: True: retur
+0001e440: 6e20 6f75 7470 7574 2c20 4661 6c73 653a  n output, False:
+0001e450: 2070 7269 6e74 206f 6e20 7363 7265 656e   print on screen
+0001e460: 0a20 2020 2027 2727 0a20 2020 2069 6620  .    '''.    if 
+0001e470: 5479 7065 2863 6f64 652c 7374 7229 3a0a  Type(code,str):.
+0001e480: 2020 2020 2020 2020 6572 723d 4e6f 6e65          err=None
+0001e490: 0a20 2020 2020 2020 2072 743d 4e6f 6e65  .        rt=None
+0001e4a0: 0a20 2020 2020 2020 2069 6620 5f72 6574  .        if _ret
+0001e4b0: 7572 6e5f 3a0a 2020 2020 2020 2020 2020  urn_:.          
+0001e4c0: 2020 2320 6372 6561 7465 2066 696c 652d    # create file-
+0001e4d0: 6c69 6b65 2073 7472 696e 6720 746f 2063  like string to c
+0001e4e0: 6170 7475 7265 206f 7574 7075 740a 2020  apture output.  
+0001e4f0: 2020 2020 2020 2020 2020 636f 6465 4f75            codeOu
+0001e500: 7420 3d20 5374 7269 6e67 494f 2829 0a20  t = StringIO(). 
+0001e510: 2020 2020 2020 2020 2020 2063 6f64 6545             codeE
+0001e520: 7272 203d 2053 7472 696e 6749 4f28 290a  rr = StringIO().
+0001e530: 2020 2020 2020 2020 2020 2020 7379 732e              sys.
+0001e540: 7374 646f 7574 2e66 6c75 7368 2829 0a20  stdout.flush(). 
+0001e550: 2020 2020 2020 2020 2020 2073 7973 2e73             sys.s
+0001e560: 7464 6572 722e 666c 7573 6828 290a 2020  tderr.flush().  
+0001e570: 2020 2020 2020 2020 2020 7379 732e 7374            sys.st
+0001e580: 646f 7574 3d63 6f64 654f 7574 2023 2053  dout=codeOut # S
+0001e590: 7461 6e64 6172 6420 4f75 7420 6672 6f6d  tandard Out from
+0001e5a0: 2061 7070 6c69 6361 7469 6f6e 0a20 2020   application.   
+0001e5b0: 2020 2020 2020 2020 2073 7973 2e73 7464           sys.std
+0001e5c0: 6572 723d 636f 6465 4572 7220 2320 5374  err=codeErr # St
+0001e5d0: 616e 6461 7264 2045 7272 6f72 2066 726f  andard Error fro
+0001e5e0: 6d20 6170 706c 6963 6174 696f 6e0a 2020  m application.  
+0001e5f0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+0001e600: 2020 2020 2020 2065 7865 6328 636f 6465         exec(code
+0001e610: 290a 2020 2020 2020 2020 6578 6365 7074  ).        except
+0001e620: 3a0a 2020 2020 2020 2020 2020 2020 2343  :.            #C
+0001e630: 6f64 6520 4572 726f 7220 6d65 7373 6167  ode Error messag
+0001e640: 650a 2020 2020 2020 2020 2020 2020 6572  e.            er
+0001e650: 723d 4578 6365 7074 4d65 7373 6167 6528  r=ExceptMessage(
+0001e660: 290a 2020 2020 2020 2020 6669 6e61 6c6c  ).        finall
+0001e670: 793a 0a20 2020 2020 2020 2020 2020 2069  y:.            i
+0001e680: 6620 5f72 6574 7572 6e5f 3a0a 2020 2020  f _return_:.    
+0001e690: 2020 2020 2020 2020 2020 2020 7379 732e              sys.
+0001e6a0: 7374 646f 7574 2e66 6c75 7368 2829 0a20  stdout.flush(). 
+0001e6b0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001e6c0: 7973 2e73 7464 6572 722e 666c 7573 6828  ys.stderr.flush(
+0001e6d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001e6e0: 2020 2372 6563 6f76 6572 2f72 6573 746f    #recover/resto
+0001e6f0: 7265 2073 7464 6f75 7420 616e 6420 7374  re stdout and st
+0001e700: 6465 7272 0a20 2020 2020 2020 2020 2020  derr.           
+0001e710: 2020 2020 2073 7973 2e73 7464 6f75 743d       sys.stdout=
+0001e720: 7379 732e 5f5f 7374 646f 7574 5f5f 0a20  sys.__stdout__. 
+0001e730: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001e740: 7973 2e73 7464 6572 723d 7379 732e 5f5f  ys.stderr=sys.__
+0001e750: 7374 6465 7272 5f5f 0a20 2020 2020 2020  stderr__.       
+0001e760: 2020 2020 2020 2020 2023 4765 7420 7661           #Get va
+0001e770: 6c75 6520 0a20 2020 2020 2020 2020 2020  lue .           
+0001e780: 2020 2020 2072 743d 636f 6465 4f75 742e       rt=codeOut.
+0001e790: 6765 7476 616c 7565 2829 0a20 2020 2020  getvalue().     
+0001e7a0: 2020 2020 2020 2020 2020 2065 723d 636f             er=co
+0001e7b0: 6465 4572 722e 6765 7476 616c 7565 2829  deErr.getvalue()
+0001e7c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001e7d0: 2023 436c 6f73 6520 494f 0a20 2020 2020   #Close IO.     
+0001e7e0: 2020 2020 2020 2020 2020 2063 6f64 654f             codeO
+0001e7f0: 7574 2e63 6c6f 7365 2829 0a20 2020 2020  ut.close().     
+0001e800: 2020 2020 2020 2020 2020 2063 6f64 6545             codeE
+0001e810: 7272 2e63 6c6f 7365 2829 0a20 2020 2020  rr.close().     
+0001e820: 2020 2020 2020 2069 6620 6572 723a 2023         if err: #
+0001e830: 436f 6465 2045 7272 6f72 0a20 2020 2020  Code Error.     
+0001e840: 2020 2020 2020 2020 2020 2069 6620 5f72             if _r
+0001e850: 6574 7572 6e5f 3a0a 2020 2020 2020 2020  eturn_:.        
+0001e860: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001e870: 726e 2046 616c 7365 2c72 742c 6572 720a  rn False,rt,err.
+0001e880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e890: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0001e8a0: 2020 2020 2020 2020 2020 5374 6445 7272            StdErr
+0001e8b0: 2865 7272 290a 2020 2020 2020 2020 2020  (err).          
+0001e8c0: 2020 6966 205f 7265 7475 726e 5f3a 0a20    if _return_:. 
+0001e8d0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0001e8e0: 2053 7461 6e64 6172 6420 4f75 7420 616e   Standard Out an
+0001e8f0: 6420 4572 726f 720a 2020 2020 2020 2020  d Error.        
+0001e900: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+0001e910: 7275 652c 7274 2c65 720a 2020 2020 6966  rue,rt,er.    if
+0001e920: 205f 7265 7475 726e 5f3a 0a20 2020 2020   _return_:.     
+0001e930: 2020 2072 6574 7572 6e20 4661 6c73 652c     return False,
+0001e940: 7274 2c27 4e6f 7420 5374 7269 6e67 2063  rt,'Not String c
+0001e950: 6f64 652e 2072 6571 7569 7265 6420 2a53  ode. required *S
+0001e960: 5452 494e 472a 2043 6f64 652e 2720 2023  TRING* Code.'  #
+0001e970: 4e6f 7420 6120 7374 7269 6e67 2063 6f64  Not a string cod
+0001e980: 650a 0a64 6566 2045 7863 6570 744d 6573  e..def ExceptMes
+0001e990: 7361 6765 286d 7367 3d27 272c 6465 6661  sage(msg='',defa
+0001e9a0: 756c 743d 4e6f 6e65 293a 0a20 2020 2027  ult=None):.    '
+0001e9b0: 2727 0a20 2020 2054 7279 3a0a 2020 2020  ''.    Try:.    
+0001e9c0: 2020 2041 4141 0a20 2020 2045 7863 6570     AAA.    Excep
+0001e9d0: 743a 0a20 2020 2020 2020 6572 723d 4578  t:.       err=Ex
+0001e9e0: 6365 7074 4d65 7373 6167 6528 2920 3d3e  ceptMessage() =>
+0001e9f0: 2049 6620 6578 6365 7074 696e 6720 7468   If excepting th
+0001ea00: 656e 2074 616b 656e 2065 7272 6f72 206f  en taken error o
+0001ea10: 7220 7472 6163 6562 6163 6b20 636f 6465  r traceback code
+0001ea20: 2061 6e64 2072 6574 7572 6e20 6974 0a20   and return it. 
+0001ea30: 2020 2027 2727 0a20 2020 2065 3d73 7973     '''.    e=sys
+0001ea40: 2e65 7863 5f69 6e66 6f28 295b 305d 0a20  .exc_info()[0]. 
+0001ea50: 2020 2065 723d 7472 6163 6562 6163 6b2e     er=traceback.
+0001ea60: 666f 726d 6174 5f65 7863 2829 0a20 2020  format_exc().   
+0001ea70: 2069 6620 6520 6f72 2065 7220 213d 2027   if e or er != '
+0001ea80: 4e6f 6e65 5479 7065 3a20 4e6f 6e65 5c6e  NoneType: None\n
+0001ea90: 273a 0a20 2020 2020 2020 2069 6620 6d73  ':.        if ms
+0001eaa0: 673a 0a20 2020 2020 2020 2020 2020 206d  g:.            m
+0001eab0: 7367 3d27 7b7d 5c6e 5c6e 7b7d 5c6e 5c6e  sg='{}\n\n{}\n\n
+0001eac0: 7b7d 272e 666f 726d 6174 286d 7367 2c65  {}'.format(msg,e
+0001ead0: 2c65 7229 0a20 2020 2020 2020 2065 6c73  ,er).        els
+0001eae0: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
+0001eaf0: 7367 3d27 5c6e 5c6e 7b7d 5c6e 5c6e 7b7d  sg='\n\n{}\n\n{}
+0001eb00: 272e 666f 726d 6174 2865 2c65 7229 0a20  '.format(e,er). 
+0001eb10: 2020 2020 2020 2072 6574 7572 6e20 6d73         return ms
+0001eb20: 670a 2020 2020 7265 7475 726e 2064 6566  g.    return def
+0001eb30: 6175 6c74 0a0a 6465 6620 4970 5634 2869  ault..def IpV4(i
+0001eb40: 703d 4e6f 6e65 2c6f 7574 3d27 7374 7227  p=None,out='str'
+0001eb50: 2c64 6566 6175 6c74 3d46 616c 7365 2c70  ,default=False,p
+0001eb60: 6f72 743d 4e6f 6e65 2c62 6d63 3d46 616c  ort=None,bmc=Fal
+0001eb70: 7365 2c75 7365 643d 4661 6c73 652c 706f  se,used=False,po
+0001eb80: 6f6c 3d4e 6f6e 652c 7375 7070 6f72 745f  ol=None,support_
+0001eb90: 686f 7374 6e61 6d65 3d46 616c 7365 2c69  hostname=False,i
+0001eba0: 666e 616d 653d 4661 6c73 6529 3a0a 2020  fname=False):.  
+0001ebb0: 2020 2727 270a 2020 2020 6368 6563 6b2f    '''.    check/
+0001ebc0: 636f 6e76 6572 7420 4950 0a20 2020 2069  convert IP.    i
+0001ebd0: 7020 3a20 696e 742c 2073 7472 2c20 646f  p : int, str, do
+0001ebe0: 6d61 696e 6e61 6d65 2c20 6574 6865 726e  mainname, ethern
+0001ebf0: 6574 2064 6576 206e 616d 652c 204e 6f6e  et dev name, Non
+0001ec00: 650a 2020 2020 6f75 743a 0a20 2020 2020  e.    out:.     
+0001ec10: 2073 7472 203a 2064 6566 6175 6c74 203a   str : default :
+0001ec20: 2063 6f6e 7665 7274 2074 6f20 7878 782e   convert to xxx.
+0001ec30: 7878 782e 7878 782e 7878 7820 666f 726d  xxx.xxx.xxx form
+0001ec40: 6174 0a20 2020 2020 2069 6e74 203a 2063  at.      int : c
+0001ec50: 6f6e 7665 7274 2074 6f20 696e 7420 666f  onvert to int fo
+0001ec60: 726d 6174 0a20 2020 2020 2068 6578 203a  rmat.      hex :
+0001ec70: 2063 6f6e 7665 7274 2074 6f20 6865 7820   convert to hex 
+0001ec80: 666f 726d 6174 0a20 2020 2070 6f72 743a  format.    port:
+0001ec90: 2069 6620 796f 7520 7761 6e74 2063 6865   if you want che
+0001eca0: 636b 2074 6865 2049 5020 7769 7468 2070  ck the IP with p
+0001ecb0: 6f72 7420 7468 656e 2074 7970 650a 2020  ort then type.  
+0001ecc0: 2020 626d 6320 3a20 6465 6661 756c 7420    bmc : default 
+0001ecd0: 4661 6c73 652c 2054 7275 653a 2063 6865  False, True: che
+0001ece0: 636b 2042 4d43 2070 6f72 7420 2836 3233  ck BMC port (623
+0001ecf0: 2c36 3634 2c34 3433 290a 2020 2020 7265  ,664,443).    re
+0001ed00: 7475 726e 203a 2049 502c 2069 6620 6661  turn : IP, if fa
+0001ed10: 696c 2074 6865 6e20 7265 7475 726e 2064  il then return d
+0001ed20: 6566 6175 6c74 2076 616c 7565 0a20 2020  efault value.   
+0001ed30: 2075 7365 643a 0a20 2020 2020 202a 2072   used:.      * r
+0001ed40: 6571 7569 7265 6420 706f 7274 206f 7074  equired port opt
+0001ed50: 696f 6e2c 2062 7574 2063 6865 636b 2077  ion, but check w
+0001ed60: 6974 6820 7369 6e67 6c65 2070 6f72 740a  ith single port.
+0001ed70: 2020 2020 2020 4661 6c73 653a 2064 6566        False: def
+0001ed80: 6175 6c74 2028 6e6f 7420 6368 6563 6b29  ault (not check)
+0001ed90: 0a20 2020 2020 2054 7275 653a 2043 6865  .      True: Che
+0001eda0: 636b 2049 5020 616c 7265 6164 7920 7573  ck IP already us
+0001edb0: 6564 2074 6865 2070 6f72 7428 7265 7475  ed the port(retu
+0001edc0: 726e 2054 7275 6529 206f 7220 7374 696c  rn True) or stil
+0001edd0: 6c20 6176 6169 6c61 626c 6528 7265 7475  l available(retu
+0001ede0: 726e 2046 616c 7365 290a 2020 2020 706f  rn False).    po
+0001edf0: 6f6c 3a0a 2020 2020 2020 5475 706c 653a  ol:.      Tuple:
+0001ee00: 2069 6620 6769 7665 2049 5020 506f 6f6c   if give IP Pool
+0001ee10: 2873 7461 7274 2c65 6e64 2920 7468 656e  (start,end) then
+0001ee20: 2063 6865 636b 2074 6865 2049 5020 6973   check the IP is
+0001ee30: 2069 6e20 7468 6520 504f 4f4c 2072 616e   in the POOL ran
+0001ee40: 6765 206f 7220 6e6f 742e 0a20 2020 2020  ge or not..     
+0001ee50: 204c 6973 7420 3a20 4950 2069 7320 696e   List : IP is in
+0001ee60: 2074 6865 2050 6f6f 6c20 6c69 7374 0a20   the Pool list. 
+0001ee70: 2020 2069 666e 616d 653a 0a20 2020 2020     ifname:.     
+0001ee80: 2054 7275 653a 2069 7020 7769 6c6c 206e   True: ip will n
+0001ee90: 6574 776f 726b 2064 6576 6963 6520 6e61  etwork device na
+0001eea0: 6d65 2074 6865 6e20 6669 6e64 2069 7020  me then find ip 
+0001eeb0: 6164 6472 6573 730a 2020 2020 2727 270a  address.    '''.
+0001eec0: 2020 2020 6966 2069 666e 616d 6520 6973      if ifname is
+0001eed0: 2054 7275 653a 0a20 2020 2020 2020 2069   True:.        i
+0001eee0: 6620 6973 696e 7374 616e 6365 2869 702c  f isinstance(ip,
+0001eef0: 7374 7229 2061 6e64 2069 703a 0a20 2020  str) and ip:.   
+0001ef00: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+0001ef10: 6f73 2e70 6174 682e 6973 6469 7228 272f  os.path.isdir('/
+0001ef20: 7379 732f 636c 6173 732f 6e65 742f 7b7d  sys/class/net/{}
+0001ef30: 272e 666f 726d 6174 2869 7029 293a 0a20  '.format(ip)):. 
+0001ef40: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001ef50: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
+0001ef60: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
+0001ef70: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001ef80: 203d 2073 6f63 6b65 742e 736f 636b 6574   = socket.socket
+0001ef90: 2873 6f63 6b65 742e 4146 5f49 4e45 542c  (socket.AF_INET,
+0001efa0: 2073 6f63 6b65 742e 534f 434b 5f44 4752   socket.SOCK_DGR
+0001efb0: 414d 290a 2020 2020 2020 2020 2020 2020  AM).            
+0001efc0: 2020 2020 7265 7475 726e 2073 6f63 6b65      return socke
+0001efd0: 742e 696e 6574 5f6e 746f 6128 6663 6e74  t.inet_ntoa(fcnt
+0001efe0: 6c2e 696f 6374 6c28 0a20 2020 2020 2020  l.ioctl(.       
+0001eff0: 2020 2020 2020 2020 2020 2020 2073 2e66               s.f
+0001f000: 696c 656e 6f28 292c 0a20 2020 2020 2020  ileno(),.       
+0001f010: 2020 2020 2020 2020 2020 2020 2030 7838               0x8
+0001f020: 3931 352c 2020 2320 5349 4f43 4749 4641  915,  # SIOCGIFA
+0001f030: 4444 520a 2020 2020 2020 2020 2020 2020  DDR.            
+0001f040: 2020 2020 2020 2020 7374 7275 6374 2e70          struct.p
+0001f050: 6163 6b28 2732 3536 7327 2c20 6970 5b3a  ack('256s', ip[:
+0001f060: 3135 5d29 0a20 2020 2020 2020 2020 2020  15]).           
+0001f070: 2020 2020 2029 5b32 303a 3234 5d29 0a20       )[20:24]). 
+0001f080: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+0001f090: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+0001f0a0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+0001f0b0: 2020 2020 2020 2020 2020 2020 6465 765f              dev_
+0001f0c0: 696e 666f 3d6f 732e 706f 7065 6e28 2769  info=os.popen('i
+0001f0d0: 7020 6164 6472 2073 686f 7720 7b7d 272e  p addr show {}'.
+0001f0e0: 666f 726d 6174 2869 7029 290a 2020 2020  format(ip)).    
+0001f0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f100: 6966 2064 6576 5f69 6e66 6f3a 0a20 2020  if dev_info:.   
+0001f110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f120: 2020 2020 2066 6f75 6e64 5f69 703d 6465       found_ip=de
+0001f130: 765f 696e 666f 2e72 6561 6428 292e 7370  v_info.read().sp
+0001f140: 6c69 7428 2269 6e65 7420 2229 5b31 5d2e  lit("inet ")[1].
+0001f150: 7370 6c69 7428 222f 2229 5b30 5d0a 2020  split("/")[0].  
+0001f160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f170: 2020 2020 2020 6465 765f 696e 666f 2e63        dev_info.c
+0001f180: 6c6f 7365 2829 0a20 2020 2020 2020 2020  lose().         
+0001f190: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001f1a0: 6574 7572 6e20 666f 756e 645f 6970 0a20  eturn found_ip. 
+0001f1b0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0001f1c0: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
+0001f1d0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001f1e0: 6e20 6465 6661 756c 740a 2020 2020 2020  n default.      
+0001f1f0: 2020 7265 7475 726e 2073 6f63 6b65 742e    return socket.
+0001f200: 6765 7468 6f73 7462 796e 616d 6528 736f  gethostbyname(so
+0001f210: 636b 6574 2e67 6574 686f 7374 6e61 6d65  cket.gethostname
+0001f220: 2829 290a 0a20 2020 2069 6620 4973 4e6f  ())..    if IsNo
+0001f230: 6e65 2869 7029 3a20 7265 7475 726e 2064  ne(ip): return d
+0001f240: 6566 6175 6c74 2020 2020 0a0a 2020 2020  efault    ..    
+0001f250: 6465 6620 4973 4f70 656e 506f 7274 2869  def IsOpenPort(i
+0001f260: 702c 706f 7274 293a 0a20 2020 2020 2020  p,port):.       
+0001f270: 2027 2727 0a20 2020 2020 2020 2049 7420   '''.        It 
+0001f280: 636f 6e6e 6563 7469 6f6e 6162 6c65 2070  connectionable p
+0001f290: 6f72 7428 3f29 206c 696b 6520 6173 2073  ort(?) like as s
+0001f2a0: 7368 2c20 6674 702c 2074 656c 6e65 742c  sh, ftp, telnet,
+0001f2b0: 2077 6562 2c20 2e2e 2e0a 2020 2020 2020   web, ....      
+0001f2c0: 2020 2727 270a 2020 2020 2020 2020 7463    '''.        tc
+0001f2d0: 705f 736b 203d 2073 6f63 6b65 742e 736f  p_sk = socket.so
+0001f2e0: 636b 6574 2873 6f63 6b65 742e 4146 5f49  cket(socket.AF_I
+0001f2f0: 4e45 542c 2073 6f63 6b65 742e 534f 434b  NET, socket.SOCK
+0001f300: 5f53 5452 4541 4d29 0a20 2020 2020 2020  _STREAM).       
+0001f310: 2074 6370 5f73 6b2e 7365 7473 6f63 6b6f   tcp_sk.setsocko
+0001f320: 7074 2873 6f63 6b65 742e 534f 4c5f 534f  pt(socket.SOL_SO
+0001f330: 434b 4554 2c20 736f 636b 6574 2e53 4f5f  CKET, socket.SO_
+0001f340: 5245 5553 4541 4444 522c 2031 290a 2020  REUSEADDR, 1).  
+0001f350: 2020 2020 2020 7463 705f 736b 2e73 6574        tcp_sk.set
+0001f360: 7469 6d65 6f75 7428 3129 0a20 2020 2020  timeout(1).     
+0001f370: 2020 2072 743d 5b5d 0a20 2020 2020 2020     rt=[].       
+0001f380: 2066 6f72 2070 7420 696e 2070 6f72 743a   for pt in port:
+0001f390: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
+0001f3a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001f3b0: 2020 7463 705f 736b 2e63 6f6e 6e65 6374    tcp_sk.connect
+0001f3c0: 2828 6970 2c70 7429 290a 2020 2020 2020  ((ip,pt)).      
+0001f3d0: 2020 2020 2020 2020 2020 7463 705f 736b            tcp_sk
+0001f3e0: 2e63 6c6f 7365 2829 0a20 2020 2020 2020  .close().       
+0001f3f0: 2020 2020 2020 2020 2072 742e 6170 7065           rt.appe
+0001f400: 6e64 2870 7429 0a20 2020 2020 2020 2020  nd(pt).         
+0001f410: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
+0001f420: 2020 2020 2020 2020 2020 2070 6173 730a             pass.
+0001f430: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+0001f440: 740a 2020 2020 6465 6620 4973 5573 6564  t.    def IsUsed
+0001f450: 506f 7274 2869 702c 706f 7274 293a 0a20  Port(ip,port):. 
+0001f460: 2020 2020 2020 2027 2727 0a20 2020 2020         '''.     
+0001f470: 2020 2054 6865 2049 5020 616c 7265 6164     The IP alread
+0001f480: 7920 7573 6564 2074 6865 2070 6f72 742c  y used the port,
+0001f490: 2069 7420 6a75 7374 2063 6865 636b 7570   it just checkup
+0001f4a0: 2061 7661 696c 6162 6c65 2070 6f72 7420   available port 
+0001f4b0: 6f72 2061 6c72 6561 6420 7573 6564 0a20  or alread used. 
+0001f4c0: 2020 2020 2020 2027 2727 0a20 2020 2020         '''.     
+0001f4d0: 2020 2069 6620 4973 4e6f 6e65 2869 702c     if IsNone(ip,
+0001f4e0: 6368 6b5f 7661 6c3d 5b4e 6f6e 652c 2727  chk_val=[None,''
+0001f4f0: 2c27 6c6f 6361 6c68 6f73 7427 2c27 6c6f  ,'localhost','lo
+0001f500: 6361 6c27 5d29 3a0a 2020 2020 2020 2020  cal']):.        
+0001f510: 2020 2020 6970 3d27 3132 372e 302e 302e      ip='127.0.0.
+0001f520: 3127 0a20 2020 2020 2020 2073 6f63 3d73  1'.        soc=s
+0001f530: 6f63 6b65 742e 736f 636b 6574 2873 6f63  ocket.socket(soc
+0001f540: 6b65 742e 4146 5f49 4e45 542c 2073 6f63  ket.AF_INET, soc
+0001f550: 6b65 742e 534f 434b 5f53 5452 4541 4d29  ket.SOCK_STREAM)
+0001f560: 0a20 2020 2020 2020 2072 743d 5b5d 0a20  .        rt=[]. 
+0001f570: 2020 2020 2020 2066 6f72 2070 7420 696e         for pt in
+0001f580: 2070 6f72 743a 0a20 2020 2020 2020 2020   port:.         
+0001f590: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+0001f5a0: 2020 2020 2020 2020 6c6f 6361 7469 6f6e          location
+0001f5b0: 3d28 6970 2c70 7429 0a20 2020 2020 2020  =(ip,pt).       
+0001f5c0: 2020 2020 2020 2020 2072 743d 736f 632e           rt=soc.
+0001f5d0: 636f 6e6e 6563 745f 6578 286c 6f63 6174  connect_ex(locat
+0001f5e0: 696f 6e29 0a20 2020 2020 2020 2020 2020  ion).           
+0001f5f0: 2020 2020 2073 6f63 2e63 6c6f 7365 2829       soc.close()
+0001f600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f610: 2023 7274 3d3d 3020 7468 656e 2061 6c72   #rt==0 then alr
+0001f620: 6561 6479 2075 7365 640a 2020 2020 2020  eady used.      
+0001f630: 2020 2020 2020 2020 2020 6966 2072 7420            if rt 
+0001f640: 3d3d 2030 3a20 7274 2e61 7070 656e 6428  == 0: rt.append(
+0001f650: 7074 290a 2020 2020 2020 2020 2020 2020  pt).            
+0001f660: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
+0001f670: 2020 2020 2020 2020 7061 7373 0a20 2020          pass.   
+0001f680: 2020 2020 2072 6574 7572 6e20 7274 0a20       return rt. 
+0001f690: 2020 2069 6620 706f 7274 203d 3d20 2762     if port == 'b
+0001f6a0: 6d63 273a 0a20 2020 2020 2020 2062 6d63  mc':.        bmc
+0001f6b0: 3d54 7275 650a 2020 2020 2020 2020 706f  =True.        po
+0001f6c0: 7274 3d4e 6f6e 650a 2020 2020 6966 2062  rt=None.    if b
+0001f6d0: 6d63 3a20 2320 5570 6461 7465 2042 4d43  mc: # Update BMC
+0001f6e0: 2050 6f72 740a 2020 2020 2020 2020 6465   Port.        de
+0001f6f0: 6661 756c 745f 626d 635f 706f 7274 3d5b  fault_bmc_port=[
+0001f700: 3632 332c 3636 342c 3434 335d 0a20 2020  623,664,443].   
+0001f710: 2020 2020 2069 6620 6e6f 7420 4973 4e6f       if not IsNo
+0001f720: 6e65 2870 6f72 7429 3a0a 2020 2020 2020  ne(port):.      
+0001f730: 2020 2020 2020 706f 7274 3d49 6e74 2870        port=Int(p
+0001f740: 6f72 742c 6465 6661 756c 743d 4661 6c73  ort,default=Fals
+0001f750: 6529 0a20 2020 2020 2020 2020 2020 2069  e).            i
+0001f760: 6620 6973 696e 7374 616e 6365 2870 6f72  f isinstance(por
+0001f770: 742c 286c 6973 742c 7475 706c 6529 293a  t,(list,tuple)):
+0001f780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f790: 2066 6f72 2069 2069 6e20 706f 7274 3a0a   for i in port:.
+0001f7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f7b0: 2020 2020 6966 2069 206e 6f74 2069 6e20      if i not in 
+0001f7c0: 6465 6661 756c 745f 626d 635f 706f 7274  default_bmc_port
+0001f7d0: 3a20 6465 6661 756c 745f 626d 635f 706f  : default_bmc_po
+0001f7e0: 7274 2e61 7070 656e 6428 6929 0a20 2020  rt.append(i).   
+0001f7f0: 2020 2020 2020 2020 2065 6c69 6620 6973           elif is
+0001f800: 696e 7374 616e 6365 2870 6f72 742c 696e  instance(port,in
+0001f810: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+0001f820: 2020 2020 6966 2070 6f72 7420 6e6f 7420      if port not 
+0001f830: 696e 2064 6566 6175 6c74 5f62 6d63 5f70  in default_bmc_p
+0001f840: 6f72 743a 0a20 2020 2020 2020 2020 2020  ort:.           
+0001f850: 2020 2020 2020 2020 2064 6566 6175 6c74           default
+0001f860: 5f62 6d63 5f70 6f72 742e 6170 7065 6e64  _bmc_port.append
+0001f870: 2870 6f72 7429 0a20 2020 2020 2020 2070  (port).        p
+0001f880: 6f72 743d 7475 706c 6528 6465 6661 756c  ort=tuple(defaul
+0001f890: 745f 626d 635f 706f 7274 290a 2020 2020  t_bmc_port).    
+0001f8a0: 6966 2070 6f72 743a 0a20 2020 2020 2020  if port:.       
+0001f8b0: 2070 6f72 743d 496e 7428 706f 7274 2c64   port=Int(port,d
+0001f8c0: 6566 6175 6c74 3d46 616c 7365 290a 2020  efault=False).  
+0001f8d0: 2020 2020 2020 6966 2070 6f72 7420 6973        if port is
+0001f8e0: 2046 616c 7365 3a20 7265 7475 726e 2064   False: return d
+0001f8f0: 6566 6175 6c74 0a20 2020 2020 2020 2069  efault.        i
+0001f900: 6620 5479 7065 2870 6f72 742c 696e 7429  f Type(port,int)
+0001f910: 3a20 706f 7274 3d5b 706f 7274 5d0a 2020  : port=[port].  
+0001f920: 2020 6970 5f69 6e74 3d4e 6f6e 650a 2020    ip_int=None.  
+0001f930: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0001f940: 6970 2c73 7472 293a 0a20 2020 2020 2020  ip,str):.       
+0001f950: 2069 7073 7472 3d69 702e 7374 7269 7028   ipstr=ip.strip(
+0001f960: 290a 2020 2020 2020 2020 6966 2027 3078  ).        if '0x
+0001f970: 2720 696e 2069 7073 7472 3a0a 2020 2020  ' in ipstr:.    
+0001f980: 2020 2020 2020 2020 6970 5f69 6e74 3d69          ip_int=i
+0001f990: 6e74 2869 7073 7472 2c31 3629 0a20 2020  nt(ipstr,16).   
+0001f9a0: 2020 2020 2065 6c69 6620 6970 7374 722e       elif ipstr.
+0001f9b0: 6973 6469 6769 7428 293a 0a20 2020 2020  isdigit():.     
+0001f9c0: 2020 2020 2020 2069 705f 696e 743d 696e         ip_int=in
+0001f9d0: 7428 6970 7374 7229 0a20 2020 2020 2020  t(ipstr).       
+0001f9e0: 2065 6c69 6620 272e 2720 696e 2069 7073   elif '.' in ips
+0001f9f0: 7472 3a0a 2020 2020 2020 2020 2020 2020  tr:.            
+0001fa00: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+0001fa10: 2020 2020 2069 705f 696e 743d 7374 7275       ip_int=stru
+0001fa20: 6374 2e75 6e70 6163 6b28 2221 4922 2c20  ct.unpack("!I", 
+0001fa30: 736f 636b 6574 2e69 6e65 745f 6174 6f6e  socket.inet_aton
+0001fa40: 2869 7073 7472 2929 5b30 5d20 2320 636f  (ipstr))[0] # co
+0001fa50: 6e76 6572 7420 496e 7420 4950 0a20 2020  nvert Int IP.   
+0001fa60: 2020 2020 2020 2020 2020 2020 2023 7374               #st
+0001fa70: 7275 6374 2e75 6e70 6163 6b28 2221 4c22  ruct.unpack("!L"
+0001fa80: 2c20 736f 636b 6574 2e69 6e65 745f 6174  , socket.inet_at
+0001fa90: 6f6e 2869 7029 295b 305d 0a20 2020 2020  on(ip))[0].     
+0001faa0: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
+0001fab0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001fac0: 6620 7375 7070 6f72 745f 686f 7374 6e61  f support_hostna
+0001fad0: 6d65 3a0a 2020 2020 2020 2020 2020 2020  me:.            
+0001fae0: 2020 2020 2020 2020 7472 793a 2023 2068          try: # h
+0001faf0: 6f73 746e 616d 6520 6162 632e 6465 6620  ostname abc.def 
+0001fb00: 6361 7365 0a20 2020 2020 2020 2020 2020  case.           
+0001fb10: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001fb20: 7572 6e20 4970 5634 2873 6f63 6b65 742e  urn IpV4(socket.
+0001fb30: 6765 7468 6f73 7462 796e 616d 6528 6970  gethostbyname(ip
+0001fb40: 7374 7229 2c6f 7574 3d6f 7574 2c64 6566  str),out=out,def
+0001fb50: 6175 6c74 3d64 6566 6175 6c74 2c70 6f72  ault=default,por
+0001fb60: 743d 706f 7274 2c62 6d63 3d62 6d63 2c75  t=port,bmc=bmc,u
+0001fb70: 7365 643d 7573 6564 2c70 6f6f 6c3d 706f  sed=used,pool=po
+0001fb80: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
+0001fb90: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
+0001fba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fbb0: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+0001fbc0: 6566 6175 6c74 0a20 2020 2020 2020 2065  efault.        e
+0001fbd0: 6c69 6620 7375 7070 6f72 745f 686f 7374  lif support_host
+0001fbe0: 6e61 6d65 3a20 2320 686f 7374 6e61 6d65  name: # hostname
+0001fbf0: 2061 6263 2063 6173 650a 2020 2020 2020   abc case.      
+0001fc00: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+0001fc10: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001fc20: 6e20 4970 5634 2873 6f63 6b65 742e 6765  n IpV4(socket.ge
+0001fc30: 7468 6f73 7462 796e 616d 6528 6970 7374  thostbyname(ipst
+0001fc40: 7229 2c6f 7574 3d6f 7574 2c64 6566 6175  r),out=out,defau
+0001fc50: 6c74 3d64 6566 6175 6c74 2c70 6f72 743d  lt=default,port=
+0001fc60: 706f 7274 2c62 6d63 3d62 6d63 2c75 7365  port,bmc=bmc,use
+0001fc70: 643d 7573 6564 2c70 6f6f 6c3d 706f 6f6c  d=used,pool=pool
+0001fc80: 290a 2020 2020 2020 2020 2020 2020 6578  ).            ex
+0001fc90: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
+0001fca0: 2020 2020 2020 7265 7475 726e 2064 6566        return def
+0001fcb0: 6175 6c74 0a20 2020 2065 6c69 6620 6973  ault.    elif is
+0001fcc0: 696e 7374 616e 6365 2869 702c 696e 7429  instance(ip,int)
+0001fcd0: 2061 6e64 206e 6f74 2069 7369 6e73 7461   and not isinsta
+0001fce0: 6e63 6528 6970 2c62 6f6f 6c29 3a0a 2020  nce(ip,bool):.  
+0001fcf0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+0001fd00: 2020 2020 2020 2073 6f63 6b65 742e 696e         socket.in
+0001fd10: 6574 5f6e 746f 6128 7374 7275 6374 2e70  et_ntoa(struct.p
+0001fd20: 6163 6b28 2221 4922 2c20 6970 2929 2023  ack("!I", ip)) #
+0001fd30: 2063 6865 636b 2069 6e74 2069 7320 4950   check int is IP
+0001fd40: 206f 7220 6e6f 740a 2020 2020 2020 2020   or not.        
+0001fd50: 2020 2020 6970 5f69 6e74 3d69 700a 2020      ip_int=ip.  
+0001fd60: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
+0001fd70: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001fd80: 2064 6566 6175 6c74 0a20 2020 2065 6c69   default.    eli
+0001fd90: 6620 6973 696e 7374 616e 6365 2869 702c  f isinstance(ip,
+0001fda0: 7479 7065 2868 6578 2929 3a0a 2020 2020  type(hex)):.    
+0001fdb0: 2020 2020 6970 5f69 6e74 3d69 6e74 2869      ip_int=int(i
+0001fdc0: 702c 3136 290a 0a20 2020 2069 6620 6e6f  p,16)..    if no
+0001fdd0: 7420 4973 4e6f 6e65 2869 705f 696e 7429  t IsNone(ip_int)
+0001fde0: 3a0a 2020 2020 2020 2020 7472 793a 0a20  :.        try:. 
+0001fdf0: 2020 2020 2020 2020 2020 2069 6620 6f75             if ou
+0001fe00: 7420 696e 205b 2769 6e74 272c 696e 745d  t in ['int',int]
+0001fe10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001fe20: 2020 7265 7475 726e 2069 705f 696e 740a    return ip_int.
+0001fe30: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0001fe40: 206f 7574 2069 6e20 5b27 6865 7827 2c68   out in ['hex',h
+0001fe50: 6578 5d3a 0a20 2020 2020 2020 2020 2020  ex]:.           
+0001fe60: 2020 2020 2072 6574 7572 6e20 6865 7828       return hex(
+0001fe70: 6970 5f69 6e74 290a 2020 2020 2020 2020  ip_int).        
+0001fe80: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+0001fe90: 6e63 6528 706f 6f6c 2c74 7570 6c65 293a  nce(pool,tuple):
+0001fea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001feb0: 2069 6620 6c65 6e28 706f 6f6c 2920 3d3d   if len(pool) ==
+0001fec0: 2031 3a0a 2020 2020 2020 2020 2020 2020   1:.            
+0001fed0: 2020 2020 2020 2020 7265 7475 726e 2049          return I
+0001fee0: 7056 3428 706f 6f6c 5b30 5d2c 6f75 743d  pV4(pool[0],out=
+0001fef0: 696e 7429 203c 3d20 6970 5f69 6e74 0a20  int) <= ip_int. 
+0001ff00: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0001ff10: 6c69 6620 6c65 6e28 706f 6f6c 2920 3d3d  lif len(pool) ==
+0001ff20: 2032 3a0a 2020 2020 2020 2020 2020 2020   2:.            
+0001ff30: 2020 2020 2020 2020 6966 206e 6f74 2070          if not p
+0001ff40: 6f6f 6c5b 305d 2061 6e64 2070 6f6f 6c5b  ool[0] and pool[
+0001ff50: 315d 3a0a 2020 2020 2020 2020 2020 2020  1]:.            
+0001ff60: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001ff70: 726e 2069 705f 696e 7420 3c3d 2049 7056  rn ip_int <= IpV
+0001ff80: 3428 706f 6f6c 5b31 5d2c 6f75 743d 696e  4(pool[1],out=in
+0001ff90: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
+0001ffa0: 2020 2020 2020 2065 6c69 6620 6e6f 7420         elif not 
+0001ffb0: 706f 6f6c 5b31 5d20 616e 6420 706f 6f6c  pool[1] and pool
+0001ffc0: 5b30 5d3a 0a20 2020 2020 2020 2020 2020  [0]:.           
+0001ffd0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001ffe0: 7572 6e20 4970 5634 2870 6f6f 6c5b 305d  urn IpV4(pool[0]
+0001fff0: 2c6f 7574 3d69 6e74 2920 3c3d 2069 705f  ,out=int) <= ip_
+00020000: 696e 7420 0a20 2020 2020 2020 2020 2020  int .           
+00020010: 2020 2020 2020 2020 2065 6c69 6620 706f           elif po
+00020020: 6f6c 5b30 5d20 616e 6420 706f 6f6c 5b31  ol[0] and pool[1
+00020030: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+00020040: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00020050: 6e20 4970 5634 2870 6f6f 6c5b 305d 2c6f  n IpV4(pool[0],o
+00020060: 7574 3d69 6e74 2920 3c3d 2069 705f 696e  ut=int) <= ip_in
+00020070: 7420 3c3d 2049 7056 3428 706f 6f6c 5b31  t <= IpV4(pool[1
+00020080: 5d2c 6f75 743d 696e 7429 0a20 2020 2020  ],out=int).     
+00020090: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000200a0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000200b0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+000200c0: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
+000200d0: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
+000200e0: 6e73 7461 6e63 6528 706f 6f6c 2c6c 6973  nstance(pool,lis
+000200f0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+00020100: 2020 2020 706f 6f6c 3d5b 4970 5634 2869      pool=[IpV4(i
+00020110: 2c6f 7574 3d69 6e74 2920 666f 7220 6920  ,out=int) for i 
+00020120: 696e 2070 6f6f 6c5d 0a20 2020 2020 2020  in pool].       
+00020130: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00020140: 6970 5f69 6e74 2069 6e20 706f 6f6c 0a20  ip_int in pool. 
+00020150: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00020160: 2023 6465 6661 756c 7420 746f 2073 7472   #default to str
+00020170: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020180: 2069 705f 7374 723d 736f 636b 6574 2e69   ip_str=socket.i
+00020190: 6e65 745f 6e74 6f61 2873 7472 7563 742e  net_ntoa(struct.
+000201a0: 7061 636b 2822 2149 222c 2069 705f 696e  pack("!I", ip_in
+000201b0: 7429 290a 2020 2020 2020 2020 2020 2020  t)).            
+000201c0: 2020 2020 6966 2070 6f72 743a 2023 2049      if port: # I
+000201d0: 6620 6269 6e67 2050 6f72 7420 7468 656e  f bing Port then
+000201e0: 2063 6865 636b 2074 6865 2070 6f72 740a   check the port.
+000201f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020200: 2020 2020 6966 2075 7365 643a 0a20 2020      if used:.   
+00020210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020220: 2020 2020 2072 743d 4973 5573 6564 506f       rt=IsUsedPo
+00020230: 7274 2869 705f 7374 722c 706f 7274 290a  rt(ip_str,port).
+00020240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020250: 2020 2020 2020 2020 6966 2072 743a 2072          if rt: r
+00020260: 6574 7572 6e20 7274 0a20 2020 2020 2020  eturn rt.       
+00020270: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00020280: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00020290: 2020 2020 2020 2020 2020 2072 743d 4973             rt=Is
+000202a0: 4f70 656e 506f 7274 2869 705f 7374 722c  OpenPort(ip_str,
+000202b0: 706f 7274 290a 2020 2020 2020 2020 2020  port).          
+000202c0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000202d0: 2072 743a 2072 6574 7572 6e20 7274 0a20   rt: return rt. 
+000202e0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000202f0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00020300: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00020310: 6970 5f73 7472 0a20 2020 2020 2020 2065  ip_str.        e
+00020320: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
+00020330: 2020 2070 6173 730a 2020 2020 7265 7475     pass.    retu
+00020340: 726e 2064 6566 6175 6c74 0a0a 6465 6620  rn default..def 
+00020350: 7069 6e67 2868 6f73 742c 2a2a 6f70 7473  ping(host,**opts
+00020360: 293a 0a20 2020 2049 434d 505f 4543 484f  ):.    ICMP_ECHO
+00020370: 5f52 4551 5545 5354 203d 2038 2023 2053  _REQUEST = 8 # S
+00020380: 6565 6d73 2074 6f20 6265 2074 6865 2073  eems to be the s
+00020390: 616d 6520 6f6e 2053 6f6c 6172 6973 2e20  ame on Solaris. 
+000203a0: 4672 6f6d 202f 7573 722f 696e 636c 7564  From /usr/includ
+000203b0: 652f 6c69 6e75 782f 6963 6d70 2e68 3b0a  e/linux/icmp.h;.
+000203c0: 2020 2020 4943 4d50 5f43 4f44 4520 3d20      ICMP_CODE = 
+000203d0: 736f 636b 6574 2e67 6574 7072 6f74 6f62  socket.getprotob
+000203e0: 796e 616d 6528 2769 636d 7027 290a 2020  yname('icmp').  
+000203f0: 2020 4552 524f 525f 4445 5343 5220 3d20    ERROR_DESCR = 
+00020400: 7b0a 2020 2020 2020 2020 313a 2027 202d  {.        1: ' -
+00020410: 204e 6f74 6520 7468 6174 2049 434d 5020   Note that ICMP 
+00020420: 6d65 7373 6167 6573 2063 616e 206f 6e6c  messages can onl
+00020430: 7920 6265 2027 0a20 2020 2020 2020 2020  y be '.         
+00020440: 2020 2773 656e 7420 6672 6f6d 2070 726f    'sent from pro
+00020450: 6365 7373 6573 2072 756e 6e69 6e67 2061  cesses running a
+00020460: 7320 726f 6f74 2e27 2c0a 2020 2020 2020  s root.',.      
+00020470: 2020 3130 3031 333a 2027 202d 204e 6f74    10013: ' - Not
+00020480: 6520 7468 6174 2049 434d 5020 6d65 7373  e that ICMP mess
+00020490: 6167 6573 2063 616e 206f 6e6c 7920 6265  ages can only be
+000204a0: 2073 656e 7420 6279 270a 2020 2020 2020   sent by'.      
+000204b0: 2020 2020 2020 2020 2027 2075 7365 7273           ' users
+000204c0: 206f 7220 7072 6f63 6573 7365 7320 7769   or processes wi
+000204d0: 7468 2061 646d 696e 6973 7472 6174 6f72  th administrator
+000204e0: 2072 6967 6874 732e 270a 2020 2020 2020   rights.'.      
+000204f0: 2020 7d0a 2020 2020 6465 6620 6368 6563    }.    def chec
+00020500: 6b73 756d 286d 7367 293a 0a20 2020 2020  ksum(msg):.     
+00020510: 2020 2073 756d 203d 2030 0a20 2020 2020     sum = 0.     
+00020520: 2020 2073 697a 6520 3d20 286c 656e 286d     size = (len(m
+00020530: 7367 2920 2f2f 2032 2920 2a20 320a 2020  sg) // 2) * 2.  
+00020540: 2020 2020 2020 666f 7220 6320 696e 2072        for c in r
+00020550: 616e 6765 2830 2c73 697a 652c 2032 293a  ange(0,size, 2):
+00020560: 0a20 2020 2020 2020 2020 2020 2073 756d  .            sum
+00020570: 203d 2028 7375 6d20 2b20 6f72 6428 6d73   = (sum + ord(ms
+00020580: 675b 6320 2b20 315d 292a 3235 362b 6f72  g[c + 1])*256+or
+00020590: 6428 6d73 675b 635d 2929 2026 2030 7866  d(msg[c])) & 0xf
+000205a0: 6666 6666 6666 660a 2020 2020 2020 2020  fffffff.        
+000205b0: 6966 2073 697a 6520 3c20 6c65 6e28 6d73  if size < len(ms
+000205c0: 6729 3a0a 2020 2020 2020 2020 2020 2020  g):.            
+000205d0: 7375 6d20 3d20 2873 756d 2b6f 7264 286d  sum = (sum+ord(m
+000205e0: 7367 5b6c 656e 286d 7367 2920 2d20 315d  sg[len(msg) - 1]
+000205f0: 2929 2026 2030 7866 6666 6666 6666 660a  )) & 0xffffffff.
+00020600: 2020 2020 2020 2020 7261 203d 207e 2828          ra = ~((
+00020610: 7375 6d20 3e3e 2031 3629 202b 2028 7375  sum >> 16) + (su
+00020620: 6d20 2620 3078 6666 6666 2920 2b20 2873  m & 0xffff) + (s
+00020630: 756d 203e 3e20 3136 2929 2026 2030 7866  um >> 16)) & 0xf
+00020640: 6666 660a 2020 2020 2020 2020 7261 203d  fff.        ra =
+00020650: 2072 6120 3e3e 2038 207c 2028 7261 203c   ra >> 8 | (ra <
+00020660: 3c20 3820 2620 3078 6666 3030 290a 2020  < 8 & 0xff00).  
+00020670: 2020 2020 2020 7265 7475 726e 2072 610a        return ra.
+00020680: 0a20 2020 2064 6566 206d 6b5f 7061 636b  .    def mk_pack
+00020690: 6574 2873 697a 6529 3a0a 2020 2020 2020  et(size):.      
+000206a0: 2020 2222 224d 616b 6520 6120 6e65 7720    """Make a new 
+000206b0: 6563 686f 2072 6571 7565 7374 2070 6163  echo request pac
+000206c0: 6b65 7420 6163 636f 7264 696e 6720 746f  ket according to
+000206d0: 2073 697a 6522 2222 0a20 2020 2020 2020   size""".       
+000206e0: 2023 2048 6561 6465 7220 6973 2074 7970   # Header is typ
+000206f0: 6520 2838 292c 2063 6f64 6520 2838 292c  e (8), code (8),
+00020700: 2063 6865 636b 7375 6d20 2831 3629 2c20   checksum (16), 
+00020710: 6964 2028 3136 292c 2073 6571 7565 6e63  id (16), sequenc
+00020720: 6520 2831 3629 0a20 2020 2020 2020 2068  e (16).        h
+00020730: 6561 6465 7220 3d20 7374 7275 6374 2e70  eader = struct.p
+00020740: 6163 6b28 2762 6248 4868 272c 2049 434d  ack('bbHHh', ICM
+00020750: 505f 4543 484f 5f52 4551 5545 5354 2c20  P_ECHO_REQUEST, 
+00020760: 302c 2030 2c20 7369 7a65 2c20 3129 0a20  0, 0, size, 1). 
+00020770: 2020 2020 2020 2023 6461 7461 203d 2073         #data = s
+00020780: 7472 7563 742e 6361 6c63 7369 7a65 2827  truct.calcsize('
+00020790: 6262 4848 6827 2920 2a20 2751 270a 2020  bbHHh') * 'Q'.  
+000207a0: 2020 2020 2020 6461 7461 203d 2073 697a        data = siz
+000207b0: 6520 2a20 2751 270a 2020 2020 2020 2020  e * 'Q'.        
+000207c0: 6d79 5f63 6865 636b 7375 6d20 3d20 6368  my_checksum = ch
+000207d0: 6563 6b73 756d 2853 7472 2868 6561 6465  ecksum(Str(heade
+000207e0: 7229 202b 2064 6174 6129 0a20 2020 2020  r) + data).     
+000207f0: 2020 2068 6561 6465 7220 3d20 7374 7275     header = stru
+00020800: 6374 2e70 6163 6b28 2762 6248 4868 272c  ct.pack('bbHHh',
+00020810: 2049 434d 505f 4543 484f 5f52 4551 5545   ICMP_ECHO_REQUE
+00020820: 5354 2c20 302c 0a20 2020 2020 2020 2020  ST, 0,.         
+00020830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020840: 2020 2020 736f 636b 6574 2e68 746f 6e73      socket.htons
+00020850: 286d 795f 6368 6563 6b73 756d 292c 2073  (my_checksum), s
+00020860: 697a 652c 2031 290a 2020 2020 2020 2020  ize, 1).        
+00020870: 7265 7475 726e 2068 6561 6465 7220 2b20  return header + 
+00020880: 4279 7465 7328 6461 7461 290a 0a20 2020  Bytes(data)..   
+00020890: 2064 6566 2072 6563 6569 7665 286d 795f   def receive(my_
+000208a0: 736f 636b 6574 2c20 7373 697a 652c 2073  socket, ssize, s
+000208b0: 7469 6d65 2c20 7469 6d65 6f75 7429 3a0a  time, timeout):.
+000208c0: 2020 2020 2020 2020 7768 696c 6520 5472          while Tr
+000208d0: 7565 3a0a 2020 2020 2020 2020 2020 2020  ue:.            
+000208e0: 6966 2074 696d 656f 7574 203c 3d20 303a  if timeout <= 0:
+000208f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020900: 2072 6574 7572 6e0a 2020 2020 2020 2020   return.        
+00020910: 2020 2020 7265 6164 7920 3d20 7365 6c65      ready = sele
+00020920: 6374 2e73 656c 6563 7428 5b6d 795f 736f  ct.select([my_so
+00020930: 636b 6574 5d2c 205b 5d2c 205b 5d2c 2074  cket], [], [], t
+00020940: 696d 656f 7574 290a 2020 2020 2020 2020  imeout).        
+00020950: 2020 2020 6966 2072 6561 6479 5b30 5d20      if ready[0] 
+00020960: 3d3d 205b 5d3a 2023 2054 696d 656f 7574  == []: # Timeout
+00020970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020980: 2072 6574 7572 6e0a 2020 2020 2020 2020   return.        
+00020990: 2020 2020 7265 6365 6976 6564 5f74 696d      received_tim
+000209a0: 6520 3d20 7469 6d65 2e74 696d 6528 290a  e = time.time().
+000209b0: 2020 2020 2020 2020 2020 2020 7061 636b              pack
+000209c0: 6574 2c20 6164 6472 203d 206d 795f 736f  et, addr = my_so
+000209d0: 636b 6574 2e72 6563 7666 726f 6d28 3130  cket.recvfrom(10
+000209e0: 3234 290a 2020 2020 2020 2020 2020 2020  24).            
+000209f0: 7479 7065 2c20 636f 6465 2c20 6368 6563  type, code, chec
+00020a00: 6b73 756d 2c20 6773 697a 652c 2073 6571  ksum, gsize, seq
+00020a10: 203d 2073 7472 7563 742e 756e 7061 636b   = struct.unpack
+00020a20: 2827 6262 4848 6827 2c20 7061 636b 6574  ('bbHHh', packet
+00020a30: 5b32 303a 3238 5d29 2023 2047 6574 2048  [20:28]) # Get H
+00020a40: 6561 6465 720a 2020 2020 2020 2020 2020  eader.          
+00020a50: 2020 6966 2067 7369 7a65 203d 3d20 7373    if gsize == ss
+00020a60: 697a 653a 0a20 2020 2020 2020 2020 2020  ize:.           
+00020a70: 2020 2020 2072 6574 7572 6e20 7265 6365       return rece
+00020a80: 6976 6564 5f74 696d 6520 2d20 7374 696d  ived_time - stim
+00020a90: 650a 2020 2020 2020 2020 2020 2020 7469  e.            ti
+00020aa0: 6d65 6f75 7420 2d3d 2072 6563 6569 7665  meout -= receive
+00020ab0: 645f 7469 6d65 202d 2073 7469 6d65 0a0a  d_time - stime..
+00020ac0: 2020 2020 6465 6620 7069 6e67 5f66 756e      def ping_fun
+00020ad0: 6328 6970 2c74 696d 656f 7574 3d31 2c73  c(ip,timeout=1,s
+00020ae0: 697a 653d 3634 293a 0a20 2020 2020 2020  ize=64):.       
+00020af0: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+00020b00: 2020 6d79 5f73 6f63 6b65 7420 3d20 736f    my_socket = so
+00020b10: 636b 6574 2e73 6f63 6b65 7428 736f 636b  cket.socket(sock
+00020b20: 6574 2e41 465f 494e 4554 2c20 736f 636b  et.AF_INET, sock
+00020b30: 6574 2e53 4f43 4b5f 5241 572c 2049 434d  et.SOCK_RAW, ICM
+00020b40: 505f 434f 4445 290a 2020 2020 2020 2020  P_CODE).        
+00020b50: 6578 6365 7074 2073 6f63 6b65 742e 6572  except socket.er
+00020b60: 726f 7220 6173 2065 3a0a 2020 2020 2020  ror as e:.      
+00020b70: 2020 2020 2020 6966 2065 2e65 7272 6e6f        if e.errno
+00020b80: 2069 6e20 4552 524f 525f 4445 5343 523a   in ERROR_DESCR:
+00020b90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020ba0: 2072 6169 7365 2073 6f63 6b65 742e 6572   raise socket.er
+00020bb0: 726f 7228 2727 2e6a 6f69 6e28 2865 2e61  ror(''.join((e.a
+00020bc0: 7267 735b 315d 2c20 4552 524f 525f 4445  rgs[1], ERROR_DE
+00020bd0: 5343 525b 652e 6572 726e 6f5d 2929 290a  SCR[e.errno]))).
+00020be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020bf0: 2372 6169 7365 2073 6f63 6b65 742e 6572  #raise socket.er
+00020c00: 726f 7228 4a6f 696e 2828 652e 6172 6773  ror(Join((e.args
+00020c10: 5b31 5d2c 2045 5252 4f52 5f44 4553 4352  [1], ERROR_DESCR
+00020c20: 5b65 2e65 7272 6e6f 5d29 2c73 796d 626f  [e.errno]),symbo
+00020c30: 6c3d 2727 2929 0a20 2020 2020 2020 2020  l='')).         
+00020c40: 2020 2072 6169 7365 0a20 2020 2020 2020     raise.       
+00020c50: 2069 6620 7369 7a65 2069 6e20 5b27 726e   if size in ['rn
+00020c60: 6427 2c27 7261 6e64 6f6d 275d 3a0a 2020  d','random']:.  
+00020c70: 2020 2020 2020 2020 2020 2320 4d61 7869            # Maxi
+00020c80: 6d75 6d20 7369 7a65 2066 6f72 2061 6e20  mum size for an 
+00020c90: 756e 7369 676e 6564 2073 686f 7274 2069  unsigned short i
+00020ca0: 6e74 2063 206f 626a 6563 7428 3635 3533  nt c object(6553
+00020cb0: 3529 0a20 2020 2020 2020 2020 2020 2073  5).            s
+00020cc0: 697a 6520 3d20 696e 7428 2869 6428 7469  ize = int((id(ti
+00020cd0: 6d65 6f75 7429 202a 2072 616e 646f 6d2e  meout) * random.
+00020ce0: 7261 6e64 6f6d 2829 2920 2520 3635 3533  random()) % 6553
+00020cf0: 3529 0a20 2020 2020 2020 2070 6163 6b65  5).        packe
+00020d00: 7420 3d20 6d6b 5f70 6163 6b65 7428 7369  t = mk_packet(si
+00020d10: 7a65 290a 2020 2020 2020 2020 7768 696c  ze).        whil
+00020d20: 6520 7061 636b 6574 3a0a 2020 2020 2020  e packet:.      
+00020d30: 2020 2020 2020 7365 6e74 203d 206d 795f        sent = my_
+00020d40: 736f 636b 6574 2e73 656e 6474 6f28 7061  socket.sendto(pa
+00020d50: 636b 6574 2c20 2869 702c 2031 2929 2023  cket, (ip, 1)) #
+00020d60: 2049 434d 5020 6861 7665 206e 6f20 706f   ICMP have no po
+00020d70: 7274 2c20 536f 206a 7573 7420 7075 7420  rt, So just put 
+00020d80: 6475 6d6d 7920 706f 7274 2031 0a20 2020  dummy port 1.   
+00020d90: 2020 2020 2020 2020 2070 6163 6b65 7420           packet 
+00020da0: 3d20 7061 636b 6574 5b73 656e 743a 5d0a  = packet[sent:].
+00020db0: 2020 2020 2020 2020 6465 6c61 7920 3d20          delay = 
+00020dc0: 7265 6365 6976 6528 6d79 5f73 6f63 6b65  receive(my_socke
+00020dd0: 742c 2073 697a 652c 2054 494d 4528 292e  t, size, TIME().
+00020de0: 5469 6d65 2829 2c20 7469 6d65 6f75 7429  Time(), timeout)
+00020df0: 0a20 2020 2020 2020 206d 795f 736f 636b  .        my_sock
+00020e00: 6574 2e63 6c6f 7365 2829 0a20 2020 2020  et.close().     
+00020e10: 2020 2069 6620 6465 6c61 793a 0a20 2020     if delay:.   
+00020e20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00020e30: 6465 6c61 792c 7369 7a65 0a0a 2020 2020  delay,size..    
+00020e40: 6465 6620 5f70 696e 675f 2869 702c 7469  def _ping_(ip,ti
+00020e50: 6d65 6f75 743d 312c 7369 7a65 3d36 342c  meout=1,size=64,
+00020e60: 6c6f 675f 666f 726d 6174 3d27 7069 6e67  log_format='ping
+00020e70: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+00020e80: 7069 6e67 5f63 6d64 3d66 696e 645f 6578  ping_cmd=find_ex
+00020e90: 6563 7574 6162 6c65 2827 7069 6e67 2729  ecutable('ping')
+00020ea0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00020eb0: 7069 6e67 5f63 6d64 3a0a 2020 2020 2020  ping_cmd:.      
+00020ec0: 2020 2020 2020 2020 2020 7069 6e67 5f73            ping_s
+00020ed0: 3d73 697a 652d 3820 6966 2073 697a 6520  =size-8 if size 
+00020ee0: 3e3d 2038 2065 6c73 6520 300a 2020 2020  >= 8 else 0.    
+00020ef0: 2020 2020 2020 2020 2020 2020 7263 3d72              rc=r
+00020f00: 7368 656c 6c28 2270 696e 6720 2d73 207b  shell("ping -s {
+00020f10: 7d20 2d63 2031 207b 7d22 2e66 6f72 6d61  } -c 1 {}".forma
+00020f20: 7428 7069 6e67 5f73 2c68 6f73 7429 290a  t(ping_s,host)).
+00020f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020f40: 6465 6c61 793d 5b5d 0a20 2020 2020 2020  delay=[].       
+00020f50: 2020 2020 2020 2020 2069 6620 7263 5b30           if rc[0
+00020f60: 5d20 3d3d 2030 3a0a 2020 2020 2020 2020  ] == 0:.        
+00020f70: 2020 2020 2020 2020 2020 2020 6465 6c61              dela
+00020f80: 793d 5b5d 0a20 2020 2020 2020 2020 2020  y=[].           
+00020f90: 2020 2020 2020 2020 2074 743d 7263 5b31           tt=rc[1
+00020fa0: 5d2e 7370 6c69 7428 275c 6e27 295b 315d  ].split('\n')[1]
+00020fb0: 2e73 706c 6974 2829 0a20 2020 2020 2020  .split().       
+00020fc0: 2020 2020 2020 2020 2020 2020 2064 656c               del
+00020fd0: 6179 3d5b 666c 6f61 7428 7474 5b36 5d2e  ay=[float(tt[6].
+00020fe0: 7370 6c69 7428 273d 2729 5b31 5d29 2f31  split('=')[1])/1
+00020ff0: 3030 302c 7474 5b30 5d5d 0a20 2020 2020  000,tt[0]].     
+00021000: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00021010: 2020 2020 2020 2020 2020 2020 6465 6c61              dela
+00021020: 793d 7069 6e67 5f66 756e 6328 6970 2c74  y=ping_func(ip,t
+00021030: 696d 656f 7574 2c73 697a 6529 0a20 2020  imeout,size).   
+00021040: 2020 2020 2020 2020 2069 6620 6c6f 675f           if log_
+00021050: 666f 726d 6174 203d 3d20 2770 696e 6727  format == 'ping'
+00021060: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00021070: 2020 6966 2064 656c 6179 3a0a 2020 2020    if delay:.    
+00021080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021090: 7265 7475 726e 2030 2c69 702c 7369 7a65  return 0,ip,size
+000210a0: 2c74 696d 656f 7574 2c64 656c 6179 5b31  ,timeout,delay[1
+000210b0: 5d2c 726f 756e 6428 6465 6c61 795b 305d  ],round(delay[0]
+000210c0: 2a31 3030 302e 302c 3429 0a20 2020 2020  *1000.0,4).     
+000210d0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000210e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000210f0: 2020 2020 2072 6574 7572 6e20 312c 6970       return 1,ip
+00021100: 2c73 697a 652c 7469 6d65 6f75 742c 4e6f  ,size,timeout,No
+00021110: 6e65 2c4e 6f6e 650a 2020 2020 2020 2020  ne,None.        
+00021120: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00021130: 2020 2020 2020 2020 2020 6966 2064 656c            if del
+00021140: 6179 3a0a 2020 2020 2020 2020 2020 2020  ay:.            
+00021150: 2020 2020 2020 2020 7265 7475 726e 2030          return 0
+00021160: 2c27 2e27 2c73 697a 652c 7469 6d65 6f75  ,'.',size,timeou
+00021170: 742c 4e6f 6e65 2c4e 6f6e 650a 2020 2020  t,None,None.    
+00021180: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00021190: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000211a0: 2020 2020 2020 7265 7475 726e 2031 2c27        return 1,'
+000211b0: 7827 2c73 697a 652c 7469 6d65 6f75 742c  x',size,timeout,
+000211c0: 4e6f 6e65 2c4e 6f6e 650a 0a20 2020 2027  None,None..    '
+000211d0: 2727 0a20 2020 2073 616d 6520 6173 2070  ''.    same as p
+000211e0: 696e 6720 636f 6d6d 616e 640a 2020 2020  ing command.    
+000211f0: 5472 7565 203a 2070 696e 6769 6e67 0a20  True : pinging. 
+00021200: 2020 2046 616c 7365 3a20 6361 6e20 6e6f     False: can no
+00021210: 7420 7069 6e67 0a20 2020 2030 2020 2020  t ping.    0    
+00021220: 3a20 4361 6e63 656c 6564 2070 696e 670a  : Canceled ping.
+00021230: 2020 2020 2727 270a 2020 2020 636f 756e      '''.    coun
+00021240: 743d 496e 7428 6f70 7473 2e67 6574 2827  t=Int(opts.get('
+00021250: 636f 756e 7427 292c 3029 0a20 2020 2069  count'),0).    i
+00021260: 6e74 6572 7661 6c3d 496e 7428 6f70 7473  nterval=Int(opts
+00021270: 2e67 6574 2827 696e 7465 7276 616c 2729  .get('interval')
+00021280: 2c31 290a 2020 2020 6b65 6570 5f67 6f6f  ,1).    keep_goo
+00021290: 643d 496e 7428 6f70 7473 2e67 6574 2827  d=Int(opts.get('
+000212a0: 6b65 6570 5f67 6f6f 6427 2c6f 7074 732e  keep_good',opts.
+000212b0: 6765 7428 276b 6565 705f 7069 6e67 272c  get('keep_ping',
+000212c0: 6f70 7473 2e67 6574 2827 6b65 6570 272c  opts.get('keep',
+000212d0: 6f70 7473 2e67 6574 2827 676f 6f64 272c  opts.get('good',
+000212e0: 6f70 7473 2e67 6574 2827 7069 6e67 696e  opts.get('pingin
+000212f0: 6727 2929 2929 292c 3029 0a20 2020 206b  g'))))),0).    k
+00021300: 6565 705f 6261 643d 496e 7428 6f70 7473  eep_bad=Int(opts
+00021310: 2e67 6574 2827 6b65 6570 5f62 6164 272c  .get('keep_bad',
+00021320: 6f70 7473 2e67 6574 2827 6261 6427 2929  opts.get('bad'))
+00021330: 2c30 290a 2020 2020 7469 6d65 6f75 743d  ,0).    timeout=
+00021340: 496e 7428 6f70 7473 2e67 6574 2827 7469  Int(opts.get('ti
+00021350: 6d65 6f75 7427 2c6f 7074 732e 6765 7428  meout',opts.get(
+00021360: 2774 696d 656f 7574 5f73 6563 2729 292c  'timeout_sec')),
+00021370: 3029 0a20 2020 206c 6f73 745f 6d6f 6e3d  0).    lost_mon=
+00021380: 6f70 7473 2e67 6574 2827 6c6f 7374 5f6d  opts.get('lost_m
+00021390: 6f6e 272c 4661 6c73 6529 0a20 2020 206c  on',False).    l
+000213a0: 6f67 3d6f 7074 732e 6765 7428 276c 6f67  og=opts.get('log
+000213b0: 272c 4e6f 6e65 290a 2020 2020 6c6f 675f  ',None).    log_
+000213c0: 666f 726d 6174 3d6f 7074 732e 6765 7428  format=opts.get(
+000213d0: 276c 6f67 5f66 6f72 6d61 7427 2c27 2e27  'log_format','.'
+000213e0: 290a 2020 2020 616c 6976 655f 706f 7274  ).    alive_port
+000213f0: 3d6f 7074 732e 6765 7428 2761 6c69 7665  =opts.get('alive
+00021400: 5f70 6f72 7427 290a 2020 2020 656e 645f  _port').    end_
+00021410: 6e65 776c 696e 653d 6f70 7473 2e67 6574  newline=opts.get
+00021420: 2827 656e 645f 6e65 776c 696e 6527 2c6f  ('end_newline',o
+00021430: 7074 732e 6765 7428 276e 6577 6c69 6e65  pts.get('newline
+00021440: 272c 6f70 7473 2e67 6574 2827 656e 6427  ',opts.get('end'
+00021450: 2c27 5c6e 2729 2929 0a20 2020 2063 616e  ,'\n'))).    can
+00021460: 6365 6c5f 6675 6e63 3d6f 7074 732e 6765  cel_func=opts.ge
+00021470: 7428 2763 616e 6365 6c5f 6675 6e63 272c  t('cancel_func',
+00021480: 6f70 7473 2e67 6574 2827 7374 6f70 5f66  opts.get('stop_f
+00021490: 756e 6327 2c6f 7074 732e 6765 7428 2763  unc',opts.get('c
+000214a0: 616e 6365 6c27 2c6f 7074 732e 6765 7428  ancel',opts.get(
+000214b0: 2773 746f 7027 2c4e 6f6e 6529 2929 290a  'stop',None)))).
+000214c0: 2020 2020 6966 2061 6c69 7665 5f70 6f72      if alive_por
+000214d0: 743a 0a20 2020 2020 2020 2072 6574 7572  t:.        retur
+000214e0: 6e20 5472 7565 2069 6620 4970 5634 2868  n True if IpV4(h
+000214f0: 6f73 742c 706f 7274 3d61 6c69 7665 5f70  ost,port=alive_p
+00021500: 6f72 742c 7375 7070 6f72 745f 686f 7374  ort,support_host
+00021510: 6e61 6d65 3d6f 7074 732e 6765 7428 2773  name=opts.get('s
+00021520: 7570 706f 7274 5f68 6f73 746e 616d 6527  upport_hostname'
+00021530: 2c54 7275 6529 2920 656c 7365 2046 616c  ,True)) else Fal
+00021540: 7365 0a20 2020 2067 6f6f 643d 4661 6c73  se.    good=Fals
+00021550: 650a 2020 2020 5469 6d65 3d54 494d 4528  e.    Time=TIME(
+00021560: 290a 2020 2020 6754 696d 653d 5449 4d45  ).    gTime=TIME
+00021570: 2829 0a20 2020 2062 5469 6d65 3d54 494d  ().    bTime=TIM
+00021580: 4528 290a 2020 2020 6473 7069 3d27 6427  E().    dspi='d'
+00021590: 2069 6620 6c6f 675f 666f 726d 6174 203d   if log_format =
+000215a0: 3d27 6427 2065 6c73 6520 2773 2720 6966  ='d' else 's' if
+000215b0: 206c 6f67 5f66 6f72 6d61 7420 6e6f 7420   log_format not 
+000215c0: 696e 205b 276e 272c 2769 275d 2065 6c73  in ['n','i'] els
+000215d0: 6520 2769 270a 2020 2020 6c6f 6361 6c5f  e 'i'.    local_
+000215e0: 7072 696e 7465 643d 4661 6c73 650a 2020  printed=False.  
+000215f0: 2020 693d 300a 2020 2020 7768 696c 6520    i=0.    while 
+00021600: 5472 7565 3a0a 2020 2020 2020 2069 6620  True:.       if 
+00021610: 4973 4272 6561 6b28 6361 6e63 656c 5f66  IsBreak(cancel_f
+00021620: 756e 6329 3a0a 2020 2020 2020 2020 2020  unc):.          
+00021630: 7072 696e 7466 2827 2d20 7069 6e67 287b  printf('- ping({
+00021640: 7d29 202d 2043 616e 6365 6c65 642f 5374  }) - Canceled/St
+00021650: 6f70 7065 6420 7069 6e67 2062 7920 6361  opped ping by ca
+00021660: 6e63 656c 2073 6967 6e61 6c27 2e66 6f72  ncel signal'.for
+00021670: 6d61 7428 686f 7374 292c 6669 7273 745f  mat(host),first_
+00021680: 6e65 776c 696e 653d 5472 7565 2c6c 6f67  newline=True,log
+00021690: 3d6c 6f67 2c64 7370 3d64 7370 6929 0a20  =log,dsp=dspi). 
+000216a0: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
+000216b0: 2020 2020 2020 7263 3d5f 7069 6e67 5f28        rc=_ping_(
+000216c0: 686f 7374 2c74 696d 656f 7574 3d31 2c73  host,timeout=1,s
+000216d0: 697a 653d 3634 2c6c 6f67 5f66 6f72 6d61  ize=64,log_forma
+000216e0: 743d 6c6f 675f 666f 726d 6174 290a 2020  t=log_format).  
+000216f0: 2020 2020 2069 6620 7263 5b30 5d20 3d3d       if rc[0] ==
+00021700: 2030 3a0a 2020 2020 2020 2020 2020 676f   0:.          go
+00021710: 6f64 3d54 7275 650a 2020 2020 2020 2020  od=True.        
+00021720: 2020 6966 206e 6f74 2063 6f75 6e74 3a0a    if not count:.
+00021730: 2020 2020 2020 2020 2020 2020 2020 6254                bT
+00021740: 696d 652e 5265 7365 7428 290a 2020 2020  ime.Reset().    
+00021750: 2020 2020 2020 2020 2020 6966 206b 6565            if kee
+00021760: 705f 676f 6f64 3a0a 2020 2020 2020 2020  p_good:.        
+00021770: 2020 2020 2020 2020 2020 6966 2067 5469            if gTi
+00021780: 6d65 2e4f 7574 286b 6565 705f 676f 6f64  me.Out(keep_good
+00021790: 293a 2062 7265 616b 0a20 2020 2020 2020  ): break.       
+000217a0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000217b0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+000217c0: 7265 616b 0a20 2020 2020 2020 2020 2069  reak.          i
+000217d0: 6620 6c6f 675f 666f 726d 6174 203d 3d20  f log_format == 
+000217e0: 2770 696e 6727 3a0a 2020 2020 2020 2020  'ping':.        
+000217f0: 2020 2020 2020 7072 696e 7466 2827 7b7d        printf('{}
+00021800: 2062 7974 6573 2066 726f 6d20 7b7d 3a20   bytes from {}: 
+00021810: 6963 6d70 5f73 6571 3d7b 7d20 7474 6c3d  icmp_seq={} ttl=
+00021820: 7b7d 2074 696d 653d 7b7d 206d 7327 2e66  {} time={} ms'.f
+00021830: 6f72 6d61 7428 7263 5b34 5d2c 7263 5b31  ormat(rc[4],rc[1
+00021840: 5d2c 692c 7263 5b32 5d2c 7263 5b35 5d29  ],i,rc[2],rc[5])
+00021850: 2c6c 6f67 3d6c 6f67 2c64 7370 3d64 7370  ,log=log,dsp=dsp
+00021860: 6929 0a20 2020 2020 2020 2020 2065 6c69  i).          eli
+00021870: 6620 6473 7069 2069 6e20 5b27 6427 2c27  f dspi in ['d','
+00021880: 7327 5d3a 0a20 2020 2020 2020 2020 2020  s']:.           
+00021890: 2020 2070 7269 6e74 6628 272e 272c 6469     printf('.',di
+000218a0: 7265 6374 3d54 7275 652c 6c6f 673d 6c6f  rect=True,log=lo
+000218b0: 672c 6c6f 675f 6c65 7665 6c3d 312c 6473  g,log_level=1,ds
+000218c0: 703d 6473 7069 2c73 6372 5f64 6267 3d46  p=dspi,scr_dbg=F
+000218d0: 616c 7365 290a 2020 2020 2020 2020 2020  alse).          
+000218e0: 2020 2020 6c6f 6361 6c5f 7072 696e 7465      local_printe
+000218f0: 643d 5472 7565 0a20 2020 2020 2020 656c  d=True.       el
+00021900: 7365 3a0a 2020 2020 2020 2020 2020 676f  se:.          go
+00021910: 6f64 3d46 616c 7365 0a20 2020 2020 2020  od=False.       
+00021920: 2020 2069 6620 6e6f 7420 636f 756e 743a     if not count:
+00021930: 0a20 2020 2020 2020 2020 2020 2020 2067  .              g
+00021940: 5469 6d65 2e52 6573 6574 2829 0a20 2020  Time.Reset().   
+00021950: 2020 2020 2020 2020 2020 2069 6620 6b65             if ke
+00021960: 6570 5f62 6164 3a0a 2020 2020 2020 2020  ep_bad:.        
+00021970: 2020 2020 2020 2020 2020 6966 2062 5469            if bTi
+00021980: 6d65 2e4f 7574 286b 6565 705f 6261 6429  me.Out(keep_bad)
+00021990: 3a20 6272 6561 6b0a 2020 2020 2020 2020  : break.        
+000219a0: 2020 6966 206c 6f67 5f66 6f72 6d61 7420    if log_format 
+000219b0: 3d3d 2027 7069 6e67 273a 0a20 2020 2020  == 'ping':.     
+000219c0: 2020 2020 2020 2020 2070 7269 6e74 6628           printf(
+000219d0: 277b 7d20 6963 6d70 5f73 6571 3d7b 7d20  '{} icmp_seq={} 
+000219e0: 7469 6d65 6f75 7420 287b 7d20 7365 636f  timeout ({} seco
+000219f0: 6e64 2927 2e66 6f72 6d61 7428 7263 5b31  nd)'.format(rc[1
+00021a00: 5d2c 692c 7263 5b33 5d29 2c6c 6f67 3d6c  ],i,rc[3]),log=l
+00021a10: 6f67 2c64 7370 3d64 7370 6929 0a20 2020  og,dsp=dspi).   
+00021a20: 2020 2020 2020 2065 6c69 6620 6473 7069         elif dspi
+00021a30: 2069 6e20 5b27 6427 2c27 7327 5d3a 0a20   in ['d','s']:. 
+00021a40: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00021a50: 6e74 6628 2778 272c 6469 7265 6374 3d54  ntf('x',direct=T
+00021a60: 7275 652c 6c6f 675f 6c65 7665 6c3d 312c  rue,log_level=1,
+00021a70: 6c6f 673d 6c6f 672c 2064 7370 3d64 7370  log=log, dsp=dsp
+00021a80: 692c 7363 725f 6462 673d 4661 6c73 6529  i,scr_dbg=False)
+00021a90: 0a20 2020 2020 2020 2020 2020 2020 206c  .              l
+00021aa0: 6f63 616c 5f70 7269 6e74 6564 3d54 7275  ocal_printed=Tru
+00021ab0: 650a 2020 2020 2020 2069 6620 636f 756e  e.       if coun
+00021ac0: 743a 0a20 2020 2020 2020 2020 2020 636f  t:.           co
+00021ad0: 756e 742d 3d31 0a20 2020 2020 2020 2020  unt-=1.         
+00021ae0: 2020 6966 2063 6f75 6e74 203c 2031 3a20    if count < 1: 
+00021af0: 6272 6561 6b0a 2020 2020 2020 2069 6620  break.       if 
+00021b00: 5469 6d65 2e4f 7574 2874 696d 656f 7574  Time.Out(timeout
+00021b10: 293a 2062 7265 616b 0a20 2020 2020 2020  ): break.       
+00021b20: 7469 6d65 2e73 6c65 6570 2869 6e74 6572  time.sleep(inter
+00021b30: 7661 6c29 0a20 2020 2020 2020 692b 3d31  val).       i+=1
+00021b40: 0a20 2020 2069 6620 656e 645f 6e65 776c  .    if end_newl
+00021b50: 696e 653a 0a20 2020 2020 2020 2069 6620  ine:.        if 
+00021b60: 6c6f 6361 6c5f 7072 696e 7465 643a 2070  local_printed: p
+00021b70: 7269 6e74 6628 2727 2c6c 6f67 3d6c 6f67  rintf('',log=log
+00021b80: 2c20 6e6f 5f69 6e74 726f 3d54 7275 652c  , no_intro=True,
+00021b90: 2064 7370 3d64 7370 692c 6361 6c6c 6572   dsp=dspi,caller
+00021ba0: 5f70 6172 656e 743d 312c 6967 6e6f 7265  _parent=1,ignore
+00021bb0: 5f65 6d70 7479 3d46 616c 7365 290a 2020  _empty=False).  
+00021bc0: 2020 7265 7475 726e 2067 6f6f 640a 0a63    return good..c
+00021bd0: 6c61 7373 2050 4147 453a 0a20 2020 2027  lass PAGE:.    '
+00021be0: 2727 0a20 2020 2057 6562 2073 6974 6520  ''.    Web site 
+00021bf0: 7061 6765 2061 6e64 2055 524c 2064 6573  page and URL des
+00021c00: 6967 6e0a 2020 2020 2727 270a 2020 2020  ign.    '''.    
+00021c10: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+00021c20: 662c 7265 7175 6573 743d 4e6f 6e65 2c64  f,request=None,d
+00021c30: 6174 613d 4e6f 6e65 2c62 6173 653d 2727  ata=None,base=''
+00021c40: 2c6f 7468 6572 733d 4e6f 6e65 2c70 7261  ,others=None,pra
+00021c50: 6e67 653d 3235 293a 0a20 2020 2020 2020  nge=25):.       
+00021c60: 2069 6620 7265 7175 6573 743a 0a20 2020   if request:.   
+00021c70: 2020 2020 2020 2020 2073 656c 662e 7265           self.re
+00021c80: 7175 6573 7473 3d72 6571 7565 7374 0a20  quests=request. 
+00021c90: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00021ca0: 2020 2020 2020 2020 2049 6d70 6f72 7428           Import(
+00021cb0: 2769 6d70 6f72 7420 7265 7175 6573 7473  'import requests
+00021cc0: 2729 0a20 2020 2020 2020 2020 2020 2073  ').            s
+00021cd0: 656c 662e 7265 7175 6573 7473 3d72 6571  elf.requests=req
+00021ce0: 7565 7374 730a 2020 2020 2020 2020 7365  uests.        se
+00021cf0: 6c66 2e70 7261 6e67 653d 7072 616e 6765  lf.prange=prange
+00021d00: 0a20 2020 2020 2020 2073 656c 662e 7061  .        self.pa
+00021d10: 7261 6d65 7465 7273 3d64 6963 7428 7365  rameters=dict(se
+00021d20: 6c66 2e72 6571 7565 7374 732e 6172 6773  lf.requests.args
+00021d30: 290a 2020 2020 2020 2020 7061 6765 3d73  ).        page=s
+00021d40: 656c 662e 7265 7175 6573 7473 2e61 7267  elf.requests.arg
+00021d50: 732e 6765 7428 2770 6167 6527 2c30 290a  s.get('page',0).
+00021d60: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00021d70: 7265 7175 6573 7473 2e6d 6574 686f 643d  requests.method=
+00021d80: 3d27 504f 5354 273a 0a20 2020 2020 2020  ='POST':.       
+00021d90: 2020 2020 2070 6172 616d 6574 6572 733d       parameters=
+00021da0: 6469 6374 2873 656c 662e 7265 7175 6573  dict(self.reques
+00021db0: 7473 2e66 6f72 6d29 0a20 2020 2020 2020  ts.form).       
+00021dc0: 2020 2020 2073 656c 662e 7061 7261 6d65       self.parame
+00021dd0: 7465 7273 2e75 7064 6174 6528 7061 7261  ters.update(para
+00021de0: 6d65 7465 7273 290a 2020 2020 2020 2020  meters).        
+00021df0: 2020 2020 6966 2027 7061 6765 2720 696e      if 'page' in
+00021e00: 2073 656c 662e 7061 7261 6d65 7465 7273   self.parameters
+00021e10: 3a20 7061 6765 3d73 656c 662e 7061 7261  : page=self.para
+00021e20: 6d65 7465 7273 2e67 6574 2827 7061 6765  meters.get('page
+00021e30: 2729 0a20 2020 2020 2020 2074 7279 3a0a  ').        try:.
+00021e40: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00021e50: 2e70 6167 653d 696e 7428 7061 6765 290a  .page=int(page).
+00021e60: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
+00021e70: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00021e80: 2e70 6167 653d 300a 2020 2020 2020 2020  .page=0.        
+00021e90: 7365 6c66 2e74 6f74 616c 3d30 0a20 2020  self.total=0.   
+00021ea0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00021eb0: 6365 2864 6174 612c 286c 6973 742c 6469  ce(data,(list,di
+00021ec0: 6374 2c74 7570 6c65 2929 3a0a 2020 2020  ct,tuple)):.    
+00021ed0: 2020 2020 2020 2020 7365 6c66 2e74 6f74          self.tot
+00021ee0: 616c 3d6c 656e 2864 6174 6129 0a20 2020  al=len(data).   
+00021ef0: 2020 2020 2073 656c 662e 746f 7461 6c5f       self.total_
+00021f00: 7061 6765 3d73 656c 662e 746f 7461 6c2f  page=self.total/
+00021f10: 2f73 656c 662e 7072 616e 6765 0a20 2020  /self.prange.   
+00021f20: 2020 2020 2073 656c 662e 6261 7365 3d62       self.base=b
+00021f30: 6173 650a 2020 2020 2020 2020 7365 6c66  ase.        self
+00021f40: 2e6f 7468 6572 733d 6f74 6865 7273 0a20  .others=others. 
+00021f50: 2020 2020 2020 2073 656c 662e 7374 6172         self.star
+00021f60: 743d 7365 6c66 2e70 6167 652a 7365 6c66  t=self.page*self
+00021f70: 2e70 7261 6e67 650a 2020 2020 2020 2020  .prange.        
+00021f80: 7365 6c66 2e65 6e64 3d73 656c 662e 7374  self.end=self.st
+00021f90: 6172 742b 7365 6c66 2e70 7261 6e67 650a  art+self.prange.
+00021fa0: 2020 2020 6465 6620 7572 6c28 7365 6c66      def url(self
+00021fb0: 2c62 6173 653d 4e6f 6e65 2c69 676e 6f72  ,base=None,ignor
+00021fc0: 653d 4e6f 6e65 2c2a 2a6f 7074 7329 3a0a  e=None,**opts):.
+00021fd0: 2020 2020 2020 2020 6172 6773 3d27 270a          args=''.
+00021fe0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+00021ff0: 2073 656c 662e 7061 7261 6d65 7465 7273   self.parameters
+00022000: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00022010: 2069 7369 6e73 7461 6e63 6528 6967 6e6f   isinstance(igno
+00022020: 7265 2c6c 6973 7429 2061 6e64 2069 2069  re,list) and i i
+00022030: 6e20 6967 6e6f 7265 3a20 636f 6e74 696e  n ignore: contin
+00022040: 7565 0a20 2020 2020 2020 2020 2020 2069  ue.            i
+00022050: 6620 6920 696e 206f 7074 733a 0a20 2020  f i in opts:.   
+00022060: 2020 2020 2020 2020 2020 2020 206f 6f3d               oo=
+00022070: 6f70 7473 2e70 6f70 2869 290a 2020 2020  opts.pop(i).    
+00022080: 2020 2020 2020 2020 2020 2020 6172 6773              args
+00022090: 3d61 7267 732b 277b 7d7b 7d3d 7b7d 272e  =args+'{}{}={}'.
+000220a0: 666f 726d 6174 2827 2627 2069 6620 6172  format('&' if ar
+000220b0: 6773 2065 6c73 6520 2727 2c69 2c6f 6f29  gs else '',i,oo)
+000220c0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+000220d0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000220e0: 2020 2061 7267 733d 6172 6773 2b27 7b7d     args=args+'{}
+000220f0: 7b7d 3d7b 7d27 2e66 6f72 6d61 7428 2726  {}={}'.format('&
+00022100: 2720 6966 2061 7267 7320 656c 7365 2027  ' if args else '
+00022110: 272c 692c 7365 6c66 2e70 6172 616d 6574  ',i,self.paramet
+00022120: 6572 735b 695d 290a 2020 2020 2020 2020  ers[i]).        
+00022130: 666f 7220 6920 696e 206f 7074 733a 0a20  for i in opts:. 
+00022140: 2020 2020 2020 2020 2020 2061 7267 733d             args=
+00022150: 6172 6773 2b27 7b7d 7b7d 3d7b 7d27 2e66  args+'{}{}={}'.f
+00022160: 6f72 6d61 7428 2726 2720 6966 2061 7267  ormat('&' if arg
+00022170: 7320 656c 7365 2027 272c 692c 6f70 7473  s else '',i,opts
+00022180: 5b69 5d29 0a20 2020 2020 2020 2069 6620  [i]).        if 
+00022190: 6973 696e 7374 616e 6365 2862 6173 652c  isinstance(base,
+000221a0: 7374 7229 2061 6e64 2062 6173 653a 0a20  str) and base:. 
+000221b0: 2020 2020 2020 2020 2020 2069 6620 6261             if ba
+000221c0: 7365 5b2d 315d 203d 3d20 273f 273a 0a20  se[-1] == '?':. 
 000221d0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000221e0: 6574 7572 6e20 7365 6c66 2e70 6172 616d  eturn self.param
-000221f0: 6574 6572 735b 6e61 6d65 5d0a 2020 2020  eters[name].    
-00022200: 2020 2020 6966 206e 616d 6520 616e 6420      if name and 
-00022210: 6e61 6d65 2069 6e20 7365 6c66 2e5f 5f64  name in self.__d
-00022220: 6963 745f 5f3a 0a20 2020 2020 2020 2020  ict__:.         
-00022230: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-00022240: 5f64 6963 745f 5f5b 6e61 6d65 5d0a 2020  _dict__[name].  
-00022250: 2020 2020 2020 7365 6c66 2e70 6172 616d        self.param
-00022260: 6574 6572 730a 2020 2020 6465 6620 7061  eters.    def pa
-00022270: 6765 7328 7365 6c66 293a 0a20 2020 2020  ges(self):.     
-00022280: 2020 2068 746d 6c5f 7061 6765 3d27 270a     html_page=''.
-00022290: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-000222a0: 7061 6765 203e 2030 203a 0a20 2020 2020  page > 0 :.     
-000222b0: 2020 2020 2020 206e 6578 745f 7061 6765         next_page
-000222c0: 3d73 656c 662e 7061 6765 2d31 0a20 2020  =self.page-1.   
-000222d0: 2020 2020 2020 2020 206f 6f3d 7365 6c66           oo=self
-000222e0: 2e75 726c 2869 676e 6f72 653d 5b27 7061  .url(ignore=['pa
-000222f0: 6765 275d 290a 2020 2020 2020 2020 2020  ge']).          
-00022300: 2020 6966 206f 6f3a 206f 6f3d 6f6f 2b27    if oo: oo=oo+'
-00022310: 2627 0a20 2020 2020 2020 2020 2020 2068  &'.            h
-00022320: 746d 6c5f 7061 6765 3d27 2727 7b30 7d0a  tml_page='''{0}.
-00022330: 2020 2020 2020 2020 2020 2020 3c61 2068              <a h
-00022340: 7265 663d 227b 317d 223e 207c 3c20 3c2f  ref="{1}"> |< </
-00022350: 613e 0a20 2020 2020 2020 2020 2020 203c  a>.            <
-00022360: 6120 6872 6566 3d22 7b32 7d70 6167 653d  a href="{2}page=
-00022370: 7b33 7d22 3e20 3c3c 203c 2f61 3e27 2727  {3}"> << </a>'''
-00022380: 2e66 6f72 6d61 7428 6874 6d6c 5f70 6167  .format(html_pag
-00022390: 652c 7365 6c66 2e75 726c 2870 6167 653d  e,self.url(page=
-000223a0: 3029 2c6f 6f2c 6e65 7874 5f70 6167 6529  0),oo,next_page)
-000223b0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-000223c0: 2020 2020 2020 2020 2020 2068 746d 6c5f             html_
-000223d0: 7061 6765 3d27 2727 7b30 7d20 7c3c 203c  page='''{0} |< <
-000223e0: 3c20 2727 272e 666f 726d 6174 2868 746d  < '''.format(htm
-000223f0: 6c5f 7061 6765 290a 2020 2020 2020 2020  l_page).        
-00022400: 6874 6d6c 5f70 6167 653d 2727 277b 7d5b  html_page='''{}[
-00022410: 7b7d 5d27 2727 2e66 6f72 6d61 7428 6874  {}]'''.format(ht
-00022420: 6d6c 5f70 6167 652c 7365 6c66 2e70 6167  ml_page,self.pag
-00022430: 6529 0a20 2020 2020 2020 2069 6620 7365  e).        if se
-00022440: 6c66 2e70 6167 6520 3c20 7365 6c66 2e74  lf.page < self.t
-00022450: 6f74 616c 5f70 6167 653a 0a20 2020 2020  otal_page:.     
-00022460: 2020 2020 2020 206e 6578 745f 7061 6765         next_page
-00022470: 3d73 656c 662e 7061 6765 2b31 0a20 2020  =self.page+1.   
-00022480: 2020 2020 2020 2020 206f 6f3d 7365 6c66           oo=self
-00022490: 2e75 726c 2869 676e 6f72 653d 5b27 7061  .url(ignore=['pa
-000224a0: 6765 275d 290a 2020 2020 2020 2020 2020  ge']).          
-000224b0: 2020 6966 206f 6f20 3a20 6f6f 3d6f 6f2b    if oo : oo=oo+
-000224c0: 2726 270a 2020 2020 2020 2020 2020 2020  '&'.            
-000224d0: 6874 6d6c 5f70 6167 653d 2727 277b 307d  html_page='''{0}
-000224e0: 0a20 2020 2020 2020 2020 2020 203c 6120  .            <a 
-000224f0: 6872 6566 3d22 7b31 7d70 6167 653d 7b32  href="{1}page={2
-00022500: 7d22 3e20 3e3e 203c 2f61 3e0a 2020 2020  }"> >> </a>.    
-00022510: 2020 2020 2020 2020 3c61 2068 7265 663d          <a href=
-00022520: 227b 317d 7061 6765 3d7b 337d 223e 203e  "{1}page={3}"> >
-00022530: 7c20 3c2f 613e 0a20 2020 2020 2020 2020  | </a>.         
-00022540: 2020 2727 272e 666f 726d 6174 2868 746d    '''.format(htm
-00022550: 6c5f 7061 6765 2c6f 6f2c 6e65 7874 5f70  l_page,oo,next_p
-00022560: 6167 652c 7365 6c66 2e74 6f74 616c 5f70  age,self.total_p
-00022570: 6167 6529 0a20 2020 2020 2020 2065 6c73  age).        els
-00022580: 653a 0a20 2020 2020 2020 2020 2020 2068  e:.            h
-00022590: 746d 6c5f 7061 6765 3d27 2727 7b30 7d0a  tml_page='''{0}.
-000225a0: 2020 2020 2020 2020 2020 2020 203e 3e20               >> 
-000225b0: 203e 7c0a 2020 2020 2020 2020 2020 2027   >|.           '
-000225c0: 2727 2e66 6f72 6d61 7428 6874 6d6c 5f70  ''.format(html_p
-000225d0: 6167 6529 0a20 2020 2020 2020 2072 6574  age).        ret
-000225e0: 7572 6e20 6874 6d6c 5f70 6167 650a 0a63  urn html_page..c
-000225f0: 6c61 7373 2057 4542 3a0a 2020 2020 2727  lass WEB:.    ''
-00022600: 270a 2020 2020 4765 7449 503a 2067 6574  '.    GetIP: get
-00022610: 2073 6572 7665 7220 6f72 2063 6c69 656e   server or clien
-00022620: 7420 4950 0a20 2020 2052 6571 7565 7374  t IP.    Request
-00022630: 3a20 7265 7175 6573 7428 290a 2020 2020  : request().    
-00022640: 7374 7232 7572 6c3a 2063 6f6e 7665 7274  str2url: convert
-00022650: 2073 7472 696e 6720 746f 2055 524c 2066   string to URL f
-00022660: 6f72 6d61 740a 2020 2020 666f 726d 3264  ormat.    form2d
-00022670: 6963 743a 2063 6f6e 7665 7274 2066 6f72  ict: convert for
-00022680: 6d20 6461 7461 2074 6f20 6469 6374 696f  m data to dictio
-00022690: 6e61 7279 2066 6f72 6d61 740a 2020 2020  nary format.    
-000226a0: 2727 270a 2020 2020 6465 6620 5f5f 696e  '''.    def __in
-000226b0: 6974 5f5f 2873 656c 662c 7265 7175 6573  it__(self,reques
-000226c0: 743d 4e6f 6e65 293a 0a20 2020 2020 2020  t=None):.       
-000226d0: 2069 6620 7265 7175 6573 743a 0a20 2020   if request:.   
-000226e0: 2020 2020 2020 2020 2073 656c 662e 7265           self.re
-000226f0: 7175 6573 7473 3d72 6571 7565 7374 0a20  quests=request. 
-00022700: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00022710: 2020 2020 2020 2020 2049 6d70 6f72 7428           Import(
-00022720: 2769 6d70 6f72 7420 7265 7175 6573 7473  'import requests
-00022730: 2729 0a20 2020 2020 2020 2020 2020 2073  ').            s
-00022740: 656c 662e 7265 7175 6573 7473 3d72 6571  elf.requests=req
-00022750: 7565 7374 730a 0a20 2020 2064 6566 2053  uests..    def S
-00022760: 6573 7369 6f6e 2873 656c 6629 3a0a 2020  ession(self):.  
-00022770: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00022780: 662e 7265 7175 6573 7473 2e73 6573 7369  f.requests.sessi
-00022790: 6f6e 2e5f 6765 745f 6f72 5f63 7265 6174  on._get_or_creat
-000227a0: 655f 7365 7373 696f 6e5f 6b65 7928 290a  e_session_key().
-000227b0: 0a20 2020 2064 6566 2047 6574 4950 2873  .    def GetIP(s
-000227c0: 656c 662c 6d6f 6465 3d27 7365 7276 6572  elf,mode='server
-000227d0: 2729 3a0a 2020 2020 2020 2020 2727 2720  '):.        ''' 
-000227e0: 0a20 2020 2020 2020 206d 6f64 653a 0a20  .        mode:. 
-000227f0: 2020 2020 2020 2020 2073 6572 7665 7220           server 
-00022800: 3a20 6765 7420 7365 7276 6572 2049 5020  : get server IP 
-00022810: 2864 6566 6175 6c74 290a 2020 2020 2020  (default).      
-00022820: 2020 2020 636c 6965 6e74 203a 2067 6574      client : get
-00022830: 2063 6c69 656e 7420 4950 0a20 2020 2020   client IP.     
-00022840: 2020 2027 2727 0a20 2020 2020 2020 2069     '''.        i
-00022850: 6620 6d6f 6465 203d 3d20 2773 6572 7665  f mode == 'serve
-00022860: 7227 3a0a 2020 2020 2020 2020 2020 2020  r':.            
-00022870: 7265 7475 726e 2073 656c 662e 7265 7175  return self.requ
-00022880: 6573 7473 2e67 6574 5f68 6f73 7428 292e  ests.get_host().
-00022890: 7370 6c69 7428 273a 2729 0a20 2020 2020  split(':').     
-000228a0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000228b0: 2020 2020 2078 5f66 6f72 7761 7264 6564       x_forwarded
-000228c0: 5f66 6f72 203d 2073 656c 662e 7265 7175  _for = self.requ
-000228d0: 6573 7473 2e4d 4554 412e 6765 7428 2748  ests.META.get('H
-000228e0: 5454 505f 585f 464f 5257 4152 4445 445f  TTP_X_FORWARDED_
-000228f0: 464f 5227 290a 2020 2020 2020 2020 2020  FOR').          
-00022900: 2020 6966 2078 5f66 6f72 7761 7264 6564    if x_forwarded
-00022910: 5f66 6f72 3a0a 2020 2020 2020 2020 2020  _for:.          
-00022920: 2020 2020 2020 7265 7475 726e 2078 5f66        return x_f
-00022930: 6f72 7761 7264 6564 5f66 6f72 2e73 706c  orwarded_for.spl
-00022940: 6974 2827 2c27 295b 305d 0a20 2020 2020  it(',')[0].     
-00022950: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00022960: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00022970: 7572 6e20 7365 6c66 2e72 6571 7565 7374  urn self.request
-00022980: 732e 4d45 5441 2e67 6574 2827 5245 4d4f  s.META.get('REMO
-00022990: 5445 5f41 4444 5227 290a 0a20 2020 2064  TE_ADDR')..    d
-000229a0: 6566 204d 6574 686f 6428 7365 6c66 2c6d  ef Method(self,m
-000229b0: 6574 686f 645f 6e61 6d65 3d4e 6f6e 652c  ethod_name=None,
-000229c0: 6d6f 6465 3d27 6c6f 7765 7227 293a 0a20  mode='lower'):. 
-000229d0: 2020 2020 2020 206d 6574 686f 645f 6e3d         method_n=
-000229e0: 7365 6c66 2e72 6571 7565 7374 732e 6d65  self.requests.me
-000229f0: 7468 6f64 0a20 2020 2020 2020 2069 6620  thod.        if 
-00022a00: 6d65 7468 6f64 5f6e 616d 653a 0a20 2020  method_name:.   
-00022a10: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00022a20: 6d65 7468 6f64 5f6e 616d 652e 6c6f 7765  method_name.lowe
-00022a30: 7228 2920 3d3d 206d 6574 686f 645f 6e2e  r() == method_n.
-00022a40: 6c6f 7765 7228 290a 2020 2020 2020 2020  lower().        
-00022a50: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00022a60: 2020 6966 206d 6f64 6520 3d3d 2027 7570    if mode == 'up
-00022a70: 7065 7227 3a0a 2020 2020 2020 2020 2020  per':.          
-00022a80: 2020 2020 2020 7265 7475 726e 206d 6574        return met
-00022a90: 686f 645f 6e2e 7570 7065 7228 290a 2020  hod_n.upper().  
-00022aa0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00022ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022ac0: 7265 7475 726e 206d 6574 686f 645f 6e2e  return method_n.
-00022ad0: 6c6f 7765 7228 290a 0a20 2020 2064 6566  lower()..    def
-00022ae0: 2052 6571 7565 7374 2873 656c 662c 686f   Request(self,ho
-00022af0: 7374 5f75 726c 2c2a 2a6f 7074 7329 3a0a  st_url,**opts):.
-00022b00: 2020 2020 2020 2020 2727 270a 2020 2020          '''.    
-00022b10: 2020 2020 7573 6572 2026 2070 6173 7377      user & passw
-00022b20: 6f72 643a 2073 7472 696e 6720 666f 726d  ord: string form
-00022b30: 6174 0a20 2020 2020 2020 2061 7574 683a  at.        auth:
-00022b40: 2074 7570 6c65 2066 6f72 6d61 740a 2020   tuple format.  
-00022b50: 2020 2020 2020 6461 7461 3a20 6469 6374        data: dict
-00022b60: 696f 6e61 7279 2066 6f72 6d61 740a 2020  ionary format.  
-00022b70: 2020 2020 2020 6a73 6f6e 3a20 6469 6374        json: dict
-00022b80: 696f 6e61 7279 202f 204a 534f 4e20 666f  ionary / JSON fo
-00022b90: 726d 6174 0a20 2020 2020 2020 2066 696c  rmat.        fil
-00022ba0: 6573 3a20 6469 6374 696f 6e61 7279 2066  es: dictionary f
-00022bb0: 6f72 6d61 740a 2020 2020 2020 2020 2020  ormat.          
-00022bc0: 2065 7829 2066 696c 6573 203d 207b 2027   ex) files = { '
-00022bd0: 3c66 696c 6520 7061 7261 6d65 7465 7220  <file parameter 
-00022be0: 6e61 6d65 3e27 3a20 283c 6669 6c65 6e61  name>': (<filena
-00022bf0: 6d65 3e2c 206f 7065 6e28 3c66 696c 656e  me>, open(<filen
-00022c00: 616d 653e 2c27 7262 2729 297d 0a20 2020  ame>,'rb'))}.   
-00022c10: 2020 2020 2068 6561 6465 7273 3a20 7374       headers: st
-00022c20: 7269 6e67 206f 7220 6469 6374 696f 6e61  ring or dictiona
-00022c30: 7279 2066 6f72 6d61 740a 2020 2020 2020  ry format.      
-00022c40: 2020 2020 202d 2073 7472 696e 6720 6578       - string ex
-00022c50: 616d 706c 650a 2020 2020 2020 2020 2020  ample.          
-00022c60: 2020 2068 6561 6465 7273 3d27 6a73 6f6e     headers='json
-00022c70: 270a 2020 2020 2020 2020 2020 2020 2072  '.             r
-00022c80: 6571 7569 7265 6420 6461 7461 206f 7220  equired data or 
-00022c90: 6a73 6f6e 200a 2020 2020 2020 2020 2020  json .          
-00022ca0: 202d 2064 6963 7469 6f6e 6172 7920 6578   - dictionary ex
-00022cb0: 616d 706c 650a 2020 2020 2020 2020 2020  ample.          
-00022cc0: 2020 2068 6561 6465 7273 203d 207b 2022     headers = { "
-00022cd0: 436f 6e74 656e 742d 5479 7065 223a 2022  Content-Type": "
-00022ce0: 6170 706c 6963 6174 696f 6e2f 6a73 6f6e  application/json
-00022cf0: 227d 0a20 2020 2020 2020 2064 6267 203a  "}.        dbg :
-00022d00: 2054 7275 653a 2073 686f 7720 6465 6275   True: show debu
-00022d10: 6769 6e67 206c 6f67 2864 6566 6175 6c74  ging log(default
-00022d20: 292c 2046 616c 7365 2069 676e 6f72 6520  ), False ignore 
-00022d30: 6465 6275 6767 696e 6720 6c6f 670a 2020  debugging log.  
-00022d40: 2020 2020 2020 7069 6e67 3a20 5472 7565        ping: True
-00022d50: 3a20 4368 6563 6b20 6465 7374 2049 5020  : Check dest IP 
-00022d60: 7769 7468 2070 696e 672c 2046 616c 7365  with ping, False
-00022d70: 3a20 6e6f 7420 6368 6563 6b20 6465 7374  : not check dest
-00022d80: 2049 5020 2864 6566 6175 6c74 290a 2020   IP (default).  
-00022d90: 2020 2020 2020 6d61 785f 7472 793a 2064        max_try: d
-00022da0: 6566 6175 6c74 2033 2c20 7265 7472 7920  efault 3, retry 
-00022db0: 6d61 7820 6e75 6d62 6572 2077 6865 6e20  max number when 
-00022dc0: 6661 696c 6564 0a20 2020 2020 2020 206d  failed.        m
-00022dd0: 6f64 653a 2064 6566 6175 6c74 2067 6574  ode: default get
-00022de0: 2c20 2867 6574 2c70 6f73 742c 7061 7463  , (get,post,patc
-00022df0: 6829 0a20 2020 2020 2020 2069 703a 2064  h).        ip: d
-00022e00: 6573 7420 4950 0a20 2020 2020 2020 2070  est IP.        p
-00022e10: 6f72 743a 2064 6566 6175 6c74 2038 3020  ort: default 80 
-00022e20: 6f72 2034 3433 2c20 6172 7263 6f72 6469  or 443, arrcordi
-00022e30: 6e67 2074 6f20 6874 7470 206f 7220 6874  ng to http or ht
-00022e40: 7470 732c 2069 6620 796f 7520 7761 6e74  tps, if you want
-00022e50: 2073 7065 6369 616c 2070 6f72 7420 7468   special port th
-00022e60: 656e 2074 7970 650a 2020 2020 2020 2020  en type.        
-00022e70: 626d 633a 2064 6566 6175 6c74 2046 616c  bmc: default Fal
-00022e80: 7365 2c20 5472 7565 2074 6865 6e20 6175  se, True then au
-00022e90: 746f 6d61 7469 6361 6c6c 2063 6865 636b  tomaticall check
-00022ea0: 2042 4d43 2070 6f72 740a 2020 2020 2020   BMC port.      
-00022eb0: 2020 7469 6d65 6f75 743a 2072 6571 7565    timeout: reque
-00022ec0: 7374 2074 696d 656f 7574 2028 7365 636f  st timeout (seco
-00022ed0: 6e64 7329 2c20 6465 6661 756c 7420 4e6f  nds), default No
-00022ee0: 6e65 0a20 2020 2020 2020 2027 2727 0a20  ne.        '''. 
-00022ef0: 2020 2020 2020 2023 2072 656d 6f76 6520         # remove 
-00022f00: 5353 4c20 7761 7269 6e67 2065 7272 6f72  SSL waring error
-00022f10: 206d 6573 7361 6765 2028 7465 7374 290a   message (test).
-00022f20: 2020 2020 2020 2020 7365 6c66 2e72 6571          self.req
-00022f30: 7565 7374 732e 7061 636b 6167 6573 2e75  uests.packages.u
-00022f40: 726c 6c69 6233 2e64 6973 6162 6c65 5f77  rllib3.disable_w
-00022f50: 6172 6e69 6e67 7328 290a 0a20 2020 2020  arnings()..     
-00022f60: 2020 2069 703d 6f70 7473 2e67 6574 2827     ip=opts.get('
-00022f70: 6970 272c 4e6f 6e65 290a 2020 2020 2020  ip',None).      
-00022f80: 2020 706f 7274 3d6f 7074 732e 6765 7428    port=opts.get(
-00022f90: 2770 6f72 7427 2c4e 6f6e 6529 0a20 2020  'port',None).   
-00022fa0: 2020 2020 2062 6d63 3d6f 7074 732e 6765       bmc=opts.ge
-00022fb0: 7428 2762 6d63 272c 4661 6c73 6529 0a20  t('bmc',False). 
-00022fc0: 2020 2020 2020 206d 6f64 653d 6f70 7473         mode=opts
-00022fd0: 2e67 6574 2827 6d6f 6465 272c 6f70 7473  .get('mode',opts
-00022fe0: 2e67 6574 2827 6d65 7468 6f64 272c 2767  .get('method','g
-00022ff0: 6574 2729 290a 2020 2020 2020 2020 6d61  et')).        ma
-00023000: 785f 7472 793d 6f70 7473 2e67 6574 2827  x_try=opts.get('
-00023010: 6d61 785f 7472 7927 2c6f 7074 732e 6765  max_try',opts.ge
-00023020: 7428 2772 6574 7279 272c 6f70 7473 2e67  t('retry',opts.g
-00023030: 6574 2827 6c6f 6f70 272c 6f70 7473 2e67  et('loop',opts.g
-00023040: 6574 2827 7472 7927 2c33 2929 2929 2023  et('try',3)))) #
-00023050: 2052 6574 7279 206d 6178 206e 756d 6265   Retry max numbe
-00023060: 720a 2020 2020 2020 2020 6175 7468 3d6f  r.        auth=o
-00023070: 7074 732e 6765 7428 2761 7574 6827 2c4e  pts.get('auth',N
-00023080: 6f6e 6529 0a20 2020 2020 2020 2075 7365  one).        use
-00023090: 723d 6f70 7473 2e67 6574 2827 7573 6572  r=opts.get('user
-000230a0: 272c 4e6f 6e65 290a 2020 2020 2020 2020  ',None).        
-000230b0: 7061 7373 7764 3d6f 7074 732e 6765 7428  passwd=opts.get(
-000230c0: 2770 6173 7377 6427 2c4e 6f6e 6529 0a20  'passwd',None). 
-000230d0: 2020 2020 2020 2064 6174 613d 6f70 7473         data=opts
-000230e0: 2e67 6574 2827 6461 7461 272c 4e6f 6e65  .get('data',None
-000230f0: 2920 2320 6469 6374 696f 6e61 7279 2066  ) # dictionary f
-00023100: 6f72 6d61 740a 2020 2020 2020 2020 6a73  ormat.        js
-00023110: 6f6e 5f64 6174 613d 6f70 7473 2e67 6574  on_data=opts.get
-00023120: 2827 6a73 6f6e 272c 4e6f 6e65 2920 2320  ('json',None) # 
-00023130: 6469 6374 696f 6e61 7279 2066 6f72 6d61  dictionary forma
-00023140: 740a 2020 2020 2020 2020 6669 6c65 733d  t.        files=
-00023150: 6f70 7473 2e67 6574 2827 6669 6c65 7327  opts.get('files'
-00023160: 2c4e 6f6e 6529 2023 2064 6963 7469 6f6e  ,None) # diction
-00023170: 6172 7920 666f 726d 6174 0a20 2020 2020  ary format.     
-00023180: 2020 2072 6571 7565 7374 5f75 726c 3d6f     request_url=o
-00023190: 7074 732e 6765 7428 2772 6571 7565 7374  pts.get('request
-000231a0: 5f75 726c 272c 4e6f 6e65 290a 2020 2020  _url',None).    
-000231b0: 2020 2020 6462 673d 6f70 7473 2e67 6574      dbg=opts.get
-000231c0: 2827 6462 6727 2c54 7275 6529 2020 2320  ('dbg',True)  # 
-000231d0: 7368 6f77 2064 6562 7567 6769 6e67 206c  show debugging l
-000231e0: 6f67 0a20 2020 2020 2020 2070 696e 673d  og.        ping=
-000231f0: 6f70 7473 2e67 6574 2827 7069 6e67 272c  opts.get('ping',
-00023200: 4661 6c73 6529 2023 2063 6865 636b 2070  False) # check p
-00023210: 696e 6720 746f 2049 500a 2020 2020 2020  ing to IP.      
-00023220: 2020 7469 6d65 6f75 743d 6f70 7473 2e67    timeout=opts.g
-00023230: 6574 2827 7469 6d65 6f75 7427 2c4e 6f6e  et('timeout',Non
-00023240: 6529 2023 2072 6571 7565 7374 2074 696d  e) # request tim
-00023250: 656f 7574 0a20 2020 2020 2020 2072 6571  eout.        req
-00023260: 5f64 6174 613d 7b7d 0a20 2020 2020 2020  _data={}.       
-00023270: 2063 686b 5f64 6573 743d 4e6f 6e65 0a20   chk_dest=None. 
-00023280: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00023290: 616e 6365 2874 696d 656f 7574 2c69 6e74  ance(timeout,int
-000232a0: 293a 2072 6571 5f64 6174 615b 2774 696d  ): req_data['tim
-000232b0: 656f 7574 275d 3d74 696d 656f 7574 0a20  eout']=timeout. 
-000232c0: 2020 2020 2020 2069 6620 6f70 7473 2e67         if opts.g
-000232d0: 6574 2827 6874 7470 7327 293a 2072 6571  et('https'): req
-000232e0: 5f64 6174 615b 2776 6572 6966 7927 5d3d  _data['verify']=
-000232f0: 4661 6c73 650a 2020 2020 2020 2020 6966  False.        if
-00023300: 2054 7970 6528 6175 7468 2c27 7475 706c   Type(auth,'tupl
-00023310: 6527 2c64 6174 613d 5472 7565 293a 0a20  e',data=True):. 
-00023320: 2020 2020 2020 2020 2020 2072 6571 5f64             req_d
-00023330: 6174 615b 2761 7574 6827 5d3d 6f70 7473  ata['auth']=opts
-00023340: 2e67 6574 2827 6175 7468 2729 0a20 2020  .get('auth').   
-00023350: 2020 2020 2065 6c69 6620 5479 7065 2875       elif Type(u
-00023360: 7365 722c 2773 7472 272c 6461 7461 3d54  ser,'str',data=T
-00023370: 7275 6529 2061 6e64 2054 7970 6528 7061  rue) and Type(pa
-00023380: 7373 7764 2c27 7374 7227 2c64 6174 613d  sswd,'str',data=
-00023390: 5472 7565 293a 0a20 2020 2020 2020 2020  True):.         
-000233a0: 2020 2072 6571 5f64 6174 615b 2761 7574     req_data['aut
-000233b0: 6827 5d3d 2875 7365 722c 7061 7373 7764  h']=(user,passwd
-000233c0: 290a 2020 2020 2020 2020 6966 2054 7970  ).        if Typ
-000233d0: 6528 6461 7461 2c27 6469 6374 272c 6461  e(data,'dict',da
-000233e0: 7461 3d54 7275 6529 3a20 7265 715f 6461  ta=True): req_da
-000233f0: 7461 5b27 6461 7461 275d 3d6f 7074 732e  ta['data']=opts.
-00023400: 6765 7428 2764 6174 6127 290a 2020 2020  get('data').    
-00023410: 2020 2020 6966 2054 7970 6528 6a73 6f6e      if Type(json
-00023420: 5f64 6174 612c 2764 6963 7427 2c64 6174  _data,'dict',dat
-00023430: 613d 5472 7565 293a 2072 6571 5f64 6174  a=True): req_dat
-00023440: 615b 276a 736f 6e27 5d3d 6a73 6f6e 5f64  a['json']=json_d
-00023450: 6174 610a 2020 2020 2020 2020 2020 2020  ata.            
-00023460: 0a20 2020 2020 2020 2069 6620 5479 7065  .        if Type
-00023470: 2866 696c 6573 2c27 6469 6374 272c 6461  (files,'dict',da
-00023480: 7461 3d54 7275 6529 3a20 7265 715f 6461  ta=True): req_da
-00023490: 7461 5b27 6669 6c65 7327 5d3d 6f70 7473  ta['files']=opts
-000234a0: 2e67 6574 2827 6669 6c65 7327 290a 2020  .get('files').  
-000234b0: 2020 2020 2020 6865 6164 6572 733d 6f70        headers=op
-000234c0: 7473 2e67 6574 2827 6865 6164 6572 7327  ts.get('headers'
-000234d0: 2920 2320 6469 6374 696f 6e61 7279 2066  ) # dictionary f
-000234e0: 6f72 6d61 740a 2020 2020 2020 2020 6966  ormat.        if
-000234f0: 2054 7970 6528 6865 6164 6572 732c 2773   Type(headers,'s
-00023500: 7472 272c 6461 7461 3d54 7275 6529 3a0a  tr',data=True):.
-00023510: 2020 2020 2020 2020 2020 2020 6966 2068              if h
-00023520: 6561 6465 7273 203d 3d20 276a 736f 6e27  eaders == 'json'
-00023530: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00023540: 2020 6865 6164 6572 733d 7b20 2243 6f6e    headers={ "Con
-00023550: 7465 6e74 2d54 7970 6522 3a20 2261 7070  tent-Type": "app
-00023560: 6c69 6361 7469 6f6e 2f6a 736f 6e22 7d0a  lication/json"}.
-00023570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023580: 6966 2064 6174 613a 0a20 2020 2020 2020  if data:.       
-00023590: 2020 2020 2020 2020 2020 2020 2064 6174               dat
-000235a0: 613d 6a73 6f6e 2e64 756d 7073 2864 6174  a=json.dumps(dat
-000235b0: 6129 0a20 2020 2020 2020 2020 2020 2020  a).             
-000235c0: 2020 2020 2020 2072 6571 5f64 6174 615b         req_data[
-000235d0: 2764 6174 6127 5d3d 6461 7461 0a20 2020  'data']=data.   
-000235e0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-000235f0: 6620 6a73 6f6e 5f64 6174 613a 0a20 2020  f json_data:.   
-00023600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023610: 2064 6174 613d 6a73 6f6e 2e64 756d 7073   data=json.dumps
-00023620: 286a 736f 6e5f 6461 7461 290a 2020 2020  (json_data).    
-00023630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023640: 6966 2027 6a73 6f6e 2720 696e 2072 6571  if 'json' in req
-00023650: 5f64 6174 613a 2072 6571 5f64 6174 612e  _data: req_data.
-00023660: 706f 7028 276a 736f 6e27 290a 2020 2020  pop('json').    
-00023670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023680: 7265 715f 6461 7461 5b27 6461 7461 275d  req_data['data']
-00023690: 3d64 6174 610a 2020 2020 2020 2020 656c  =data.        el
-000236a0: 6966 2054 7970 6528 6865 6164 6572 732c  if Type(headers,
-000236b0: 2764 6963 7427 2c64 6174 613d 5472 7565  'dict',data=True
-000236c0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-000236d0: 6571 5f64 6174 615b 2768 6561 6465 7273  eq_data['headers
-000236e0: 275d 3d68 6561 6465 7273 0a20 2020 2020  ']=headers.     
-000236f0: 2020 2069 6620 6e6f 7420 4973 4e6f 6e65     if not IsNone
-00023700: 2869 7029 3a0a 2020 2020 2020 2020 2020  (ip):.          
-00023710: 2020 6970 3d49 7056 3428 6970 2c6f 7574    ip=IpV4(ip,out
-00023720: 3d73 7472 290a 2020 2020 2020 2020 2020  =str).          
-00023730: 2020 6368 6b5f 6465 7374 3d27 7b7d 272e    chk_dest='{}'.
-00023740: 666f 726d 6174 2869 7029 0a20 2020 2020  format(ip).     
-00023750: 2020 2020 2020 2069 6620 7265 715f 6461         if req_da
-00023760: 7461 2e67 6574 2827 7665 7269 6679 272c  ta.get('verify',
-00023770: 5472 7565 293a 0a20 2020 2020 2020 2020  True):.         
-00023780: 2020 2020 2020 2068 6f73 745f 7572 6c3d         host_url=
-00023790: 2768 7474 703a 2f2f 7b7d 272e 666f 726d  'http://{}'.form
-000237a0: 6174 2869 7029 0a20 2020 2020 2020 2020  at(ip).         
-000237b0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000237c0: 2020 2020 2020 2020 2068 6f73 745f 7572           host_ur
-000237d0: 6c3d 2768 7474 7073 3a2f 2f7b 7d27 2e66  l='https://{}'.f
-000237e0: 6f72 6d61 7428 6970 290a 2020 2020 2020  ormat(ip).      
-000237f0: 2020 2020 2020 6966 206e 6f74 2049 734e        if not IsN
-00023800: 6f6e 6528 706f 7274 293a 2068 6f73 745f  one(port): host_
-00023810: 7572 6c3d 277b 7d3a 7b7d 272e 666f 726d  url='{}:{}'.form
-00023820: 6174 2868 6f73 745f 7572 6c2c 706f 7274  at(host_url,port
-00023830: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00023840: 206e 6f74 2049 734e 6f6e 6528 7265 7175   not IsNone(requ
-00023850: 6573 745f 7572 6c29 3a20 686f 7374 5f75  est_url): host_u
-00023860: 726c 3d27 7b7d 2f7b 7d27 2e66 6f72 6d61  rl='{}/{}'.forma
-00023870: 7428 686f 7374 5f75 726c 2c72 6571 7565  t(host_url,reque
-00023880: 7374 5f75 726c 290a 2020 2020 2020 2020  st_url).        
-00023890: 656c 6966 2054 7970 6528 686f 7374 5f75  elif Type(host_u
-000238a0: 726c 2c27 7374 7227 2c64 6174 613d 5472  rl,'str',data=Tr
-000238b0: 7565 2920 616e 6420 686f 7374 5f75 726c  ue) and host_url
-000238c0: 2e73 7461 7274 7377 6974 6828 2768 7474  .startswith('htt
-000238d0: 7027 293a 0a20 2020 2020 2020 2020 2020  p'):.           
-000238e0: 2063 686b 5f64 6573 743d 7265 2e63 6f6d   chk_dest=re.com
-000238f0: 7069 6c65 2827 2868 7474 707c 6874 7470  pile('(http|http
-00023900: 7329 3a2f 2f28 5b61 2d7a 412d 5a30 2d39  s)://([a-zA-Z0-9
-00023910: 2e5d 2a29 5b3a 2f5d 2729 2e66 696e 6461  .]*)[:/]').finda
-00023920: 6c6c 2868 6f73 745f 7572 6c29 0a20 2020  ll(host_url).   
-00023930: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
-00023940: 6368 6b5f 6465 7374 293d 3d30 3a0a 2020  chk_dest)==0:.  
-00023950: 2020 2020 2020 2020 2020 2020 2020 6368                ch
-00023960: 6b5f 6465 7374 3d72 652e 636f 6d70 696c  k_dest=re.compil
-00023970: 6528 2728 6874 7470 7c68 7474 7073 293a  e('(http|https):
-00023980: 2f2f 285b 612d 7a41 2d5a 302d 392e 5d2a  //([a-zA-Z0-9.]*
-00023990: 2927 292e 6669 6e64 616c 6c28 686f 7374  )').findall(host
-000239a0: 5f75 726c 290a 2020 2020 2020 2020 2020  _url).          
-000239b0: 2020 6966 206c 656e 2863 686b 5f64 6573    if len(chk_des
-000239c0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-000239d0: 2020 2020 6368 6b5f 6465 7374 3d63 686b      chk_dest=chk
-000239e0: 5f64 6573 745b 305d 5b31 5d0a 2020 2020  _dest[0][1].    
-000239f0: 2020 2020 2020 2020 2020 2020 6966 2068              if h
-00023a00: 6f73 745f 7572 6c2e 6669 6e64 2827 6874  ost_url.find('ht
-00023a10: 7470 733a 2f2f 2729 203d 3d20 303a 0a20  tps://') == 0:. 
-00023a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023a30: 2020 2072 6571 5f64 6174 615b 2776 6572     req_data['ver
-00023a40: 6966 7927 5d3d 4661 6c73 650a 2020 2020  ify']=False.    
-00023a50: 2020 2020 6966 2049 734e 6f6e 6528 6368      if IsNone(ch
-00023a60: 6b5f 6465 7374 293a 0a20 2020 2020 2020  k_dest):.       
-00023a70: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
-00023a80: 652c 2768 6f73 745f 7572 6c20 6f72 2069  e,'host_url or i
-00023a90: 7020 6e6f 7420 666f 756e 6427 0a20 2020  p not found'.   
-00023aa0: 2020 2020 2069 6620 626d 633a 0a20 2020       if bmc:.   
-00023ab0: 2020 2020 2020 2020 2069 6620 4970 5634           if IpV4
-00023ac0: 2863 686b 5f64 6573 742c 626d 633d 5472  (chk_dest,bmc=Tr
-00023ad0: 7565 2920 6973 2046 616c 7365 3a0a 2020  ue) is False:.  
-00023ae0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00023af0: 7475 726e 2046 616c 7365 2c27 5468 6520  turn False,'The 
-00023b00: 4950 287b 7d29 2069 7320 6e6f 7420 424d  IP({}) is not BM
-00023b10: 4320 4950 272e 666f 726d 6174 2863 686b  C IP'.format(chk
-00023b20: 5f64 6573 7429 0a20 2020 2020 2020 2069  _dest).        i
-00023b30: 6620 7069 6e67 2061 6e64 2063 686b 5f64  f ping and chk_d
-00023b40: 6573 743a 0a20 2020 2020 2020 2020 2020  est:.           
-00023b50: 2070 696e 675f 7263 3d70 696e 6728 6368   ping_rc=ping(ch
-00023b60: 6b5f 6465 7374 2c74 696d 656f 7574 5f73  k_dest,timeout_s
-00023b70: 6563 3d33 290a 2020 2020 2020 2020 2020  ec=3).          
-00023b80: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-00023b90: 6e63 6528 7069 6e67 5f72 632c 626f 6f6c  nce(ping_rc,bool
-00023ba0: 2920 616e 6420 7069 6e67 5f72 633d 3d30  ) and ping_rc==0
-00023bb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00023bc0: 2020 7265 7475 726e 2030 2c27 4361 6e63    return 0,'Canc
-00023bd0: 656c 6564 270a 2020 2020 2020 2020 2020  eled'.          
-00023be0: 2020 656c 6966 206e 6f74 2070 696e 675f    elif not ping_
-00023bf0: 7263 3a0a 2020 2020 2020 2020 2020 2020  rc:.            
-00023c00: 2020 2020 7265 7475 726e 2046 616c 7365      return False
-00023c10: 2c27 4361 6e20 6e6f 7420 6163 6365 7373  ,'Can not access
-00023c20: 2074 6f20 6465 7374 696e 6174 696f 6e28   to destination(
-00023c30: 7b7d 2927 2e66 6f72 6d61 7428 6368 6b5f  {})'.format(chk_
-00023c40: 6465 7374 290a 2020 2020 2020 2020 7373  dest).        ss
-00023c50: 203d 2073 656c 662e 7265 7175 6573 7473   = self.requests
-00023c60: 2e53 6573 7369 6f6e 2829 0a20 2020 2020  .Session().     
-00023c70: 2020 2065 7272 5f6d 7367 3d27 270a 2020     err_msg=''.  
-00023c80: 2020 2020 2020 666f 7220 6a20 696e 2072        for j in r
-00023c90: 616e 6765 2830 2c6d 6178 5f74 7279 293a  ange(0,max_try):
-00023ca0: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
-00023cb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00023cc0: 2020 6966 2049 7353 616d 6528 6d6f 6465    if IsSame(mode
-00023cd0: 2c27 706f 7374 2729 3a0a 2020 2020 2020  ,'post'):.      
-00023ce0: 2020 2020 2020 2020 2020 2020 2020 7220                r 
-00023cf0: 3d73 732e 706f 7374 2868 6f73 745f 7572  =ss.post(host_ur
-00023d00: 6c2c 2a2a 7265 715f 6461 7461 290a 2020  l,**req_data).  
-00023d10: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00023d20: 6966 2049 7353 616d 6528 6d6f 6465 2c27  if IsSame(mode,'
-00023d30: 7061 7463 6827 293a 0a20 2020 2020 2020  patch'):.       
-00023d40: 2020 2020 2020 2020 2020 2020 2072 203d               r =
-00023d50: 7373 2e70 6174 6368 2868 6f73 745f 7572  ss.patch(host_ur
-00023d60: 6c2c 2a2a 7265 715f 6461 7461 290a 2020  l,**req_data).  
-00023d70: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00023d80: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00023d90: 2020 2020 2020 2020 7220 3d73 732e 6765          r =ss.ge
-00023da0: 7428 686f 7374 5f75 726c 2c2a 2a72 6571  t(host_url,**req
-00023db0: 5f64 6174 6129 0a20 2020 2020 2020 2020  _data).         
-00023dc0: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
-00023dd0: 7565 2c72 0a20 2020 2020 2020 2020 2020  ue,r.           
-00023de0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-00023df0: 2020 2020 2020 2020 2070 6173 730a 2020           pass.  
-00023e00: 2020 2020 2020 2020 2020 2365 7863 6570            #excep
-00023e10: 7420 7265 7175 6573 7473 2e65 7863 6570  t requests.excep
-00023e20: 7469 6f6e 732e 5265 7175 6573 7445 7863  tions.RequestExc
-00023e30: 6570 7469 6f6e 2061 7320 653a 0a20 2020  eption as e:.   
-00023e40: 2020 2020 2020 2020 2065 7272 5f6d 7367           err_msg
-00023e50: 3d27 5365 7276 6572 287b 7d29 2068 6173  ='Server({}) has
-00023e60: 206e 6f20 7265 7370 6f6e 7365 272e 666f   no response'.fo
-00023e70: 726d 6174 2863 686b 5f64 6573 7429 0a20  rmat(chk_dest). 
-00023e80: 2020 2020 2020 2020 2020 2069 6620 6462             if db
-00023e90: 673a 2053 7464 4572 7228 225c 6e53 6572  g: StdErr("\nSer
-00023ea0: 7665 7228 7b7d 2920 6861 7320 6e6f 2072  ver({}) has no r
-00023eb0: 6573 706f 6e73 6520 2877 6169 7420 7b7d  esponse (wait {}
-00023ec0: 2f7b 7d20 2831 3073 2929 222e 666f 726d  /{} (10s))".form
-00023ed0: 6174 2863 686b 5f64 6573 742c 6a2c 6d61  at(chk_dest,j,ma
-00023ee0: 785f 7472 7929 290a 2020 2020 2020 2020  x_try)).        
-00023ef0: 2020 2020 7469 6d65 2e73 6c65 6570 2831      time.sleep(1
-00023f00: 3029 0a20 2020 2020 2020 2072 6574 7572  0).        retur
-00023f10: 6e20 4661 6c73 652c 2754 696d 654f 7574  n False,'TimeOut
-00023f20: 3a20 7b7d 272e 666f 726d 6174 2865 7272  : {}'.format(err
-00023f30: 5f6d 7367 2920 6966 2065 7272 5f6d 7367  _msg) if err_msg
-00023f40: 2065 6c73 6520 2754 696d 654f 7574 270a   else 'TimeOut'.
-00023f50: 0a20 2020 2064 6566 2073 7472 3275 726c  .    def str2url
-00023f60: 2873 656c 662c 7374 7269 6e67 293a 0a20  (self,string):. 
-00023f70: 2020 2020 2020 2069 6620 4973 4e6f 6e65         if IsNone
-00023f80: 2873 7472 696e 6729 3a20 7265 7475 726e  (string): return
-00023f90: 2027 270a 2020 2020 2020 2020 6966 2069   ''.        if i
-00023fa0: 7369 6e73 7461 6e63 6528 7374 7269 6e67  sinstance(string
-00023fb0: 2c73 7472 293a 0a20 2020 2020 2020 2020  ,str):.         
-00023fc0: 2020 2072 6574 7572 6e20 7374 7269 6e67     return string
-00023fd0: 2e72 6570 6c61 6365 2827 2b27 2c27 2532  .replace('+','%2
-00023fe0: 4227 292e 7265 706c 6163 6528 273f 272c  B').replace('?',
-00023ff0: 2725 3346 2729 2e72 6570 6c61 6365 2827  '%3F').replace('
-00024000: 2f27 2c27 2532 4627 292e 7265 706c 6163  /','%2F').replac
-00024010: 6528 273a 272c 2725 3341 2729 2e72 6570  e(':','%3A').rep
-00024020: 6c61 6365 2827 3d27 2c27 2533 4427 292e  lace('=','%3D').
-00024030: 7265 706c 6163 6528 2720 272c 272b 2729  replace(' ','+')
-00024040: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00024050: 7374 7269 6e67 0a0a 2020 2020 6465 6620  string..    def 
-00024060: 666f 726d 3264 6963 7428 7365 6c66 2c73  form2dict(self,s
-00024070: 7263 3d4e 6f6e 6529 3a0a 2020 2020 2020  rc=None):.      
-00024080: 2020 6966 2049 734e 6f6e 6528 7372 6329    if IsNone(src)
-00024090: 3a20 7372 633d 7365 6c66 2e72 6571 7565  : src=self.reque
-000240a0: 7374 732e 666f 726d 0a20 2020 2020 2020  sts.form.       
-000240b0: 2072 6574 7572 6e20 4469 6374 2873 7263   return Dict(src
-000240c0: 290a 0a20 2020 2064 6566 2068 6967 686c  )..    def highl
-000240d0: 6967 6874 2873 656c 662c 7374 7269 6e67  ight(self,string
-000240e0: 732c 6669 6e64 2c63 6f6c 6f72 3d27 2366  s,find,color='#f
-000240f0: 6666 6634 3227 293a 0a20 2020 2020 2020  fff42'):.       
-00024100: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
-00024110: 7472 696e 6773 2c73 7472 293a 0a20 2020  trings,str):.   
-00024120: 2020 2020 2020 2020 2066 663d 7265 2e63           ff=re.c
-00024130: 6f6d 7069 6c65 2866 696e 642c 7265 2e49  ompile(find,re.I
-00024140: 290a 2020 2020 2020 2020 2020 2020 616c  ).            al
-00024150: 6c5f 6666 3d66 662e 6669 6e64 616c 6c28  l_ff=ff.findall(
-00024160: 7374 7269 6e67 7329 0a20 2020 2020 2020  strings).       
-00024170: 2020 2020 2069 6620 6c65 6e28 616c 6c5f       if len(all_
-00024180: 6666 2920 3e30 3a0a 2020 2020 2020 2020  ff) >0:.        
-00024190: 2020 2020 2020 2020 666f 7220 6d6d 2069          for mm i
-000241a0: 6e20 616c 6c5f 6666 3a0a 2020 2020 2020  n all_ff:.      
-000241b0: 2020 2020 2020 2020 2020 2020 2020 7374                st
-000241c0: 7269 6e67 733d 7374 7269 6e67 732e 7265  rings=strings.re
-000241d0: 706c 6163 6528 6d6d 2c27 2727 3c66 6f6e  place(mm,'''<fon
-000241e0: 7420 7374 796c 653d 2262 6163 6b67 726f  t style="backgro
-000241f0: 756e 642d 636f 6c6f 723a 7b31 7d22 3e7b  und-color:{1}">{
-00024200: 307d 3c2f 666f 6e74 3e27 2727 2e66 6f72  0}</font>'''.for
-00024210: 6d61 7428 6d6d 2c63 6f6c 6f72 2929 0a20  mat(mm,color)). 
-00024220: 2020 2020 2020 2072 6574 7572 6e20 7374         return st
-00024230: 7269 6e67 730a 0a0a 636c 6173 7320 5449  rings...class TI
-00024240: 4d45 3a0a 2020 2020 6465 6620 5f5f 696e  ME:.    def __in
-00024250: 6974 5f5f 2873 656c 662c 7372 633d 4e6f  it__(self,src=No
-00024260: 6e65 2c74 696d 657a 6f6e 653d 4e6f 6e65  ne,timezone=None
-00024270: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
-00024280: 7469 6d65 7a6f 6e65 3d74 696d 657a 6f6e  timezone=timezon
-00024290: 650a 2020 2020 2020 2020 7365 6c66 2e69  e.        self.i
-000242a0: 6e69 745f 7469 6d65 3d73 656c 662e 4e6f  nit_time=self.No
-000242b0: 7728 7469 6d65 7a6f 6e65 3d74 696d 657a  w(timezone=timez
-000242c0: 6f6e 6529 0a20 2020 2020 2020 2073 656c  one).        sel
-000242d0: 662e 6c69 6665 5f74 696d 653d 7365 6c66  f.life_time=self
-000242e0: 2e69 6e69 745f 7469 6d65 0a20 2020 2020  .init_time.     
-000242f0: 2020 2073 656c 662e 696e 6974 5f73 6563     self.init_sec
-00024300: 3d69 6e74 2873 656c 662e 696e 6974 5f74  =int(self.init_t
-00024310: 696d 652e 7374 7266 7469 6d65 2827 2573  ime.strftime('%s
-00024320: 2729 290a 2020 2020 2020 2020 7365 6c66  ')).        self
-00024330: 2e73 7263 3d73 7263 0a0a 2020 2020 6465  .src=src..    de
-00024340: 6620 5370 656e 6428 7365 6c66 2c6c 6966  f Spend(self,lif
-00024350: 655f 7469 6d65 3d54 7275 652c 756e 6974  e_time=True,unit
-00024360: 3d4e 6f6e 652c 696e 7465 6765 723d 5472  =None,integer=Tr
-00024370: 7565 293a 0a20 2020 2020 2020 2069 6620  ue):.        if 
-00024380: 6c69 6665 5f74 696d 653a 0a20 2020 2020  life_time:.     
-00024390: 2020 2020 2020 2072 743d 696e 7428 7365         rt=int(se
-000243a0: 6c66 2e4e 6f77 2829 2e73 7472 6674 696d  lf.Now().strftim
-000243b0: 6528 2725 7327 2929 202d 2069 6e74 2873  e('%s')) - int(s
-000243c0: 656c 662e 6c69 6665 5f74 696d 652e 7374  elf.life_time.st
-000243d0: 7266 7469 6d65 2827 2573 2729 290a 2020  rftime('%s')).  
-000243e0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-000243f0: 2020 2020 2020 2020 7274 3d69 6e74 2873          rt=int(s
-00024400: 656c 662e 4e6f 7728 292e 7374 7266 7469  elf.Now().strfti
-00024410: 6d65 2827 2573 2729 2920 2d20 7365 6c66  me('%s')) - self
-00024420: 2e69 6e69 745f 7365 630a 2020 2020 2020  .init_sec.      
-00024430: 2020 2320 436f 6e76 6572 7420 696e 7465    # Convert inte
-00024440: 6765 7220 7661 6c75 6520 746f 2068 756d  ger value to hum
-00024450: 616e 2072 6561 6461 626c 6520 7469 6d65  an readable time
-00024460: 0a20 2020 2020 2020 2023 2075 6e69 743a  .        # unit:
-00024470: 204e 6f6e 6520 2c20 696e 7465 6765 723a   None , integer:
-00024480: 206f 7574 7075 7420 3a20 7365 636f 6e64   output : second
-00024490: 7320 2869 6e74 290a 2020 2020 2020 2020  s (int).        
-000244a0: 2320 556e 6974 3a20 4e6f 6e65 202c 206e  # Unit: None , n
-000244b0: 6f74 2069 6e74 6567 6572 3a20 6f75 7470  ot integer: outp
-000244c0: 7574 203a 2048 756d 616e 2072 6561 6461  ut : Human reada
-000244d0: 626c 6520 7061 7373 6564 2074 696d 6520  ble passed time 
-000244e0: 7374 7269 6e67 2028 6175 746f 6d61 7469  string (automati
-000244f0: 6361 6c6c 7920 6361 6c63 756c 6174 6529  cally calculate)
-00024500: 0a20 2020 2020 2020 2023 2055 6e69 743a  .        # Unit:
-00024510: 2075 6e69 7420 2c20 696e 7465 6765 723a   unit , integer:
-00024520: 206f 7574 7075 7420 3a20 7468 6520 756e   output : the un
-00024530: 6974 2773 206e 756d 6265 7220 2869 6e74  it's number (int
-00024540: 290a 2020 2020 2020 2020 2320 556e 6974  ).        # Unit
-00024550: 3a20 756e 6974 202c 206e 6f74 2069 6e74  : unit , not int
-00024560: 6567 6572 3a20 6f75 7470 7574 203a 2048  eger: output : H
-00024570: 756d 616e 2072 6561 6461 626c 6520 7061  uman readable pa
-00024580: 7373 6564 2074 696d 6520 7374 7269 6e67  ssed time string
-00024590: 2028 6d61 7820 6973 2064 6566 696e 6564   (max is defined
-000245a0: 2075 6e69 7429 0a20 2020 2020 2020 2072   unit).        r
-000245b0: 6574 7572 6e20 4875 6d61 6e5f 556e 6974  eturn Human_Unit
-000245c0: 2872 742c 756e 6974 3d27 5327 2c77 616e  (rt,unit='S',wan
-000245d0: 745f 756e 6974 3d75 6e69 742c 696e 745f  t_unit=unit,int_
-000245e0: 6f75 743d 696e 7465 6765 7229 0a0a 2020  out=integer)..  
-000245f0: 2020 6465 6620 5265 7365 7428 7365 6c66    def Reset(self
-00024600: 2c74 696d 657a 6f6e 653d 4e6f 6e65 293a  ,timezone=None):
-00024610: 0a20 2020 2020 2020 2073 656c 662e 696e  .        self.in
-00024620: 6974 5f74 696d 653d 7365 6c66 2e4e 6f77  it_time=self.Now
-00024630: 2874 696d 657a 6f6e 653d 7469 6d65 7a6f  (timezone=timezo
-00024640: 6e65 290a 2020 2020 2020 2020 7365 6c66  ne).        self
-00024650: 2e69 6e69 745f 7365 633d 696e 7428 7365  .init_sec=int(se
-00024660: 6c66 2e69 6e69 745f 7469 6d65 2e73 7472  lf.init_time.str
-00024670: 6674 696d 6528 2725 7327 2929 0a0a 2020  ftime('%s'))..  
-00024680: 2020 6465 6620 536c 6565 7028 7365 6c66    def Sleep(self
-00024690: 2c74 7279 5f77 6169 743d 4e6f 6e65 2c64  ,try_wait=None,d
-000246a0: 6566 6175 6c74 3d31 293a 0a20 2020 2020  efault=1):.     
-000246b0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-000246c0: 2874 7279 5f77 6169 742c 2869 6e74 2c73  (try_wait,(int,s
-000246d0: 7472 2929 3a20 7472 795f 7761 6974 3d28  tr)): try_wait=(
-000246e0: 7472 795f 7761 6974 2c29 0a20 2020 2020  try_wait,).     
-000246f0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00024700: 2874 7279 5f77 6169 742c 286c 6973 742c  (try_wait,(list,
-00024710: 7475 706c 6529 2920 616e 6420 6c65 6e28  tuple)) and len(
-00024720: 7472 795f 7761 6974 293a 0a20 2020 2020  try_wait):.     
-00024730: 2020 2020 2020 2069 6620 6c65 6e28 7472         if len(tr
-00024740: 795f 7761 6974 2920 3d3d 2032 3a0a 2020  y_wait) == 2:.  
-00024750: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-00024760: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-00024770: 2020 2020 2020 2074 696d 652e 736c 6565         time.slee
-00024780: 7028 7261 6e64 6f6d 2e72 616e 6469 6e74  p(random.randint
-00024790: 2869 6e74 2874 7279 5f77 6169 745b 305d  (int(try_wait[0]
-000247a0: 292c 696e 7428 7472 795f 7761 6974 5b31  ),int(try_wait[1
-000247b0: 5d29 2929 0a20 2020 2020 2020 2020 2020  ]))).           
-000247c0: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
-000247d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000247e0: 2070 6173 730a 2020 2020 2020 2020 2020   pass.          
-000247f0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00024800: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-00024810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024820: 2074 696d 652e 736c 6565 7028 696e 7428   time.sleep(int(
-00024830: 7472 795f 7761 6974 5b30 5d29 290a 2020  try_wait[0])).  
-00024840: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-00024850: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-00024860: 2020 2020 2020 2020 2020 7061 7373 0a20            pass. 
-00024870: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00024880: 2020 2020 2020 2020 2074 696d 652e 736c           time.sl
-00024890: 6565 7028 6465 6661 756c 7429 0a20 2020  eep(default).   
-000248a0: 2064 6566 2052 616e 6428 7365 6c66 2c74   def Rand(self,t
-000248b0: 7279 5f77 6169 743d 4e6f 6e65 2c64 6566  ry_wait=None,def
-000248c0: 6175 6c74 3d31 293a 0a20 2020 2020 2020  ault=1):.       
-000248d0: 2069 6620 6973 696e 7374 616e 6365 2874   if isinstance(t
-000248e0: 7279 5f77 6169 742c 2869 6e74 2c73 7472  ry_wait,(int,str
-000248f0: 2929 3a20 7472 795f 7761 6974 3d28 7472  )): try_wait=(tr
-00024900: 795f 7761 6974 2c29 0a20 2020 2020 2020  y_wait,).       
-00024910: 2069 6620 6973 696e 7374 616e 6365 2874   if isinstance(t
-00024920: 7279 5f77 6169 742c 286c 6973 742c 7475  ry_wait,(list,tu
-00024930: 706c 6529 2920 616e 6420 6c65 6e28 7472  ple)) and len(tr
-00024940: 795f 7761 6974 293a 0a20 2020 2020 2020  y_wait):.       
-00024950: 2020 2020 2069 6620 6c65 6e28 7472 795f       if len(try_
-00024960: 7761 6974 2920 3d3d 2032 3a0a 2020 2020  wait) == 2:.    
-00024970: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-00024980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024990: 2020 2020 2072 6574 7572 6e20 7261 6e64       return rand
-000249a0: 6f6d 2e72 616e 6469 6e74 2869 6e74 2874  om.randint(int(t
-000249b0: 7279 5f77 6169 745b 305d 292c 696e 7428  ry_wait[0]),int(
-000249c0: 7472 795f 7761 6974 5b31 5d29 290a 2020  try_wait[1])).  
-000249d0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-000249e0: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-000249f0: 2020 2020 2020 2020 2020 7061 7373 0a20            pass. 
-00024a00: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00024a10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024a20: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00024a30: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00024a40: 2069 6e74 2874 7279 5f77 6169 745b 305d   int(try_wait[0]
-00024a50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00024a60: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
-00024a70: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-00024a80: 7373 0a20 2020 2020 2020 2072 6574 7572  ss.        retur
-00024a90: 6e20 6465 6661 756c 740a 0a20 2020 2064  n default..    d
-00024aa0: 6566 2049 6e74 2873 656c 662c 7469 6d65  ef Int(self,time
-00024ab0: 7a6f 6e65 3d4e 6f6e 6529 3a0a 2020 2020  zone=None):.    
-00024ac0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00024ad0: 4e6f 7728 696e 742c 7469 6d65 7a6f 6e65  Now(int,timezone
-00024ae0: 3d74 696d 657a 6f6e 6529 0a0a 2020 2020  =timezone)..    
-00024af0: 6465 6620 4e6f 7728 7365 6c66 2c6d 6f64  def Now(self,mod
-00024b00: 653d 4e6f 6e65 2c74 696d 657a 6f6e 653d  e=None,timezone=
-00024b10: 4e6f 6e65 2c74 696d 6564 6174 613d 4e6f  None,timedata=No
-00024b20: 6e65 293a 0a20 2020 2020 2020 2069 6620  ne):.        if 
-00024b30: 6973 696e 7374 616e 6365 2874 696d 6564  isinstance(timed
-00024b40: 6174 612c 7365 6c66 2e44 6174 6574 696d  ata,self.Datetim
-00024b50: 6528 2929 3a0a 2020 2020 2020 2020 2020  e()):.          
-00024b60: 2020 7469 6d65 6461 7461 3d73 656c 662e    timedata=self.
-00024b70: 696e 6974 5f74 696d 650a 2020 2020 2020  init_time.      
-00024b80: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00024b90: 2020 2020 6966 2074 696d 657a 6f6e 6520      if timezone 
-00024ba0: 6973 204e 6f6e 653a 2074 696d 657a 6f6e  is None: timezon
-00024bb0: 653d 7365 6c66 2e74 696d 657a 6f6e 650a  e=self.timezone.
-00024bc0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00024bd0: 7369 6e73 7461 6e63 6528 7469 6d65 7a6f  sinstance(timezo
-00024be0: 6e65 2c73 7472 2920 616e 6420 7469 6d65  ne,str) and time
-00024bf0: 7a6f 6e65 3a0a 2020 2020 2020 2020 2020  zone:.          
-00024c00: 2020 2020 2020 496d 706f 7274 2827 696d        Import('im
-00024c10: 706f 7274 2070 7974 7a27 290a 2020 2020  port pytz').    
-00024c20: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-00024c30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024c40: 2020 2020 2074 696d 657a 6f6e 653d 7079       timezone=py
-00024c50: 747a 2e74 696d 657a 6f6e 6528 7469 6d65  tz.timezone(time
-00024c60: 7a6f 6e65 290a 2020 2020 2020 2020 2020  zone).          
-00024c70: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
-00024c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024c90: 2020 7072 696e 7466 2827 556e 6b6e 6f77    printf('Unknow
-00024ca0: 6e20 6375 7272 656e 7420 7469 6d65 7a6f  n current timezo
-00024cb0: 6e65 2028 7b7d 2927 2e66 6f72 6d61 7428  ne ({})'.format(
-00024cc0: 7469 6d65 7a6f 6e65 292c 6d6f 6465 3d27  timezone),mode='
-00024cd0: 6527 290a 2020 2020 2020 2020 2020 2020  e').            
-00024ce0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-00024cf0: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
-00024d00: 2020 2020 2074 696d 6564 6174 613d 7365       timedata=se
-00024d10: 6c66 2e44 6174 6574 696d 6528 292e 6e6f  lf.Datetime().no
-00024d20: 7728 7469 6d65 7a6f 6e65 290a 2020 2020  w(timezone).    
-00024d30: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00024d40: 2020 2020 2020 2020 2020 2020 2020 7469                ti
-00024d50: 6d65 6461 7461 3d73 656c 662e 4461 7465  medata=self.Date
-00024d60: 7469 6d65 2829 2e6e 6f77 2829 0a20 2020  time().now().   
-00024d70: 2020 2020 2069 6620 6d6f 6465 2069 6e20       if mode in 
-00024d80: 5b69 6e74 2c27 696e 7427 2c27 494e 5427  [int,'int','INT'
-00024d90: 2c27 7365 6327 5d3a 0a20 2020 2020 2020  ,'sec']:.       
-00024da0: 2020 2020 2072 6574 7572 6e20 696e 7428       return int(
-00024db0: 7469 6d65 6461 7461 2e73 7472 6674 696d  timedata.strftim
-00024dc0: 6528 2725 7327 2929 0a20 2020 2020 2020  e('%s')).       
-00024dd0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00024de0: 2020 2072 6574 7572 6e20 7469 6d65 6461     return timeda
-00024df0: 7461 0a0a 2020 2020 6465 6620 4f75 7428  ta..    def Out(
-00024e00: 7365 6c66 2c74 696d 656f 7574 5f73 6563  self,timeout_sec
-00024e10: 2c64 6566 6175 6c74 3d28 3234 2a33 3630  ,default=(24*360
-00024e20: 3029 293a 0a20 2020 2020 2020 2074 696d  0)):.        tim
-00024e30: 656f 7574 5f73 6563 3d49 6e74 2874 696d  eout_sec=Int(tim
-00024e40: 656f 7574 5f73 6563 2c64 6566 6175 6c74  eout_sec,default
-00024e50: 290a 2020 2020 2020 2020 6966 2074 696d  ).        if tim
-00024e60: 656f 7574 5f73 6563 203d 3d20 303a 0a20  eout_sec == 0:. 
-00024e70: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00024e80: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
-00024e90: 6966 2073 656c 662e 496e 7428 2920 2d20  if self.Int() - 
-00024ea0: 7365 6c66 2e69 6e69 745f 7365 6320 3e20  self.init_sec > 
-00024eb0: 2074 696d 656f 7574 5f73 6563 3a0a 2020   timeout_sec:.  
-00024ec0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00024ed0: 2054 7275 650a 2020 2020 2020 2020 7265   True.        re
-00024ee0: 7475 726e 2046 616c 7365 0a20 2020 2064  turn False.    d
-00024ef0: 6566 2046 6f72 6d61 7428 7365 6c66 2c74  ef Format(self,t
-00024f00: 666f 726d 6174 3d27 2573 272c 7265 6164  format='%s',read
-00024f10: 5f66 6f72 6d61 743d 2725 5327 2c74 696d  _format='%S',tim
-00024f20: 653d 275f 235f 2729 3a0a 2020 2020 2020  e='_#_'):.      
-00024f30: 2020 6966 2049 734e 6f6e 6528 7469 6d65    if IsNone(time
-00024f40: 2c63 686b 5f76 616c 3d5b 275f 235f 275d  ,chk_val=['_#_']
-00024f50: 2c63 686b 5f6f 6e6c 793d 5472 7565 293a  ,chk_only=True):
-00024f60: 2074 696d 653d 7365 6c66 2e73 7263 0a20   time=self.src. 
-00024f70: 2020 2020 2020 2069 6620 4973 4e6f 6e65         if IsNone
-00024f80: 2874 696d 652c 6368 6b5f 7661 6c3d 5b4e  (time,chk_val=[N
-00024f90: 6f6e 652c 2727 2c30 2c27 3027 5d29 3a0a  one,'',0,'0']):.
-00024fa0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00024fb0: 726e 2073 656c 662e 4e6f 7728 292e 7374  rn self.Now().st
-00024fc0: 7266 7469 6d65 2874 666f 726d 6174 290a  rftime(tformat).
-00024fd0: 2020 2020 2020 2020 656c 6966 2072 6561          elif rea
-00024fe0: 645f 666f 726d 6174 203d 3d20 2725 5327  d_format == '%S'
-00024ff0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00025000: 2069 7369 6e73 7461 6e63 6528 7469 6d65   isinstance(time
-00025010: 2c69 6e74 2920 6f72 2028 6973 696e 7374  ,int) or (isinst
-00025020: 616e 6365 2874 696d 652c 7374 7229 2061  ance(time,str) a
-00025030: 6e64 2074 696d 652e 6973 6469 6769 7428  nd time.isdigit(
-00025040: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-00025050: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00025060: 4461 7465 7469 6d65 2829 2e66 726f 6d74  Datetime().fromt
-00025070: 696d 6573 7461 6d70 2869 6e74 2874 696d  imestamp(int(tim
-00025080: 6529 292e 7374 7266 7469 6d65 2874 666f  e)).strftime(tfo
-00025090: 726d 6174 290a 2020 2020 2020 2020 656c  rmat).        el
-000250a0: 6966 2069 7369 6e73 7461 6e63 6528 7469  if isinstance(ti
-000250b0: 6d65 2c73 7472 293a 0a20 2020 2020 2020  me,str):.       
-000250c0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000250d0: 2e44 6174 6574 696d 6528 292e 7374 7270  .Datetime().strp
-000250e0: 7469 6d65 2874 696d 652c 7265 6164 5f66  time(time,read_f
-000250f0: 6f72 6d61 7429 2e73 7472 6674 696d 6528  ormat).strftime(
-00025100: 7466 6f72 6d61 7429 0a20 2020 2020 2020  tformat).       
-00025110: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
-00025120: 2874 696d 652c 7365 6c66 2e44 6174 6574  (time,self.Datet
-00025130: 696d 6528 2929 3a0a 2020 2020 2020 2020  ime()):.        
-00025140: 2020 2020 7265 7475 726e 2074 696d 652e      return time.
-00025150: 7374 7266 7469 6d65 2874 666f 726d 6174  strftime(tformat
-00025160: 290a 0a20 2020 2064 6566 2049 6e69 7428  )..    def Init(
-00025170: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
-00025180: 6574 7572 6e20 7365 6c66 2e69 6e69 745f  eturn self.init_
-00025190: 7365 630a 0a20 2020 2064 6566 2054 696d  sec..    def Tim
-000251a0: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
-000251b0: 2072 6574 7572 6e20 7469 6d65 2e74 696d   return time.tim
-000251c0: 6528 290a 0a20 2020 2064 6566 2044 6174  e()..    def Dat
-000251d0: 6574 696d 6528 7365 6c66 293a 0a20 2020  etime(self):.   
-000251e0: 2020 2020 2072 6574 7572 6e20 6461 7465       return date
-000251f0: 7469 6d65 2e64 6174 6574 696d 650a 0a20  time.datetime.. 
-00025200: 2020 2064 6566 2050 7269 6e74 2873 656c     def Print(sel
-00025210: 662c 7469 6d65 6461 7461 3d4e 6f6e 652c  f,timedata=None,
-00025220: 7469 6d65 5f66 6f72 6d61 743d 2725 592d  time_format='%Y-
-00025230: 256d 2d25 6420 2548 3a25 4d3a 2553 2729  %m-%d %H:%M:%S')
-00025240: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
-00025250: 2074 696d 6564 6174 613a 2074 696d 6564   timedata: timed
-00025260: 6174 613d 7365 6c66 2e69 6e69 745f 7469  ata=self.init_ti
-00025270: 6d65 0a20 2020 2020 2020 2069 6620 6973  me.        if is
-00025280: 696e 7374 616e 6365 2874 696d 6564 6174  instance(timedat
-00025290: 612c 7365 6c66 2e44 6174 6574 696d 6528  a,self.Datetime(
-000252a0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-000252b0: 7265 7475 726e 2074 696d 6564 6174 612e  return timedata.
-000252c0: 7374 7266 7469 6d65 2827 2559 2d25 6d2d  strftime('%Y-%m-
-000252d0: 2564 2025 483a 254d 3a25 5327 290a 2020  %d %H:%M:%S').  
-000252e0: 2020 2020 2020 7265 7475 726e 2027 270a        return ''.
-000252f0: 0a20 2020 2064 6566 2052 6561 6453 7472  .    def ReadStr
-00025300: 2873 656c 662c 7469 6d65 6461 7461 2c74  (self,timedata,t
-00025310: 696d 655f 666f 726d 6174 3d27 2559 2d25  ime_format='%Y-%
-00025320: 6d2d 2564 2025 483a 254d 3a25 5327 293a  m-%d %H:%M:%S'):
-00025330: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-00025340: 7374 616e 6365 2874 696d 6564 6174 612c  stance(timedata,
-00025350: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
-00025360: 2020 7265 7475 726e 2073 656c 662e 4461    return self.Da
-00025370: 7465 7469 6d65 2829 2e73 7472 7074 696d  tetime().strptim
-00025380: 6528 7469 6d65 6461 7461 2c74 696d 655f  e(timedata,time_
-00025390: 666f 726d 6174 290a 2020 2020 2020 2020  format).        
-000253a0: 7265 7475 726e 2027 270a 0a20 2020 2064  return ''..    d
-000253b0: 6566 2054 696d 655a 6f6e 6528 7365 6c66  ef TimeZone(self
-000253c0: 2c73 6574 7a6f 6e65 3d4e 6f6e 652c 7761  ,setzone=None,wa
-000253d0: 6e74 3d4e 6f6e 652c 7469 6d65 6461 7461  nt=None,timedata
-000253e0: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-000253f0: 2727 2773 6574 2074 696d 657a 6f6e 6520  '''set timezone 
-00025400: 6174 2074 696d 6564 6174 6120 6f72 2063  at timedata or c
-00025410: 6f6e 7665 7274 2074 6f20 7761 6e74 2074  onvert to want t
-00025420: 696d 657a 6f6e 6527 2727 0a20 2020 2020  imezone'''.     
-00025430: 2020 2069 6620 6e6f 7420 7469 6d65 6461     if not timeda
-00025440: 7461 3a20 7469 6d65 6461 7461 3d73 656c  ta: timedata=sel
-00025450: 662e 696e 6974 5f74 696d 650a 2020 2020  f.init_time.    
-00025460: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00025470: 6528 7469 6d65 6461 7461 2c73 656c 662e  e(timedata,self.
-00025480: 4461 7465 7469 6d65 2829 293a 0a20 2020  Datetime()):.   
-00025490: 2020 2020 2020 2020 2049 6d70 6f72 7428           Import(
-000254a0: 2769 6d70 6f72 7420 7079 747a 2729 0a20  'import pytz'). 
-000254b0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-000254c0: 696e 7374 616e 6365 2873 6574 7a6f 6e65  instance(setzone
-000254d0: 2c73 7472 2920 616e 6420 7365 747a 6f6e  ,str) and setzon
-000254e0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000254f0: 2020 2069 6620 7365 747a 6f6e 6520 696e     if setzone in
-00025500: 205b 276c 6f63 616c 272c 276c 6f63 616c   ['local','local
-00025510: 7469 6d65 272c 276c 6f63 616c 7a6f 6e65  time','localzone
-00025520: 272c 276c 6f63 616c 7469 6d65 7a6f 6e65  ','localtimezone
-00025530: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-00025540: 2020 2020 2020 2020 7365 747a 6f6e 653d          setzone=
-00025550: 4e6f 6e65 2023 2073 6574 2074 6f20 6c6f  None # set to lo
-00025560: 6361 6c20 7469 6d65 7a6f 6e65 0a20 2020  cal timezone.   
-00025570: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00025580: 6620 7365 747a 6f6e 6520 696e 205b 2775  f setzone in ['u
-00025590: 7463 272c 2755 5443 275d 3a0a 2020 2020  tc','UTC']:.    
-000255a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000255b0: 7365 747a 6f6e 653d 7079 747a 2e75 7463  setzone=pytz.utc
-000255c0: 2020 2320 7365 7420 746f 2055 5443 2074    # set to UTC t
-000255d0: 696d 657a 6f6e 650a 2020 2020 2020 2020  imezone.        
-000255e0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000255f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025600: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-00025610: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00025620: 6574 7a6f 6e65 3d70 7974 7a2e 7469 6d65  etzone=pytz.time
-00025630: 7a6f 6e65 2873 6574 7a6f 6e65 2920 2320  zone(setzone) # 
-00025640: 7365 7420 746f 2073 6574 7a6f 6e65 0a20  set to setzone. 
-00025650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025660: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-00025670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025680: 2020 2070 7269 6e74 6628 2755 6e6b 6e6f     printf('Unkno
-00025690: 776e 2063 7572 7265 6e74 2074 696d 657a  wn current timez
-000256a0: 6f6e 6520 287b 7d29 272e 666f 726d 6174  one ({})'.format
-000256b0: 2873 6574 7a6f 6e65 292c 6d6f 6465 3d27  (setzone),mode='
-000256c0: 6527 290a 2020 2020 2020 2020 2020 2020  e').            
-000256d0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000256e0: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
-000256f0: 2020 2020 2069 6620 7365 747a 6f6e 6520       if setzone 
-00025700: 213d 2074 696d 6564 6174 612e 747a 696e  != timedata.tzin
-00025710: 666f 3a20 2320 6966 2064 6966 6665 7265  fo: # if differe
-00025720: 6e74 2074 696d 657a 6f6e 6520 6265 7477  nt timezone betw
-00025730: 6565 6e20 736f 7572 6365 2074 696d 6520  een source time 
-00025740: 616e 6420 7365 747a 6f6e 650a 2020 2020  and setzone.    
-00025750: 2020 2020 2020 2020 2020 2020 7469 6d65              time
-00025760: 6461 7461 3d74 696d 6564 6174 612e 7265  data=timedata.re
-00025770: 706c 6163 6528 747a 696e 666f 3d73 6574  place(tzinfo=set
-00025780: 7a6f 6e65 2920 2320 7365 7420 746f 2073  zone) # set to s
-00025790: 6574 7a6f 6e65 0a20 2020 2020 2020 2020  etzone.         
-000257a0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-000257b0: 2877 616e 742c 7374 7229 2061 6e64 2077  (want,str) and w
-000257c0: 616e 743a 0a20 2020 2020 2020 2020 2020  ant:.           
-000257d0: 2020 2020 2069 6620 7761 6e74 2069 6e20       if want in 
-000257e0: 5b27 6c6f 6361 6c27 2c27 6c6f 6361 6c74  ['local','localt
-000257f0: 696d 6527 2c27 6c6f 6361 6c7a 6f6e 6527  ime','localzone'
-00025800: 2c27 6c6f 6361 6c74 696d 657a 6f6e 6527  ,'localtimezone'
-00025810: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-00025820: 2020 2020 2020 2077 616e 743d 4e6f 6e65         want=None
-00025830: 2023 2063 6f6e 7665 7274 2074 6f20 6c6f   # convert to lo
-00025840: 6361 6c20 7469 6d65 7a6f 6e65 0a20 2020  cal timezone.   
-00025850: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00025860: 6620 7761 6e74 2069 6e20 5b27 7574 6327  f want in ['utc'
-00025870: 2c27 5554 4327 5d3a 0a20 2020 2020 2020  ,'UTC']:.       
-00025880: 2020 2020 2020 2020 2020 2020 2077 616e               wan
-00025890: 743d 7079 747a 2e75 7463 2023 2063 6f6e  t=pytz.utc # con
-000258a0: 7665 7274 2020 746f 2075 7463 2074 696d  vert  to utc tim
-000258b0: 657a 6f6e 650a 2020 2020 2020 2020 2020  ezone.          
-000258c0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-000258d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000258e0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-000258f0: 2020 2020 2020 2020 2020 2020 2077 616e               wan
-00025900: 743d 7079 747a 2e74 696d 657a 6f6e 6528  t=pytz.timezone(
-00025910: 7761 6e74 2920 2320 636f 6e76 6572 7420  want) # convert 
-00025920: 746f 2077 616e 7420 7469 6d65 7a6f 6e65  to want timezone
-00025930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025940: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
-00025950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025960: 2020 2020 2070 7269 6e74 6628 2755 6e6b       printf('Unk
-00025970: 6e6f 776e 2063 7572 7265 6e74 2074 696d  nown current tim
-00025980: 657a 6f6e 6520 287b 7d29 272e 666f 726d  ezone ({})'.form
-00025990: 6174 2877 616e 7429 2c6d 6f64 653d 2765  at(want),mode='e
-000259a0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-000259b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000259c0: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
-000259d0: 2020 2020 2020 2020 6966 2073 6574 7a6f          if setzo
-000259e0: 6e65 2021 3d20 7761 6e74 3a20 2320 6966  ne != want: # if
-000259f0: 2064 6966 6665 7265 6e74 2074 696d 657a   different timez
-00025a00: 6f6e 6520 6265 7477 6565 6e20 736f 7572  one between sour
-00025a10: 6365 2074 696d 6520 616e 6420 7761 6e74  ce time and want
-00025a20: 207a 6f6e 650a 2020 2020 2020 2020 2020   zone.          
-00025a30: 2020 2020 2020 2020 2020 6c6f 6361 6c74            localt
-00025a40: 696d 653d 7469 6d65 6461 7461 2e61 7374  ime=timedata.ast
-00025a50: 696d 657a 6f6e 6528 747a 3d77 616e 7429  imezone(tz=want)
-00025a60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025a70: 2020 2020 2072 6574 7572 6e20 6c6f 6361       return loca
-00025a80: 6c74 696d 650a 2020 2020 2020 2020 2020  ltime.          
-00025a90: 2020 7265 7475 726e 2074 696d 6564 6174    return timedat
-00025aa0: 610a 2020 2020 2020 2020 7265 7475 726e  a.        return
-00025ab0: 2046 616c 7365 0a0a 2020 2020 6465 6620   False..    def 
-00025ac0: 5469 6d65 5a6f 6e65 4e61 6d65 2873 656c  TimeZoneName(sel
-00025ad0: 662c 7469 6d65 6461 7461 3d4e 6f6e 6529  f,timedata=None)
-00025ae0: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
-00025af0: 2074 696d 6564 6174 613a 2074 696d 6564   timedata: timed
-00025b00: 6174 613d 7365 6c66 2e69 6e69 745f 7469  ata=self.init_ti
-00025b10: 6d65 0a20 2020 2020 2020 2069 6620 6973  me.        if is
-00025b20: 696e 7374 616e 6365 2874 696d 6564 6174  instance(timedat
-00025b30: 612c 7365 6c66 2e44 6174 6574 696d 6528  a,self.Datetime(
-00025b40: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-00025b50: 747a 6e61 6d65 3d74 696d 6564 6174 612e  tzname=timedata.
-00025b60: 747a 6e61 6d65 2829 0a20 2020 2020 2020  tzname().       
-00025b70: 2020 2020 2072 6574 7572 6e20 747a 6e61       return tzna
-00025b80: 6d65 2069 6620 747a 6e61 6d65 2065 6c73  me if tzname els
-00025b90: 6520 7469 6d65 6461 7461 2e61 7374 696d  e timedata.astim
-00025ba0: 657a 6f6e 6528 292e 747a 6e61 6d65 2829  ezone().tzname()
-00025bb0: 0a0a 2020 2020 6465 6620 5574 6332 4c6f  ..    def Utc2Lo
-00025bc0: 6361 6c28 7365 6c66 2c74 696d 655f 666f  cal(self,time_fo
-00025bd0: 726d 6174 3d27 2559 2d25 6d2d 2564 2025  rmat='%Y-%m-%d %
-00025be0: 483a 254d 3a25 5327 2c6d 6f64 653d 2773  H:%M:%S',mode='s
-00025bf0: 7472 272c 7469 6d65 6461 7461 3d4e 6f6e  tr',timedata=Non
-00025c00: 6529 3a0a 2020 2020 2020 2020 6966 2069  e):.        if i
-00025c10: 7369 6e73 7461 6e63 6528 7469 6d65 6461  sinstance(timeda
-00025c20: 7461 2c73 7472 293a 0a20 2020 2020 2020  ta,str):.       
-00025c30: 2020 2020 2074 696d 6564 6174 613d 7365       timedata=se
-00025c40: 6c66 2e52 6561 6453 7472 2874 696d 6564  lf.ReadStr(timed
-00025c50: 6174 612c 7469 6d65 5f66 6f72 6d61 743d  ata,time_format=
-00025c60: 7469 6d65 5f66 6f72 6d61 7429 0a20 2020  time_format).   
-00025c70: 2020 2020 2065 6c69 6620 7469 6d65 6461       elif timeda
-00025c80: 7461 2069 7320 4e6f 6e65 3a0a 2020 2020  ta is None:.    
-00025c90: 2020 2020 2020 2020 7469 6d65 6461 7461          timedata
-00025ca0: 3d73 656c 662e 696e 6974 5f74 696d 650a  =self.init_time.
-00025cb0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00025cc0: 7461 6e63 6528 7469 6d65 6461 7461 2c73  tance(timedata,s
-00025cd0: 656c 662e 4461 7465 7469 6d65 2829 293a  elf.Datetime()):
-00025ce0: 0a20 2020 2020 2020 2020 2020 2074 696d  .            tim
-00025cf0: 6564 6174 613d 7365 6c66 2e54 696d 655a  edata=self.TimeZ
-00025d00: 6f6e 6528 7365 747a 6f6e 653d 2755 5443  one(setzone='UTC
-00025d10: 272c 7761 6e74 3d27 6c6f 6361 6c27 2c74  ',want='local',t
-00025d20: 696d 6564 6174 613d 7469 6d65 6461 7461  imedata=timedata
-00025d30: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-00025d40: 7475 726e 2073 656c 662e 5072 696e 7428  turn self.Print(
-00025d50: 7469 6d65 6461 7461 3d74 696d 6564 6174  timedata=timedat
-00025d60: 6129 2069 6620 6d6f 6465 3d3d 2773 7472  a) if mode=='str
-00025d70: 2720 656c 7365 2074 696d 6564 6174 610a  ' else timedata.
-00025d80: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-00025d90: 616c 7365 0a0a 6465 6620 7273 6865 6c6c  alse..def rshell
-00025da0: 2863 6d64 2c64 6267 3d46 616c 7365 2c74  (cmd,dbg=False,t
-00025db0: 696d 656f 7574 3d30 2c61 6e73 693d 4661  imeout=0,ansi=Fa
-00025dc0: 6c73 652c 696e 7465 7261 6374 6976 653d  lse,interactive=
-00025dd0: 4661 6c73 652c 6578 6563 7574 6162 6c65  False,executable
-00025de0: 3d27 2f62 696e 2f62 6173 6827 2c70 6174  ='/bin/bash',pat
-00025df0: 683d 4e6f 6e65 2c70 726f 6772 6573 733d  h=None,progress=
-00025e00: 4661 6c73 652c 7072 6f67 7265 7373 5f70  False,progress_p
-00025e10: 7265 5f6e 6577 5f6c 696e 653d 4661 6c73  re_new_line=Fals
-00025e20: 652c 7072 6f67 7265 7373 5f70 6f73 745f  e,progress_post_
-00025e30: 6e65 775f 6c69 6e65 3d54 7275 652c 6c6f  new_line=True,lo
-00025e40: 673d 4e6f 6e65 2c65 6e76 3d7b 7d2c 6675  g=None,env={},fu
-00025e50: 6c6c 5f70 6174 683d 4e6f 6e65 2c72 656d  ll_path=None,rem
-00025e60: 6f76 655f 7061 7468 3d4e 6f6e 652c 7265  ove_path=None,re
-00025e70: 6d6f 7665 5f61 6c6c 5f70 6174 683d 4e6f  move_all_path=No
-00025e80: 6e65 2c64 6566 6175 6c74 5f74 696d 656f  ne,default_timeo
-00025e90: 7574 3d33 3630 302c 656e 765f 6f75 743d  ut=3600,env_out=
-00025ea0: 4661 6c73 652c 6364 3d46 616c 7365 2c6b  False,cd=False,k
-00025eb0: 6565 705f 6377 643d 4661 6c73 652c 6465  eep_cwd=False,de
-00025ec0: 636f 6465 3d4e 6f6e 6529 3a0a 2020 2020  code=None):.    
-00025ed0: 2727 270a 2020 2020 496e 7465 7261 6374  '''.    Interact
-00025ee0: 6976 6520 7368 656c 6c0a 2020 2020 7061  ive shell.    pa
-00025ef0: 7468 3a20 6170 7065 6e64 2074 6865 2070  th: append the p
-00025f00: 6174 6820 746f 2065 7869 7374 696e 6720  ath to existing 
-00025f10: 7379 7374 656d 2070 6174 680a 2020 2020  system path.    
-00025f20: 6675 6c6c 5f70 6174 683a 2065 7863 6861  full_path: excha
-00025f30: 6e67 6520 7468 6520 6675 6c6c 5f70 6174  nge the full_pat
-00025f40: 6820 746f 2073 7973 7465 6d20 7061 7468  h to system path
-00025f50: 0a20 2020 2072 656d 6f76 655f 7061 7468  .    remove_path
-00025f60: 3a20 7265 6d6f 7665 2066 726f 6e74 2072  : remove front r
-00025f70: 656d 6f76 655f 7061 7468 2061 7420 6675  emove_path at fu
-00025f80: 6c6c 5f70 6174 680a 2020 2020 7265 6d6f  ll_path.    remo
-00025f90: 7665 5f61 6c6c 5f70 6174 683a 2072 656d  ve_all_path: rem
-00025fa0: 6f76 6520 7265 6d6f 7665 5f61 6c6c 5f70  ove remove_all_p
-00025fb0: 6174 6820 696e 2066 756c 6c5f 7061 7468  ath in full_path
-00025fc0: 0a20 2020 2064 6563 6f64 653a 2063 6861  .    decode: cha
-00025fd0: 7261 6374 6572 2064 6563 6f64 696e 6720  racter decoding 
-00025fe0: 2864 6566 6175 6c74 203a 2049 534f 2d38  (default : ISO-8
-00025ff0: 3835 392d 3129 2c20 6974 2063 6861 6e67  859-1), it chang
-00026000: 6564 2074 6f20 5374 7228 2920 6465 6661  ed to Str() defa
-00026010: 756c 740a 2020 2020 2727 270a 2020 2020  ult.    '''.    
-00026020: 2320 4f53 2065 6e76 6972 6f6e 6d65 6e74  # OS environment
-00026030: 730a 2020 2020 6f73 5f65 6e76 3d64 6963  s.    os_env=dic
-00026040: 7428 6f73 2e65 6e76 6972 6f6e 290a 2020  t(os.environ).  
-00026050: 2020 6966 2065 6e76 2061 6e64 2069 7369    if env and isi
-00026060: 6e73 7461 6e63 6528 656e 762c 6469 6374  nstance(env,dict
-00026070: 293a 0a20 2020 2020 2020 2066 6f72 2069  ):.        for i
-00026080: 6920 696e 2065 6e76 3a0a 2020 2020 2020  i in env:.      
-00026090: 2020 2020 2020 6966 2069 6920 696e 206f        if ii in o
-000260a0: 735f 656e 763a 0a20 2020 2020 2020 2020  s_env:.         
-000260b0: 2020 2020 2020 206f 735f 656e 765b 6969         os_env[ii
-000260c0: 5d3d 656e 765b 6969 5d0a 0a20 2020 2064  ]=env[ii]..    d
-000260d0: 6566 2063 6d64 5f66 6f72 6d28 636d 6429  ef cmd_form(cmd)
-000260e0: 3a0a 2020 2020 2020 2020 636d 645f 613d  :.        cmd_a=
-000260f0: 636d 642e 7370 6c69 7428 290a 2020 2020  cmd.split().    
-00026100: 2020 2020 636d 645f 6669 6c65 3d63 6d64      cmd_file=cmd
-00026110: 5f61 5b30 5d0a 2020 2020 2020 2020 6966  _a[0].        if
-00026120: 2063 6d64 5f66 696c 655b 305d 2021 3d20   cmd_file[0] != 
-00026130: 272f 2720 616e 6420 636d 645f 6669 6c65  '/' and cmd_file
-00026140: 203d 3d20 6f73 2e70 6174 682e 6261 7365   == os.path.base
-00026150: 6e61 6d65 2863 6d64 5f66 696c 6529 2061  name(cmd_file) a
-00026160: 6e64 206f 732e 7061 7468 2e69 7366 696c  nd os.path.isfil
-00026170: 6528 636d 645f 6669 6c65 293a 0a20 2020  e(cmd_file):.   
-00026180: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00026190: 272e 2f27 2b63 6d64 0a20 2020 2020 2020  './'+cmd.       
-000261a0: 2072 6574 7572 6e20 636d 640a 0a20 2020   return cmd..   
-000261b0: 2064 6566 2070 7072 6f67 2873 746f 702c   def pprog(stop,
-000261c0: 7072 6f67 7265 7373 5f70 7265 5f6e 6577  progress_pre_new
-000261d0: 5f6c 696e 653d 4661 6c73 652c 7072 6f67  _line=False,prog
-000261e0: 7265 7373 5f70 6f73 745f 6e65 775f 6c69  ress_post_new_li
-000261f0: 6e65 3d54 7275 652c 6c6f 673d 4e6f 6e65  ne=True,log=None
-00026200: 2c70 726f 6772 6573 735f 696e 7465 7276  ,progress_interv
-00026210: 616c 3d35 293a 0a20 2020 2020 2020 2066  al=5):.        f
-00026220: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
-00026230: 7072 6f67 7265 7373 5f69 6e74 6572 7661  progress_interva
-00026240: 6c2a 3130 293a 0a20 2020 2020 2020 2020  l*10):.         
-00026250: 2020 2074 696d 652e 736c 6565 7028 302e     time.sleep(0.
-00026260: 3129 0a20 2020 2020 2020 2020 2020 2069  1).            i
-00026270: 6620 7374 6f70 2829 3a0a 2020 2020 2020  f stop():.      
-00026280: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00026290: 0a20 2020 2020 2020 206c 6f63 616c 5f70  .        local_p
-000262a0: 7269 6e74 6564 3d46 616c 7365 0a23 2020  rinted=False.#  
-000262b0: 2020 2020 2020 6966 2070 726f 6772 6573        if progres
-000262c0: 735f 7072 655f 6e65 775f 6c69 6e65 3a0a  s_pre_new_line:.
-000262d0: 2320 2020 2020 2020 2020 2020 2070 7269  #            pri
-000262e0: 6e74 6628 2727 2c69 676e 6f72 655f 656d  ntf('',ignore_em
-000262f0: 7074 793d 4661 6c73 652c 7374 6172 745f  pty=False,start_
-00026300: 6e65 776c 696e 653d 5472 7565 2c6c 6f67  newline=True,log
-00026310: 3d6c 6f67 2c65 6e64 3d27 272c 6c6f 675f  =log,end='',log_
-00026320: 6c65 7665 6c3d 3129 0a20 2020 2020 2020  level=1).       
-00026330: 2069 3d30 0a20 2020 2020 2020 2077 6869   i=0.        whi
-00026340: 6c65 2054 7275 653a 0a20 2020 2020 2020  le True:.       
-00026350: 2020 2020 2069 6620 7374 6f70 2829 3a20       if stop(): 
-00026360: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
-00026370: 2020 6966 2069 203e 2070 726f 6772 6573    if i > progres
-00026380: 735f 696e 7465 7276 616c 2a31 303a 0a20  s_interval*10:. 
-00026390: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000263a0: 3d30 0a20 2020 2020 2020 2020 2020 2020  =0.             
-000263b0: 2020 2070 7269 6e74 6628 273e 272c 6469     printf('>',di
-000263c0: 7265 6374 3d54 7275 652c 6c6f 673d 6c6f  rect=True,log=lo
-000263d0: 672c 6c6f 675f 6c65 7665 6c3d 3129 0a20  g,log_level=1). 
-000263e0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-000263f0: 6f63 616c 5f70 7269 6e74 6564 3d54 7275  ocal_printed=Tru
-00026400: 650a 2020 2020 2020 2020 2020 2020 692b  e.            i+
-00026410: 3d31 0a20 2020 2020 2020 2020 2020 2074  =1.            t
-00026420: 696d 652e 736c 6565 7028 302e 3129 0a20  ime.sleep(0.1). 
-00026430: 2020 2020 2020 2069 6620 7072 6f67 7265         if progre
-00026440: 7373 5f70 6f73 745f 6e65 775f 6c69 6e65  ss_post_new_line
-00026450: 2061 6e64 206c 6f63 616c 5f70 7269 6e74   and local_print
-00026460: 6564 3a0a 2020 2020 2020 2020 2020 2020  ed:.            
-00026470: 7072 696e 7466 2827 272c 6967 6e6f 7265  printf('',ignore
-00026480: 5f65 6d70 7479 3d46 616c 7365 2c63 616c  _empty=False,cal
-00026490: 6c65 725f 7061 7265 6e74 3d31 2c6e 6f5f  ler_parent=1,no_
-000264a0: 696e 7472 6f3d 5472 7565 2c6c 6f67 3d6c  intro=True,log=l
-000264b0: 6f67 2c6c 6f67 5f6c 6576 656c 3d31 290a  og,log_level=1).
-000264c0: 2020 2020 7374 6172 745f 7469 6d65 3d54      start_time=T
-000264d0: 494d 4528 290a 2020 2020 6966 206e 6f74  IME().    if not
-000264e0: 2054 7970 6528 636d 642c 2773 7472 272c   Type(cmd,'str',
-000264f0: 6461 7461 3d54 7275 6529 3a0a 2020 2020  data=True):.    
-00026500: 2020 2020 7265 7475 726e 202d 312c 2777      return -1,'w
-00026510: 726f 6e67 2063 6f6d 6d61 6e64 2069 6e66  rong command inf
-00026520: 6f72 6d61 7469 6f6e 203a 7b30 7d27 2e66  ormation :{0}'.f
-00026530: 6f72 6d61 7428 636d 6429 2c27 272c 7374  ormat(cmd),'',st
-00026540: 6172 745f 7469 6d65 2e49 6e69 7428 292c  art_time.Init(),
-00026550: 7374 6172 745f 7469 6d65 2e49 6e69 7428  start_time.Init(
-00026560: 292c 7374 6172 745f 7469 6d65 2e4e 6f77  ),start_time.Now
-00026570: 2869 6e74 292c 636d 642c 7061 7468 0a0a  (int),cmd,path..
-00026580: 2020 2020 616e 7369 5f65 7363 6170 6520      ansi_escape 
-00026590: 3d20 7265 2e63 6f6d 7069 6c65 2872 275c  = re.compile(r'\
-000265a0: 7831 425c 5b5b 302d 3f5d 2a5b 202d 2f5d  x1B\[[0-?]*[ -/]
-000265b0: 2a5b 402d 7e5d 2729 0a20 2020 2050 6f70  *[@-~]').    Pop
-000265c0: 656e 3d73 7562 7072 6f63 6573 732e 506f  en=subprocess.Po
-000265d0: 7065 6e0a 2020 2020 5049 5045 3d73 7562  pen.    PIPE=sub
-000265e0: 7072 6f63 6573 732e 5049 5045 0a20 2020  process.PIPE.   
-000265f0: 2053 5444 4f55 543d 7375 6270 726f 6365   STDOUT=subproce
-00026600: 7373 2e50 4950 450a 2020 2020 6f75 742c  ss.PIPE.    out,
-00026610: 6572 723d 2727 2c27 270a 2020 2020 6578  err='',''.    ex
-00026620: 655f 6e61 6d65 3d6f 732e 7061 7468 2e62  e_name=os.path.b
-00026630: 6173 656e 616d 6528 6578 6563 7574 6162  asename(executab
-00026640: 6c65 2920 6966 2065 7865 6375 7461 626c  le) if executabl
-00026650: 6520 656c 7365 206f 732e 7061 7468 2e62  e else os.path.b
-00026660: 6173 656e 616d 6528 6f73 5f65 6e76 2e67  asename(os_env.g
-00026670: 6574 2827 5348 454c 4c27 2c27 6261 7368  et('SHELL','bash
-00026680: 2729 290a 2020 2020 6966 2064 6267 3a0a  ')).    if dbg:.
-00026690: 2020 2020 2020 2020 6966 2065 7865 635f          if exec_
-000266a0: 6e61 6d65 2069 6e20 5b27 6261 7368 272c  name in ['bash',
-000266b0: 2773 6827 5d3a 0a20 2020 2020 2020 2020  'sh']:.         
-000266c0: 2020 2063 6d64 3d27 7365 7420 2d78 5c6e     cmd='set -x\n
-000266d0: 2720 2b20 636d 640a 2020 2020 6966 2069  ' + cmd.    if i
-000266e0: 7369 6e73 7461 6e63 6528 7265 6d6f 7665  sinstance(remove
-000266f0: 5f70 6174 682c 7374 7229 2061 6e64 206c  _path,str) and l
-00026700: 656e 2872 656d 6f76 655f 7061 7468 2920  en(remove_path) 
-00026710: 3e20 3020 3a0a 2020 2020 2020 2020 6966  > 0 :.        if
-00026720: 206e 6f74 2066 756c 6c5f 7061 7468 3a20   not full_path: 
-00026730: 6675 6c6c 5f70 6174 683d 6f73 2e65 6e76  full_path=os.env
-00026740: 6972 6f6e 5b27 5041 5448 275d 0a20 2020  iron['PATH'].   
-00026750: 2020 2020 2066 756c 6c5f 7061 7468 5f61       full_path_a
-00026760: 3d66 756c 6c5f 7061 7468 2e73 706c 6974  =full_path.split
-00026770: 2827 3a27 290a 2020 2020 2020 2020 666f  (':').        fo
-00026780: 7220 6969 2069 6e20 7265 6d6f 7665 5f70  r ii in remove_p
-00026790: 6174 682e 7370 6c69 7428 273a 2729 3a0a  ath.split(':'):.
-000267a0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-000267b0: 6920 696e 2066 756c 6c5f 7061 7468 5f61  i in full_path_a
-000267c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000267d0: 2020 6675 6c6c 5f70 6174 685f 612e 7265    full_path_a.re
-000267e0: 6d6f 7665 2869 6929 0a20 2020 2020 2020  move(ii).       
-000267f0: 2066 756c 6c5f 7061 7468 3d27 3a27 2e6a   full_path=':'.j
-00026800: 6f69 6e28 6675 6c6c 5f70 6174 685f 6129  oin(full_path_a)
-00026810: 0a20 2020 2065 6c69 6620 6973 696e 7374  .    elif isinst
-00026820: 616e 6365 2872 656d 6f76 655f 616c 6c5f  ance(remove_all_
-00026830: 7061 7468 2c73 7472 2920 616e 6420 6c65  path,str) and le
-00026840: 6e28 7265 6d6f 7665 5f61 6c6c 5f70 6174  n(remove_all_pat
-00026850: 6829 203e 2030 203a 0a20 2020 2020 2020  h) > 0 :.       
-00026860: 2069 6620 6e6f 7420 6675 6c6c 5f70 6174   if not full_pat
-00026870: 683a 2066 756c 6c5f 7061 7468 3d6f 732e  h: full_path=os.
-00026880: 656e 7669 726f 6e5b 2750 4154 4827 5d0a  environ['PATH'].
-00026890: 2020 2020 2020 2020 6675 6c6c 5f70 6174          full_pat
-000268a0: 685f 613d 6675 6c6c 5f70 6174 682e 7370  h_a=full_path.sp
-000268b0: 6c69 7428 273a 2729 0a20 2020 2020 2020  lit(':').       
-000268c0: 2066 6f72 2069 6920 696e 2072 656d 6f76   for ii in remov
-000268d0: 655f 616c 6c5f 7061 7468 2e73 706c 6974  e_all_path.split
-000268e0: 2827 3a27 293a 0a20 2020 2020 2020 2020  (':'):.         
-000268f0: 2020 2066 756c 6c5f 7061 7468 5f61 3d5b     full_path_a=[
-00026900: 6920 666f 7220 6920 696e 2066 756c 6c5f  i for i in full_
-00026910: 7061 7468 5f61 2069 6620 6920 213d 2069  path_a if i != i
-00026920: 695d 0a20 2020 2020 2020 2066 756c 6c5f  i].        full_
-00026930: 7061 7468 3d27 3a27 2e6a 6f69 6e28 6675  path=':'.join(fu
-00026940: 6c6c 5f70 6174 685f 290a 2020 2020 6966  ll_path_).    if
-00026950: 2065 7865 6375 7461 626c 653a 0a20 2020   executable:.   
-00026960: 2020 2020 2069 6620 6e6f 7420 6f73 2e70       if not os.p
-00026970: 6174 682e 6973 6669 6c65 2865 7865 6375  ath.isfile(execu
-00026980: 7461 626c 6529 3a0a 2020 2020 2020 2020  table):.        
-00026990: 2020 2020 6578 6563 7574 6162 6c65 3d66      executable=f
-000269a0: 696e 645f 6578 6563 7574 6162 6c65 2865  ind_executable(e
-000269b0: 7865 5f6e 616d 6529 0a20 2020 2023 2323  xe_name).    ###
-000269c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000269d0: 2323 2323 2323 2323 2323 2323 2323 0a20  ##############. 
-000269e0: 2020 2023 2052 756e 2043 6f6d 6d61 6e64     # Run Command
-000269f0: 0a20 2020 2023 2323 2323 2323 2323 2323  .    ###########
-00026a00: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00026a10: 2323 2323 2323 0a20 2020 2069 6620 6675  ######.    if fu
-00026a20: 6c6c 5f70 6174 683a 0a20 2020 2020 2020  ll_path:.       
-00026a30: 2069 6620 6578 655f 6e61 6d65 2069 6e20   if exe_name in 
-00026a40: 5b27 6373 6827 2c27 7463 7368 275d 3a0a  ['csh','tcsh']:.
-00026a50: 2020 2020 2020 2020 2020 2020 7020 3d20              p = 
-00026a60: 506f 7065 6e28 2727 2773 6574 656e 7620  Popen('''setenv 
-00026a70: 5041 5448 2022 2573 223b 2025 7327 2727  PATH "%s"; %s'''
-00026a80: 2528 6675 6c6c 5f70 6174 682c 636d 6429  %(full_path,cmd)
-00026a90: 202c 2073 6865 6c6c 3d54 7275 652c 2073   , shell=True, s
-00026aa0: 7464 6f75 743d 5049 5045 2c20 7374 6465  tdout=PIPE, stde
-00026ab0: 7272 3d53 5444 4f55 542c 6578 6563 7574  rr=STDOUT,execut
-00026ac0: 6162 6c65 3d65 7865 6375 7461 626c 652c  able=executable,
-00026ad0: 2065 6e76 3d6f 735f 656e 7629 0a20 2020   env=os_env).   
-00026ae0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00026af0: 2020 2020 2020 2070 203d 2050 6f70 656e         p = Popen
-00026b00: 2827 2727 6578 706f 7274 2050 4154 483d  ('''export PATH=
-00026b10: 2573 3b20 2573 2727 2725 2866 756c 6c5f  %s; %s'''%(full_
-00026b20: 7061 7468 2c63 6d64 2920 2c20 7368 656c  path,cmd) , shel
-00026b30: 6c3d 5472 7565 2c20 7374 646f 7574 3d50  l=True, stdout=P
-00026b40: 4950 452c 2073 7464 6572 723d 5354 444f  IPE, stderr=STDO
-00026b50: 5554 2c65 7865 6375 7461 626c 653d 6578  UT,executable=ex
-00026b60: 6563 7574 6162 6c65 2c20 656e 763d 6f73  ecutable, env=os
-00026b70: 5f65 6e76 290a 2020 2020 656c 6966 2069  _env).    elif i
-00026b80: 7369 6e73 7461 6e63 6528 7061 7468 2c73  sinstance(path,s
-00026b90: 7472 2920 616e 6420 6c65 6e28 7061 7468  tr) and len(path
-00026ba0: 2920 3e20 303a 0a20 2020 2020 2020 2069  ) > 0:.        i
-00026bb0: 6620 6364 3a0a 2020 2020 2020 2020 2020  f cd:.          
-00026bc0: 2020 6966 206f 732e 7061 7468 2e69 7364    if os.path.isd
-00026bd0: 6972 2870 6174 6829 3a0a 2020 2020 2020  ir(path):.      
-00026be0: 2020 2020 2020 2020 2020 2370 203d 2050            #p = P
-00026bf0: 6f70 656e 2863 6d64 5f66 6f72 6d28 636d  open(cmd_form(cm
-00026c00: 6429 202c 2073 6865 6c6c 3d54 7275 652c  d) , shell=True,
-00026c10: 2073 7464 6f75 743d 5049 5045 2c20 7374   stdout=PIPE, st
-00026c20: 6465 7272 3d53 5444 4f55 542c 6578 6563  derr=STDOUT,exec
-00026c30: 7574 6162 6c65 3d65 7865 6375 7461 626c  utable=executabl
-00026c40: 652c 2065 6e76 3d6f 735f 656e 762c 2063  e, env=os_env, c
-00026c50: 7764 3d70 6174 6829 0a20 2020 2020 2020  wd=path).       
-00026c60: 2020 2020 2020 2020 2070 7764 3d6f 732e           pwd=os.
-00026c70: 6765 7463 7764 2829 0a20 2020 2020 2020  getcwd().       
-00026c80: 2020 2020 2020 2020 206f 732e 6368 6469           os.chdi
-00026c90: 7228 7061 7468 2920 2320 666f 7220 636d  r(path) # for cm
-00026ca0: 645f 666f 726d 2829 0a20 2020 2020 2020  d_form().       
-00026cb0: 2020 2020 2020 2020 2070 203d 2050 6f70           p = Pop
-00026cc0: 656e 2863 6d64 5f66 6f72 6d28 636d 6429  en(cmd_form(cmd)
-00026cd0: 202c 2073 6865 6c6c 3d54 7275 652c 2073   , shell=True, s
-00026ce0: 7464 6f75 743d 5049 5045 2c20 7374 6465  tdout=PIPE, stde
-00026cf0: 7272 3d53 5444 4f55 542c 6578 6563 7574  rr=STDOUT,execut
-00026d00: 6162 6c65 3d65 7865 6375 7461 626c 652c  able=executable,
-00026d10: 2065 6e76 3d6f 735f 656e 7629 0a20 2020   env=os_env).   
-00026d20: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00026d30: 6b65 6570 5f63 7764 3a0a 2020 2020 2020  keep_cwd:.      
-00026d40: 2020 2020 2020 2020 2020 2020 2020 6f73                os
-00026d50: 2e63 6864 6972 2870 7764 290a 2020 2020  .chdir(pwd).    
-00026d60: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00026d70: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00026d80: 7475 726e 2031 2c20 277b 7d20 6e6f 7420  turn 1, '{} not 
-00026d90: 666f 756e 6427 2e66 6f72 6d61 7428 7061  found'.format(pa
-00026da0: 7468 292c 2027 7b7d 206e 6f74 2066 6f75  th), '{} not fou
-00026db0: 6e64 272e 666f 726d 6174 2870 6174 6829  nd'.format(path)
-00026dc0: 2c73 7461 7274 5f74 696d 652e 496e 6974  ,start_time.Init
-00026dd0: 2829 2c73 7461 7274 5f74 696d 652e 4e6f  (),start_time.No
-00026de0: 7728 696e 7429 2c63 6d64 2c70 6174 680a  w(int),cmd,path.
-00026df0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00026e00: 2020 2020 2020 2020 2020 6966 2065 7865            if exe
-00026e10: 5f6e 616d 6520 696e 205b 2763 7368 272c  _name in ['csh',
-00026e20: 2774 6373 6827 5d3a 0a20 2020 2020 2020  'tcsh']:.       
-00026e30: 2020 2020 2020 2020 2070 203d 2050 6f70           p = Pop
-00026e40: 656e 2827 2727 7365 7465 6e76 2050 4154  en('''setenv PAT
-00026e50: 4820 2225 733a 247b 5041 5448 7d22 3b20  H "%s:${PATH}"; 
-00026e60: 2573 2727 2725 2870 6174 682c 636d 6429  %s'''%(path,cmd)
-00026e70: 202c 2073 6865 6c6c 3d54 7275 652c 2073   , shell=True, s
-00026e80: 7464 6f75 743d 5049 5045 2c20 7374 6465  tdout=PIPE, stde
-00026e90: 7272 3d53 5444 4f55 542c 6578 6563 7574  rr=STDOUT,execut
-00026ea0: 6162 6c65 3d65 7865 6375 7461 626c 652c  able=executable,
-00026eb0: 2065 6e76 3d6f 735f 656e 7629 0a20 2020   env=os_env).   
-00026ec0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00026ed0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00026ee0: 203d 2050 6f70 656e 2827 2727 6578 706f   = Popen('''expo
-00026ef0: 7274 2050 4154 483d 2573 3a24 7b50 4154  rt PATH=%s:${PAT
-00026f00: 487d 3b20 2573 2727 2725 2870 6174 682c  H}; %s'''%(path,
-00026f10: 636d 6429 202c 2073 6865 6c6c 3d54 7275  cmd) , shell=Tru
-00026f20: 652c 2073 7464 6f75 743d 5049 5045 2c20  e, stdout=PIPE, 
-00026f30: 7374 6465 7272 3d53 5444 4f55 542c 6578  stderr=STDOUT,ex
-00026f40: 6563 7574 6162 6c65 3d65 7865 6375 7461  ecutable=executa
-00026f50: 626c 652c 2065 6e76 3d6f 735f 656e 7629  ble, env=os_env)
-00026f60: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00026f70: 2020 2070 203d 2050 6f70 656e 2863 6d64     p = Popen(cmd
-00026f80: 5f66 6f72 6d28 636d 6429 202c 2073 6865  _form(cmd) , she
-00026f90: 6c6c 3d54 7275 652c 2073 7464 6f75 743d  ll=True, stdout=
-00026fa0: 5049 5045 2c20 7374 6465 7272 3d53 5444  PIPE, stderr=STD
-00026fb0: 4f55 542c 6578 6563 7574 6162 6c65 3d65  OUT,executable=e
-00026fc0: 7865 6375 7461 626c 652c 2065 6e76 3d6f  xecutable, env=o
-00026fd0: 735f 656e 7629 0a0a 2020 2020 2323 2323  s_env)..    ####
-00026fe0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00026ff0: 2323 2323 2323 2323 2323 2323 230a 2020  #############.  
-00027000: 2020 234e 6565 6420 6572 726f 7220 6c6f    #Need error lo
-00027010: 6720 6f75 7420 6672 6f6d 2074 6872 6561  g out from threa
-00027020: 6420 746f 206f 7574 7075 740a 2020 2020  d to output.    
-00027030: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00027040: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00027050: 230a 2020 2020 6465 6620 7772 6974 655f  #.    def write_
-00027060: 6572 7228 7029 3a0a 2020 2020 2020 2077  err(p):.       w
-00027070: 6869 6c65 2054 7275 653a 0a20 2020 2020  hile True:.     
-00027080: 2020 2020 2020 6565 3d70 2e73 7464 6572        ee=p.stder
-00027090: 722e 7265 6164 2831 290a 2020 2020 2020  r.read(1).      
-000270a0: 2020 2020 2069 6620 6e6f 7420 6565 3a20       if not ee: 
-000270b0: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
-000270c0: 2069 6620 6973 696e 7374 616e 6365 2865   if isinstance(e
-000270d0: 652c 6279 7465 7329 3a0a 2020 2020 2020  e,bytes):.      
-000270e0: 2020 2020 2020 2020 7379 732e 7374 6465          sys.stde
-000270f0: 7272 2e62 7566 6665 722e 7772 6974 6528  rr.buffer.write(
-00027100: 6565 2920 2320 7772 6974 6520 6279 7465  ee) # write byte
-00027110: 7320 6461 7461 2074 6f20 7374 646f 7574  s data to stdout
-00027120: 0a20 2020 2020 2020 2020 2020 656c 7365  .           else
-00027130: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00027140: 7379 732e 7374 6465 7272 2e77 7269 7465  sys.stderr.write
-00027150: 2865 6529 2023 2077 7269 7465 2062 7974  (ee) # write byt
-00027160: 6573 2064 6174 6120 746f 2073 7464 6f75  es data to stdou
-00027170: 740a 2020 2020 2020 2020 2020 2073 7973  t.           sys
-00027180: 2e73 7464 6572 722e 666c 7573 6828 290a  .stderr.flush().
-00027190: 0a20 2020 2069 6620 696e 7465 7261 6374  .    if interact
-000271a0: 6976 653a 0a20 2020 2020 2020 2323 2323  ive:.       ####
-000271b0: 2323 2323 2323 2320 5354 4420 4572 726f  ####### STD Erro
-000271c0: 720a 2020 2020 2020 2065 7272 203d 2054  r.       err = T
-000271d0: 6872 6561 6428 7461 7267 6574 3d77 7269  hread(target=wri
-000271e0: 7465 5f65 7272 2c20 6172 6773 3d28 702c  te_err, args=(p,
-000271f0: 2929 0a20 2020 2020 2020 6572 722e 7374  )).       err.st
-00027200: 6172 7428 290a 2020 2020 2020 2023 2323  art().       ###
-00027210: 2323 2323 2323 2323 2053 5444 204f 7574  ######## STD Out
-00027220: 0a20 2020 2020 2020 7768 696c 6520 5472  .       while Tr
-00027230: 7565 3a0a 2020 2020 2020 2020 2020 643d  ue:.          d=
-00027240: 702e 7374 646f 7574 2e72 6561 6428 3129  p.stdout.read(1)
-00027250: 0a20 2020 2020 2020 2020 2069 6620 6e6f  .          if no
-00027260: 7420 643a 2062 7265 616b 0a20 2020 2020  t d: break.     
-00027270: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00027280: 6365 2864 2c62 7974 6573 293a 0a20 2020  ce(d,bytes):.   
-00027290: 2020 2020 2020 2020 2020 2073 7973 2e73             sys.s
-000272a0: 7464 6f75 742e 6275 6666 6572 2e77 7269  tdout.buffer.wri
-000272b0: 7465 2864 2920 2320 7772 6974 6520 6279  te(d) # write by
-000272c0: 7465 7320 6461 7461 2074 6f20 7374 646f  tes data to stdo
-000272d0: 7574 0a20 2020 2020 2020 2020 2020 2020  ut.             
-000272e0: 2023 6f75 742b 3d64 2e64 6563 6f64 6528   #out+=d.decode(
-000272f0: 2775 7466 2d38 2729 2e72 6570 6c61 6365  'utf-8').replace
-00027300: 2827 5c72 272c 2727 290a 2020 2020 2020  ('\r','').      
-00027310: 2020 2020 2020 2020 6f75 742b 3d53 7472          out+=Str
-00027320: 2864 292e 7265 706c 6163 6528 275c 7227  (d).replace('\r'
-00027330: 2c27 2729 0a20 2020 2020 2020 2020 2065  ,'').          e
-00027340: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00027350: 2020 2073 7973 2e73 7464 6f75 742e 7772     sys.stdout.wr
-00027360: 6974 6528 6429 2023 2077 7269 7465 2073  ite(d) # write s
-00027370: 7472 2064 6174 6120 746f 2073 7464 6f75  tr data to stdou
-00027380: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
-00027390: 6f75 742b 3d64 2e72 6570 6c61 6365 2827  out+=d.replace('
-000273a0: 5c72 272c 2727 290a 2020 2020 2020 2020  \r','').        
-000273b0: 2020 7379 732e 7374 646f 7574 2e66 6c75    sys.stdout.flu
-000273c0: 7368 2829 0a20 2020 2020 2020 702e 7374  sh().       p.st
-000273d0: 646f 7574 2e63 6c6f 7365 2829 0a0a 2020  dout.close()..  
-000273e0: 2020 2020 2023 2323 2323 2323 2323 2323       ###########
-000273f0: 204f 4c44 2053 5444 2045 7272 6f72 2c20   OLD STD Error, 
-00027400: 6966 2073 7461 7274 696e 6720 6672 6f6d  if starting from
-00027410: 2065 7272 6f72 206c 6f67 2074 6865 6e20   error log then 
-00027420: 6361 6e27 7420 7365 650a 2020 2020 2020  can't see.      
-00027430: 2023 6572 723d 702e 7374 6465 7272 2e72   #err=p.stderr.r
-00027440: 6561 6428 290a 2020 2020 2020 2023 6966  ead().       #if
-00027450: 2065 7272 3a0a 2020 2020 2020 2023 2020   err:.       #  
-00027460: 2069 6620 6973 696e 7374 616e 6365 2865   if isinstance(e
-00027470: 7272 2c62 7974 6573 293a 0a20 2020 2020  rr,bytes):.     
-00027480: 2020 2320 2020 2020 2020 7379 732e 7374    #       sys.st
-00027490: 6465 7272 2e62 7566 6665 722e 7772 6974  derr.buffer.writ
-000274a0: 6528 6572 7229 0a20 2020 2020 2020 2320  e(err).       # 
-000274b0: 2020 656c 7365 3a0a 2020 2020 2020 2023    else:.       #
-000274c0: 2020 2020 2020 2073 7973 2e73 7464 6572         sys.stder
-000274d0: 722e 7772 6974 6528 6572 7229 0a20 2020  r.write(err).   
-000274e0: 2020 2020 2320 2020 7379 732e 7374 6465      #   sys.stde
-000274f0: 7272 2e66 6c75 7368 2829 0a20 2020 2020  rr.flush().     
-00027500: 2020 2370 2e73 7464 6572 722e 636c 6f73    #p.stderr.clos
-00027510: 6528 290a 2020 2020 2020 2070 2e77 6169  e().       p.wai
-00027520: 7428 290a 2020 2020 656c 7365 3a0a 2020  t().    else:.  
-00027530: 2020 2020 2069 6620 7072 6f67 7265 7373       if progress
-00027540: 3a0a 2020 2020 2020 2020 2020 2073 746f  :.           sto
-00027550: 705f 7468 7265 6164 733d 4661 6c73 650a  p_threads=False.
-00027560: 2020 2020 2020 2020 2020 2070 7074 683d             ppth=
-00027570: 5468 7265 6164 2874 6172 6765 743d 7070  Thread(target=pp
-00027580: 726f 672c 6172 6773 3d28 6c61 6d62 6461  rog,args=(lambda
-00027590: 3a73 746f 705f 7468 7265 6164 732c 7072  :stop_threads,pr
-000275a0: 6f67 7265 7373 5f70 7265 5f6e 6577 5f6c  ogress_pre_new_l
-000275b0: 696e 652c 7072 6f67 7265 7373 5f70 6f73  ine,progress_pos
-000275c0: 745f 6e65 775f 6c69 6e65 2c6c 6f67 2c29  t_new_line,log,)
-000275d0: 290a 2020 2020 2020 2020 2020 2070 7074  ).           ppt
-000275e0: 682e 7374 6172 7428 290a 0a20 2020 2020  h.start()..     
-000275f0: 2020 7469 6d65 6f75 743d 496e 7428 7469    timeout=Int(ti
-00027600: 6d65 6f75 742c 6465 6661 756c 745f 7469  meout,default_ti
-00027610: 6d65 6f75 7429 0a20 2020 2020 2020 6966  meout).       if
-00027620: 2074 696d 656f 7574 203e 2030 3a0a 2020   timeout > 0:.  
-00027630: 2020 2020 2020 2020 6966 2050 7956 6572          if PyVer
-00027640: 2833 293a 0a20 2020 2020 2020 2020 2020  (3):.           
-00027650: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-00027660: 2020 2020 2020 206f 7574 2c20 6572 7220         out, err 
-00027670: 3d20 702e 636f 6d6d 756e 6963 6174 6528  = p.communicate(
-00027680: 7469 6d65 6f75 743d 7469 6d65 6f75 7429  timeout=timeout)
-00027690: 0a20 2020 2020 2020 2020 2020 2020 6578  .             ex
-000276a0: 6365 7074 2073 7562 7072 6f63 6573 732e  cept subprocess.
-000276b0: 5469 6d65 6f75 7445 7870 6972 6564 3a0a  TimeoutExpired:.
-000276c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000276d0: 702e 6b69 6c6c 2829 0a20 2020 2020 2020  p.kill().       
-000276e0: 2020 2020 2020 2020 2070 2e72 6574 7572           p.retur
-000276f0: 6e63 6f64 653d 3939 390a 2020 2020 2020  ncode=999.      
-00027700: 2020 2020 2020 2020 2020 6572 723d 2745            err='E
-00027710: 7272 6f72 3a20 4b69 6c6c 2070 726f 6365  rror: Kill proce
-00027720: 7373 2061 6674 6572 2054 696d 656f 7574  ss after Timeout
-00027730: 207b 307d 272e 666f 726d 6174 2874 696d   {0}'.format(tim
-00027740: 656f 7574 290a 2020 2020 2020 2020 2020  eout).          
-00027750: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00027760: 2020 2020 6f74 696d 656f 7574 3d27 7b7d      otimeout='{}
-00027770: 272e 666f 726d 6174 2874 696d 656f 7574  '.format(timeout
-00027780: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00027790: 7768 696c 6520 702e 706f 6c6c 2829 2069  while p.poll() i
-000277a0: 7320 4e6f 6e65 2061 6e64 2074 696d 656f  s None and timeo
-000277b0: 7574 203e 2030 3a0a 2020 2020 2020 2020  ut > 0:.        
-000277c0: 2020 2020 2020 2020 2020 7469 6d65 2e73            time.s
-000277d0: 6c65 6570 2830 2e31 290a 2020 2020 2020  leep(0.1).      
-000277e0: 2020 2020 2020 2020 2020 2020 7469 6d65              time
-000277f0: 6f75 7420 3d20 7469 6d65 6f75 7420 2d20  out = timeout - 
-00027800: 302e 310a 2020 2020 2020 2020 2020 2020  0.1.            
-00027810: 2020 6966 2070 2e70 6f6c 6c28 2920 6973    if p.poll() is
-00027820: 204e 6f6e 6520 616e 6420 7469 6d65 6f75   None and timeou
-00027830: 7420 3c20 303a 0a20 2020 2020 2020 2020  t < 0:.         
-00027840: 2020 2020 2020 2020 2070 2e6b 696c 6c28           p.kill(
-00027850: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00027860: 2020 2020 702e 7265 7475 726e 636f 6465      p.returncode
-00027870: 3d39 3939 0a20 2020 2020 2020 2020 2020  =999.           
-00027880: 2020 2020 2020 2065 7272 3d27 4572 726f         err='Erro
-00027890: 723a 204b 696c 6c20 7072 6f63 6573 7320  r: Kill process 
-000278a0: 6166 7465 7220 5469 6d65 6f75 7420 7b30  after Timeout {0
-000278b0: 7d27 2e66 6f72 6d61 7428 6f74 696d 656f  }'.format(otimeo
-000278c0: 7574 290a 2020 2020 2020 2020 2020 2020  ut).            
-000278d0: 2020 6966 206c 656e 286f 7574 2920 3d3d    if len(out) ==
-000278e0: 2030 2061 6e64 206c 656e 2865 7272 2920   0 and len(err) 
-000278f0: 3d3d 2030 3a0a 2020 2020 2020 2020 2020  == 0:.          
-00027900: 2020 2020 2020 2020 6f75 742c 2065 7272          out, err
-00027910: 203d 2070 2e63 6f6d 6d75 6e69 6361 7465   = p.communicate
-00027920: 2829 0a20 2020 2020 2020 656c 7365 3a0a  ().       else:.
-00027930: 2020 2020 2020 2020 2020 6f75 742c 2065            out, e
-00027940: 7272 203d 2070 2e63 6f6d 6d75 6e69 6361  rr = p.communica
-00027950: 7465 2829 0a20 2020 2020 2020 6966 2070  te().       if p
-00027960: 726f 6772 6573 733a 0a20 2020 2020 2020  rogress:.       
-00027970: 2020 2073 746f 705f 7468 7265 6164 733d     stop_threads=
-00027980: 5472 7565 0a20 2020 2020 2020 2020 2070  True.          p
-00027990: 7074 682e 6a6f 696e 2829 0a20 2020 2023  pth.join().    #
-000279a0: 6966 2050 7956 6572 2833 293a 0a20 2020  if PyVer(3):.   
-000279b0: 2023 2020 2020 6966 2054 7970 6528 6f75   #    if Type(ou
-000279c0: 742c 2762 7974 6573 2729 3a20 6f75 743d  t,'bytes'): out=
-000279d0: 6f75 742e 6465 636f 6465 2822 4953 4f2d  out.decode("ISO-
-000279e0: 3838 3539 2d31 2229 2e72 7374 7269 7028  8859-1").rstrip(
-000279f0: 290a 2020 2020 2320 2020 2069 6620 5479  ).    #    if Ty
-00027a00: 7065 2865 7272 2c27 6279 7465 7327 293a  pe(err,'bytes'):
-00027a10: 2065 7272 3d65 7272 2e64 6563 6f64 6528   err=err.decode(
-00027a20: 2249 534f 2d38 3835 392d 3122 292e 7273  "ISO-8859-1").rs
-00027a30: 7472 6970 2829 0a20 2020 206f 7574 3d53  trip().    out=S
-00027a40: 7472 286f 7574 2c65 6e63 6f64 653d 6465  tr(out,encode=de
-00027a50: 636f 6465 292e 7273 7472 6970 2829 0a20  code).rstrip(). 
-00027a60: 2020 2065 7272 3d53 7472 2865 7272 2c65     err=Str(err,e
-00027a70: 6e63 6f64 653d 6465 636f 6465 292e 7273  ncode=decode).rs
-00027a80: 7472 6970 2829 0a20 2020 2069 6620 616e  trip().    if an
-00027a90: 7369 3a0a 2020 2020 2020 2020 6f75 743d  si:.        out=
-00027aa0: 616e 7369 5f65 7363 6170 652e 7375 6228  ansi_escape.sub(
-00027ab0: 2727 2c6f 7574 290a 2020 2020 2020 2020  '',out).        
-00027ac0: 6572 723d 616e 7369 5f65 7363 6170 652e  err=ansi_escape.
-00027ad0: 7375 6228 2727 2c65 7272 290a 2020 2020  sub('',err).    
-00027ae0: 6966 2065 6e76 5f6f 7574 3a0a 2020 2020  if env_out:.    
-00027af0: 2020 2020 7265 7475 726e 2070 2e72 6574      return p.ret
-00027b00: 7572 6e63 6f64 652c 206f 7574 2c20 6572  urncode, out, er
-00027b10: 722c 7374 6172 745f 7469 6d65 2e49 6e69  r,start_time.Ini
-00027b20: 7428 292c 7374 6172 745f 7469 6d65 2e4e  t(),start_time.N
-00027b30: 6f77 2869 6e74 292c 636d 642c 7061 7468  ow(int),cmd,path
-00027b40: 2c6f 735f 656e 760a 2020 2020 7265 7475  ,os_env.    retu
-00027b50: 726e 2070 2e72 6574 7572 6e63 6f64 652c  rn p.returncode,
-00027b60: 206f 7574 2c20 6572 722c 7374 6172 745f   out, err,start_
-00027b70: 7469 6d65 2e49 6e69 7428 292c 7374 6172  time.Init(),star
-00027b80: 745f 7469 6d65 2e4e 6f77 2869 6e74 292c  t_time.Now(int),
-00027b90: 636d 642c 7061 7468 0a0a 6465 6620 4973  cmd,path..def Is
-00027ba0: 4361 6e63 656c 2866 756e 632c 2a2a 6f70  Cancel(func,**op
-00027bb0: 7473 293a 0a20 2020 2072 6574 7572 6e20  ts):.    return 
-00027bc0: 4973 5472 7565 2866 756e 632c 7265 7175  IsTrue(func,requ
-00027bd0: 6972 656d 656e 7473 3d5b 2763 616e 6365  irements=['cance
-00027be0: 6c27 2c27 6361 6e63 656c 696e 6727 2c27  l','canceling','
-00027bf0: 5245 5644 272c 2773 746f 7027 2c27 6272  REVD','stop','br
-00027c00: 6561 6b27 5d2c 2a2a 6f70 7473 290a 0a64  eak'],**opts)..d
-00027c10: 6566 2049 7342 7265 616b 2866 756e 632c  ef IsBreak(func,
-00027c20: 2a2a 6f70 7473 293a 0a20 2020 2072 6574  **opts):.    ret
-00027c30: 7572 6e20 4973 5472 7565 2866 756e 632c  urn IsTrue(func,
-00027c40: 7265 7175 6972 656d 656e 7473 3d5b 2763  requirements=['c
-00027c50: 616e 6365 6c27 2c27 6361 6e63 656c 696e  ancel','cancelin
-00027c60: 6727 2c27 5245 5644 272c 2773 746f 7027  g','REVD','stop'
-00027c70: 2c27 6272 6561 6b27 5d2c 2a2a 6f70 7473  ,'break'],**opts
-00027c80: 290a 0a64 6566 2046 6978 4170 6f73 7472  )..def FixApostr
-00027c90: 6f70 6865 2873 7472 696e 6729 3a0a 2020  ophe(string):.  
-00027ca0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00027cb0: 7374 7269 6e67 2c73 7472 293a 0a20 2020  string,str):.   
-00027cc0: 2020 2020 2069 6620 2227 2220 696e 2073       if "'" in s
-00027cd0: 7472 696e 673a 0a20 2020 2020 2020 2020  tring:.         
-00027ce0: 2020 2072 6574 7572 6e20 2727 2722 7b7d     return '''"{}
-00027cf0: 2227 2727 2e66 6f72 6d61 7428 7374 7269  "'''.format(stri
-00027d00: 6e67 290a 2020 2020 2020 2020 7265 7475  ng).        retu
-00027d10: 726e 2022 2222 277b 7d27 2222 222e 666f  rn """'{}'""".fo
-00027d20: 726d 6174 2873 7472 696e 6729 0a20 2020  rmat(string).   
-00027d30: 2072 6574 7572 6e20 7374 7269 6e67 0a0a   return string..
-00027d40: 6465 6620 7370 7269 6e74 6628 7374 7269  def sprintf(stri
-00027d50: 6e67 2c2a 696e 7073 2c2a 2a6f 7074 7329  ng,*inps,**opts)
-00027d60: 3a0a 2020 2020 2727 270a 2020 2020 2222  :.    '''.    ""
-00027d70: 2269 706d 6974 6f6f 6c20 2d48 2025 2869  "ipmitool -H %(i
-00027d80: 706d 695f 6970 2973 202d 5520 2528 6970  pmi_ip)s -U %(ip
-00027d90: 6d69 5f75 7365 7229 7320 2d50 2027 2528  mi_user)s -P '%(
-00027da0: 6970 6d69 5f70 6173 7329 7327 2022 2222  ipmi_pass)s' """
-00027db0: 2528 2a2a 6f70 7473 290a 2020 2020 2222  %(**opts).    ""
-00027dc0: 227b 6170 707d 202d 4820 7b69 706d 695f  "{app} -H {ipmi_
-00027dd0: 6970 7d20 2d55 207b 6970 6d69 5f75 7365  ip} -U {ipmi_use
-00027de0: 727d 202d 5020 277b 6970 6d69 5f70 6173  r} -P '{ipmi_pas
-00027df0: 737d 2720 2222 222e 666f 726d 6174 282a  s}' """.format(*
-00027e00: 2a6f 7074 7329 0a20 2020 2022 2222 7b7d  *opts).    """{}
-00027e10: 202d 4820 7b7d 202d 5520 7b7d 202d 5020   -H {} -U {} -P 
-00027e20: 277b 7d27 2022 2222 2e66 6f72 6d61 7428  '{}' """.format(
-00027e30: 2a69 6e70 7329 0a20 2020 2022 2222 7b30  *inps).    """{0
-00027e40: 7d20 2d48 207b 317d 202d 5520 7b32 7d20  } -H {1} -U {2} 
-00027e50: 2d50 2027 7b33 7d27 2022 2222 2e66 6f72  -P '{3}' """.for
-00027e60: 6d61 7428 2a69 6e70 7329 0a20 2020 205f  mat(*inps).    _
-00027e70: 6572 725f 203a 2054 7275 653a 206d 6973  err_ : True: mis
-00027e80: 7369 6e67 2070 6172 616d 6574 6572 2074  sing parameter t
-00027e90: 6865 6e20 7265 7475 726e 2046 616c 7365  hen return False
-00027ea0: 2c20 4661 6c73 6528 6465 6661 756c 7429  , False(default)
-00027eb0: 3a20 636f 6e76 6572 7420 6a75 7374 2070  : convert just p
-00027ec0: 6f73 7369 626c 6520 7468 696e 6773 2c20  ossible things, 
-00027ed0: 6f74 6865 7273 206a 7573 7420 6b65 6570  others just keep
-00027ee0: 2072 6574 7572 6e20 6f72 6967 696e 616c   return original
-00027ef0: 2066 6f72 6d0a 2020 2020 6170 6f73 7472   form.    apostr
-00027f00: 6f70 6865 203a 2054 7275 653a 2061 7574  ophe : True: aut
-00027f10: 6f6d 6174 6963 616c 6c79 2063 6861 6e67  omatically chang
-00027f20: 6520 616e 6420 6164 6420 7768 656e 2069  e and add when i
-00027f30: 6e70 7574 2076 616c 7565 2068 6176 696e  nput value havin
-00027f40: 6720 6170 6f73 7472 6f70 6865 0a20 2020  g apostrophe.   
-00027f50: 2020 2020 2020 2020 2020 2020 2020 4e6f                No
-00027f60: 6e65 203a 2061 7574 6f6d 6174 6963 616c  ne : automatical
-00027f70: 6c79 2063 6861 6e67 6520 6170 6f73 7472  ly change apostr
-00027f80: 6f70 6865 2077 6865 6e20 696e 7075 7420  ophe when input 
-00027f90: 7661 6c75 6520 6861 7669 6e67 2073 616d  value having sam
-00027fa0: 6520 6170 6f73 7472 6f70 6865 2c20 6275  e apostrophe, bu
-00027fb0: 7420 6e6f 7420 6175 746f 6d61 7469 6361  t not automatica
-00027fc0: 6c6c 7920 6164 6469 6e67 2061 706f 7374  lly adding apost
-00027fd0: 726f 7068 6520 7768 656e 2066 6f72 6d61  rophe when forma
-00027fe0: 7420 7374 7269 6e67 2068 6176 696e 6720  t string having 
-00027ff0: 6e6f 2061 706f 7374 726f 7068 6528 6465  no apostrophe(de
-00028000: 6661 756c 7429 0a20 2020 2020 2020 2020  fault).         
-00028010: 2020 2020 2020 2020 4661 6c73 653a 2064          False: d
-00028020: 6f20 6e6f 7420 6368 616e 6765 2061 6e79  o not change any
-00028030: 2070 6172 616d 6574 6572 0a20 2020 2027   parameter.    '
-00028040: 2727 0a20 2020 2064 6566 205f 7265 706c  ''.    def _repl
-00028050: 6163 655f 666f 726d 6174 5f74 6f5f 7661  ace_format_to_va
-00028060: 6c75 655f 2869 2c74 6d70 2c73 7472 696e  lue_(i,tmp,strin
-00028070: 672c 7661 6c2c 6170 6f73 7472 6f70 6865  g,val,apostrophe
-00028080: 3d54 7275 6529 3a0a 2020 2020 2020 2020  =True):.        
-00028090: 6d69 7373 696e 673d 5b5d 0a20 2020 2020  missing=[].     
-000280a0: 2020 2073 7472 696e 675f 613d 7374 7269     string_a=stri
-000280b0: 6e67 2e73 706c 6974 2829 0a20 2020 2020  ng.split().     
-000280c0: 2020 206f 6964 783d 300a 2020 2020 2020     oidx=0.      
-000280d0: 2020 7475 706c 655f 7661 6c3d 6973 696e    tuple_val=isin
-000280e0: 7374 616e 6365 2876 616c 2c28 7475 706c  stance(val,(tupl
-000280f0: 652c 6c69 7374 2929 0a20 2020 2020 2020  e,list)).       
-00028100: 2066 6f72 2069 6920 696e 2074 6d70 3a0a   for ii in tmp:.
-00028110: 2020 2020 2020 2020 2020 2020 6966 2074              if t
-00028120: 7570 6c65 5f76 616c 3a20 6969 3d69 6e74  uple_val: ii=int
-00028130: 2869 6929 0a20 2020 2020 2020 2020 2020  (ii).           
-00028140: 2069 6478 3d4e 6f6e 650a 2020 2020 2020   idx=None.      
-00028150: 2020 2020 2020 2369 6e70 7574 206c 6f63        #input loc
-00028160: 6174 696f 6e20 666f 726d 6174 0a20 2020  ation format.   
-00028170: 2020 2020 2020 2020 2069 6620 6920 3c20           if i < 
-00028180: 323a 0a20 2020 2020 2020 2020 2020 2020  2:.             
-00028190: 2020 2023 206c 6973 742c 7475 706c 652c     # list,tuple,
-000281a0: 7061 7261 6d65 7465 720a 2020 2020 2020  parameter.      
-000281b0: 2020 2020 2020 2020 2020 2370 7269 6e74            #print
-000281c0: 2827 7b7d 272e 666f 726d 6174 2831 2929  ('{}'.format(1))
-000281d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000281e0: 2023 7072 696e 7428 277b 307d 272e 666f   #print('{0}'.fo
-000281f0: 726d 6174 2831 2929 0a20 2020 2020 2020  rmat(1)).       
-00028200: 2020 2020 2020 2020 2023 7072 696e 7428           #print(
-00028210: 277b 617d 272e 666f 726d 6174 282a 2a7b  '{a}'.format(**{
-00028220: 2761 273a 317d 2929 0a20 2020 2020 2020  'a':1})).       
-00028230: 2020 2020 2020 2020 2023 7072 696e 7428           #print(
-00028240: 277b 617d 272e 666f 726d 6174 2861 3d31  '{a}'.format(a=1
-00028250: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-00028260: 2020 2069 6620 2727 277b 2573 7d27 2727     if '''{%s}'''
-00028270: 2528 6969 2920 696e 2073 7472 696e 675f  %(ii) in string_
-00028280: 613a 0a20 2020 2020 2020 2020 2020 2020  a:.             
-00028290: 2020 2020 2020 2069 6478 3d73 7472 696e         idx=strin
-000282a0: 675f 612e 696e 6465 7828 2727 277b 2573  g_a.index('''{%s
-000282b0: 7d27 2727 2528 6969 2929 0a20 2020 2020  }'''%(ii)).     
-000282c0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-000282d0: 2222 2227 7b25 737d 2722 2222 2528 6969  """'{%s}'"""%(ii
-000282e0: 2920 696e 2073 7472 696e 675f 613a 0a20  ) in string_a:. 
-000282f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028300: 2020 2069 6478 3d73 7472 696e 675f 612e     idx=string_a.
-00028310: 696e 6465 7828 2222 2227 7b25 737d 2722  index("""'{%s}'"
-00028320: 2222 2528 6969 2929 0a20 2020 2020 2020  ""%(ii)).       
-00028330: 2020 2020 2020 2020 2065 6c69 6620 2727           elif ''
-00028340: 2722 7b25 737d 2227 2727 2528 6969 2920  '"{%s}"'''%(ii) 
-00028350: 696e 2073 7472 696e 675f 613a 0a20 2020  in string_a:.   
-00028360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028370: 2069 6478 3d73 7472 696e 675f 612e 696e   idx=string_a.in
-00028380: 6465 7828 2727 2722 7b25 737d 2227 2727  dex('''"{%s}"'''
-00028390: 2528 6969 2929 0a20 2020 2020 2020 2020  %(ii)).         
-000283a0: 2020 2065 6c69 6620 6920 3d3d 2032 3a0a     elif i == 2:.
-000283b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000283c0: 2320 6469 6374 696f 6e61 7279 2069 6e70  # dictionary inp
-000283d0: 7574 200a 2020 2020 2020 2020 2020 2020  ut .            
-000283e0: 2020 2020 2320 7072 696e 7428 2725 2861      # print('%(a
-000283f0: 2973 2725 287b 2761 273a 2761 277d 2929  )s'%({'a':'a'}))
-00028400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00028410: 2069 6620 2727 2725 287b 7d29 7327 2727   if '''%({})s'''
-00028420: 2e66 6f72 6d61 7428 6969 2920 696e 2073  .format(ii) in s
-00028430: 7472 696e 675f 613a 0a20 2020 2020 2020  tring_a:.       
-00028440: 2020 2020 2020 2020 2020 2020 2069 6478               idx
-00028450: 3d73 7472 696e 675f 612e 696e 6465 7828  =string_a.index(
-00028460: 2727 2725 287b 7d29 7327 2727 2e66 6f72  '''%({})s'''.for
-00028470: 6d61 7428 6969 2929 0a20 2020 2020 2020  mat(ii)).       
-00028480: 2020 2020 2020 2020 2065 6c69 6620 2222           elif ""
-00028490: 2227 2528 7b7d 2973 2722 2222 2e66 6f72  "'%({})s'""".for
-000284a0: 6d61 7428 6969 2920 696e 2073 7472 696e  mat(ii) in strin
-000284b0: 675f 613a 0a20 2020 2020 2020 2020 2020  g_a:.           
-000284c0: 2020 2020 2020 2020 2069 6478 3d73 7472           idx=str
-000284d0: 696e 675f 612e 696e 6465 7828 2222 2227  ing_a.index("""'
-000284e0: 2528 7b7d 2973 2722 2222 2e66 6f72 6d61  %({})s'""".forma
-000284f0: 7428 6969 2929 0a20 2020 2020 2020 2020  t(ii)).         
-00028500: 2020 2020 2020 2065 6c69 6620 2727 2722         elif '''"
-00028510: 2528 7b7d 2973 2227 2727 2e66 6f72 6d61  %({})s"'''.forma
-00028520: 7428 6969 2920 696e 2073 7472 696e 675f  t(ii) in string_
-00028530: 613a 0a20 2020 2020 2020 2020 2020 2020  a:.             
-00028540: 2020 2020 2020 2069 6478 3d73 7472 696e         idx=strin
-00028550: 675f 612e 696e 6465 7828 2727 2722 2528  g_a.index('''"%(
-00028560: 7b7d 2973 2227 2727 2e66 6f72 6d61 7428  {})s"'''.format(
-00028570: 6969 2929 0a20 2020 2020 2020 2020 2020  ii)).           
-00028580: 2023 466f 756e 6420 666f 726d 6174 206c   #Found format l
-00028590: 6f63 6174 696f 6e0a 2020 2020 2020 2020  ocation.        
-000285a0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-000285b0: 6528 6964 782c 696e 7429 3a0a 2020 2020  e(idx,int):.    
-000285c0: 2020 2020 2020 2020 2020 2020 2320 6966              # if
-000285d0: 2069 6e70 7574 2064 6174 6120 6973 2073   input data is s
-000285e0: 7472 696e 670a 2020 2020 2020 2020 2020  tring.          
-000285f0: 2020 2020 2020 6966 2028 7475 706c 655f        if (tuple_
-00028600: 7661 6c20 616e 6420 6c65 6e28 7661 6c29  val and len(val)
-00028610: 203e 2069 6929 206f 7220 286e 6f74 2074   > ii) or (not t
-00028620: 7570 6c65 5f76 616c 2061 6e64 2069 6920  uple_val and ii 
-00028630: 696e 2076 616c 293a 0a20 2020 2020 2020  in val):.       
-00028640: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00028650: 6973 696e 7374 616e 6365 2876 616c 5b69  isinstance(val[i
-00028660: 695d 2c73 7472 293a 0a20 2020 2020 2020  i],str):.       
-00028670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028680: 2069 6620 2873 7472 696e 675f 615b 6964   if (string_a[id
-00028690: 785d 5b30 5d20 3d3d 2022 2722 2061 6e64  x][0] == "'" and
-000286a0: 2073 7472 696e 675f 615b 6964 785d 5b2d   string_a[idx][-
-000286b0: 315d 203d 3d20 2227 2229 205c 0a20 2020  1] == "'") \.   
-000286c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000286d0: 2020 2020 2020 2020 6f72 2028 7374 7269          or (stri
-000286e0: 6e67 5f61 5b69 6478 5d5b 305d 203d 3d20  ng_a[idx][0] == 
-000286f0: 2722 2720 616e 6420 7374 7269 6e67 5f61  '"' and string_a
-00028700: 5b69 6478 5d5b 2d31 5d20 3d3d 2027 2227  [idx][-1] == '"'
-00028710: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00028720: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00028730: 6620 6170 6f73 7472 6f70 6865 205c 0a20  f apostrophe \. 
-00028740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028750: 2020 2020 2020 2020 2020 2020 2020 616e                an
-00028760: 6420 2828 7661 6c5b 6969 5d5b 305d 203d  d ((val[ii][0] =
-00028770: 3d20 2227 2220 616e 6420 7661 6c5b 6969  = "'" and val[ii
-00028780: 5d5b 2d31 5d20 3d3d 2022 2722 295c 0a20  ][-1] == "'")\. 
-00028790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000287a0: 2020 2020 2020 2020 2020 2020 2020 6f72                or
-000287b0: 2028 7661 6c5b 6969 5d5b 305d 203d 3d20   (val[ii][0] == 
-000287c0: 2722 2720 616e 6420 7661 6c5b 6969 5d5b  '"' and val[ii][
-000287d0: 2d31 5d20 3d3d 2027 2227 2929 3a0a 2020  -1] == '"')):.  
-000287e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000287f0: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00028800: 7269 6e67 5f61 5b69 6478 5d3d 7661 6c5b  ring_a[idx]=val[
-00028810: 6969 5d0a 2020 2020 2020 2020 2020 2020  ii].            
+000221e0: 6574 7572 6e20 6261 7365 2b20 6172 6773  eturn base+ args
+000221f0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00022200: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00022210: 2020 2072 6574 7572 6e20 6261 7365 2b27     return base+'
+00022220: 3f27 202b 2061 7267 730a 2020 2020 2020  ?' + args.      
+00022230: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00022240: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00022250: 6261 7365 2b27 3f27 202b 2061 7267 730a  base+'?' + args.
+00022260: 2020 2020 6465 6620 6765 7428 7365 6c66      def get(self
+00022270: 2c6e 616d 653d 4e6f 6e65 293a 0a20 2020  ,name=None):.   
+00022280: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00022290: 6365 2873 656c 662e 7061 7261 6d65 7465  ce(self.paramete
+000222a0: 7273 2c64 6963 7429 3a0a 2020 2020 2020  rs,dict):.      
+000222b0: 2020 2020 2020 6966 206e 616d 6520 616e        if name an
+000222c0: 6420 6e61 6d65 2069 6e20 7365 6c66 2e70  d name in self.p
+000222d0: 6172 616d 6574 6572 733a 0a20 2020 2020  arameters:.     
+000222e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000222f0: 6e20 7365 6c66 2e70 6172 616d 6574 6572  n self.parameter
+00022300: 735b 6e61 6d65 5d0a 2020 2020 2020 2020  s[name].        
+00022310: 6966 206e 616d 6520 616e 6420 6e61 6d65  if name and name
+00022320: 2069 6e20 7365 6c66 2e5f 5f64 6963 745f   in self.__dict_
+00022330: 5f3a 0a20 2020 2020 2020 2020 2020 2072  _:.            r
+00022340: 6574 7572 6e20 7365 6c66 2e5f 5f64 6963  eturn self.__dic
+00022350: 745f 5f5b 6e61 6d65 5d0a 2020 2020 2020  t__[name].      
+00022360: 2020 7365 6c66 2e70 6172 616d 6574 6572    self.parameter
+00022370: 730a 2020 2020 6465 6620 7061 6765 7328  s.    def pages(
+00022380: 7365 6c66 293a 0a20 2020 2020 2020 2068  self):.        h
+00022390: 746d 6c5f 7061 6765 3d27 270a 2020 2020  tml_page=''.    
+000223a0: 2020 2020 6966 2073 656c 662e 7061 6765      if self.page
+000223b0: 203e 2030 203a 0a20 2020 2020 2020 2020   > 0 :.         
+000223c0: 2020 206e 6578 745f 7061 6765 3d73 656c     next_page=sel
+000223d0: 662e 7061 6765 2d31 0a20 2020 2020 2020  f.page-1.       
+000223e0: 2020 2020 206f 6f3d 7365 6c66 2e75 726c       oo=self.url
+000223f0: 2869 676e 6f72 653d 5b27 7061 6765 275d  (ignore=['page']
+00022400: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00022410: 206f 6f3a 206f 6f3d 6f6f 2b27 2627 0a20   oo: oo=oo+'&'. 
+00022420: 2020 2020 2020 2020 2020 2068 746d 6c5f             html_
+00022430: 7061 6765 3d27 2727 7b30 7d0a 2020 2020  page='''{0}.    
+00022440: 2020 2020 2020 2020 3c61 2068 7265 663d          <a href=
+00022450: 227b 317d 223e 207c 3c20 3c2f 613e 0a20  "{1}"> |< </a>. 
+00022460: 2020 2020 2020 2020 2020 203c 6120 6872             <a hr
+00022470: 6566 3d22 7b32 7d70 6167 653d 7b33 7d22  ef="{2}page={3}"
+00022480: 3e20 3c3c 203c 2f61 3e27 2727 2e66 6f72  > << </a>'''.for
+00022490: 6d61 7428 6874 6d6c 5f70 6167 652c 7365  mat(html_page,se
+000224a0: 6c66 2e75 726c 2870 6167 653d 3029 2c6f  lf.url(page=0),o
+000224b0: 6f2c 6e65 7874 5f70 6167 6529 0a20 2020  o,next_page).   
+000224c0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000224d0: 2020 2020 2020 2068 746d 6c5f 7061 6765         html_page
+000224e0: 3d27 2727 7b30 7d20 7c3c 203c 3c20 2727  ='''{0} |< << ''
+000224f0: 272e 666f 726d 6174 2868 746d 6c5f 7061  '.format(html_pa
+00022500: 6765 290a 2020 2020 2020 2020 6874 6d6c  ge).        html
+00022510: 5f70 6167 653d 2727 277b 7d5b 7b7d 5d27  _page='''{}[{}]'
+00022520: 2727 2e66 6f72 6d61 7428 6874 6d6c 5f70  ''.format(html_p
+00022530: 6167 652c 7365 6c66 2e70 6167 6529 0a20  age,self.page). 
+00022540: 2020 2020 2020 2069 6620 7365 6c66 2e70         if self.p
+00022550: 6167 6520 3c20 7365 6c66 2e74 6f74 616c  age < self.total
+00022560: 5f70 6167 653a 0a20 2020 2020 2020 2020  _page:.         
+00022570: 2020 206e 6578 745f 7061 6765 3d73 656c     next_page=sel
+00022580: 662e 7061 6765 2b31 0a20 2020 2020 2020  f.page+1.       
+00022590: 2020 2020 206f 6f3d 7365 6c66 2e75 726c       oo=self.url
+000225a0: 2869 676e 6f72 653d 5b27 7061 6765 275d  (ignore=['page']
+000225b0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+000225c0: 206f 6f20 3a20 6f6f 3d6f 6f2b 2726 270a   oo : oo=oo+'&'.
+000225d0: 2020 2020 2020 2020 2020 2020 6874 6d6c              html
+000225e0: 5f70 6167 653d 2727 277b 307d 0a20 2020  _page='''{0}.   
+000225f0: 2020 2020 2020 2020 203c 6120 6872 6566           <a href
+00022600: 3d22 7b31 7d70 6167 653d 7b32 7d22 3e20  ="{1}page={2}"> 
+00022610: 3e3e 203c 2f61 3e0a 2020 2020 2020 2020  >> </a>.        
+00022620: 2020 2020 3c61 2068 7265 663d 227b 317d      <a href="{1}
+00022630: 7061 6765 3d7b 337d 223e 203e 7c20 3c2f  page={3}"> >| </
+00022640: 613e 0a20 2020 2020 2020 2020 2020 2727  a>.           ''
+00022650: 272e 666f 726d 6174 2868 746d 6c5f 7061  '.format(html_pa
+00022660: 6765 2c6f 6f2c 6e65 7874 5f70 6167 652c  ge,oo,next_page,
+00022670: 7365 6c66 2e74 6f74 616c 5f70 6167 6529  self.total_page)
+00022680: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00022690: 2020 2020 2020 2020 2020 2068 746d 6c5f             html_
+000226a0: 7061 6765 3d27 2727 7b30 7d0a 2020 2020  page='''{0}.    
+000226b0: 2020 2020 2020 2020 203e 3e20 203e 7c0a           >>  >|.
+000226c0: 2020 2020 2020 2020 2020 2027 2727 2e66             '''.f
+000226d0: 6f72 6d61 7428 6874 6d6c 5f70 6167 6529  ormat(html_page)
+000226e0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000226f0: 6874 6d6c 5f70 6167 650a 0a63 6c61 7373  html_page..class
+00022700: 2057 4542 3a0a 2020 2020 2727 270a 2020   WEB:.    '''.  
+00022710: 2020 4765 7449 503a 2067 6574 2073 6572    GetIP: get ser
+00022720: 7665 7220 6f72 2063 6c69 656e 7420 4950  ver or client IP
+00022730: 0a20 2020 2052 6571 7565 7374 3a20 7265  .    Request: re
+00022740: 7175 6573 7428 290a 2020 2020 7374 7232  quest().    str2
+00022750: 7572 6c3a 2063 6f6e 7665 7274 2073 7472  url: convert str
+00022760: 696e 6720 746f 2055 524c 2066 6f72 6d61  ing to URL forma
+00022770: 740a 2020 2020 666f 726d 3264 6963 743a  t.    form2dict:
+00022780: 2063 6f6e 7665 7274 2066 6f72 6d20 6461   convert form da
+00022790: 7461 2074 6f20 6469 6374 696f 6e61 7279  ta to dictionary
+000227a0: 2066 6f72 6d61 740a 2020 2020 2727 270a   format.    '''.
+000227b0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+000227c0: 2873 656c 662c 7265 7175 6573 743d 4e6f  (self,request=No
+000227d0: 6e65 293a 0a20 2020 2020 2020 2069 6620  ne):.        if 
+000227e0: 7265 7175 6573 743a 0a20 2020 2020 2020  request:.       
+000227f0: 2020 2020 2073 656c 662e 7265 7175 6573       self.reques
+00022800: 7473 3d72 6571 7565 7374 0a20 2020 2020  ts=request.     
+00022810: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00022820: 2020 2020 2049 6d70 6f72 7428 2769 6d70       Import('imp
+00022830: 6f72 7420 7265 7175 6573 7473 2729 0a20  ort requests'). 
+00022840: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00022850: 7265 7175 6573 7473 3d72 6571 7565 7374  requests=request
+00022860: 730a 0a20 2020 2064 6566 2053 6573 7369  s..    def Sessi
+00022870: 6f6e 2873 656c 6629 3a0a 2020 2020 2020  on(self):.      
+00022880: 2020 7265 7475 726e 2073 656c 662e 7265    return self.re
+00022890: 7175 6573 7473 2e73 6573 7369 6f6e 2e5f  quests.session._
+000228a0: 6765 745f 6f72 5f63 7265 6174 655f 7365  get_or_create_se
+000228b0: 7373 696f 6e5f 6b65 7928 290a 0a20 2020  ssion_key()..   
+000228c0: 2064 6566 2047 6574 4950 2873 656c 662c   def GetIP(self,
+000228d0: 6d6f 6465 3d27 7365 7276 6572 2729 3a0a  mode='server'):.
+000228e0: 2020 2020 2020 2020 2727 2720 0a20 2020          ''' .   
+000228f0: 2020 2020 206d 6f64 653a 0a20 2020 2020       mode:.     
+00022900: 2020 2020 2073 6572 7665 7220 3a20 6765       server : ge
+00022910: 7420 7365 7276 6572 2049 5020 2864 6566  t server IP (def
+00022920: 6175 6c74 290a 2020 2020 2020 2020 2020  ault).          
+00022930: 636c 6965 6e74 203a 2067 6574 2063 6c69  client : get cli
+00022940: 656e 7420 4950 0a20 2020 2020 2020 2027  ent IP.        '
+00022950: 2727 0a20 2020 2020 2020 2069 6620 6d6f  ''.        if mo
+00022960: 6465 203d 3d20 2773 6572 7665 7227 3a0a  de == 'server':.
+00022970: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00022980: 726e 2073 656c 662e 7265 7175 6573 7473  rn self.requests
+00022990: 2e67 6574 5f68 6f73 7428 292e 7370 6c69  .get_host().spli
+000229a0: 7428 273a 2729 0a20 2020 2020 2020 2065  t(':').        e
+000229b0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000229c0: 2078 5f66 6f72 7761 7264 6564 5f66 6f72   x_forwarded_for
+000229d0: 203d 2073 656c 662e 7265 7175 6573 7473   = self.requests
+000229e0: 2e4d 4554 412e 6765 7428 2748 5454 505f  .META.get('HTTP_
+000229f0: 585f 464f 5257 4152 4445 445f 464f 5227  X_FORWARDED_FOR'
+00022a00: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00022a10: 2078 5f66 6f72 7761 7264 6564 5f66 6f72   x_forwarded_for
+00022a20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00022a30: 2020 7265 7475 726e 2078 5f66 6f72 7761    return x_forwa
+00022a40: 7264 6564 5f66 6f72 2e73 706c 6974 2827  rded_for.split('
+00022a50: 2c27 295b 305d 0a20 2020 2020 2020 2020  ,')[0].         
+00022a60: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00022a70: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00022a80: 7365 6c66 2e72 6571 7565 7374 732e 4d45  self.requests.ME
+00022a90: 5441 2e67 6574 2827 5245 4d4f 5445 5f41  TA.get('REMOTE_A
+00022aa0: 4444 5227 290a 0a20 2020 2064 6566 204d  DDR')..    def M
+00022ab0: 6574 686f 6428 7365 6c66 2c6d 6574 686f  ethod(self,metho
+00022ac0: 645f 6e61 6d65 3d4e 6f6e 652c 6d6f 6465  d_name=None,mode
+00022ad0: 3d27 6c6f 7765 7227 293a 0a20 2020 2020  ='lower'):.     
+00022ae0: 2020 206d 6574 686f 645f 6e3d 7365 6c66     method_n=self
+00022af0: 2e72 6571 7565 7374 732e 6d65 7468 6f64  .requests.method
+00022b00: 0a20 2020 2020 2020 2069 6620 6d65 7468  .        if meth
+00022b10: 6f64 5f6e 616d 653a 0a20 2020 2020 2020  od_name:.       
+00022b20: 2020 2020 2072 6574 7572 6e20 6d65 7468       return meth
+00022b30: 6f64 5f6e 616d 652e 6c6f 7765 7228 2920  od_name.lower() 
+00022b40: 3d3d 206d 6574 686f 645f 6e2e 6c6f 7765  == method_n.lowe
+00022b50: 7228 290a 2020 2020 2020 2020 656c 7365  r().        else
+00022b60: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00022b70: 206d 6f64 6520 3d3d 2027 7570 7065 7227   mode == 'upper'
+00022b80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00022b90: 2020 7265 7475 726e 206d 6574 686f 645f    return method_
+00022ba0: 6e2e 7570 7065 7228 290a 2020 2020 2020  n.upper().      
+00022bb0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00022bc0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00022bd0: 726e 206d 6574 686f 645f 6e2e 6c6f 7765  rn method_n.lowe
+00022be0: 7228 290a 0a20 2020 2064 6566 2052 6571  r()..    def Req
+00022bf0: 7565 7374 2873 656c 662c 686f 7374 5f75  uest(self,host_u
+00022c00: 726c 2c2a 2a6f 7074 7329 3a0a 2020 2020  rl,**opts):.    
+00022c10: 2020 2020 2727 270a 2020 2020 2020 2020      '''.        
+00022c20: 7573 6572 2026 2070 6173 7377 6f72 643a  user & password:
+00022c30: 2073 7472 696e 6720 666f 726d 6174 0a20   string format. 
+00022c40: 2020 2020 2020 2061 7574 683a 2074 7570         auth: tup
+00022c50: 6c65 2066 6f72 6d61 740a 2020 2020 2020  le format.      
+00022c60: 2020 6461 7461 3a20 6469 6374 696f 6e61    data: dictiona
+00022c70: 7279 2066 6f72 6d61 740a 2020 2020 2020  ry format.      
+00022c80: 2020 6a73 6f6e 3a20 6469 6374 696f 6e61    json: dictiona
+00022c90: 7279 202f 204a 534f 4e20 666f 726d 6174  ry / JSON format
+00022ca0: 0a20 2020 2020 2020 2066 696c 6573 3a20  .        files: 
+00022cb0: 6469 6374 696f 6e61 7279 2066 6f72 6d61  dictionary forma
+00022cc0: 740a 2020 2020 2020 2020 2020 2065 7829  t.           ex)
+00022cd0: 2066 696c 6573 203d 207b 2027 3c66 696c   files = { '<fil
+00022ce0: 6520 7061 7261 6d65 7465 7220 6e61 6d65  e parameter name
+00022cf0: 3e27 3a20 283c 6669 6c65 6e61 6d65 3e2c  >': (<filename>,
+00022d00: 206f 7065 6e28 3c66 696c 656e 616d 653e   open(<filename>
+00022d10: 2c27 7262 2729 297d 0a20 2020 2020 2020  ,'rb'))}.       
+00022d20: 2068 6561 6465 7273 3a20 7374 7269 6e67   headers: string
+00022d30: 206f 7220 6469 6374 696f 6e61 7279 2066   or dictionary f
+00022d40: 6f72 6d61 740a 2020 2020 2020 2020 2020  ormat.          
+00022d50: 202d 2073 7472 696e 6720 6578 616d 706c   - string exampl
+00022d60: 650a 2020 2020 2020 2020 2020 2020 2068  e.             h
+00022d70: 6561 6465 7273 3d27 6a73 6f6e 270a 2020  eaders='json'.  
+00022d80: 2020 2020 2020 2020 2020 2072 6571 7569             requi
+00022d90: 7265 6420 6461 7461 206f 7220 6a73 6f6e  red data or json
+00022da0: 200a 2020 2020 2020 2020 2020 202d 2064   .           - d
+00022db0: 6963 7469 6f6e 6172 7920 6578 616d 706c  ictionary exampl
+00022dc0: 650a 2020 2020 2020 2020 2020 2020 2068  e.             h
+00022dd0: 6561 6465 7273 203d 207b 2022 436f 6e74  eaders = { "Cont
+00022de0: 656e 742d 5479 7065 223a 2022 6170 706c  ent-Type": "appl
+00022df0: 6963 6174 696f 6e2f 6a73 6f6e 227d 0a20  ication/json"}. 
+00022e00: 2020 2020 2020 2064 6267 203a 2054 7275         dbg : Tru
+00022e10: 653a 2073 686f 7720 6465 6275 6769 6e67  e: show debuging
+00022e20: 206c 6f67 2864 6566 6175 6c74 292c 2046   log(default), F
+00022e30: 616c 7365 2069 676e 6f72 6520 6465 6275  alse ignore debu
+00022e40: 6767 696e 6720 6c6f 670a 2020 2020 2020  gging log.      
+00022e50: 2020 7069 6e67 3a20 5472 7565 3a20 4368    ping: True: Ch
+00022e60: 6563 6b20 6465 7374 2049 5020 7769 7468  eck dest IP with
+00022e70: 2070 696e 672c 2046 616c 7365 3a20 6e6f   ping, False: no
+00022e80: 7420 6368 6563 6b20 6465 7374 2049 5020  t check dest IP 
+00022e90: 2864 6566 6175 6c74 290a 2020 2020 2020  (default).      
+00022ea0: 2020 6d61 785f 7472 793a 2064 6566 6175    max_try: defau
+00022eb0: 6c74 2033 2c20 7265 7472 7920 6d61 7820  lt 3, retry max 
+00022ec0: 6e75 6d62 6572 2077 6865 6e20 6661 696c  number when fail
+00022ed0: 6564 0a20 2020 2020 2020 206d 6f64 653a  ed.        mode:
+00022ee0: 2064 6566 6175 6c74 2067 6574 2c20 2867   default get, (g
+00022ef0: 6574 2c70 6f73 742c 7061 7463 6829 0a20  et,post,patch). 
+00022f00: 2020 2020 2020 2069 703a 2064 6573 7420         ip: dest 
+00022f10: 4950 0a20 2020 2020 2020 2070 6f72 743a  IP.        port:
+00022f20: 2064 6566 6175 6c74 2038 3020 6f72 2034   default 80 or 4
+00022f30: 3433 2c20 6172 7263 6f72 6469 6e67 2074  43, arrcording t
+00022f40: 6f20 6874 7470 206f 7220 6874 7470 732c  o http or https,
+00022f50: 2069 6620 796f 7520 7761 6e74 2073 7065   if you want spe
+00022f60: 6369 616c 2070 6f72 7420 7468 656e 2074  cial port then t
+00022f70: 7970 650a 2020 2020 2020 2020 626d 633a  ype.        bmc:
+00022f80: 2064 6566 6175 6c74 2046 616c 7365 2c20   default False, 
+00022f90: 5472 7565 2074 6865 6e20 6175 746f 6d61  True then automa
+00022fa0: 7469 6361 6c6c 2063 6865 636b 2042 4d43  ticall check BMC
+00022fb0: 2070 6f72 740a 2020 2020 2020 2020 7469   port.        ti
+00022fc0: 6d65 6f75 743a 2072 6571 7565 7374 2074  meout: request t
+00022fd0: 696d 656f 7574 2028 7365 636f 6e64 7329  imeout (seconds)
+00022fe0: 2c20 6465 6661 756c 7420 4e6f 6e65 0a20  , default None. 
+00022ff0: 2020 2020 2020 2027 2727 0a20 2020 2020         '''.     
+00023000: 2020 2023 2072 656d 6f76 6520 5353 4c20     # remove SSL 
+00023010: 7761 7269 6e67 2065 7272 6f72 206d 6573  waring error mes
+00023020: 7361 6765 2028 7465 7374 290a 2020 2020  sage (test).    
+00023030: 2020 2020 7365 6c66 2e72 6571 7565 7374      self.request
+00023040: 732e 7061 636b 6167 6573 2e75 726c 6c69  s.packages.urlli
+00023050: 6233 2e64 6973 6162 6c65 5f77 6172 6e69  b3.disable_warni
+00023060: 6e67 7328 290a 0a20 2020 2020 2020 2069  ngs()..        i
+00023070: 703d 6f70 7473 2e67 6574 2827 6970 272c  p=opts.get('ip',
+00023080: 4e6f 6e65 290a 2020 2020 2020 2020 706f  None).        po
+00023090: 7274 3d6f 7074 732e 6765 7428 2770 6f72  rt=opts.get('por
+000230a0: 7427 2c4e 6f6e 6529 0a20 2020 2020 2020  t',None).       
+000230b0: 2062 6d63 3d6f 7074 732e 6765 7428 2762   bmc=opts.get('b
+000230c0: 6d63 272c 4661 6c73 6529 0a20 2020 2020  mc',False).     
+000230d0: 2020 206d 6f64 653d 6f70 7473 2e67 6574     mode=opts.get
+000230e0: 2827 6d6f 6465 272c 6f70 7473 2e67 6574  ('mode',opts.get
+000230f0: 2827 6d65 7468 6f64 272c 2767 6574 2729  ('method','get')
+00023100: 290a 2020 2020 2020 2020 6d61 785f 7472  ).        max_tr
+00023110: 793d 6f70 7473 2e67 6574 2827 6d61 785f  y=opts.get('max_
+00023120: 7472 7927 2c6f 7074 732e 6765 7428 2772  try',opts.get('r
+00023130: 6574 7279 272c 6f70 7473 2e67 6574 2827  etry',opts.get('
+00023140: 6c6f 6f70 272c 6f70 7473 2e67 6574 2827  loop',opts.get('
+00023150: 7472 7927 2c33 2929 2929 2023 2052 6574  try',3)))) # Ret
+00023160: 7279 206d 6178 206e 756d 6265 720a 2020  ry max number.  
+00023170: 2020 2020 2020 6175 7468 3d6f 7074 732e        auth=opts.
+00023180: 6765 7428 2761 7574 6827 2c4e 6f6e 6529  get('auth',None)
+00023190: 0a20 2020 2020 2020 2075 7365 723d 6f70  .        user=op
+000231a0: 7473 2e67 6574 2827 7573 6572 272c 4e6f  ts.get('user',No
+000231b0: 6e65 290a 2020 2020 2020 2020 7061 7373  ne).        pass
+000231c0: 7764 3d6f 7074 732e 6765 7428 2770 6173  wd=opts.get('pas
+000231d0: 7377 6427 2c4e 6f6e 6529 0a20 2020 2020  swd',None).     
+000231e0: 2020 2064 6174 613d 6f70 7473 2e67 6574     data=opts.get
+000231f0: 2827 6461 7461 272c 4e6f 6e65 2920 2320  ('data',None) # 
+00023200: 6469 6374 696f 6e61 7279 2066 6f72 6d61  dictionary forma
+00023210: 740a 2020 2020 2020 2020 6a73 6f6e 5f64  t.        json_d
+00023220: 6174 613d 6f70 7473 2e67 6574 2827 6a73  ata=opts.get('js
+00023230: 6f6e 272c 4e6f 6e65 2920 2320 6469 6374  on',None) # dict
+00023240: 696f 6e61 7279 2066 6f72 6d61 740a 2020  ionary format.  
+00023250: 2020 2020 2020 6669 6c65 733d 6f70 7473        files=opts
+00023260: 2e67 6574 2827 6669 6c65 7327 2c4e 6f6e  .get('files',Non
+00023270: 6529 2023 2064 6963 7469 6f6e 6172 7920  e) # dictionary 
+00023280: 666f 726d 6174 0a20 2020 2020 2020 2072  format.        r
+00023290: 6571 7565 7374 5f75 726c 3d6f 7074 732e  equest_url=opts.
+000232a0: 6765 7428 2772 6571 7565 7374 5f75 726c  get('request_url
+000232b0: 272c 4e6f 6e65 290a 2020 2020 2020 2020  ',None).        
+000232c0: 6462 673d 6f70 7473 2e67 6574 2827 6462  dbg=opts.get('db
+000232d0: 6727 2c54 7275 6529 2020 2320 7368 6f77  g',True)  # show
+000232e0: 2064 6562 7567 6769 6e67 206c 6f67 0a20   debugging log. 
+000232f0: 2020 2020 2020 2070 696e 673d 6f70 7473         ping=opts
+00023300: 2e67 6574 2827 7069 6e67 272c 4661 6c73  .get('ping',Fals
+00023310: 6529 2023 2063 6865 636b 2070 696e 6720  e) # check ping 
+00023320: 746f 2049 500a 2020 2020 2020 2020 7469  to IP.        ti
+00023330: 6d65 6f75 743d 6f70 7473 2e67 6574 2827  meout=opts.get('
+00023340: 7469 6d65 6f75 7427 2c4e 6f6e 6529 2023  timeout',None) #
+00023350: 2072 6571 7565 7374 2074 696d 656f 7574   request timeout
+00023360: 0a20 2020 2020 2020 2072 6571 5f64 6174  .        req_dat
+00023370: 613d 7b7d 0a20 2020 2020 2020 2063 686b  a={}.        chk
+00023380: 5f64 6573 743d 4e6f 6e65 0a20 2020 2020  _dest=None.     
+00023390: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+000233a0: 2874 696d 656f 7574 2c69 6e74 293a 2072  (timeout,int): r
+000233b0: 6571 5f64 6174 615b 2774 696d 656f 7574  eq_data['timeout
+000233c0: 275d 3d74 696d 656f 7574 0a20 2020 2020  ']=timeout.     
+000233d0: 2020 2069 6620 6f70 7473 2e67 6574 2827     if opts.get('
+000233e0: 6874 7470 7327 293a 2072 6571 5f64 6174  https'): req_dat
+000233f0: 615b 2776 6572 6966 7927 5d3d 4661 6c73  a['verify']=Fals
+00023400: 650a 2020 2020 2020 2020 6966 2054 7970  e.        if Typ
+00023410: 6528 6175 7468 2c27 7475 706c 6527 2c64  e(auth,'tuple',d
+00023420: 6174 613d 5472 7565 293a 0a20 2020 2020  ata=True):.     
+00023430: 2020 2020 2020 2072 6571 5f64 6174 615b         req_data[
+00023440: 2761 7574 6827 5d3d 6f70 7473 2e67 6574  'auth']=opts.get
+00023450: 2827 6175 7468 2729 0a20 2020 2020 2020  ('auth').       
+00023460: 2065 6c69 6620 5479 7065 2875 7365 722c   elif Type(user,
+00023470: 2773 7472 272c 6461 7461 3d54 7275 6529  'str',data=True)
+00023480: 2061 6e64 2054 7970 6528 7061 7373 7764   and Type(passwd
+00023490: 2c27 7374 7227 2c64 6174 613d 5472 7565  ,'str',data=True
+000234a0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+000234b0: 6571 5f64 6174 615b 2761 7574 6827 5d3d  eq_data['auth']=
+000234c0: 2875 7365 722c 7061 7373 7764 290a 2020  (user,passwd).  
+000234d0: 2020 2020 2020 6966 2054 7970 6528 6461        if Type(da
+000234e0: 7461 2c27 6469 6374 272c 6461 7461 3d54  ta,'dict',data=T
+000234f0: 7275 6529 3a20 7265 715f 6461 7461 5b27  rue): req_data['
+00023500: 6461 7461 275d 3d6f 7074 732e 6765 7428  data']=opts.get(
+00023510: 2764 6174 6127 290a 2020 2020 2020 2020  'data').        
+00023520: 6966 2054 7970 6528 6a73 6f6e 5f64 6174  if Type(json_dat
+00023530: 612c 2764 6963 7427 2c64 6174 613d 5472  a,'dict',data=Tr
+00023540: 7565 293a 2072 6571 5f64 6174 615b 276a  ue): req_data['j
+00023550: 736f 6e27 5d3d 6a73 6f6e 5f64 6174 610a  son']=json_data.
+00023560: 2020 2020 2020 2020 2020 2020 0a20 2020              .   
+00023570: 2020 2020 2069 6620 5479 7065 2866 696c       if Type(fil
+00023580: 6573 2c27 6469 6374 272c 6461 7461 3d54  es,'dict',data=T
+00023590: 7275 6529 3a20 7265 715f 6461 7461 5b27  rue): req_data['
+000235a0: 6669 6c65 7327 5d3d 6f70 7473 2e67 6574  files']=opts.get
+000235b0: 2827 6669 6c65 7327 290a 2020 2020 2020  ('files').      
+000235c0: 2020 6865 6164 6572 733d 6f70 7473 2e67    headers=opts.g
+000235d0: 6574 2827 6865 6164 6572 7327 2920 2320  et('headers') # 
+000235e0: 6469 6374 696f 6e61 7279 2066 6f72 6d61  dictionary forma
+000235f0: 740a 2020 2020 2020 2020 6966 2054 7970  t.        if Typ
+00023600: 6528 6865 6164 6572 732c 2773 7472 272c  e(headers,'str',
+00023610: 6461 7461 3d54 7275 6529 3a0a 2020 2020  data=True):.    
+00023620: 2020 2020 2020 2020 6966 2068 6561 6465          if heade
+00023630: 7273 203d 3d20 276a 736f 6e27 3a0a 2020  rs == 'json':.  
+00023640: 2020 2020 2020 2020 2020 2020 2020 6865                he
+00023650: 6164 6572 733d 7b20 2243 6f6e 7465 6e74  aders={ "Content
+00023660: 2d54 7970 6522 3a20 2261 7070 6c69 6361  -Type": "applica
+00023670: 7469 6f6e 2f6a 736f 6e22 7d0a 2020 2020  tion/json"}.    
+00023680: 2020 2020 2020 2020 2020 2020 6966 2064              if d
+00023690: 6174 613a 0a20 2020 2020 2020 2020 2020  ata:.           
+000236a0: 2020 2020 2020 2020 2064 6174 613d 6a73           data=js
+000236b0: 6f6e 2e64 756d 7073 2864 6174 6129 0a20  on.dumps(data). 
+000236c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000236d0: 2020 2072 6571 5f64 6174 615b 2764 6174     req_data['dat
+000236e0: 6127 5d3d 6461 7461 0a20 2020 2020 2020  a']=data.       
+000236f0: 2020 2020 2020 2020 2065 6c69 6620 6a73           elif js
+00023700: 6f6e 5f64 6174 613a 0a20 2020 2020 2020  on_data:.       
+00023710: 2020 2020 2020 2020 2020 2020 2064 6174               dat
+00023720: 613d 6a73 6f6e 2e64 756d 7073 286a 736f  a=json.dumps(jso
+00023730: 6e5f 6461 7461 290a 2020 2020 2020 2020  n_data).        
+00023740: 2020 2020 2020 2020 2020 2020 6966 2027              if '
+00023750: 6a73 6f6e 2720 696e 2072 6571 5f64 6174  json' in req_dat
+00023760: 613a 2072 6571 5f64 6174 612e 706f 7028  a: req_data.pop(
+00023770: 276a 736f 6e27 290a 2020 2020 2020 2020  'json').        
+00023780: 2020 2020 2020 2020 2020 2020 7265 715f              req_
+00023790: 6461 7461 5b27 6461 7461 275d 3d64 6174  data['data']=dat
+000237a0: 610a 2020 2020 2020 2020 656c 6966 2054  a.        elif T
+000237b0: 7970 6528 6865 6164 6572 732c 2764 6963  ype(headers,'dic
+000237c0: 7427 2c64 6174 613d 5472 7565 293a 0a20  t',data=True):. 
+000237d0: 2020 2020 2020 2020 2020 2072 6571 5f64             req_d
+000237e0: 6174 615b 2768 6561 6465 7273 275d 3d68  ata['headers']=h
+000237f0: 6561 6465 7273 0a20 2020 2020 2020 2069  eaders.        i
+00023800: 6620 6e6f 7420 4973 4e6f 6e65 2869 7029  f not IsNone(ip)
+00023810: 3a0a 2020 2020 2020 2020 2020 2020 6970  :.            ip
+00023820: 3d49 7056 3428 6970 2c6f 7574 3d73 7472  =IpV4(ip,out=str
+00023830: 290a 2020 2020 2020 2020 2020 2020 6368  ).            ch
+00023840: 6b5f 6465 7374 3d27 7b7d 272e 666f 726d  k_dest='{}'.form
+00023850: 6174 2869 7029 0a20 2020 2020 2020 2020  at(ip).         
+00023860: 2020 2069 6620 7265 715f 6461 7461 2e67     if req_data.g
+00023870: 6574 2827 7665 7269 6679 272c 5472 7565  et('verify',True
+00023880: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00023890: 2020 2068 6f73 745f 7572 6c3d 2768 7474     host_url='htt
+000238a0: 703a 2f2f 7b7d 272e 666f 726d 6174 2869  p://{}'.format(i
+000238b0: 7029 0a20 2020 2020 2020 2020 2020 2065  p).            e
+000238c0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000238d0: 2020 2020 2068 6f73 745f 7572 6c3d 2768       host_url='h
+000238e0: 7474 7073 3a2f 2f7b 7d27 2e66 6f72 6d61  ttps://{}'.forma
+000238f0: 7428 6970 290a 2020 2020 2020 2020 2020  t(ip).          
+00023900: 2020 6966 206e 6f74 2049 734e 6f6e 6528    if not IsNone(
+00023910: 706f 7274 293a 2068 6f73 745f 7572 6c3d  port): host_url=
+00023920: 277b 7d3a 7b7d 272e 666f 726d 6174 2868  '{}:{}'.format(h
+00023930: 6f73 745f 7572 6c2c 706f 7274 290a 2020  ost_url,port).  
+00023940: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00023950: 2049 734e 6f6e 6528 7265 7175 6573 745f   IsNone(request_
+00023960: 7572 6c29 3a20 686f 7374 5f75 726c 3d27  url): host_url='
+00023970: 7b7d 2f7b 7d27 2e66 6f72 6d61 7428 686f  {}/{}'.format(ho
+00023980: 7374 5f75 726c 2c72 6571 7565 7374 5f75  st_url,request_u
+00023990: 726c 290a 2020 2020 2020 2020 656c 6966  rl).        elif
+000239a0: 2054 7970 6528 686f 7374 5f75 726c 2c27   Type(host_url,'
+000239b0: 7374 7227 2c64 6174 613d 5472 7565 2920  str',data=True) 
+000239c0: 616e 6420 686f 7374 5f75 726c 2e73 7461  and host_url.sta
+000239d0: 7274 7377 6974 6828 2768 7474 7027 293a  rtswith('http'):
+000239e0: 0a20 2020 2020 2020 2020 2020 2063 686b  .            chk
+000239f0: 5f64 6573 743d 7265 2e63 6f6d 7069 6c65  _dest=re.compile
+00023a00: 2827 2868 7474 707c 6874 7470 7329 3a2f  ('(http|https):/
+00023a10: 2f28 5b61 2d7a 412d 5a30 2d39 2e5d 2a29  /([a-zA-Z0-9.]*)
+00023a20: 5b3a 2f5d 2729 2e66 696e 6461 6c6c 2868  [:/]').findall(h
+00023a30: 6f73 745f 7572 6c29 0a20 2020 2020 2020  ost_url).       
+00023a40: 2020 2020 2069 6620 6c65 6e28 6368 6b5f       if len(chk_
+00023a50: 6465 7374 293d 3d30 3a0a 2020 2020 2020  dest)==0:.      
+00023a60: 2020 2020 2020 2020 2020 6368 6b5f 6465            chk_de
+00023a70: 7374 3d72 652e 636f 6d70 696c 6528 2728  st=re.compile('(
+00023a80: 6874 7470 7c68 7474 7073 293a 2f2f 285b  http|https)://([
+00023a90: 612d 7a41 2d5a 302d 392e 5d2a 2927 292e  a-zA-Z0-9.]*)').
+00023aa0: 6669 6e64 616c 6c28 686f 7374 5f75 726c  findall(host_url
+00023ab0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00023ac0: 206c 656e 2863 686b 5f64 6573 7429 3a0a   len(chk_dest):.
+00023ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023ae0: 6368 6b5f 6465 7374 3d63 686b 5f64 6573  chk_dest=chk_des
+00023af0: 745b 305d 5b31 5d0a 2020 2020 2020 2020  t[0][1].        
+00023b00: 2020 2020 2020 2020 6966 2068 6f73 745f          if host_
+00023b10: 7572 6c2e 6669 6e64 2827 6874 7470 733a  url.find('https:
+00023b20: 2f2f 2729 203d 3d20 303a 0a20 2020 2020  //') == 0:.     
+00023b30: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00023b40: 6571 5f64 6174 615b 2776 6572 6966 7927  eq_data['verify'
+00023b50: 5d3d 4661 6c73 650a 2020 2020 2020 2020  ]=False.        
+00023b60: 6966 2049 734e 6f6e 6528 6368 6b5f 6465  if IsNone(chk_de
+00023b70: 7374 293a 0a20 2020 2020 2020 2020 2020  st):.           
+00023b80: 2072 6574 7572 6e20 4661 6c73 652c 2768   return False,'h
+00023b90: 6f73 745f 7572 6c20 6f72 2069 7020 6e6f  ost_url or ip no
+00023ba0: 7420 666f 756e 6427 0a20 2020 2020 2020  t found'.       
+00023bb0: 2069 6620 626d 633a 0a20 2020 2020 2020   if bmc:.       
+00023bc0: 2020 2020 2069 6620 4970 5634 2863 686b       if IpV4(chk
+00023bd0: 5f64 6573 742c 626d 633d 5472 7565 2920  _dest,bmc=True) 
+00023be0: 6973 2046 616c 7365 3a0a 2020 2020 2020  is False:.      
+00023bf0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00023c00: 2046 616c 7365 2c27 5468 6520 4950 287b   False,'The IP({
+00023c10: 7d29 2069 7320 6e6f 7420 424d 4320 4950  }) is not BMC IP
+00023c20: 272e 666f 726d 6174 2863 686b 5f64 6573  '.format(chk_des
+00023c30: 7429 0a20 2020 2020 2020 2069 6620 7069  t).        if pi
+00023c40: 6e67 2061 6e64 2063 686b 5f64 6573 743a  ng and chk_dest:
+00023c50: 0a20 2020 2020 2020 2020 2020 2070 696e  .            pin
+00023c60: 675f 7263 3d70 696e 6728 6368 6b5f 6465  g_rc=ping(chk_de
+00023c70: 7374 2c74 696d 656f 7574 5f73 6563 3d33  st,timeout_sec=3
+00023c80: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00023c90: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+00023ca0: 7069 6e67 5f72 632c 626f 6f6c 2920 616e  ping_rc,bool) an
+00023cb0: 6420 7069 6e67 5f72 633d 3d30 3a0a 2020  d ping_rc==0:.  
+00023cc0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00023cd0: 7475 726e 2030 2c27 4361 6e63 656c 6564  turn 0,'Canceled
+00023ce0: 270a 2020 2020 2020 2020 2020 2020 656c  '.            el
+00023cf0: 6966 206e 6f74 2070 696e 675f 7263 3a0a  if not ping_rc:.
+00023d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023d10: 7265 7475 726e 2046 616c 7365 2c27 4361  return False,'Ca
+00023d20: 6e20 6e6f 7420 6163 6365 7373 2074 6f20  n not access to 
+00023d30: 6465 7374 696e 6174 696f 6e28 7b7d 2927  destination({})'
+00023d40: 2e66 6f72 6d61 7428 6368 6b5f 6465 7374  .format(chk_dest
+00023d50: 290a 2020 2020 2020 2020 7373 203d 2073  ).        ss = s
+00023d60: 656c 662e 7265 7175 6573 7473 2e53 6573  elf.requests.Ses
+00023d70: 7369 6f6e 2829 0a20 2020 2020 2020 2065  sion().        e
+00023d80: 7272 5f6d 7367 3d27 270a 2020 2020 2020  rr_msg=''.      
+00023d90: 2020 666f 7220 6a20 696e 2072 616e 6765    for j in range
+00023da0: 2830 2c6d 6178 5f74 7279 293a 0a20 2020  (0,max_try):.   
+00023db0: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
+00023dc0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00023dd0: 2049 7353 616d 6528 6d6f 6465 2c27 706f   IsSame(mode,'po
+00023de0: 7374 2729 3a0a 2020 2020 2020 2020 2020  st'):.          
+00023df0: 2020 2020 2020 2020 2020 7220 3d73 732e            r =ss.
+00023e00: 706f 7374 2868 6f73 745f 7572 6c2c 2a2a  post(host_url,**
+00023e10: 7265 715f 6461 7461 290a 2020 2020 2020  req_data).      
+00023e20: 2020 2020 2020 2020 2020 656c 6966 2049            elif I
+00023e30: 7353 616d 6528 6d6f 6465 2c27 7061 7463  sSame(mode,'patc
+00023e40: 6827 293a 0a20 2020 2020 2020 2020 2020  h'):.           
+00023e50: 2020 2020 2020 2020 2072 203d 7373 2e70           r =ss.p
+00023e60: 6174 6368 2868 6f73 745f 7572 6c2c 2a2a  atch(host_url,**
+00023e70: 7265 715f 6461 7461 290a 2020 2020 2020  req_data).      
+00023e80: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00023e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023ea0: 2020 2020 7220 3d73 732e 6765 7428 686f      r =ss.get(ho
+00023eb0: 7374 5f75 726c 2c2a 2a72 6571 5f64 6174  st_url,**req_dat
+00023ec0: 6129 0a20 2020 2020 2020 2020 2020 2020  a).             
+00023ed0: 2020 2072 6574 7572 6e20 5472 7565 2c72     return True,r
+00023ee0: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
+00023ef0: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
+00023f00: 2020 2020 2070 6173 730a 2020 2020 2020       pass.      
+00023f10: 2020 2020 2020 2365 7863 6570 7420 7265        #except re
+00023f20: 7175 6573 7473 2e65 7863 6570 7469 6f6e  quests.exception
+00023f30: 732e 5265 7175 6573 7445 7863 6570 7469  s.RequestExcepti
+00023f40: 6f6e 2061 7320 653a 0a20 2020 2020 2020  on as e:.       
+00023f50: 2020 2020 2065 7272 5f6d 7367 3d27 5365       err_msg='Se
+00023f60: 7276 6572 287b 7d29 2068 6173 206e 6f20  rver({}) has no 
+00023f70: 7265 7370 6f6e 7365 272e 666f 726d 6174  response'.format
+00023f80: 2863 686b 5f64 6573 7429 0a20 2020 2020  (chk_dest).     
+00023f90: 2020 2020 2020 2069 6620 6462 673a 2053         if dbg: S
+00023fa0: 7464 4572 7228 225c 6e53 6572 7665 7228  tdErr("\nServer(
+00023fb0: 7b7d 2920 6861 7320 6e6f 2072 6573 706f  {}) has no respo
+00023fc0: 6e73 6520 2877 6169 7420 7b7d 2f7b 7d20  nse (wait {}/{} 
+00023fd0: 2831 3073 2929 222e 666f 726d 6174 2863  (10s))".format(c
+00023fe0: 686b 5f64 6573 742c 6a2c 6d61 785f 7472  hk_dest,j,max_tr
+00023ff0: 7929 290a 2020 2020 2020 2020 2020 2020  y)).            
+00024000: 7469 6d65 2e73 6c65 6570 2831 3029 0a20  time.sleep(10). 
+00024010: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+00024020: 6c73 652c 2754 696d 654f 7574 3a20 7b7d  lse,'TimeOut: {}
+00024030: 272e 666f 726d 6174 2865 7272 5f6d 7367  '.format(err_msg
+00024040: 2920 6966 2065 7272 5f6d 7367 2065 6c73  ) if err_msg els
+00024050: 6520 2754 696d 654f 7574 270a 0a20 2020  e 'TimeOut'..   
+00024060: 2064 6566 2073 7472 3275 726c 2873 656c   def str2url(sel
+00024070: 662c 7374 7269 6e67 293a 0a20 2020 2020  f,string):.     
+00024080: 2020 2069 6620 4973 4e6f 6e65 2873 7472     if IsNone(str
+00024090: 696e 6729 3a20 7265 7475 726e 2027 270a  ing): return ''.
+000240a0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+000240b0: 7461 6e63 6528 7374 7269 6e67 2c73 7472  tance(string,str
+000240c0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+000240d0: 6574 7572 6e20 7374 7269 6e67 2e72 6570  eturn string.rep
+000240e0: 6c61 6365 2827 2b27 2c27 2532 4227 292e  lace('+','%2B').
+000240f0: 7265 706c 6163 6528 273f 272c 2725 3346  replace('?','%3F
+00024100: 2729 2e72 6570 6c61 6365 2827 2f27 2c27  ').replace('/','
+00024110: 2532 4627 292e 7265 706c 6163 6528 273a  %2F').replace(':
+00024120: 272c 2725 3341 2729 2e72 6570 6c61 6365  ','%3A').replace
+00024130: 2827 3d27 2c27 2533 4427 292e 7265 706c  ('=','%3D').repl
+00024140: 6163 6528 2720 272c 272b 2729 0a20 2020  ace(' ','+').   
+00024150: 2020 2020 2072 6574 7572 6e20 7374 7269       return stri
+00024160: 6e67 0a0a 2020 2020 6465 6620 666f 726d  ng..    def form
+00024170: 3264 6963 7428 7365 6c66 2c73 7263 3d4e  2dict(self,src=N
+00024180: 6f6e 6529 3a0a 2020 2020 2020 2020 6966  one):.        if
+00024190: 2049 734e 6f6e 6528 7372 6329 3a20 7372   IsNone(src): sr
+000241a0: 633d 7365 6c66 2e72 6571 7565 7374 732e  c=self.requests.
+000241b0: 666f 726d 0a20 2020 2020 2020 2072 6574  form.        ret
+000241c0: 7572 6e20 4469 6374 2873 7263 290a 0a20  urn Dict(src).. 
+000241d0: 2020 2064 6566 2068 6967 686c 6967 6874     def highlight
+000241e0: 2873 656c 662c 7374 7269 6e67 732c 6669  (self,strings,fi
+000241f0: 6e64 2c63 6f6c 6f72 3d27 2366 6666 6634  nd,color='#ffff4
+00024200: 3227 293a 0a20 2020 2020 2020 2069 6620  2'):.        if 
+00024210: 6973 696e 7374 616e 6365 2873 7472 696e  isinstance(strin
+00024220: 6773 2c73 7472 293a 0a20 2020 2020 2020  gs,str):.       
+00024230: 2020 2020 2066 663d 7265 2e63 6f6d 7069       ff=re.compi
+00024240: 6c65 2866 696e 642c 7265 2e49 290a 2020  le(find,re.I).  
+00024250: 2020 2020 2020 2020 2020 616c 6c5f 6666            all_ff
+00024260: 3d66 662e 6669 6e64 616c 6c28 7374 7269  =ff.findall(stri
+00024270: 6e67 7329 0a20 2020 2020 2020 2020 2020  ngs).           
+00024280: 2069 6620 6c65 6e28 616c 6c5f 6666 2920   if len(all_ff) 
+00024290: 3e30 3a0a 2020 2020 2020 2020 2020 2020  >0:.            
+000242a0: 2020 2020 666f 7220 6d6d 2069 6e20 616c      for mm in al
+000242b0: 6c5f 6666 3a0a 2020 2020 2020 2020 2020  l_ff:.          
+000242c0: 2020 2020 2020 2020 2020 7374 7269 6e67            string
+000242d0: 733d 7374 7269 6e67 732e 7265 706c 6163  s=strings.replac
+000242e0: 6528 6d6d 2c27 2727 3c66 6f6e 7420 7374  e(mm,'''<font st
+000242f0: 796c 653d 2262 6163 6b67 726f 756e 642d  yle="background-
+00024300: 636f 6c6f 723a 7b31 7d22 3e7b 307d 3c2f  color:{1}">{0}</
+00024310: 666f 6e74 3e27 2727 2e66 6f72 6d61 7428  font>'''.format(
+00024320: 6d6d 2c63 6f6c 6f72 2929 0a20 2020 2020  mm,color)).     
+00024330: 2020 2072 6574 7572 6e20 7374 7269 6e67     return string
+00024340: 730a 0a0a 636c 6173 7320 5449 4d45 3a0a  s...class TIME:.
+00024350: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00024360: 2873 656c 662c 7372 633d 4e6f 6e65 2c74  (self,src=None,t
+00024370: 696d 657a 6f6e 653d 4e6f 6e65 293a 0a20  imezone=None):. 
+00024380: 2020 2020 2020 2073 656c 662e 7469 6d65         self.time
+00024390: 7a6f 6e65 3d74 696d 657a 6f6e 650a 2020  zone=timezone.  
+000243a0: 2020 2020 2020 7365 6c66 2e69 6e69 745f        self.init_
+000243b0: 7469 6d65 3d73 656c 662e 4e6f 7728 7469  time=self.Now(ti
+000243c0: 6d65 7a6f 6e65 3d74 696d 657a 6f6e 6529  mezone=timezone)
+000243d0: 0a20 2020 2020 2020 2073 656c 662e 6c69  .        self.li
+000243e0: 6665 5f74 696d 653d 7365 6c66 2e69 6e69  fe_time=self.ini
+000243f0: 745f 7469 6d65 0a20 2020 2020 2020 2073  t_time.        s
+00024400: 656c 662e 696e 6974 5f73 6563 3d69 6e74  elf.init_sec=int
+00024410: 2873 656c 662e 696e 6974 5f74 696d 652e  (self.init_time.
+00024420: 7374 7266 7469 6d65 2827 2573 2729 290a  strftime('%s')).
+00024430: 2020 2020 2020 2020 7365 6c66 2e73 7263          self.src
+00024440: 3d73 7263 0a0a 2020 2020 6465 6620 5370  =src..    def Sp
+00024450: 656e 6428 7365 6c66 2c6c 6966 655f 7469  end(self,life_ti
+00024460: 6d65 3d54 7275 652c 756e 6974 3d4e 6f6e  me=True,unit=Non
+00024470: 652c 696e 7465 6765 723d 5472 7565 293a  e,integer=True):
+00024480: 0a20 2020 2020 2020 2069 6620 6c69 6665  .        if life
+00024490: 5f74 696d 653a 0a20 2020 2020 2020 2020  _time:.         
+000244a0: 2020 2072 743d 696e 7428 7365 6c66 2e4e     rt=int(self.N
+000244b0: 6f77 2829 2e73 7472 6674 696d 6528 2725  ow().strftime('%
+000244c0: 7327 2929 202d 2069 6e74 2873 656c 662e  s')) - int(self.
+000244d0: 6c69 6665 5f74 696d 652e 7374 7266 7469  life_time.strfti
+000244e0: 6d65 2827 2573 2729 290a 2020 2020 2020  me('%s')).      
+000244f0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00024500: 2020 2020 7274 3d69 6e74 2873 656c 662e      rt=int(self.
+00024510: 4e6f 7728 292e 7374 7266 7469 6d65 2827  Now().strftime('
+00024520: 2573 2729 2920 2d20 7365 6c66 2e69 6e69  %s')) - self.ini
+00024530: 745f 7365 630a 2020 2020 2020 2020 2320  t_sec.        # 
+00024540: 436f 6e76 6572 7420 696e 7465 6765 7220  Convert integer 
+00024550: 7661 6c75 6520 746f 2068 756d 616e 2072  value to human r
+00024560: 6561 6461 626c 6520 7469 6d65 0a20 2020  eadable time.   
+00024570: 2020 2020 2023 2075 6e69 743a 204e 6f6e       # unit: Non
+00024580: 6520 2c20 696e 7465 6765 723a 206f 7574  e , integer: out
+00024590: 7075 7420 3a20 7365 636f 6e64 7320 2869  put : seconds (i
+000245a0: 6e74 290a 2020 2020 2020 2020 2320 556e  nt).        # Un
+000245b0: 6974 3a20 4e6f 6e65 202c 206e 6f74 2069  it: None , not i
+000245c0: 6e74 6567 6572 3a20 6f75 7470 7574 203a  nteger: output :
+000245d0: 2048 756d 616e 2072 6561 6461 626c 6520   Human readable 
+000245e0: 7061 7373 6564 2074 696d 6520 7374 7269  passed time stri
+000245f0: 6e67 2028 6175 746f 6d61 7469 6361 6c6c  ng (automaticall
+00024600: 7920 6361 6c63 756c 6174 6529 0a20 2020  y calculate).   
+00024610: 2020 2020 2023 2055 6e69 743a 2075 6e69       # Unit: uni
+00024620: 7420 2c20 696e 7465 6765 723a 206f 7574  t , integer: out
+00024630: 7075 7420 3a20 7468 6520 756e 6974 2773  put : the unit's
+00024640: 206e 756d 6265 7220 2869 6e74 290a 2020   number (int).  
+00024650: 2020 2020 2020 2320 556e 6974 3a20 756e        # Unit: un
+00024660: 6974 202c 206e 6f74 2069 6e74 6567 6572  it , not integer
+00024670: 3a20 6f75 7470 7574 203a 2048 756d 616e  : output : Human
+00024680: 2072 6561 6461 626c 6520 7061 7373 6564   readable passed
+00024690: 2074 696d 6520 7374 7269 6e67 2028 6d61   time string (ma
+000246a0: 7820 6973 2064 6566 696e 6564 2075 6e69  x is defined uni
+000246b0: 7429 0a20 2020 2020 2020 2072 6574 7572  t).        retur
+000246c0: 6e20 4875 6d61 6e5f 556e 6974 2872 742c  n Human_Unit(rt,
+000246d0: 756e 6974 3d27 5327 2c77 616e 745f 756e  unit='S',want_un
+000246e0: 6974 3d75 6e69 742c 696e 745f 6f75 743d  it=unit,int_out=
+000246f0: 696e 7465 6765 7229 0a0a 2020 2020 6465  integer)..    de
+00024700: 6620 5265 7365 7428 7365 6c66 2c74 696d  f Reset(self,tim
+00024710: 657a 6f6e 653d 4e6f 6e65 293a 0a20 2020  ezone=None):.   
+00024720: 2020 2020 2073 656c 662e 696e 6974 5f74       self.init_t
+00024730: 696d 653d 7365 6c66 2e4e 6f77 2874 696d  ime=self.Now(tim
+00024740: 657a 6f6e 653d 7469 6d65 7a6f 6e65 290a  ezone=timezone).
+00024750: 2020 2020 2020 2020 7365 6c66 2e69 6e69          self.ini
+00024760: 745f 7365 633d 696e 7428 7365 6c66 2e69  t_sec=int(self.i
+00024770: 6e69 745f 7469 6d65 2e73 7472 6674 696d  nit_time.strftim
+00024780: 6528 2725 7327 2929 0a0a 2020 2020 6465  e('%s'))..    de
+00024790: 6620 536c 6565 7028 7365 6c66 2c74 7279  f Sleep(self,try
+000247a0: 5f77 6169 743d 4e6f 6e65 2c64 6566 6175  _wait=None,defau
+000247b0: 6c74 3d31 293a 0a20 2020 2020 2020 2069  lt=1):.        i
+000247c0: 6620 6973 696e 7374 616e 6365 2874 7279  f isinstance(try
+000247d0: 5f77 6169 742c 2869 6e74 2c73 7472 2929  _wait,(int,str))
+000247e0: 3a20 7472 795f 7761 6974 3d28 7472 795f  : try_wait=(try_
+000247f0: 7761 6974 2c29 0a20 2020 2020 2020 2069  wait,).        i
+00024800: 6620 6973 696e 7374 616e 6365 2874 7279  f isinstance(try
+00024810: 5f77 6169 742c 286c 6973 742c 7475 706c  _wait,(list,tupl
+00024820: 6529 2920 616e 6420 6c65 6e28 7472 795f  e)) and len(try_
+00024830: 7761 6974 293a 0a20 2020 2020 2020 2020  wait):.         
+00024840: 2020 2069 6620 6c65 6e28 7472 795f 7761     if len(try_wa
+00024850: 6974 2920 3d3d 2032 3a0a 2020 2020 2020  it) == 2:.      
+00024860: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
+00024870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024880: 2020 2074 696d 652e 736c 6565 7028 7261     time.sleep(ra
+00024890: 6e64 6f6d 2e72 616e 6469 6e74 2869 6e74  ndom.randint(int
+000248a0: 2874 7279 5f77 6169 745b 305d 292c 696e  (try_wait[0]),in
+000248b0: 7428 7472 795f 7761 6974 5b31 5d29 2929  t(try_wait[1])))
+000248c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000248d0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+000248e0: 2020 2020 2020 2020 2020 2020 2070 6173               pas
+000248f0: 730a 2020 2020 2020 2020 2020 2020 656c  s.            el
+00024900: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00024910: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+00024920: 2020 2020 2020 2020 2020 2020 2074 696d               tim
+00024930: 652e 736c 6565 7028 696e 7428 7472 795f  e.sleep(int(try_
+00024940: 7761 6974 5b30 5d29 290a 2020 2020 2020  wait[0])).      
+00024950: 2020 2020 2020 2020 2020 6578 6365 7074            except
+00024960: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00024970: 2020 2020 2020 7061 7373 0a20 2020 2020        pass.     
+00024980: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00024990: 2020 2020 2074 696d 652e 736c 6565 7028       time.sleep(
+000249a0: 6465 6661 756c 7429 0a20 2020 2064 6566  default).    def
+000249b0: 2052 616e 6428 7365 6c66 2c74 7279 5f77   Rand(self,try_w
+000249c0: 6169 743d 4e6f 6e65 2c64 6566 6175 6c74  ait=None,default
+000249d0: 3d31 293a 0a20 2020 2020 2020 2069 6620  =1):.        if 
+000249e0: 6973 696e 7374 616e 6365 2874 7279 5f77  isinstance(try_w
+000249f0: 6169 742c 2869 6e74 2c73 7472 2929 3a20  ait,(int,str)): 
+00024a00: 7472 795f 7761 6974 3d28 7472 795f 7761  try_wait=(try_wa
+00024a10: 6974 2c29 0a20 2020 2020 2020 2069 6620  it,).        if 
+00024a20: 6973 696e 7374 616e 6365 2874 7279 5f77  isinstance(try_w
+00024a30: 6169 742c 286c 6973 742c 7475 706c 6529  ait,(list,tuple)
+00024a40: 2920 616e 6420 6c65 6e28 7472 795f 7761  ) and len(try_wa
+00024a50: 6974 293a 0a20 2020 2020 2020 2020 2020  it):.           
+00024a60: 2069 6620 6c65 6e28 7472 795f 7761 6974   if len(try_wait
+00024a70: 2920 3d3d 2032 3a0a 2020 2020 2020 2020  ) == 2:.        
+00024a80: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+00024a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024aa0: 2072 6574 7572 6e20 7261 6e64 6f6d 2e72   return random.r
+00024ab0: 616e 6469 6e74 2869 6e74 2874 7279 5f77  andint(int(try_w
+00024ac0: 6169 745b 305d 292c 696e 7428 7472 795f  ait[0]),int(try_
+00024ad0: 7761 6974 5b31 5d29 290a 2020 2020 2020  wait[1])).      
+00024ae0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+00024af0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00024b00: 2020 2020 2020 7061 7373 0a20 2020 2020        pass.     
+00024b10: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00024b20: 2020 2020 2020 2020 2020 2020 2074 7279               try
+00024b30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00024b40: 2020 2020 2020 7265 7475 726e 2069 6e74        return int
+00024b50: 2874 7279 5f77 6169 745b 305d 290a 2020  (try_wait[0]).  
+00024b60: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+00024b70: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
+00024b80: 2020 2020 2020 2020 2020 7061 7373 0a20            pass. 
+00024b90: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+00024ba0: 6661 756c 740a 0a20 2020 2064 6566 2049  fault..    def I
+00024bb0: 6e74 2873 656c 662c 7469 6d65 7a6f 6e65  nt(self,timezone
+00024bc0: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+00024bd0: 7265 7475 726e 2073 656c 662e 4e6f 7728  return self.Now(
+00024be0: 696e 742c 7469 6d65 7a6f 6e65 3d74 696d  int,timezone=tim
+00024bf0: 657a 6f6e 6529 0a0a 2020 2020 6465 6620  ezone)..    def 
+00024c00: 4e6f 7728 7365 6c66 2c6d 6f64 653d 4e6f  Now(self,mode=No
+00024c10: 6e65 2c74 696d 657a 6f6e 653d 4e6f 6e65  ne,timezone=None
+00024c20: 2c74 696d 6564 6174 613d 4e6f 6e65 293a  ,timedata=None):
+00024c30: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+00024c40: 7374 616e 6365 2874 696d 6564 6174 612c  stance(timedata,
+00024c50: 7365 6c66 2e44 6174 6574 696d 6528 2929  self.Datetime())
+00024c60: 3a0a 2020 2020 2020 2020 2020 2020 7469  :.            ti
+00024c70: 6d65 6461 7461 3d73 656c 662e 696e 6974  medata=self.init
+00024c80: 5f74 696d 650a 2020 2020 2020 2020 656c  _time.        el
+00024c90: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00024ca0: 6966 2074 696d 657a 6f6e 6520 6973 204e  if timezone is N
+00024cb0: 6f6e 653a 2074 696d 657a 6f6e 653d 7365  one: timezone=se
+00024cc0: 6c66 2e74 696d 657a 6f6e 650a 2020 2020  lf.timezone.    
+00024cd0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00024ce0: 7461 6e63 6528 7469 6d65 7a6f 6e65 2c73  tance(timezone,s
+00024cf0: 7472 2920 616e 6420 7469 6d65 7a6f 6e65  tr) and timezone
+00024d00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00024d10: 2020 496d 706f 7274 2827 696d 706f 7274    Import('import
+00024d20: 2070 7974 7a27 290a 2020 2020 2020 2020   pytz').        
+00024d30: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+00024d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024d50: 2074 696d 657a 6f6e 653d 7079 747a 2e74   timezone=pytz.t
+00024d60: 696d 657a 6f6e 6528 7469 6d65 7a6f 6e65  imezone(timezone
+00024d70: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00024d80: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
+00024d90: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00024da0: 696e 7466 2827 556e 6b6e 6f77 6e20 6375  intf('Unknown cu
+00024db0: 7272 656e 7420 7469 6d65 7a6f 6e65 2028  rrent timezone (
+00024dc0: 7b7d 2927 2e66 6f72 6d61 7428 7469 6d65  {})'.format(time
+00024dd0: 7a6f 6e65 292c 6d6f 6465 3d27 6527 290a  zone),mode='e').
+00024de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024df0: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+00024e00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00024e10: 2074 696d 6564 6174 613d 7365 6c66 2e44   timedata=self.D
+00024e20: 6174 6574 696d 6528 292e 6e6f 7728 7469  atetime().now(ti
+00024e30: 6d65 7a6f 6e65 290a 2020 2020 2020 2020  mezone).        
+00024e40: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00024e50: 2020 2020 2020 2020 2020 7469 6d65 6461            timeda
+00024e60: 7461 3d73 656c 662e 4461 7465 7469 6d65  ta=self.Datetime
+00024e70: 2829 2e6e 6f77 2829 0a20 2020 2020 2020  ().now().       
+00024e80: 2069 6620 6d6f 6465 2069 6e20 5b69 6e74   if mode in [int
+00024e90: 2c27 696e 7427 2c27 494e 5427 2c27 7365  ,'int','INT','se
+00024ea0: 6327 5d3a 0a20 2020 2020 2020 2020 2020  c']:.           
+00024eb0: 2072 6574 7572 6e20 696e 7428 7469 6d65   return int(time
+00024ec0: 6461 7461 2e73 7472 6674 696d 6528 2725  data.strftime('%
+00024ed0: 7327 2929 0a20 2020 2020 2020 2065 6c73  s')).        els
+00024ee0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00024ef0: 6574 7572 6e20 7469 6d65 6461 7461 0a0a  eturn timedata..
+00024f00: 2020 2020 6465 6620 4f75 7428 7365 6c66      def Out(self
+00024f10: 2c74 696d 656f 7574 5f73 6563 2c64 6566  ,timeout_sec,def
+00024f20: 6175 6c74 3d28 3234 2a33 3630 3029 293a  ault=(24*3600)):
+00024f30: 0a20 2020 2020 2020 2074 696d 656f 7574  .        timeout
+00024f40: 5f73 6563 3d49 6e74 2874 696d 656f 7574  _sec=Int(timeout
+00024f50: 5f73 6563 2c64 6566 6175 6c74 290a 2020  _sec,default).  
+00024f60: 2020 2020 2020 6966 2074 696d 656f 7574        if timeout
+00024f70: 5f73 6563 203d 3d20 303a 0a20 2020 2020  _sec == 0:.     
+00024f80: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+00024f90: 6c73 650a 2020 2020 2020 2020 6966 2073  lse.        if s
+00024fa0: 656c 662e 496e 7428 2920 2d20 7365 6c66  elf.Int() - self
+00024fb0: 2e69 6e69 745f 7365 6320 3e20 2074 696d  .init_sec >  tim
+00024fc0: 656f 7574 5f73 6563 3a0a 2020 2020 2020  eout_sec:.      
+00024fd0: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+00024fe0: 650a 2020 2020 2020 2020 7265 7475 726e  e.        return
+00024ff0: 2046 616c 7365 0a20 2020 2064 6566 2046   False.    def F
+00025000: 6f72 6d61 7428 7365 6c66 2c74 666f 726d  ormat(self,tform
+00025010: 6174 3d27 2573 272c 7265 6164 5f66 6f72  at='%s',read_for
+00025020: 6d61 743d 2725 5327 2c74 696d 653d 275f  mat='%S',time='_
+00025030: 235f 2729 3a0a 2020 2020 2020 2020 6966  #_'):.        if
+00025040: 2049 734e 6f6e 6528 7469 6d65 2c63 686b   IsNone(time,chk
+00025050: 5f76 616c 3d5b 275f 235f 275d 2c63 686b  _val=['_#_'],chk
+00025060: 5f6f 6e6c 793d 5472 7565 293a 2074 696d  _only=True): tim
+00025070: 653d 7365 6c66 2e73 7263 0a20 2020 2020  e=self.src.     
+00025080: 2020 2069 6620 4973 4e6f 6e65 2874 696d     if IsNone(tim
+00025090: 652c 6368 6b5f 7661 6c3d 5b4e 6f6e 652c  e,chk_val=[None,
+000250a0: 2727 2c30 2c27 3027 5d29 3a0a 2020 2020  '',0,'0']):.    
+000250b0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+000250c0: 656c 662e 4e6f 7728 292e 7374 7266 7469  elf.Now().strfti
+000250d0: 6d65 2874 666f 726d 6174 290a 2020 2020  me(tformat).    
+000250e0: 2020 2020 656c 6966 2072 6561 645f 666f      elif read_fo
+000250f0: 726d 6174 203d 3d20 2725 5327 3a0a 2020  rmat == '%S':.  
+00025100: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+00025110: 6e73 7461 6e63 6528 7469 6d65 2c69 6e74  nstance(time,int
+00025120: 2920 6f72 2028 6973 696e 7374 616e 6365  ) or (isinstance
+00025130: 2874 696d 652c 7374 7229 2061 6e64 2074  (time,str) and t
+00025140: 696d 652e 6973 6469 6769 7428 2929 3a0a  ime.isdigit()):.
+00025150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025160: 7265 7475 726e 2073 656c 662e 4461 7465  return self.Date
+00025170: 7469 6d65 2829 2e66 726f 6d74 696d 6573  time().fromtimes
+00025180: 7461 6d70 2869 6e74 2874 696d 6529 292e  tamp(int(time)).
+00025190: 7374 7266 7469 6d65 2874 666f 726d 6174  strftime(tformat
+000251a0: 290a 2020 2020 2020 2020 656c 6966 2069  ).        elif i
+000251b0: 7369 6e73 7461 6e63 6528 7469 6d65 2c73  sinstance(time,s
+000251c0: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+000251d0: 2072 6574 7572 6e20 7365 6c66 2e44 6174   return self.Dat
+000251e0: 6574 696d 6528 292e 7374 7270 7469 6d65  etime().strptime
+000251f0: 2874 696d 652c 7265 6164 5f66 6f72 6d61  (time,read_forma
+00025200: 7429 2e73 7472 6674 696d 6528 7466 6f72  t).strftime(tfor
+00025210: 6d61 7429 0a20 2020 2020 2020 2065 6c69  mat).        eli
+00025220: 6620 6973 696e 7374 616e 6365 2874 696d  f isinstance(tim
+00025230: 652c 7365 6c66 2e44 6174 6574 696d 6528  e,self.Datetime(
+00025240: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+00025250: 7265 7475 726e 2074 696d 652e 7374 7266  return time.strf
+00025260: 7469 6d65 2874 666f 726d 6174 290a 0a20  time(tformat).. 
+00025270: 2020 2064 6566 2049 6e69 7428 7365 6c66     def Init(self
+00025280: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+00025290: 6e20 7365 6c66 2e69 6e69 745f 7365 630a  n self.init_sec.
+000252a0: 0a20 2020 2064 6566 2054 696d 6528 7365  .    def Time(se
+000252b0: 6c66 293a 0a20 2020 2020 2020 2072 6574  lf):.        ret
+000252c0: 7572 6e20 7469 6d65 2e74 696d 6528 290a  urn time.time().
+000252d0: 0a20 2020 2064 6566 2044 6174 6574 696d  .    def Datetim
+000252e0: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
+000252f0: 2072 6574 7572 6e20 6461 7465 7469 6d65   return datetime
+00025300: 2e64 6174 6574 696d 650a 0a20 2020 2064  .datetime..    d
+00025310: 6566 2050 7269 6e74 2873 656c 662c 7469  ef Print(self,ti
+00025320: 6d65 6461 7461 3d4e 6f6e 652c 7469 6d65  medata=None,time
+00025330: 5f66 6f72 6d61 743d 2725 592d 256d 2d25  _format='%Y-%m-%
+00025340: 6420 2548 3a25 4d3a 2553 2729 3a0a 2020  d %H:%M:%S'):.  
+00025350: 2020 2020 2020 6966 206e 6f74 2074 696d        if not tim
+00025360: 6564 6174 613a 2074 696d 6564 6174 613d  edata: timedata=
+00025370: 7365 6c66 2e69 6e69 745f 7469 6d65 0a20  self.init_time. 
+00025380: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00025390: 616e 6365 2874 696d 6564 6174 612c 7365  ance(timedata,se
+000253a0: 6c66 2e44 6174 6574 696d 6528 2929 3a0a  lf.Datetime()):.
+000253b0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000253c0: 726e 2074 696d 6564 6174 612e 7374 7266  rn timedata.strf
+000253d0: 7469 6d65 2827 2559 2d25 6d2d 2564 2025  time('%Y-%m-%d %
+000253e0: 483a 254d 3a25 5327 290a 2020 2020 2020  H:%M:%S').      
+000253f0: 2020 7265 7475 726e 2027 270a 0a20 2020    return ''..   
+00025400: 2064 6566 2052 6561 6453 7472 2873 656c   def ReadStr(sel
+00025410: 662c 7469 6d65 6461 7461 2c74 696d 655f  f,timedata,time_
+00025420: 666f 726d 6174 3d27 2559 2d25 6d2d 2564  format='%Y-%m-%d
+00025430: 2025 483a 254d 3a25 5327 293a 0a20 2020   %H:%M:%S'):.   
+00025440: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00025450: 6365 2874 696d 6564 6174 612c 7374 7229  ce(timedata,str)
+00025460: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00025470: 7475 726e 2073 656c 662e 4461 7465 7469  turn self.Dateti
+00025480: 6d65 2829 2e73 7472 7074 696d 6528 7469  me().strptime(ti
+00025490: 6d65 6461 7461 2c74 696d 655f 666f 726d  medata,time_form
+000254a0: 6174 290a 2020 2020 2020 2020 7265 7475  at).        retu
+000254b0: 726e 2027 270a 0a20 2020 2064 6566 2054  rn ''..    def T
+000254c0: 696d 655a 6f6e 6528 7365 6c66 2c73 6574  imeZone(self,set
+000254d0: 7a6f 6e65 3d4e 6f6e 652c 7761 6e74 3d4e  zone=None,want=N
+000254e0: 6f6e 652c 7469 6d65 6461 7461 3d4e 6f6e  one,timedata=Non
+000254f0: 6529 3a0a 2020 2020 2020 2020 2727 2773  e):.        '''s
+00025500: 6574 2074 696d 657a 6f6e 6520 6174 2074  et timezone at t
+00025510: 696d 6564 6174 6120 6f72 2063 6f6e 7665  imedata or conve
+00025520: 7274 2074 6f20 7761 6e74 2074 696d 657a  rt to want timez
+00025530: 6f6e 6527 2727 0a20 2020 2020 2020 2069  one'''.        i
+00025540: 6620 6e6f 7420 7469 6d65 6461 7461 3a20  f not timedata: 
+00025550: 7469 6d65 6461 7461 3d73 656c 662e 696e  timedata=self.in
+00025560: 6974 5f74 696d 650a 2020 2020 2020 2020  it_time.        
+00025570: 6966 2069 7369 6e73 7461 6e63 6528 7469  if isinstance(ti
+00025580: 6d65 6461 7461 2c73 656c 662e 4461 7465  medata,self.Date
+00025590: 7469 6d65 2829 293a 0a20 2020 2020 2020  time()):.       
+000255a0: 2020 2020 2049 6d70 6f72 7428 2769 6d70       Import('imp
+000255b0: 6f72 7420 7079 747a 2729 0a20 2020 2020  ort pytz').     
+000255c0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+000255d0: 616e 6365 2873 6574 7a6f 6e65 2c73 7472  ance(setzone,str
+000255e0: 2920 616e 6420 7365 747a 6f6e 653a 0a20  ) and setzone:. 
+000255f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00025600: 6620 7365 747a 6f6e 6520 696e 205b 276c  f setzone in ['l
+00025610: 6f63 616c 272c 276c 6f63 616c 7469 6d65  ocal','localtime
+00025620: 272c 276c 6f63 616c 7a6f 6e65 272c 276c  ','localzone','l
+00025630: 6f63 616c 7469 6d65 7a6f 6e65 275d 3a0a  ocaltimezone']:.
+00025640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025650: 2020 2020 7365 747a 6f6e 653d 4e6f 6e65      setzone=None
+00025660: 2023 2073 6574 2074 6f20 6c6f 6361 6c20   # set to local 
+00025670: 7469 6d65 7a6f 6e65 0a20 2020 2020 2020  timezone.       
+00025680: 2020 2020 2020 2020 2065 6c69 6620 7365           elif se
+00025690: 747a 6f6e 6520 696e 205b 2775 7463 272c  tzone in ['utc',
+000256a0: 2755 5443 275d 3a0a 2020 2020 2020 2020  'UTC']:.        
+000256b0: 2020 2020 2020 2020 2020 2020 7365 747a              setz
+000256c0: 6f6e 653d 7079 747a 2e75 7463 2020 2320  one=pytz.utc  # 
+000256d0: 7365 7420 746f 2055 5443 2074 696d 657a  set to UTC timez
+000256e0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+000256f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00025700: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+00025710: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+00025720: 2020 2020 2020 2020 2020 2073 6574 7a6f             setzo
+00025730: 6e65 3d70 7974 7a2e 7469 6d65 7a6f 6e65  ne=pytz.timezone
+00025740: 2873 6574 7a6f 6e65 2920 2320 7365 7420  (setzone) # set 
+00025750: 746f 2073 6574 7a6f 6e65 0a20 2020 2020  to setzone.     
+00025760: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00025770: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
+00025780: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00025790: 7269 6e74 6628 2755 6e6b 6e6f 776e 2063  rintf('Unknown c
+000257a0: 7572 7265 6e74 2074 696d 657a 6f6e 6520  urrent timezone 
+000257b0: 287b 7d29 272e 666f 726d 6174 2873 6574  ({})'.format(set
+000257c0: 7a6f 6e65 292c 6d6f 6465 3d27 6527 290a  zone),mode='e').
+000257d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000257e0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+000257f0: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
+00025800: 2069 6620 7365 747a 6f6e 6520 213d 2074   if setzone != t
+00025810: 696d 6564 6174 612e 747a 696e 666f 3a20  imedata.tzinfo: 
+00025820: 2320 6966 2064 6966 6665 7265 6e74 2074  # if different t
+00025830: 696d 657a 6f6e 6520 6265 7477 6565 6e20  imezone between 
+00025840: 736f 7572 6365 2074 696d 6520 616e 6420  source time and 
+00025850: 7365 747a 6f6e 650a 2020 2020 2020 2020  setzone.        
+00025860: 2020 2020 2020 2020 7469 6d65 6461 7461          timedata
+00025870: 3d74 696d 6564 6174 612e 7265 706c 6163  =timedata.replac
+00025880: 6528 747a 696e 666f 3d73 6574 7a6f 6e65  e(tzinfo=setzone
+00025890: 2920 2320 7365 7420 746f 2073 6574 7a6f  ) # set to setzo
+000258a0: 6e65 0a20 2020 2020 2020 2020 2020 2069  ne.            i
+000258b0: 6620 6973 696e 7374 616e 6365 2877 616e  f isinstance(wan
+000258c0: 742c 7374 7229 2061 6e64 2077 616e 743a  t,str) and want:
+000258d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000258e0: 2069 6620 7761 6e74 2069 6e20 5b27 6c6f   if want in ['lo
+000258f0: 6361 6c27 2c27 6c6f 6361 6c74 696d 6527  cal','localtime'
+00025900: 2c27 6c6f 6361 6c7a 6f6e 6527 2c27 6c6f  ,'localzone','lo
+00025910: 6361 6c74 696d 657a 6f6e 6527 5d3a 0a20  caltimezone']:. 
+00025920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025930: 2020 2077 616e 743d 4e6f 6e65 2023 2063     want=None # c
+00025940: 6f6e 7665 7274 2074 6f20 6c6f 6361 6c20  onvert to local 
+00025950: 7469 6d65 7a6f 6e65 0a20 2020 2020 2020  timezone.       
+00025960: 2020 2020 2020 2020 2065 6c69 6620 7761           elif wa
+00025970: 6e74 2069 6e20 5b27 7574 6327 2c27 5554  nt in ['utc','UT
+00025980: 4327 5d3a 0a20 2020 2020 2020 2020 2020  C']:.           
+00025990: 2020 2020 2020 2020 2077 616e 743d 7079           want=py
+000259a0: 747a 2e75 7463 2023 2063 6f6e 7665 7274  tz.utc # convert
+000259b0: 2020 746f 2075 7463 2074 696d 657a 6f6e    to utc timezon
+000259c0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+000259d0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000259e0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+000259f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00025a00: 2020 2020 2020 2020 2077 616e 743d 7079           want=py
+00025a10: 747a 2e74 696d 657a 6f6e 6528 7761 6e74  tz.timezone(want
+00025a20: 2920 2320 636f 6e76 6572 7420 746f 2077  ) # convert to w
+00025a30: 616e 7420 7469 6d65 7a6f 6e65 0a20 2020  ant timezone.   
+00025a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025a50: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+00025a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025a70: 2070 7269 6e74 6628 2755 6e6b 6e6f 776e   printf('Unknown
+00025a80: 2063 7572 7265 6e74 2074 696d 657a 6f6e   current timezon
+00025a90: 6520 287b 7d29 272e 666f 726d 6174 2877  e ({})'.format(w
+00025aa0: 616e 7429 2c6d 6f64 653d 2765 2729 0a20  ant),mode='e'). 
+00025ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025ac0: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+00025ad0: 6c73 650a 2020 2020 2020 2020 2020 2020  lse.            
+00025ae0: 2020 2020 6966 2073 6574 7a6f 6e65 2021      if setzone !
+00025af0: 3d20 7761 6e74 3a20 2320 6966 2064 6966  = want: # if dif
+00025b00: 6665 7265 6e74 2074 696d 657a 6f6e 6520  ferent timezone 
+00025b10: 6265 7477 6565 6e20 736f 7572 6365 2074  between source t
+00025b20: 696d 6520 616e 6420 7761 6e74 207a 6f6e  ime and want zon
+00025b30: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00025b40: 2020 2020 2020 6c6f 6361 6c74 696d 653d        localtime=
+00025b50: 7469 6d65 6461 7461 2e61 7374 696d 657a  timedata.astimez
+00025b60: 6f6e 6528 747a 3d77 616e 7429 0a20 2020  one(tz=want).   
+00025b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025b80: 2072 6574 7572 6e20 6c6f 6361 6c74 696d   return localtim
+00025b90: 650a 2020 2020 2020 2020 2020 2020 7265  e.            re
+00025ba0: 7475 726e 2074 696d 6564 6174 610a 2020  turn timedata.  
+00025bb0: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
+00025bc0: 7365 0a0a 2020 2020 6465 6620 5469 6d65  se..    def Time
+00025bd0: 5a6f 6e65 4e61 6d65 2873 656c 662c 7469  ZoneName(self,ti
+00025be0: 6d65 6461 7461 3d4e 6f6e 6529 3a0a 2020  medata=None):.  
+00025bf0: 2020 2020 2020 6966 206e 6f74 2074 696d        if not tim
+00025c00: 6564 6174 613a 2074 696d 6564 6174 613d  edata: timedata=
+00025c10: 7365 6c66 2e69 6e69 745f 7469 6d65 0a20  self.init_time. 
+00025c20: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00025c30: 616e 6365 2874 696d 6564 6174 612c 7365  ance(timedata,se
+00025c40: 6c66 2e44 6174 6574 696d 6528 2929 3a0a  lf.Datetime()):.
+00025c50: 2020 2020 2020 2020 2020 2020 747a 6e61              tzna
+00025c60: 6d65 3d74 696d 6564 6174 612e 747a 6e61  me=timedata.tzna
+00025c70: 6d65 2829 0a20 2020 2020 2020 2020 2020  me().           
+00025c80: 2072 6574 7572 6e20 747a 6e61 6d65 2069   return tzname i
+00025c90: 6620 747a 6e61 6d65 2065 6c73 6520 7469  f tzname else ti
+00025ca0: 6d65 6461 7461 2e61 7374 696d 657a 6f6e  medata.astimezon
+00025cb0: 6528 292e 747a 6e61 6d65 2829 0a0a 2020  e().tzname()..  
+00025cc0: 2020 6465 6620 5574 6332 4c6f 6361 6c28    def Utc2Local(
+00025cd0: 7365 6c66 2c74 696d 655f 666f 726d 6174  self,time_format
+00025ce0: 3d27 2559 2d25 6d2d 2564 2025 483a 254d  ='%Y-%m-%d %H:%M
+00025cf0: 3a25 5327 2c6d 6f64 653d 2773 7472 272c  :%S',mode='str',
+00025d00: 7469 6d65 6461 7461 3d4e 6f6e 6529 3a0a  timedata=None):.
+00025d10: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00025d20: 7461 6e63 6528 7469 6d65 6461 7461 2c73  tance(timedata,s
+00025d30: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+00025d40: 2074 696d 6564 6174 613d 7365 6c66 2e52   timedata=self.R
+00025d50: 6561 6453 7472 2874 696d 6564 6174 612c  eadStr(timedata,
+00025d60: 7469 6d65 5f66 6f72 6d61 743d 7469 6d65  time_format=time
+00025d70: 5f66 6f72 6d61 7429 0a20 2020 2020 2020  _format).       
+00025d80: 2065 6c69 6620 7469 6d65 6461 7461 2069   elif timedata i
+00025d90: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+00025da0: 2020 2020 7469 6d65 6461 7461 3d73 656c      timedata=sel
+00025db0: 662e 696e 6974 5f74 696d 650a 2020 2020  f.init_time.    
+00025dc0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00025dd0: 6528 7469 6d65 6461 7461 2c73 656c 662e  e(timedata,self.
+00025de0: 4461 7465 7469 6d65 2829 293a 0a20 2020  Datetime()):.   
+00025df0: 2020 2020 2020 2020 2074 696d 6564 6174           timedat
+00025e00: 613d 7365 6c66 2e54 696d 655a 6f6e 6528  a=self.TimeZone(
+00025e10: 7365 747a 6f6e 653d 2755 5443 272c 7761  setzone='UTC',wa
+00025e20: 6e74 3d27 6c6f 6361 6c27 2c74 696d 6564  nt='local',timed
+00025e30: 6174 613d 7469 6d65 6461 7461 290a 2020  ata=timedata).  
+00025e40: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00025e50: 2073 656c 662e 5072 696e 7428 7469 6d65   self.Print(time
+00025e60: 6461 7461 3d74 696d 6564 6174 6129 2069  data=timedata) i
+00025e70: 6620 6d6f 6465 3d3d 2773 7472 2720 656c  f mode=='str' el
+00025e80: 7365 2074 696d 6564 6174 610a 2020 2020  se timedata.    
+00025e90: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+00025ea0: 0a0a 6465 6620 7273 6865 6c6c 2863 6d64  ..def rshell(cmd
+00025eb0: 2c64 6267 3d46 616c 7365 2c74 696d 656f  ,dbg=False,timeo
+00025ec0: 7574 3d30 2c61 6e73 693d 4661 6c73 652c  ut=0,ansi=False,
+00025ed0: 696e 7465 7261 6374 6976 653d 4661 6c73  interactive=Fals
+00025ee0: 652c 6578 6563 7574 6162 6c65 3d27 2f62  e,executable='/b
+00025ef0: 696e 2f62 6173 6827 2c70 6174 683d 4e6f  in/bash',path=No
+00025f00: 6e65 2c70 726f 6772 6573 733d 4661 6c73  ne,progress=Fals
+00025f10: 652c 7072 6f67 7265 7373 5f70 7265 5f6e  e,progress_pre_n
+00025f20: 6577 5f6c 696e 653d 4661 6c73 652c 7072  ew_line=False,pr
+00025f30: 6f67 7265 7373 5f70 6f73 745f 6e65 775f  ogress_post_new_
+00025f40: 6c69 6e65 3d54 7275 652c 6c6f 673d 4e6f  line=True,log=No
+00025f50: 6e65 2c65 6e76 3d7b 7d2c 6675 6c6c 5f70  ne,env={},full_p
+00025f60: 6174 683d 4e6f 6e65 2c72 656d 6f76 655f  ath=None,remove_
+00025f70: 7061 7468 3d4e 6f6e 652c 7265 6d6f 7665  path=None,remove
+00025f80: 5f61 6c6c 5f70 6174 683d 4e6f 6e65 2c64  _all_path=None,d
+00025f90: 6566 6175 6c74 5f74 696d 656f 7574 3d33  efault_timeout=3
+00025fa0: 3630 302c 656e 765f 6f75 743d 4661 6c73  600,env_out=Fals
+00025fb0: 652c 6364 3d46 616c 7365 2c6b 6565 705f  e,cd=False,keep_
+00025fc0: 6377 643d 4661 6c73 652c 6465 636f 6465  cwd=False,decode
+00025fd0: 3d4e 6f6e 6529 3a0a 2020 2020 2727 270a  =None):.    '''.
+00025fe0: 2020 2020 496e 7465 7261 6374 6976 6520      Interactive 
+00025ff0: 7368 656c 6c0a 2020 2020 7061 7468 3a20  shell.    path: 
+00026000: 6170 7065 6e64 2074 6865 2070 6174 6820  append the path 
+00026010: 746f 2065 7869 7374 696e 6720 7379 7374  to existing syst
+00026020: 656d 2070 6174 680a 2020 2020 6675 6c6c  em path.    full
+00026030: 5f70 6174 683a 2065 7863 6861 6e67 6520  _path: exchange 
+00026040: 7468 6520 6675 6c6c 5f70 6174 6820 746f  the full_path to
+00026050: 2073 7973 7465 6d20 7061 7468 0a20 2020   system path.   
+00026060: 2072 656d 6f76 655f 7061 7468 3a20 7265   remove_path: re
+00026070: 6d6f 7665 2066 726f 6e74 2072 656d 6f76  move front remov
+00026080: 655f 7061 7468 2061 7420 6675 6c6c 5f70  e_path at full_p
+00026090: 6174 680a 2020 2020 7265 6d6f 7665 5f61  ath.    remove_a
+000260a0: 6c6c 5f70 6174 683a 2072 656d 6f76 6520  ll_path: remove 
+000260b0: 7265 6d6f 7665 5f61 6c6c 5f70 6174 6820  remove_all_path 
+000260c0: 696e 2066 756c 6c5f 7061 7468 0a20 2020  in full_path.   
+000260d0: 2064 6563 6f64 653a 2063 6861 7261 6374   decode: charact
+000260e0: 6572 2064 6563 6f64 696e 6720 2864 6566  er decoding (def
+000260f0: 6175 6c74 203a 2049 534f 2d38 3835 392d  ault : ISO-8859-
+00026100: 3129 2c20 6974 2063 6861 6e67 6564 2074  1), it changed t
+00026110: 6f20 5374 7228 2920 6465 6661 756c 740a  o Str() default.
+00026120: 2020 2020 2727 270a 2020 2020 2320 4f53      '''.    # OS
+00026130: 2065 6e76 6972 6f6e 6d65 6e74 730a 2020   environments.  
+00026140: 2020 6f73 5f65 6e76 3d64 6963 7428 6f73    os_env=dict(os
+00026150: 2e65 6e76 6972 6f6e 290a 2020 2020 6966  .environ).    if
+00026160: 2065 6e76 2061 6e64 2069 7369 6e73 7461   env and isinsta
+00026170: 6e63 6528 656e 762c 6469 6374 293a 0a20  nce(env,dict):. 
+00026180: 2020 2020 2020 2066 6f72 2069 6920 696e         for ii in
+00026190: 2065 6e76 3a0a 2020 2020 2020 2020 2020   env:.          
+000261a0: 2020 6966 2069 6920 696e 206f 735f 656e    if ii in os_en
+000261b0: 763a 0a20 2020 2020 2020 2020 2020 2020  v:.             
+000261c0: 2020 206f 735f 656e 765b 6969 5d3d 656e     os_env[ii]=en
+000261d0: 765b 6969 5d0a 0a20 2020 2064 6566 2063  v[ii]..    def c
+000261e0: 6d64 5f66 6f72 6d28 636d 6429 3a0a 2020  md_form(cmd):.  
+000261f0: 2020 2020 2020 636d 645f 613d 636d 642e        cmd_a=cmd.
+00026200: 7370 6c69 7428 290a 2020 2020 2020 2020  split().        
+00026210: 636d 645f 6669 6c65 3d63 6d64 5f61 5b30  cmd_file=cmd_a[0
+00026220: 5d0a 2020 2020 2020 2020 6966 2063 6d64  ].        if cmd
+00026230: 5f66 696c 655b 305d 2021 3d20 272f 2720  _file[0] != '/' 
+00026240: 616e 6420 636d 645f 6669 6c65 203d 3d20  and cmd_file == 
+00026250: 6f73 2e70 6174 682e 6261 7365 6e61 6d65  os.path.basename
+00026260: 2863 6d64 5f66 696c 6529 2061 6e64 206f  (cmd_file) and o
+00026270: 732e 7061 7468 2e69 7366 696c 6528 636d  s.path.isfile(cm
+00026280: 645f 6669 6c65 293a 0a20 2020 2020 2020  d_file):.       
+00026290: 2020 2020 2072 6574 7572 6e20 272e 2f27       return './'
+000262a0: 2b63 6d64 0a20 2020 2020 2020 2072 6574  +cmd.        ret
+000262b0: 7572 6e20 636d 640a 0a20 2020 2064 6566  urn cmd..    def
+000262c0: 2070 7072 6f67 2873 746f 702c 7072 6f67   pprog(stop,prog
+000262d0: 7265 7373 5f70 7265 5f6e 6577 5f6c 696e  ress_pre_new_lin
+000262e0: 653d 4661 6c73 652c 7072 6f67 7265 7373  e=False,progress
+000262f0: 5f70 6f73 745f 6e65 775f 6c69 6e65 3d54  _post_new_line=T
+00026300: 7275 652c 6c6f 673d 4e6f 6e65 2c70 726f  rue,log=None,pro
+00026310: 6772 6573 735f 696e 7465 7276 616c 3d35  gress_interval=5
+00026320: 293a 0a20 2020 2020 2020 2066 6f72 2069  ):.        for i
+00026330: 2069 6e20 7261 6e67 6528 302c 7072 6f67   in range(0,prog
+00026340: 7265 7373 5f69 6e74 6572 7661 6c2a 3130  ress_interval*10
+00026350: 293a 0a20 2020 2020 2020 2020 2020 2074  ):.            t
+00026360: 696d 652e 736c 6565 7028 302e 3129 0a20  ime.sleep(0.1). 
+00026370: 2020 2020 2020 2020 2020 2069 6620 7374             if st
+00026380: 6f70 2829 3a0a 2020 2020 2020 2020 2020  op():.          
+00026390: 2020 2020 2020 7265 7475 726e 0a20 2020        return.   
+000263a0: 2020 2020 206c 6f63 616c 5f70 7269 6e74       local_print
+000263b0: 6564 3d46 616c 7365 0a23 2020 2020 2020  ed=False.#      
+000263c0: 2020 6966 2070 726f 6772 6573 735f 7072    if progress_pr
+000263d0: 655f 6e65 775f 6c69 6e65 3a0a 2320 2020  e_new_line:.#   
+000263e0: 2020 2020 2020 2020 2070 7269 6e74 6628           printf(
+000263f0: 2727 2c69 676e 6f72 655f 656d 7074 793d  '',ignore_empty=
+00026400: 4661 6c73 652c 7374 6172 745f 6e65 776c  False,start_newl
+00026410: 696e 653d 5472 7565 2c6c 6f67 3d6c 6f67  ine=True,log=log
+00026420: 2c65 6e64 3d27 272c 6c6f 675f 6c65 7665  ,end='',log_leve
+00026430: 6c3d 3129 0a20 2020 2020 2020 2069 3d30  l=1).        i=0
+00026440: 0a20 2020 2020 2020 2077 6869 6c65 2054  .        while T
+00026450: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
+00026460: 2069 6620 7374 6f70 2829 3a20 6272 6561   if stop(): brea
+00026470: 6b0a 2020 2020 2020 2020 2020 2020 6966  k.            if
+00026480: 2069 203e 2070 726f 6772 6573 735f 696e   i > progress_in
+00026490: 7465 7276 616c 2a31 303a 0a20 2020 2020  terval*10:.     
+000264a0: 2020 2020 2020 2020 2020 2069 3d30 0a20             i=0. 
+000264b0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000264c0: 7269 6e74 6628 273e 272c 6469 7265 6374  rintf('>',direct
+000264d0: 3d54 7275 652c 6c6f 673d 6c6f 672c 6c6f  =True,log=log,lo
+000264e0: 675f 6c65 7665 6c3d 3129 0a20 2020 2020  g_level=1).     
+000264f0: 2020 2020 2020 2020 2020 206c 6f63 616c             local
+00026500: 5f70 7269 6e74 6564 3d54 7275 650a 2020  _printed=True.  
+00026510: 2020 2020 2020 2020 2020 692b 3d31 0a20            i+=1. 
+00026520: 2020 2020 2020 2020 2020 2074 696d 652e             time.
+00026530: 736c 6565 7028 302e 3129 0a20 2020 2020  sleep(0.1).     
+00026540: 2020 2069 6620 7072 6f67 7265 7373 5f70     if progress_p
+00026550: 6f73 745f 6e65 775f 6c69 6e65 2061 6e64  ost_new_line and
+00026560: 206c 6f63 616c 5f70 7269 6e74 6564 3a0a   local_printed:.
+00026570: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00026580: 7466 2827 272c 6967 6e6f 7265 5f65 6d70  tf('',ignore_emp
+00026590: 7479 3d46 616c 7365 2c63 616c 6c65 725f  ty=False,caller_
+000265a0: 7061 7265 6e74 3d31 2c6e 6f5f 696e 7472  parent=1,no_intr
+000265b0: 6f3d 5472 7565 2c6c 6f67 3d6c 6f67 2c6c  o=True,log=log,l
+000265c0: 6f67 5f6c 6576 656c 3d31 290a 2020 2020  og_level=1).    
+000265d0: 7374 6172 745f 7469 6d65 3d54 494d 4528  start_time=TIME(
+000265e0: 290a 2020 2020 6966 206e 6f74 2054 7970  ).    if not Typ
+000265f0: 6528 636d 642c 2773 7472 272c 6461 7461  e(cmd,'str',data
+00026600: 3d54 7275 6529 3a0a 2020 2020 2020 2020  =True):.        
+00026610: 7265 7475 726e 202d 312c 2777 726f 6e67  return -1,'wrong
+00026620: 2063 6f6d 6d61 6e64 2069 6e66 6f72 6d61   command informa
+00026630: 7469 6f6e 203a 7b30 7d27 2e66 6f72 6d61  tion :{0}'.forma
+00026640: 7428 636d 6429 2c27 272c 7374 6172 745f  t(cmd),'',start_
+00026650: 7469 6d65 2e49 6e69 7428 292c 7374 6172  time.Init(),star
+00026660: 745f 7469 6d65 2e49 6e69 7428 292c 7374  t_time.Init(),st
+00026670: 6172 745f 7469 6d65 2e4e 6f77 2869 6e74  art_time.Now(int
+00026680: 292c 636d 642c 7061 7468 0a0a 2020 2020  ),cmd,path..    
+00026690: 616e 7369 5f65 7363 6170 6520 3d20 7265  ansi_escape = re
+000266a0: 2e63 6f6d 7069 6c65 2872 275c 7831 425c  .compile(r'\x1B\
+000266b0: 5b5b 302d 3f5d 2a5b 202d 2f5d 2a5b 402d  [[0-?]*[ -/]*[@-
+000266c0: 7e5d 2729 0a20 2020 2050 6f70 656e 3d73  ~]').    Popen=s
+000266d0: 7562 7072 6f63 6573 732e 506f 7065 6e0a  ubprocess.Popen.
+000266e0: 2020 2020 5049 5045 3d73 7562 7072 6f63      PIPE=subproc
+000266f0: 6573 732e 5049 5045 0a20 2020 2053 5444  ess.PIPE.    STD
+00026700: 4f55 543d 7375 6270 726f 6365 7373 2e50  OUT=subprocess.P
+00026710: 4950 450a 2020 2020 6f75 742c 6572 723d  IPE.    out,err=
+00026720: 2727 2c27 270a 2020 2020 6578 655f 6e61  '',''.    exe_na
+00026730: 6d65 3d6f 732e 7061 7468 2e62 6173 656e  me=os.path.basen
+00026740: 616d 6528 6578 6563 7574 6162 6c65 2920  ame(executable) 
+00026750: 6966 2065 7865 6375 7461 626c 6520 656c  if executable el
+00026760: 7365 206f 732e 7061 7468 2e62 6173 656e  se os.path.basen
+00026770: 616d 6528 6f73 5f65 6e76 2e67 6574 2827  ame(os_env.get('
+00026780: 5348 454c 4c27 2c27 6261 7368 2729 290a  SHELL','bash')).
+00026790: 2020 2020 6966 2064 6267 3a0a 2020 2020      if dbg:.    
+000267a0: 2020 2020 6966 2065 7865 635f 6e61 6d65      if exec_name
+000267b0: 2069 6e20 5b27 6261 7368 272c 2773 6827   in ['bash','sh'
+000267c0: 5d3a 0a20 2020 2020 2020 2020 2020 2063  ]:.            c
+000267d0: 6d64 3d27 7365 7420 2d78 5c6e 2720 2b20  md='set -x\n' + 
+000267e0: 636d 640a 2020 2020 6966 2069 7369 6e73  cmd.    if isins
+000267f0: 7461 6e63 6528 7265 6d6f 7665 5f70 6174  tance(remove_pat
+00026800: 682c 7374 7229 2061 6e64 206c 656e 2872  h,str) and len(r
+00026810: 656d 6f76 655f 7061 7468 2920 3e20 3020  emove_path) > 0 
+00026820: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
+00026830: 2066 756c 6c5f 7061 7468 3a20 6675 6c6c   full_path: full
+00026840: 5f70 6174 683d 6f73 2e65 6e76 6972 6f6e  _path=os.environ
+00026850: 5b27 5041 5448 275d 0a20 2020 2020 2020  ['PATH'].       
+00026860: 2066 756c 6c5f 7061 7468 5f61 3d66 756c   full_path_a=ful
+00026870: 6c5f 7061 7468 2e73 706c 6974 2827 3a27  l_path.split(':'
+00026880: 290a 2020 2020 2020 2020 666f 7220 6969  ).        for ii
+00026890: 2069 6e20 7265 6d6f 7665 5f70 6174 682e   in remove_path.
+000268a0: 7370 6c69 7428 273a 2729 3a0a 2020 2020  split(':'):.    
+000268b0: 2020 2020 2020 2020 6966 2069 6920 696e          if ii in
+000268c0: 2066 756c 6c5f 7061 7468 5f61 3a0a 2020   full_path_a:.  
+000268d0: 2020 2020 2020 2020 2020 2020 2020 6675                fu
+000268e0: 6c6c 5f70 6174 685f 612e 7265 6d6f 7665  ll_path_a.remove
+000268f0: 2869 6929 0a20 2020 2020 2020 2066 756c  (ii).        ful
+00026900: 6c5f 7061 7468 3d27 3a27 2e6a 6f69 6e28  l_path=':'.join(
+00026910: 6675 6c6c 5f70 6174 685f 6129 0a20 2020  full_path_a).   
+00026920: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+00026930: 2872 656d 6f76 655f 616c 6c5f 7061 7468  (remove_all_path
+00026940: 2c73 7472 2920 616e 6420 6c65 6e28 7265  ,str) and len(re
+00026950: 6d6f 7665 5f61 6c6c 5f70 6174 6829 203e  move_all_path) >
+00026960: 2030 203a 0a20 2020 2020 2020 2069 6620   0 :.        if 
+00026970: 6e6f 7420 6675 6c6c 5f70 6174 683a 2066  not full_path: f
+00026980: 756c 6c5f 7061 7468 3d6f 732e 656e 7669  ull_path=os.envi
+00026990: 726f 6e5b 2750 4154 4827 5d0a 2020 2020  ron['PATH'].    
+000269a0: 2020 2020 6675 6c6c 5f70 6174 685f 613d      full_path_a=
+000269b0: 6675 6c6c 5f70 6174 682e 7370 6c69 7428  full_path.split(
+000269c0: 273a 2729 0a20 2020 2020 2020 2066 6f72  ':').        for
+000269d0: 2069 6920 696e 2072 656d 6f76 655f 616c   ii in remove_al
+000269e0: 6c5f 7061 7468 2e73 706c 6974 2827 3a27  l_path.split(':'
+000269f0: 293a 0a20 2020 2020 2020 2020 2020 2066  ):.            f
+00026a00: 756c 6c5f 7061 7468 5f61 3d5b 6920 666f  ull_path_a=[i fo
+00026a10: 7220 6920 696e 2066 756c 6c5f 7061 7468  r i in full_path
+00026a20: 5f61 2069 6620 6920 213d 2069 695d 0a20  _a if i != ii]. 
+00026a30: 2020 2020 2020 2066 756c 6c5f 7061 7468         full_path
+00026a40: 3d27 3a27 2e6a 6f69 6e28 6675 6c6c 5f70  =':'.join(full_p
+00026a50: 6174 685f 290a 2020 2020 6966 2065 7865  ath_).    if exe
+00026a60: 6375 7461 626c 653a 0a20 2020 2020 2020  cutable:.       
+00026a70: 2069 6620 6e6f 7420 6f73 2e70 6174 682e   if not os.path.
+00026a80: 6973 6669 6c65 2865 7865 6375 7461 626c  isfile(executabl
+00026a90: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+00026aa0: 6578 6563 7574 6162 6c65 3d66 696e 645f  executable=find_
+00026ab0: 6578 6563 7574 6162 6c65 2865 7865 5f6e  executable(exe_n
+00026ac0: 616d 6529 0a20 2020 2023 2323 2323 2323  ame).    #######
+00026ad0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00026ae0: 2323 2323 2323 2323 2323 0a20 2020 2023  ##########.    #
+00026af0: 2052 756e 2043 6f6d 6d61 6e64 0a20 2020   Run Command.   
+00026b00: 2023 2323 2323 2323 2323 2323 2323 2323   ###############
+00026b10: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00026b20: 2323 0a20 2020 2069 6620 6675 6c6c 5f70  ##.    if full_p
+00026b30: 6174 683a 0a20 2020 2020 2020 2069 6620  ath:.        if 
+00026b40: 6578 655f 6e61 6d65 2069 6e20 5b27 6373  exe_name in ['cs
+00026b50: 6827 2c27 7463 7368 275d 3a0a 2020 2020  h','tcsh']:.    
+00026b60: 2020 2020 2020 2020 7020 3d20 506f 7065          p = Pope
+00026b70: 6e28 2727 2773 6574 656e 7620 5041 5448  n('''setenv PATH
+00026b80: 2022 2573 223b 2025 7327 2727 2528 6675   "%s"; %s'''%(fu
+00026b90: 6c6c 5f70 6174 682c 636d 6429 202c 2073  ll_path,cmd) , s
+00026ba0: 6865 6c6c 3d54 7275 652c 2073 7464 6f75  hell=True, stdou
+00026bb0: 743d 5049 5045 2c20 7374 6465 7272 3d53  t=PIPE, stderr=S
+00026bc0: 5444 4f55 542c 6578 6563 7574 6162 6c65  TDOUT,executable
+00026bd0: 3d65 7865 6375 7461 626c 652c 2065 6e76  =executable, env
+00026be0: 3d6f 735f 656e 7629 0a20 2020 2020 2020  =os_env).       
+00026bf0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00026c00: 2020 2070 203d 2050 6f70 656e 2827 2727     p = Popen('''
+00026c10: 6578 706f 7274 2050 4154 483d 2573 3b20  export PATH=%s; 
+00026c20: 2573 2727 2725 2866 756c 6c5f 7061 7468  %s'''%(full_path
+00026c30: 2c63 6d64 2920 2c20 7368 656c 6c3d 5472  ,cmd) , shell=Tr
+00026c40: 7565 2c20 7374 646f 7574 3d50 4950 452c  ue, stdout=PIPE,
+00026c50: 2073 7464 6572 723d 5354 444f 5554 2c65   stderr=STDOUT,e
+00026c60: 7865 6375 7461 626c 653d 6578 6563 7574  xecutable=execut
+00026c70: 6162 6c65 2c20 656e 763d 6f73 5f65 6e76  able, env=os_env
+00026c80: 290a 2020 2020 656c 6966 2069 7369 6e73  ).    elif isins
+00026c90: 7461 6e63 6528 7061 7468 2c73 7472 2920  tance(path,str) 
+00026ca0: 616e 6420 6c65 6e28 7061 7468 2920 3e20  and len(path) > 
+00026cb0: 303a 0a20 2020 2020 2020 2069 6620 6364  0:.        if cd
+00026cc0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00026cd0: 206f 732e 7061 7468 2e69 7364 6972 2870   os.path.isdir(p
+00026ce0: 6174 6829 3a0a 2020 2020 2020 2020 2020  ath):.          
+00026cf0: 2020 2020 2020 2370 203d 2050 6f70 656e        #p = Popen
+00026d00: 2863 6d64 5f66 6f72 6d28 636d 6429 202c  (cmd_form(cmd) ,
+00026d10: 2073 6865 6c6c 3d54 7275 652c 2073 7464   shell=True, std
+00026d20: 6f75 743d 5049 5045 2c20 7374 6465 7272  out=PIPE, stderr
+00026d30: 3d53 5444 4f55 542c 6578 6563 7574 6162  =STDOUT,executab
+00026d40: 6c65 3d65 7865 6375 7461 626c 652c 2065  le=executable, e
+00026d50: 6e76 3d6f 735f 656e 762c 2063 7764 3d70  nv=os_env, cwd=p
+00026d60: 6174 6829 0a20 2020 2020 2020 2020 2020  ath).           
+00026d70: 2020 2020 2070 7764 3d6f 732e 6765 7463       pwd=os.getc
+00026d80: 7764 2829 0a20 2020 2020 2020 2020 2020  wd().           
+00026d90: 2020 2020 206f 732e 6368 6469 7228 7061       os.chdir(pa
+00026da0: 7468 2920 2320 666f 7220 636d 645f 666f  th) # for cmd_fo
+00026db0: 726d 2829 0a20 2020 2020 2020 2020 2020  rm().           
+00026dc0: 2020 2020 2070 203d 2050 6f70 656e 2863       p = Popen(c
+00026dd0: 6d64 5f66 6f72 6d28 636d 6429 202c 2073  md_form(cmd) , s
+00026de0: 6865 6c6c 3d54 7275 652c 2073 7464 6f75  hell=True, stdou
+00026df0: 743d 5049 5045 2c20 7374 6465 7272 3d53  t=PIPE, stderr=S
+00026e00: 5444 4f55 542c 6578 6563 7574 6162 6c65  TDOUT,executable
+00026e10: 3d65 7865 6375 7461 626c 652c 2065 6e76  =executable, env
+00026e20: 3d6f 735f 656e 7629 0a20 2020 2020 2020  =os_env).       
+00026e30: 2020 2020 2020 2020 2069 6620 6b65 6570           if keep
+00026e40: 5f63 7764 3a0a 2020 2020 2020 2020 2020  _cwd:.          
+00026e50: 2020 2020 2020 2020 2020 6f73 2e63 6864            os.chd
+00026e60: 6972 2870 7764 290a 2020 2020 2020 2020  ir(pwd).        
+00026e70: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00026e80: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00026e90: 2031 2c20 277b 7d20 6e6f 7420 666f 756e   1, '{} not foun
+00026ea0: 6427 2e66 6f72 6d61 7428 7061 7468 292c  d'.format(path),
+00026eb0: 2027 7b7d 206e 6f74 2066 6f75 6e64 272e   '{} not found'.
+00026ec0: 666f 726d 6174 2870 6174 6829 2c73 7461  format(path),sta
+00026ed0: 7274 5f74 696d 652e 496e 6974 2829 2c73  rt_time.Init(),s
+00026ee0: 7461 7274 5f74 696d 652e 4e6f 7728 696e  tart_time.Now(in
+00026ef0: 7429 2c63 6d64 2c70 6174 680a 2020 2020  t),cmd,path.    
+00026f00: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00026f10: 2020 2020 2020 6966 2065 7865 5f6e 616d        if exe_nam
+00026f20: 6520 696e 205b 2763 7368 272c 2774 6373  e in ['csh','tcs
+00026f30: 6827 5d3a 0a20 2020 2020 2020 2020 2020  h']:.           
+00026f40: 2020 2020 2070 203d 2050 6f70 656e 2827       p = Popen('
+00026f50: 2727 7365 7465 6e76 2050 4154 4820 2225  ''setenv PATH "%
+00026f60: 733a 247b 5041 5448 7d22 3b20 2573 2727  s:${PATH}"; %s''
+00026f70: 2725 2870 6174 682c 636d 6429 202c 2073  '%(path,cmd) , s
+00026f80: 6865 6c6c 3d54 7275 652c 2073 7464 6f75  hell=True, stdou
+00026f90: 743d 5049 5045 2c20 7374 6465 7272 3d53  t=PIPE, stderr=S
+00026fa0: 5444 4f55 542c 6578 6563 7574 6162 6c65  TDOUT,executable
+00026fb0: 3d65 7865 6375 7461 626c 652c 2065 6e76  =executable, env
+00026fc0: 3d6f 735f 656e 7629 0a20 2020 2020 2020  =os_env).       
+00026fd0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00026fe0: 2020 2020 2020 2020 2020 2070 203d 2050             p = P
+00026ff0: 6f70 656e 2827 2727 6578 706f 7274 2050  open('''export P
+00027000: 4154 483d 2573 3a24 7b50 4154 487d 3b20  ATH=%s:${PATH}; 
+00027010: 2573 2727 2725 2870 6174 682c 636d 6429  %s'''%(path,cmd)
+00027020: 202c 2073 6865 6c6c 3d54 7275 652c 2073   , shell=True, s
+00027030: 7464 6f75 743d 5049 5045 2c20 7374 6465  tdout=PIPE, stde
+00027040: 7272 3d53 5444 4f55 542c 6578 6563 7574  rr=STDOUT,execut
+00027050: 6162 6c65 3d65 7865 6375 7461 626c 652c  able=executable,
+00027060: 2065 6e76 3d6f 735f 656e 7629 0a20 2020   env=os_env).   
+00027070: 2065 6c73 653a 0a20 2020 2020 2020 2070   else:.        p
+00027080: 203d 2050 6f70 656e 2863 6d64 5f66 6f72   = Popen(cmd_for
+00027090: 6d28 636d 6429 202c 2073 6865 6c6c 3d54  m(cmd) , shell=T
+000270a0: 7275 652c 2073 7464 6f75 743d 5049 5045  rue, stdout=PIPE
+000270b0: 2c20 7374 6465 7272 3d53 5444 4f55 542c  , stderr=STDOUT,
+000270c0: 6578 6563 7574 6162 6c65 3d65 7865 6375  executable=execu
+000270d0: 7461 626c 652c 2065 6e76 3d6f 735f 656e  table, env=os_en
+000270e0: 7629 0a0a 2020 2020 2323 2323 2323 2323  v)..    ########
+000270f0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00027100: 2323 2323 2323 2323 230a 2020 2020 234e  #########.    #N
+00027110: 6565 6420 6572 726f 7220 6c6f 6720 6f75  eed error log ou
+00027120: 7420 6672 6f6d 2074 6872 6561 6420 746f  t from thread to
+00027130: 206f 7574 7075 740a 2020 2020 2323 2323   output.    ####
+00027140: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00027150: 2323 2323 2323 2323 2323 2323 230a 2020  #############.  
+00027160: 2020 6465 6620 7772 6974 655f 6572 7228    def write_err(
+00027170: 7029 3a0a 2020 2020 2020 2077 6869 6c65  p):.       while
+00027180: 2054 7275 653a 0a20 2020 2020 2020 2020   True:.         
+00027190: 2020 6565 3d70 2e73 7464 6572 722e 7265    ee=p.stderr.re
+000271a0: 6164 2831 290a 2020 2020 2020 2020 2020  ad(1).          
+000271b0: 2069 6620 6e6f 7420 6565 3a20 6272 6561   if not ee: brea
+000271c0: 6b0a 2020 2020 2020 2020 2020 2069 6620  k.           if 
+000271d0: 6973 696e 7374 616e 6365 2865 652c 6279  isinstance(ee,by
+000271e0: 7465 7329 3a0a 2020 2020 2020 2020 2020  tes):.          
+000271f0: 2020 2020 7379 732e 7374 6465 7272 2e62      sys.stderr.b
+00027200: 7566 6665 722e 7772 6974 6528 6565 2920  uffer.write(ee) 
+00027210: 2320 7772 6974 6520 6279 7465 7320 6461  # write bytes da
+00027220: 7461 2074 6f20 7374 646f 7574 0a20 2020  ta to stdout.   
+00027230: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00027240: 2020 2020 2020 2020 2020 2020 7379 732e              sys.
+00027250: 7374 6465 7272 2e77 7269 7465 2865 6529  stderr.write(ee)
+00027260: 2023 2077 7269 7465 2062 7974 6573 2064   # write bytes d
+00027270: 6174 6120 746f 2073 7464 6f75 740a 2020  ata to stdout.  
+00027280: 2020 2020 2020 2020 2073 7973 2e73 7464           sys.std
+00027290: 6572 722e 666c 7573 6828 290a 0a20 2020  err.flush()..   
+000272a0: 2069 6620 696e 7465 7261 6374 6976 653a   if interactive:
+000272b0: 0a20 2020 2020 2020 2323 2323 2323 2323  .       ########
+000272c0: 2323 2320 5354 4420 4572 726f 720a 2020  ### STD Error.  
+000272d0: 2020 2020 2065 7272 203d 2054 6872 6561       err = Threa
+000272e0: 6428 7461 7267 6574 3d77 7269 7465 5f65  d(target=write_e
+000272f0: 7272 2c20 6172 6773 3d28 702c 2929 0a20  rr, args=(p,)). 
+00027300: 2020 2020 2020 6572 722e 7374 6172 7428        err.start(
+00027310: 290a 2020 2020 2020 2023 2323 2323 2323  ).       #######
+00027320: 2323 2323 2053 5444 204f 7574 0a20 2020  #### STD Out.   
+00027330: 2020 2020 7768 696c 6520 5472 7565 3a0a      while True:.
+00027340: 2020 2020 2020 2020 2020 643d 702e 7374            d=p.st
+00027350: 646f 7574 2e72 6561 6428 3129 0a20 2020  dout.read(1).   
+00027360: 2020 2020 2020 2069 6620 6e6f 7420 643a         if not d:
+00027370: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
+00027380: 2069 6620 6973 696e 7374 616e 6365 2864   if isinstance(d
+00027390: 2c62 7974 6573 293a 0a20 2020 2020 2020  ,bytes):.       
+000273a0: 2020 2020 2020 2073 7973 2e73 7464 6f75         sys.stdou
+000273b0: 742e 6275 6666 6572 2e77 7269 7465 2864  t.buffer.write(d
+000273c0: 2920 2320 7772 6974 6520 6279 7465 7320  ) # write bytes 
+000273d0: 6461 7461 2074 6f20 7374 646f 7574 0a20  data to stdout. 
+000273e0: 2020 2020 2020 2020 2020 2020 2023 6f75               #ou
+000273f0: 742b 3d64 2e64 6563 6f64 6528 2775 7466  t+=d.decode('utf
+00027400: 2d38 2729 2e72 6570 6c61 6365 2827 5c72  -8').replace('\r
+00027410: 272c 2727 290a 2020 2020 2020 2020 2020  ','').          
+00027420: 2020 2020 6f75 742b 3d53 7472 2864 292e      out+=Str(d).
+00027430: 7265 706c 6163 6528 275c 7227 2c27 2729  replace('\r','')
+00027440: 0a20 2020 2020 2020 2020 2065 6c73 653a  .          else:
+00027450: 0a20 2020 2020 2020 2020 2020 2020 2073  .              s
+00027460: 7973 2e73 7464 6f75 742e 7772 6974 6528  ys.stdout.write(
+00027470: 6429 2023 2077 7269 7465 2073 7472 2064  d) # write str d
+00027480: 6174 6120 746f 2073 7464 6f75 740a 2020  ata to stdout.  
+00027490: 2020 2020 2020 2020 2020 2020 6f75 742b              out+
+000274a0: 3d64 2e72 6570 6c61 6365 2827 5c72 272c  =d.replace('\r',
+000274b0: 2727 290a 2020 2020 2020 2020 2020 7379  '').          sy
+000274c0: 732e 7374 646f 7574 2e66 6c75 7368 2829  s.stdout.flush()
+000274d0: 0a20 2020 2020 2020 702e 7374 646f 7574  .       p.stdout
+000274e0: 2e63 6c6f 7365 2829 0a0a 2020 2020 2020  .close()..      
+000274f0: 2023 2323 2323 2323 2323 2323 204f 4c44   ########### OLD
+00027500: 2053 5444 2045 7272 6f72 2c20 6966 2073   STD Error, if s
+00027510: 7461 7274 696e 6720 6672 6f6d 2065 7272  tarting from err
+00027520: 6f72 206c 6f67 2074 6865 6e20 6361 6e27  or log then can'
+00027530: 7420 7365 650a 2020 2020 2020 2023 6572  t see.       #er
+00027540: 723d 702e 7374 6465 7272 2e72 6561 6428  r=p.stderr.read(
+00027550: 290a 2020 2020 2020 2023 6966 2065 7272  ).       #if err
+00027560: 3a0a 2020 2020 2020 2023 2020 2069 6620  :.       #   if 
+00027570: 6973 696e 7374 616e 6365 2865 7272 2c62  isinstance(err,b
+00027580: 7974 6573 293a 0a20 2020 2020 2020 2320  ytes):.       # 
+00027590: 2020 2020 2020 7379 732e 7374 6465 7272        sys.stderr
+000275a0: 2e62 7566 6665 722e 7772 6974 6528 6572  .buffer.write(er
+000275b0: 7229 0a20 2020 2020 2020 2320 2020 656c  r).       #   el
+000275c0: 7365 3a0a 2020 2020 2020 2023 2020 2020  se:.       #    
+000275d0: 2020 2073 7973 2e73 7464 6572 722e 7772     sys.stderr.wr
+000275e0: 6974 6528 6572 7229 0a20 2020 2020 2020  ite(err).       
+000275f0: 2320 2020 7379 732e 7374 6465 7272 2e66  #   sys.stderr.f
+00027600: 6c75 7368 2829 0a20 2020 2020 2020 2370  lush().       #p
+00027610: 2e73 7464 6572 722e 636c 6f73 6528 290a  .stderr.close().
+00027620: 2020 2020 2020 2070 2e77 6169 7428 290a         p.wait().
+00027630: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00027640: 2069 6620 7072 6f67 7265 7373 3a0a 2020   if progress:.  
+00027650: 2020 2020 2020 2020 2073 746f 705f 7468           stop_th
+00027660: 7265 6164 733d 4661 6c73 650a 2020 2020  reads=False.    
+00027670: 2020 2020 2020 2070 7074 683d 5468 7265         ppth=Thre
+00027680: 6164 2874 6172 6765 743d 7070 726f 672c  ad(target=pprog,
+00027690: 6172 6773 3d28 6c61 6d62 6461 3a73 746f  args=(lambda:sto
+000276a0: 705f 7468 7265 6164 732c 7072 6f67 7265  p_threads,progre
+000276b0: 7373 5f70 7265 5f6e 6577 5f6c 696e 652c  ss_pre_new_line,
+000276c0: 7072 6f67 7265 7373 5f70 6f73 745f 6e65  progress_post_ne
+000276d0: 775f 6c69 6e65 2c6c 6f67 2c29 290a 2020  w_line,log,)).  
+000276e0: 2020 2020 2020 2020 2070 7074 682e 7374           ppth.st
+000276f0: 6172 7428 290a 0a20 2020 2020 2020 7469  art()..       ti
+00027700: 6d65 6f75 743d 496e 7428 7469 6d65 6f75  meout=Int(timeou
+00027710: 742c 6465 6661 756c 745f 7469 6d65 6f75  t,default_timeou
+00027720: 7429 0a20 2020 2020 2020 6966 2074 696d  t).       if tim
+00027730: 656f 7574 203e 2030 3a0a 2020 2020 2020  eout > 0:.      
+00027740: 2020 2020 6966 2050 7956 6572 2833 293a      if PyVer(3):
+00027750: 0a20 2020 2020 2020 2020 2020 2020 7472  .             tr
+00027760: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+00027770: 2020 206f 7574 2c20 6572 7220 3d20 702e     out, err = p.
+00027780: 636f 6d6d 756e 6963 6174 6528 7469 6d65  communicate(time
+00027790: 6f75 743d 7469 6d65 6f75 7429 0a20 2020  out=timeout).   
+000277a0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+000277b0: 2073 7562 7072 6f63 6573 732e 5469 6d65   subprocess.Time
+000277c0: 6f75 7445 7870 6972 6564 3a0a 2020 2020  outExpired:.    
+000277d0: 2020 2020 2020 2020 2020 2020 702e 6b69              p.ki
+000277e0: 6c6c 2829 0a20 2020 2020 2020 2020 2020  ll().           
+000277f0: 2020 2020 2070 2e72 6574 7572 6e63 6f64       p.returncod
+00027800: 653d 3939 390a 2020 2020 2020 2020 2020  e=999.          
+00027810: 2020 2020 2020 6572 723d 2745 7272 6f72        err='Error
+00027820: 3a20 4b69 6c6c 2070 726f 6365 7373 2061  : Kill process a
+00027830: 6674 6572 2054 696d 656f 7574 207b 307d  fter Timeout {0}
+00027840: 272e 666f 726d 6174 2874 696d 656f 7574  '.format(timeout
+00027850: 290a 2020 2020 2020 2020 2020 656c 7365  ).          else
+00027860: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00027870: 6f74 696d 656f 7574 3d27 7b7d 272e 666f  otimeout='{}'.fo
+00027880: 726d 6174 2874 696d 656f 7574 290a 2020  rmat(timeout).  
+00027890: 2020 2020 2020 2020 2020 2020 7768 696c              whil
+000278a0: 6520 702e 706f 6c6c 2829 2069 7320 4e6f  e p.poll() is No
+000278b0: 6e65 2061 6e64 2074 696d 656f 7574 203e  ne and timeout >
+000278c0: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
+000278d0: 2020 2020 2020 7469 6d65 2e73 6c65 6570        time.sleep
+000278e0: 2830 2e31 290a 2020 2020 2020 2020 2020  (0.1).          
+000278f0: 2020 2020 2020 2020 7469 6d65 6f75 7420          timeout 
+00027900: 3d20 7469 6d65 6f75 7420 2d20 302e 310a  = timeout - 0.1.
+00027910: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00027920: 2070 2e70 6f6c 6c28 2920 6973 204e 6f6e   p.poll() is Non
+00027930: 6520 616e 6420 7469 6d65 6f75 7420 3c20  e and timeout < 
+00027940: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+00027950: 2020 2020 2070 2e6b 696c 6c28 290a 2020       p.kill().  
+00027960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027970: 702e 7265 7475 726e 636f 6465 3d39 3939  p.returncode=999
+00027980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027990: 2020 2065 7272 3d27 4572 726f 723a 204b     err='Error: K
+000279a0: 696c 6c20 7072 6f63 6573 7320 6166 7465  ill process afte
+000279b0: 7220 5469 6d65 6f75 7420 7b30 7d27 2e66  r Timeout {0}'.f
+000279c0: 6f72 6d61 7428 6f74 696d 656f 7574 290a  ormat(otimeout).
+000279d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000279e0: 206c 656e 286f 7574 2920 3d3d 2030 2061   len(out) == 0 a
+000279f0: 6e64 206c 656e 2865 7272 2920 3d3d 2030  nd len(err) == 0
+00027a00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00027a10: 2020 2020 6f75 742c 2065 7272 203d 2070      out, err = p
+00027a20: 2e63 6f6d 6d75 6e69 6361 7465 2829 0a20  .communicate(). 
+00027a30: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00027a40: 2020 2020 2020 6f75 742c 2065 7272 203d        out, err =
+00027a50: 2070 2e63 6f6d 6d75 6e69 6361 7465 2829   p.communicate()
+00027a60: 0a20 2020 2020 2020 6966 2070 726f 6772  .       if progr
+00027a70: 6573 733a 0a20 2020 2020 2020 2020 2073  ess:.          s
+00027a80: 746f 705f 7468 7265 6164 733d 5472 7565  top_threads=True
+00027a90: 0a20 2020 2020 2020 2020 2070 7074 682e  .          ppth.
+00027aa0: 6a6f 696e 2829 0a20 2020 2023 6966 2050  join().    #if P
+00027ab0: 7956 6572 2833 293a 0a20 2020 2023 2020  yVer(3):.    #  
+00027ac0: 2020 6966 2054 7970 6528 6f75 742c 2762    if Type(out,'b
+00027ad0: 7974 6573 2729 3a20 6f75 743d 6f75 742e  ytes'): out=out.
+00027ae0: 6465 636f 6465 2822 4953 4f2d 3838 3539  decode("ISO-8859
+00027af0: 2d31 2229 2e72 7374 7269 7028 290a 2020  -1").rstrip().  
+00027b00: 2020 2320 2020 2069 6620 5479 7065 2865    #    if Type(e
+00027b10: 7272 2c27 6279 7465 7327 293a 2065 7272  rr,'bytes'): err
+00027b20: 3d65 7272 2e64 6563 6f64 6528 2249 534f  =err.decode("ISO
+00027b30: 2d38 3835 392d 3122 292e 7273 7472 6970  -8859-1").rstrip
+00027b40: 2829 0a20 2020 206f 7574 3d53 7472 286f  ().    out=Str(o
+00027b50: 7574 2c65 6e63 6f64 653d 6465 636f 6465  ut,encode=decode
+00027b60: 292e 7273 7472 6970 2829 0a20 2020 2065  ).rstrip().    e
+00027b70: 7272 3d53 7472 2865 7272 2c65 6e63 6f64  rr=Str(err,encod
+00027b80: 653d 6465 636f 6465 292e 7273 7472 6970  e=decode).rstrip
+00027b90: 2829 0a20 2020 2069 6620 616e 7369 3a0a  ().    if ansi:.
+00027ba0: 2020 2020 2020 2020 6f75 743d 616e 7369          out=ansi
+00027bb0: 5f65 7363 6170 652e 7375 6228 2727 2c6f  _escape.sub('',o
+00027bc0: 7574 290a 2020 2020 2020 2020 6572 723d  ut).        err=
+00027bd0: 616e 7369 5f65 7363 6170 652e 7375 6228  ansi_escape.sub(
+00027be0: 2727 2c65 7272 290a 2020 2020 6966 2065  '',err).    if e
+00027bf0: 6e76 5f6f 7574 3a0a 2020 2020 2020 2020  nv_out:.        
+00027c00: 7265 7475 726e 2070 2e72 6574 7572 6e63  return p.returnc
+00027c10: 6f64 652c 206f 7574 2c20 6572 722c 7374  ode, out, err,st
+00027c20: 6172 745f 7469 6d65 2e49 6e69 7428 292c  art_time.Init(),
+00027c30: 7374 6172 745f 7469 6d65 2e4e 6f77 2869  start_time.Now(i
+00027c40: 6e74 292c 636d 642c 7061 7468 2c6f 735f  nt),cmd,path,os_
+00027c50: 656e 760a 2020 2020 7265 7475 726e 2070  env.    return p
+00027c60: 2e72 6574 7572 6e63 6f64 652c 206f 7574  .returncode, out
+00027c70: 2c20 6572 722c 7374 6172 745f 7469 6d65  , err,start_time
+00027c80: 2e49 6e69 7428 292c 7374 6172 745f 7469  .Init(),start_ti
+00027c90: 6d65 2e4e 6f77 2869 6e74 292c 636d 642c  me.Now(int),cmd,
+00027ca0: 7061 7468 0a0a 6465 6620 4973 4361 6e63  path..def IsCanc
+00027cb0: 656c 2866 756e 632c 2a2a 6f70 7473 293a  el(func,**opts):
+00027cc0: 0a20 2020 2072 6574 7572 6e20 4973 5472  .    return IsTr
+00027cd0: 7565 2866 756e 632c 7265 7175 6972 656d  ue(func,requirem
+00027ce0: 656e 7473 3d5b 2763 616e 6365 6c27 2c27  ents=['cancel','
+00027cf0: 6361 6e63 656c 696e 6727 2c27 5245 5644  canceling','REVD
+00027d00: 272c 2773 746f 7027 2c27 6272 6561 6b27  ','stop','break'
+00027d10: 5d2c 2a2a 6f70 7473 290a 0a64 6566 2049  ],**opts)..def I
+00027d20: 7342 7265 616b 2866 756e 632c 2a2a 6f70  sBreak(func,**op
+00027d30: 7473 293a 0a20 2020 2072 6574 7572 6e20  ts):.    return 
+00027d40: 4973 5472 7565 2866 756e 632c 7265 7175  IsTrue(func,requ
+00027d50: 6972 656d 656e 7473 3d5b 2763 616e 6365  irements=['cance
+00027d60: 6c27 2c27 6361 6e63 656c 696e 6727 2c27  l','canceling','
+00027d70: 5245 5644 272c 2773 746f 7027 2c27 6272  REVD','stop','br
+00027d80: 6561 6b27 5d2c 2a2a 6f70 7473 290a 0a64  eak'],**opts)..d
+00027d90: 6566 2046 6978 4170 6f73 7472 6f70 6865  ef FixApostrophe
+00027da0: 2873 7472 696e 6729 3a0a 2020 2020 6966  (string):.    if
+00027db0: 2069 7369 6e73 7461 6e63 6528 7374 7269   isinstance(stri
+00027dc0: 6e67 2c73 7472 293a 0a20 2020 2020 2020  ng,str):.       
+00027dd0: 2069 6620 2227 2220 696e 2073 7472 696e   if "'" in strin
+00027de0: 673a 0a20 2020 2020 2020 2020 2020 2072  g:.            r
+00027df0: 6574 7572 6e20 2727 2722 7b7d 2227 2727  eturn '''"{}"'''
+00027e00: 2e66 6f72 6d61 7428 7374 7269 6e67 290a  .format(string).
+00027e10: 2020 2020 2020 2020 7265 7475 726e 2022          return "
+00027e20: 2222 277b 7d27 2222 222e 666f 726d 6174  ""'{}'""".format
+00027e30: 2873 7472 696e 6729 0a20 2020 2072 6574  (string).    ret
+00027e40: 7572 6e20 7374 7269 6e67 0a0a 6465 6620  urn string..def 
+00027e50: 7370 7269 6e74 6628 7374 7269 6e67 2c2a  sprintf(string,*
+00027e60: 696e 7073 2c2a 2a6f 7074 7329 3a0a 2020  inps,**opts):.  
+00027e70: 2020 2727 270a 2020 2020 2222 2269 706d    '''.    """ipm
+00027e80: 6974 6f6f 6c20 2d48 2025 2869 706d 695f  itool -H %(ipmi_
+00027e90: 6970 2973 202d 5520 2528 6970 6d69 5f75  ip)s -U %(ipmi_u
+00027ea0: 7365 7229 7320 2d50 2027 2528 6970 6d69  ser)s -P '%(ipmi
+00027eb0: 5f70 6173 7329 7327 2022 2222 2528 2a2a  _pass)s' """%(**
+00027ec0: 6f70 7473 290a 2020 2020 2222 227b 6170  opts).    """{ap
+00027ed0: 707d 202d 4820 7b69 706d 695f 6970 7d20  p} -H {ipmi_ip} 
+00027ee0: 2d55 207b 6970 6d69 5f75 7365 727d 202d  -U {ipmi_user} -
+00027ef0: 5020 277b 6970 6d69 5f70 6173 737d 2720  P '{ipmi_pass}' 
+00027f00: 2222 222e 666f 726d 6174 282a 2a6f 7074  """.format(**opt
+00027f10: 7329 0a20 2020 2022 2222 7b7d 202d 4820  s).    """{} -H 
+00027f20: 7b7d 202d 5520 7b7d 202d 5020 277b 7d27  {} -U {} -P '{}'
+00027f30: 2022 2222 2e66 6f72 6d61 7428 2a69 6e70   """.format(*inp
+00027f40: 7329 0a20 2020 2022 2222 7b30 7d20 2d48  s).    """{0} -H
+00027f50: 207b 317d 202d 5520 7b32 7d20 2d50 2027   {1} -U {2} -P '
+00027f60: 7b33 7d27 2022 2222 2e66 6f72 6d61 7428  {3}' """.format(
+00027f70: 2a69 6e70 7329 0a20 2020 205f 6572 725f  *inps).    _err_
+00027f80: 203a 2054 7275 653a 206d 6973 7369 6e67   : True: missing
+00027f90: 2070 6172 616d 6574 6572 2074 6865 6e20   parameter then 
+00027fa0: 7265 7475 726e 2046 616c 7365 2c20 4661  return False, Fa
+00027fb0: 6c73 6528 6465 6661 756c 7429 3a20 636f  lse(default): co
+00027fc0: 6e76 6572 7420 6a75 7374 2070 6f73 7369  nvert just possi
+00027fd0: 626c 6520 7468 696e 6773 2c20 6f74 6865  ble things, othe
+00027fe0: 7273 206a 7573 7420 6b65 6570 2072 6574  rs just keep ret
+00027ff0: 7572 6e20 6f72 6967 696e 616c 2066 6f72  urn original for
+00028000: 6d0a 2020 2020 6170 6f73 7472 6f70 6865  m.    apostrophe
+00028010: 203a 2054 7275 653a 2061 7574 6f6d 6174   : True: automat
+00028020: 6963 616c 6c79 2063 6861 6e67 6520 616e  ically change an
+00028030: 6420 6164 6420 7768 656e 2069 6e70 7574  d add when input
+00028040: 2076 616c 7565 2068 6176 696e 6720 6170   value having ap
+00028050: 6f73 7472 6f70 6865 0a20 2020 2020 2020  ostrophe.       
+00028060: 2020 2020 2020 2020 2020 4e6f 6e65 203a            None :
+00028070: 2061 7574 6f6d 6174 6963 616c 6c79 2063   automatically c
+00028080: 6861 6e67 6520 6170 6f73 7472 6f70 6865  hange apostrophe
+00028090: 2077 6865 6e20 696e 7075 7420 7661 6c75   when input valu
+000280a0: 6520 6861 7669 6e67 2073 616d 6520 6170  e having same ap
+000280b0: 6f73 7472 6f70 6865 2c20 6275 7420 6e6f  ostrophe, but no
+000280c0: 7420 6175 746f 6d61 7469 6361 6c6c 7920  t automatically 
+000280d0: 6164 6469 6e67 2061 706f 7374 726f 7068  adding apostroph
+000280e0: 6520 7768 656e 2066 6f72 6d61 7420 7374  e when format st
+000280f0: 7269 6e67 2068 6176 696e 6720 6e6f 2061  ring having no a
+00028100: 706f 7374 726f 7068 6528 6465 6661 756c  postrophe(defaul
+00028110: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
+00028120: 2020 2020 4661 6c73 653a 2064 6f20 6e6f      False: do no
+00028130: 7420 6368 616e 6765 2061 6e79 2070 6172  t change any par
+00028140: 616d 6574 6572 0a20 2020 2027 2727 0a20  ameter.    '''. 
+00028150: 2020 2064 6566 205f 7265 706c 6163 655f     def _replace_
+00028160: 666f 726d 6174 5f74 6f5f 7661 6c75 655f  format_to_value_
+00028170: 2869 2c74 6d70 2c73 7472 696e 672c 7661  (i,tmp,string,va
+00028180: 6c2c 6170 6f73 7472 6f70 6865 3d54 7275  l,apostrophe=Tru
+00028190: 6529 3a0a 2020 2020 2020 2020 6d69 7373  e):.        miss
+000281a0: 696e 673d 5b5d 0a20 2020 2020 2020 2073  ing=[].        s
+000281b0: 7472 696e 675f 613d 7374 7269 6e67 2e73  tring_a=string.s
+000281c0: 706c 6974 2829 0a20 2020 2020 2020 206f  plit().        o
+000281d0: 6964 783d 300a 2020 2020 2020 2020 7475  idx=0.        tu
+000281e0: 706c 655f 7661 6c3d 6973 696e 7374 616e  ple_val=isinstan
+000281f0: 6365 2876 616c 2c28 7475 706c 652c 6c69  ce(val,(tuple,li
+00028200: 7374 2929 0a20 2020 2020 2020 2066 6f72  st)).        for
+00028210: 2069 6920 696e 2074 6d70 3a0a 2020 2020   ii in tmp:.    
+00028220: 2020 2020 2020 2020 6966 2074 7570 6c65          if tuple
+00028230: 5f76 616c 3a20 6969 3d69 6e74 2869 6929  _val: ii=int(ii)
+00028240: 0a20 2020 2020 2020 2020 2020 2069 6478  .            idx
+00028250: 3d4e 6f6e 650a 2020 2020 2020 2020 2020  =None.          
+00028260: 2020 2369 6e70 7574 206c 6f63 6174 696f    #input locatio
+00028270: 6e20 666f 726d 6174 0a20 2020 2020 2020  n format.       
+00028280: 2020 2020 2069 6620 6920 3c20 323a 0a20       if i < 2:. 
+00028290: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000282a0: 206c 6973 742c 7475 706c 652c 7061 7261   list,tuple,para
+000282b0: 6d65 7465 720a 2020 2020 2020 2020 2020  meter.          
+000282c0: 2020 2020 2020 2370 7269 6e74 2827 7b7d        #print('{}
+000282d0: 272e 666f 726d 6174 2831 2929 0a20 2020  '.format(1)).   
+000282e0: 2020 2020 2020 2020 2020 2020 2023 7072               #pr
+000282f0: 696e 7428 277b 307d 272e 666f 726d 6174  int('{0}'.format
+00028300: 2831 2929 0a20 2020 2020 2020 2020 2020  (1)).           
+00028310: 2020 2020 2023 7072 696e 7428 277b 617d       #print('{a}
+00028320: 272e 666f 726d 6174 282a 2a7b 2761 273a  '.format(**{'a':
+00028330: 317d 2929 0a20 2020 2020 2020 2020 2020  1})).           
+00028340: 2020 2020 2023 7072 696e 7428 277b 617d       #print('{a}
+00028350: 272e 666f 726d 6174 2861 3d31 2929 0a20  '.format(a=1)). 
+00028360: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00028370: 6620 2727 277b 2573 7d27 2727 2528 6969  f '''{%s}'''%(ii
+00028380: 2920 696e 2073 7472 696e 675f 613a 0a20  ) in string_a:. 
+00028390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000283a0: 2020 2069 6478 3d73 7472 696e 675f 612e     idx=string_a.
+000283b0: 696e 6465 7828 2727 277b 2573 7d27 2727  index('''{%s}'''
+000283c0: 2528 6969 2929 0a20 2020 2020 2020 2020  %(ii)).         
+000283d0: 2020 2020 2020 2065 6c69 6620 2222 2227         elif """'
+000283e0: 7b25 737d 2722 2222 2528 6969 2920 696e  {%s}'"""%(ii) in
+000283f0: 2073 7472 696e 675f 613a 0a20 2020 2020   string_a:.     
+00028400: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00028410: 6478 3d73 7472 696e 675f 612e 696e 6465  dx=string_a.inde
+00028420: 7828 2222 2227 7b25 737d 2722 2222 2528  x("""'{%s}'"""%(
+00028430: 6969 2929 0a20 2020 2020 2020 2020 2020  ii)).           
+00028440: 2020 2020 2065 6c69 6620 2727 2722 7b25       elif '''"{%
+00028450: 737d 2227 2727 2528 6969 2920 696e 2073  s}"'''%(ii) in s
+00028460: 7472 696e 675f 613a 0a20 2020 2020 2020  tring_a:.       
+00028470: 2020 2020 2020 2020 2020 2020 2069 6478               idx
+00028480: 3d73 7472 696e 675f 612e 696e 6465 7828  =string_a.index(
+00028490: 2727 2722 7b25 737d 2227 2727 2528 6969  '''"{%s}"'''%(ii
+000284a0: 2929 0a20 2020 2020 2020 2020 2020 2065  )).            e
+000284b0: 6c69 6620 6920 3d3d 2032 3a0a 2020 2020  lif i == 2:.    
+000284c0: 2020 2020 2020 2020 2020 2020 2320 6469              # di
+000284d0: 6374 696f 6e61 7279 2069 6e70 7574 200a  ctionary input .
+000284e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000284f0: 2320 7072 696e 7428 2725 2861 2973 2725  # print('%(a)s'%
+00028500: 287b 2761 273a 2761 277d 2929 0a20 2020  ({'a':'a'})).   
+00028510: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00028520: 2727 2725 287b 7d29 7327 2727 2e66 6f72  '''%({})s'''.for
+00028530: 6d61 7428 6969 2920 696e 2073 7472 696e  mat(ii) in strin
+00028540: 675f 613a 0a20 2020 2020 2020 2020 2020  g_a:.           
+00028550: 2020 2020 2020 2020 2069 6478 3d73 7472           idx=str
+00028560: 696e 675f 612e 696e 6465 7828 2727 2725  ing_a.index('''%
+00028570: 287b 7d29 7327 2727 2e66 6f72 6d61 7428  ({})s'''.format(
+00028580: 6969 2929 0a20 2020 2020 2020 2020 2020  ii)).           
+00028590: 2020 2020 2065 6c69 6620 2222 2227 2528       elif """'%(
+000285a0: 7b7d 2973 2722 2222 2e66 6f72 6d61 7428  {})s'""".format(
+000285b0: 6969 2920 696e 2073 7472 696e 675f 613a  ii) in string_a:
+000285c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000285d0: 2020 2020 2069 6478 3d73 7472 696e 675f       idx=string_
+000285e0: 612e 696e 6465 7828 2222 2227 2528 7b7d  a.index("""'%({}
+000285f0: 2973 2722 2222 2e66 6f72 6d61 7428 6969  )s'""".format(ii
+00028600: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+00028610: 2020 2065 6c69 6620 2727 2722 2528 7b7d     elif '''"%({}
+00028620: 2973 2227 2727 2e66 6f72 6d61 7428 6969  )s"'''.format(ii
+00028630: 2920 696e 2073 7472 696e 675f 613a 0a20  ) in string_a:. 
+00028640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028650: 2020 2069 6478 3d73 7472 696e 675f 612e     idx=string_a.
+00028660: 696e 6465 7828 2727 2722 2528 7b7d 2973  index('''"%({})s
+00028670: 2227 2727 2e66 6f72 6d61 7428 6969 2929  "'''.format(ii))
+00028680: 0a20 2020 2020 2020 2020 2020 2023 466f  .            #Fo
+00028690: 756e 6420 666f 726d 6174 206c 6f63 6174  und format locat
+000286a0: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
+000286b0: 6966 2069 7369 6e73 7461 6e63 6528 6964  if isinstance(id
+000286c0: 782c 696e 7429 3a0a 2020 2020 2020 2020  x,int):.        
+000286d0: 2020 2020 2020 2020 2320 6966 2069 6e70          # if inp
+000286e0: 7574 2064 6174 6120 6973 2073 7472 696e  ut data is strin
+000286f0: 670a 2020 2020 2020 2020 2020 2020 2020  g.              
+00028700: 2020 6966 2028 7475 706c 655f 7661 6c20    if (tuple_val 
+00028710: 616e 6420 6c65 6e28 7661 6c29 203e 2069  and len(val) > i
+00028720: 6929 206f 7220 286e 6f74 2074 7570 6c65  i) or (not tuple
+00028730: 5f76 616c 2061 6e64 2069 6920 696e 2076  _val and ii in v
+00028740: 616c 293a 0a20 2020 2020 2020 2020 2020  al):.           
+00028750: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00028760: 7374 616e 6365 2876 616c 5b69 695d 2c73  stance(val[ii],s
+00028770: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+00028780: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00028790: 2873 7472 696e 675f 615b 6964 785d 5b30  (string_a[idx][0
+000287a0: 5d20 3d3d 2022 2722 2061 6e64 2073 7472  ] == "'" and str
+000287b0: 696e 675f 615b 6964 785d 5b2d 315d 203d  ing_a[idx][-1] =
+000287c0: 3d20 2227 2229 205c 0a20 2020 2020 2020  = "'") \.       
+000287d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000287e0: 2020 2020 6f72 2028 7374 7269 6e67 5f61      or (string_a
+000287f0: 5b69 6478 5d5b 305d 203d 3d20 2722 2720  [idx][0] == '"' 
+00028800: 616e 6420 7374 7269 6e67 5f61 5b69 6478  and string_a[idx
+00028810: 5d5b 2d31 5d20 3d3d 2027 2227 293a 0a20  ][-1] == '"'):. 
 00028820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028830: 656c 6966 2061 706f 7374 726f 7068 6520  elif apostrophe 
-00028840: 6973 206e 6f74 2046 616c 7365 3a0a 2020  is not False:.  
+00028830: 2020 2020 2020 2020 2020 2069 6620 6170             if ap
+00028840: 6f73 7472 6f70 6865 205c 0a20 2020 2020  ostrophe \.     
 00028850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028860: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00028870: 2073 7472 696e 675f 615b 6964 785d 5b30   string_a[idx][0
-00028880: 5d20 3d3d 2022 2722 2061 6e64 2022 2722  ] == "'" and "'"
-00028890: 2069 6e20 7661 6c5b 6969 5d3a 0a20 2020   in val[ii]:.   
+00028860: 2020 2020 2020 2020 2020 616e 6420 2828            and ((
+00028870: 7661 6c5b 6969 5d5b 305d 203d 3d20 2227  val[ii][0] == "'
+00028880: 2220 616e 6420 7661 6c5b 6969 5d5b 2d31  " and val[ii][-1
+00028890: 5d20 3d3d 2022 2722 295c 0a20 2020 2020  ] == "'")\.     
 000288a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000288b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000288c0: 2073 7472 696e 675f 615b 6964 785d 3d27   string_a[idx]='
-000288d0: 2727 2227 2727 2b76 616c 5b69 695d 2b27  ''"'''+val[ii]+'
-000288e0: 2727 2227 2727 0a20 2020 2020 2020 2020  ''"'''.         
+000288b0: 2020 2020 2020 2020 2020 6f72 2028 7661            or (va
+000288c0: 6c5b 6969 5d5b 305d 203d 3d20 2722 2720  l[ii][0] == '"' 
+000288d0: 616e 6420 7661 6c5b 6969 5d5b 2d31 5d20  and val[ii][-1] 
+000288e0: 3d3d 2027 2227 2929 3a0a 2020 2020 2020  == '"')):.      
 000288f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028900: 2020 2020 2020 2065 6c69 6620 7374 7269         elif stri
-00028910: 6e67 5f61 5b69 6478 5d5b 305d 203d 3d20  ng_a[idx][0] == 
-00028920: 2722 2720 616e 6420 2722 2720 696e 2076  '"' and '"' in v
-00028930: 616c 5b69 695d 3a0a 2020 2020 2020 2020  al[ii]:.        
-00028940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028950: 2020 2020 2020 2020 2020 2020 7374 7269              stri
-00028960: 6e67 5f61 5b69 6478 5d3d 2222 2227 2222  ng_a[idx]="""'""
-00028970: 222b 7661 6c5b 6969 5d2b 2222 2227 2222  "+val[ii]+"""'""
-00028980: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-00028990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000289a0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00028900: 2020 2020 2020 2020 2020 7374 7269 6e67            string
+00028910: 5f61 5b69 6478 5d3d 7661 6c5b 6969 5d0a  _a[idx]=val[ii].
+00028920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028930: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00028940: 2061 706f 7374 726f 7068 6520 6973 206e   apostrophe is n
+00028950: 6f74 2046 616c 7365 3a0a 2020 2020 2020  ot False:.      
+00028960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028970: 2020 2020 2020 2020 2020 6966 2073 7472            if str
+00028980: 696e 675f 615b 6964 785d 5b30 5d20 3d3d  ing_a[idx][0] ==
+00028990: 2022 2722 2061 6e64 2022 2722 2069 6e20   "'" and "'" in 
+000289a0: 7661 6c5b 6969 5d3a 0a20 2020 2020 2020  val[ii]:.       
 000289b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000289c0: 2020 2020 2020 2020 2020 2020 7374 7269              stri
-000289d0: 6e67 5f61 5b69 6478 5d3d 7374 7269 6e67  ng_a[idx]=string
-000289e0: 5f61 5b69 6478 5d2e 666f 726d 6174 282a  _a[idx].format(*
-000289f0: 2a76 616c 290a 2020 2020 2020 2020 2020  *val).          
-00028a00: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00028a10: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00028a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028a30: 6966 2061 706f 7374 726f 7068 653a 0a20  if apostrophe:. 
-00028a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028a50: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00028a60: 6620 2227 2220 696e 2076 616c 5b69 695d  f "'" in val[ii]
-00028a70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00028a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028a90: 2020 2020 2020 7374 7269 6e67 5f61 5b69        string_a[i
-00028aa0: 6478 5d3d 2727 2722 2727 272b 7661 6c5b  dx]='''"'''+val[
-00028ab0: 6969 5d2b 2727 2722 2727 270a 2020 2020  ii]+'''"'''.    
+000289c0: 2020 2020 2020 2020 2020 2020 2073 7472               str
+000289d0: 696e 675f 615b 6964 785d 3d27 2727 2227  ing_a[idx]='''"'
+000289e0: 2727 2b76 616c 5b69 695d 2b27 2727 2227  ''+val[ii]+'''"'
+000289f0: 2727 0a20 2020 2020 2020 2020 2020 2020  ''.             
+00028a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028a10: 2020 2065 6c69 6620 7374 7269 6e67 5f61     elif string_a
+00028a20: 5b69 6478 5d5b 305d 203d 3d20 2722 2720  [idx][0] == '"' 
+00028a30: 616e 6420 2722 2720 696e 2076 616c 5b69  and '"' in val[i
+00028a40: 695d 3a0a 2020 2020 2020 2020 2020 2020  i]:.            
+00028a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028a60: 2020 2020 2020 2020 7374 7269 6e67 5f61          string_a
+00028a70: 5b69 6478 5d3d 2222 2227 2222 222b 7661  [idx]="""'"""+va
+00028a80: 6c5b 6969 5d2b 2222 2227 2222 220a 2020  l[ii]+"""'""".  
+00028a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028aa0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00028ab0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
 00028ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028ad0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00028ae0: 2027 2227 2069 6e20 7661 6c5b 6969 5d3a   '"' in val[ii]:
-00028af0: 200a 2020 2020 2020 2020 2020 2020 2020   .              
-00028b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028b10: 2020 2020 2020 7374 7269 6e67 5f61 5b69        string_a[i
-00028b20: 6478 5d3d 2222 2227 2222 222b 7661 6c5b  dx]="""'"""+val[
-00028b30: 6969 5d2b 2222 2227 2222 220a 2020 2020  ii]+"""'""".    
-00028b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028b50: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00028b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028b70: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00028b80: 7269 6e67 5f61 5b69 6478 5d3d 7661 6c5b  ring_a[idx]=val[
-00028b90: 6969 5d0a 2020 2020 2020 2020 2020 2020  ii].            
-00028ba0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00028bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028bc0: 2020 2020 2020 6966 2074 7570 6c65 5f76        if tuple_v
-00028bd0: 616c 3a0a 2020 2020 2020 2020 2020 2020  al:.            
-00028be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028bf0: 7374 7269 6e67 5f61 5b69 6478 5d3d 7374  string_a[idx]=st
-00028c00: 7269 6e67 5f61 5b69 6478 5d2e 666f 726d  ring_a[idx].form
-00028c10: 6174 282a 7661 6c29 0a20 2020 2020 2020  at(*val).       
-00028c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028c30: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00028c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028c50: 2020 2073 7472 696e 675f 615b 6964 785d     string_a[idx]
-00028c60: 3d73 7472 696e 675f 615b 6964 785d 2e66  =string_a[idx].f
-00028c70: 6f72 6d61 7428 2a2a 7661 6c29 0a20 2020  ormat(**val).   
-00028c80: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00028c90: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00028ca0: 2020 2020 2020 206d 6973 7369 6e67 2e61         missing.a
-00028cb0: 7070 656e 6428 6969 290a 2020 2020 2020  ppend(ii).      
-00028cc0: 2020 2020 2020 2020 2020 2320 6966 206e            # if n
-00028cd0: 6f74 2073 7472 696e 6720 696e 7075 7420  ot string input 
-00028ce0: 6461 7461 2074 6865 6e20 736b 6970 2068  data then skip h
-00028cf0: 6572 650a 2020 2020 2020 2020 7265 7475  ere.        retu
-00028d00: 726e 204a 6f69 6e28 7374 7269 6e67 5f61  rn Join(string_a
-00028d10: 2c73 796d 626f 6c3d 2720 2729 2c6d 6973  ,symbol=' '),mis
-00028d20: 7369 6e67 0a0a 2020 2020 6966 206e 6f74  sing..    if not
-00028d30: 2069 7369 6e73 7461 6e63 6528 7374 7269   isinstance(stri
-00028d40: 6e67 2c73 7472 293a 2072 6574 7572 6e20  ng,str): return 
-00028d50: 4661 6c73 652c 7374 7269 6e67 0a20 2020  False,string.   
-00028d60: 2066 6661 6c6c 3d5b 7265 2e63 6f6d 7069   ffall=[re.compi
-00028d70: 6c65 2827 5c7b 285c 642a 295c 7d27 292e  le('\{(\d*)\}').
-00028d80: 6669 6e64 616c 6c28 7374 7269 6e67 292c  findall(string),
-00028d90: 7265 2e63 6f6d 7069 6c65 2827 5c7b 285c  re.compile('\{(\
-00028da0: 772a 295c 7d27 292e 6669 6e64 616c 6c28  w*)\}').findall(
-00028db0: 7374 7269 6e67 292c 7265 2e63 6f6d 7069  string),re.compi
-00028dc0: 6c65 2827 5c25 5c28 285c 772a 295c 2973  le('\%\((\w*)\)s
-00028dd0: 2729 2e66 696e 6461 6c6c 2873 7472 696e  ').findall(strin
-00028de0: 6729 2c72 652e 636f 6d70 696c 6528 275c  g),re.compile('\
-00028df0: 7b5c 7d27 292e 6669 6e64 616c 6c28 7374  {\}').findall(st
-00028e00: 7269 6e67 292c 7265 2e63 6f6d 7069 6c65  ring),re.compile
-00028e10: 2827 5c25 5b2d 302d 392e 5d2a 5b73 7c63  ('\%[-0-9.]*[s|c
-00028e20: 7c64 7c66 5d27 292e 6669 6e64 616c 6c28  |d|f]').findall(
-00028e30: 7374 7269 6e67 295d 0a20 2020 2069 3d30  string)].    i=0
-00028e40: 0a20 2020 2061 706f 7374 726f 7068 653d  .    apostrophe=
-00028e50: 6f70 7473 2e70 6f70 2827 6170 6f73 7472  opts.pop('apostr
-00028e60: 6f70 6865 2729 2069 6620 2761 706f 7374  ophe') if 'apost
-00028e70: 726f 7068 6527 2069 6e20 6f70 7473 2065  rophe' in opts e
-00028e80: 6c73 6520 4e6f 6e65 0a20 2020 2065 7272  lse None.    err
-00028e90: 6f72 3d6f 7074 732e 706f 7028 275f 6572  or=opts.pop('_er
-00028ea0: 725f 2729 2069 6620 275f 6572 725f 2720  r_') if '_err_' 
-00028eb0: 696e 206f 7074 7320 656c 7365 2046 616c  in opts else Fal
-00028ec0: 7365 0a20 2020 2066 6f72 2074 6d70 2069  se.    for tmp i
-00028ed0: 6e20 6666 616c 6c3a 0a20 2020 2020 2020  n ffall:.       
-00028ee0: 2069 6620 6920 696e 205b 302c 315d 3a20   if i in [0,1]: 
-00028ef0: 746d 703d 5b20 6a20 2066 6f72 206a 2069  tmp=[ j  for j i
-00028f00: 6e20 746d 7020 6966 206c 656e 286a 2920  n tmp if len(j) 
-00028f10: 5d0a 2020 2020 2020 2020 6966 2074 6d70  ].        if tmp
-00028f20: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00028f30: 2069 203d 3d20 303a 0a20 2020 2020 2020   i == 0:.       
-00028f40: 2020 2020 2020 2020 206d 783d 300a 2020           mx=0.  
-00028f50: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00028f60: 7220 7a20 696e 2074 6d70 3a0a 2020 2020  r z in tmp:.    
-00028f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028f80: 6966 2069 6e74 287a 2920 3e20 6d78 3a20  if int(z) > mx: 
-00028f90: 6d78 3d69 6e74 287a 290a 2020 2020 2020  mx=int(z).      
-00028fa0: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-00028fb0: 2869 6e70 7329 203e 206d 783a 0a20 2020  (inps) > mx:.   
-00028fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028fd0: 2073 7472 696e 672c 6d3d 5f72 6570 6c61   string,m=_repla
-00028fe0: 6365 5f66 6f72 6d61 745f 746f 5f76 616c  ce_format_to_val
-00028ff0: 7565 5f28 692c 746d 702c 7374 7269 6e67  ue_(i,tmp,string
-00029000: 2c69 6e70 732c 6170 6f73 7472 6f70 6865  ,inps,apostrophe
-00029010: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00029020: 2020 2020 2020 6966 2065 7272 6f72 2061        if error a
-00029030: 6e64 206d 203a 2072 6574 7572 6e20 4661  nd m : return Fa
-00029040: 6c73 652c 276d 6973 7369 6e67 2070 6172  lse,'missing par
-00029050: 616d 6574 6572 7320 7b7d 272e 666f 726d  ameters {}'.form
-00029060: 6174 286d 290a 2020 2020 2020 2020 2020  at(m).          
-00029070: 2020 2020 2020 656c 6966 206c 656e 286f        elif len(o
-00029080: 7074 7329 203e 206d 783a 0a20 2020 2020  pts) > mx:.     
-00029090: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000290a0: 7472 696e 672c 6d3d 5f72 6570 6c61 6365  tring,m=_replace
-000290b0: 5f66 6f72 6d61 745f 746f 5f76 616c 7565  _format_to_value
-000290c0: 5f28 692c 746d 702c 7374 7269 6e67 2c6c  _(i,tmp,string,l
-000290d0: 6973 7428 6f70 7473 2e76 616c 7565 7328  ist(opts.values(
-000290e0: 2929 2c61 706f 7374 726f 7068 6529 0a20  )),apostrophe). 
-000290f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029100: 2020 2069 6620 6572 726f 7220 616e 6420     if error and 
-00029110: 6d20 3a20 7265 7475 726e 2046 616c 7365  m : return False
-00029120: 2c27 6d69 7373 696e 6720 7061 7261 6d65  ,'missing parame
-00029130: 7465 7273 207b 7d27 2e66 6f72 6d61 7428  ters {}'.format(
-00029140: 6d29 0a20 2020 2020 2020 2020 2020 2020  m).             
-00029150: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00029160: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00029170: 7572 6e20 4661 6c73 652c 2222 224e 6565  urn False,"""Nee
-00029180: 6420 6d6f 7265 2069 6e70 7574 2028 7475  d more input (tu
-00029190: 706c 652f 6c69 7374 2920 7061 7261 6d65  ple/list) parame
-000291a0: 7465 7273 2872 6571 7569 7265 207b 7d29  ters(require {})
-000291b0: 2222 222e 666f 726d 6174 286d 7829 0a20  """.format(mx). 
-000291c0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-000291d0: 303c 2069 203c 2032 3a0a 2020 2020 2020  0< i < 2:.      
-000291e0: 2020 2020 2020 2020 2020 7374 7269 6e67            string
-000291f0: 2c6d 3d5f 7265 706c 6163 655f 666f 726d  ,m=_replace_form
-00029200: 6174 5f74 6f5f 7661 6c75 655f 2869 2c74  at_to_value_(i,t
-00029210: 6d70 2c73 7472 696e 672c 6f70 7473 2c61  mp,string,opts,a
-00029220: 706f 7374 726f 7068 6529 0a20 2020 2020  postrophe).     
-00029230: 2020 2020 2020 2020 2020 2069 6620 6572             if er
-00029240: 726f 7220 616e 6420 6d20 3a20 7265 7475  ror and m : retu
-00029250: 726e 2046 616c 7365 2c27 6d69 7373 696e  rn False,'missin
-00029260: 6720 7061 7261 6d65 7465 7273 207b 7d27  g parameters {}'
-00029270: 2e66 6f72 6d61 7428 6d29 0a20 2020 2020  .format(m).     
-00029280: 2020 2020 2020 2065 6c69 6620 6920 3d3d         elif i ==
-00029290: 2032 3a0a 2020 2020 2020 2020 2020 2020   2:.            
-000292a0: 2020 2020 666f 7220 7474 2069 6e20 696e      for tt in in
-000292b0: 7073 3a0a 2020 2020 2020 2020 2020 2020  ps:.            
-000292c0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-000292d0: 7461 6e63 6528 7474 2c64 6963 7429 3a0a  tance(tt,dict):.
-000292e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000292f0: 2020 2020 2020 2020 6f70 7473 2e75 7064          opts.upd
-00029300: 6174 6528 7474 290a 2020 2020 2020 2020  ate(tt).        
-00029310: 2020 2020 2020 2020 7374 7269 6e67 2c6d          string,m
-00029320: 3d5f 7265 706c 6163 655f 666f 726d 6174  =_replace_format
-00029330: 5f74 6f5f 7661 6c75 655f 2869 2c74 6d70  _to_value_(i,tmp
-00029340: 2c73 7472 696e 672c 6f70 7473 2c61 706f  ,string,opts,apo
-00029350: 7374 726f 7068 6529 0a20 2020 2020 2020  strophe).       
-00029360: 2020 2020 2020 2020 2069 6620 6572 726f           if erro
-00029370: 7220 616e 6420 6d20 3a20 7265 7475 726e  r and m : return
-00029380: 2046 616c 7365 2c27 6d69 7373 696e 6720   False,'missing 
-00029390: 7061 7261 6d65 7465 7273 207b 7d27 2e66  parameters {}'.f
-000293a0: 6f72 6d61 7428 6d29 0a20 2020 2020 2020  ormat(m).       
-000293b0: 2020 2020 2065 6c69 6620 6920 3d3d 2033       elif i == 3
-000293c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000293d0: 2020 6966 2069 6e70 733a 0a20 2020 2020    if inps:.     
-000293e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000293f0: 6620 6c65 6e28 746d 7029 203d 3d20 6c65  f len(tmp) == le
-00029400: 6e28 696e 7073 293a 0a20 2020 2020 2020  n(inps):.       
-00029410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029420: 2073 7472 696e 673d 7374 7269 6e67 2e66   string=string.f
-00029430: 6f72 6d61 7428 2a69 6e70 7329 0a20 2020  ormat(*inps).   
-00029440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029450: 2065 6c69 6620 6572 726f 723a 0a20 2020   elif error:.   
-00029460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029470: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
-00029480: 652c 2222 224d 6973 6d61 7463 6865 6420  e,"""Mismatched 
-00029490: 696e 7075 7420 2874 7570 6c65 2f6c 6973  input (tuple/lis
-000294a0: 7429 206e 756d 6265 7220 2872 6571 7569  t) number (requi
-000294b0: 7265 3a7b 7d2c 2069 6e70 7574 3a7b 7d29  re:{}, input:{})
-000294c0: 2222 222e 666f 726d 6174 286c 656e 2874  """.format(len(t
-000294d0: 6d70 292c 6c65 6e28 696e 7073 2929 0a20  mp),len(inps)). 
-000294e0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000294f0: 6c69 6620 6f70 7473 3a0a 2020 2020 2020  lif opts:.      
-00029500: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00029510: 206c 656e 2874 6d70 2920 3d3d 206c 656e   len(tmp) == len
-00029520: 286f 7074 7329 3a0a 2020 2020 2020 2020  (opts):.        
-00029530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029540: 7374 7269 6e67 3d73 7472 696e 672e 666f  string=string.fo
-00029550: 726d 6174 282a 6f70 7473 2e76 616c 7565  rmat(*opts.value
-00029560: 7328 2929 0a20 2020 2020 2020 2020 2020  s()).           
-00029570: 2020 2020 2020 2020 2065 6c69 6620 6572           elif er
-00029580: 726f 723a 0a20 2020 2020 2020 2020 2020  ror:.           
-00029590: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-000295a0: 7572 6e20 4661 6c73 652c 2222 224d 6973  urn False,"""Mis
-000295b0: 6d61 7463 6865 6420 696e 7075 7420 2874  matched input (t
-000295c0: 7570 6c65 2f6c 6973 7429 206e 756d 6265  uple/list) numbe
-000295d0: 7220 2872 6571 7569 7265 3a7b 7d2c 2069  r (require:{}, i
-000295e0: 6e70 7574 3a7b 7d29 2222 222e 666f 726d  nput:{})""".form
-000295f0: 6174 286c 656e 2874 6d70 292c 6c65 6e28  at(len(tmp),len(
-00029600: 6f70 7473 2929 0a20 2020 2020 2020 2020  opts)).         
-00029610: 2020 2065 6c69 6620 6920 3e3d 2034 3a0a     elif i >= 4:.
-00029620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029630: 6966 2069 6e70 733a 0a20 2020 2020 2020  if inps:.       
-00029640: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00029650: 6c65 6e28 746d 7029 203d 3d20 6c65 6e28  len(tmp) == len(
-00029660: 696e 7073 293a 0a20 2020 2020 2020 2020  inps):.         
-00029670: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00029680: 7472 696e 673d 7374 7269 6e67 2528 696e  tring=string%(in
-00029690: 7073 290a 2020 2020 2020 2020 2020 2020  ps).            
-000296a0: 2020 2020 2020 2020 656c 6966 2065 7272          elif err
-000296b0: 6f72 3a0a 2020 2020 2020 2020 2020 2020  or:.            
-000296c0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000296d0: 726e 2046 616c 7365 2c22 2222 4d69 736d  rn False,"""Mism
-000296e0: 6174 6368 6564 2069 6e70 7574 2028 7475  atched input (tu
-000296f0: 706c 652f 6c69 7374 2920 6e75 6d62 6572  ple/list) number
-00029700: 2028 7265 7175 6972 653a 7b7d 2c20 696e   (require:{}, in
-00029710: 7075 743a 7b7d 2922 2222 2e66 6f72 6d61  put:{})""".forma
-00029720: 7428 6c65 6e28 746d 7029 2c6c 656e 2869  t(len(tmp),len(i
-00029730: 6e70 7329 290a 2020 2020 2020 2020 2020  nps)).          
-00029740: 2020 2020 2020 656c 6966 206f 7074 733a        elif opts:
-00029750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00029760: 2020 2020 2069 6620 6c65 6e28 746d 7029       if len(tmp)
-00029770: 203d 3d20 6c65 6e28 6f70 7473 293a 0a20   == len(opts):. 
-00029780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029790: 2020 2020 2020 2073 7472 696e 673d 7374         string=st
-000297a0: 7269 6e67 2528 6f70 7473 2e76 616c 7565  ring%(opts.value
-000297b0: 7328 2929 0a20 2020 2020 2020 2020 2020  s()).           
-000297c0: 2020 2020 2020 2020 2065 6c69 6620 6572           elif er
-000297d0: 726f 723a 0a20 2020 2020 2020 2020 2020  ror:.           
-000297e0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-000297f0: 7572 6e20 4661 6c73 652c 2222 224d 6973  urn False,"""Mis
-00029800: 6d61 7463 6865 6420 696e 7075 7420 2874  matched input (t
-00029810: 7570 6c65 2f6c 6973 7429 206e 756d 6265  uple/list) numbe
-00029820: 7220 2872 6571 7569 7265 3a7b 7d2c 2069  r (require:{}, i
-00029830: 6e70 7574 3a7b 7d29 2222 222e 666f 726d  nput:{})""".form
-00029840: 6174 286c 656e 2874 6d70 292c 6c65 6e28  at(len(tmp),len(
-00029850: 6f70 7473 2929 0a20 2020 2020 2020 2069  opts)).        i
-00029860: 2b3d 310a 2020 2020 6966 2069 6e70 733a  +=1.    if inps:
-00029870: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
-00029880: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00029890: 2054 7275 652c 7374 7269 6e67 2e66 6f72   True,string.for
-000298a0: 6d61 7428 2a69 6e70 7329 0a20 2020 2020  mat(*inps).     
-000298b0: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-000298c0: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-000298d0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000298e0: 726e 2054 7275 652c 7374 7269 6e67 2528  rn True,string%(
-000298f0: 696e 7073 290a 2020 2020 2020 2020 2020  inps).          
-00029900: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
-00029910: 2020 2020 2020 2020 2020 7061 7373 0a20            pass. 
-00029920: 2020 2069 6620 6f70 7473 3a0a 2020 2020     if opts:.    
-00029930: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-00029940: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
-00029950: 2c73 7472 696e 672e 666f 726d 6174 282a  ,string.format(*
-00029960: 2a6f 7074 7329 0a20 2020 2020 2020 2065  *opts).        e
-00029970: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-00029980: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-00029990: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-000299a0: 7275 652c 7374 7269 6e67 2528 6f70 7473  rue,string%(opts
-000299b0: 290a 2020 2020 2020 2020 2020 2020 6578  ).            ex
-000299c0: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-000299d0: 2020 2020 2020 7061 7373 0a20 2020 2072        pass.    r
-000299e0: 6574 7572 6e20 5472 7565 2c73 7472 696e  eturn True,strin
-000299f0: 670a 0a64 6566 2053 6f72 7428 7372 632c  g..def Sort(src,
-00029a00: 7265 7665 7273 653d 4661 6c73 652c 6675  reverse=False,fu
-00029a10: 6e63 3d4e 6f6e 652c 6f72 6465 723d 4e6f  nc=None,order=No
-00029a20: 6e65 2c66 6965 6c64 3d4e 6f6e 652c 6261  ne,field=None,ba
-00029a30: 7365 3d27 6b65 7927 2c73 796d 3d4e 6f6e  se='key',sym=Non
-00029a40: 6529 3a0a 2020 2020 2727 270a 2020 2020  e):.    '''.    
-00029a50: 536f 7274 696e 6720 6461 7461 0a20 2020  Sorting data.   
-00029a60: 2073 7570 706f 7274 206c 6973 742c 7475   support list,tu
-00029a70: 706c 652c 6469 6374 2066 6f72 6d61 740a  ple,dict format.
-00029a80: 2020 2020 7265 7665 7273 6520 3a20 7265      reverse : re
-00029a90: 7665 7273 6520 736f 7274 0a20 2020 2066  verse sort.    f
-00029aa0: 756e 6320 2020 203a 2073 6f72 7469 6e67  unc    : sorting
-00029ab0: 206b 6579 2066 756e 6374 696f 6e20 2864   key function (d
-00029ac0: 6566 6175 6c74 204e 6f6e 6529 0a20 2020  efault None).   
-00029ad0: 206f 7264 6572 2020 203a 2073 6f72 7469   order   : sorti
-00029ae0: 6e67 206f 7264 6572 206d 6574 686f 640a  ng order method.
-00029af0: 2020 2020 2020 2020 4e6f 6e65 3a20 6465          None: de
-00029b00: 6661 756c 7420 7769 7468 2073 6f72 7428  fault with sort(
-00029b10: 2920 6675 6e63 7469 6f6e 0a20 2020 2020  ) function.     
-00029b20: 2020 2069 6e74 203a 2073 6f72 7420 7769     int : sort wi
-00029b30: 7468 2069 6e74 6567 6572 0a20 2020 2020  th integer.     
-00029b40: 2020 2073 7472 203a 2073 6f72 7420 7769     str : sort wi
-00029b50: 7468 2061 7363 6969 2063 6f64 650a 2020  th ascii code.  
-00029b60: 2020 2020 2020 6c65 6e20 3a20 736f 7274        len : sort
-00029b70: 2077 6974 6820 6461 7461 206c 656e 6774   with data lengt
-00029b80: 680a 2020 2020 6669 656c 6420 2020 0a20  h.    field   . 
-00029b90: 2020 2020 2020 204e 6f6e 6520 3a20 6465         None : de
-00029ba0: 6661 756c 740a 2020 2020 2020 2020 3c69  fault.        <i
-00029bb0: 6e74 3e3a 2073 6f72 7420 7769 7468 206c  nt>: sort with l
-00029bc0: 6973 7427 7320 696e 6465 7820 6e75 6d62  ist's index numb
-00029bd0: 6572 0a20 2020 2062 6173 650a 2020 2020  er.    base.    
-00029be0: 2020 2020 6b65 7920 203a 2064 6566 6175      key  : defau
-00029bf0: 6c74 2c20 736f 7274 2077 6974 6820 6b65  lt, sort with ke
-00029c00: 7920 6f66 2064 6963 7420 0a20 2020 2020  y of dict .     
-00029c10: 2020 2076 616c 7565 3a20 536f 7274 2077     value: Sort w
-00029c20: 6974 6820 7661 6c75 6520 6f66 2064 6963  ith value of dic
-00029c30: 740a 2020 2020 7379 6d20 2020 2020 203a  t.    sym      :
-00029c40: 204e 6f6e 6520 2864 6566 6175 6c74 290a   None (default).
-00029c50: 2020 2020 2020 2020 3c73 796d 626f 6c3e          <symbol>
-00029c60: 203a 2069 6620 7372 6320 6973 2073 7472   : if src is str
-00029c70: 696e 6720 7468 656e 2073 706c 6974 2077  ing then split w
-00029c80: 6974 6820 7468 6520 7379 6d0a 2020 2020  ith the sym.    
-00029c90: 2727 270a 2020 2020 6966 2069 7369 6e73  '''.    if isins
-00029ca0: 7461 6e63 6528 7372 632c 7374 7229 2061  tance(src,str) a
-00029cb0: 6e64 206e 6f74 2049 734e 6f6e 6528 7379  nd not IsNone(sy
-00029cc0: 6d29 3a20 7372 633d 7372 632e 7370 6c69  m): src=src.spli
-00029cd0: 7428 7379 6d29 0a20 2020 2069 6620 6973  t(sym).    if is
-00029ce0: 696e 7374 616e 6365 2873 7263 2c64 6963  instance(src,dic
-00029cf0: 7429 2061 6e64 2062 6173 6520 696e 205b  t) and base in [
-00029d00: 2764 6174 6127 2c27 7661 6c75 6527 5d3a  'data','value']:
-00029d10: 0a20 2020 2020 2020 2066 6965 6c64 3d31  .        field=1
-00029d20: 0a20 2020 2064 6566 205f 636c 656e 5f28  .    def _clen_(
-00029d30: 6529 3a0a 2020 2020 2020 2020 7472 793a  e):.        try:
-00029d40: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00029d50: 6973 696e 7374 616e 6365 2866 6965 6c64  isinstance(field
-00029d60: 2c69 6e74 293a 0a20 2020 2020 2020 2020  ,int):.         
-00029d70: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00029d80: 616e 6365 2865 2c28 6c69 7374 2c74 7570  ance(e,(list,tup
-00029d90: 6c65 2929 2061 6e64 206c 656e 2865 2920  le)) and len(e) 
-00029da0: 3e20 6669 656c 643a 0a20 2020 2020 2020  > field:.       
-00029db0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00029dc0: 7572 6e20 6c65 6e28 277b 7d27 2e66 6f72  urn len('{}'.for
-00029dd0: 6d61 7428 5374 7228 655b 6669 656c 645d  mat(Str(e[field]
-00029de0: 2929 290a 2020 2020 2020 2020 2020 2020  ))).            
-00029df0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00029e00: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00029e10: 7475 726e 2039 3939 3939 3939 0a20 2020  turn 9999999.   
-00029e20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00029e30: 6c65 6e28 277b 7d27 2e66 6f72 6d61 7428  len('{}'.format(
-00029e40: 5374 7228 6529 2929 0a20 2020 2020 2020  Str(e))).       
-00029e50: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-00029e60: 2020 2020 2072 6574 7572 6e20 650a 2020       return e.  
-00029e70: 2020 6465 6620 5f63 696e 745f 2865 293a    def _cint_(e):
-00029e80: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
-00029e90: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-00029ea0: 6e73 7461 6e63 6528 6669 656c 642c 696e  nstance(field,in
-00029eb0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00029ec0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00029ed0: 6528 652c 286c 6973 742c 7475 706c 6529  e(e,(list,tuple)
-00029ee0: 2920 616e 6420 6c65 6e28 6529 203e 2066  ) and len(e) > f
-00029ef0: 6965 6c64 3a0a 2020 2020 2020 2020 2020  ield:.          
-00029f00: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00029f10: 2069 6e74 2865 5b66 6965 6c64 5d29 0a20   int(e[field]). 
-00029f20: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00029f30: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00029f40: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00029f50: 3939 3939 3939 390a 2020 2020 2020 2020  9999999.        
-00029f60: 2020 2020 7265 7475 726e 2069 6e74 2865      return int(e
-00029f70: 290a 2020 2020 2020 2020 6578 6365 7074  ).        except
-00029f80: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00029f90: 7475 726e 2065 0a20 2020 2064 6566 205f  turn e.    def _
-00029fa0: 6373 7472 5f28 6529 3a0a 2020 2020 2020  cstr_(e):.      
-00029fb0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00029fc0: 6669 656c 642c 696e 7429 3a0a 2020 2020  field,int):.    
-00029fd0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00029fe0: 7461 6e63 6528 652c 286c 6973 742c 7475  tance(e,(list,tu
-00029ff0: 706c 6529 2920 616e 6420 6c65 6e28 6529  ple)) and len(e)
-0002a000: 203e 2066 6965 6c64 3a0a 2020 2020 2020   > field:.      
-0002a010: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0002a020: 2027 2727 7b7d 2727 272e 666f 726d 6174   '''{}'''.format
-0002a030: 2865 5b66 6965 6c64 5d29 0a20 2020 2020  (e[field]).     
-0002a040: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0002a050: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0002a060: 7572 6e20 277a 7a7a 7a7a 7a7a 7a7a 270a  urn 'zzzzzzzzz'.
-0002a070: 2020 2020 2020 2020 7265 7475 726e 2027          return '
-0002a080: 2727 7b7d 2727 272e 666f 726d 6174 2865  ''{}'''.format(e
-0002a090: 290a 2020 2020 6966 2069 7369 6e73 7461  ).    if isinsta
-0002a0a0: 6e63 6528 7372 632c 286c 6973 742c 7475  nce(src,(list,tu
-0002a0b0: 706c 6529 293a 0a20 2020 2020 2020 2073  ple)):.        s
-0002a0c0: 7263 3d6c 6973 7428 7372 6329 0a20 2020  rc=list(src).   
-0002a0d0: 2020 2020 2069 6620 6f72 6465 7220 696e       if order in
-0002a0e0: 205b 696e 742c 2769 6e74 272c 2764 6967   [int,'int','dig
-0002a0f0: 6974 272c 276e 756d 6265 7227 5d3a 0a20  it','number']:. 
-0002a100: 2020 2020 2020 2020 2020 2073 7263 2e73             src.s
-0002a110: 6f72 7428 7265 7665 7273 653d 7265 7665  ort(reverse=reve
-0002a120: 7273 652c 6b65 793d 5f63 696e 745f 290a  rse,key=_cint_).
-0002a130: 2020 2020 2020 2020 656c 6966 206f 7264          elif ord
-0002a140: 6572 2069 6e20 5b27 6c65 6e27 2c27 6c65  er in ['len','le
-0002a150: 6e67 7468 275d 3a0a 2020 2020 2020 2020  ngth']:.        
-0002a160: 2020 2020 7372 632e 736f 7274 2872 6576      src.sort(rev
-0002a170: 6572 7365 3d72 6576 6572 7365 2c6b 6579  erse=reverse,key
-0002a180: 3d5f 636c 656e 5f29 0a20 2020 2020 2020  =_clen_).       
-0002a190: 2065 6c69 6620 6f72 6465 7220 696e 205b   elif order in [
-0002a1a0: 7374 722c 2773 7472 275d 3a0a 2020 2020  str,'str']:.    
-0002a1b0: 2020 2020 2020 2020 7372 632e 736f 7274          src.sort
-0002a1c0: 2872 6576 6572 7365 3d72 6576 6572 7365  (reverse=reverse
-0002a1d0: 2c6b 6579 3d5f 6373 7472 5f29 0a20 2020  ,key=_cstr_).   
-0002a1e0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0002a1f0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0002a200: 616e 6365 2866 6965 6c64 2c69 6e74 293a  ance(field,int):
-0002a210: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a220: 2073 7263 2e73 6f72 7428 7265 7665 7273   src.sort(revers
-0002a230: 653d 7265 7665 7273 652c 6b65 793d 5f63  e=reverse,key=_c
-0002a240: 696e 745f 290a 2020 2020 2020 2020 2020  int_).          
-0002a250: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0002a260: 2020 2020 2020 2020 7372 632e 736f 7274          src.sort
-0002a270: 2872 6576 6572 7365 3d72 6576 6572 7365  (reverse=reverse
-0002a280: 2c6b 6579 3d66 756e 6329 0a20 2020 2020  ,key=func).     
-0002a290: 2020 2072 6574 7572 6e20 7372 630a 2020     return src.  
-0002a2a0: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
-0002a2b0: 6528 7372 632c 6469 6374 293a 0a20 2020  e(src,dict):.   
-0002a2c0: 2020 2020 206c 7374 3d6c 6973 7428 7372       lst=list(sr
-0002a2d0: 632e 6974 656d 7328 2929 0a20 2020 2020  c.items()).     
-0002a2e0: 2020 2069 6620 6261 7365 203d 3d20 276b     if base == 'k
-0002a2f0: 6579 273a 0a20 2020 2020 2020 2020 2020  ey':.           
-0002a300: 2066 6965 6c64 3d30 0a20 2020 2020 2020   field=0.       
-0002a310: 2020 2020 2069 6620 6f72 6465 7220 696e       if order in
-0002a320: 205b 696e 742c 2769 6e74 272c 2764 6967   [int,'int','dig
-0002a330: 6974 272c 276e 756d 6265 7227 5d3a 0a20  it','number']:. 
-0002a340: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0002a350: 7374 2e73 6f72 7428 7265 7665 7273 653d  st.sort(reverse=
-0002a360: 7265 7665 7273 652c 6b65 793d 5f63 696e  reverse,key=_cin
-0002a370: 745f 290a 2020 2020 2020 2020 2020 2020  t_).            
-0002a380: 656c 6966 206f 7264 6572 2069 6e20 5b27  elif order in ['
-0002a390: 6c65 6e27 2c27 6c65 6e67 7468 275d 3a0a  len','length']:.
-0002a3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a3b0: 6c73 742e 736f 7274 2872 6576 6572 7365  lst.sort(reverse
-0002a3c0: 3d72 6576 6572 7365 2c6b 6579 3d5f 636c  =reverse,key=_cl
-0002a3d0: 656e 5f29 0a20 2020 2020 2020 2020 2020  en_).           
-0002a3e0: 2065 6c69 6620 6f72 6465 7220 696e 205b   elif order in [
-0002a3f0: 7374 722c 2773 7472 275d 3a0a 2020 2020  str,'str']:.    
-0002a400: 2020 2020 2020 2020 2020 2020 6c73 742e              lst.
-0002a410: 736f 7274 2872 6576 6572 7365 3d72 6576  sort(reverse=rev
-0002a420: 6572 7365 2c6b 6579 3d5f 6373 7472 5f29  erse,key=_cstr_)
-0002a430: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-0002a440: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0002a450: 2020 206c 7374 2e73 6f72 7428 7265 7665     lst.sort(reve
-0002a460: 7273 653d 7265 7665 7273 652c 6675 6e63  rse=reverse,func
-0002a470: 3d66 756e 6329 0a20 2020 2020 2020 2065  =func).        e
-0002a480: 6c73 653a 2023 2076 616c 7565 202f 2064  lse: # value / d
-0002a490: 6174 6120 6361 7365 0a20 2020 2020 2020  ata case.       
-0002a4a0: 2020 2020 2066 6965 6c64 3d31 0a20 2020       field=1.   
-0002a4b0: 2020 2020 2020 2020 2069 6620 6f72 6465           if orde
-0002a4c0: 7220 696e 205b 696e 742c 2769 6e74 272c  r in [int,'int',
-0002a4d0: 2764 6967 6974 272c 276e 756d 6265 7227  'digit','number'
-0002a4e0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-0002a4f0: 2020 206c 7374 2e73 6f72 7428 7265 7665     lst.sort(reve
-0002a500: 7273 653d 7265 7665 7273 652c 6b65 793d  rse=reverse,key=
-0002a510: 5f63 696e 745f 290a 2020 2020 2020 2020  _cint_).        
-0002a520: 2020 2020 656c 6966 206f 7264 6572 2069      elif order i
-0002a530: 6e20 5b27 6c65 6e27 2c27 6c65 6e67 7468  n ['len','length
-0002a540: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-0002a550: 2020 2020 7265 7475 726e 206c 7374 2e73      return lst.s
-0002a560: 6f72 7428 7265 7665 7273 653d 7265 7665  ort(reverse=reve
-0002a570: 7273 652c 6b65 793d 5f63 6c65 6e5f 290a  rse,key=_clen_).
-0002a580: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0002a590: 206f 7264 6572 2069 6e20 5b73 7472 2c27   order in [str,'
-0002a5a0: 7374 7227 5d3a 0a20 2020 2020 2020 2020  str']:.         
-0002a5b0: 2020 2020 2020 206c 7374 2e73 6f72 7428         lst.sort(
-0002a5c0: 7265 7665 7273 653d 7265 7665 7273 652c  reverse=reverse,
-0002a5d0: 6b65 793d 5f63 7374 725f 290a 2020 2020  key=_cstr_).    
-0002a5e0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0002a5f0: 2020 2020 2020 2020 2020 2020 2020 6c73                ls
-0002a600: 742e 736f 7274 2872 6576 6572 7365 3d72  t.sort(reverse=r
-0002a610: 6576 6572 7365 2c66 756e 633d 6675 6e63  everse,func=func
-0002a620: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0002a630: 206c 7374 0a20 2020 2020 2020 2023 7265   lst.        #re
-0002a640: 7475 726e 205b 695b 305d 2066 6f72 2069  turn [i[0] for i
-0002a650: 2069 6e20 6c73 745d 0a0a 6465 6620 5665   in lst]..def Ve
-0002a660: 7273 696f 6e53 6f72 7428 6461 7461 2c73  rsionSort(data,s
-0002a670: 796d 3d27 2c27 2c72 6576 3d46 616c 7365  ym=',',rev=False
-0002a680: 293a 0a20 2020 2064 6566 2044 6963 744b  ):.    def DictK
-0002a690: 6579 7354 6f4c 6973 7428 6461 7461 2c76  eysToList(data,v
-0002a6a0: 6572 3d27 272c 6f75 743d 5b5d 293a 0a20  er='',out=[]):. 
-0002a6b0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0002a6c0: 616e 6365 2864 6174 612c 6469 6374 293a  ance(data,dict):
-0002a6d0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-0002a6e0: 2069 2069 6e20 6461 7461 3a0a 2020 2020   i in data:.    
-0002a6f0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0002a700: 6f74 2069 7369 6e73 7461 6e63 6528 6461  ot isinstance(da
-0002a710: 7461 5b69 5d2c 6469 6374 2920 6f72 2064  ta[i],dict) or d
-0002a720: 6174 615b 695d 2069 6e20 5b27 272c 4e6f  ata[i] in ['',No
-0002a730: 6e65 2c7b 7d5d 3a0a 2020 2020 2020 2020  ne,{}]:.        
-0002a740: 2020 2020 2020 2020 2020 2020 236f 7574              #out
-0002a750: 2e61 7070 656e 6428 7665 722b 272e 7b7d  .append(ver+'.{}
-0002a760: 272e 666f 726d 6174 2869 2929 2023 5573  '.format(i)) #Us
-0002a770: 6520 6b65 7920 2863 6861 6e67 6564 2066  e key (changed f
-0002a780: 6f72 6d61 7429 0a20 2020 2020 2020 2020  ormat).         
-0002a790: 2020 2020 2020 2020 2020 206f 7574 2e61             out.a
-0002a7a0: 7070 656e 6428 6461 7461 5b69 5d29 2023  ppend(data[i]) #
-0002a7b0: 2055 7365 206f 7269 6769 6e61 6c20 4461   Use original Da
-0002a7c0: 7461 0a20 2020 2020 2020 2020 2020 2020  ta.             
-0002a7d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002a7e0: 2020 2020 2020 2020 2020 2020 2044 6963               Dic
-0002a7f0: 744b 6579 7354 6f4c 6973 7428 6461 7461  tKeysToList(data
-0002a800: 5b69 5d2c 7665 722b 272e 7b7d 272e 666f  [i],ver+'.{}'.fo
-0002a810: 726d 6174 2869 2920 6966 2076 6572 2065  rmat(i) if ver e
-0002a820: 6c73 6520 277b 7d27 2e66 6f72 6d61 7428  lse '{}'.format(
-0002a830: 6929 2c6f 7574 3d6f 7574 290a 2020 2020  i),out=out).    
-0002a840: 2020 2020 7265 7475 726e 2076 6572 0a20      return ver. 
-0002a850: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0002a860: 2864 6174 612c 7374 7229 3a20 6461 7461  (data,str): data
-0002a870: 3d64 6174 612e 7370 6c69 7428 7379 6d29  =data.split(sym)
-0002a880: 0a20 2020 2069 6620 6e6f 7420 6973 696e  .    if not isin
-0002a890: 7374 616e 6365 2864 6174 612c 286c 6973  stance(data,(lis
-0002a8a0: 742c 7475 706c 6529 293a 2072 6574 7572  t,tuple)): retur
-0002a8b0: 6e20 4661 6c73 650a 2020 2020 6461 7461  n False.    data
-0002a8c0: 3d6c 6973 7428 6461 7461 290a 2020 2020  =list(data).    
-0002a8d0: 6966 206c 656e 2864 6174 6129 203c 2032  if len(data) < 2
-0002a8e0: 3a20 7265 7475 726e 2064 6174 610a 2020  : return data.  
-0002a8f0: 2020 736f 7274 5f64 6174 613d 7b7d 0a20    sort_data={}. 
-0002a900: 2020 206f 7574 3d5b 5d0a 2020 2020 2363     out=[].    #c
-0002a910: 6f6e 7665 7274 206c 6973 7420 746f 2064  onvert list to d
-0002a920: 6963 7420 666f 726d 6174 0a20 2020 2066  ict format.    f
-0002a930: 6f72 2069 2069 6e20 6461 7461 3a0a 2020  or i in data:.  
-0002a940: 2020 2020 2020 6966 206e 6f74 2069 3a20        if not i: 
-0002a950: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
-0002a960: 2074 743d 736f 7274 5f64 6174 610a 2020   tt=sort_data.  
-0002a970: 2020 2020 2020 6a5f 613d 5370 6c69 7428        j_a=Split(
-0002a980: 692c 272e 7c2d 7c3a 7c5f 2729 0a20 2020  i,'.|-|:|_').   
-0002a990: 2020 2020 206a 5f6d 3d6c 656e 286a 5f61       j_m=len(j_a
-0002a9a0: 292d 310a 2020 2020 2020 2020 666f 7220  )-1.        for 
-0002a9b0: 6a20 696e 2072 616e 6765 2830 2c6a 5f6d  j in range(0,j_m
-0002a9c0: 2b31 293a 0a20 2020 2020 2020 2020 2020  +1):.           
-0002a9d0: 206a 5f61 5b6a 5d3d 496e 7428 6a5f 615b   j_a[j]=Int(j_a[
-0002a9e0: 6a5d 290a 2020 2020 2020 2020 2020 2020  j]).            
-0002a9f0: 6966 206a 203d 3d20 6a5f 6d3a 0a20 2020  if j == j_m:.   
-0002aa00: 2020 2020 2020 2020 2020 2020 2074 745b               tt[
-0002aa10: 6a5f 615b 6a5d 5d3d 690a 2020 2020 2020  j_a[j]]=i.      
-0002aa20: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0002aa30: 2020 2020 2020 2020 2020 2020 6966 206a              if j
-0002aa40: 5f61 5b6a 5d20 6e6f 7420 696e 2074 743a  _a[j] not in tt:
-0002aa50: 2074 745b 6a5f 615b 6a5d 5d3d 7b7d 0a20   tt[j_a[j]]={}. 
-0002aa60: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0002aa70: 743d 7474 5b6a 5f61 5b6a 5d5d 0a0a 2020  t=tt[j_a[j]]..  
-0002aa80: 2020 2364 6963 7420 6461 7461 2074 6f20    #dict data to 
-0002aa90: 6175 746f 2073 6f72 7469 6e67 2028 6c69  auto sorting (li
-0002aaa0: 6b65 2061 7320 7079 7468 6f6e 322e 7820  ke as python2.x 
-0002aab0: 7374 796c 6520 736f 7274 696e 6729 0a20  style sorting). 
-0002aac0: 2020 206e 6577 5f64 6174 615f 7374 723d     new_data_str=
-0002aad0: 7070 7269 6e74 2e70 666f 726d 6174 2873  pprint.pformat(s
-0002aae0: 6f72 745f 6461 7461 290a 2020 2020 6e65  ort_data).    ne
-0002aaf0: 775f 6461 7461 3d61 7374 2e6c 6974 6572  w_data=ast.liter
-0002ab00: 616c 5f65 7661 6c28 6e65 775f 6461 7461  al_eval(new_data
-0002ab10: 5f73 7472 290a 2020 2020 2347 6574 2073  _str).    #Get s
-0002ab20: 6f72 7465 6420 6461 7461 2066 726f 6d20  orted data from 
-0002ab30: 6469 6374 2073 6f72 7469 6e67 0a20 2020  dict sorting.   
-0002ab40: 2044 6963 744b 6579 7354 6f4c 6973 7428   DictKeysToList(
-0002ab50: 6e65 775f 6461 7461 2c6f 7574 3d6f 7574  new_data,out=out
-0002ab60: 290a 2020 2020 6966 2072 6576 3a20 6f75  ).    if rev: ou
-0002ab70: 742e 7265 7665 7273 6528 2920 2372 6576  t.reverse() #rev
-0002ab80: 6572 7365 2064 6174 610a 2020 2020 7265  erse data.    re
-0002ab90: 7475 726e 206f 7574 0a0a 6465 6620 4d61  turn out..def Ma
-0002aba0: 6356 3428 7372 632c 2a2a 6f70 7473 293a  cV4(src,**opts):
-0002abb0: 0a20 2020 2027 2727 0a20 2020 2043 6865  .    '''.    Che
-0002abc0: 636b 204d 6163 2061 6464 7265 7373 2066  ck Mac address f
-0002abd0: 6f72 6d61 7420 616e 6420 636f 6e76 6572  ormat and conver
-0002abe0: 740a 2020 2020 4865 7820 746f 2049 6e74  t.    Hex to Int
-0002abf0: 0a20 2020 2048 6578 2074 6f20 4d61 6320  .    Hex to Mac 
-0002ac00: 7374 7269 6e67 0a20 2020 204d 6163 2073  string.    Mac s
-0002ac10: 7472 696e 6720 746f 2049 6e74 0a20 2020  tring to Int.   
-0002ac20: 2073 796d 626f 6c20 3a20 6465 6661 756c   symbol : defaul
-0002ac30: 7420 273a 2720 6d61 6320 6164 6472 6573  t ':' mac addres
-0002ac40: 7320 7370 6c69 7465 7220 7379 6d62 6f6c  s spliter symbol
-0002ac50: 0a20 2020 206f 7574 203a 0a20 2020 2020  .    out :.     
-0002ac60: 2073 7472 203a 2064 6566 6175 6c74 203a   str : default :
-0002ac70: 2058 583a 5858 3a58 583a 5858 3a58 5820   XX:XX:XX:XX:XX 
-0002ac80: 666f 726d 6174 0a20 2020 2020 2069 6e74  format.      int
-0002ac90: 203a 2069 6e74 6567 6572 2066 6f72 6d61   : integer forma
-0002aca0: 740a 2020 2020 6465 6661 756c 7420 3a20  t.    default : 
-0002acb0: 4661 6c73 650a 2020 2020 6361 7365 203a  False.    case :
-0002acc0: 200a 2020 2020 2020 7570 7065 7220 3a20   .      upper : 
-0002acd0: 7570 7065 7220 6361 7365 206f 7574 7075  upper case outpu
-0002ace0: 740a 2020 2020 2020 6c6f 7765 7220 3a20  t.      lower : 
-0002acf0: 6c6f 7765 7220 6361 7365 206f 7574 7075  lower case outpu
-0002ad00: 740a 2020 2020 6966 6e61 6d65 203a 0a20  t.    ifname :. 
-0002ad10: 2020 2020 2054 7275 6520 3a20 7372 6320       True : src 
-0002ad20: 6973 204e 6574 776f 726b 2069 6e74 6572  is Network inter
-0002ad30: 6661 6365 204e 616d 650a 2020 2020 2727  face Name.    ''
-0002ad40: 270a 2020 2020 7379 6d62 6f6c 3d6f 7074  '.    symbol=opt
-0002ad50: 732e 6765 7428 2773 796d 626f 6c27 2c6f  s.get('symbol',o
-0002ad60: 7074 732e 6765 7428 2773 796d 272c 273a  pts.get('sym',':
-0002ad70: 2729 290a 2020 2020 6465 6661 756c 743d  ')).    default=
-0002ad80: 6f70 7473 2e67 6574 2827 6465 6661 756c  opts.get('defaul
-0002ad90: 7427 2c46 616c 7365 290a 2020 2020 6f75  t',False).    ou
-0002ada0: 743d 6f70 7473 2e67 6574 2827 6f75 7427  t=opts.get('out'
-0002adb0: 2c27 7374 7227 290a 2020 2020 6361 7365  ,'str').    case
-0002adc0: 3d6f 7074 732e 6765 7428 2763 6173 6527  =opts.get('case'
-0002add0: 2c27 6c6f 7765 7227 290a 2020 2020 2320  ,'lower').    # 
-0002ade0: 4672 6f6d 2069 666e 616d 6520 286e 6574  From ifname (net
-0002adf0: 776f 726b 2064 6576 6963 6520 6e61 6d65  work device name
-0002ae00: 290a 2020 2020 6966 6e61 6d65 3d6f 7074  ).    ifname=opt
-0002ae10: 732e 6765 7428 2769 666e 616d 6527 2c46  s.get('ifname',F
-0002ae20: 616c 7365 290a 2020 2020 6966 2069 666e  alse).    if ifn
-0002ae30: 616d 6520 6973 2054 7275 6520 616e 6420  ame is True and 
-0002ae40: 6973 696e 7374 616e 6365 2873 7263 2c73  isinstance(src,s
-0002ae50: 7472 293a 0a20 2020 2020 2020 2074 7279  tr):.        try
-0002ae60: 3a0a 2020 2020 2020 2020 2020 2020 7320  :.            s 
-0002ae70: 3d20 736f 636b 6574 2e73 6f63 6b65 7428  = socket.socket(
-0002ae80: 736f 636b 6574 2e41 465f 494e 4554 2c20  socket.AF_INET, 
-0002ae90: 736f 636b 6574 2e53 4f43 4b5f 4447 5241  socket.SOCK_DGRA
-0002aea0: 4d29 0a20 2020 2020 2020 2020 2020 2069  M).            i
-0002aeb0: 6620 5079 5665 7228 3329 3a0a 2020 2020  f PyVer(3):.    
-0002aec0: 2020 2020 2020 2020 2020 2020 696e 666f              info
-0002aed0: 203d 2066 636e 746c 2e69 6f63 746c 2873   = fcntl.ioctl(s
-0002aee0: 2e66 696c 656e 6f28 292c 2030 7838 3932  .fileno(), 0x892
-0002aef0: 372c 2020 7374 7275 6374 2e70 6163 6b28  7,  struct.pack(
-0002af00: 2732 3536 7327 2c20 4279 7465 7328 7372  '256s', Bytes(sr
-0002af10: 635b 3a31 355d 2c65 6e63 6f64 653d 2775  c[:15],encode='u
-0002af20: 7466 2d38 2729 2929 0a20 2020 2020 2020  tf-8'))).       
-0002af30: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0002af40: 273a 272e 6a6f 696e 285b 2725 3032 7827  ':'.join(['%02x'
-0002af50: 2025 2063 6861 7220 666f 7220 6368 6172   % char for char
-0002af60: 2069 6e20 696e 666f 5b31 383a 3234 5d5d   in info[18:24]]
-0002af70: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0002af80: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002af90: 2020 2020 696e 666f 203d 2066 636e 746c      info = fcntl
-0002afa0: 2e69 6f63 746c 2873 2e66 696c 656e 6f28  .ioctl(s.fileno(
-0002afb0: 292c 2030 7838 3932 372c 2020 7374 7275  ), 0x8927,  stru
-0002afc0: 6374 2e70 6163 6b28 2732 3536 7327 2c20  ct.pack('256s', 
-0002afd0: 7372 635b 3a31 355d 2929 0a20 2020 2020  src[:15])).     
-0002afe0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0002aff0: 6e20 273a 272e 6a6f 696e 285b 2725 3032  n ':'.join(['%02
-0002b000: 7827 2025 206f 7264 2863 6861 7229 2066  x' % ord(char) f
-0002b010: 6f72 2063 6861 7220 696e 2069 6e66 6f5b  or char in info[
-0002b020: 3138 3a32 345d 5d29 0a20 2020 2020 2020  18:24]]).       
-0002b030: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-0002b040: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-0002b050: 756c 740a 0a20 2020 2064 6566 2069 6e74  ult..    def int
-0002b060: 3273 7472 2873 7263 2c73 796d 293a 0a20  2str(src,sym):. 
-0002b070: 2020 2020 2020 2072 6574 7572 6e20 273a         return ':
-0002b080: 272e 6a6f 696e 285b 277b 7d7b 7d27 2e66  '.join(['{}{}'.f
-0002b090: 6f72 6d61 7428 612c 2062 2920 666f 7220  ormat(a, b) for 
-0002b0a0: 612c 2062 2069 6e20 7a69 7028 2a5b 6974  a, b in zip(*[it
-0002b0b0: 6572 2827 7b3a 3031 3278 7d27 2e66 6f72  er('{:012x}'.for
-0002b0c0: 6d61 7428 7372 6329 295d 2a32 295d 290a  mat(src))]*2)]).
-0002b0d0: 2020 2020 6465 6620 7374 7232 696e 7428      def str2int(
-0002b0e0: 7372 6329 3a0a 2020 2020 2020 2020 7265  src):.        re
-0002b0f0: 7475 726e 2069 6e74 2873 7263 2e6c 6f77  turn int(src.low
-0002b100: 6572 2829 2e72 6570 6c61 6365 2827 2d27  er().replace('-'
-0002b110: 2c27 2729 2e72 6570 6c61 6365 2827 3a27  ,'').replace(':'
-0002b120: 2c27 2729 2c20 3136 290a 2020 2020 6966  ,''), 16).    if
-0002b130: 2054 7970 6528 7372 632c 2762 7974 6573   Type(src,'bytes
-0002b140: 2729 3a20 0a20 2020 2020 2020 2069 6620  '): .        if 
-0002b150: 6c65 6e28 7372 6329 203d 3d20 363a 2023  len(src) == 6: #
-0002b160: 2066 6f72 6d61 7420 6227 5c78 3030 5c78   format b'\x00\x
-0002b170: 6465 345c 7865 662e 5c78 6634 270a 2020  de4\xef.\xf4'.  
-0002b180: 2020 2020 2020 2020 2020 7372 633d 636f            src=co
-0002b190: 6465 6373 2e65 6e63 6f64 6528 7372 632c  decs.encode(src,
-0002b1a0: 2768 6578 2729 2020 2320 666f 726d 6174  'hex')  # format
-0002b1b0: 2062 2730 3064 6533 3465 6632 6566 3427   b'00de34ef2ef4'
-0002b1c0: 0a20 2020 2020 2020 2073 7263 3d53 7472  .        src=Str
-0002b1d0: 2873 7263 290a 2020 2020 6966 2069 7369  (src).    if isi
-0002b1e0: 6e73 7461 6e63 6528 7372 632c 7374 7229  nstance(src,str)
-0002b1f0: 3a0a 2020 2020 2020 2020 7372 633d 7372  :.        src=sr
-0002b200: 632e 7374 7269 7028 290a 2020 2020 2020  c.strip().      
-0002b210: 2020 2320 6d61 6b65 2073 7572 6520 7468    # make sure th
-0002b220: 6520 666f 726d 6174 0a20 2020 2020 2020  e format.       
-0002b230: 2069 6620 3132 203c 3d20 6c65 6e28 7372   if 12 <= len(sr
-0002b240: 6329 203c 3d20 3137 3a0a 2020 2020 2020  c) <= 17:.      
-0002b250: 2020 2020 2020 666f 7220 6920 696e 205b        for i in [
-0002b260: 273a 272c 272d 275d 3a0a 2020 2020 2020  ':','-']:.      
-0002b270: 2020 2020 2020 2020 2020 7372 633d 7372            src=sr
-0002b280: 632e 7265 706c 6163 6528 692c 2727 290a  c.replace(i,'').
-0002b290: 2020 2020 2020 2020 2020 2020 7372 633d              src=
-0002b2a0: 4a6f 696e 285b 7372 635b 693a 692b 325d  Join([src[i:i+2]
-0002b2b0: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
-0002b2c0: 302c 3132 2c32 295d 2c73 796d 626f 6c3d  0,12,2)],symbol=
-0002b2d0: 273a 2729 0a20 2020 2020 2020 2023 2043  ':').        # C
-0002b2e0: 6865 636b 2074 6865 206e 6f72 6d61 6c20  heck the normal 
-0002b2f0: 6d61 6320 666f 726d 6174 0a20 2020 2020  mac format.     
-0002b300: 2020 206f 6374 6574 7320 3d20 7372 632e     octets = src.
-0002b310: 7370 6c69 7428 273a 2729 0a20 2020 2020  split(':').     
-0002b320: 2020 2069 6620 6c65 6e28 6f63 7465 7473     if len(octets
-0002b330: 2920 213d 2036 3a20 7265 7475 726e 2064  ) != 6: return d
-0002b340: 6566 6175 6c74 0a20 2020 2020 2020 2066  efault.        f
-0002b350: 6f72 2069 2069 6e20 6f63 7465 7473 3a0a  or i in octets:.
-0002b360: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-0002b370: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b380: 6966 206c 656e 2869 2920 213d 2032 206f  if len(i) != 2 o
-0002b390: 7220 696e 7428 692c 2031 3629 203e 2032  r int(i, 16) > 2
-0002b3a0: 3535 3a0a 2020 2020 2020 2020 2020 2020  55:.            
-0002b3b0: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
-0002b3c0: 6661 756c 740a 2020 2020 2020 2020 2020  fault.          
-0002b3d0: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
-0002b3e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0002b3f0: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
-0002b400: 6966 206f 7574 2069 6e20 5b69 6e74 2c27  if out in [int,'
-0002b410: 696e 7427 2c27 6e75 6d62 6572 275d 3a20  int','number']: 
-0002b420: 7265 7475 726e 2073 7472 3269 6e74 2873  return str2int(s
-0002b430: 7263 290a 2020 2020 2020 2020 6966 2073  rc).        if s
-0002b440: 796d 626f 6c20 213d 2027 3a27 3a20 7372  ymbol != ':': sr
-0002b450: 633d 7372 632e 7265 706c 6163 6528 273a  c=src.replace(':
-0002b460: 272c 7379 6d62 6f6c 290a 2020 2020 2020  ',symbol).      
-0002b470: 2020 6966 2063 6173 6520 3d3d 2027 7570    if case == 'up
-0002b480: 7065 7227 3a20 7265 7475 726e 2073 7263  per': return src
-0002b490: 2e75 7070 6572 2829 0a20 2020 2020 2020  .upper().       
-0002b4a0: 2072 6574 7572 6e20 7372 632e 6c6f 7765   return src.lowe
-0002b4b0: 7228 290a 2020 2020 656c 6966 2069 7369  r().    elif isi
-0002b4c0: 6e73 7461 6e63 6528 7372 632c 696e 7429  nstance(src,int)
-0002b4d0: 2061 6e64 206e 6f74 2069 7369 6e73 7461   and not isinsta
-0002b4e0: 6e63 6528 7372 632c 626f 6f6c 293a 0a20  nce(src,bool):. 
-0002b4f0: 2020 2020 2020 2069 6620 6f75 7420 696e         if out in
-0002b500: 205b 696e 742c 2769 6e74 272c 276e 756d   [int,'int','num
-0002b510: 6265 7227 5d3a 2072 6574 7572 6e20 7372  ber']: return sr
-0002b520: 630a 2020 2020 2020 2020 7372 633d 696e  c.        src=in
-0002b530: 7432 7374 7228 7372 632c 7379 6d62 6f6c  t2str(src,symbol
-0002b540: 290a 2020 2020 2020 2020 6966 2063 6173  ).        if cas
-0002b550: 6520 3d3d 2027 7570 7065 7227 3a20 7265  e == 'upper': re
-0002b560: 7475 726e 2073 7263 2e75 7070 6572 2829  turn src.upper()
-0002b570: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0002b580: 7372 632e 6c6f 7765 7228 290a 2020 2020  src.lower().    
-0002b590: 7265 7475 726e 2064 6566 6175 6c74 0a0a  return default..
-0002b5a0: 6465 6620 4765 7449 666e 616d 6528 6d61  def GetIfname(ma
-0002b5b0: 6329 3a0a 2020 2020 6e65 745f 6469 723d  c):.    net_dir=
-0002b5c0: 272f 7379 732f 636c 6173 732f 6e65 7427  '/sys/class/net'
-0002b5d0: 0a20 2020 2069 6620 6f73 2e70 6174 682e  .    if os.path.
-0002b5e0: 6973 6469 7228 6e65 745f 6469 7229 3a0a  isdir(net_dir):.
-0002b5f0: 2020 2020 2020 2020 6469 7270 6174 682c          dirpath,
-0002b600: 6469 726e 616d 6573 2c66 696c 656e 616d  dirnames,filenam
-0002b610: 6573 203d 206c 6973 7428 6f73 2e77 616c  es = list(os.wal
-0002b620: 6b28 6e65 745f 6469 7229 295b 305d 0a20  k(net_dir))[0]. 
-0002b630: 2020 2020 2020 2066 6f72 2064 6576 2069         for dev i
-0002b640: 6e20 6469 726e 616d 6573 3a0a 2020 2020  n dirnames:.    
-0002b650: 2020 2020 2020 2020 666d 6163 3d63 6174          fmac=cat
-0002b660: 2827 7b7d 2f7b 7d2f 6164 6472 6573 7327  ('{}/{}/address'
-0002b670: 2e66 6f72 6d61 7428 6469 7270 6174 682c  .format(dirpath,
-0002b680: 6465 7629 2c6e 6f5f 656e 645f 6e65 776c  dev),no_end_newl
-0002b690: 696e 653d 5472 7565 290a 2020 2020 2020  ine=True).      
-0002b6a0: 2020 2020 2020 6966 2074 7970 6528 666d        if type(fm
-0002b6b0: 6163 2920 6973 2073 7472 2061 6e64 2066  ac) is str and f
-0002b6c0: 6d61 632e 7374 7269 7028 292e 6c6f 7765  mac.strip().lowe
-0002b6d0: 7228 2920 3d3d 206d 6163 2e6c 6f77 6572  r() == mac.lower
-0002b6e0: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-0002b6f0: 2020 2020 7265 7475 726e 2064 6576 0a0a      return dev..
-0002b700: 6465 6620 5061 7468 282a 696e 702c 2a2a  def Path(*inp,**
-0002b710: 6f70 7473 293a 0a20 2020 2027 2727 0a20  opts):.    '''. 
-0002b720: 2020 2047 6574 2050 6174 6820 6f66 2069     Get Path of i
-0002b730: 6e70 7574 0a20 2020 2069 6e70 7574 7329  nput.    inputs)
-0002b740: 0a20 2020 2020 2020 7e20 2020 2020 2020  .       ~       
-0002b750: 3a20 686f 6d65 2070 6174 680a 2020 2020  : home path.    
-0002b760: 2020 207e 3c75 7365 723e 203a 2075 7365     ~<user> : use
-0002b770: 7227 7320 686f 6d65 2070 6174 680a 2020  r's home path.  
-0002b780: 2020 2020 204e 6f6e 6520 2020 203a 2063       None    : c
-0002b790: 7572 7265 6e74 2070 6174 680a 2020 2020  urrent path.    
-0002b7a0: 2020 205f 5f66 696c 655f 5f3a 2063 7572     __file__: cur
-0002b7b0: 7265 6e74 2070 7974 686f 6e20 7363 7269  rent python scri
-0002b7c0: 7074 2066 696c 6520 7061 7468 0a20 2020  pt file path.   
-0002b7d0: 2020 2020 5f5f 6d6f 645f 5f20 3a20 5468      __mod__ : Th
-0002b7e0: 6973 2070 7974 686f 6e20 7363 7269 7074  is python script
-0002b7f0: 2066 696c 6520 7061 7468 0a20 2020 2020   file path.     
-0002b800: 2020 6669 6c65 2020 2020 3a20 7468 6520    file    : the 
-0002b810: 6669 6c65 2773 2070 6174 680a 2020 2020  file's path.    
-0002b820: 2020 205b 6c69 7374 5d20 203a 2063 6f6e     [list]  : con
-0002b830: 7665 7274 2074 6f20 7061 7468 2072 756c  vert to path rul
-0002b840: 6520 0a20 2020 2020 2020 6f62 6a20 2020  e .       obj   
-0002b850: 2020 3a20 7375 7070 6f72 7420 6675 6e63    : support func
-0002b860: 7469 6f6e 2c20 6d6f 6475 6c65 2c20 636c  tion, module, cl
-0002b870: 6173 732c 2069 6e73 7461 6e63 650a 0a20  ass, instance.. 
-0002b880: 2020 2072 656d 6f76 655f 646f 7420 3a20     remove_dot : 
-0002b890: 0a20 2020 2020 2054 7275 6520 3a20 2864  .      True : (d
-0002b8a0: 6566 6175 6c74 2920 2f61 2f62 2f2e 2f2e  efault) /a/b/./.
-0002b8b0: 2e2f 6320 3d3e 202f 612f 630a 2020 2020  ./c => /a/c.    
-0002b8c0: 2020 4661 6c73 653a 202f 612f 622f 2e2f    False: /a/b/./
-0002b8d0: 2e2e 2f63 203d 3e20 2f61 2f62 2f2e 2f2e  ../c => /a/b/./.
-0002b8e0: 2e2f 630a 2020 2020 6572 726f 7220 3a20  ./c.    error : 
-0002b8f0: 0a20 2020 2020 2046 616c 7365 3a20 6465  .      False: de
-0002b900: 6661 756c 742c 2069 6620 7061 7468 2069  fault, if path i
-0002b910: 7373 7565 2074 6865 6e20 7265 7475 726e  ssue then return
-0002b920: 2065 7272 6f72 0a20 2020 2020 2054 7275   error.      Tru
-0002b930: 6520 3a20 6966 2070 6174 6820 6973 7375  e : if path issu
-0002b940: 6520 7468 656e 2069 676e 6f72 650a 2020  e then ignore.  
-0002b950: 2020 6f75 7420 3a0a 2020 2020 2073 7472    out :.     str
-0002b960: 203a 2064 6566 6175 6c74 3a20 7265 7475   : default: retu
-0002b970: 726e 2070 6174 6820 7374 7269 6e67 0a20  rn path string. 
-0002b980: 2020 2020 6c69 7374 3a20 7265 7475 726e      list: return
-0002b990: 206c 6973 7420 666f 726d 6174 0a20 2020   list format.   
-0002b9a0: 2020 2020 2d20 666f 7263 655f 726f 6f74      - force_root
-0002b9b0: 203a 2064 6566 6175 6c74 2046 616c 7365   : default False
-0002b9c0: 2c20 5472 7565 3a20 5b27 272c 2761 272c  , True: ['','a',
-0002b9d0: 2762 275d 206f 7220 5b27 6127 2c27 6227  'b'] or ['a','b'
-0002b9e0: 5d20 3d3e 2027 2f61 2f62 270a 0a20 2020  ] => '/a/b'..   
-0002b9f0: 2020 272f 612f 622f 6327 203d 3e20 5b27    '/a/b/c' => ['
-0002ba00: 272c 2761 272c 2762 272c 2763 275d 2028  ','a','b','c'] (
-0002ba10: 6f75 743d 6c69 7374 290a 2020 2020 2027  out=list).     '
-0002ba20: 612f 622f 6327 2020 3d3e 205b 2761 272c  a/b/c'  => ['a',
-0002ba30: 2762 272c 2763 275d 2020 2020 286f 7574  'b','c']    (out
-0002ba40: 3d6c 6973 7429 0a20 2020 2020 5b27 272c  =list).     ['',
-0002ba50: 2761 272c 2762 272c 2763 275d 2020 3d3e  'a','b','c']  =>
-0002ba60: 2027 2f61 2f62 2f63 2728 6f75 743d 7374   '/a/b/c'(out=st
-0002ba70: 7229 0a20 2020 2020 5b27 6127 2c27 6227  r).     ['a','b'
-0002ba80: 2c27 6327 5d20 2020 2020 3d3e 2027 612f  ,'c']     => 'a/
-0002ba90: 622f 6327 2028 6f75 743d 7374 7229 0a20  b/c' (out=str). 
-0002baa0: 2020 2027 2727 0a20 2020 2073 796d 3d6f     '''.    sym=o
-0002bab0: 7074 732e 6765 7428 2773 796d 272c 272f  pts.get('sym','/
-0002bac0: 2729 0a20 2020 206f 7574 3d6f 7074 732e  ').    out=opts.
-0002bad0: 6765 7428 276f 7574 272c 2773 7472 2729  get('out','str')
-0002bae0: 0a20 2020 2065 7869 7374 3d6f 7074 732e  .    exist=opts.
-0002baf0: 6765 7428 2765 7869 7374 272c 4661 6c73  get('exist',Fals
-0002bb00: 6529 0a20 2020 2064 6566 6175 6c74 3d6f  e).    default=o
-0002bb10: 7074 732e 6765 7428 2764 6566 6175 6c74  pts.get('default
-0002bb20: 272c 4661 6c73 6529 0a20 2020 2072 656d  ',False).    rem
-0002bb30: 6f76 655f 646f 743d 6f70 7473 2e67 6574  ove_dot=opts.get
-0002bb40: 2827 7265 6d6f 7665 5f64 6f74 272c 5472  ('remove_dot',Tr
-0002bb50: 7565 290a 2020 2020 6572 723d 6f70 7473  ue).    err=opts
-0002bb60: 2e67 6574 2827 6572 7227 2c6f 7074 732e  .get('err',opts.
-0002bb70: 6765 7428 2765 7272 6f72 272c 4661 6c73  get('error',Fals
-0002bb80: 6529 290a 2020 2020 6465 6661 756c 743d  e)).    default=
-0002bb90: 6f70 7473 2e67 6574 2827 6465 6661 756c  opts.get('defaul
-0002bba0: 7427 2c46 616c 7365 290a 2020 2020 6261  t',False).    ba
-0002bbb0: 7365 5f64 6972 3d4e 6f6e 650a 2020 2020  se_dir=None.    
-0002bbc0: 6966 206e 6f74 2069 6e70 3a0a 2020 2020  if not inp:.    
-0002bbd0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-0002bbe0: 2020 2020 2062 6173 655f 6469 723d 6f73       base_dir=os
-0002bbf0: 2e65 6e76 6972 6f6e 5b27 5057 4427 5d0a  .environ['PWD'].
-0002bc00: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
-0002bc10: 2020 2020 2020 2020 2020 2020 6261 7365              base
-0002bc20: 5f64 6972 3d6f 732e 7061 7468 2e64 6972  _dir=os.path.dir
-0002bc30: 6e61 6d65 286f 732e 7061 7468 2e72 6561  name(os.path.rea
-0002bc40: 6c70 6174 6828 2869 6e73 7065 6374 2e73  lpath((inspect.s
-0002bc50: 7461 636b 2829 5b2d 315d 295b 315d 2929  tack()[-1])[1]))
-0002bc60: 0a20 2020 2065 6c69 6620 696e 703a 0a20  .    elif inp:. 
-0002bc70: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0002bc80: 616e 6365 2869 6e70 5b30 5d2c 7374 7229  ance(inp[0],str)
-0002bc90: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0002bca0: 206f 732e 7061 7468 2e69 7366 696c 6528   os.path.isfile(
-0002bcb0: 696e 705b 305d 293a 0a20 2020 2020 2020  inp[0]):.       
-0002bcc0: 2020 2020 2020 2020 2062 6173 655f 6469           base_di
-0002bcd0: 723d 6f73 2e70 6174 682e 6469 726e 616d  r=os.path.dirnam
-0002bce0: 6528 6f73 2e70 6174 682e 6162 7370 6174  e(os.path.abspat
-0002bcf0: 6828 696e 705b 305d 2929 0a20 2020 2020  h(inp[0])).     
-0002bd00: 2020 2020 2020 2065 6c69 6620 696e 705b         elif inp[
-0002bd10: 305d 203d 3d20 275f 5f6d 6f64 5f5f 273a  0] == '__mod__':
-0002bd20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002bd30: 2023 5468 6973 206d 6f64 756c 6520 7061   #This module pa
-0002bd40: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
-0002bd50: 2020 2062 6173 655f 6469 723d 6f73 2e70     base_dir=os.p
-0002bd60: 6174 682e 6469 726e 616d 6528 6f73 2e70  ath.dirname(os.p
-0002bd70: 6174 682e 6162 7370 6174 6828 5f5f 6669  ath.abspath(__fi
-0002bd80: 6c65 5f5f 2929 2023 204e 6f74 2069 6e70  le__)) # Not inp
-0002bd90: 7574 2074 6865 6e20 6765 7420 6375 7272  ut then get curr
-0002bda0: 656e 7420 7061 7468 0a20 2020 2020 2020  ent path.       
-0002bdb0: 2020 2020 2065 6c69 6620 696e 705b 305d       elif inp[0]
-0002bdc0: 203d 3d20 275f 5f66 696c 655f 5f27 3a0a   == '__file__':.
-0002bdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bde0: 2347 6574 2043 616c 6c65 7220 6675 6e63  #Get Caller func
-0002bdf0: 7469 6f6e 2773 2046 696c 656e 616d 650a  tion's Filename.
-0002be00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002be10: 6d79 5f66 696c 653d 696e 7370 6563 742e  my_file=inspect.
-0002be20: 6765 7466 696c 6528 4675 6e63 7469 6f6e  getfile(Function
-0002be30: 4e61 6d65 2870 6172 656e 743d 312c 6f62  Name(parent=1,ob
-0002be40: 6a3d 5472 7565 295b 315d 2920 0a20 2020  j=True)[1]) .   
-0002be50: 2020 2020 2020 2020 2020 2020 2062 6173               bas
-0002be60: 655f 6469 723d 6f73 2e70 6174 682e 6469  e_dir=os.path.di
-0002be70: 726e 616d 6528 6f73 2e70 6174 682e 6162  rname(os.path.ab
-0002be80: 7370 6174 6828 6d79 5f66 696c 6529 2920  spath(my_file)) 
-0002be90: 2320 4765 7420 6669 6c65 6e61 6d65 2070  # Get filename p
-0002bea0: 6174 680a 2020 2020 2020 2020 2020 2020  ath.            
-0002beb0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0002bec0: 2020 2020 2020 6261 7365 5f64 6972 3d69        base_dir=i
-0002bed0: 6e70 5b30 5d0a 2020 2020 2020 2020 656c  np[0].        el
-0002bee0: 6966 2054 7970 6528 696e 705b 305d 2c28  if Type(inp[0],(
-0002bef0: 2766 756e 6374 696f 6e27 2c27 6d6f 6475  'function','modu
-0002bf00: 6c65 272c 2763 6c61 7373 6f62 6a27 2c27  le','classobj','
-0002bf10: 696e 7374 616e 6365 2729 293a 0a20 2020  instance')):.   
-0002bf20: 2020 2020 2020 2020 206d 795f 6669 6c65           my_file
-0002bf30: 3d69 6e73 7065 6374 2e67 6574 6669 6c65  =inspect.getfile
-0002bf40: 2869 6e70 5b30 5d29 2023 2047 6574 206f  (inp[0]) # Get o
-0002bf50: 626a 2773 2066 696c 656e 616d 650a 2020  bj's filename.  
-0002bf60: 2020 2020 2020 2020 2020 6261 7365 5f64            base_d
-0002bf70: 6972 3d6f 732e 7061 7468 2e64 6972 6e61  ir=os.path.dirna
-0002bf80: 6d65 286f 732e 7061 7468 2e61 6273 7061  me(os.path.abspa
-0002bf90: 7468 286d 795f 6669 6c65 2929 2020 0a20  th(my_file))  . 
-0002bfa0: 2020 2066 756c 6c5f 7061 7468 3d5b 5d0a     full_path=[].
-0002bfb0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0002bfc0: 6528 6261 7365 5f64 6972 2c73 7472 293a  e(base_dir,str):
-0002bfd0: 0a20 2020 2020 2020 2066 756c 6c5f 7061  .        full_pa
-0002bfe0: 7468 3d62 6173 655f 6469 722e 7370 6c69  th=base_dir.spli
-0002bff0: 7428 7379 6d29 0a20 2020 2065 6c69 6620  t(sym).    elif 
-0002c000: 6973 696e 7374 616e 6365 2869 6e70 5b30  isinstance(inp[0
-0002c010: 5d2c 286c 6973 742c 7475 706c 6529 293a  ],(list,tuple)):
-0002c020: 0a20 2020 2020 2020 2066 756c 6c5f 7061  .        full_pa
-0002c030: 7468 3d6c 6973 7428 696e 705b 305d 290a  th=list(inp[0]).
-0002c040: 2020 2020 6966 2066 756c 6c5f 7061 7468      if full_path
-0002c050: 3a0a 2020 2020 2020 2020 6966 2066 756c  :.        if ful
-0002c060: 6c5f 7061 7468 5b30 5d20 3d3d 2027 7e27  l_path[0] == '~'
-0002c070: 206f 7220 2866 756c 6c5f 7061 7468 5b30   or (full_path[0
-0002c080: 5d20 616e 6420 6675 6c6c 5f70 6174 685b  ] and full_path[
-0002c090: 305d 5b30 5d20 3d3d 2027 7e27 293a 2020  0][0] == '~'):  
-0002c0a0: 2020 2020 2320 7e20 6f72 207e 3c75 7365      # ~ or ~<use
-0002c0b0: 723e 2073 7479 6c65 0a20 2020 2020 2020  r> style.       
-0002c0c0: 2020 2020 2023 6675 6c6c 5f70 6174 683d       #full_path=
-0002c0d0: 6f73 2e65 6e76 6972 6f6e 5b27 484f 4d45  os.environ['HOME
-0002c0e0: 275d 2e73 706c 6974 2873 796d 292b 6675  '].split(sym)+fu
-0002c0f0: 6c6c 5f70 6174 685b 313a 5d0a 2020 2020  ll_path[1:].    
-0002c100: 2020 2020 2020 2020 6675 6c6c 5f70 6174          full_pat
-0002c110: 683d 6f73 2e70 6174 682e 6578 7061 6e64  h=os.path.expand
-0002c120: 7573 6572 2866 756c 6c5f 7061 7468 5b30  user(full_path[0
-0002c130: 5d29 2e73 706c 6974 2873 796d 292b 6675  ]).split(sym)+fu
-0002c140: 6c6c 5f70 6174 685b 313a 5d0a 2320 2020  ll_path[1:].#   
-0002c150: 2020 2020 2065 6c69 6620 6675 6c6c 5f70       elif full_p
-0002c160: 6174 685b 305d 2061 6e64 2066 756c 6c5f  ath[0] and full_
-0002c170: 7061 7468 5b30 5d5b 305d 203d 3d20 277e  path[0][0] == '~
-0002c180: 273a 2023 207e 3c75 7365 723e 2073 7479  ': # ~<user> sty
-0002c190: 6c65 0a23 2020 2020 2020 2020 2020 2020  le.#            
-0002c1a0: 6675 6c6c 5f70 6174 683d 6f73 2e70 6174  full_path=os.pat
-0002c1b0: 682e 6578 7061 6e64 7573 6572 2866 756c  h.expanduser(ful
-0002c1c0: 6c5f 7061 7468 5b30 5d29 2e73 706c 6974  l_path[0]).split
-0002c1d0: 2873 796d 292b 6675 6c6c 5f70 6174 685b  (sym)+full_path[
-0002c1e0: 313a 5d0a 2020 2020 6966 2072 656d 6f76  1:].    if remov
-0002c1f0: 655f 646f 743a 0a20 2020 2020 2020 206e  e_dot:.        n
-0002c200: 6670 3d5b 5d0a 2020 2020 2020 2020 666f  fp=[].        fo
-0002c210: 7220 6920 696e 2066 756c 6c5f 7061 7468  r i in full_path
-0002c220: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0002c230: 2069 203d 3d20 272e 2e27 3a20 2372 656d   i == '..': #rem
-0002c240: 6f76 6520 272e 2e27 0a20 2020 2020 2020  ove '..'.       
-0002c250: 2020 2020 2020 2020 2069 6620 6e66 703a           if nfp:
-0002c260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c270: 2020 2020 2023 6b65 6570 2072 6f6f 7420       #keep root 
-0002c280: 7061 7468 2028 272f 2729 0a20 2020 2020  path ('/').     
-0002c290: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002c2a0: 6620 6c65 6e28 6e66 7029 3d3d 313a 0a20  f len(nfp)==1:. 
-0002c2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c2c0: 2020 2020 2020 2069 6620 6e66 705b 305d         if nfp[0]
-0002c2d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002c2e0: 2020 2020 2020 2020 2020 2020 2020 6465                de
-0002c2f0: 6c20 6e66 705b 2d31 5d0a 2020 2020 2020  l nfp[-1].      
-0002c300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c310: 2020 656c 6966 2065 7272 3a0a 2020 2020    elif err:.    
-0002c320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c330: 2020 2020 2020 2020 7265 7475 726e 2064          return d
-0002c340: 6566 6175 6c74 0a20 2020 2020 2020 2020  efault.         
-0002c350: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0002c360: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c370: 2020 2020 2020 2020 2064 656c 206e 6670           del nfp
-0002c380: 5b2d 315d 0a20 2020 2020 2020 2020 2020  [-1].           
-0002c390: 2020 2020 2065 6c69 6620 6572 723a 0a20       elif err:. 
-0002c3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c3b0: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
-0002c3c0: 740a 2020 2020 2020 2020 2020 2020 656c  t.            el
-0002c3d0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002c3e0: 2020 2020 6966 2069 2021 3d20 272e 273a      if i != '.':
-0002c3f0: 2023 7265 6d6f 7665 2027 2e27 0a20 2020   #remove '.'.   
-0002c400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c410: 206e 6670 2e61 7070 656e 6428 6929 0a20   nfp.append(i). 
-0002c420: 2020 2020 2020 2066 756c 6c5f 7061 7468         full_path
-0002c430: 3d6e 6670 0a20 2020 2066 6f72 2069 6920  =nfp.    for ii 
-0002c440: 696e 2069 6e70 5b31 3a5d 3a20 2320 6164  in inp[1:]: # ad
-0002c450: 6420 6578 7472 6120 696e 7075 740a 2020  d extra input.  
-0002c460: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0002c470: 6e63 6528 6969 2c73 7472 293a 0a20 2020  nce(ii,str):.   
-0002c480: 2020 2020 2020 2020 2066 6f72 207a 7a20           for zz 
-0002c490: 696e 2069 692e 7370 6c69 7428 7379 6d29  in ii.split(sym)
-0002c4a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002c4b0: 2020 6966 2072 656d 6f76 655f 646f 743a    if remove_dot:
-0002c4c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c4d0: 2020 2020 2069 6620 7a7a 203d 3d20 272e       if zz == '.
-0002c4e0: 2720 6f72 206e 6f74 2054 7970 6528 7a7a  ' or not Type(zz
-0002c4f0: 2c27 7374 7227 2c64 6174 613d 5472 7565  ,'str',data=True
-0002c500: 293a 2063 6f6e 7469 6e75 650a 2020 2020  ): continue.    
-0002c510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c520: 6966 207a 7a20 3d3d 2027 2e2e 273a 0a20  if zz == '..':. 
-0002c530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c540: 2020 2020 2020 2069 6620 6675 6c6c 5f70         if full_p
-0002c550: 6174 683a 0a20 2020 2020 2020 2020 2020  ath:.           
-0002c560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c570: 2023 6b65 6570 2072 6f6f 7420 7061 7468   #keep root path
-0002c580: 2028 272f 2729 0a20 2020 2020 2020 2020   ('/').         
-0002c590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c5a0: 2020 2069 6620 6c65 6e28 6675 6c6c 5f70     if len(full_p
-0002c5b0: 6174 6829 3d3d 313a 0a20 2020 2020 2020  ath)==1:.       
-0002c5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c5d0: 2020 2020 2020 2020 2069 6620 6675 6c6c           if full
-0002c5e0: 5f70 6174 685b 305d 3a0a 2020 2020 2020  _path[0]:.      
-0002c5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c600: 2020 2020 2020 2020 2020 2020 2020 6465                de
-0002c610: 6c20 6675 6c6c 5f70 6174 685b 2d31 5d0a  l full_path[-1].
-0002c620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c640: 656c 6966 2065 7272 3a0a 2020 2020 2020  elif err:.      
-0002c650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c660: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0002c670: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
-0002c680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c690: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0002c6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c6b0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0002c6c0: 656c 2066 756c 6c5f 7061 7468 5b2d 315d  el full_path[-1]
-0002c6d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c6e0: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-0002c6f0: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
-0002c700: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0002c710: 6966 2065 7272 3a0a 2020 2020 2020 2020  if err:.        
-0002c720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c730: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
-0002c740: 6c74 0a20 2020 2020 2020 2020 2020 2020  lt.             
-0002c750: 2020 2066 756c 6c5f 7061 7468 2e61 7070     full_path.app
-0002c760: 656e 6428 7a7a 290a 2020 2020 6966 206f  end(zz).    if o
-0002c770: 7574 2069 6e20 5b73 7472 2c27 7374 7227  ut in [str,'str'
-0002c780: 5d3a 0a20 2020 2020 2020 2069 6620 6e6f  ]:.        if no
-0002c790: 7420 6675 6c6c 5f70 6174 683a 2072 6574  t full_path: ret
-0002c7a0: 7572 6e20 2727 0a20 2020 2020 2020 2072  urn ''.        r
-0002c7b0: 743d 4a6f 696e 2866 756c 6c5f 7061 7468  t=Join(full_path
-0002c7c0: 2c73 796d 626f 6c3d 7379 6d29 0a20 2020  ,symbol=sym).   
-0002c7d0: 2020 2020 2069 6620 6f70 7473 2e67 6574       if opts.get
-0002c7e0: 2827 666f 7263 655f 726f 6f74 272c 6f70  ('force_root',op
-0002c7f0: 7473 2e67 6574 2827 726f 6f74 272c 4661  ts.get('root',Fa
-0002c800: 6c73 6529 293a 0a20 2020 2020 2020 2020  lse)):.         
-0002c810: 2020 2069 6620 7274 5b30 5d20 213d 2027     if rt[0] != '
-0002c820: 2f27 3a20 7265 7475 726e 2027 2f27 2b72  /': return '/'+r
-0002c830: 740a 2020 2020 2020 2020 7265 7475 726e  t.        return
-0002c840: 2072 740a 2020 2020 656c 7365 3a0a 2020   rt.    else:.  
-0002c850: 2020 2020 2020 7265 7475 726e 2066 756c        return ful
-0002c860: 6c5f 7061 7468 0a0a 6465 6620 4d65 7267  l_path..def Merg
-0002c870: 6553 7472 2861 2c62 2c5f 7479 7065 3d4e  eStr(a,b,_type=N
-0002c880: 6f6e 6529 3a0a 2020 2020 6966 2061 2069  one):.    if a i
-0002c890: 7320 4e6f 6e65 2061 6e64 2062 2069 7320  s None and b is 
-0002c8a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 6966  None:.        if
-0002c8b0: 205f 7479 7065 203d 3d20 2762 7974 6573   _type == 'bytes
-0002c8c0: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
-0002c8d0: 6574 7572 6e20 6227 270a 2020 2020 2020  eturn b''.      
-0002c8e0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0002c8f0: 2020 2020 7265 7475 726e 2027 270a 2020      return ''.  
-0002c900: 2020 6966 205f 7479 7065 2069 7320 4e6f    if _type is No
-0002c910: 6e65 3a0a 2020 2020 2020 2020 6966 2061  ne:.        if a
-0002c920: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-0002c930: 2020 2020 2020 7265 7475 726e 2062 0a20        return b. 
-0002c940: 2020 2020 2020 2065 6c69 6620 6220 6973         elif b is
-0002c950: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0002c960: 2020 2072 6574 7572 6e20 610a 2020 2020     return a.    
-0002c970: 2020 2020 656c 6966 2054 7970 6528 6129      elif Type(a)
-0002c980: 203d 3d20 5479 7065 2862 293a 0a20 2020   == Type(b):.   
-0002c990: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0002c9a0: 6120 2b20 620a 2020 2020 2020 2020 656c  a + b.        el
-0002c9b0: 6966 2054 7970 6528 6129 203d 3d20 2762  if Type(a) == 'b
-0002c9c0: 7974 6573 273a 0a20 2020 2020 2020 2020  ytes':.         
-0002c9d0: 2020 2072 6574 7572 6e20 2061 2b42 7974     return  a+Byt
-0002c9e0: 6573 2862 290a 2020 2020 2020 2020 656c  es(b).        el
+00028ad0: 2020 2020 2020 2020 7374 7269 6e67 5f61          string_a
+00028ae0: 5b69 6478 5d3d 7374 7269 6e67 5f61 5b69  [idx]=string_a[i
+00028af0: 6478 5d2e 666f 726d 6174 282a 2a76 616c  dx].format(**val
+00028b00: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00028b10: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00028b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028b30: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+00028b40: 706f 7374 726f 7068 653a 0a20 2020 2020  postrophe:.     
+00028b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028b60: 2020 2020 2020 2020 2020 2069 6620 2227             if "'
+00028b70: 2220 696e 2076 616c 5b69 695d 3a0a 2020  " in val[ii]:.  
+00028b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028ba0: 2020 7374 7269 6e67 5f61 5b69 6478 5d3d    string_a[idx]=
+00028bb0: 2727 2722 2727 272b 7661 6c5b 6969 5d2b  '''"'''+val[ii]+
+00028bc0: 2727 2722 2727 270a 2020 2020 2020 2020  '''"'''.        
+00028bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028be0: 2020 2020 2020 2020 656c 6966 2027 2227          elif '"'
+00028bf0: 2069 6e20 7661 6c5b 6969 5d3a 200a 2020   in val[ii]: .  
+00028c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028c20: 2020 7374 7269 6e67 5f61 5b69 6478 5d3d    string_a[idx]=
+00028c30: 2222 2227 2222 222b 7661 6c5b 6969 5d2b  """'"""+val[ii]+
+00028c40: 2222 2227 2222 220a 2020 2020 2020 2020  """'""".        
+00028c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028c60: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00028c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028c80: 2020 2020 2020 2020 2020 7374 7269 6e67            string
+00028c90: 5f61 5b69 6478 5d3d 7661 6c5b 6969 5d0a  _a[idx]=val[ii].
+00028ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028cb0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00028cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028cd0: 2020 6966 2074 7570 6c65 5f76 616c 3a0a    if tuple_val:.
+00028ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028cf0: 2020 2020 2020 2020 2020 2020 7374 7269              stri
+00028d00: 6e67 5f61 5b69 6478 5d3d 7374 7269 6e67  ng_a[idx]=string
+00028d10: 5f61 5b69 6478 5d2e 666f 726d 6174 282a  _a[idx].format(*
+00028d20: 7661 6c29 0a20 2020 2020 2020 2020 2020  val).           
+00028d30: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00028d40: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00028d50: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00028d60: 7472 696e 675f 615b 6964 785d 3d73 7472  tring_a[idx]=str
+00028d70: 696e 675f 615b 6964 785d 2e66 6f72 6d61  ing_a[idx].forma
+00028d80: 7428 2a2a 7661 6c29 0a20 2020 2020 2020  t(**val).       
+00028d90: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00028da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028db0: 2020 206d 6973 7369 6e67 2e61 7070 656e     missing.appen
+00028dc0: 6428 6969 290a 2020 2020 2020 2020 2020  d(ii).          
+00028dd0: 2020 2020 2020 2320 6966 206e 6f74 2073        # if not s
+00028de0: 7472 696e 6720 696e 7075 7420 6461 7461  tring input data
+00028df0: 2074 6865 6e20 736b 6970 2068 6572 650a   then skip here.
+00028e00: 2020 2020 2020 2020 7265 7475 726e 204a          return J
+00028e10: 6f69 6e28 7374 7269 6e67 5f61 2c73 796d  oin(string_a,sym
+00028e20: 626f 6c3d 2720 2729 2c6d 6973 7369 6e67  bol=' '),missing
+00028e30: 0a0a 2020 2020 6966 206e 6f74 2069 7369  ..    if not isi
+00028e40: 6e73 7461 6e63 6528 7374 7269 6e67 2c73  nstance(string,s
+00028e50: 7472 293a 2072 6574 7572 6e20 4661 6c73  tr): return Fals
+00028e60: 652c 7374 7269 6e67 0a20 2020 2066 6661  e,string.    ffa
+00028e70: 6c6c 3d5b 7265 2e63 6f6d 7069 6c65 2827  ll=[re.compile('
+00028e80: 5c7b 285c 642a 295c 7d27 292e 6669 6e64  \{(\d*)\}').find
+00028e90: 616c 6c28 7374 7269 6e67 292c 7265 2e63  all(string),re.c
+00028ea0: 6f6d 7069 6c65 2827 5c7b 285c 772a 295c  ompile('\{(\w*)\
+00028eb0: 7d27 292e 6669 6e64 616c 6c28 7374 7269  }').findall(stri
+00028ec0: 6e67 292c 7265 2e63 6f6d 7069 6c65 2827  ng),re.compile('
+00028ed0: 5c25 5c28 285c 772a 295c 2973 2729 2e66  \%\((\w*)\)s').f
+00028ee0: 696e 6461 6c6c 2873 7472 696e 6729 2c72  indall(string),r
+00028ef0: 652e 636f 6d70 696c 6528 275c 7b5c 7d27  e.compile('\{\}'
+00028f00: 292e 6669 6e64 616c 6c28 7374 7269 6e67  ).findall(string
+00028f10: 292c 7265 2e63 6f6d 7069 6c65 2827 5c25  ),re.compile('\%
+00028f20: 5b2d 302d 392e 5d2a 5b73 7c63 7c64 7c66  [-0-9.]*[s|c|d|f
+00028f30: 5d27 292e 6669 6e64 616c 6c28 7374 7269  ]').findall(stri
+00028f40: 6e67 295d 0a20 2020 2069 3d30 0a20 2020  ng)].    i=0.   
+00028f50: 2061 706f 7374 726f 7068 653d 6f70 7473   apostrophe=opts
+00028f60: 2e70 6f70 2827 6170 6f73 7472 6f70 6865  .pop('apostrophe
+00028f70: 2729 2069 6620 2761 706f 7374 726f 7068  ') if 'apostroph
+00028f80: 6527 2069 6e20 6f70 7473 2065 6c73 6520  e' in opts else 
+00028f90: 4e6f 6e65 0a20 2020 2065 7272 6f72 3d6f  None.    error=o
+00028fa0: 7074 732e 706f 7028 275f 6572 725f 2729  pts.pop('_err_')
+00028fb0: 2069 6620 275f 6572 725f 2720 696e 206f   if '_err_' in o
+00028fc0: 7074 7320 656c 7365 2046 616c 7365 0a20  pts else False. 
+00028fd0: 2020 2066 6f72 2074 6d70 2069 6e20 6666     for tmp in ff
+00028fe0: 616c 6c3a 0a20 2020 2020 2020 2069 6620  all:.        if 
+00028ff0: 6920 696e 205b 302c 315d 3a20 746d 703d  i in [0,1]: tmp=
+00029000: 5b20 6a20 2066 6f72 206a 2069 6e20 746d  [ j  for j in tm
+00029010: 7020 6966 206c 656e 286a 2920 5d0a 2020  p if len(j) ].  
+00029020: 2020 2020 2020 6966 2074 6d70 3a0a 2020        if tmp:.  
+00029030: 2020 2020 2020 2020 2020 6966 2069 203d            if i =
+00029040: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
+00029050: 2020 2020 206d 783d 300a 2020 2020 2020       mx=0.      
+00029060: 2020 2020 2020 2020 2020 666f 7220 7a20            for z 
+00029070: 696e 2074 6d70 3a0a 2020 2020 2020 2020  in tmp:.        
+00029080: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00029090: 6e74 287a 2920 3e20 6d78 3a20 6d78 3d69  nt(z) > mx: mx=i
+000290a0: 6e74 287a 290a 2020 2020 2020 2020 2020  nt(z).          
+000290b0: 2020 2020 2020 6966 206c 656e 2869 6e70        if len(inp
+000290c0: 7329 203e 206d 783a 0a20 2020 2020 2020  s) > mx:.       
+000290d0: 2020 2020 2020 2020 2020 2020 2073 7472               str
+000290e0: 696e 672c 6d3d 5f72 6570 6c61 6365 5f66  ing,m=_replace_f
+000290f0: 6f72 6d61 745f 746f 5f76 616c 7565 5f28  ormat_to_value_(
+00029100: 692c 746d 702c 7374 7269 6e67 2c69 6e70  i,tmp,string,inp
+00029110: 732c 6170 6f73 7472 6f70 6865 290a 2020  s,apostrophe).  
+00029120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029130: 2020 6966 2065 7272 6f72 2061 6e64 206d    if error and m
+00029140: 203a 2072 6574 7572 6e20 4661 6c73 652c   : return False,
+00029150: 276d 6973 7369 6e67 2070 6172 616d 6574  'missing paramet
+00029160: 6572 7320 7b7d 272e 666f 726d 6174 286d  ers {}'.format(m
+00029170: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00029180: 2020 656c 6966 206c 656e 286f 7074 7329    elif len(opts)
+00029190: 203e 206d 783a 0a20 2020 2020 2020 2020   > mx:.         
+000291a0: 2020 2020 2020 2020 2020 2073 7472 696e             strin
+000291b0: 672c 6d3d 5f72 6570 6c61 6365 5f66 6f72  g,m=_replace_for
+000291c0: 6d61 745f 746f 5f76 616c 7565 5f28 692c  mat_to_value_(i,
+000291d0: 746d 702c 7374 7269 6e67 2c6c 6973 7428  tmp,string,list(
+000291e0: 6f70 7473 2e76 616c 7565 7328 2929 2c61  opts.values()),a
+000291f0: 706f 7374 726f 7068 6529 0a20 2020 2020  postrophe).     
+00029200: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00029210: 6620 6572 726f 7220 616e 6420 6d20 3a20  f error and m : 
+00029220: 7265 7475 726e 2046 616c 7365 2c27 6d69  return False,'mi
+00029230: 7373 696e 6720 7061 7261 6d65 7465 7273  ssing parameters
+00029240: 207b 7d27 2e66 6f72 6d61 7428 6d29 0a20   {}'.format(m). 
+00029250: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00029260: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00029270: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00029280: 4661 6c73 652c 2222 224e 6565 6420 6d6f  False,"""Need mo
+00029290: 7265 2069 6e70 7574 2028 7475 706c 652f  re input (tuple/
+000292a0: 6c69 7374 2920 7061 7261 6d65 7465 7273  list) parameters
+000292b0: 2872 6571 7569 7265 207b 7d29 2222 222e  (require {})""".
+000292c0: 666f 726d 6174 286d 7829 0a20 2020 2020  format(mx).     
+000292d0: 2020 2020 2020 2065 6c69 6620 303c 2069         elif 0< i
+000292e0: 203c 2032 3a0a 2020 2020 2020 2020 2020   < 2:.          
+000292f0: 2020 2020 2020 7374 7269 6e67 2c6d 3d5f        string,m=_
+00029300: 7265 706c 6163 655f 666f 726d 6174 5f74  replace_format_t
+00029310: 6f5f 7661 6c75 655f 2869 2c74 6d70 2c73  o_value_(i,tmp,s
+00029320: 7472 696e 672c 6f70 7473 2c61 706f 7374  tring,opts,apost
+00029330: 726f 7068 6529 0a20 2020 2020 2020 2020  rophe).         
+00029340: 2020 2020 2020 2069 6620 6572 726f 7220         if error 
+00029350: 616e 6420 6d20 3a20 7265 7475 726e 2046  and m : return F
+00029360: 616c 7365 2c27 6d69 7373 696e 6720 7061  alse,'missing pa
+00029370: 7261 6d65 7465 7273 207b 7d27 2e66 6f72  rameters {}'.for
+00029380: 6d61 7428 6d29 0a20 2020 2020 2020 2020  mat(m).         
+00029390: 2020 2065 6c69 6620 6920 3d3d 2032 3a0a     elif i == 2:.
+000293a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000293b0: 666f 7220 7474 2069 6e20 696e 7073 3a0a  for tt in inps:.
+000293c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000293d0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+000293e0: 6528 7474 2c64 6963 7429 3a0a 2020 2020  e(tt,dict):.    
+000293f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029400: 2020 2020 6f70 7473 2e75 7064 6174 6528      opts.update(
+00029410: 7474 290a 2020 2020 2020 2020 2020 2020  tt).            
+00029420: 2020 2020 7374 7269 6e67 2c6d 3d5f 7265      string,m=_re
+00029430: 706c 6163 655f 666f 726d 6174 5f74 6f5f  place_format_to_
+00029440: 7661 6c75 655f 2869 2c74 6d70 2c73 7472  value_(i,tmp,str
+00029450: 696e 672c 6f70 7473 2c61 706f 7374 726f  ing,opts,apostro
+00029460: 7068 6529 0a20 2020 2020 2020 2020 2020  phe).           
+00029470: 2020 2020 2069 6620 6572 726f 7220 616e       if error an
+00029480: 6420 6d20 3a20 7265 7475 726e 2046 616c  d m : return Fal
+00029490: 7365 2c27 6d69 7373 696e 6720 7061 7261  se,'missing para
+000294a0: 6d65 7465 7273 207b 7d27 2e66 6f72 6d61  meters {}'.forma
+000294b0: 7428 6d29 0a20 2020 2020 2020 2020 2020  t(m).           
+000294c0: 2065 6c69 6620 6920 3d3d 2033 3a0a 2020   elif i == 3:.  
+000294d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000294e0: 2069 6e70 733a 0a20 2020 2020 2020 2020   inps:.         
+000294f0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+00029500: 6e28 746d 7029 203d 3d20 6c65 6e28 696e  n(tmp) == len(in
+00029510: 7073 293a 0a20 2020 2020 2020 2020 2020  ps):.           
+00029520: 2020 2020 2020 2020 2020 2020 2073 7472               str
+00029530: 696e 673d 7374 7269 6e67 2e66 6f72 6d61  ing=string.forma
+00029540: 7428 2a69 6e70 7329 0a20 2020 2020 2020  t(*inps).       
+00029550: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+00029560: 6620 6572 726f 723a 0a20 2020 2020 2020  f error:.       
+00029570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029580: 2072 6574 7572 6e20 4661 6c73 652c 2222   return False,""
+00029590: 224d 6973 6d61 7463 6865 6420 696e 7075  "Mismatched inpu
+000295a0: 7420 2874 7570 6c65 2f6c 6973 7429 206e  t (tuple/list) n
+000295b0: 756d 6265 7220 2872 6571 7569 7265 3a7b  umber (require:{
+000295c0: 7d2c 2069 6e70 7574 3a7b 7d29 2222 222e  }, input:{})""".
+000295d0: 666f 726d 6174 286c 656e 2874 6d70 292c  format(len(tmp),
+000295e0: 6c65 6e28 696e 7073 2929 0a20 2020 2020  len(inps)).     
+000295f0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00029600: 6f70 7473 3a0a 2020 2020 2020 2020 2020  opts:.          
+00029610: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+00029620: 2874 6d70 2920 3d3d 206c 656e 286f 7074  (tmp) == len(opt
+00029630: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
+00029640: 2020 2020 2020 2020 2020 2020 7374 7269              stri
+00029650: 6e67 3d73 7472 696e 672e 666f 726d 6174  ng=string.format
+00029660: 282a 6f70 7473 2e76 616c 7565 7328 2929  (*opts.values())
+00029670: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00029680: 2020 2020 2065 6c69 6620 6572 726f 723a       elif error:
+00029690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000296a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000296b0: 4661 6c73 652c 2222 224d 6973 6d61 7463  False,"""Mismatc
+000296c0: 6865 6420 696e 7075 7420 2874 7570 6c65  hed input (tuple
+000296d0: 2f6c 6973 7429 206e 756d 6265 7220 2872  /list) number (r
+000296e0: 6571 7569 7265 3a7b 7d2c 2069 6e70 7574  equire:{}, input
+000296f0: 3a7b 7d29 2222 222e 666f 726d 6174 286c  :{})""".format(l
+00029700: 656e 2874 6d70 292c 6c65 6e28 6f70 7473  en(tmp),len(opts
+00029710: 2929 0a20 2020 2020 2020 2020 2020 2065  )).            e
+00029720: 6c69 6620 6920 3e3d 2034 3a0a 2020 2020  lif i >= 4:.    
+00029730: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00029740: 6e70 733a 0a20 2020 2020 2020 2020 2020  nps:.           
+00029750: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
+00029760: 746d 7029 203d 3d20 6c65 6e28 696e 7073  tmp) == len(inps
+00029770: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00029780: 2020 2020 2020 2020 2020 2073 7472 696e             strin
+00029790: 673d 7374 7269 6e67 2528 696e 7073 290a  g=string%(inps).
+000297a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000297b0: 2020 2020 656c 6966 2065 7272 6f72 3a0a      elif error:.
+000297c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000297d0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+000297e0: 616c 7365 2c22 2222 4d69 736d 6174 6368  alse,"""Mismatch
+000297f0: 6564 2069 6e70 7574 2028 7475 706c 652f  ed input (tuple/
+00029800: 6c69 7374 2920 6e75 6d62 6572 2028 7265  list) number (re
+00029810: 7175 6972 653a 7b7d 2c20 696e 7075 743a  quire:{}, input:
+00029820: 7b7d 2922 2222 2e66 6f72 6d61 7428 6c65  {})""".format(le
+00029830: 6e28 746d 7029 2c6c 656e 2869 6e70 7329  n(tmp),len(inps)
+00029840: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00029850: 2020 656c 6966 206f 7074 733a 0a20 2020    elif opts:.   
+00029860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029870: 2069 6620 6c65 6e28 746d 7029 203d 3d20   if len(tmp) == 
+00029880: 6c65 6e28 6f70 7473 293a 0a20 2020 2020  len(opts):.     
+00029890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000298a0: 2020 2073 7472 696e 673d 7374 7269 6e67     string=string
+000298b0: 2528 6f70 7473 2e76 616c 7565 7328 2929  %(opts.values())
+000298c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000298d0: 2020 2020 2065 6c69 6620 6572 726f 723a       elif error:
+000298e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000298f0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00029900: 4661 6c73 652c 2222 224d 6973 6d61 7463  False,"""Mismatc
+00029910: 6865 6420 696e 7075 7420 2874 7570 6c65  hed input (tuple
+00029920: 2f6c 6973 7429 206e 756d 6265 7220 2872  /list) number (r
+00029930: 6571 7569 7265 3a7b 7d2c 2069 6e70 7574  equire:{}, input
+00029940: 3a7b 7d29 2222 222e 666f 726d 6174 286c  :{})""".format(l
+00029950: 656e 2874 6d70 292c 6c65 6e28 6f70 7473  en(tmp),len(opts
+00029960: 2929 0a20 2020 2020 2020 2069 2b3d 310a  )).        i+=1.
+00029970: 2020 2020 6966 2069 6e70 733a 0a20 2020      if inps:.   
+00029980: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+00029990: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+000299a0: 652c 7374 7269 6e67 2e66 6f72 6d61 7428  e,string.format(
+000299b0: 2a69 6e70 7329 0a20 2020 2020 2020 2065  *inps).        e
+000299c0: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
+000299d0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+000299e0: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+000299f0: 7275 652c 7374 7269 6e67 2528 696e 7073  rue,string%(inps
+00029a00: 290a 2020 2020 2020 2020 2020 2020 6578  ).            ex
+00029a10: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
+00029a20: 2020 2020 2020 7061 7373 0a20 2020 2069        pass.    i
+00029a30: 6620 6f70 7473 3a0a 2020 2020 2020 2020  f opts:.        
+00029a40: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+00029a50: 2072 6574 7572 6e20 5472 7565 2c73 7472   return True,str
+00029a60: 696e 672e 666f 726d 6174 282a 2a6f 7074  ing.format(**opt
+00029a70: 7329 0a20 2020 2020 2020 2065 7863 6570  s).        excep
+00029a80: 743a 0a20 2020 2020 2020 2020 2020 2074  t:.            t
+00029a90: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00029aa0: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
+00029ab0: 7374 7269 6e67 2528 6f70 7473 290a 2020  string%(opts).  
+00029ac0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+00029ad0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00029ae0: 2020 7061 7373 0a20 2020 2072 6574 7572    pass.    retur
+00029af0: 6e20 5472 7565 2c73 7472 696e 670a 0a64  n True,string..d
+00029b00: 6566 2053 6f72 7428 7372 632c 7265 7665  ef Sort(src,reve
+00029b10: 7273 653d 4661 6c73 652c 6675 6e63 3d4e  rse=False,func=N
+00029b20: 6f6e 652c 6f72 6465 723d 4e6f 6e65 2c66  one,order=None,f
+00029b30: 6965 6c64 3d4e 6f6e 652c 6261 7365 3d27  ield=None,base='
+00029b40: 6b65 7927 2c73 796d 3d4e 6f6e 6529 3a0a  key',sym=None):.
+00029b50: 2020 2020 2727 270a 2020 2020 536f 7274      '''.    Sort
+00029b60: 696e 6720 6461 7461 0a20 2020 2073 7570  ing data.    sup
+00029b70: 706f 7274 206c 6973 742c 7475 706c 652c  port list,tuple,
+00029b80: 6469 6374 2066 6f72 6d61 740a 2020 2020  dict format.    
+00029b90: 7265 7665 7273 6520 3a20 7265 7665 7273  reverse : revers
+00029ba0: 6520 736f 7274 0a20 2020 2066 756e 6320  e sort.    func 
+00029bb0: 2020 203a 2073 6f72 7469 6e67 206b 6579     : sorting key
+00029bc0: 2066 756e 6374 696f 6e20 2864 6566 6175   function (defau
+00029bd0: 6c74 204e 6f6e 6529 0a20 2020 206f 7264  lt None).    ord
+00029be0: 6572 2020 203a 2073 6f72 7469 6e67 206f  er   : sorting o
+00029bf0: 7264 6572 206d 6574 686f 640a 2020 2020  rder method.    
+00029c00: 2020 2020 4e6f 6e65 3a20 6465 6661 756c      None: defaul
+00029c10: 7420 7769 7468 2073 6f72 7428 2920 6675  t with sort() fu
+00029c20: 6e63 7469 6f6e 0a20 2020 2020 2020 2069  nction.        i
+00029c30: 6e74 203a 2073 6f72 7420 7769 7468 2069  nt : sort with i
+00029c40: 6e74 6567 6572 0a20 2020 2020 2020 2073  nteger.        s
+00029c50: 7472 203a 2073 6f72 7420 7769 7468 2061  tr : sort with a
+00029c60: 7363 6969 2063 6f64 650a 2020 2020 2020  scii code.      
+00029c70: 2020 6c65 6e20 3a20 736f 7274 2077 6974    len : sort wit
+00029c80: 6820 6461 7461 206c 656e 6774 680a 2020  h data length.  
+00029c90: 2020 6669 656c 6420 2020 0a20 2020 2020    field   .     
+00029ca0: 2020 204e 6f6e 6520 3a20 6465 6661 756c     None : defaul
+00029cb0: 740a 2020 2020 2020 2020 3c69 6e74 3e3a  t.        <int>:
+00029cc0: 2073 6f72 7420 7769 7468 206c 6973 7427   sort with list'
+00029cd0: 7320 696e 6465 7820 6e75 6d62 6572 0a20  s index number. 
+00029ce0: 2020 2062 6173 650a 2020 2020 2020 2020     base.        
+00029cf0: 6b65 7920 203a 2064 6566 6175 6c74 2c20  key  : default, 
+00029d00: 736f 7274 2077 6974 6820 6b65 7920 6f66  sort with key of
+00029d10: 2064 6963 7420 0a20 2020 2020 2020 2076   dict .        v
+00029d20: 616c 7565 3a20 536f 7274 2077 6974 6820  alue: Sort with 
+00029d30: 7661 6c75 6520 6f66 2064 6963 740a 2020  value of dict.  
+00029d40: 2020 7379 6d20 2020 2020 203a 204e 6f6e    sym      : Non
+00029d50: 6520 2864 6566 6175 6c74 290a 2020 2020  e (default).    
+00029d60: 2020 2020 3c73 796d 626f 6c3e 203a 2069      <symbol> : i
+00029d70: 6620 7372 6320 6973 2073 7472 696e 6720  f src is string 
+00029d80: 7468 656e 2073 706c 6974 2077 6974 6820  then split with 
+00029d90: 7468 6520 7379 6d0a 2020 2020 2727 270a  the sym.    '''.
+00029da0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00029db0: 6528 7372 632c 7374 7229 2061 6e64 206e  e(src,str) and n
+00029dc0: 6f74 2049 734e 6f6e 6528 7379 6d29 3a20  ot IsNone(sym): 
+00029dd0: 7372 633d 7372 632e 7370 6c69 7428 7379  src=src.split(sy
+00029de0: 6d29 0a20 2020 2069 6620 6973 696e 7374  m).    if isinst
+00029df0: 616e 6365 2873 7263 2c64 6963 7429 2061  ance(src,dict) a
+00029e00: 6e64 2062 6173 6520 696e 205b 2764 6174  nd base in ['dat
+00029e10: 6127 2c27 7661 6c75 6527 5d3a 0a20 2020  a','value']:.   
+00029e20: 2020 2020 2066 6965 6c64 3d31 0a20 2020       field=1.   
+00029e30: 2064 6566 205f 636c 656e 5f28 6529 3a0a   def _clen_(e):.
+00029e40: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+00029e50: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00029e60: 7374 616e 6365 2866 6965 6c64 2c69 6e74  stance(field,int
+00029e70: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00029e80: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00029e90: 2865 2c28 6c69 7374 2c74 7570 6c65 2929  (e,(list,tuple))
+00029ea0: 2061 6e64 206c 656e 2865 2920 3e20 6669   and len(e) > fi
+00029eb0: 656c 643a 0a20 2020 2020 2020 2020 2020  eld:.           
+00029ec0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00029ed0: 6c65 6e28 277b 7d27 2e66 6f72 6d61 7428  len('{}'.format(
+00029ee0: 5374 7228 655b 6669 656c 645d 2929 290a  Str(e[field]))).
+00029ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029f00: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00029f10: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00029f20: 2039 3939 3939 3939 0a20 2020 2020 2020   9999999.       
+00029f30: 2020 2020 2072 6574 7572 6e20 6c65 6e28       return len(
+00029f40: 277b 7d27 2e66 6f72 6d61 7428 5374 7228  '{}'.format(Str(
+00029f50: 6529 2929 0a20 2020 2020 2020 2065 7863  e))).        exc
+00029f60: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
+00029f70: 2072 6574 7572 6e20 650a 2020 2020 6465   return e.    de
+00029f80: 6620 5f63 696e 745f 2865 293a 0a20 2020  f _cint_(e):.   
+00029f90: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+00029fa0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00029fb0: 6e63 6528 6669 656c 642c 696e 7429 3a0a  nce(field,int):.
+00029fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029fd0: 6966 2069 7369 6e73 7461 6e63 6528 652c  if isinstance(e,
+00029fe0: 286c 6973 742c 7475 706c 6529 2920 616e  (list,tuple)) an
+00029ff0: 6420 6c65 6e28 6529 203e 2066 6965 6c64  d len(e) > field
+0002a000: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002a010: 2020 2020 2020 7265 7475 726e 2069 6e74        return int
+0002a020: 2865 5b66 6965 6c64 5d29 0a20 2020 2020  (e[field]).     
+0002a030: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0002a040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002a050: 2020 2020 2072 6574 7572 6e20 3939 3939       return 9999
+0002a060: 3939 390a 2020 2020 2020 2020 2020 2020  999.            
+0002a070: 7265 7475 726e 2069 6e74 2865 290a 2020  return int(e).  
+0002a080: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
+0002a090: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0002a0a0: 2065 0a20 2020 2064 6566 205f 6373 7472   e.    def _cstr
+0002a0b0: 5f28 6529 3a0a 2020 2020 2020 2020 6966  _(e):.        if
+0002a0c0: 2069 7369 6e73 7461 6e63 6528 6669 656c   isinstance(fiel
+0002a0d0: 642c 696e 7429 3a0a 2020 2020 2020 2020  d,int):.        
+0002a0e0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0002a0f0: 6528 652c 286c 6973 742c 7475 706c 6529  e(e,(list,tuple)
+0002a100: 2920 616e 6420 6c65 6e28 6529 203e 2066  ) and len(e) > f
+0002a110: 6965 6c64 3a0a 2020 2020 2020 2020 2020  ield:.          
+0002a120: 2020 2020 2020 7265 7475 726e 2027 2727        return '''
+0002a130: 7b7d 2727 272e 666f 726d 6174 2865 5b66  {}'''.format(e[f
+0002a140: 6965 6c64 5d29 0a20 2020 2020 2020 2020  ield]).         
+0002a150: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0002a160: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0002a170: 277a 7a7a 7a7a 7a7a 7a7a 270a 2020 2020  'zzzzzzzzz'.    
+0002a180: 2020 2020 7265 7475 726e 2027 2727 7b7d      return '''{}
+0002a190: 2727 272e 666f 726d 6174 2865 290a 2020  '''.format(e).  
+0002a1a0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0002a1b0: 7372 632c 286c 6973 742c 7475 706c 6529  src,(list,tuple)
+0002a1c0: 293a 0a20 2020 2020 2020 2073 7263 3d6c  ):.        src=l
+0002a1d0: 6973 7428 7372 6329 0a20 2020 2020 2020  ist(src).       
+0002a1e0: 2069 6620 6f72 6465 7220 696e 205b 696e   if order in [in
+0002a1f0: 742c 2769 6e74 272c 2764 6967 6974 272c  t,'int','digit',
+0002a200: 276e 756d 6265 7227 5d3a 0a20 2020 2020  'number']:.     
+0002a210: 2020 2020 2020 2073 7263 2e73 6f72 7428         src.sort(
+0002a220: 7265 7665 7273 653d 7265 7665 7273 652c  reverse=reverse,
+0002a230: 6b65 793d 5f63 696e 745f 290a 2020 2020  key=_cint_).    
+0002a240: 2020 2020 656c 6966 206f 7264 6572 2069      elif order i
+0002a250: 6e20 5b27 6c65 6e27 2c27 6c65 6e67 7468  n ['len','length
+0002a260: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+0002a270: 7372 632e 736f 7274 2872 6576 6572 7365  src.sort(reverse
+0002a280: 3d72 6576 6572 7365 2c6b 6579 3d5f 636c  =reverse,key=_cl
+0002a290: 656e 5f29 0a20 2020 2020 2020 2065 6c69  en_).        eli
+0002a2a0: 6620 6f72 6465 7220 696e 205b 7374 722c  f order in [str,
+0002a2b0: 2773 7472 275d 3a0a 2020 2020 2020 2020  'str']:.        
+0002a2c0: 2020 2020 7372 632e 736f 7274 2872 6576      src.sort(rev
+0002a2d0: 6572 7365 3d72 6576 6572 7365 2c6b 6579  erse=reverse,key
+0002a2e0: 3d5f 6373 7472 5f29 0a20 2020 2020 2020  =_cstr_).       
+0002a2f0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0002a300: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0002a310: 2866 6965 6c64 2c69 6e74 293a 0a20 2020  (field,int):.   
+0002a320: 2020 2020 2020 2020 2020 2020 2073 7263               src
+0002a330: 2e73 6f72 7428 7265 7665 7273 653d 7265  .sort(reverse=re
+0002a340: 7665 7273 652c 6b65 793d 5f63 696e 745f  verse,key=_cint_
+0002a350: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+0002a360: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0002a370: 2020 2020 7372 632e 736f 7274 2872 6576      src.sort(rev
+0002a380: 6572 7365 3d72 6576 6572 7365 2c6b 6579  erse=reverse,key
+0002a390: 3d66 756e 6329 0a20 2020 2020 2020 2072  =func).        r
+0002a3a0: 6574 7572 6e20 7372 630a 2020 2020 656c  eturn src.    el
+0002a3b0: 6966 2069 7369 6e73 7461 6e63 6528 7372  if isinstance(sr
+0002a3c0: 632c 6469 6374 293a 0a20 2020 2020 2020  c,dict):.       
+0002a3d0: 206c 7374 3d6c 6973 7428 7372 632e 6974   lst=list(src.it
+0002a3e0: 656d 7328 2929 0a20 2020 2020 2020 2069  ems()).        i
+0002a3f0: 6620 6261 7365 203d 3d20 276b 6579 273a  f base == 'key':
+0002a400: 0a20 2020 2020 2020 2020 2020 2066 6965  .            fie
+0002a410: 6c64 3d30 0a20 2020 2020 2020 2020 2020  ld=0.           
+0002a420: 2069 6620 6f72 6465 7220 696e 205b 696e   if order in [in
+0002a430: 742c 2769 6e74 272c 2764 6967 6974 272c  t,'int','digit',
+0002a440: 276e 756d 6265 7227 5d3a 0a20 2020 2020  'number']:.     
+0002a450: 2020 2020 2020 2020 2020 206c 7374 2e73             lst.s
+0002a460: 6f72 7428 7265 7665 7273 653d 7265 7665  ort(reverse=reve
+0002a470: 7273 652c 6b65 793d 5f63 696e 745f 290a  rse,key=_cint_).
+0002a480: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0002a490: 206f 7264 6572 2069 6e20 5b27 6c65 6e27   order in ['len'
+0002a4a0: 2c27 6c65 6e67 7468 275d 3a0a 2020 2020  ,'length']:.    
+0002a4b0: 2020 2020 2020 2020 2020 2020 6c73 742e              lst.
+0002a4c0: 736f 7274 2872 6576 6572 7365 3d72 6576  sort(reverse=rev
+0002a4d0: 6572 7365 2c6b 6579 3d5f 636c 656e 5f29  erse,key=_clen_)
+0002a4e0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+0002a4f0: 6620 6f72 6465 7220 696e 205b 7374 722c  f order in [str,
+0002a500: 2773 7472 275d 3a0a 2020 2020 2020 2020  'str']:.        
+0002a510: 2020 2020 2020 2020 6c73 742e 736f 7274          lst.sort
+0002a520: 2872 6576 6572 7365 3d72 6576 6572 7365  (reverse=reverse
+0002a530: 2c6b 6579 3d5f 6373 7472 5f29 0a20 2020  ,key=_cstr_).   
+0002a540: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0002a550: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0002a560: 7374 2e73 6f72 7428 7265 7665 7273 653d  st.sort(reverse=
+0002a570: 7265 7665 7273 652c 6675 6e63 3d66 756e  reverse,func=fun
+0002a580: 6329 0a20 2020 2020 2020 2065 6c73 653a  c).        else:
+0002a590: 2023 2076 616c 7565 202f 2064 6174 6120   # value / data 
+0002a5a0: 6361 7365 0a20 2020 2020 2020 2020 2020  case.           
+0002a5b0: 2066 6965 6c64 3d31 0a20 2020 2020 2020   field=1.       
+0002a5c0: 2020 2020 2069 6620 6f72 6465 7220 696e       if order in
+0002a5d0: 205b 696e 742c 2769 6e74 272c 2764 6967   [int,'int','dig
+0002a5e0: 6974 272c 276e 756d 6265 7227 5d3a 0a20  it','number']:. 
+0002a5f0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0002a600: 7374 2e73 6f72 7428 7265 7665 7273 653d  st.sort(reverse=
+0002a610: 7265 7665 7273 652c 6b65 793d 5f63 696e  reverse,key=_cin
+0002a620: 745f 290a 2020 2020 2020 2020 2020 2020  t_).            
+0002a630: 656c 6966 206f 7264 6572 2069 6e20 5b27  elif order in ['
+0002a640: 6c65 6e27 2c27 6c65 6e67 7468 275d 3a0a  len','length']:.
+0002a650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a660: 7265 7475 726e 206c 7374 2e73 6f72 7428  return lst.sort(
+0002a670: 7265 7665 7273 653d 7265 7665 7273 652c  reverse=reverse,
+0002a680: 6b65 793d 5f63 6c65 6e5f 290a 2020 2020  key=_clen_).    
+0002a690: 2020 2020 2020 2020 656c 6966 206f 7264          elif ord
+0002a6a0: 6572 2069 6e20 5b73 7472 2c27 7374 7227  er in [str,'str'
+0002a6b0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+0002a6c0: 2020 206c 7374 2e73 6f72 7428 7265 7665     lst.sort(reve
+0002a6d0: 7273 653d 7265 7665 7273 652c 6b65 793d  rse=reverse,key=
+0002a6e0: 5f63 7374 725f 290a 2020 2020 2020 2020  _cstr_).        
+0002a6f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0002a700: 2020 2020 2020 2020 2020 6c73 742e 736f            lst.so
+0002a710: 7274 2872 6576 6572 7365 3d72 6576 6572  rt(reverse=rever
+0002a720: 7365 2c66 756e 633d 6675 6e63 290a 2020  se,func=func).  
+0002a730: 2020 2020 2020 7265 7475 726e 206c 7374        return lst
+0002a740: 0a20 2020 2020 2020 2023 7265 7475 726e  .        #return
+0002a750: 205b 695b 305d 2066 6f72 2069 2069 6e20   [i[0] for i in 
+0002a760: 6c73 745d 0a0a 6465 6620 5665 7273 696f  lst]..def Versio
+0002a770: 6e53 6f72 7428 6461 7461 2c73 796d 3d27  nSort(data,sym='
+0002a780: 2c27 2c72 6576 3d46 616c 7365 293a 0a20  ,',rev=False):. 
+0002a790: 2020 2064 6566 2044 6963 744b 6579 7354     def DictKeysT
+0002a7a0: 6f4c 6973 7428 6461 7461 2c76 6572 3d27  oList(data,ver='
+0002a7b0: 272c 6f75 743d 5b5d 293a 0a20 2020 2020  ',out=[]):.     
+0002a7c0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0002a7d0: 2864 6174 612c 6469 6374 293a 0a20 2020  (data,dict):.   
+0002a7e0: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+0002a7f0: 6e20 6461 7461 3a0a 2020 2020 2020 2020  n data:.        
+0002a800: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
+0002a810: 7369 6e73 7461 6e63 6528 6461 7461 5b69  sinstance(data[i
+0002a820: 5d2c 6469 6374 2920 6f72 2064 6174 615b  ],dict) or data[
+0002a830: 695d 2069 6e20 5b27 272c 4e6f 6e65 2c7b  i] in ['',None,{
+0002a840: 7d5d 3a0a 2020 2020 2020 2020 2020 2020  }]:.            
+0002a850: 2020 2020 2020 2020 236f 7574 2e61 7070          #out.app
+0002a860: 656e 6428 7665 722b 272e 7b7d 272e 666f  end(ver+'.{}'.fo
+0002a870: 726d 6174 2869 2929 2023 5573 6520 6b65  rmat(i)) #Use ke
+0002a880: 7920 2863 6861 6e67 6564 2066 6f72 6d61  y (changed forma
+0002a890: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
+0002a8a0: 2020 2020 2020 206f 7574 2e61 7070 656e         out.appen
+0002a8b0: 6428 6461 7461 5b69 5d29 2023 2055 7365  d(data[i]) # Use
+0002a8c0: 206f 7269 6769 6e61 6c20 4461 7461 0a20   original Data. 
+0002a8d0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0002a8e0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0002a8f0: 2020 2020 2020 2020 2044 6963 744b 6579           DictKey
+0002a900: 7354 6f4c 6973 7428 6461 7461 5b69 5d2c  sToList(data[i],
+0002a910: 7665 722b 272e 7b7d 272e 666f 726d 6174  ver+'.{}'.format
+0002a920: 2869 2920 6966 2076 6572 2065 6c73 6520  (i) if ver else 
+0002a930: 277b 7d27 2e66 6f72 6d61 7428 6929 2c6f  '{}'.format(i),o
+0002a940: 7574 3d6f 7574 290a 2020 2020 2020 2020  ut=out).        
+0002a950: 7265 7475 726e 2076 6572 0a20 2020 2069  return ver.    i
+0002a960: 6620 6973 696e 7374 616e 6365 2864 6174  f isinstance(dat
+0002a970: 612c 7374 7229 3a20 6461 7461 3d64 6174  a,str): data=dat
+0002a980: 612e 7370 6c69 7428 7379 6d29 0a20 2020  a.split(sym).   
+0002a990: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
+0002a9a0: 6365 2864 6174 612c 286c 6973 742c 7475  ce(data,(list,tu
+0002a9b0: 706c 6529 293a 2072 6574 7572 6e20 4661  ple)): return Fa
+0002a9c0: 6c73 650a 2020 2020 6461 7461 3d6c 6973  lse.    data=lis
+0002a9d0: 7428 6461 7461 290a 2020 2020 6966 206c  t(data).    if l
+0002a9e0: 656e 2864 6174 6129 203c 2032 3a20 7265  en(data) < 2: re
+0002a9f0: 7475 726e 2064 6174 610a 2020 2020 736f  turn data.    so
+0002aa00: 7274 5f64 6174 613d 7b7d 0a20 2020 206f  rt_data={}.    o
+0002aa10: 7574 3d5b 5d0a 2020 2020 2363 6f6e 7665  ut=[].    #conve
+0002aa20: 7274 206c 6973 7420 746f 2064 6963 7420  rt list to dict 
+0002aa30: 666f 726d 6174 0a20 2020 2066 6f72 2069  format.    for i
+0002aa40: 2069 6e20 6461 7461 3a0a 2020 2020 2020   in data:.      
+0002aa50: 2020 6966 206e 6f74 2069 3a20 636f 6e74    if not i: cont
+0002aa60: 696e 7565 0a20 2020 2020 2020 2074 743d  inue.        tt=
+0002aa70: 736f 7274 5f64 6174 610a 2020 2020 2020  sort_data.      
+0002aa80: 2020 6a5f 613d 5370 6c69 7428 692c 272e    j_a=Split(i,'.
+0002aa90: 7c2d 7c3a 7c5f 2729 0a20 2020 2020 2020  |-|:|_').       
+0002aaa0: 206a 5f6d 3d6c 656e 286a 5f61 292d 310a   j_m=len(j_a)-1.
+0002aab0: 2020 2020 2020 2020 666f 7220 6a20 696e          for j in
+0002aac0: 2072 616e 6765 2830 2c6a 5f6d 2b31 293a   range(0,j_m+1):
+0002aad0: 0a20 2020 2020 2020 2020 2020 206a 5f61  .            j_a
+0002aae0: 5b6a 5d3d 496e 7428 6a5f 615b 6a5d 290a  [j]=Int(j_a[j]).
+0002aaf0: 2020 2020 2020 2020 2020 2020 6966 206a              if j
+0002ab00: 203d 3d20 6a5f 6d3a 0a20 2020 2020 2020   == j_m:.       
+0002ab10: 2020 2020 2020 2020 2074 745b 6a5f 615b           tt[j_a[
+0002ab20: 6a5d 5d3d 690a 2020 2020 2020 2020 2020  j]]=i.          
+0002ab30: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0002ab40: 2020 2020 2020 2020 6966 206a 5f61 5b6a          if j_a[j
+0002ab50: 5d20 6e6f 7420 696e 2074 743a 2074 745b  ] not in tt: tt[
+0002ab60: 6a5f 615b 6a5d 5d3d 7b7d 0a20 2020 2020  j_a[j]]={}.     
+0002ab70: 2020 2020 2020 2020 2020 2074 743d 7474             tt=tt
+0002ab80: 5b6a 5f61 5b6a 5d5d 0a0a 2020 2020 2364  [j_a[j]]..    #d
+0002ab90: 6963 7420 6461 7461 2074 6f20 6175 746f  ict data to auto
+0002aba0: 2073 6f72 7469 6e67 2028 6c69 6b65 2061   sorting (like a
+0002abb0: 7320 7079 7468 6f6e 322e 7820 7374 796c  s python2.x styl
+0002abc0: 6520 736f 7274 696e 6729 0a20 2020 206e  e sorting).    n
+0002abd0: 6577 5f64 6174 615f 7374 723d 7070 7269  ew_data_str=ppri
+0002abe0: 6e74 2e70 666f 726d 6174 2873 6f72 745f  nt.pformat(sort_
+0002abf0: 6461 7461 290a 2020 2020 6e65 775f 6461  data).    new_da
+0002ac00: 7461 3d61 7374 2e6c 6974 6572 616c 5f65  ta=ast.literal_e
+0002ac10: 7661 6c28 6e65 775f 6461 7461 5f73 7472  val(new_data_str
+0002ac20: 290a 2020 2020 2347 6574 2073 6f72 7465  ).    #Get sorte
+0002ac30: 6420 6461 7461 2066 726f 6d20 6469 6374  d data from dict
+0002ac40: 2073 6f72 7469 6e67 0a20 2020 2044 6963   sorting.    Dic
+0002ac50: 744b 6579 7354 6f4c 6973 7428 6e65 775f  tKeysToList(new_
+0002ac60: 6461 7461 2c6f 7574 3d6f 7574 290a 2020  data,out=out).  
+0002ac70: 2020 6966 2072 6576 3a20 6f75 742e 7265    if rev: out.re
+0002ac80: 7665 7273 6528 2920 2372 6576 6572 7365  verse() #reverse
+0002ac90: 2064 6174 610a 2020 2020 7265 7475 726e   data.    return
+0002aca0: 206f 7574 0a0a 6465 6620 4d61 6356 3428   out..def MacV4(
+0002acb0: 7372 632c 2a2a 6f70 7473 293a 0a20 2020  src,**opts):.   
+0002acc0: 2027 2727 0a20 2020 2043 6865 636b 204d   '''.    Check M
+0002acd0: 6163 2061 6464 7265 7373 2066 6f72 6d61  ac address forma
+0002ace0: 7420 616e 6420 636f 6e76 6572 740a 2020  t and convert.  
+0002acf0: 2020 4865 7820 746f 2049 6e74 0a20 2020    Hex to Int.   
+0002ad00: 2048 6578 2074 6f20 4d61 6320 7374 7269   Hex to Mac stri
+0002ad10: 6e67 0a20 2020 204d 6163 2073 7472 696e  ng.    Mac strin
+0002ad20: 6720 746f 2049 6e74 0a20 2020 2073 796d  g to Int.    sym
+0002ad30: 626f 6c20 3a20 6465 6661 756c 7420 273a  bol : default ':
+0002ad40: 2720 6d61 6320 6164 6472 6573 7320 7370  ' mac address sp
+0002ad50: 6c69 7465 7220 7379 6d62 6f6c 0a20 2020  liter symbol.   
+0002ad60: 206f 7574 203a 0a20 2020 2020 2073 7472   out :.      str
+0002ad70: 203a 2064 6566 6175 6c74 203a 2058 583a   : default : XX:
+0002ad80: 5858 3a58 583a 5858 3a58 5820 666f 726d  XX:XX:XX:XX form
+0002ad90: 6174 0a20 2020 2020 2069 6e74 203a 2069  at.      int : i
+0002ada0: 6e74 6567 6572 2066 6f72 6d61 740a 2020  nteger format.  
+0002adb0: 2020 6465 6661 756c 7420 3a20 4661 6c73    default : Fals
+0002adc0: 650a 2020 2020 6361 7365 203a 200a 2020  e.    case : .  
+0002add0: 2020 2020 7570 7065 7220 3a20 7570 7065      upper : uppe
+0002ade0: 7220 6361 7365 206f 7574 7075 740a 2020  r case output.  
+0002adf0: 2020 2020 6c6f 7765 7220 3a20 6c6f 7765      lower : lowe
+0002ae00: 7220 6361 7365 206f 7574 7075 740a 2020  r case output.  
+0002ae10: 2020 6966 6e61 6d65 203a 0a20 2020 2020    ifname :.     
+0002ae20: 2054 7275 6520 3a20 7372 6320 6973 204e   True : src is N
+0002ae30: 6574 776f 726b 2069 6e74 6572 6661 6365  etwork interface
+0002ae40: 204e 616d 650a 2020 2020 2727 270a 2020   Name.    '''.  
+0002ae50: 2020 7379 6d62 6f6c 3d6f 7074 732e 6765    symbol=opts.ge
+0002ae60: 7428 2773 796d 626f 6c27 2c6f 7074 732e  t('symbol',opts.
+0002ae70: 6765 7428 2773 796d 272c 273a 2729 290a  get('sym',':')).
+0002ae80: 2020 2020 6465 6661 756c 743d 6f70 7473      default=opts
+0002ae90: 2e67 6574 2827 6465 6661 756c 7427 2c46  .get('default',F
+0002aea0: 616c 7365 290a 2020 2020 6f75 743d 6f70  alse).    out=op
+0002aeb0: 7473 2e67 6574 2827 6f75 7427 2c27 7374  ts.get('out','st
+0002aec0: 7227 290a 2020 2020 6361 7365 3d6f 7074  r').    case=opt
+0002aed0: 732e 6765 7428 2763 6173 6527 2c27 6c6f  s.get('case','lo
+0002aee0: 7765 7227 290a 2020 2020 2320 4672 6f6d  wer').    # From
+0002aef0: 2069 666e 616d 6520 286e 6574 776f 726b   ifname (network
+0002af00: 2064 6576 6963 6520 6e61 6d65 290a 2020   device name).  
+0002af10: 2020 6966 6e61 6d65 3d6f 7074 732e 6765    ifname=opts.ge
+0002af20: 7428 2769 666e 616d 6527 2c46 616c 7365  t('ifname',False
+0002af30: 290a 2020 2020 6966 2069 666e 616d 6520  ).    if ifname 
+0002af40: 6973 2054 7275 6520 616e 6420 6973 696e  is True and isin
+0002af50: 7374 616e 6365 2873 7263 2c73 7472 293a  stance(src,str):
+0002af60: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
+0002af70: 2020 2020 2020 2020 2020 7320 3d20 736f            s = so
+0002af80: 636b 6574 2e73 6f63 6b65 7428 736f 636b  cket.socket(sock
+0002af90: 6574 2e41 465f 494e 4554 2c20 736f 636b  et.AF_INET, sock
+0002afa0: 6574 2e53 4f43 4b5f 4447 5241 4d29 0a20  et.SOCK_DGRAM). 
+0002afb0: 2020 2020 2020 2020 2020 2069 6620 5079             if Py
+0002afc0: 5665 7228 3329 3a0a 2020 2020 2020 2020  Ver(3):.        
+0002afd0: 2020 2020 2020 2020 696e 666f 203d 2066          info = f
+0002afe0: 636e 746c 2e69 6f63 746c 2873 2e66 696c  cntl.ioctl(s.fil
+0002aff0: 656e 6f28 292c 2030 7838 3932 372c 2020  eno(), 0x8927,  
+0002b000: 7374 7275 6374 2e70 6163 6b28 2732 3536  struct.pack('256
+0002b010: 7327 2c20 4279 7465 7328 7372 635b 3a31  s', Bytes(src[:1
+0002b020: 355d 2c65 6e63 6f64 653d 2775 7466 2d38  5],encode='utf-8
+0002b030: 2729 2929 0a20 2020 2020 2020 2020 2020  '))).           
+0002b040: 2020 2020 2072 6574 7572 6e20 273a 272e       return ':'.
+0002b050: 6a6f 696e 285b 2725 3032 7827 2025 2063  join(['%02x' % c
+0002b060: 6861 7220 666f 7220 6368 6172 2069 6e20  har for char in 
+0002b070: 696e 666f 5b31 383a 3234 5d5d 290a 2020  info[18:24]]).  
+0002b080: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0002b090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b0a0: 696e 666f 203d 2066 636e 746c 2e69 6f63  info = fcntl.ioc
+0002b0b0: 746c 2873 2e66 696c 656e 6f28 292c 2030  tl(s.fileno(), 0
+0002b0c0: 7838 3932 372c 2020 7374 7275 6374 2e70  x8927,  struct.p
+0002b0d0: 6163 6b28 2732 3536 7327 2c20 7372 635b  ack('256s', src[
+0002b0e0: 3a31 355d 2929 0a20 2020 2020 2020 2020  :15])).         
+0002b0f0: 2020 2020 2020 2072 6574 7572 6e20 273a         return ':
+0002b100: 272e 6a6f 696e 285b 2725 3032 7827 2025  '.join(['%02x' %
+0002b110: 206f 7264 2863 6861 7229 2066 6f72 2063   ord(char) for c
+0002b120: 6861 7220 696e 2069 6e66 6f5b 3138 3a32  har in info[18:2
+0002b130: 345d 5d29 0a20 2020 2020 2020 2065 7863  4]]).        exc
+0002b140: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
+0002b150: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+0002b160: 0a20 2020 2064 6566 2069 6e74 3273 7472  .    def int2str
+0002b170: 2873 7263 2c73 796d 293a 0a20 2020 2020  (src,sym):.     
+0002b180: 2020 2072 6574 7572 6e20 273a 272e 6a6f     return ':'.jo
+0002b190: 696e 285b 277b 7d7b 7d27 2e66 6f72 6d61  in(['{}{}'.forma
+0002b1a0: 7428 612c 2062 2920 666f 7220 612c 2062  t(a, b) for a, b
+0002b1b0: 2069 6e20 7a69 7028 2a5b 6974 6572 2827   in zip(*[iter('
+0002b1c0: 7b3a 3031 3278 7d27 2e66 6f72 6d61 7428  {:012x}'.format(
+0002b1d0: 7372 6329 295d 2a32 295d 290a 2020 2020  src))]*2)]).    
+0002b1e0: 6465 6620 7374 7232 696e 7428 7372 6329  def str2int(src)
+0002b1f0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+0002b200: 2069 6e74 2873 7263 2e6c 6f77 6572 2829   int(src.lower()
+0002b210: 2e72 6570 6c61 6365 2827 2d27 2c27 2729  .replace('-','')
+0002b220: 2e72 6570 6c61 6365 2827 3a27 2c27 2729  .replace(':','')
+0002b230: 2c20 3136 290a 2020 2020 6966 2054 7970  , 16).    if Typ
+0002b240: 6528 7372 632c 2762 7974 6573 2729 3a20  e(src,'bytes'): 
+0002b250: 0a20 2020 2020 2020 2069 6620 6c65 6e28  .        if len(
+0002b260: 7372 6329 203d 3d20 363a 2023 2066 6f72  src) == 6: # for
+0002b270: 6d61 7420 6227 5c78 3030 5c78 6465 345c  mat b'\x00\xde4\
+0002b280: 7865 662e 5c78 6634 270a 2020 2020 2020  xef.\xf4'.      
+0002b290: 2020 2020 2020 7372 633d 636f 6465 6373        src=codecs
+0002b2a0: 2e65 6e63 6f64 6528 7372 632c 2768 6578  .encode(src,'hex
+0002b2b0: 2729 2020 2320 666f 726d 6174 2062 2730  ')  # format b'0
+0002b2c0: 3064 6533 3465 6632 6566 3427 0a20 2020  0de34ef2ef4'.   
+0002b2d0: 2020 2020 2073 7263 3d53 7472 2873 7263       src=Str(src
+0002b2e0: 290a 2020 2020 6966 2069 7369 6e73 7461  ).    if isinsta
+0002b2f0: 6e63 6528 7372 632c 7374 7229 3a0a 2020  nce(src,str):.  
+0002b300: 2020 2020 2020 7372 633d 7372 632e 7374        src=src.st
+0002b310: 7269 7028 290a 2020 2020 2020 2020 2320  rip().        # 
+0002b320: 6d61 6b65 2073 7572 6520 7468 6520 666f  make sure the fo
+0002b330: 726d 6174 0a20 2020 2020 2020 2069 6620  rmat.        if 
+0002b340: 3132 203c 3d20 6c65 6e28 7372 6329 203c  12 <= len(src) <
+0002b350: 3d20 3137 3a0a 2020 2020 2020 2020 2020  = 17:.          
+0002b360: 2020 666f 7220 6920 696e 205b 273a 272c    for i in [':',
+0002b370: 272d 275d 3a0a 2020 2020 2020 2020 2020  '-']:.          
+0002b380: 2020 2020 2020 7372 633d 7372 632e 7265        src=src.re
+0002b390: 706c 6163 6528 692c 2727 290a 2020 2020  place(i,'').    
+0002b3a0: 2020 2020 2020 2020 7372 633d 4a6f 696e          src=Join
+0002b3b0: 285b 7372 635b 693a 692b 325d 2066 6f72  ([src[i:i+2] for
+0002b3c0: 2069 2069 6e20 7261 6e67 6528 302c 3132   i in range(0,12
+0002b3d0: 2c32 295d 2c73 796d 626f 6c3d 273a 2729  ,2)],symbol=':')
+0002b3e0: 0a20 2020 2020 2020 2023 2043 6865 636b  .        # Check
+0002b3f0: 2074 6865 206e 6f72 6d61 6c20 6d61 6320   the normal mac 
+0002b400: 666f 726d 6174 0a20 2020 2020 2020 206f  format.        o
+0002b410: 6374 6574 7320 3d20 7372 632e 7370 6c69  ctets = src.spli
+0002b420: 7428 273a 2729 0a20 2020 2020 2020 2069  t(':').        i
+0002b430: 6620 6c65 6e28 6f63 7465 7473 2920 213d  f len(octets) !=
+0002b440: 2036 3a20 7265 7475 726e 2064 6566 6175   6: return defau
+0002b450: 6c74 0a20 2020 2020 2020 2066 6f72 2069  lt.        for i
+0002b460: 2069 6e20 6f63 7465 7473 3a0a 2020 2020   in octets:.    
+0002b470: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+0002b480: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+0002b490: 656e 2869 2920 213d 2032 206f 7220 696e  en(i) != 2 or in
+0002b4a0: 7428 692c 2031 3629 203e 2032 3535 3a0a  t(i, 16) > 255:.
+0002b4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b4c0: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
+0002b4d0: 740a 2020 2020 2020 2020 2020 2020 6578  t.            ex
+0002b4e0: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
+0002b4f0: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
+0002b500: 756c 740a 2020 2020 2020 2020 6966 206f  ult.        if o
+0002b510: 7574 2069 6e20 5b69 6e74 2c27 696e 7427  ut in [int,'int'
+0002b520: 2c27 6e75 6d62 6572 275d 3a20 7265 7475  ,'number']: retu
+0002b530: 726e 2073 7472 3269 6e74 2873 7263 290a  rn str2int(src).
+0002b540: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
+0002b550: 6c20 213d 2027 3a27 3a20 7372 633d 7372  l != ':': src=sr
+0002b560: 632e 7265 706c 6163 6528 273a 272c 7379  c.replace(':',sy
+0002b570: 6d62 6f6c 290a 2020 2020 2020 2020 6966  mbol).        if
+0002b580: 2063 6173 6520 3d3d 2027 7570 7065 7227   case == 'upper'
+0002b590: 3a20 7265 7475 726e 2073 7263 2e75 7070  : return src.upp
+0002b5a0: 6572 2829 0a20 2020 2020 2020 2072 6574  er().        ret
+0002b5b0: 7572 6e20 7372 632e 6c6f 7765 7228 290a  urn src.lower().
+0002b5c0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+0002b5d0: 6e63 6528 7372 632c 696e 7429 2061 6e64  nce(src,int) and
+0002b5e0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+0002b5f0: 7372 632c 626f 6f6c 293a 0a20 2020 2020  src,bool):.     
+0002b600: 2020 2069 6620 6f75 7420 696e 205b 696e     if out in [in
+0002b610: 742c 2769 6e74 272c 276e 756d 6265 7227  t,'int','number'
+0002b620: 5d3a 2072 6574 7572 6e20 7372 630a 2020  ]: return src.  
+0002b630: 2020 2020 2020 7372 633d 696e 7432 7374        src=int2st
+0002b640: 7228 7372 632c 7379 6d62 6f6c 290a 2020  r(src,symbol).  
+0002b650: 2020 2020 2020 6966 2063 6173 6520 3d3d        if case ==
+0002b660: 2027 7570 7065 7227 3a20 7265 7475 726e   'upper': return
+0002b670: 2073 7263 2e75 7070 6572 2829 0a20 2020   src.upper().   
+0002b680: 2020 2020 2072 6574 7572 6e20 7372 632e       return src.
+0002b690: 6c6f 7765 7228 290a 2020 2020 7265 7475  lower().    retu
+0002b6a0: 726e 2064 6566 6175 6c74 0a0a 6465 6620  rn default..def 
+0002b6b0: 4765 7449 666e 616d 6528 6d61 6329 3a0a  GetIfname(mac):.
+0002b6c0: 2020 2020 6e65 745f 6469 723d 272f 7379      net_dir='/sy
+0002b6d0: 732f 636c 6173 732f 6e65 7427 0a20 2020  s/class/net'.   
+0002b6e0: 2069 6620 6f73 2e70 6174 682e 6973 6469   if os.path.isdi
+0002b6f0: 7228 6e65 745f 6469 7229 3a0a 2020 2020  r(net_dir):.    
+0002b700: 2020 2020 6469 7270 6174 682c 6469 726e      dirpath,dirn
+0002b710: 616d 6573 2c66 696c 656e 616d 6573 203d  ames,filenames =
+0002b720: 206c 6973 7428 6f73 2e77 616c 6b28 6e65   list(os.walk(ne
+0002b730: 745f 6469 7229 295b 305d 0a20 2020 2020  t_dir))[0].     
+0002b740: 2020 2066 6f72 2064 6576 2069 6e20 6469     for dev in di
+0002b750: 726e 616d 6573 3a0a 2020 2020 2020 2020  rnames:.        
+0002b760: 2020 2020 666d 6163 3d63 6174 2827 7b7d      fmac=cat('{}
+0002b770: 2f7b 7d2f 6164 6472 6573 7327 2e66 6f72  /{}/address'.for
+0002b780: 6d61 7428 6469 7270 6174 682c 6465 7629  mat(dirpath,dev)
+0002b790: 2c6e 6f5f 656e 645f 6e65 776c 696e 653d  ,no_end_newline=
+0002b7a0: 5472 7565 290a 2020 2020 2020 2020 2020  True).          
+0002b7b0: 2020 6966 2074 7970 6528 666d 6163 2920    if type(fmac) 
+0002b7c0: 6973 2073 7472 2061 6e64 2066 6d61 632e  is str and fmac.
+0002b7d0: 7374 7269 7028 292e 6c6f 7765 7228 2920  strip().lower() 
+0002b7e0: 3d3d 206d 6163 2e6c 6f77 6572 2829 3a0a  == mac.lower():.
+0002b7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b800: 7265 7475 726e 2064 6576 0a0a 6465 6620  return dev..def 
+0002b810: 5061 7468 282a 696e 702c 2a2a 6f70 7473  Path(*inp,**opts
+0002b820: 293a 0a20 2020 2027 2727 0a20 2020 2047  ):.    '''.    G
+0002b830: 6574 2050 6174 6820 6f66 2069 6e70 7574  et Path of input
+0002b840: 0a20 2020 2069 6e70 7574 7329 0a20 2020  .    inputs).   
+0002b850: 2020 2020 7e20 2020 2020 2020 3a20 686f      ~       : ho
+0002b860: 6d65 2070 6174 680a 2020 2020 2020 207e  me path.       ~
+0002b870: 3c75 7365 723e 203a 2075 7365 7227 7320  <user> : user's 
+0002b880: 686f 6d65 2070 6174 680a 2020 2020 2020  home path.      
+0002b890: 204e 6f6e 6520 2020 203a 2063 7572 7265   None    : curre
+0002b8a0: 6e74 2070 6174 680a 2020 2020 2020 205f  nt path.       _
+0002b8b0: 5f66 696c 655f 5f3a 2063 7572 7265 6e74  _file__: current
+0002b8c0: 2070 7974 686f 6e20 7363 7269 7074 2066   python script f
+0002b8d0: 696c 6520 7061 7468 0a20 2020 2020 2020  ile path.       
+0002b8e0: 5f5f 6d6f 645f 5f20 3a20 5468 6973 2070  __mod__ : This p
+0002b8f0: 7974 686f 6e20 7363 7269 7074 2066 696c  ython script fil
+0002b900: 6520 7061 7468 0a20 2020 2020 2020 6669  e path.       fi
+0002b910: 6c65 2020 2020 3a20 7468 6520 6669 6c65  le    : the file
+0002b920: 2773 2070 6174 680a 2020 2020 2020 205b  's path.       [
+0002b930: 6c69 7374 5d20 203a 2063 6f6e 7665 7274  list]  : convert
+0002b940: 2074 6f20 7061 7468 2072 756c 6520 0a20   to path rule . 
+0002b950: 2020 2020 2020 6f62 6a20 2020 2020 3a20        obj     : 
+0002b960: 7375 7070 6f72 7420 6675 6e63 7469 6f6e  support function
+0002b970: 2c20 6d6f 6475 6c65 2c20 636c 6173 732c  , module, class,
+0002b980: 2069 6e73 7461 6e63 650a 0a20 2020 2072   instance..    r
+0002b990: 656d 6f76 655f 646f 7420 3a20 0a20 2020  emove_dot : .   
+0002b9a0: 2020 2054 7275 6520 3a20 2864 6566 6175     True : (defau
+0002b9b0: 6c74 2920 2f61 2f62 2f2e 2f2e 2e2f 6320  lt) /a/b/./../c 
+0002b9c0: 3d3e 202f 612f 630a 2020 2020 2020 4661  => /a/c.      Fa
+0002b9d0: 6c73 653a 202f 612f 622f 2e2f 2e2e 2f63  lse: /a/b/./../c
+0002b9e0: 203d 3e20 2f61 2f62 2f2e 2f2e 2e2f 630a   => /a/b/./../c.
+0002b9f0: 2020 2020 6572 726f 7220 3a20 0a20 2020      error : .   
+0002ba00: 2020 2046 616c 7365 3a20 6465 6661 756c     False: defaul
+0002ba10: 742c 2069 6620 7061 7468 2069 7373 7565  t, if path issue
+0002ba20: 2074 6865 6e20 7265 7475 726e 2065 7272   then return err
+0002ba30: 6f72 0a20 2020 2020 2054 7275 6520 3a20  or.      True : 
+0002ba40: 6966 2070 6174 6820 6973 7375 6520 7468  if path issue th
+0002ba50: 656e 2069 676e 6f72 650a 2020 2020 6f75  en ignore.    ou
+0002ba60: 7420 3a0a 2020 2020 2073 7472 203a 2064  t :.     str : d
+0002ba70: 6566 6175 6c74 3a20 7265 7475 726e 2070  efault: return p
+0002ba80: 6174 6820 7374 7269 6e67 0a20 2020 2020  ath string.     
+0002ba90: 6c69 7374 3a20 7265 7475 726e 206c 6973  list: return lis
+0002baa0: 7420 666f 726d 6174 0a20 2020 2020 2020  t format.       
+0002bab0: 2d20 666f 7263 655f 726f 6f74 203a 2064  - force_root : d
+0002bac0: 6566 6175 6c74 2046 616c 7365 2c20 5472  efault False, Tr
+0002bad0: 7565 3a20 5b27 272c 2761 272c 2762 275d  ue: ['','a','b']
+0002bae0: 206f 7220 5b27 6127 2c27 6227 5d20 3d3e   or ['a','b'] =>
+0002baf0: 2027 2f61 2f62 270a 0a20 2020 2020 272f   '/a/b'..     '/
+0002bb00: 612f 622f 6327 203d 3e20 5b27 272c 2761  a/b/c' => ['','a
+0002bb10: 272c 2762 272c 2763 275d 2028 6f75 743d  ','b','c'] (out=
+0002bb20: 6c69 7374 290a 2020 2020 2027 612f 622f  list).     'a/b/
+0002bb30: 6327 2020 3d3e 205b 2761 272c 2762 272c  c'  => ['a','b',
+0002bb40: 2763 275d 2020 2020 286f 7574 3d6c 6973  'c']    (out=lis
+0002bb50: 7429 0a20 2020 2020 5b27 272c 2761 272c  t).     ['','a',
+0002bb60: 2762 272c 2763 275d 2020 3d3e 2027 2f61  'b','c']  => '/a
+0002bb70: 2f62 2f63 2728 6f75 743d 7374 7229 0a20  /b/c'(out=str). 
+0002bb80: 2020 2020 5b27 6127 2c27 6227 2c27 6327      ['a','b','c'
+0002bb90: 5d20 2020 2020 3d3e 2027 612f 622f 6327  ]     => 'a/b/c'
+0002bba0: 2028 6f75 743d 7374 7229 0a20 2020 2027   (out=str).    '
+0002bbb0: 2727 0a20 2020 2073 796d 3d6f 7074 732e  ''.    sym=opts.
+0002bbc0: 6765 7428 2773 796d 272c 272f 2729 0a20  get('sym','/'). 
+0002bbd0: 2020 206f 7574 3d6f 7074 732e 6765 7428     out=opts.get(
+0002bbe0: 276f 7574 272c 2773 7472 2729 0a20 2020  'out','str').   
+0002bbf0: 2065 7869 7374 3d6f 7074 732e 6765 7428   exist=opts.get(
+0002bc00: 2765 7869 7374 272c 4661 6c73 6529 0a20  'exist',False). 
+0002bc10: 2020 2064 6566 6175 6c74 3d6f 7074 732e     default=opts.
+0002bc20: 6765 7428 2764 6566 6175 6c74 272c 4661  get('default',Fa
+0002bc30: 6c73 6529 0a20 2020 2072 656d 6f76 655f  lse).    remove_
+0002bc40: 646f 743d 6f70 7473 2e67 6574 2827 7265  dot=opts.get('re
+0002bc50: 6d6f 7665 5f64 6f74 272c 5472 7565 290a  move_dot',True).
+0002bc60: 2020 2020 6572 723d 6f70 7473 2e67 6574      err=opts.get
+0002bc70: 2827 6572 7227 2c6f 7074 732e 6765 7428  ('err',opts.get(
+0002bc80: 2765 7272 6f72 272c 4661 6c73 6529 290a  'error',False)).
+0002bc90: 2020 2020 6465 6661 756c 743d 6f70 7473      default=opts
+0002bca0: 2e67 6574 2827 6465 6661 756c 7427 2c46  .get('default',F
+0002bcb0: 616c 7365 290a 2020 2020 6261 7365 5f64  alse).    base_d
+0002bcc0: 6972 3d4e 6f6e 650a 2020 2020 6966 206e  ir=None.    if n
+0002bcd0: 6f74 2069 6e70 3a0a 2020 2020 2020 2020  ot inp:.        
+0002bce0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+0002bcf0: 2062 6173 655f 6469 723d 6f73 2e65 6e76   base_dir=os.env
+0002bd00: 6972 6f6e 5b27 5057 4427 5d0a 2020 2020  iron['PWD'].    
+0002bd10: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+0002bd20: 2020 2020 2020 2020 6261 7365 5f64 6972          base_dir
+0002bd30: 3d6f 732e 7061 7468 2e64 6972 6e61 6d65  =os.path.dirname
+0002bd40: 286f 732e 7061 7468 2e72 6561 6c70 6174  (os.path.realpat
+0002bd50: 6828 2869 6e73 7065 6374 2e73 7461 636b  h((inspect.stack
+0002bd60: 2829 5b2d 315d 295b 315d 2929 0a20 2020  ()[-1])[1])).   
+0002bd70: 2065 6c69 6620 696e 703a 0a20 2020 2020   elif inp:.     
+0002bd80: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0002bd90: 2869 6e70 5b30 5d2c 7374 7229 3a0a 2020  (inp[0],str):.  
+0002bda0: 2020 2020 2020 2020 2020 6966 206f 732e            if os.
+0002bdb0: 7061 7468 2e69 7366 696c 6528 696e 705b  path.isfile(inp[
+0002bdc0: 305d 293a 0a20 2020 2020 2020 2020 2020  0]):.           
+0002bdd0: 2020 2020 2062 6173 655f 6469 723d 6f73       base_dir=os
+0002bde0: 2e70 6174 682e 6469 726e 616d 6528 6f73  .path.dirname(os
+0002bdf0: 2e70 6174 682e 6162 7370 6174 6828 696e  .path.abspath(in
+0002be00: 705b 305d 2929 0a20 2020 2020 2020 2020  p[0])).         
+0002be10: 2020 2065 6c69 6620 696e 705b 305d 203d     elif inp[0] =
+0002be20: 3d20 275f 5f6d 6f64 5f5f 273a 0a20 2020  = '__mod__':.   
+0002be30: 2020 2020 2020 2020 2020 2020 2023 5468               #Th
+0002be40: 6973 206d 6f64 756c 6520 7061 7468 0a20  is module path. 
+0002be50: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+0002be60: 6173 655f 6469 723d 6f73 2e70 6174 682e  ase_dir=os.path.
+0002be70: 6469 726e 616d 6528 6f73 2e70 6174 682e  dirname(os.path.
+0002be80: 6162 7370 6174 6828 5f5f 6669 6c65 5f5f  abspath(__file__
+0002be90: 2929 2023 204e 6f74 2069 6e70 7574 2074  )) # Not input t
+0002bea0: 6865 6e20 6765 7420 6375 7272 656e 7420  hen get current 
+0002beb0: 7061 7468 0a20 2020 2020 2020 2020 2020  path.           
+0002bec0: 2065 6c69 6620 696e 705b 305d 203d 3d20   elif inp[0] == 
+0002bed0: 275f 5f66 696c 655f 5f27 3a0a 2020 2020  '__file__':.    
+0002bee0: 2020 2020 2020 2020 2020 2020 2347 6574              #Get
+0002bef0: 2043 616c 6c65 7220 6675 6e63 7469 6f6e   Caller function
+0002bf00: 2773 2046 696c 656e 616d 650a 2020 2020  's Filename.    
+0002bf10: 2020 2020 2020 2020 2020 2020 6d79 5f66              my_f
+0002bf20: 696c 653d 696e 7370 6563 742e 6765 7466  ile=inspect.getf
+0002bf30: 696c 6528 4675 6e63 7469 6f6e 4e61 6d65  ile(FunctionName
+0002bf40: 2870 6172 656e 743d 312c 6f62 6a3d 5472  (parent=1,obj=Tr
+0002bf50: 7565 295b 315d 2920 0a20 2020 2020 2020  ue)[1]) .       
+0002bf60: 2020 2020 2020 2020 2062 6173 655f 6469           base_di
+0002bf70: 723d 6f73 2e70 6174 682e 6469 726e 616d  r=os.path.dirnam
+0002bf80: 6528 6f73 2e70 6174 682e 6162 7370 6174  e(os.path.abspat
+0002bf90: 6828 6d79 5f66 696c 6529 2920 2320 4765  h(my_file)) # Ge
+0002bfa0: 7420 6669 6c65 6e61 6d65 2070 6174 680a  t filename path.
+0002bfb0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0002bfc0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002bfd0: 2020 6261 7365 5f64 6972 3d69 6e70 5b30    base_dir=inp[0
+0002bfe0: 5d0a 2020 2020 2020 2020 656c 6966 2054  ].        elif T
+0002bff0: 7970 6528 696e 705b 305d 2c28 2766 756e  ype(inp[0],('fun
+0002c000: 6374 696f 6e27 2c27 6d6f 6475 6c65 272c  ction','module',
+0002c010: 2763 6c61 7373 6f62 6a27 2c27 696e 7374  'classobj','inst
+0002c020: 616e 6365 2729 293a 0a20 2020 2020 2020  ance')):.       
+0002c030: 2020 2020 206d 795f 6669 6c65 3d69 6e73       my_file=ins
+0002c040: 7065 6374 2e67 6574 6669 6c65 2869 6e70  pect.getfile(inp
+0002c050: 5b30 5d29 2023 2047 6574 206f 626a 2773  [0]) # Get obj's
+0002c060: 2066 696c 656e 616d 650a 2020 2020 2020   filename.      
+0002c070: 2020 2020 2020 6261 7365 5f64 6972 3d6f        base_dir=o
+0002c080: 732e 7061 7468 2e64 6972 6e61 6d65 286f  s.path.dirname(o
+0002c090: 732e 7061 7468 2e61 6273 7061 7468 286d  s.path.abspath(m
+0002c0a0: 795f 6669 6c65 2929 2020 0a20 2020 2066  y_file))  .    f
+0002c0b0: 756c 6c5f 7061 7468 3d5b 5d0a 2020 2020  ull_path=[].    
+0002c0c0: 6966 2069 7369 6e73 7461 6e63 6528 6261  if isinstance(ba
+0002c0d0: 7365 5f64 6972 2c73 7472 293a 0a20 2020  se_dir,str):.   
+0002c0e0: 2020 2020 2066 756c 6c5f 7061 7468 3d62       full_path=b
+0002c0f0: 6173 655f 6469 722e 7370 6c69 7428 7379  ase_dir.split(sy
+0002c100: 6d29 0a20 2020 2065 6c69 6620 6973 696e  m).    elif isin
+0002c110: 7374 616e 6365 2869 6e70 5b30 5d2c 286c  stance(inp[0],(l
+0002c120: 6973 742c 7475 706c 6529 293a 0a20 2020  ist,tuple)):.   
+0002c130: 2020 2020 2066 756c 6c5f 7061 7468 3d6c       full_path=l
+0002c140: 6973 7428 696e 705b 305d 290a 2020 2020  ist(inp[0]).    
+0002c150: 6966 2066 756c 6c5f 7061 7468 3a0a 2020  if full_path:.  
+0002c160: 2020 2020 2020 6966 2066 756c 6c5f 7061        if full_pa
+0002c170: 7468 5b30 5d20 3d3d 2027 7e27 206f 7220  th[0] == '~' or 
+0002c180: 2866 756c 6c5f 7061 7468 5b30 5d20 616e  (full_path[0] an
+0002c190: 6420 6675 6c6c 5f70 6174 685b 305d 5b30  d full_path[0][0
+0002c1a0: 5d20 3d3d 2027 7e27 293a 2020 2020 2020  ] == '~'):      
+0002c1b0: 2320 7e20 6f72 207e 3c75 7365 723e 2073  # ~ or ~<user> s
+0002c1c0: 7479 6c65 0a20 2020 2020 2020 2020 2020  tyle.           
+0002c1d0: 2023 6675 6c6c 5f70 6174 683d 6f73 2e65   #full_path=os.e
+0002c1e0: 6e76 6972 6f6e 5b27 484f 4d45 275d 2e73  nviron['HOME'].s
+0002c1f0: 706c 6974 2873 796d 292b 6675 6c6c 5f70  plit(sym)+full_p
+0002c200: 6174 685b 313a 5d0a 2020 2020 2020 2020  ath[1:].        
+0002c210: 2020 2020 6675 6c6c 5f70 6174 683d 6f73      full_path=os
+0002c220: 2e70 6174 682e 6578 7061 6e64 7573 6572  .path.expanduser
+0002c230: 2866 756c 6c5f 7061 7468 5b30 5d29 2e73  (full_path[0]).s
+0002c240: 706c 6974 2873 796d 292b 6675 6c6c 5f70  plit(sym)+full_p
+0002c250: 6174 685b 313a 5d0a 2320 2020 2020 2020  ath[1:].#       
+0002c260: 2065 6c69 6620 6675 6c6c 5f70 6174 685b   elif full_path[
+0002c270: 305d 2061 6e64 2066 756c 6c5f 7061 7468  0] and full_path
+0002c280: 5b30 5d5b 305d 203d 3d20 277e 273a 2023  [0][0] == '~': #
+0002c290: 207e 3c75 7365 723e 2073 7479 6c65 0a23   ~<user> style.#
+0002c2a0: 2020 2020 2020 2020 2020 2020 6675 6c6c              full
+0002c2b0: 5f70 6174 683d 6f73 2e70 6174 682e 6578  _path=os.path.ex
+0002c2c0: 7061 6e64 7573 6572 2866 756c 6c5f 7061  panduser(full_pa
+0002c2d0: 7468 5b30 5d29 2e73 706c 6974 2873 796d  th[0]).split(sym
+0002c2e0: 292b 6675 6c6c 5f70 6174 685b 313a 5d0a  )+full_path[1:].
+0002c2f0: 2020 2020 6966 2072 656d 6f76 655f 646f      if remove_do
+0002c300: 743a 0a20 2020 2020 2020 206e 6670 3d5b  t:.        nfp=[
+0002c310: 5d0a 2020 2020 2020 2020 666f 7220 6920  ].        for i 
+0002c320: 696e 2066 756c 6c5f 7061 7468 3a0a 2020  in full_path:.  
+0002c330: 2020 2020 2020 2020 2020 6966 2069 203d            if i =
+0002c340: 3d20 272e 2e27 3a20 2372 656d 6f76 6520  = '..': #remove 
+0002c350: 272e 2e27 0a20 2020 2020 2020 2020 2020  '..'.           
+0002c360: 2020 2020 2069 6620 6e66 703a 0a20 2020       if nfp:.   
+0002c370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c380: 2023 6b65 6570 2072 6f6f 7420 7061 7468   #keep root path
+0002c390: 2028 272f 2729 0a20 2020 2020 2020 2020   ('/').         
+0002c3a0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+0002c3b0: 6e28 6e66 7029 3d3d 313a 0a20 2020 2020  n(nfp)==1:.     
+0002c3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c3d0: 2020 2069 6620 6e66 705b 305d 3a0a 2020     if nfp[0]:.  
+0002c3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c3f0: 2020 2020 2020 2020 2020 6465 6c20 6e66            del nf
+0002c400: 705b 2d31 5d0a 2020 2020 2020 2020 2020  p[-1].          
+0002c410: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0002c420: 6966 2065 7272 3a0a 2020 2020 2020 2020  if err:.        
+0002c430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c440: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
+0002c450: 6c74 0a20 2020 2020 2020 2020 2020 2020  lt.             
+0002c460: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0002c470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c480: 2020 2020 2064 656c 206e 6670 5b2d 315d       del nfp[-1]
+0002c490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c4a0: 2065 6c69 6620 6572 723a 0a20 2020 2020   elif err:.     
+0002c4b0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0002c4c0: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
+0002c4d0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0002c4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c4f0: 6966 2069 2021 3d20 272e 273a 2023 7265  if i != '.': #re
+0002c500: 6d6f 7665 2027 2e27 0a20 2020 2020 2020  move '.'.       
+0002c510: 2020 2020 2020 2020 2020 2020 206e 6670               nfp
+0002c520: 2e61 7070 656e 6428 6929 0a20 2020 2020  .append(i).     
+0002c530: 2020 2066 756c 6c5f 7061 7468 3d6e 6670     full_path=nfp
+0002c540: 0a20 2020 2066 6f72 2069 6920 696e 2069  .    for ii in i
+0002c550: 6e70 5b31 3a5d 3a20 2320 6164 6420 6578  np[1:]: # add ex
+0002c560: 7472 6120 696e 7075 740a 2020 2020 2020  tra input.      
+0002c570: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0002c580: 6969 2c73 7472 293a 0a20 2020 2020 2020  ii,str):.       
+0002c590: 2020 2020 2066 6f72 207a 7a20 696e 2069       for zz in i
+0002c5a0: 692e 7370 6c69 7428 7379 6d29 3a0a 2020  i.split(sym):.  
+0002c5b0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002c5c0: 2072 656d 6f76 655f 646f 743a 0a20 2020   remove_dot:.   
+0002c5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c5e0: 2069 6620 7a7a 203d 3d20 272e 2720 6f72   if zz == '.' or
+0002c5f0: 206e 6f74 2054 7970 6528 7a7a 2c27 7374   not Type(zz,'st
+0002c600: 7227 2c64 6174 613d 5472 7565 293a 2063  r',data=True): c
+0002c610: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
+0002c620: 2020 2020 2020 2020 2020 2020 6966 207a              if z
+0002c630: 7a20 3d3d 2027 2e2e 273a 0a20 2020 2020  z == '..':.     
+0002c640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c650: 2020 2069 6620 6675 6c6c 5f70 6174 683a     if full_path:
+0002c660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c670: 2020 2020 2020 2020 2020 2020 2023 6b65               #ke
+0002c680: 6570 2072 6f6f 7420 7061 7468 2028 272f  ep root path ('/
+0002c690: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+0002c6a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002c6b0: 6620 6c65 6e28 6675 6c6c 5f70 6174 6829  f len(full_path)
+0002c6c0: 3d3d 313a 0a20 2020 2020 2020 2020 2020  ==1:.           
+0002c6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c6e0: 2020 2020 2069 6620 6675 6c6c 5f70 6174       if full_pat
+0002c6f0: 685b 305d 3a0a 2020 2020 2020 2020 2020  h[0]:.          
+0002c700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c710: 2020 2020 2020 2020 2020 6465 6c20 6675            del fu
+0002c720: 6c6c 5f70 6174 685b 2d31 5d0a 2020 2020  ll_path[-1].    
+0002c730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c740: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0002c750: 2065 7272 3a0a 2020 2020 2020 2020 2020   err:.          
+0002c760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c770: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0002c780: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
+0002c790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c7a0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0002c7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c7c0: 2020 2020 2020 2020 2020 2064 656c 2066             del f
+0002c7d0: 756c 6c5f 7061 7468 5b2d 315d 0a20 2020  ull_path[-1].   
+0002c7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c7f0: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
+0002c800: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0002c810: 2020 2020 2020 2020 2020 656c 6966 2065            elif e
+0002c820: 7272 3a0a 2020 2020 2020 2020 2020 2020  rr:.            
+0002c830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c840: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
+0002c850: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0002c860: 756c 6c5f 7061 7468 2e61 7070 656e 6428  ull_path.append(
+0002c870: 7a7a 290a 2020 2020 6966 206f 7574 2069  zz).    if out i
+0002c880: 6e20 5b73 7472 2c27 7374 7227 5d3a 0a20  n [str,'str']:. 
+0002c890: 2020 2020 2020 2069 6620 6e6f 7420 6675         if not fu
+0002c8a0: 6c6c 5f70 6174 683a 2072 6574 7572 6e20  ll_path: return 
+0002c8b0: 2727 0a20 2020 2020 2020 2072 743d 4a6f  ''.        rt=Jo
+0002c8c0: 696e 2866 756c 6c5f 7061 7468 2c73 796d  in(full_path,sym
+0002c8d0: 626f 6c3d 7379 6d29 0a20 2020 2020 2020  bol=sym).       
+0002c8e0: 2069 6620 6f70 7473 2e67 6574 2827 666f   if opts.get('fo
+0002c8f0: 7263 655f 726f 6f74 272c 6f70 7473 2e67  rce_root',opts.g
+0002c900: 6574 2827 726f 6f74 272c 4661 6c73 6529  et('root',False)
+0002c910: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+0002c920: 6620 7274 5b30 5d20 213d 2027 2f27 3a20  f rt[0] != '/': 
+0002c930: 7265 7475 726e 2027 2f27 2b72 740a 2020  return '/'+rt.  
+0002c940: 2020 2020 2020 7265 7475 726e 2072 740a        return rt.
+0002c950: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0002c960: 2020 7265 7475 726e 2066 756c 6c5f 7061    return full_pa
+0002c970: 7468 0a0a 6465 6620 4d65 7267 6553 7472  th..def MergeStr
+0002c980: 2861 2c62 2c5f 7479 7065 3d4e 6f6e 6529  (a,b,_type=None)
+0002c990: 3a0a 2020 2020 6966 2061 2069 7320 4e6f  :.    if a is No
+0002c9a0: 6e65 2061 6e64 2062 2069 7320 4e6f 6e65  ne and b is None
+0002c9b0: 3a0a 2020 2020 2020 2020 6966 205f 7479  :.        if _ty
+0002c9c0: 7065 203d 3d20 2762 7974 6573 273a 0a20  pe == 'bytes':. 
+0002c9d0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0002c9e0: 6e20 6227 270a 2020 2020 2020 2020 656c  n b''.        el
 0002c9f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002ca00: 7265 7475 726e 2020 612b 5374 7228 6229  return  a+Str(b)
-0002ca10: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-0002ca20: 2020 2069 6620 5f74 7970 6520 696e 205b     if _type in [
-0002ca30: 7374 722c 2773 7472 275d 3a0a 2020 2020  str,'str']:.    
-0002ca40: 2020 2020 2020 2020 6966 2061 2069 7320          if a is 
-0002ca50: 4e6f 6e65 3a20 7265 7475 726e 2053 7472  None: return Str
-0002ca60: 2862 290a 2020 2020 2020 2020 2020 2020  (b).            
-0002ca70: 656c 6966 2062 2069 7320 4e6f 6e65 3a20  elif b is None: 
-0002ca80: 7265 7475 726e 2053 7472 2861 290a 2020  return Str(a).  
-0002ca90: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0002caa0: 2053 7472 2861 292b 5374 7228 6229 0a20   Str(a)+Str(b). 
-0002cab0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0002cac0: 2020 2020 2020 2020 2069 6620 6120 6973           if a is
-0002cad0: 204e 6f6e 653a 2072 6574 7572 6e20 4279   None: return By
-0002cae0: 7465 7328 6229 0a20 2020 2020 2020 2020  tes(b).         
-0002caf0: 2020 2065 6c69 6620 6220 6973 204e 6f6e     elif b is Non
-0002cb00: 653a 2072 6574 7572 6e20 4279 7465 7328  e: return Bytes(
-0002cb10: 6129 0a20 2020 2020 2020 2020 2020 2072  a).            r
-0002cb20: 6574 7572 6e20 4279 7465 7328 6129 2b42  eturn Bytes(a)+B
-0002cb30: 7974 6573 2862 290a 0a64 6566 2043 7574  ytes(b)..def Cut
-0002cb40: 2873 7263 2c68 6561 645f 6c65 6e3d 4e6f  (src,head_len=No
-0002cb50: 6e65 2c62 6f64 795f 6c65 6e3d 4e6f 6e65  ne,body_len=None
-0002cb60: 2c6e 6577 5f6c 696e 653d 275c 6e27 2c6f  ,new_line='\n',o
-0002cb70: 7574 3d73 7472 2c66 726f 6e74 5f73 7061  ut=str,front_spa
-0002cb80: 6365 3d4e 6f6e 652c 6e65 776c 696e 655f  ce=None,newline_
-0002cb90: 6865 6164 3d46 616c 7365 293a 0a20 2020  head=False):.   
-0002cba0: 2027 2727 0a20 2020 2043 7574 2073 7472   '''.    Cut str
-0002cbb0: 696e 6720 7769 7468 206c 656e 6774 680a  ing with length.
-0002cbc0: 2020 2020 6865 6164 5f6c 656e 203a 2069      head_len : i
-0002cbd0: 6e74 203a 2066 6972 7374 206c 696e 6520  nt : first line 
-0002cbe0: 6c65 6e67 7468 2028 6465 6661 756c 7420  length (default 
-0002cbf0: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
-0002cc00: 2020 2020 2069 6620 626f 6479 5f6c 656e       if body_len
-0002cc10: 2069 7320 4e6f 6e65 2074 6865 6e20 6576   is None then ev
-0002cc20: 6572 7974 6869 6e67 2063 7574 2073 616d  erything cut sam
-0002cc30: 6520 6c65 6e67 7468 2077 6974 6820 6865  e length with he
-0002cc40: 6164 5f6c 656e 0a20 2020 2062 6f64 795f  ad_len.    body_
-0002cc50: 6c65 6e20 3a20 696e 7420 3a20 6c69 6e65  len : int : line
-0002cc60: 206c 656e 6774 6820 6166 7465 7220 6865   length after he
-0002cc70: 6164 5f6c 656e 2028 6465 6661 756c 7420  ad_len (default 
-0002cc80: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
-0002cc90: 2020 2020 2077 6974 686f 7574 2068 6561       without hea
-0002cca0: 645f 6c65 6e28 4e6f 6e65 2920 7468 656e  d_len(None) then
-0002ccb0: 2073 7761 7020 6265 7477 6565 6e20 6865   swap between he
-0002ccc0: 6164 5f6c 656e 2061 6e64 2062 6f64 795f  ad_len and body_
-0002ccd0: 6c65 6e0a 2020 2020 6e65 775f 6c69 6e65  len.    new_line
-0002cce0: 203a 2064 6566 6175 6c74 206c 696e 7578   : default linux
-0002ccf0: 206e 6577 206c 696e 650a 2020 2020 6672   new line.    fr
-0002cd00: 6f6e 745f 7370 6163 653a 200a 2020 2020  ont_space: .    
-0002cd10: 2020 2020 5472 7565 203a 2066 696c 6c20      True : fill 
-0002cd20: 6f75 7420 7370 6163 6520 746f 2067 6170  out space to gap
-0002cd30: 2062 6574 7765 656e 2068 6561 645f 6c65   between head_le
-0002cd40: 6e20 2061 6e64 2062 6f64 795f 6c65 6e20  n  and body_len 
-0002cd50: 2873 616d 6520 6173 2030 290a 2020 2020  (same as 0).    
-0002cd60: 2020 2020 4661 6c73 652f 4e6f 6e65 203a      False/None :
-0002cd70: 204e 6f20 7370 6163 650a 2020 2020 2020   No space.      
-0002cd80: 2020 2320 2020 203a 2066 696c 6c20 6f75    #    : fill ou
-0002cd90: 7420 7370 6163 6520 6f66 2023 2061 7420  t space of # at 
-0002cda0: 6672 6f6e 7420 6f66 2061 6c6c 2073 7472  front of all str
-0002cdb0: 696e 6773 2028 6865 6164 2061 6e64 2062  ings (head and b
-0002cdc0: 6f64 7929 0a20 2020 2020 2020 2027 2020  ody).        '  
-0002cdd0: 2720 3a20 7361 6d65 2061 7320 6e75 6d62  ' : same as numb
-0002cde0: 6572 2823 290a 2020 2020 6e65 776c 696e  er(#).    newlin
-0002cdf0: 655f 6865 6164 3a0a 2020 2020 2020 2020  e_head:.        
-0002ce00: 5472 7565 203a 2065 6163 6820 6669 7273  True : each firs
-0002ce10: 7420 6c69 6e65 2068 6173 2068 6561 6420  t line has head 
-0002ce20: 636f 6e64 6974 696f 6e0a 2020 2020 2020  condition.      
-0002ce30: 2020 4661 6c73 653a 2066 6972 7374 206c    False: first l
-0002ce40: 696e 6520 6861 7320 6865 6164 2063 6f6e  ine has head con
-0002ce50: 6469 7469 6f6e 206f 6620 656e 7469 7265  dition of entire
-0002ce60: 2073 6f75 7263 6520 2873 7263 290a 2020   source (src).  
-0002ce70: 2020 6f75 743d 0a20 2020 2020 2020 2073    out=.        s
-0002ce80: 7472 2020 3a20 6f75 7470 7574 2074 6f20  tr  : output to 
-0002ce90: 7374 7269 6e67 2077 6974 6820 6e65 775f  string with new_
-0002cea0: 6c69 6e65 2028 6465 6661 756c 7429 0a20  line (default). 
-0002ceb0: 2020 2020 2020 206c 6973 7420 3a20 6f75         list : ou
-0002cec0: 7470 7574 2074 6f20 6c69 7374 2069 6e73  tput to list ins
-0002ced0: 7465 6164 206e 6577 5f6c 696e 650a 2020  tead new_line.  
-0002cee0: 2020 2727 270a 2020 2020 6966 206e 6f74    '''.    if not
-0002cef0: 2054 7970 6528 7372 632c 2827 7374 7227   Type(src,('str'
-0002cf00: 2c27 6279 7465 7327 2929 3a20 7265 7475  ,'bytes')): retu
-0002cf10: 726e 2046 616c 7365 0a20 2020 2073 6f75  rn False.    sou
-0002cf20: 7263 653d 5370 6c69 7428 7372 632c 6e65  rce=Split(src,ne
-0002cf30: 775f 6c69 6e65 290a 2020 2020 2320 7377  w_line).    # sw
-0002cf40: 6170 2068 6561 645f 6c65 6e20 616e 6420  ap head_len and 
-0002cf50: 626f 6479 5f6c 656e 2077 6865 6e20 6865  body_len when he
-0002cf60: 6164 5f6c 656e 2069 7320 4e6f 6e65 0a20  ad_len is None. 
-0002cf70: 2020 2069 6620 4973 4e6f 6e65 2868 6561     if IsNone(hea
-0002cf80: 645f 6c65 6e29 2061 6e64 2069 7369 6e73  d_len) and isins
-0002cf90: 7461 6e63 6528 626f 6479 5f6c 656e 2c69  tance(body_len,i
-0002cfa0: 6e74 293a 0a20 2020 2020 2020 2068 6561  nt):.        hea
-0002cfb0: 645f 6c65 6e3d 626f 6479 5f6c 656e 0a20  d_len=body_len. 
-0002cfc0: 2020 2020 2020 2062 6f64 795f 6c65 6e3d         body_len=
-0002cfd0: 4e6f 6e65 0a0a 2020 2020 6966 206e 6f74  None..    if not
-0002cfe0: 2069 7369 6e73 7461 6e63 6528 6865 6164   isinstance(head
-0002cff0: 5f6c 656e 2c69 6e74 2920 6f72 2068 6561  _len,int) or hea
-0002d000: 645f 6c65 6e20 3e3d 206c 656e 2873 7263  d_len >= len(src
-0002d010: 293a 0a20 2020 2020 2020 6966 2073 7263  ):.       if src
-0002d020: 2061 6e64 206f 7574 2069 6e20 5b27 7374   and out in ['st
-0002d030: 7227 2c73 7472 2c27 7374 7269 6e67 275d  r',str,'string']
-0002d040: 3a20 7265 7475 726e 2073 7263 0a20 2020  : return src.   
-0002d050: 2020 2020 7265 7475 726e 2073 6f75 7263      return sourc
-0002d060: 6520 2320 7370 6c69 7420 7769 7468 206e  e # split with n
-0002d070: 6577 206c 696e 650a 0a20 2020 2072 743d  ew line..    rt=
-0002d080: 5b5d 0a20 2020 2069 6620 6973 696e 7374  [].    if isinst
-0002d090: 616e 6365 2866 726f 6e74 5f73 7061 6365  ance(front_space
-0002d0a0: 2c62 6f6f 6c29 3a0a 2020 2020 2020 2020  ,bool):.        
-0002d0b0: 6672 6f6e 745f 7370 6163 653d 3020 6966  front_space=0 if
-0002d0c0: 2066 726f 6e74 5f73 7061 6365 2069 7320   front_space is 
-0002d0d0: 5472 7565 2065 6c73 6520 4e6f 6e65 0a20  True else None. 
-0002d0e0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-0002d0f0: 6365 2866 726f 6e74 5f73 7061 6365 2c69  ce(front_space,i
-0002d100: 6e74 293a 0a20 2020 2020 2020 2066 726f  nt):.        fro
-0002d110: 6e74 5f73 7061 6365 3d53 7061 6365 2866  nt_space=Space(f
-0002d120: 726f 6e74 5f73 7061 6365 290a 2020 2020  ront_space).    
-0002d130: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
-0002d140: 6528 6672 6f6e 745f 7370 6163 652c 7374  e(front_space,st
-0002d150: 7229 2061 6e64 2066 726f 6e74 5f73 7061  r) and front_spa
-0002d160: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
-0002d170: 2020 2020 2020 2020 6672 6f6e 745f 7370          front_sp
-0002d180: 6163 653d 4e6f 6e65 0a20 2020 2066 726f  ace=None.    fro
-0002d190: 6e74 5f73 7061 6365 5f68 6561 643d 6672  nt_space_head=fr
-0002d1a0: 6f6e 745f 7370 6163 650a 2020 2020 6672  ont_space.    fr
-0002d1b0: 6f6e 745f 7370 6163 655f 626f 6479 3d66  ont_space_body=f
-0002d1c0: 726f 6e74 5f73 7061 6365 0a20 2020 2069  ront_space.    i
-0002d1d0: 6620 6672 6f6e 745f 7370 6163 6520 6973  f front_space is
-0002d1e0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0002d1f0: 2020 2069 6620 6865 6164 5f6c 656e 2061     if head_len a
-0002d200: 6e64 2062 6f64 795f 6c65 6e3a 0a20 2020  nd body_len:.   
-0002d210: 2020 2020 2020 2020 2069 6620 6865 6164           if head
-0002d220: 5f6c 656e 203e 2062 6f64 795f 6c65 6e3a  _len > body_len:
-0002d230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d240: 2066 726f 6e74 5f73 7061 6365 5f62 6f64   front_space_bod
-0002d250: 793d 5370 6163 6528 6c65 6e28 6672 6f6e  y=Space(len(fron
-0002d260: 745f 7370 6163 6529 2b28 6865 6164 5f6c  t_space)+(head_l
-0002d270: 656e 2d62 6f64 795f 6c65 6e29 290a 2020  en-body_len)).  
-0002d280: 2020 2020 2020 2020 2020 656c 6966 2068            elif h
-0002d290: 6561 645f 6c65 6e20 3c20 626f 6479 5f6c  ead_len < body_l
-0002d2a0: 656e 3a0a 2020 2020 2020 2020 2020 2020  en:.            
-0002d2b0: 2020 2020 6672 6f6e 745f 7370 6163 655f      front_space_
-0002d2c0: 6865 6164 3d53 7061 6365 286c 656e 2866  head=Space(len(f
-0002d2d0: 726f 6e74 5f73 7061 6365 292b 2862 6f64  ront_space)+(bod
-0002d2e0: 795f 6c65 6e2d 6865 6164 5f6c 656e 2929  y_len-head_len))
-0002d2f0: 0a20 2020 205f 7479 7065 3d74 7970 6528  .    _type=type(
-0002d300: 7372 6329 0a20 2020 2066 6f72 2073 7263  src).    for src
-0002d310: 5f69 6478 2069 6e20 7261 6e67 6528 302c  _idx in range(0,
-0002d320: 6c65 6e28 736f 7572 6365 2929 3a0a 2020  len(source)):.  
-0002d330: 2020 2020 2020 7374 725f 6c65 6e3d 6c65        str_len=le
-0002d340: 6e28 736f 7572 6365 5b73 7263 5f69 6478  n(source[src_idx
-0002d350: 5d29 0a20 2020 2020 2020 2069 6620 6865  ]).        if he
-0002d360: 6164 5f6c 656e 203d 3d20 303a 2068 6561  ad_len == 0: hea
-0002d370: 645f 6c65 6e3d 7374 725f 6c65 6e0a 2020  d_len=str_len.  
-0002d380: 2020 2020 2020 6966 2049 734e 6f6e 6528        if IsNone(
-0002d390: 626f 6479 5f6c 656e 293a 0a20 2020 2020  body_len):.     
-0002d3a0: 2020 2020 2020 2072 743d 7274 2b5b 4d65         rt=rt+[Me
-0002d3b0: 7267 6553 7472 2866 726f 6e74 5f73 7061  rgeStr(front_spa
-0002d3c0: 6365 2c73 6f75 7263 655b 7372 635f 6964  ce,source[src_id
-0002d3d0: 785d 5b69 3a69 202b 2068 6561 645f 6c65  x][i:i + head_le
-0002d3e0: 6e5d 2c5f 7479 7065 3d5f 7479 7065 2920  n],_type=_type) 
-0002d3f0: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
-0002d400: 2c20 7374 725f 6c65 6e2c 2068 6561 645f  , str_len, head_
-0002d410: 6c65 6e29 5d0a 2020 2020 2020 2020 656c  len)].        el
-0002d420: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002d430: 6966 2073 7263 5f69 6478 203d 3d20 3020  if src_idx == 0 
-0002d440: 6f72 206e 6577 6c69 6e65 5f68 6561 6420  or newline_head 
-0002d450: 6973 2054 7275 653a 0a20 2020 2020 2020  is True:.       
-0002d460: 2020 2020 2020 2020 2072 742e 6170 7065           rt.appe
-0002d470: 6e64 284d 6572 6765 5374 7228 6672 6f6e  nd(MergeStr(fron
-0002d480: 745f 7370 6163 655f 6865 6164 2c73 6f75  t_space_head,sou
-0002d490: 7263 655b 7372 635f 6964 785d 5b30 3a68  rce[src_idx][0:h
-0002d4a0: 6561 645f 6c65 6e5d 2c5f 7479 7065 3d5f  ead_len],_type=_
-0002d4b0: 7479 7065 2929 2023 2054 616b 6520 6865  type)) # Take he
-0002d4c0: 6164 0a20 2020 2020 2020 2020 2020 2020  ad.             
-0002d4d0: 2020 2069 6620 7374 725f 6c65 6e20 3e20     if str_len > 
-0002d4e0: 6865 6164 5f6c 656e 3a0a 2020 2020 2020  head_len:.      
-0002d4f0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-0002d500: 3d72 742b 5b4d 6572 6765 5374 7228 6672  =rt+[MergeStr(fr
-0002d510: 6f6e 745f 7370 6163 655f 626f 6479 2c73  ont_space_body,s
-0002d520: 6f75 7263 655b 7372 635f 6964 785d 5b68  ource[src_idx][h
-0002d530: 6561 645f 6c65 6e3a 5d5b 693a 6920 2b20  ead_len:][i:i + 
-0002d540: 626f 6479 5f6c 656e 5d2c 5f74 7970 653d  body_len],_type=
-0002d550: 5f74 7970 6529 2066 6f72 2069 2069 6e20  _type) for i in 
-0002d560: 7261 6e67 6528 302c 2073 7472 5f6c 656e  range(0, str_len
-0002d570: 2d68 6561 645f 6c65 6e2c 2062 6f64 795f  -head_len, body_
-0002d580: 6c65 6e29 5d0a 2020 2020 2020 2020 2020  len)].          
-0002d590: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0002d5a0: 2020 2020 2020 2020 7274 3d72 742b 5b4d          rt=rt+[M
-0002d5b0: 6572 6765 5374 7228 6672 6f6e 745f 7370  ergeStr(front_sp
-0002d5c0: 6163 655f 626f 6479 2c73 6f75 7263 655b  ace_body,source[
-0002d5d0: 7372 635f 6964 785d 5b69 3a69 202b 2062  src_idx][i:i + b
-0002d5e0: 6f64 795f 6c65 6e5d 2c5f 7479 7065 3d5f  ody_len],_type=_
-0002d5f0: 7479 7065 2920 666f 7220 6920 696e 2072  type) for i in r
-0002d600: 616e 6765 2830 2c20 7374 725f 6c65 6e2c  ange(0, str_len,
-0002d610: 2062 6f64 795f 6c65 6e29 5d0a 2020 2020   body_len)].    
-0002d620: 6966 206f 7574 2069 6e20 5b27 7374 7227  if out in ['str'
-0002d630: 2c73 7472 2c27 7374 7269 6e67 275d 3a0a  ,str,'string']:.
-0002d640: 2020 2020 2020 2020 6966 2072 743a 2072          if rt: r
-0002d650: 6574 7572 6e20 4a6f 696e 2872 742c 7379  eturn Join(rt,sy
-0002d660: 6d62 6f6c 3d6e 6577 5f6c 696e 6529 0a20  mbol=new_line). 
-0002d670: 2020 2020 2020 2072 6574 7572 6e20 2727         return ''
-0002d680: 0a20 2020 2072 6574 7572 6e20 7274 0a0a  .    return rt..
-0002d690: 6465 6620 5370 6163 6528 6e75 6d3d 342c  def Space(num=4,
-0002d6a0: 6669 6c6c 3d4e 6f6e 652c 6d6f 6465 3d27  fill=None,mode='
-0002d6b0: 7370 6163 6527 2c74 6170 3d27 2729 3a0a  space',tap=''):.
-0002d6c0: 2020 2020 2727 270a 2020 2020 6d61 6b65      '''.    make
-0002d6d0: 2061 2063 6861 7261 6374 6f72 2873 7061   a charactor(spa
-0002d6e0: 6365 2c20 7461 7029 2067 726f 7570 0a20  ce, tap) group. 
-0002d6f0: 2020 206e 756d 3a20 6465 6661 756c 7420     num: default 
-0002d700: 342c 2068 6f77 206d 616e 7920 6669 6c6c  4, how many fill
-0002d710: 206f 7574 203c 6669 6c6c 3e0a 2020 2020   out <fill>.    
-0002d720: 6d6f 6465 3a0a 2020 2020 2020 7370 6163  mode:.      spac
-0002d730: 6520 3a20 6465 6661 756c 743a 2027 2027  e : default: ' '
-0002d740: 0a20 2020 2020 2074 6170 2020 203a 205c  .      tap   : \
-0002d750: 5c74 0a20 2020 2066 696c 6c3a 0a20 2020  \t.    fill:.   
-0002d760: 2020 204e 6f6e 6520 3a20 6465 6661 756c     None : defaul
-0002d770: 743a 2066 6f6c 6c6f 7769 6e67 206d 6f64  t: following mod
-0002d780: 6520 696e 666f 726d 6174 696f 6e0a 2020  e information.  
-0002d790: 2020 2020 3c73 7065 6369 616c 2063 6861      <special cha
-0002d7a0: 7261 6374 6f72 3e20 3a20 6669 6c6c 206f  ractor> : fill o
-0002d7b0: 7574 2074 6865 2063 6861 7261 6374 6f72  ut the charactor
-0002d7c0: 0a20 2020 2074 6170 3a0a 2020 2020 2020  .    tap:.      
-0002d7d0: 2727 2020 203a 2064 6566 6175 6c74 0a20  ''   : default. 
-0002d7e0: 2020 2020 203c 7370 6369 616c 2069 6e69       <spcial ini
-0002d7f0: 7461 6c20 6368 7261 6374 6f72 3e3a 2070  tal chractor>: p
-0002d800: 7265 2d66 696c 6c6f 7574 2077 6974 6820  re-fillout with 
-0002d810: 7468 6973 2063 6872 6163 746f 720a 2020  this chractor.  
-0002d820: 2020 2727 270a 2020 2020 6d6f 6465 3d6d    '''.    mode=m
-0002d830: 6f64 652e 6c6f 7765 7228 290a 2020 2020  ode.lower().    
-0002d840: 6966 206d 6f64 6520 3d3d 2774 6170 273a  if mode =='tap':
-0002d850: 0a20 2020 2020 2020 2066 696c 6c3d 275c  .        fill='\
-0002d860: 7427 0a20 2020 2065 6c69 6620 6d6f 6465  t'.    elif mode
-0002d870: 203d 3d20 2773 7061 6365 2720 6f72 2066   == 'space' or f
-0002d880: 696c 6c20 6973 204e 6f6e 653a 0a20 2020  ill is None:.   
-0002d890: 2020 2020 2066 696c 6c3d 2720 270a 2020       fill=' '.  
-0002d8a0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-0002d8b0: 2830 2c6e 756d 293a 0a20 2020 2020 2020  (0,num):.       
-0002d8c0: 2074 6170 3d74 6170 2b66 696c 6c0a 2020   tap=tap+fill.  
-0002d8d0: 2020 7265 7475 726e 2074 6170 0a0a 6465    return tap..de
-0002d8e0: 6620 5772 6170 5374 7269 6e67 2873 7472  f WrapString(str
-0002d8f0: 696e 672c 6673 7061 6365 3d30 2c6e 7370  ing,fspace=0,nsp
-0002d900: 6163 653d 302c 6e65 775f 6c69 6e65 3d27  ace=0,new_line='
-0002d910: 5c6e 272c 666c 656e 6774 683d 302c 6e6c  \n',flength=0,nl
-0002d920: 656e 6774 683d 302c 6e74 6170 3d30 2c4e  ength=0,ntap=0,N
-0002d930: 464c 543d 4661 6c73 652c 6d6f 6465 3d27  FLT=False,mode='
-0002d940: 7370 6163 6527 2c64 6566 6175 6c74 3d27  space',default='
-0002d950: 272c 6f75 743d 2773 7472 272c 6967 6e6f  ',out='str',igno
-0002d960: 7265 5f65 6d70 7479 5f65 6e64 6c69 6e65  re_empty_endline
-0002d970: 3d54 7275 6529 3a0a 2020 2020 2373 7472  =True):.    #str
-0002d980: 696e 6720 3a20 7072 696e 7469 6e67 2064  ing : printing d
-0002d990: 6174 610a 2020 2020 2366 7370 6163 6520  ata.    #fspace 
-0002d9a0: 3a20 7072 6520 7370 6163 6528 7370 6163  : pre space(spac
-0002d9b0: 6520 6265 666f 7265 2073 7472 696e 672c  e before string,
-0002d9c0: 2062 6566 6f72 6520 6669 7273 7420 6c69   before first li
-0002d9d0: 6e65 290a 2020 2020 236e 7370 6163 6520  ne).    #nspace 
-0002d9e0: 3a20 7370 6163 6520 666f 7220 626f 6479  : space for body
-0002d9f0: 2061 7265 610a 2020 2020 236e 6577 5f6c   area.    #new_l
-0002da00: 696e 653a 206e 6577 5f6c 696e 6520 7379  ine: new_line sy
-0002da10: 6d62 6f6c 0a20 2020 2023 666c 656e 6774  mbol.    #flengt
-0002da20: 6820 3a20 6669 7273 7420 6c69 6e65 2028  h : first line (
-0002da30: 2068 6561 6420 6c69 6e65 2029 2070 7269   head line ) pri
-0002da40: 6e74 2d73 7472 696e 6720 6c65 6e67 7468  nt-string length
-0002da50: 0a20 2020 2023 6e6c 656e 6774 6820 3a20  .    #nlength : 
-0002da60: 626f 6479 2061 7265 6120 7072 696e 742d  body area print-
-0002da70: 7374 7269 6e67 206c 656e 6774 680a 2020  string length.  
-0002da80: 2020 236d 6f64 6520 2020 203a 2073 7061    #mode    : spa
-0002da90: 6365 3a20 7768 6974 6520 7370 6163 6520  ce: white space 
-0002daa0: 746f 2073 7061 6365 2061 7265 610a 2020  to space area.  
-0002dab0: 2020 236f 7574 2020 2020 203a 206f 7574    #out     : out
-0002dac0: 7075 7420 746f 2073 7472 696e 6720 6f72  put to string or
-0002dad0: 206c 6973 740a 2020 2020 236e 7461 7020   list.    #ntap 
-0002dae0: 2020 203a 206e 6f74 2075 7365 6420 2872     : not used (r
-0002daf0: 656d 6f76 6564 2070 6172 616d 6574 6572  emoved parameter
-0002db00: 290a 2020 2020 234e 464c 5420 2020 203a  ).    #NFLT    :
-0002db10: 2073 616d 6520 6173 2066 7370 6163 653d   same as fspace=
-0002db20: 300a 2020 2020 2369 676e 6f72 655f 656d  0.    #ignore_em
-0002db30: 7074 795f 656e 646c 696e 653a 2054 7275  pty_endline: Tru
-0002db40: 653a 2069 6620 656e 646c 696e 6520 6861  e: if endline ha
-0002db50: 7665 206e 6f20 6461 7461 2074 6865 6e20  ve no data then 
-0002db60: 6967 6e6f 7265 206d 616b 696e 6720 7370  ignore making sp
-0002db70: 6163 6520 666f 7220 7772 6170 2e20 2046  ace for wrap.  F
-0002db80: 616c 7365 3a20 6d61 6b69 6e67 2073 7061  alse: making spa
-0002db90: 6365 2074 6f20 7772 6170 2066 6f72 206e  ce to wrap for n
-0002dba0: 6578 7420 6174 7461 6368 696e 6720 7374  ext attaching st
-0002dbb0: 7269 6e67 0a20 2020 2069 6620 4973 4e6f  ring.    if IsNo
-0002dbc0: 6e65 2873 7472 696e 6729 3a20 7265 7475  ne(string): retu
-0002dbd0: 726e 2064 6566 6175 6c74 0a20 2020 2069  rn default.    i
-0002dbe0: 6620 6e6f 7420 5479 7065 2873 7472 696e  f not Type(strin
-0002dbf0: 672c 2773 7472 2729 3a73 7472 696e 673d  g,'str'):string=
-0002dc00: 2727 277b 7d27 2727 2e66 6f72 6d61 7428  '''{}'''.format(
-0002dc10: 7374 7269 6e67 290a 2020 2020 7263 5f73  string).    rc_s
-0002dc20: 7472 3d5b 5d0a 2020 2020 7374 7269 6e67  tr=[].    string
-0002dc30: 5f61 3d73 7472 696e 672e 7370 6c69 7428  _a=string.split(
-0002dc40: 6e65 775f 6c69 6e65 290a 2020 2020 2346  new_line).    #F
-0002dc50: 6972 7374 206c 696e 6520 6465 7369 676e  irst line design
-0002dc60: 0a20 2020 2069 6620 4e46 4c54 3a20 6673  .    if NFLT: fs
-0002dc70: 7061 6365 3d30 0a20 2020 2072 635f 7374  pace=0.    rc_st
-0002dc80: 722e 6170 7065 6e64 2853 7061 6365 2866  r.append(Space(f
-0002dc90: 7370 6163 652c 6d6f 6465 3d6d 6f64 6529  space,mode=mode)
-0002dca0: 2b4a 6f69 6e28 4375 7428 7374 7269 6e67  +Join(Cut(string
-0002dcb0: 5f61 5b30 5d2c 6865 6164 5f6c 656e 3d66  _a[0],head_len=f
-0002dcc0: 6c65 6e67 7468 2c62 6f64 795f 6c65 6e3d  length,body_len=
-0002dcd0: 6e6c 656e 6774 682c 6e65 775f 6c69 6e65  nlength,new_line
-0002dce0: 3d6e 6577 5f6c 696e 652c 6f75 743d 6c69  =new_line,out=li
-0002dcf0: 7374 292c 275c 6e27 2c61 7070 656e 645f  st),'\n',append_
-0002dd00: 6672 6f6e 743d 5370 6163 6528 6e73 7061  front=Space(nspa
-0002dd10: 6365 2c6d 6f64 653d 6d6f 6465 2929 290a  ce,mode=mode))).
-0002dd20: 2020 2020 2342 6f64 7920 6c69 6e65 2064      #Body line d
-0002dd30: 6573 6967 6e0a 2020 2020 2366 6f72 2069  esign.    #for i
-0002dd40: 6920 696e 2073 7472 696e 675f 615b 313a  i in string_a[1:
-0002dd50: 5d3a 0a20 2020 206d 783d 6c65 6e28 7374  ]:.    mx=len(st
-0002dd60: 7269 6e67 5f61 292d 310a 2020 2020 666f  ring_a)-1.    fo
-0002dd70: 7220 6969 2069 6e20 7261 6e67 6528 312c  r ii in range(1,
-0002dd80: 6d78 2b31 293a 0a20 2020 2020 2020 2069  mx+1):.        i
-0002dd90: 6620 6967 6e6f 7265 5f65 6d70 7479 5f65  f ignore_empty_e
-0002dda0: 6e64 6c69 6e65 2069 7320 5472 7565 2061  ndline is True a
-0002ddb0: 6e64 2069 6920 3d3d 206d 7820 616e 6420  nd ii == mx and 
-0002ddc0: 6e6f 7420 7374 7269 6e67 5f61 5b69 695d  not string_a[ii]
-0002ddd0: 3a20 6272 6561 6b0a 2020 2020 2020 2020  : break.        
-0002dde0: 7263 5f73 7472 2e61 7070 656e 6428 5370  rc_str.append(Sp
-0002ddf0: 6163 6528 6e73 7061 6365 2c6d 6f64 653d  ace(nspace,mode=
-0002de00: 6d6f 6465 292b 4a6f 696e 2843 7574 2873  mode)+Join(Cut(s
-0002de10: 7472 696e 675f 615b 6969 5d2c 6865 6164  tring_a[ii],head
-0002de20: 5f6c 656e 3d6e 6c65 6e67 7468 2c6e 6577  _len=nlength,new
-0002de30: 5f6c 696e 653d 6e65 775f 6c69 6e65 2c6f  _line=new_line,o
-0002de40: 7574 3d6c 6973 7429 2c27 5c6e 272c 6170  ut=list),'\n',ap
-0002de50: 7065 6e64 5f66 726f 6e74 3d53 7061 6365  pend_front=Space
-0002de60: 286e 7370 6163 652c 6d6f 6465 3d6d 6f64  (nspace,mode=mod
-0002de70: 6529 2929 0a20 2020 2023 7265 7475 726e  e))).    #return
-0002de80: 206e 6577 5f6c 696e 652e 6a6f 696e 2872   new_line.join(r
-0002de90: 635f 7374 7229 0a20 2020 2069 6620 6f75  c_str).    if ou
-0002dea0: 7420 696e 205b 6c69 7374 2c27 6c69 7374  t in [list,'list
-0002deb0: 275d 3a20 7265 7475 726e 2072 635f 7374  ']: return rc_st
-0002dec0: 720a 2020 2020 656c 6966 206f 7574 2069  r.    elif out i
-0002ded0: 6e20 5b74 7570 6c65 2c27 7475 706c 6527  n [tuple,'tuple'
-0002dee0: 5d3a 2072 6574 7572 6e20 7475 706c 6528  ]: return tuple(
-0002def0: 7263 5f73 7472 290a 2020 2020 7265 7475  rc_str).    retu
-0002df00: 726e 204a 6f69 6e28 7263 5f73 7472 2c6e  rn Join(rc_str,n
-0002df10: 6577 5f6c 696e 6529 0a0a 6465 6620 4765  ew_line)..def Ge
-0002df20: 744b 6579 2873 7263 2c66 696e 643d 4e6f  tKey(src,find=No
-0002df30: 6e65 2c64 6566 6175 6c74 3d4e 6f6e 652c  ne,default=None,
-0002df40: 6d6f 6465 3d27 6669 7273 7427 2c72 6f6f  mode='first',roo
-0002df50: 743d 4e6f 6e65 293a 0a20 2020 2027 2727  t=None):.    '''
-0002df60: 0a20 2020 2047 6574 206b 6579 2066 726f  .    Get key fro
-0002df70: 6d20 6469 6374 2c6c 6973 742c 7475 706c  m dict,list,tupl
-0002df80: 652c 7374 720a 2020 2020 6669 6e64 203a  e,str.    find :
-0002df90: 2069 6620 6d61 7463 6865 6420 7661 6c75   if matched valu
-0002dfa0: 6520 7468 656e 2072 6574 7572 6e20 7468  e then return th
-0002dfb0: 6520 6b65 792f 696e 6465 7820 6f66 2074  e key/index of t
-0002dfc0: 6865 2064 6174 610a 2020 2020 6d6f 6465  he data.    mode
-0002dfd0: 203a 0a20 2020 2020 2066 6972 7374 203a   :.      first :
-0002dfe0: 2064 6566 6175 6c74 3a20 7265 7475 726e   default: return
-0002dff0: 2066 6972 7374 2066 696e 640a 2020 2020   first find.    
-0002e000: 2020 616c 6c20 2020 3a20 7265 7475 726e    all   : return
-0002e010: 2066 6f75 6e64 2061 6c6c 0a20 2020 2064   found all.    d
-0002e020: 6566 6175 6c74 203a 2072 6574 7572 6e20  efault : return 
-0002e030: 7768 656e 206e 6f74 2066 6f75 6e64 0a20  when not found. 
-0002e040: 2020 2027 2727 0a20 2020 2072 743d 5b5d     '''.    rt=[]
-0002e050: 0a20 2020 2069 6620 6973 696e 7374 616e  .    if isinstan
-0002e060: 6365 2873 7263 2c64 6963 7429 3a0a 2020  ce(src,dict):.  
-0002e070: 2020 2020 2020 6966 2049 734e 6f6e 6528        if IsNone(
-0002e080: 6669 6e64 293a 0a20 2020 2020 2020 2020  find):.         
-0002e090: 2020 2072 6574 7572 6e20 6c69 7374 2873     return list(s
-0002e0a0: 7263 2e6b 6579 7328 2929 0a20 2020 2020  rc.keys()).     
-0002e0b0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002e0c0: 2020 2020 2066 6f72 206b 6579 2c76 616c       for key,val
-0002e0d0: 2069 6e20 7372 632e 6974 656d 7328 293a   in src.items():
-0002e0e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002e0f0: 2069 6620 6973 696e 7374 616e 6365 2876   if isinstance(v
-0002e100: 616c 2c64 6963 7429 3a0a 2020 2020 2020  al,dict):.      
-0002e110: 2020 2020 2020 2020 2020 2020 2020 613d                a=
-0002e120: 4765 744b 6579 2876 616c 2c66 696e 642c  GetKey(val,find,
-0002e130: 6465 6661 756c 742c 6d6f 6465 2c6b 6579  default,mode,key
-0002e140: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002e150: 2020 2020 2020 6966 2061 3a0a 2020 2020        if a:.    
-0002e160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e170: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0002e180: 6528 612c 7374 7229 3a0a 2020 2020 2020  e(a,str):.      
-0002e190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e1a0: 2020 2020 2020 6966 2072 6f6f 7420 6973        if root is
-0002e1b0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0002e1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e1d0: 2020 2020 2020 2072 6574 7572 6e20 272f         return '/
-0002e1e0: 7b7d 2f7b 7d27 2e66 6f72 6d61 7428 6b65  {}/{}'.format(ke
-0002e1f0: 792c 6129 0a20 2020 2020 2020 2020 2020  y,a).           
-0002e200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e210: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0002e220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e230: 2020 2020 2020 2072 6574 7572 6e20 277b         return '{
-0002e240: 7d2f 7b7d 272e 666f 726d 6174 286b 6579  }/{}'.format(key
-0002e250: 2c61 290a 2020 2020 2020 2020 2020 2020  ,a).            
-0002e260: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0002e270: 2069 7369 6e73 7461 6e63 6528 612c 6c69   isinstance(a,li
-0002e280: 7374 293a 0a20 2020 2020 2020 2020 2020  st):.           
-0002e290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e2a0: 2066 6f72 2069 2069 6e20 613a 0a20 2020   for i in a:.   
-0002e2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e2c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002e2d0: 726f 6f74 2069 7320 4e6f 6e65 3a0a 2020  root is None:.  
-0002e2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e300: 2020 7274 2e61 7070 656e 6428 272f 7b7d    rt.append('/{}
-0002e310: 2f7b 7d27 2e66 6f72 6d61 7428 6b65 792c  /{}'.format(key,
-0002e320: 6929 290a 2020 2020 2020 2020 2020 2020  i)).            
+0002ca00: 7265 7475 726e 2027 270a 2020 2020 6966  return ''.    if
+0002ca10: 205f 7479 7065 2069 7320 4e6f 6e65 3a0a   _type is None:.
+0002ca20: 2020 2020 2020 2020 6966 2061 2069 7320          if a is 
+0002ca30: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0002ca40: 2020 7265 7475 726e 2062 0a20 2020 2020    return b.     
+0002ca50: 2020 2065 6c69 6620 6220 6973 204e 6f6e     elif b is Non
+0002ca60: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+0002ca70: 6574 7572 6e20 610a 2020 2020 2020 2020  eturn a.        
+0002ca80: 656c 6966 2054 7970 6528 6129 203d 3d20  elif Type(a) == 
+0002ca90: 5479 7065 2862 293a 0a20 2020 2020 2020  Type(b):.       
+0002caa0: 2020 2020 2072 6574 7572 6e20 6120 2b20       return a + 
+0002cab0: 620a 2020 2020 2020 2020 656c 6966 2054  b.        elif T
+0002cac0: 7970 6528 6129 203d 3d20 2762 7974 6573  ype(a) == 'bytes
+0002cad0: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
+0002cae0: 6574 7572 6e20 2061 2b42 7974 6573 2862  eturn  a+Bytes(b
+0002caf0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+0002cb00: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0002cb10: 726e 2020 612b 5374 7228 6229 0a20 2020  rn  a+Str(b).   
+0002cb20: 2065 6c73 653a 0a20 2020 2020 2020 2069   else:.        i
+0002cb30: 6620 5f74 7970 6520 696e 205b 7374 722c  f _type in [str,
+0002cb40: 2773 7472 275d 3a0a 2020 2020 2020 2020  'str']:.        
+0002cb50: 2020 2020 6966 2061 2069 7320 4e6f 6e65      if a is None
+0002cb60: 3a20 7265 7475 726e 2053 7472 2862 290a  : return Str(b).
+0002cb70: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0002cb80: 2062 2069 7320 4e6f 6e65 3a20 7265 7475   b is None: retu
+0002cb90: 726e 2053 7472 2861 290a 2020 2020 2020  rn Str(a).      
+0002cba0: 2020 2020 2020 7265 7475 726e 2053 7472        return Str
+0002cbb0: 2861 292b 5374 7228 6229 0a20 2020 2020  (a)+Str(b).     
+0002cbc0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0002cbd0: 2020 2020 2069 6620 6120 6973 204e 6f6e       if a is Non
+0002cbe0: 653a 2072 6574 7572 6e20 4279 7465 7328  e: return Bytes(
+0002cbf0: 6229 0a20 2020 2020 2020 2020 2020 2065  b).            e
+0002cc00: 6c69 6620 6220 6973 204e 6f6e 653a 2072  lif b is None: r
+0002cc10: 6574 7572 6e20 4279 7465 7328 6129 0a20  eturn Bytes(a). 
+0002cc20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0002cc30: 6e20 4279 7465 7328 6129 2b42 7974 6573  n Bytes(a)+Bytes
+0002cc40: 2862 290a 0a64 6566 2043 7574 2873 7263  (b)..def Cut(src
+0002cc50: 2c68 6561 645f 6c65 6e3d 4e6f 6e65 2c62  ,head_len=None,b
+0002cc60: 6f64 795f 6c65 6e3d 4e6f 6e65 2c6e 6577  ody_len=None,new
+0002cc70: 5f6c 696e 653d 275c 6e27 2c6f 7574 3d73  _line='\n',out=s
+0002cc80: 7472 2c66 726f 6e74 5f73 7061 6365 3d4e  tr,front_space=N
+0002cc90: 6f6e 652c 6e65 776c 696e 655f 6865 6164  one,newline_head
+0002cca0: 3d46 616c 7365 293a 0a20 2020 2027 2727  =False):.    '''
+0002ccb0: 0a20 2020 2043 7574 2073 7472 696e 6720  .    Cut string 
+0002ccc0: 7769 7468 206c 656e 6774 680a 2020 2020  with length.    
+0002ccd0: 6865 6164 5f6c 656e 203a 2069 6e74 203a  head_len : int :
+0002cce0: 2066 6972 7374 206c 696e 6520 6c65 6e67   first line leng
+0002ccf0: 7468 2028 6465 6661 756c 7420 4e6f 6e65  th (default None
+0002cd00: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002cd10: 2069 6620 626f 6479 5f6c 656e 2069 7320   if body_len is 
+0002cd20: 4e6f 6e65 2074 6865 6e20 6576 6572 7974  None then everyt
+0002cd30: 6869 6e67 2063 7574 2073 616d 6520 6c65  hing cut same le
+0002cd40: 6e67 7468 2077 6974 6820 6865 6164 5f6c  ngth with head_l
+0002cd50: 656e 0a20 2020 2062 6f64 795f 6c65 6e20  en.    body_len 
+0002cd60: 3a20 696e 7420 3a20 6c69 6e65 206c 656e  : int : line len
+0002cd70: 6774 6820 6166 7465 7220 6865 6164 5f6c  gth after head_l
+0002cd80: 656e 2028 6465 6661 756c 7420 4e6f 6e65  en (default None
+0002cd90: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002cda0: 2077 6974 686f 7574 2068 6561 645f 6c65   without head_le
+0002cdb0: 6e28 4e6f 6e65 2920 7468 656e 2073 7761  n(None) then swa
+0002cdc0: 7020 6265 7477 6565 6e20 6865 6164 5f6c  p between head_l
+0002cdd0: 656e 2061 6e64 2062 6f64 795f 6c65 6e0a  en and body_len.
+0002cde0: 2020 2020 6e65 775f 6c69 6e65 203a 2064      new_line : d
+0002cdf0: 6566 6175 6c74 206c 696e 7578 206e 6577  efault linux new
+0002ce00: 206c 696e 650a 2020 2020 6672 6f6e 745f   line.    front_
+0002ce10: 7370 6163 653a 200a 2020 2020 2020 2020  space: .        
+0002ce20: 5472 7565 203a 2066 696c 6c20 6f75 7420  True : fill out 
+0002ce30: 7370 6163 6520 746f 2067 6170 2062 6574  space to gap bet
+0002ce40: 7765 656e 2068 6561 645f 6c65 6e20 2061  ween head_len  a
+0002ce50: 6e64 2062 6f64 795f 6c65 6e20 2873 616d  nd body_len (sam
+0002ce60: 6520 6173 2030 290a 2020 2020 2020 2020  e as 0).        
+0002ce70: 4661 6c73 652f 4e6f 6e65 203a 204e 6f20  False/None : No 
+0002ce80: 7370 6163 650a 2020 2020 2020 2020 2320  space.        # 
+0002ce90: 2020 203a 2066 696c 6c20 6f75 7420 7370     : fill out sp
+0002cea0: 6163 6520 6f66 2023 2061 7420 6672 6f6e  ace of # at fron
+0002ceb0: 7420 6f66 2061 6c6c 2073 7472 696e 6773  t of all strings
+0002cec0: 2028 6865 6164 2061 6e64 2062 6f64 7929   (head and body)
+0002ced0: 0a20 2020 2020 2020 2027 2020 2720 3a20  .        '  ' : 
+0002cee0: 7361 6d65 2061 7320 6e75 6d62 6572 2823  same as number(#
+0002cef0: 290a 2020 2020 6e65 776c 696e 655f 6865  ).    newline_he
+0002cf00: 6164 3a0a 2020 2020 2020 2020 5472 7565  ad:.        True
+0002cf10: 203a 2065 6163 6820 6669 7273 7420 6c69   : each first li
+0002cf20: 6e65 2068 6173 2068 6561 6420 636f 6e64  ne has head cond
+0002cf30: 6974 696f 6e0a 2020 2020 2020 2020 4661  ition.        Fa
+0002cf40: 6c73 653a 2066 6972 7374 206c 696e 6520  lse: first line 
+0002cf50: 6861 7320 6865 6164 2063 6f6e 6469 7469  has head conditi
+0002cf60: 6f6e 206f 6620 656e 7469 7265 2073 6f75  on of entire sou
+0002cf70: 7263 6520 2873 7263 290a 2020 2020 6f75  rce (src).    ou
+0002cf80: 743d 0a20 2020 2020 2020 2073 7472 2020  t=.        str  
+0002cf90: 3a20 6f75 7470 7574 2074 6f20 7374 7269  : output to stri
+0002cfa0: 6e67 2077 6974 6820 6e65 775f 6c69 6e65  ng with new_line
+0002cfb0: 2028 6465 6661 756c 7429 0a20 2020 2020   (default).     
+0002cfc0: 2020 206c 6973 7420 3a20 6f75 7470 7574     list : output
+0002cfd0: 2074 6f20 6c69 7374 2069 6e73 7465 6164   to list instead
+0002cfe0: 206e 6577 5f6c 696e 650a 2020 2020 2727   new_line.    ''
+0002cff0: 270a 2020 2020 6966 206e 6f74 2054 7970  '.    if not Typ
+0002d000: 6528 7372 632c 2827 7374 7227 2c27 6279  e(src,('str','by
+0002d010: 7465 7327 2929 3a20 7265 7475 726e 2046  tes')): return F
+0002d020: 616c 7365 0a20 2020 2073 6f75 7263 653d  alse.    source=
+0002d030: 5370 6c69 7428 7372 632c 6e65 775f 6c69  Split(src,new_li
+0002d040: 6e65 290a 2020 2020 2320 7377 6170 2068  ne).    # swap h
+0002d050: 6561 645f 6c65 6e20 616e 6420 626f 6479  ead_len and body
+0002d060: 5f6c 656e 2077 6865 6e20 6865 6164 5f6c  _len when head_l
+0002d070: 656e 2069 7320 4e6f 6e65 0a20 2020 2069  en is None.    i
+0002d080: 6620 4973 4e6f 6e65 2868 6561 645f 6c65  f IsNone(head_le
+0002d090: 6e29 2061 6e64 2069 7369 6e73 7461 6e63  n) and isinstanc
+0002d0a0: 6528 626f 6479 5f6c 656e 2c69 6e74 293a  e(body_len,int):
+0002d0b0: 0a20 2020 2020 2020 2068 6561 645f 6c65  .        head_le
+0002d0c0: 6e3d 626f 6479 5f6c 656e 0a20 2020 2020  n=body_len.     
+0002d0d0: 2020 2062 6f64 795f 6c65 6e3d 4e6f 6e65     body_len=None
+0002d0e0: 0a0a 2020 2020 6966 206e 6f74 2069 7369  ..    if not isi
+0002d0f0: 6e73 7461 6e63 6528 6865 6164 5f6c 656e  nstance(head_len
+0002d100: 2c69 6e74 2920 6f72 2068 6561 645f 6c65  ,int) or head_le
+0002d110: 6e20 3e3d 206c 656e 2873 7263 293a 0a20  n >= len(src):. 
+0002d120: 2020 2020 2020 6966 2073 7263 2061 6e64        if src and
+0002d130: 206f 7574 2069 6e20 5b27 7374 7227 2c73   out in ['str',s
+0002d140: 7472 2c27 7374 7269 6e67 275d 3a20 7265  tr,'string']: re
+0002d150: 7475 726e 2073 7263 0a20 2020 2020 2020  turn src.       
+0002d160: 7265 7475 726e 2073 6f75 7263 6520 2320  return source # 
+0002d170: 7370 6c69 7420 7769 7468 206e 6577 206c  split with new l
+0002d180: 696e 650a 0a20 2020 2072 743d 5b5d 0a20  ine..    rt=[]. 
+0002d190: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0002d1a0: 2866 726f 6e74 5f73 7061 6365 2c62 6f6f  (front_space,boo
+0002d1b0: 6c29 3a0a 2020 2020 2020 2020 6672 6f6e  l):.        fron
+0002d1c0: 745f 7370 6163 653d 3020 6966 2066 726f  t_space=0 if fro
+0002d1d0: 6e74 5f73 7061 6365 2069 7320 5472 7565  nt_space is True
+0002d1e0: 2065 6c73 6520 4e6f 6e65 0a20 2020 2065   else None.    e
+0002d1f0: 6c69 6620 6973 696e 7374 616e 6365 2866  lif isinstance(f
+0002d200: 726f 6e74 5f73 7061 6365 2c69 6e74 293a  ront_space,int):
+0002d210: 0a20 2020 2020 2020 2066 726f 6e74 5f73  .        front_s
+0002d220: 7061 6365 3d53 7061 6365 2866 726f 6e74  pace=Space(front
+0002d230: 5f73 7061 6365 290a 2020 2020 6966 206e  _space).    if n
+0002d240: 6f74 2069 7369 6e73 7461 6e63 6528 6672  ot isinstance(fr
+0002d250: 6f6e 745f 7370 6163 652c 7374 7229 2061  ont_space,str) a
+0002d260: 6e64 2066 726f 6e74 5f73 7061 6365 2069  nd front_space i
+0002d270: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0002d280: 2020 2020 6672 6f6e 745f 7370 6163 653d      front_space=
+0002d290: 4e6f 6e65 0a20 2020 2066 726f 6e74 5f73  None.    front_s
+0002d2a0: 7061 6365 5f68 6561 643d 6672 6f6e 745f  pace_head=front_
+0002d2b0: 7370 6163 650a 2020 2020 6672 6f6e 745f  space.    front_
+0002d2c0: 7370 6163 655f 626f 6479 3d66 726f 6e74  space_body=front
+0002d2d0: 5f73 7061 6365 0a20 2020 2069 6620 6672  _space.    if fr
+0002d2e0: 6f6e 745f 7370 6163 6520 6973 206e 6f74  ont_space is not
+0002d2f0: 204e 6f6e 653a 0a20 2020 2020 2020 2069   None:.        i
+0002d300: 6620 6865 6164 5f6c 656e 2061 6e64 2062  f head_len and b
+0002d310: 6f64 795f 6c65 6e3a 0a20 2020 2020 2020  ody_len:.       
+0002d320: 2020 2020 2069 6620 6865 6164 5f6c 656e       if head_len
+0002d330: 203e 2062 6f64 795f 6c65 6e3a 0a20 2020   > body_len:.   
+0002d340: 2020 2020 2020 2020 2020 2020 2066 726f               fro
+0002d350: 6e74 5f73 7061 6365 5f62 6f64 793d 5370  nt_space_body=Sp
+0002d360: 6163 6528 6c65 6e28 6672 6f6e 745f 7370  ace(len(front_sp
+0002d370: 6163 6529 2b28 6865 6164 5f6c 656e 2d62  ace)+(head_len-b
+0002d380: 6f64 795f 6c65 6e29 290a 2020 2020 2020  ody_len)).      
+0002d390: 2020 2020 2020 656c 6966 2068 6561 645f        elif head_
+0002d3a0: 6c65 6e20 3c20 626f 6479 5f6c 656e 3a0a  len < body_len:.
+0002d3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d3c0: 6672 6f6e 745f 7370 6163 655f 6865 6164  front_space_head
+0002d3d0: 3d53 7061 6365 286c 656e 2866 726f 6e74  =Space(len(front
+0002d3e0: 5f73 7061 6365 292b 2862 6f64 795f 6c65  _space)+(body_le
+0002d3f0: 6e2d 6865 6164 5f6c 656e 2929 0a20 2020  n-head_len)).   
+0002d400: 205f 7479 7065 3d74 7970 6528 7372 6329   _type=type(src)
+0002d410: 0a20 2020 2066 6f72 2073 7263 5f69 6478  .    for src_idx
+0002d420: 2069 6e20 7261 6e67 6528 302c 6c65 6e28   in range(0,len(
+0002d430: 736f 7572 6365 2929 3a0a 2020 2020 2020  source)):.      
+0002d440: 2020 7374 725f 6c65 6e3d 6c65 6e28 736f    str_len=len(so
+0002d450: 7572 6365 5b73 7263 5f69 6478 5d29 0a20  urce[src_idx]). 
+0002d460: 2020 2020 2020 2069 6620 6865 6164 5f6c         if head_l
+0002d470: 656e 203d 3d20 303a 2068 6561 645f 6c65  en == 0: head_le
+0002d480: 6e3d 7374 725f 6c65 6e0a 2020 2020 2020  n=str_len.      
+0002d490: 2020 6966 2049 734e 6f6e 6528 626f 6479    if IsNone(body
+0002d4a0: 5f6c 656e 293a 0a20 2020 2020 2020 2020  _len):.         
+0002d4b0: 2020 2072 743d 7274 2b5b 4d65 7267 6553     rt=rt+[MergeS
+0002d4c0: 7472 2866 726f 6e74 5f73 7061 6365 2c73  tr(front_space,s
+0002d4d0: 6f75 7263 655b 7372 635f 6964 785d 5b69  ource[src_idx][i
+0002d4e0: 3a69 202b 2068 6561 645f 6c65 6e5d 2c5f  :i + head_len],_
+0002d4f0: 7479 7065 3d5f 7479 7065 2920 666f 7220  type=_type) for 
+0002d500: 6920 696e 2072 616e 6765 2830 2c20 7374  i in range(0, st
+0002d510: 725f 6c65 6e2c 2068 6561 645f 6c65 6e29  r_len, head_len)
+0002d520: 5d0a 2020 2020 2020 2020 656c 7365 3a0a  ].        else:.
+0002d530: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0002d540: 7263 5f69 6478 203d 3d20 3020 6f72 206e  rc_idx == 0 or n
+0002d550: 6577 6c69 6e65 5f68 6561 6420 6973 2054  ewline_head is T
+0002d560: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
+0002d570: 2020 2020 2072 742e 6170 7065 6e64 284d       rt.append(M
+0002d580: 6572 6765 5374 7228 6672 6f6e 745f 7370  ergeStr(front_sp
+0002d590: 6163 655f 6865 6164 2c73 6f75 7263 655b  ace_head,source[
+0002d5a0: 7372 635f 6964 785d 5b30 3a68 6561 645f  src_idx][0:head_
+0002d5b0: 6c65 6e5d 2c5f 7479 7065 3d5f 7479 7065  len],_type=_type
+0002d5c0: 2929 2023 2054 616b 6520 6865 6164 0a20  )) # Take head. 
+0002d5d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002d5e0: 6620 7374 725f 6c65 6e20 3e20 6865 6164  f str_len > head
+0002d5f0: 5f6c 656e 3a0a 2020 2020 2020 2020 2020  _len:.          
+0002d600: 2020 2020 2020 2020 2020 7274 3d72 742b            rt=rt+
+0002d610: 5b4d 6572 6765 5374 7228 6672 6f6e 745f  [MergeStr(front_
+0002d620: 7370 6163 655f 626f 6479 2c73 6f75 7263  space_body,sourc
+0002d630: 655b 7372 635f 6964 785d 5b68 6561 645f  e[src_idx][head_
+0002d640: 6c65 6e3a 5d5b 693a 6920 2b20 626f 6479  len:][i:i + body
+0002d650: 5f6c 656e 5d2c 5f74 7970 653d 5f74 7970  _len],_type=_typ
+0002d660: 6529 2066 6f72 2069 2069 6e20 7261 6e67  e) for i in rang
+0002d670: 6528 302c 2073 7472 5f6c 656e 2d68 6561  e(0, str_len-hea
+0002d680: 645f 6c65 6e2c 2062 6f64 795f 6c65 6e29  d_len, body_len)
+0002d690: 5d0a 2020 2020 2020 2020 2020 2020 656c  ].            el
+0002d6a0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0002d6b0: 2020 2020 7274 3d72 742b 5b4d 6572 6765      rt=rt+[Merge
+0002d6c0: 5374 7228 6672 6f6e 745f 7370 6163 655f  Str(front_space_
+0002d6d0: 626f 6479 2c73 6f75 7263 655b 7372 635f  body,source[src_
+0002d6e0: 6964 785d 5b69 3a69 202b 2062 6f64 795f  idx][i:i + body_
+0002d6f0: 6c65 6e5d 2c5f 7479 7065 3d5f 7479 7065  len],_type=_type
+0002d700: 2920 666f 7220 6920 696e 2072 616e 6765  ) for i in range
+0002d710: 2830 2c20 7374 725f 6c65 6e2c 2062 6f64  (0, str_len, bod
+0002d720: 795f 6c65 6e29 5d0a 2020 2020 6966 206f  y_len)].    if o
+0002d730: 7574 2069 6e20 5b27 7374 7227 2c73 7472  ut in ['str',str
+0002d740: 2c27 7374 7269 6e67 275d 3a0a 2020 2020  ,'string']:.    
+0002d750: 2020 2020 6966 2072 743a 2072 6574 7572      if rt: retur
+0002d760: 6e20 4a6f 696e 2872 742c 7379 6d62 6f6c  n Join(rt,symbol
+0002d770: 3d6e 6577 5f6c 696e 6529 0a20 2020 2020  =new_line).     
+0002d780: 2020 2072 6574 7572 6e20 2727 0a20 2020     return ''.   
+0002d790: 2072 6574 7572 6e20 7274 0a0a 6465 6620   return rt..def 
+0002d7a0: 5370 6163 6528 6e75 6d3d 342c 6669 6c6c  Space(num=4,fill
+0002d7b0: 3d4e 6f6e 652c 6d6f 6465 3d27 7370 6163  =None,mode='spac
+0002d7c0: 6527 2c74 6170 3d27 2729 3a0a 2020 2020  e',tap=''):.    
+0002d7d0: 2727 270a 2020 2020 6d61 6b65 2061 2063  '''.    make a c
+0002d7e0: 6861 7261 6374 6f72 2873 7061 6365 2c20  haractor(space, 
+0002d7f0: 7461 7029 2067 726f 7570 0a20 2020 206e  tap) group.    n
+0002d800: 756d 3a20 6465 6661 756c 7420 342c 2068  um: default 4, h
+0002d810: 6f77 206d 616e 7920 6669 6c6c 206f 7574  ow many fill out
+0002d820: 203c 6669 6c6c 3e0a 2020 2020 6d6f 6465   <fill>.    mode
+0002d830: 3a0a 2020 2020 2020 7370 6163 6520 3a20  :.      space : 
+0002d840: 6465 6661 756c 743a 2027 2027 0a20 2020  default: ' '.   
+0002d850: 2020 2074 6170 2020 203a 205c 5c74 0a20     tap   : \\t. 
+0002d860: 2020 2066 696c 6c3a 0a20 2020 2020 204e     fill:.      N
+0002d870: 6f6e 6520 3a20 6465 6661 756c 743a 2066  one : default: f
+0002d880: 6f6c 6c6f 7769 6e67 206d 6f64 6520 696e  ollowing mode in
+0002d890: 666f 726d 6174 696f 6e0a 2020 2020 2020  formation.      
+0002d8a0: 3c73 7065 6369 616c 2063 6861 7261 6374  <special charact
+0002d8b0: 6f72 3e20 3a20 6669 6c6c 206f 7574 2074  or> : fill out t
+0002d8c0: 6865 2063 6861 7261 6374 6f72 0a20 2020  he charactor.   
+0002d8d0: 2074 6170 3a0a 2020 2020 2020 2727 2020   tap:.      ''  
+0002d8e0: 203a 2064 6566 6175 6c74 0a20 2020 2020   : default.     
+0002d8f0: 203c 7370 6369 616c 2069 6e69 7461 6c20   <spcial inital 
+0002d900: 6368 7261 6374 6f72 3e3a 2070 7265 2d66  chractor>: pre-f
+0002d910: 696c 6c6f 7574 2077 6974 6820 7468 6973  illout with this
+0002d920: 2063 6872 6163 746f 720a 2020 2020 2727   chractor.    ''
+0002d930: 270a 2020 2020 6d6f 6465 3d6d 6f64 652e  '.    mode=mode.
+0002d940: 6c6f 7765 7228 290a 2020 2020 6966 206d  lower().    if m
+0002d950: 6f64 6520 3d3d 2774 6170 273a 0a20 2020  ode =='tap':.   
+0002d960: 2020 2020 2066 696c 6c3d 275c 7427 0a20       fill='\t'. 
+0002d970: 2020 2065 6c69 6620 6d6f 6465 203d 3d20     elif mode == 
+0002d980: 2773 7061 6365 2720 6f72 2066 696c 6c20  'space' or fill 
+0002d990: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+0002d9a0: 2066 696c 6c3d 2720 270a 2020 2020 666f   fill=' '.    fo
+0002d9b0: 7220 6920 696e 2072 616e 6765 2830 2c6e  r i in range(0,n
+0002d9c0: 756d 293a 0a20 2020 2020 2020 2074 6170  um):.        tap
+0002d9d0: 3d74 6170 2b66 696c 6c0a 2020 2020 7265  =tap+fill.    re
+0002d9e0: 7475 726e 2074 6170 0a0a 6465 6620 5772  turn tap..def Wr
+0002d9f0: 6170 5374 7269 6e67 2873 7472 696e 672c  apString(string,
+0002da00: 6673 7061 6365 3d30 2c6e 7370 6163 653d  fspace=0,nspace=
+0002da10: 302c 6e65 775f 6c69 6e65 3d27 5c6e 272c  0,new_line='\n',
+0002da20: 666c 656e 6774 683d 302c 6e6c 656e 6774  flength=0,nlengt
+0002da30: 683d 302c 6e74 6170 3d30 2c4e 464c 543d  h=0,ntap=0,NFLT=
+0002da40: 4661 6c73 652c 6d6f 6465 3d27 7370 6163  False,mode='spac
+0002da50: 6527 2c64 6566 6175 6c74 3d27 272c 6f75  e',default='',ou
+0002da60: 743d 2773 7472 272c 6967 6e6f 7265 5f65  t='str',ignore_e
+0002da70: 6d70 7479 5f65 6e64 6c69 6e65 3d54 7275  mpty_endline=Tru
+0002da80: 6529 3a0a 2020 2020 2373 7472 696e 6720  e):.    #string 
+0002da90: 3a20 7072 696e 7469 6e67 2064 6174 610a  : printing data.
+0002daa0: 2020 2020 2366 7370 6163 6520 3a20 7072      #fspace : pr
+0002dab0: 6520 7370 6163 6528 7370 6163 6520 6265  e space(space be
+0002dac0: 666f 7265 2073 7472 696e 672c 2062 6566  fore string, bef
+0002dad0: 6f72 6520 6669 7273 7420 6c69 6e65 290a  ore first line).
+0002dae0: 2020 2020 236e 7370 6163 6520 3a20 7370      #nspace : sp
+0002daf0: 6163 6520 666f 7220 626f 6479 2061 7265  ace for body are
+0002db00: 610a 2020 2020 236e 6577 5f6c 696e 653a  a.    #new_line:
+0002db10: 206e 6577 5f6c 696e 6520 7379 6d62 6f6c   new_line symbol
+0002db20: 0a20 2020 2023 666c 656e 6774 6820 3a20  .    #flength : 
+0002db30: 6669 7273 7420 6c69 6e65 2028 2068 6561  first line ( hea
+0002db40: 6420 6c69 6e65 2029 2070 7269 6e74 2d73  d line ) print-s
+0002db50: 7472 696e 6720 6c65 6e67 7468 0a20 2020  tring length.   
+0002db60: 2023 6e6c 656e 6774 6820 3a20 626f 6479   #nlength : body
+0002db70: 2061 7265 6120 7072 696e 742d 7374 7269   area print-stri
+0002db80: 6e67 206c 656e 6774 680a 2020 2020 236d  ng length.    #m
+0002db90: 6f64 6520 2020 203a 2073 7061 6365 3a20  ode    : space: 
+0002dba0: 7768 6974 6520 7370 6163 6520 746f 2073  white space to s
+0002dbb0: 7061 6365 2061 7265 610a 2020 2020 236f  pace area.    #o
+0002dbc0: 7574 2020 2020 203a 206f 7574 7075 7420  ut     : output 
+0002dbd0: 746f 2073 7472 696e 6720 6f72 206c 6973  to string or lis
+0002dbe0: 740a 2020 2020 236e 7461 7020 2020 203a  t.    #ntap    :
+0002dbf0: 206e 6f74 2075 7365 6420 2872 656d 6f76   not used (remov
+0002dc00: 6564 2070 6172 616d 6574 6572 290a 2020  ed parameter).  
+0002dc10: 2020 234e 464c 5420 2020 203a 2073 616d    #NFLT    : sam
+0002dc20: 6520 6173 2066 7370 6163 653d 300a 2020  e as fspace=0.  
+0002dc30: 2020 2369 676e 6f72 655f 656d 7074 795f    #ignore_empty_
+0002dc40: 656e 646c 696e 653a 2054 7275 653a 2069  endline: True: i
+0002dc50: 6620 656e 646c 696e 6520 6861 7665 206e  f endline have n
+0002dc60: 6f20 6461 7461 2074 6865 6e20 6967 6e6f  o data then igno
+0002dc70: 7265 206d 616b 696e 6720 7370 6163 6520  re making space 
+0002dc80: 666f 7220 7772 6170 2e20 2046 616c 7365  for wrap.  False
+0002dc90: 3a20 6d61 6b69 6e67 2073 7061 6365 2074  : making space t
+0002dca0: 6f20 7772 6170 2066 6f72 206e 6578 7420  o wrap for next 
+0002dcb0: 6174 7461 6368 696e 6720 7374 7269 6e67  attaching string
+0002dcc0: 0a20 2020 2069 6620 4973 4e6f 6e65 2873  .    if IsNone(s
+0002dcd0: 7472 696e 6729 3a20 7265 7475 726e 2064  tring): return d
+0002dce0: 6566 6175 6c74 0a20 2020 2069 6620 6e6f  efault.    if no
+0002dcf0: 7420 5479 7065 2873 7472 696e 672c 2773  t Type(string,'s
+0002dd00: 7472 2729 3a73 7472 696e 673d 2727 277b  tr'):string='''{
+0002dd10: 7d27 2727 2e66 6f72 6d61 7428 7374 7269  }'''.format(stri
+0002dd20: 6e67 290a 2020 2020 7263 5f73 7472 3d5b  ng).    rc_str=[
+0002dd30: 5d0a 2020 2020 7374 7269 6e67 5f61 3d73  ].    string_a=s
+0002dd40: 7472 696e 672e 7370 6c69 7428 6e65 775f  tring.split(new_
+0002dd50: 6c69 6e65 290a 2020 2020 2346 6972 7374  line).    #First
+0002dd60: 206c 696e 6520 6465 7369 676e 0a20 2020   line design.   
+0002dd70: 2069 6620 4e46 4c54 3a20 6673 7061 6365   if NFLT: fspace
+0002dd80: 3d30 0a20 2020 2072 635f 7374 722e 6170  =0.    rc_str.ap
+0002dd90: 7065 6e64 2853 7061 6365 2866 7370 6163  pend(Space(fspac
+0002dda0: 652c 6d6f 6465 3d6d 6f64 6529 2b4a 6f69  e,mode=mode)+Joi
+0002ddb0: 6e28 4375 7428 7374 7269 6e67 5f61 5b30  n(Cut(string_a[0
+0002ddc0: 5d2c 6865 6164 5f6c 656e 3d66 6c65 6e67  ],head_len=fleng
+0002ddd0: 7468 2c62 6f64 795f 6c65 6e3d 6e6c 656e  th,body_len=nlen
+0002dde0: 6774 682c 6e65 775f 6c69 6e65 3d6e 6577  gth,new_line=new
+0002ddf0: 5f6c 696e 652c 6f75 743d 6c69 7374 292c  _line,out=list),
+0002de00: 275c 6e27 2c61 7070 656e 645f 6672 6f6e  '\n',append_fron
+0002de10: 743d 5370 6163 6528 6e73 7061 6365 2c6d  t=Space(nspace,m
+0002de20: 6f64 653d 6d6f 6465 2929 290a 2020 2020  ode=mode))).    
+0002de30: 2342 6f64 7920 6c69 6e65 2064 6573 6967  #Body line desig
+0002de40: 6e0a 2020 2020 2366 6f72 2069 6920 696e  n.    #for ii in
+0002de50: 2073 7472 696e 675f 615b 313a 5d3a 0a20   string_a[1:]:. 
+0002de60: 2020 206d 783d 6c65 6e28 7374 7269 6e67     mx=len(string
+0002de70: 5f61 292d 310a 2020 2020 666f 7220 6969  _a)-1.    for ii
+0002de80: 2069 6e20 7261 6e67 6528 312c 6d78 2b31   in range(1,mx+1
+0002de90: 293a 0a20 2020 2020 2020 2069 6620 6967  ):.        if ig
+0002dea0: 6e6f 7265 5f65 6d70 7479 5f65 6e64 6c69  nore_empty_endli
+0002deb0: 6e65 2069 7320 5472 7565 2061 6e64 2069  ne is True and i
+0002dec0: 6920 3d3d 206d 7820 616e 6420 6e6f 7420  i == mx and not 
+0002ded0: 7374 7269 6e67 5f61 5b69 695d 3a20 6272  string_a[ii]: br
+0002dee0: 6561 6b0a 2020 2020 2020 2020 7263 5f73  eak.        rc_s
+0002def0: 7472 2e61 7070 656e 6428 5370 6163 6528  tr.append(Space(
+0002df00: 6e73 7061 6365 2c6d 6f64 653d 6d6f 6465  nspace,mode=mode
+0002df10: 292b 4a6f 696e 2843 7574 2873 7472 696e  )+Join(Cut(strin
+0002df20: 675f 615b 6969 5d2c 6865 6164 5f6c 656e  g_a[ii],head_len
+0002df30: 3d6e 6c65 6e67 7468 2c6e 6577 5f6c 696e  =nlength,new_lin
+0002df40: 653d 6e65 775f 6c69 6e65 2c6f 7574 3d6c  e=new_line,out=l
+0002df50: 6973 7429 2c27 5c6e 272c 6170 7065 6e64  ist),'\n',append
+0002df60: 5f66 726f 6e74 3d53 7061 6365 286e 7370  _front=Space(nsp
+0002df70: 6163 652c 6d6f 6465 3d6d 6f64 6529 2929  ace,mode=mode)))
+0002df80: 0a20 2020 2023 7265 7475 726e 206e 6577  .    #return new
+0002df90: 5f6c 696e 652e 6a6f 696e 2872 635f 7374  _line.join(rc_st
+0002dfa0: 7229 0a20 2020 2069 6620 6f75 7420 696e  r).    if out in
+0002dfb0: 205b 6c69 7374 2c27 6c69 7374 275d 3a20   [list,'list']: 
+0002dfc0: 7265 7475 726e 2072 635f 7374 720a 2020  return rc_str.  
+0002dfd0: 2020 656c 6966 206f 7574 2069 6e20 5b74    elif out in [t
+0002dfe0: 7570 6c65 2c27 7475 706c 6527 5d3a 2072  uple,'tuple']: r
+0002dff0: 6574 7572 6e20 7475 706c 6528 7263 5f73  eturn tuple(rc_s
+0002e000: 7472 290a 2020 2020 7265 7475 726e 204a  tr).    return J
+0002e010: 6f69 6e28 7263 5f73 7472 2c6e 6577 5f6c  oin(rc_str,new_l
+0002e020: 696e 6529 0a0a 6465 6620 4765 744b 6579  ine)..def GetKey
+0002e030: 2873 7263 2c66 696e 643d 4e6f 6e65 2c64  (src,find=None,d
+0002e040: 6566 6175 6c74 3d4e 6f6e 652c 6d6f 6465  efault=None,mode
+0002e050: 3d27 6669 7273 7427 2c72 6f6f 743d 4e6f  ='first',root=No
+0002e060: 6e65 293a 0a20 2020 2027 2727 0a20 2020  ne):.    '''.   
+0002e070: 2047 6574 206b 6579 2066 726f 6d20 6469   Get key from di
+0002e080: 6374 2c6c 6973 742c 7475 706c 652c 7374  ct,list,tuple,st
+0002e090: 720a 2020 2020 6669 6e64 203a 2069 6620  r.    find : if 
+0002e0a0: 6d61 7463 6865 6420 7661 6c75 6520 7468  matched value th
+0002e0b0: 656e 2072 6574 7572 6e20 7468 6520 6b65  en return the ke
+0002e0c0: 792f 696e 6465 7820 6f66 2074 6865 2064  y/index of the d
+0002e0d0: 6174 610a 2020 2020 6d6f 6465 203a 0a20  ata.    mode :. 
+0002e0e0: 2020 2020 2066 6972 7374 203a 2064 6566       first : def
+0002e0f0: 6175 6c74 3a20 7265 7475 726e 2066 6972  ault: return fir
+0002e100: 7374 2066 696e 640a 2020 2020 2020 616c  st find.      al
+0002e110: 6c20 2020 3a20 7265 7475 726e 2066 6f75  l   : return fou
+0002e120: 6e64 2061 6c6c 0a20 2020 2064 6566 6175  nd all.    defau
+0002e130: 6c74 203a 2072 6574 7572 6e20 7768 656e  lt : return when
+0002e140: 206e 6f74 2066 6f75 6e64 0a20 2020 2027   not found.    '
+0002e150: 2727 0a20 2020 2072 743d 5b5d 0a20 2020  ''.    rt=[].   
+0002e160: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
+0002e170: 7263 2c64 6963 7429 3a0a 2020 2020 2020  rc,dict):.      
+0002e180: 2020 6966 2049 734e 6f6e 6528 6669 6e64    if IsNone(find
+0002e190: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+0002e1a0: 6574 7572 6e20 6c69 7374 2873 7263 2e6b  eturn list(src.k
+0002e1b0: 6579 7328 2929 0a20 2020 2020 2020 2065  eys()).        e
+0002e1c0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0002e1d0: 2066 6f72 206b 6579 2c76 616c 2069 6e20   for key,val in 
+0002e1e0: 7372 632e 6974 656d 7328 293a 0a20 2020  src.items():.   
+0002e1f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002e200: 6973 696e 7374 616e 6365 2876 616c 2c64  isinstance(val,d
+0002e210: 6963 7429 3a0a 2020 2020 2020 2020 2020  ict):.          
+0002e220: 2020 2020 2020 2020 2020 613d 4765 744b            a=GetK
+0002e230: 6579 2876 616c 2c66 696e 642c 6465 6661  ey(val,find,defa
+0002e240: 756c 742c 6d6f 6465 2c6b 6579 290a 2020  ult,mode,key).  
+0002e250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e260: 2020 6966 2061 3a0a 2020 2020 2020 2020    if a:.        
+0002e270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e280: 6966 2069 7369 6e73 7461 6e63 6528 612c  if isinstance(a,
+0002e290: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
+0002e2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e2b0: 2020 6966 2072 6f6f 7420 6973 204e 6f6e    if root is Non
+0002e2c0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0002e2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e2e0: 2020 2072 6574 7572 6e20 272f 7b7d 2f7b     return '/{}/{
+0002e2f0: 7d27 2e66 6f72 6d61 7428 6b65 792c 6129  }'.format(key,a)
+0002e300: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e310: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0002e320: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
 0002e330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e340: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0002e350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e360: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-0002e370: 2e61 7070 656e 6428 277b 7d2f 7b7d 272e  .append('{}/{}'.
-0002e380: 666f 726d 6174 286b 6579 2c69 2929 0a20  format(key,i)). 
-0002e390: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0002e3a0: 6c69 6620 7661 6c20 3d3d 2066 696e 643a  lif val == find:
-0002e3b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002e3c0: 2020 2020 2069 6620 6d6f 6465 203d 3d20       if mode == 
-0002e3d0: 2766 6972 7374 273a 2072 6574 7572 6e20  'first': return 
-0002e3e0: 6b65 790a 2020 2020 2020 2020 2020 2020  key.            
-0002e3f0: 2020 2020 2020 2020 7274 2e61 7070 656e          rt.appen
-0002e400: 6428 6b65 7929 0a20 2020 2020 2020 2020  d(key).         
-0002e410: 2020 2069 6620 7274 3a20 7265 7475 726e     if rt: return
-0002e420: 2072 740a 2020 2020 656c 6966 2069 7369   rt.    elif isi
-0002e430: 6e73 7461 6e63 6528 7372 632c 286c 6973  nstance(src,(lis
-0002e440: 742c 7475 706c 652c 7374 7229 293a 0a20  t,tuple,str)):. 
-0002e450: 2020 2020 2020 2069 6620 4973 4e6f 6e65         if IsNone
-0002e460: 2866 696e 6429 3a0a 2020 2020 2020 2020  (find):.        
-0002e470: 2020 2020 7265 7475 726e 206c 656e 2873      return len(s
-0002e480: 7263 290a 2020 2020 2020 2020 656c 7365  rc).        else
-0002e490: 3a0a 2020 2020 2020 2020 2020 2020 666f  :.            fo
-0002e4a0: 7220 6920 696e 2072 616e 6765 2830 2c6c  r i in range(0,l
-0002e4b0: 656e 2873 7263 2929 3a0a 2020 2020 2020  en(src)):.      
-0002e4c0: 2020 2020 2020 2020 2020 6966 2066 696e            if fin
-0002e4d0: 6420 3d3d 2073 7263 5b69 5d3a 0a20 2020  d == src[i]:.   
-0002e4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e4f0: 2069 6620 6d6f 6465 203d 3d20 2766 6972   if mode == 'fir
-0002e500: 7374 273a 2072 6574 7572 6e20 690a 2020  st': return i.  
-0002e510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e520: 2020 7274 2e61 7070 656e 6428 6929 0a20    rt.append(i). 
-0002e530: 2020 2020 2020 2069 6620 7274 3a20 7265         if rt: re
-0002e540: 7475 726e 2072 740a 2020 2020 7265 7475  turn rt.    retu
-0002e550: 726e 2064 6566 6175 6c74 0a0a 6465 6620  rn default..def 
-0002e560: 726d 282a 6172 6773 2c2a 2a6f 7074 7329  rm(*args,**opts)
-0002e570: 3a0a 2020 2020 2727 270a 2020 2020 6465  :.    '''.    de
-0002e580: 6c65 7465 206c 6f63 616c 2066 696c 6520  lete local file 
-0002e590: 7769 7468 206f 7074 696f 6e20 6c69 6b65  with option like
-0002e5a0: 2061 7320 434c 490a 2020 2020 2020 205b   as CLI.       [
-0002e5b0: 3c6f 7074 3e5d 203c 6669 6c65 733e 2f3c  <opt>] <files>/<
-0002e5c0: 6469 7265 6374 6f72 793e 0a20 2020 2020  directory>.     
-0002e5d0: 2020 2d66 2020 2020 3a20 646f 6e27 7420    -f    : don't 
-0002e5e0: 6173 6b20 6465 6c65 7465 0a20 2020 2020  ask delete.     
-0002e5f0: 2020 2d72 2020 2020 3a20 3c64 6972 6563    -r    : <direc
-0002e600: 746f 7279 3e20 6f72 2072 6563 7572 7269  tory> or recurri
-0002e610: 6e67 2064 656c 6574 650a 2020 2020 6465  ng delete.    de
-0002e620: 6c65 7465 206c 6f63 616c 2066 696c 6520  lete local file 
-0002e630: 7769 7468 206f 7074 696f 6e20 6c69 6b65  with option like
-0002e640: 2061 7320 4675 6e63 7469 6f6e 0a20 2020   as Function.   
-0002e650: 2020 2020 3c66 696c 6573 3e2f 3c64 6972      <files>/<dir
-0002e660: 6563 746f 7279 3e2c 2e2e 2e0a 2020 2020  ectory>,....    
-0002e670: 2020 2066 6f72 6365 3d54 7275 6520 2020     force=True   
-0002e680: 203a 2064 6f6e 2774 2061 736b 2064 656c   : don't ask del
-0002e690: 6574 652c 2064 6566 6175 6c74 2046 616c  ete, default Fal
-0002e6a0: 7365 0a20 2020 2020 2020 7265 6375 7272  se.       recurr
-0002e6b0: 696e 673d 5472 7565 3a20 3c64 6972 6563  ing=True: <direc
-0002e6c0: 746f 7279 3e20 6f72 2072 6563 7572 7269  tory> or recurri
-0002e6d0: 6e67 2064 656c 6574 650a 2020 2020 6465  ng delete.    de
-0002e6e0: 6c65 7465 206c 6973 742f 7475 706c 650a  lete list/tuple.
-0002e6f0: 2020 2020 2020 203c 6c69 7374 2c74 7570         <list,tup
-0002e700: 6c65 3e2c 3c64 656c 2069 7465 6d73 3e2c  le>,<del items>,
-0002e710: 2e2e 2e0a 2020 2020 2020 206f 7074 696f  ....       optio
-0002e720: 6e29 0a20 2020 2020 2020 2020 6461 7461  n).         data
-0002e730: 0a20 2020 2020 2020 2020 2020 5472 7565  .           True
-0002e740: 203a 2064 656c 6574 6520 6461 7461 206c   : delete data l
-0002e750: 696b 6520 6173 203c 6465 6c20 6974 656d  ike as <del item
-0002e760: 733e 0a20 2020 2020 2020 2020 2020 4661  s>.           Fa
-0002e770: 6c73 653a 2028 6465 6661 756c 7429 2064  lse: (default) d
-0002e780: 656c 6574 6520 696e 6465 7820 283c 6465  elete index (<de
-0002e790: 6c20 6974 656d 733e 2061 7265 2069 6e74  l items> are int
-0002e7a0: 290a 2020 2020 6465 6c65 7465 2064 6963  ).    delete dic
-0002e7b0: 740a 2020 2020 2020 203c 6469 6374 3e2c  t.       <dict>,
-0002e7c0: 3c64 656c 2069 7465 6d73 3e2c 2e2e 2e0a  <del items>,....
-0002e7d0: 2020 2020 2020 206f 7074 696f 6e29 0a20         option). 
-0002e7e0: 2020 2020 2020 2020 6461 7461 0a20 2020          data.   
-0002e7f0: 2020 2020 2020 2020 5472 7565 203a 2064          True : d
-0002e800: 656c 6574 6520 6461 7461 206c 696b 6520  elete data like 
-0002e810: 6173 203c 6465 6c20 6974 656d 733e 0a20  as <del items>. 
-0002e820: 2020 2020 2020 2020 2020 4661 6c73 653a            False:
-0002e830: 2028 6465 6661 756c 7429 2064 656c 6574   (default) delet
-0002e840: 6520 6b65 7920 6c69 6b65 2061 7320 3c64  e key like as <d
-0002e850: 656c 2069 7465 6d73 3e0a 2020 2020 2020  el items>.      
-0002e860: 2020 2072 6563 7572 7269 6e67 200a 2020     recurring .  
-0002e870: 2020 2020 2020 2020 2046 616c 7365 3a20           False: 
-0002e880: 7365 6172 6368 696e 6720 6461 7461 2069  searching data i
-0002e890: 6e20 6669 7273 7420 6c65 7665 6c0a 2020  n first level.  
-0002e8a0: 2020 2020 2020 2020 2054 7275 6520 3a20           True : 
-0002e8b0: 6b65 6570 2073 6561 7263 6869 6e67 2069  keep searching i
-0002e8c0: 6e73 6964 6520 6469 6374 696f 6e61 7279  nside dictionary
-0002e8d0: 200a 2020 2020 2727 270a 2020 2020 6966   .    '''.    if
-0002e8e0: 206c 656e 2861 7267 7329 203c 3d20 303a   len(args) <= 0:
-0002e8f0: 2072 6574 7572 6e20 6f70 7473 2e67 6574   return opts.get
-0002e900: 2827 6465 6661 756c 7427 290a 2020 2020  ('default').    
-0002e910: 234c 6973 742f 5475 706c 650a 2020 2020  #List/Tuple.    
-0002e920: 6966 2054 7970 6528 6172 6773 5b30 5d2c  if Type(args[0],
-0002e930: 2827 4c49 5354 272c 276c 6973 7427 2c27  ('LIST','list','
-0002e940: 7475 706c 6527 2929 3a0a 2020 2020 2020  tuple')):.      
-0002e950: 2020 7274 3d6c 6973 7428 6172 6773 5b30    rt=list(args[0
-0002e960: 5d29 0a20 2020 2020 2020 204c 4953 5428  ]).        LIST(
-0002e970: 7274 292e 4465 6c65 7465 282a 6172 6773  rt).Delete(*args
-0002e980: 5b31 3a5d 2c66 696e 643d 2764 6174 6127  [1:],find='data'
-0002e990: 2069 6620 6f70 7473 2e67 6574 2827 7661   if opts.get('va
-0002e9a0: 6c75 6527 2c6f 7074 732e 6765 7428 2764  lue',opts.get('d
-0002e9b0: 6174 6127 2c46 616c 7365 2929 2065 6c73  ata',False)) els
-0002e9c0: 6520 2769 6e64 6578 2729 0a20 2020 2020  e 'index').     
-0002e9d0: 2020 2072 6574 7572 6e20 7274 0a20 2020     return rt.   
-0002e9e0: 2020 2020 2023 6465 6c5f 6461 7461 3d6f       #del_data=o
-0002e9f0: 7074 732e 6765 7428 2776 616c 7565 272c  pts.get('value',
-0002ea00: 6f70 7473 2e67 6574 2827 6461 7461 272c  opts.get('data',
-0002ea10: 4661 6c73 6529 290a 2020 2020 2020 2020  False)).        
-0002ea20: 2369 6620 6465 6c5f 6461 7461 3a0a 2020  #if del_data:.  
-0002ea30: 2020 2020 2020 2320 2020 2066 6f72 2069        #    for i
-0002ea40: 2069 6e20 6172 6773 5b31 3a5d 3a0a 2020   in args[1:]:.  
-0002ea50: 2020 2020 2020 2320 2020 2020 2020 2069        #        i
-0002ea60: 6620 6920 696e 2072 743a 2072 742e 7265  f i in rt: rt.re
-0002ea70: 6d6f 7665 2869 290a 2020 2020 2020 2020  move(i).        
-0002ea80: 2320 2020 2069 6620 5479 7065 2861 7267  #    if Type(arg
-0002ea90: 735b 305d 2c27 7475 706c 6527 293a 2072  s[0],'tuple'): r
-0002eaa0: 6574 7572 6e20 7475 706c 6528 7274 290a  eturn tuple(rt).
-0002eab0: 2020 2020 2020 2020 2320 2020 2072 6574          #    ret
-0002eac0: 7572 6e20 7274 0a20 2020 2020 2020 2023  urn rt.        #
-0002ead0: 656c 7365 3a0a 2020 2020 2020 2020 2320  else:.        # 
-0002eae0: 2020 2074 6d70 3d5b 5d0a 2020 2020 2020     tmp=[].      
-0002eaf0: 2020 2320 2020 2066 6f72 2069 2069 6e20    #    for i in 
-0002eb00: 7261 6e67 6528 302c 6c65 6e28 7274 2929  range(0,len(rt))
-0002eb10: 3a0a 2020 2020 2020 2020 2320 2020 2020  :.        #     
-0002eb20: 2020 2069 6620 6920 696e 2061 7267 735b     if i in args[
-0002eb30: 313a 5d3a 2063 6f6e 7469 6e75 650a 2020  1:]: continue.  
-0002eb40: 2020 2020 2020 2320 2020 2020 2020 2074        #        t
-0002eb50: 6d70 2e61 7070 656e 6428 7274 5b69 5d29  mp.append(rt[i])
-0002eb60: 0a20 2020 2020 2020 2023 2020 2020 6966  .        #    if
-0002eb70: 2054 7970 6528 6172 6773 5b30 5d2c 2774   Type(args[0],'t
-0002eb80: 7570 6c65 2729 3a20 7265 7475 726e 2074  uple'): return t
-0002eb90: 7570 6c65 2874 6d70 290a 2020 2020 2020  uple(tmp).      
-0002eba0: 2020 2320 2020 2072 6574 7572 6e20 746d    #    return tm
-0002ebb0: 700a 2020 2020 2344 6963 740a 2020 2020  p.    #Dict.    
-0002ebc0: 656c 6966 2054 7970 6528 6172 6773 5b30  elif Type(args[0
-0002ebd0: 5d2c 6469 6374 293a 0a20 2020 2020 2020  ],dict):.       
-0002ebe0: 2072 743d 6172 6773 5b30 5d0a 2020 2020   rt=args[0].    
-0002ebf0: 2020 2020 6465 6c5f 6461 7461 3d6f 7074      del_data=opt
-0002ec00: 732e 6765 7428 2776 616c 7565 272c 6f70  s.get('value',op
-0002ec10: 7473 2e67 6574 2827 6461 7461 272c 4661  ts.get('data',Fa
-0002ec20: 6c73 6529 290a 2020 2020 2020 2020 2320  lse)).        # 
-0002ec30: 4465 6c20 4461 7461 0a20 2020 2020 2020  Del Data.       
-0002ec40: 2069 6620 6465 6c5f 6461 7461 3a20 0a20   if del_data: . 
-0002ec50: 2020 2020 2020 2020 2020 2074 6d70 3d5b             tmp=[
-0002ec60: 5d0a 2020 2020 2020 2020 2020 2020 7274  ].            rt
-0002ec70: 5f69 7465 6d73 3d6c 6973 7428 7274 2e69  _items=list(rt.i
-0002ec80: 7465 6d73 2829 290a 2020 2020 2020 2020  tems()).        
-0002ec90: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
-0002eca0: 6765 2830 2c6c 656e 2872 745f 6974 656d  ge(0,len(rt_item
-0002ecb0: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
-0002ecc0: 2020 2020 2023 5265 6375 7272 696e 6720       #Recurring 
-0002ecd0: 6368 6563 6b0a 2020 2020 2020 2020 2020  check.          
-0002ece0: 2020 2020 2020 6966 206f 7074 732e 6765        if opts.ge
-0002ecf0: 7428 2772 6563 7572 7269 6e67 272c 4661  t('recurring',Fa
-0002ed00: 6c73 6529 2061 6e64 2054 7970 6528 7274  lse) and Type(rt
-0002ed10: 5f69 7465 6d73 5b69 5d5b 315d 2c64 6963  _items[i][1],dic
-0002ed20: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-0002ed30: 2020 2020 2020 2020 613d 6c69 7374 2872          a=list(r
-0002ed40: 745f 6974 656d 735b 695d 290a 2020 2020  t_items[i]).    
-0002ed50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ed60: 615b 315d 3d72 6d28 7274 5f69 7465 6d73  a[1]=rm(rt_items
-0002ed70: 5b69 5d5b 315d 2c2a 6172 6773 5b31 3a5d  [i][1],*args[1:]
-0002ed80: 2c64 6174 613d 6465 6c5f 6461 7461 290a  ,data=del_data).
-0002ed90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002eda0: 2020 2020 746d 702e 6170 7065 6e64 2874      tmp.append(t
-0002edb0: 7570 6c65 2861 2929 0a20 2020 2020 2020  uple(a)).       
-0002edc0: 2020 2020 2020 2020 2065 6c69 6620 7274           elif rt
-0002edd0: 5f69 7465 6d73 5b69 5d5b 315d 206e 6f74  _items[i][1] not
-0002ede0: 2069 6e20 6172 6773 5b31 3a5d 3a0a 2020   in args[1:]:.  
-0002edf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ee00: 2020 746d 702e 6170 7065 6e64 2872 745f    tmp.append(rt_
-0002ee10: 6974 656d 735b 695d 290a 2020 2020 2020  items[i]).      
-0002ee20: 2020 2020 2020 7265 7475 726e 2064 6963        return dic
-0002ee30: 7428 746d 7029 0a20 2020 2020 2020 2023  t(tmp).        #
-0002ee40: 2044 656c 206b 6579 0a20 2020 2020 2020   Del key.       
-0002ee50: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0002ee60: 2020 2023 2052 6563 7572 7269 6e67 2063     # Recurring c
-0002ee70: 6865 636b 696e 670a 2020 2020 2020 2020  hecking.        
-0002ee80: 2020 2020 6966 206f 7074 732e 6765 7428      if opts.get(
-0002ee90: 2772 6563 7572 7269 6e67 272c 4661 6c73  'recurring',Fals
-0002eea0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-0002eeb0: 2020 2020 746d 703d 5b5d 0a20 2020 2020      tmp=[].     
-0002eec0: 2020 2020 2020 2020 2020 2072 745f 6974             rt_it
-0002eed0: 656d 733d 6c69 7374 2872 742e 6974 656d  ems=list(rt.item
-0002eee0: 7328 2929 0a20 2020 2020 2020 2020 2020  s()).           
-0002eef0: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
-0002ef00: 6e67 6528 302c 6c65 6e28 7274 5f69 7465  nge(0,len(rt_ite
-0002ef10: 6d73 2929 3a0a 2020 2020 2020 2020 2020  ms)):.          
-0002ef20: 2020 2020 2020 2020 2020 6966 2072 745f            if rt_
-0002ef30: 6974 656d 735b 695d 5b30 5d20 6e6f 7420  items[i][0] not 
-0002ef40: 696e 2061 7267 735b 313a 5d3a 0a20 2020  in args[1:]:.   
-0002ef50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ef60: 2020 2020 2069 6620 5479 7065 2872 745f       if Type(rt_
-0002ef70: 6974 656d 735b 695d 5b31 5d2c 6469 6374  items[i][1],dict
-0002ef80: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0002ef90: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0002efa0: 3d6c 6973 7428 7274 5f69 7465 6d73 5b69  =list(rt_items[i
-0002efb0: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
-0002efc0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0002efd0: 5b31 5d3d 726d 2872 745f 6974 656d 735b  [1]=rm(rt_items[
-0002efe0: 695d 5b31 5d2c 2a61 7267 735b 313a 5d2c  i][1],*args[1:],
-0002eff0: 6461 7461 3d64 656c 5f64 6174 6129 0a20  data=del_data). 
-0002f000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f010: 2020 2020 2020 2020 2020 2074 6d70 2e61             tmp.a
-0002f020: 7070 656e 6428 7475 706c 6528 6129 290a  ppend(tuple(a)).
-0002f030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f040: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0002f050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f060: 2020 2020 2020 2020 2020 746d 702e 6170            tmp.ap
-0002f070: 7065 6e64 2872 745f 6974 656d 735b 695d  pend(rt_items[i]
-0002f080: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002f090: 2020 7265 7475 726e 2064 6963 7428 746d    return dict(tm
-0002f0a0: 7029 0a20 2020 2020 2020 2020 2020 2065  p).            e
-0002f0b0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0002f0c0: 2020 2020 2066 6f72 2069 2069 6e20 6172       for i in ar
-0002f0d0: 6773 5b31 3a5d 3a0a 2020 2020 2020 2020  gs[1:]:.        
-0002f0e0: 2020 2020 2020 2020 2020 2020 2350 6174              #Pat
-0002f0f0: 6820 6b65 790a 2020 2020 2020 2020 2020  h key.          
-0002f100: 2020 2020 2020 2020 2020 6966 2027 2f27            if '/'
-0002f110: 2069 6e20 6920 616e 6420 695b 305d 203d   in i and i[0] =
-0002f120: 3d20 272f 273a 0a20 2020 2020 2020 2020  = '/':.         
-0002f130: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002f140: 5f61 3d69 2e73 706c 6974 2827 2f27 290a  _a=i.split('/').
-0002f150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f160: 2020 2020 2020 2020 746d 703d 7274 0a20          tmp=rt. 
-0002f170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f180: 2020 2020 2020 2062 726b 3d46 616c 7365         brk=False
-0002f190: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f1a0: 2020 2020 2020 2020 2066 6f72 207a 2069           for z i
-0002f1b0: 6e20 695f 615b 313a 2d31 5d3a 0a20 2020  n i_a[1:-1]:.   
-0002f1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f1d0: 2020 2020 2020 2020 2069 6620 7a20 696e           if z in
-0002f1e0: 2074 6d70 3a0a 2020 2020 2020 2020 2020   tmp:.          
-0002f1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f200: 2020 2020 2020 746d 703d 746d 705b 7a5d        tmp=tmp[z]
-0002f210: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f220: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0002f230: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0002f240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f250: 2020 2062 726b 3d54 7275 650a 2020 2020     brk=True.    
+0002e340: 2020 2072 6574 7572 6e20 277b 7d2f 7b7d     return '{}/{}
+0002e350: 272e 666f 726d 6174 286b 6579 2c61 290a  '.format(key,a).
+0002e360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e370: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
+0002e380: 6e73 7461 6e63 6528 612c 6c69 7374 293a  nstance(a,list):
+0002e390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e3a0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+0002e3b0: 2069 2069 6e20 613a 0a20 2020 2020 2020   i in a:.       
+0002e3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e3d0: 2020 2020 2020 2020 2069 6620 726f 6f74           if root
+0002e3e0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+0002e3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e400: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+0002e410: 2e61 7070 656e 6428 272f 7b7d 2f7b 7d27  .append('/{}/{}'
+0002e420: 2e66 6f72 6d61 7428 6b65 792c 6929 290a  .format(key,i)).
+0002e430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e450: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0002e460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e470: 2020 2020 2020 2020 2020 7274 2e61 7070            rt.app
+0002e480: 656e 6428 277b 7d2f 7b7d 272e 666f 726d  end('{}/{}'.form
+0002e490: 6174 286b 6579 2c69 2929 0a20 2020 2020  at(key,i)).     
+0002e4a0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0002e4b0: 7661 6c20 3d3d 2066 696e 643a 0a20 2020  val == find:.   
+0002e4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e4d0: 2069 6620 6d6f 6465 203d 3d20 2766 6972   if mode == 'fir
+0002e4e0: 7374 273a 2072 6574 7572 6e20 6b65 790a  st': return key.
+0002e4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e500: 2020 2020 7274 2e61 7070 656e 6428 6b65      rt.append(ke
+0002e510: 7929 0a20 2020 2020 2020 2020 2020 2069  y).            i
+0002e520: 6620 7274 3a20 7265 7475 726e 2072 740a  f rt: return rt.
+0002e530: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+0002e540: 6e63 6528 7372 632c 286c 6973 742c 7475  nce(src,(list,tu
+0002e550: 706c 652c 7374 7229 293a 0a20 2020 2020  ple,str)):.     
+0002e560: 2020 2069 6620 4973 4e6f 6e65 2866 696e     if IsNone(fin
+0002e570: 6429 3a0a 2020 2020 2020 2020 2020 2020  d):.            
+0002e580: 7265 7475 726e 206c 656e 2873 7263 290a  return len(src).
+0002e590: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0002e5a0: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
+0002e5b0: 696e 2072 616e 6765 2830 2c6c 656e 2873  in range(0,len(s
+0002e5c0: 7263 2929 3a0a 2020 2020 2020 2020 2020  rc)):.          
+0002e5d0: 2020 2020 2020 6966 2066 696e 6420 3d3d        if find ==
+0002e5e0: 2073 7263 5b69 5d3a 0a20 2020 2020 2020   src[i]:.       
+0002e5f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002e600: 6d6f 6465 203d 3d20 2766 6972 7374 273a  mode == 'first':
+0002e610: 2072 6574 7572 6e20 690a 2020 2020 2020   return i.      
+0002e620: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+0002e630: 2e61 7070 656e 6428 6929 0a20 2020 2020  .append(i).     
+0002e640: 2020 2069 6620 7274 3a20 7265 7475 726e     if rt: return
+0002e650: 2072 740a 2020 2020 7265 7475 726e 2064   rt.    return d
+0002e660: 6566 6175 6c74 0a0a 6465 6620 726d 282a  efault..def rm(*
+0002e670: 6172 6773 2c2a 2a6f 7074 7329 3a0a 2020  args,**opts):.  
+0002e680: 2020 2727 270a 2020 2020 6465 6c65 7465    '''.    delete
+0002e690: 206c 6f63 616c 2066 696c 6520 7769 7468   local file with
+0002e6a0: 206f 7074 696f 6e20 6c69 6b65 2061 7320   option like as 
+0002e6b0: 434c 490a 2020 2020 2020 205b 3c6f 7074  CLI.       [<opt
+0002e6c0: 3e5d 203c 6669 6c65 733e 2f3c 6469 7265  >] <files>/<dire
+0002e6d0: 6374 6f72 793e 0a20 2020 2020 2020 2d66  ctory>.       -f
+0002e6e0: 2020 2020 3a20 646f 6e27 7420 6173 6b20      : don't ask 
+0002e6f0: 6465 6c65 7465 0a20 2020 2020 2020 2d72  delete.       -r
+0002e700: 2020 2020 3a20 3c64 6972 6563 746f 7279      : <directory
+0002e710: 3e20 6f72 2072 6563 7572 7269 6e67 2064  > or recurring d
+0002e720: 656c 6574 650a 2020 2020 6465 6c65 7465  elete.    delete
+0002e730: 206c 6f63 616c 2066 696c 6520 7769 7468   local file with
+0002e740: 206f 7074 696f 6e20 6c69 6b65 2061 7320   option like as 
+0002e750: 4675 6e63 7469 6f6e 0a20 2020 2020 2020  Function.       
+0002e760: 3c66 696c 6573 3e2f 3c64 6972 6563 746f  <files>/<directo
+0002e770: 7279 3e2c 2e2e 2e0a 2020 2020 2020 2066  ry>,....       f
+0002e780: 6f72 6365 3d54 7275 6520 2020 203a 2064  orce=True    : d
+0002e790: 6f6e 2774 2061 736b 2064 656c 6574 652c  on't ask delete,
+0002e7a0: 2064 6566 6175 6c74 2046 616c 7365 0a20   default False. 
+0002e7b0: 2020 2020 2020 7265 6375 7272 696e 673d        recurring=
+0002e7c0: 5472 7565 3a20 3c64 6972 6563 746f 7279  True: <directory
+0002e7d0: 3e20 6f72 2072 6563 7572 7269 6e67 2064  > or recurring d
+0002e7e0: 656c 6574 650a 2020 2020 6465 6c65 7465  elete.    delete
+0002e7f0: 206c 6973 742f 7475 706c 650a 2020 2020   list/tuple.    
+0002e800: 2020 203c 6c69 7374 2c74 7570 6c65 3e2c     <list,tuple>,
+0002e810: 3c64 656c 2069 7465 6d73 3e2c 2e2e 2e0a  <del items>,....
+0002e820: 2020 2020 2020 206f 7074 696f 6e29 0a20         option). 
+0002e830: 2020 2020 2020 2020 6461 7461 0a20 2020          data.   
+0002e840: 2020 2020 2020 2020 5472 7565 203a 2064          True : d
+0002e850: 656c 6574 6520 6461 7461 206c 696b 6520  elete data like 
+0002e860: 6173 203c 6465 6c20 6974 656d 733e 0a20  as <del items>. 
+0002e870: 2020 2020 2020 2020 2020 4661 6c73 653a            False:
+0002e880: 2028 6465 6661 756c 7429 2064 656c 6574   (default) delet
+0002e890: 6520 696e 6465 7820 283c 6465 6c20 6974  e index (<del it
+0002e8a0: 656d 733e 2061 7265 2069 6e74 290a 2020  ems> are int).  
+0002e8b0: 2020 6465 6c65 7465 2064 6963 740a 2020    delete dict.  
+0002e8c0: 2020 2020 203c 6469 6374 3e2c 3c64 656c       <dict>,<del
+0002e8d0: 2069 7465 6d73 3e2c 2e2e 2e0a 2020 2020   items>,....    
+0002e8e0: 2020 206f 7074 696f 6e29 0a20 2020 2020     option).     
+0002e8f0: 2020 2020 6461 7461 0a20 2020 2020 2020      data.       
+0002e900: 2020 2020 5472 7565 203a 2064 656c 6574      True : delet
+0002e910: 6520 6461 7461 206c 696b 6520 6173 203c  e data like as <
+0002e920: 6465 6c20 6974 656d 733e 0a20 2020 2020  del items>.     
+0002e930: 2020 2020 2020 4661 6c73 653a 2028 6465        False: (de
+0002e940: 6661 756c 7429 2064 656c 6574 6520 6b65  fault) delete ke
+0002e950: 7920 6c69 6b65 2061 7320 3c64 656c 2069  y like as <del i
+0002e960: 7465 6d73 3e0a 2020 2020 2020 2020 2072  tems>.         r
+0002e970: 6563 7572 7269 6e67 200a 2020 2020 2020  ecurring .      
+0002e980: 2020 2020 2046 616c 7365 3a20 7365 6172       False: sear
+0002e990: 6368 696e 6720 6461 7461 2069 6e20 6669  ching data in fi
+0002e9a0: 7273 7420 6c65 7665 6c0a 2020 2020 2020  rst level.      
+0002e9b0: 2020 2020 2054 7275 6520 3a20 6b65 6570       True : keep
+0002e9c0: 2073 6561 7263 6869 6e67 2069 6e73 6964   searching insid
+0002e9d0: 6520 6469 6374 696f 6e61 7279 200a 2020  e dictionary .  
+0002e9e0: 2020 2727 270a 2020 2020 6966 206c 656e    '''.    if len
+0002e9f0: 2861 7267 7329 203c 3d20 303a 2072 6574  (args) <= 0: ret
+0002ea00: 7572 6e20 6f70 7473 2e67 6574 2827 6465  urn opts.get('de
+0002ea10: 6661 756c 7427 290a 2020 2020 234c 6973  fault').    #Lis
+0002ea20: 742f 5475 706c 650a 2020 2020 6966 2054  t/Tuple.    if T
+0002ea30: 7970 6528 6172 6773 5b30 5d2c 2827 4c49  ype(args[0],('LI
+0002ea40: 5354 272c 276c 6973 7427 2c27 7475 706c  ST','list','tupl
+0002ea50: 6527 2929 3a0a 2020 2020 2020 2020 7274  e')):.        rt
+0002ea60: 3d6c 6973 7428 6172 6773 5b30 5d29 0a20  =list(args[0]). 
+0002ea70: 2020 2020 2020 204c 4953 5428 7274 292e         LIST(rt).
+0002ea80: 4465 6c65 7465 282a 6172 6773 5b31 3a5d  Delete(*args[1:]
+0002ea90: 2c66 696e 643d 2764 6174 6127 2069 6620  ,find='data' if 
+0002eaa0: 6f70 7473 2e67 6574 2827 7661 6c75 6527  opts.get('value'
+0002eab0: 2c6f 7074 732e 6765 7428 2764 6174 6127  ,opts.get('data'
+0002eac0: 2c46 616c 7365 2929 2065 6c73 6520 2769  ,False)) else 'i
+0002ead0: 6e64 6578 2729 0a20 2020 2020 2020 2072  ndex').        r
+0002eae0: 6574 7572 6e20 7274 0a20 2020 2020 2020  eturn rt.       
+0002eaf0: 2023 6465 6c5f 6461 7461 3d6f 7074 732e   #del_data=opts.
+0002eb00: 6765 7428 2776 616c 7565 272c 6f70 7473  get('value',opts
+0002eb10: 2e67 6574 2827 6461 7461 272c 4661 6c73  .get('data',Fals
+0002eb20: 6529 290a 2020 2020 2020 2020 2369 6620  e)).        #if 
+0002eb30: 6465 6c5f 6461 7461 3a0a 2020 2020 2020  del_data:.      
+0002eb40: 2020 2320 2020 2066 6f72 2069 2069 6e20    #    for i in 
+0002eb50: 6172 6773 5b31 3a5d 3a0a 2020 2020 2020  args[1:]:.      
+0002eb60: 2020 2320 2020 2020 2020 2069 6620 6920    #        if i 
+0002eb70: 696e 2072 743a 2072 742e 7265 6d6f 7665  in rt: rt.remove
+0002eb80: 2869 290a 2020 2020 2020 2020 2320 2020  (i).        #   
+0002eb90: 2069 6620 5479 7065 2861 7267 735b 305d   if Type(args[0]
+0002eba0: 2c27 7475 706c 6527 293a 2072 6574 7572  ,'tuple'): retur
+0002ebb0: 6e20 7475 706c 6528 7274 290a 2020 2020  n tuple(rt).    
+0002ebc0: 2020 2020 2320 2020 2072 6574 7572 6e20      #    return 
+0002ebd0: 7274 0a20 2020 2020 2020 2023 656c 7365  rt.        #else
+0002ebe0: 3a0a 2020 2020 2020 2020 2320 2020 2074  :.        #    t
+0002ebf0: 6d70 3d5b 5d0a 2020 2020 2020 2020 2320  mp=[].        # 
+0002ec00: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+0002ec10: 6528 302c 6c65 6e28 7274 2929 3a0a 2020  e(0,len(rt)):.  
+0002ec20: 2020 2020 2020 2320 2020 2020 2020 2069        #        i
+0002ec30: 6620 6920 696e 2061 7267 735b 313a 5d3a  f i in args[1:]:
+0002ec40: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
+0002ec50: 2020 2320 2020 2020 2020 2074 6d70 2e61    #        tmp.a
+0002ec60: 7070 656e 6428 7274 5b69 5d29 0a20 2020  ppend(rt[i]).   
+0002ec70: 2020 2020 2023 2020 2020 6966 2054 7970       #    if Typ
+0002ec80: 6528 6172 6773 5b30 5d2c 2774 7570 6c65  e(args[0],'tuple
+0002ec90: 2729 3a20 7265 7475 726e 2074 7570 6c65  '): return tuple
+0002eca0: 2874 6d70 290a 2020 2020 2020 2020 2320  (tmp).        # 
+0002ecb0: 2020 2072 6574 7572 6e20 746d 700a 2020     return tmp.  
+0002ecc0: 2020 2344 6963 740a 2020 2020 656c 6966    #Dict.    elif
+0002ecd0: 2054 7970 6528 6172 6773 5b30 5d2c 6469   Type(args[0],di
+0002ece0: 6374 293a 0a20 2020 2020 2020 2072 743d  ct):.        rt=
+0002ecf0: 6172 6773 5b30 5d0a 2020 2020 2020 2020  args[0].        
+0002ed00: 6465 6c5f 6461 7461 3d6f 7074 732e 6765  del_data=opts.ge
+0002ed10: 7428 2776 616c 7565 272c 6f70 7473 2e67  t('value',opts.g
+0002ed20: 6574 2827 6461 7461 272c 4661 6c73 6529  et('data',False)
+0002ed30: 290a 2020 2020 2020 2020 2320 4465 6c20  ).        # Del 
+0002ed40: 4461 7461 0a20 2020 2020 2020 2069 6620  Data.        if 
+0002ed50: 6465 6c5f 6461 7461 3a20 0a20 2020 2020  del_data: .     
+0002ed60: 2020 2020 2020 2074 6d70 3d5b 5d0a 2020         tmp=[].  
+0002ed70: 2020 2020 2020 2020 2020 7274 5f69 7465            rt_ite
+0002ed80: 6d73 3d6c 6973 7428 7274 2e69 7465 6d73  ms=list(rt.items
+0002ed90: 2829 290a 2020 2020 2020 2020 2020 2020  ()).            
+0002eda0: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
+0002edb0: 2c6c 656e 2872 745f 6974 656d 7329 293a  ,len(rt_items)):
+0002edc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002edd0: 2023 5265 6375 7272 696e 6720 6368 6563   #Recurring chec
+0002ede0: 6b0a 2020 2020 2020 2020 2020 2020 2020  k.              
+0002edf0: 2020 6966 206f 7074 732e 6765 7428 2772    if opts.get('r
+0002ee00: 6563 7572 7269 6e67 272c 4661 6c73 6529  ecurring',False)
+0002ee10: 2061 6e64 2054 7970 6528 7274 5f69 7465   and Type(rt_ite
+0002ee20: 6d73 5b69 5d5b 315d 2c64 6963 7429 3a0a  ms[i][1],dict):.
+0002ee30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ee40: 2020 2020 613d 6c69 7374 2872 745f 6974      a=list(rt_it
+0002ee50: 656d 735b 695d 290a 2020 2020 2020 2020  ems[i]).        
+0002ee60: 2020 2020 2020 2020 2020 2020 615b 315d              a[1]
+0002ee70: 3d72 6d28 7274 5f69 7465 6d73 5b69 5d5b  =rm(rt_items[i][
+0002ee80: 315d 2c2a 6172 6773 5b31 3a5d 2c64 6174  1],*args[1:],dat
+0002ee90: 613d 6465 6c5f 6461 7461 290a 2020 2020  a=del_data).    
+0002eea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eeb0: 746d 702e 6170 7065 6e64 2874 7570 6c65  tmp.append(tuple
+0002eec0: 2861 2929 0a20 2020 2020 2020 2020 2020  (a)).           
+0002eed0: 2020 2020 2065 6c69 6620 7274 5f69 7465       elif rt_ite
+0002eee0: 6d73 5b69 5d5b 315d 206e 6f74 2069 6e20  ms[i][1] not in 
+0002eef0: 6172 6773 5b31 3a5d 3a0a 2020 2020 2020  args[1:]:.      
+0002ef00: 2020 2020 2020 2020 2020 2020 2020 746d                tm
+0002ef10: 702e 6170 7065 6e64 2872 745f 6974 656d  p.append(rt_item
+0002ef20: 735b 695d 290a 2020 2020 2020 2020 2020  s[i]).          
+0002ef30: 2020 7265 7475 726e 2064 6963 7428 746d    return dict(tm
+0002ef40: 7029 0a20 2020 2020 2020 2023 2044 656c  p).        # Del
+0002ef50: 206b 6579 0a20 2020 2020 2020 2065 6c73   key.        els
+0002ef60: 653a 0a20 2020 2020 2020 2020 2020 2023  e:.            #
+0002ef70: 2052 6563 7572 7269 6e67 2063 6865 636b   Recurring check
+0002ef80: 696e 670a 2020 2020 2020 2020 2020 2020  ing.            
+0002ef90: 6966 206f 7074 732e 6765 7428 2772 6563  if opts.get('rec
+0002efa0: 7572 7269 6e67 272c 4661 6c73 6529 3a0a  urring',False):.
+0002efb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002efc0: 746d 703d 5b5d 0a20 2020 2020 2020 2020  tmp=[].         
+0002efd0: 2020 2020 2020 2072 745f 6974 656d 733d         rt_items=
+0002efe0: 6c69 7374 2872 742e 6974 656d 7328 2929  list(rt.items())
+0002eff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002f000: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+0002f010: 302c 6c65 6e28 7274 5f69 7465 6d73 2929  0,len(rt_items))
+0002f020: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002f030: 2020 2020 2020 6966 2072 745f 6974 656d        if rt_item
+0002f040: 735b 695d 5b30 5d20 6e6f 7420 696e 2061  s[i][0] not in a
+0002f050: 7267 735b 313a 5d3a 0a20 2020 2020 2020  rgs[1:]:.       
+0002f060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f070: 2069 6620 5479 7065 2872 745f 6974 656d   if Type(rt_item
+0002f080: 735b 695d 5b31 5d2c 6469 6374 293a 0a20  s[i][1],dict):. 
+0002f090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f0a0: 2020 2020 2020 2020 2020 2061 3d6c 6973             a=lis
+0002f0b0: 7428 7274 5f69 7465 6d73 5b69 5d29 0a20  t(rt_items[i]). 
+0002f0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f0d0: 2020 2020 2020 2020 2020 2061 5b31 5d3d             a[1]=
+0002f0e0: 726d 2872 745f 6974 656d 735b 695d 5b31  rm(rt_items[i][1
+0002f0f0: 5d2c 2a61 7267 735b 313a 5d2c 6461 7461  ],*args[1:],data
+0002f100: 3d64 656c 5f64 6174 6129 0a20 2020 2020  =del_data).     
+0002f110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f120: 2020 2020 2020 2074 6d70 2e61 7070 656e         tmp.appen
+0002f130: 6428 7475 706c 6528 6129 290a 2020 2020  d(tuple(a)).    
+0002f140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f150: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0002f160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f170: 2020 2020 2020 746d 702e 6170 7065 6e64        tmp.append
+0002f180: 2872 745f 6974 656d 735b 695d 290a 2020  (rt_items[i]).  
+0002f190: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0002f1a0: 7475 726e 2064 6963 7428 746d 7029 0a20  turn dict(tmp). 
+0002f1b0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0002f1c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002f1d0: 2066 6f72 2069 2069 6e20 6172 6773 5b31   for i in args[1
+0002f1e0: 3a5d 3a0a 2020 2020 2020 2020 2020 2020  :]:.            
+0002f1f0: 2020 2020 2020 2020 2350 6174 6820 6b65          #Path ke
+0002f200: 790a 2020 2020 2020 2020 2020 2020 2020  y.              
+0002f210: 2020 2020 2020 6966 2027 2f27 2069 6e20        if '/' in 
+0002f220: 6920 616e 6420 695b 305d 203d 3d20 272f  i and i[0] == '/
+0002f230: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+0002f240: 2020 2020 2020 2020 2020 2069 5f61 3d69             i_a=i
+0002f250: 2e73 706c 6974 2827 2f27 290a 2020 2020  .split('/').    
 0002f260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f270: 2020 2020 2020 2020 2020 2020 6272 6561              brea
-0002f280: 6b0a 2020 2020 2020 2020 2020 2020 2020  k.              
-0002f290: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-0002f2a0: 2062 726b 2061 6e64 2069 5f61 5b2d 315d   brk and i_a[-1]
-0002f2b0: 2069 6e20 746d 703a 2074 6d70 2e70 6f70   in tmp: tmp.pop
-0002f2c0: 2869 5f61 5b2d 315d 290a 2020 2020 2020  (i_a[-1]).      
+0002f270: 2020 2020 746d 703d 7274 0a20 2020 2020      tmp=rt.     
+0002f280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f290: 2020 2062 726b 3d46 616c 7365 0a20 2020     brk=False.   
+0002f2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f2b0: 2020 2020 2066 6f72 207a 2069 6e20 695f       for z in i_
+0002f2c0: 615b 313a 2d31 5d3a 0a20 2020 2020 2020  a[1:-1]:.       
 0002f2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f2e0: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
-0002f2f0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0002f300: 6c69 6620 6920 696e 2072 743a 0a20 2020  lif i in rt:.   
-0002f310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f320: 2020 2020 2072 742e 706f 7028 6929 0a20       rt.pop(i). 
-0002f330: 2020 2020 2020 2072 6574 7572 6e20 7274         return rt
-0002f340: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-0002f350: 2020 2023 4669 6c65 2f44 6972 6563 746f     #File/Directo
-0002f360: 7279 0a20 2020 2020 2020 2073 7562 5f64  ry.        sub_d
-0002f370: 6972 3d6f 7074 732e 6765 7428 2772 6563  ir=opts.get('rec
-0002f380: 7572 7269 6e67 272c 4661 6c73 6529 0a20  urring',False). 
-0002f390: 2020 2020 2020 2066 6f72 6365 3d6f 7074         force=opt
-0002f3a0: 732e 6765 7428 2766 6f72 6365 272c 4661  s.get('force',Fa
-0002f3b0: 6c73 6529 0a20 2020 2020 2020 2069 6620  lse).        if 
-0002f3c0: 6669 6e64 5f65 7865 6375 7461 626c 6528  find_executable(
-0002f3d0: 2772 6d27 293a 0a20 2020 2020 2020 2020  'rm'):.         
-0002f3e0: 2020 2073 7562 5f6f 7074 3d27 270a 2020     sub_opt=''.  
-0002f3f0: 2020 2020 2020 2020 2020 6966 2073 7562            if sub
-0002f400: 5f64 6972 3a20 7375 625f 6f70 743d 272d  _dir: sub_opt='-
-0002f410: 7227 0a20 2020 2020 2020 2020 2020 2069  r'.            i
-0002f420: 6620 666f 7263 653a 0a20 2020 2020 2020  f force:.       
-0002f430: 2020 2020 2020 2020 2069 6620 7375 625f           if sub_
-0002f440: 6f70 743a 2073 7562 5f6f 7074 3d73 7562  opt: sub_opt=sub
-0002f450: 5f6f 7074 2b27 6627 0a20 2020 2020 2020  _opt+'f'.       
-0002f460: 2020 2020 2020 2020 2065 6c73 653a 2073           else: s
-0002f470: 7562 5f6f 7074 3d27 2d66 270a 2020 2020  ub_opt='-f'.    
-0002f480: 2020 2020 2020 2020 7273 6865 6c6c 2827          rshell('
-0002f490: 726d 202d 6920 7b7d 272e 666f 726d 6174  rm -i {}'.format
-0002f4a0: 2873 7562 5f6f 7074 292b 4a6f 696e 2861  (sub_opt)+Join(a
-0002f4b0: 7267 732c 2720 2729 2c69 6e74 6572 6163  rgs,' '),interac
-0002f4c0: 7469 7665 3d54 7275 6529 0a20 2020 2020  tive=True).     
-0002f4d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002f4e0: 2020 2020 2066 6f72 2061 7267 2069 6e20       for arg in 
-0002f4f0: 6172 6773 3a0a 2020 2020 2020 2020 2020  args:.          
-0002f500: 2020 2020 2020 6966 2061 7267 5b30 5d20        if arg[0] 
-0002f510: 3d3d 2027 2d27 3a0a 2020 2020 2020 2020  == '-':.        
-0002f520: 2020 2020 2020 2020 2020 2069 6620 2772             if 'r
-0002f530: 2720 696e 2061 7267 3a0a 2020 2020 2020  ' in arg:.      
-0002f540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f550: 7375 625f 6469 723d 5472 7565 0a20 2020  sub_dir=True.   
-0002f560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f570: 6966 2027 6627 2069 6e20 6172 673a 0a20  if 'f' in arg:. 
-0002f580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f590: 2020 2020 2066 6f72 6365 3d54 7275 650a       force=True.
-0002f5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f5b0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0002f5c0: 2020 2020 2020 2020 2020 6966 206f 732e            if os.
-0002f5d0: 6973 6669 6c65 2861 7267 293a 0a20 2020  isfile(arg):.   
-0002f5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f5f0: 2020 2020 2069 6620 6e6f 7420 666f 7263       if not forc
-0002f600: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0002f610: 2020 2020 2020 2020 2020 2020 2020 2079                 y
-0002f620: 6e3d 636c 695f 696e 7075 7428 2744 656c  n=cli_input('Del
-0002f630: 6574 6520 7b7d 2028 592f 4e29 3f27 290a  ete {} (Y/N)?').
-0002f640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f650: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0002f660: 6f74 2069 7369 6e73 7461 6e63 6528 796e  ot isinstance(yn
-0002f670: 2c73 7472 2920 6f72 2079 6e2e 6c6f 7765  ,str) or yn.lowe
-0002f680: 7228 2920 6e6f 7420 696e 205b 2779 272c  r() not in ['y',
-0002f690: 2779 6573 275d 3a20 636f 6e74 696e 7565  'yes']: continue
-0002f6a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f6b0: 2020 2020 2020 2020 2023 6f73 2e72 656d           #os.rem
-0002f6c0: 6f76 6528 6172 6729 0a20 2020 2020 2020  ove(arg).       
-0002f6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f6e0: 206f 732e 756e 6c69 6e6b 2861 7267 290a   os.unlink(arg).
+0002f2e0: 2020 2020 2069 6620 7a20 696e 2074 6d70       if z in tmp
+0002f2f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002f300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f310: 2020 746d 703d 746d 705b 7a5d 0a20 2020    tmp=tmp[z].   
+0002f320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f330: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0002f340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f350: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+0002f360: 726b 3d54 7275 650a 2020 2020 2020 2020  rk=True.        
+0002f370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f380: 2020 2020 2020 2020 6272 6561 6b0a 2020          break.  
+0002f390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f3a0: 2020 2020 2020 6966 206e 6f74 2062 726b        if not brk
+0002f3b0: 2061 6e64 2069 5f61 5b2d 315d 2069 6e20   and i_a[-1] in 
+0002f3c0: 746d 703a 2074 6d70 2e70 6f70 2869 5f61  tmp: tmp.pop(i_a
+0002f3d0: 5b2d 315d 290a 2020 2020 2020 2020 2020  [-1]).          
+0002f3e0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0002f3f0: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+0002f400: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0002f410: 6920 696e 2072 743a 0a20 2020 2020 2020  i in rt:.       
+0002f420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f430: 2072 742e 706f 7028 6929 0a20 2020 2020   rt.pop(i).     
+0002f440: 2020 2072 6574 7572 6e20 7274 0a20 2020     return rt.   
+0002f450: 2065 6c73 653a 0a20 2020 2020 2020 2023   else:.        #
+0002f460: 4669 6c65 2f44 6972 6563 746f 7279 0a20  File/Directory. 
+0002f470: 2020 2020 2020 2073 7562 5f64 6972 3d6f         sub_dir=o
+0002f480: 7074 732e 6765 7428 2772 6563 7572 7269  pts.get('recurri
+0002f490: 6e67 272c 4661 6c73 6529 0a20 2020 2020  ng',False).     
+0002f4a0: 2020 2066 6f72 6365 3d6f 7074 732e 6765     force=opts.ge
+0002f4b0: 7428 2766 6f72 6365 272c 4661 6c73 6529  t('force',False)
+0002f4c0: 0a20 2020 2020 2020 2069 6620 6669 6e64  .        if find
+0002f4d0: 5f65 7865 6375 7461 626c 6528 2772 6d27  _executable('rm'
+0002f4e0: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
+0002f4f0: 7562 5f6f 7074 3d27 270a 2020 2020 2020  ub_opt=''.      
+0002f500: 2020 2020 2020 6966 2073 7562 5f64 6972        if sub_dir
+0002f510: 3a20 7375 625f 6f70 743d 272d 7227 0a20  : sub_opt='-r'. 
+0002f520: 2020 2020 2020 2020 2020 2069 6620 666f             if fo
+0002f530: 7263 653a 0a20 2020 2020 2020 2020 2020  rce:.           
+0002f540: 2020 2020 2069 6620 7375 625f 6f70 743a       if sub_opt:
+0002f550: 2073 7562 5f6f 7074 3d73 7562 5f6f 7074   sub_opt=sub_opt
+0002f560: 2b27 6627 0a20 2020 2020 2020 2020 2020  +'f'.           
+0002f570: 2020 2020 2065 6c73 653a 2073 7562 5f6f       else: sub_o
+0002f580: 7074 3d27 2d66 270a 2020 2020 2020 2020  pt='-f'.        
+0002f590: 2020 2020 7273 6865 6c6c 2827 726d 202d      rshell('rm -
+0002f5a0: 6920 7b7d 272e 666f 726d 6174 2873 7562  i {}'.format(sub
+0002f5b0: 5f6f 7074 292b 4a6f 696e 2861 7267 732c  _opt)+Join(args,
+0002f5c0: 2720 2729 2c69 6e74 6572 6163 7469 7665  ' '),interactive
+0002f5d0: 3d54 7275 6529 0a20 2020 2020 2020 2065  =True).        e
+0002f5e0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0002f5f0: 2066 6f72 2061 7267 2069 6e20 6172 6773   for arg in args
+0002f600: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002f610: 2020 6966 2061 7267 5b30 5d20 3d3d 2027    if arg[0] == '
+0002f620: 2d27 3a0a 2020 2020 2020 2020 2020 2020  -':.            
+0002f630: 2020 2020 2020 2069 6620 2772 2720 696e         if 'r' in
+0002f640: 2061 7267 3a0a 2020 2020 2020 2020 2020   arg:.          
+0002f650: 2020 2020 2020 2020 2020 2020 7375 625f              sub_
+0002f660: 6469 723d 5472 7565 0a20 2020 2020 2020  dir=True.       
+0002f670: 2020 2020 2020 2020 2020 2020 6966 2027              if '
+0002f680: 6627 2069 6e20 6172 673a 0a20 2020 2020  f' in arg:.     
+0002f690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f6a0: 2066 6f72 6365 3d54 7275 650a 2020 2020   force=True.    
+0002f6b0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0002f6c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002f6d0: 2020 2020 2020 6966 206f 732e 6973 6669        if os.isfi
+0002f6e0: 6c65 2861 7267 293a 0a20 2020 2020 2020  le(arg):.       
 0002f6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f700: 2020 2020 656c 6966 206f 732e 6973 6469      elif os.isdi
-0002f710: 7228 6172 6729 3a0a 2020 2020 2020 2020  r(arg):.        
-0002f720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f730: 6966 2073 7562 5f64 6972 3a0a 2020 2020  if sub_dir:.    
-0002f740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f750: 2020 2020 2020 2020 6966 206e 6f74 2066          if not f
-0002f760: 6f72 6365 3a0a 2020 2020 2020 2020 2020  orce:.          
-0002f770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f780: 2020 2020 2020 796e 3d63 6c69 5f69 6e70        yn=cli_inp
-0002f790: 7574 2827 4465 6c65 7465 207b 7d20 2859  ut('Delete {} (Y
-0002f7a0: 2f4e 293f 2729 0a20 2020 2020 2020 2020  /N)?').         
+0002f700: 2069 6620 6e6f 7420 666f 7263 653a 0a20   if not force:. 
+0002f710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f720: 2020 2020 2020 2020 2020 2079 6e3d 636c             yn=cl
+0002f730: 695f 696e 7075 7428 2744 656c 6574 6520  i_input('Delete 
+0002f740: 7b7d 2028 592f 4e29 3f27 290a 2020 2020  {} (Y/N)?').    
+0002f750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f760: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
+0002f770: 7369 6e73 7461 6e63 6528 796e 2c73 7472  sinstance(yn,str
+0002f780: 2920 6f72 2079 6e2e 6c6f 7765 7228 2920  ) or yn.lower() 
+0002f790: 6e6f 7420 696e 205b 2779 272c 2779 6573  not in ['y','yes
+0002f7a0: 275d 3a20 636f 6e74 696e 7565 0a20 2020  ']: continue.   
 0002f7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f7c0: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
-0002f7d0: 696e 7374 616e 6365 2879 6e2c 7374 7229  instance(yn,str)
-0002f7e0: 206f 7220 796e 2e6c 6f77 6572 2829 206e   or yn.lower() n
-0002f7f0: 6f74 2069 6e20 5b27 7927 2c27 7965 7327  ot in ['y','yes'
-0002f800: 5d3a 2063 6f6e 7469 6e75 650a 2020 2020  ]: continue.    
-0002f810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f820: 2020 2020 2020 2020 7368 7574 696c 2e72          shutil.r
-0002f830: 6d74 7265 6528 6172 6729 0a20 2020 2020  mtree(arg).     
-0002f840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f850: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002f860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f870: 2020 2020 2070 7269 6e74 2827 2727 6361       print('''ca
-0002f880: 6e27 7420 6465 6c65 7465 2064 6972 6563  n't delete direc
-0002f890: 746f 7279 3a7b 7d27 2727 2e66 6f72 6d61  tory:{}'''.forma
-0002f8a0: 7428 6172 6729 290a 2020 2020 2020 2020  t(arg)).        
-0002f8b0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0002f8c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002f8d0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-0002f8e0: 2727 2763 616e 2774 2064 656c 6574 6520  '''can't delete 
-0002f8f0: 7b7d 2727 272e 666f 726d 6174 2861 7267  {}'''.format(arg
-0002f900: 2929 0a20 2020 2072 6574 7572 6e20 6f70  )).    return op
-0002f910: 7473 2e67 6574 2827 6465 6661 756c 7427  ts.get('default'
-0002f920: 290a 0a23 4e65 7720 434c 4153 530a 2363  )..#New CLASS.#c
-0002f930: 6c61 7373 204e 414d 4528 293a 0a23 2020  lass NAME():.#  
-0002f940: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
-0002f950: 656c 662c 2e2e 2e29 3a20 2349 6e69 7469  elf,...): #Initi
-0002f960: 616c 697a 6520 6461 7461 0a23 2020 2020  alize data.#    
-0002f970: 2020 2020 7365 6c66 2e64 6174 613d 2e2e      self.data=..
-0002f980: 2e2e 0a23 2020 2020 6465 6620 5f5f 6e65  ...#    def __ne
-0002f990: 775f 5f28 636c 732c 2a69 6e70 7329 3a20  w__(cls,*inps): 
-0002f9a0: 3f3f 3f0a 2320 2020 2020 2020 202e 2e2e  ???.#        ...
-0002f9b0: 2e0a 2320 2020 2064 6566 205f 5f72 6570  ..#    def __rep
-0002f9c0: 725f 5f28 7365 6c66 293a 2023 2072 6570  r__(self): # rep
-0002f9d0: 6c79 2073 656c 662e 6461 7461 2062 6163  ly self.data bac
-0002f9e0: 6b20 746f 2074 6865 2043 6c61 7373 2773  k to the Class's
-0002f9f0: 206f 7574 7075 7420 613d 3c4e 414d 453e   output a=<NAME>
-0002fa00: 285b 2761 275d 292c 2072 6574 7572 6e20  (['a']), return 
-0002fa10: 7468 6520 6461 7461 2074 6f20 610a 2320  the data to a.# 
-0002fa20: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-0002fa30: 7072 2873 656c 662e 6461 7461 290a 2320  pr(self.data).# 
-0002fa40: 2020 2064 6566 203c 6e65 7720 6675 6e63     def <new func
-0002fa50: 3e28 7365 6c66 2c78 7878 293a 0a23 2020  >(self,xxx):.#  
-0002fa60: 2020 2020 2020 6461 7461 3d73 656c 6620        data=self 
-0002fa70: 2320 6765 7420 6f72 6967 696e 616c 2064  # get original d
-0002fa80: 6174 6120 746f 2064 6174 6120 7661 7269  ata to data vari
-0002fa90: 6162 6c65 0a23 2020 2020 2020 2020 7375  able.#        su
-0002faa0: 7065 7228 292e 3c6f 7269 6769 6e61 6c20  per().<original 
-0002fab0: 6675 6e63 206e 616d 653e 2878 7878 7829  func name>(xxxx)
-0002fac0: 2023 2075 7369 6e67 206f 7269 6769 6e61   # using origina
-0002fad0: 6c20 6675 6e63 7469 6f6e 0a0a 636c 6173  l function..clas
-0002fae0: 7320 4c49 5354 286c 6973 7429 3a0a 2020  s LIST(list):.  
-0002faf0: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
-0002fb00: 656c 662c 2a69 6e70 732c 6d65 7267 653d  elf,*inps,merge=
-0002fb10: 4661 6c73 652c 756e 6971 3d46 616c 7365  False,uniq=False
-0002fb20: 293a 0a20 2020 2020 2020 2069 6620 6c65  ):.        if le
-0002fb30: 6e28 696e 7073 2920 3d3d 2031 2061 6e64  n(inps) == 1 and
-0002fb40: 2069 7369 6e73 7461 6e63 6528 696e 7073   isinstance(inps
-0002fb50: 5b30 5d2c 286c 6973 742c 7475 706c 6529  [0],(list,tuple)
-0002fb60: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-0002fb70: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
-0002fb80: 6920 666f 7220 6920 696e 2069 6e70 735b  i for i in inps[
-0002fb90: 305d 290a 2020 2020 2020 2020 656c 7365  0]).        else
-0002fba0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0002fbb0: 206d 6572 6765 3a0a 2020 2020 2020 2020   merge:.        
-0002fbc0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-0002fbd0: 2069 6e70 733a 0a20 2020 2020 2020 2020   inps:.         
-0002fbe0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-0002fbf0: 696e 7374 616e 6365 2869 2c28 7479 7065  instance(i,(type
-0002fc00: 2873 656c 6629 2c6c 6973 7429 293a 0a20  (self),list)):. 
-0002fc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002fc20: 2020 2020 2020 2073 7570 6572 2829 2e65         super().e
-0002fc30: 7874 656e 6428 6929 0a20 2020 2020 2020  xtend(i).       
-0002fc40: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0002fc50: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0002fc60: 2020 2020 2020 2020 2020 2073 7570 6572             super
-0002fc70: 2829 2e61 7070 656e 6428 6929 0a20 2020  ().append(i).   
-0002fc80: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0002fc90: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0002fca0: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
-0002fcb0: 6920 666f 7220 6920 696e 2069 6e70 7329  i for i in inps)
-0002fcc0: 0a20 2020 2020 2020 2069 6620 756e 6971  .        if uniq
-0002fcd0: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-0002fce0: 6c66 2e55 6e69 7128 290a 0a20 2020 2064  lf.Uniq()..    d
-0002fcf0: 6566 2041 7070 656e 6428 7365 6c66 2c2a  ef Append(self,*
-0002fd00: 696e 7073 2c2a 2a6f 7074 7329 3a0a 2020  inps,**opts):.  
-0002fd10: 2020 2020 2020 756e 6971 3d6f 7074 732e        uniq=opts.
-0002fd20: 6765 7428 2775 6e69 7127 2c46 616c 7365  get('uniq',False
-0002fd30: 290a 2020 2020 2020 2020 7379 6d62 6f6c  ).        symbol
-0002fd40: 3d6f 7074 732e 6765 7428 2773 796d 626f  =opts.get('symbo
-0002fd50: 6c27 2c27 3a77 6869 7465 5f73 7061 6365  l',':white_space
-0002fd60: 3a27 290a 2020 2020 2020 2020 7061 7468  :').        path
-0002fd70: 3d6f 7074 732e 6765 7428 2770 6174 6827  =opts.get('path'
-0002fd80: 2c46 616c 7365 290a 2020 2020 2020 2020  ,False).        
-0002fd90: 6465 6661 756c 743d 6f70 7473 2e67 6574  default=opts.get
-0002fda0: 2827 6465 6661 756c 7427 2c46 616c 7365  ('default',False
-0002fdb0: 290a 2020 2020 2020 2020 666f 7220 7070  ).        for pp
-0002fdc0: 2069 6e20 696e 7073 3a0a 2020 2020 2020   in inps:.      
-0002fdd0: 2020 2020 2020 6966 2054 7970 6528 7070        if Type(pp
-0002fde0: 2c28 2762 7974 6573 272c 2773 7472 2729  ,('bytes','str')
-0002fdf0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0002fe00: 2020 2069 6620 7379 6d62 6f6c 203d 3d20     if symbol == 
-0002fe10: 273a 7768 6974 655f 7370 6163 653a 273a  ':white_space:':
-0002fe20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002fe30: 2020 2020 2070 703d 7070 2e73 7472 6970       pp=pp.strip
-0002fe40: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
-0002fe50: 2020 2020 2020 2073 796d 626f 6c3d 2720         symbol=' 
-0002fe60: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
-0002fe70: 2020 6966 2070 6174 683a 2073 796d 626f    if path: symbo
-0002fe80: 6c3d 272f 270a 2020 2020 2020 2020 2020  l='/'.          
-0002fe90: 2020 2020 2020 666f 7220 7270 2069 6e20        for rp in 
-0002fea0: 5370 6c69 7428 7070 2c73 796d 626f 6c29  Split(pp,symbol)
-0002feb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002fec0: 2020 2020 2020 6966 2072 7020 3d3d 2064        if rp == d
-0002fed0: 6566 6175 6c74 3a20 636f 6e74 696e 7565  efault: continue
-0002fee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002fef0: 2020 2020 2069 6620 756e 6971 2061 6e64       if uniq and
-0002ff00: 2072 7020 696e 2073 656c 663a 2063 6f6e   rp in self: con
-0002ff10: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
-0002ff20: 2020 2020 2020 2020 2020 6966 2070 6174            if pat
-0002ff30: 683a 0a20 2020 2020 2020 2020 2020 2020  h:.             
-0002ff40: 2020 2020 2020 2020 2020 2069 6620 7270             if rp
-0002ff50: 203d 3d20 272e 273a 2063 6f6e 7469 6e75   == '.': continu
-0002ff60: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0002ff70: 2020 2020 2020 2020 2020 6966 2072 7020            if rp 
-0002ff80: 3d3d 2027 2e2e 2720 616e 6420 6c65 6e28  == '..' and len(
-0002ff90: 7365 6c66 293a 0a20 2020 2020 2020 2020  self):.         
-0002ffa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ffb0: 2020 2064 656c 2073 656c 665b 2d31 5d0a     del self[-1].
+0002f7c0: 2020 2020 2023 6f73 2e72 656d 6f76 6528       #os.remove(
+0002f7d0: 6172 6729 0a20 2020 2020 2020 2020 2020  arg).           
+0002f7e0: 2020 2020 2020 2020 2020 2020 206f 732e               os.
+0002f7f0: 756e 6c69 6e6b 2861 7267 290a 2020 2020  unlink(arg).    
+0002f800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f810: 656c 6966 206f 732e 6973 6469 7228 6172  elif os.isdir(ar
+0002f820: 6729 3a0a 2020 2020 2020 2020 2020 2020  g):.            
+0002f830: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0002f840: 7562 5f64 6972 3a0a 2020 2020 2020 2020  ub_dir:.        
+0002f850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f860: 2020 2020 6966 206e 6f74 2066 6f72 6365      if not force
+0002f870: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002f880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f890: 2020 796e 3d63 6c69 5f69 6e70 7574 2827    yn=cli_input('
+0002f8a0: 4465 6c65 7465 207b 7d20 2859 2f4e 293f  Delete {} (Y/N)?
+0002f8b0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+0002f8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f8d0: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
+0002f8e0: 616e 6365 2879 6e2c 7374 7229 206f 7220  ance(yn,str) or 
+0002f8f0: 796e 2e6c 6f77 6572 2829 206e 6f74 2069  yn.lower() not i
+0002f900: 6e20 5b27 7927 2c27 7965 7327 5d3a 2063  n ['y','yes']: c
+0002f910: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
+0002f920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f930: 2020 2020 7368 7574 696c 2e72 6d74 7265      shutil.rmtre
+0002f940: 6528 6172 6729 0a20 2020 2020 2020 2020  e(arg).         
+0002f950: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0002f960: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0002f970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f980: 2070 7269 6e74 2827 2727 6361 6e27 7420   print('''can't 
+0002f990: 6465 6c65 7465 2064 6972 6563 746f 7279  delete directory
+0002f9a0: 3a7b 7d27 2727 2e66 6f72 6d61 7428 6172  :{}'''.format(ar
+0002f9b0: 6729 290a 2020 2020 2020 2020 2020 2020  g)).            
+0002f9c0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0002f9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f9e0: 2020 2020 2020 7072 696e 7428 2727 2763        print('''c
+0002f9f0: 616e 2774 2064 656c 6574 6520 7b7d 2727  an't delete {}''
+0002fa00: 272e 666f 726d 6174 2861 7267 2929 0a20  '.format(arg)). 
+0002fa10: 2020 2072 6574 7572 6e20 6f70 7473 2e67     return opts.g
+0002fa20: 6574 2827 6465 6661 756c 7427 290a 0a23  et('default')..#
+0002fa30: 4e65 7720 434c 4153 530a 2363 6c61 7373  New CLASS.#class
+0002fa40: 204e 414d 4528 293a 0a23 2020 2020 6465   NAME():.#    de
+0002fa50: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
+0002fa60: 2e2e 2e29 3a20 2349 6e69 7469 616c 697a  ...): #Initializ
+0002fa70: 6520 6461 7461 0a23 2020 2020 2020 2020  e data.#        
+0002fa80: 7365 6c66 2e64 6174 613d 2e2e 2e2e 0a23  self.data=.....#
+0002fa90: 2020 2020 6465 6620 5f5f 6e65 775f 5f28      def __new__(
+0002faa0: 636c 732c 2a69 6e70 7329 3a20 3f3f 3f0a  cls,*inps): ???.
+0002fab0: 2320 2020 2020 2020 202e 2e2e 2e0a 2320  #        .....# 
+0002fac0: 2020 2064 6566 205f 5f72 6570 725f 5f28     def __repr__(
+0002fad0: 7365 6c66 293a 2023 2072 6570 6c79 2073  self): # reply s
+0002fae0: 656c 662e 6461 7461 2062 6163 6b20 746f  elf.data back to
+0002faf0: 2074 6865 2043 6c61 7373 2773 206f 7574   the Class's out
+0002fb00: 7075 7420 613d 3c4e 414d 453e 285b 2761  put a=<NAME>(['a
+0002fb10: 275d 292c 2072 6574 7572 6e20 7468 6520  ']), return the 
+0002fb20: 6461 7461 2074 6f20 610a 2320 2020 2020  data to a.#     
+0002fb30: 2020 2072 6574 7572 6e20 7265 7072 2873     return repr(s
+0002fb40: 656c 662e 6461 7461 290a 2320 2020 2064  elf.data).#    d
+0002fb50: 6566 203c 6e65 7720 6675 6e63 3e28 7365  ef <new func>(se
+0002fb60: 6c66 2c78 7878 293a 0a23 2020 2020 2020  lf,xxx):.#      
+0002fb70: 2020 6461 7461 3d73 656c 6620 2320 6765    data=self # ge
+0002fb80: 7420 6f72 6967 696e 616c 2064 6174 6120  t original data 
+0002fb90: 746f 2064 6174 6120 7661 7269 6162 6c65  to data variable
+0002fba0: 0a23 2020 2020 2020 2020 7375 7065 7228  .#        super(
+0002fbb0: 292e 3c6f 7269 6769 6e61 6c20 6675 6e63  ).<original func
+0002fbc0: 206e 616d 653e 2878 7878 7829 2023 2075   name>(xxxx) # u
+0002fbd0: 7369 6e67 206f 7269 6769 6e61 6c20 6675  sing original fu
+0002fbe0: 6e63 7469 6f6e 0a0a 636c 6173 7320 4c49  nction..class LI
+0002fbf0: 5354 286c 6973 7429 3a0a 2020 2020 6465  ST(list):.    de
+0002fc00: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
+0002fc10: 2a69 6e70 732c 6d65 7267 653d 4661 6c73  *inps,merge=Fals
+0002fc20: 652c 756e 6971 3d46 616c 7365 293a 0a20  e,uniq=False):. 
+0002fc30: 2020 2020 2020 2069 6620 6c65 6e28 696e         if len(in
+0002fc40: 7073 2920 3d3d 2031 2061 6e64 2069 7369  ps) == 1 and isi
+0002fc50: 6e73 7461 6e63 6528 696e 7073 5b30 5d2c  nstance(inps[0],
+0002fc60: 286c 6973 742c 7475 706c 6529 293a 0a20  (list,tuple)):. 
+0002fc70: 2020 2020 2020 2020 2020 2073 7570 6572             super
+0002fc80: 2829 2e5f 5f69 6e69 745f 5f28 6920 666f  ().__init__(i fo
+0002fc90: 7220 6920 696e 2069 6e70 735b 305d 290a  r i in inps[0]).
+0002fca0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0002fcb0: 2020 2020 2020 2020 2020 6966 206d 6572            if mer
+0002fcc0: 6765 3a0a 2020 2020 2020 2020 2020 2020  ge:.            
+0002fcd0: 2020 2020 666f 7220 6920 696e 2069 6e70      for i in inp
+0002fce0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+0002fcf0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0002fd00: 616e 6365 2869 2c28 7479 7065 2873 656c  ance(i,(type(sel
+0002fd10: 6629 2c6c 6973 7429 293a 0a20 2020 2020  f),list)):.     
+0002fd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fd30: 2020 2073 7570 6572 2829 2e65 7874 656e     super().exten
+0002fd40: 6428 6929 0a20 2020 2020 2020 2020 2020  d(i).           
+0002fd50: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0002fd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fd70: 2020 2020 2020 2073 7570 6572 2829 2e61         super().a
+0002fd80: 7070 656e 6428 6929 0a20 2020 2020 2020  ppend(i).       
+0002fd90: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0002fda0: 2020 2020 2020 2020 2020 2073 7570 6572             super
+0002fdb0: 2829 2e5f 5f69 6e69 745f 5f28 6920 666f  ().__init__(i fo
+0002fdc0: 7220 6920 696e 2069 6e70 7329 0a20 2020  r i in inps).   
+0002fdd0: 2020 2020 2069 6620 756e 6971 3a0a 2020       if uniq:.  
+0002fde0: 2020 2020 2020 2020 2020 7365 6c66 2e55            self.U
+0002fdf0: 6e69 7128 290a 0a20 2020 2064 6566 2041  niq()..    def A
+0002fe00: 7070 656e 6428 7365 6c66 2c2a 696e 7073  ppend(self,*inps
+0002fe10: 2c2a 2a6f 7074 7329 3a0a 2020 2020 2020  ,**opts):.      
+0002fe20: 2020 756e 6971 3d6f 7074 732e 6765 7428    uniq=opts.get(
+0002fe30: 2775 6e69 7127 2c46 616c 7365 290a 2020  'uniq',False).  
+0002fe40: 2020 2020 2020 7379 6d62 6f6c 3d6f 7074        symbol=opt
+0002fe50: 732e 6765 7428 2773 796d 626f 6c27 2c27  s.get('symbol','
+0002fe60: 3a77 6869 7465 5f73 7061 6365 3a27 290a  :white_space:').
+0002fe70: 2020 2020 2020 2020 7061 7468 3d6f 7074          path=opt
+0002fe80: 732e 6765 7428 2770 6174 6827 2c46 616c  s.get('path',Fal
+0002fe90: 7365 290a 2020 2020 2020 2020 6465 6661  se).        defa
+0002fea0: 756c 743d 6f70 7473 2e67 6574 2827 6465  ult=opts.get('de
+0002feb0: 6661 756c 7427 2c46 616c 7365 290a 2020  fault',False).  
+0002fec0: 2020 2020 2020 666f 7220 7070 2069 6e20        for pp in 
+0002fed0: 696e 7073 3a0a 2020 2020 2020 2020 2020  inps:.          
+0002fee0: 2020 6966 2054 7970 6528 7070 2c28 2762    if Type(pp,('b
+0002fef0: 7974 6573 272c 2773 7472 2729 293a 0a20  ytes','str')):. 
+0002ff00: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002ff10: 6620 7379 6d62 6f6c 203d 3d20 273a 7768  f symbol == ':wh
+0002ff20: 6974 655f 7370 6163 653a 273a 0a20 2020  ite_space:':.   
+0002ff30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ff40: 2070 703d 7070 2e73 7472 6970 2829 0a20   pp=pp.strip(). 
+0002ff50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ff60: 2020 2073 796d 626f 6c3d 2720 270a 2020     symbol=' '.  
+0002ff70: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002ff80: 2070 6174 683a 2073 796d 626f 6c3d 272f   path: symbol='/
+0002ff90: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+0002ffa0: 2020 666f 7220 7270 2069 6e20 5370 6c69    for rp in Spli
+0002ffb0: 7428 7070 2c73 796d 626f 6c29 3a0a 2020  t(pp,symbol):.  
 0002ffc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ffd0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-0002ffe0: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
-0002fff0: 2020 2020 2020 2020 2073 656c 662e 6170           self.ap
-00030000: 7065 6e64 2872 7029 0a20 2020 2020 2020  pend(rp).       
-00030010: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00030020: 2020 2020 2020 2020 2020 2069 6620 756e             if un
-00030030: 6971 2061 6e64 2070 7020 696e 2073 656c  iq and pp in sel
-00030040: 663a 2063 6f6e 7469 6e75 650a 2020 2020  f: continue.    
-00030050: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00030060: 2e61 7070 656e 6428 7070 290a 2020 2020  .append(pp).    
-00030070: 2020 2020 7265 7475 726e 2073 656c 660a      return self.
-00030080: 0a20 2020 2064 6566 2055 6e69 7128 7365  .    def Uniq(se
-00030090: 6c66 2c2a 696e 7073 2c2a 2a6f 7074 7329  lf,*inps,**opts)
-000300a0: 3a0a 2020 2020 2020 2020 7379 6d62 6f6c  :.        symbol
-000300b0: 3d6f 7074 732e 6765 7428 2773 796d 626f  =opts.get('symbo
-000300c0: 6c27 2c6f 7074 732e 6765 7428 2773 706c  l',opts.get('spl
-000300d0: 6974 272c 6f70 7473 2e67 6574 2827 7370  it',opts.get('sp
-000300e0: 6c69 745f 7379 6d62 6f6c 2729 2929 0a20  lit_symbol'))). 
-000300f0: 2020 2020 2020 2070 6174 683d 6f70 7473         path=opts
-00030100: 2e67 6574 2827 7061 7468 272c 4661 6c73  .get('path',Fals
-00030110: 6529 0a20 2020 2020 2020 2069 6620 7061  e).        if pa
-00030120: 7468 3a20 7379 6d62 6f6c 3d27 2f27 0a20  th: symbol='/'. 
-00030130: 2020 2020 2020 2064 6566 6175 6c74 3d6f         default=o
-00030140: 7074 732e 6765 7428 2764 6566 6175 6c74  pts.get('default
-00030150: 272c 4661 6c73 6529 0a20 2020 2020 2020  ',False).       
-00030160: 2072 743d 5b5d 0a20 2020 2020 2020 2066   rt=[].        f
-00030170: 6f72 2070 7020 696e 2073 656c 6620 2b20  or pp in self + 
-00030180: 6c69 7374 2869 6e70 7329 3a0a 2020 2020  list(inps):.    
-00030190: 2020 2020 2020 2020 6966 2054 7970 6528          if Type(
-000301a0: 7070 2c28 2762 7974 6573 272c 2773 7472  pp,('bytes','str
-000301b0: 2729 293a 0a20 2020 2020 2020 2020 2020  ')):.           
-000301c0: 2020 2020 2069 6620 7379 6d62 6f6c 206f       if symbol o
-000301d0: 7220 7061 7468 3a0a 2020 2020 2020 2020  r path:.        
-000301e0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-000301f0: 7270 2069 6e20 5370 6c69 7428 5374 7269  rp in Split(Stri
-00030200: 7028 7070 2920 6966 2073 796d 626f 6c20  p(pp) if symbol 
-00030210: 3d3d 2027 3a77 6869 7465 5f73 7061 6365  == ':white_space
-00030220: 3a27 2065 6c73 6520 7070 2c27 2027 2069  :' else pp,' ' i
-00030230: 6620 7379 6d62 6f6c 3d3d 273a 7768 6974  f symbol==':whit
-00030240: 655f 7370 6163 653a 2720 656c 7365 2073  e_space:' else s
-00030250: 796d 626f 6c29 3a0a 2020 2020 2020 2020  ymbol):.        
-00030260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030270: 6966 2072 7020 6e6f 7420 696e 2072 7420  if rp not in rt 
-00030280: 616e 6420 7270 2021 3d20 6465 6661 756c  and rp != defaul
-00030290: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-000302a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000302b0: 6620 7061 7468 3a0a 2020 2020 2020 2020  f path:.        
-000302c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000302d0: 2020 2020 2020 2020 6966 2072 7020 3d3d          if rp ==
-000302e0: 2027 2e27 3a20 636f 6e74 696e 7565 0a20   '.': continue. 
-000302f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030300: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00030310: 6620 7270 203d 3d20 272e 2e27 2061 6e64  f rp == '..' and
-00030320: 206c 656e 2872 7429 3a0a 2020 2020 2020   len(rt):.      
-00030330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030340: 2020 2020 2020 2020 2020 2020 2020 6465                de
-00030350: 6c20 7274 5b2d 315d 0a20 2020 2020 2020  l rt[-1].       
-00030360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030370: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-00030380: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
-00030390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000303a0: 2020 7274 2e61 7070 656e 6428 7270 290a    rt.append(rp).
-000303b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000303c0: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
-000303d0: 2020 2020 2020 2020 2069 6620 7070 206e           if pp n
-000303e0: 6f74 2069 6e20 7274 3a20 7274 2e61 7070  ot in rt: rt.app
-000303f0: 656e 6428 7070 290a 2020 2020 2020 2020  end(pp).        
-00030400: 7375 7065 7228 292e 5f5f 696e 6974 5f5f  super().__init__
-00030410: 2869 2066 6f72 2069 2069 6e20 7274 290a  (i for i in rt).
-00030420: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00030430: 656c 660a 0a20 2020 2064 6566 2044 656c  elf..    def Del
-00030440: 6574 6528 7365 6c66 2c2a 696e 7073 2c2a  ete(self,*inps,*
-00030450: 2a6f 7074 7329 3a0a 2020 2020 2020 2020  *opts):.        
-00030460: 6669 6e64 3d6f 7074 732e 6765 7428 2766  find=opts.get('f
-00030470: 696e 6427 2c27 696e 6465 7827 290a 2020  ind','index').  
-00030480: 2020 2020 2020 616c 6c5f 6461 7461 3d6f        all_data=o
-00030490: 7074 732e 6765 7428 2761 6c6c 272c 6f70  pts.get('all',op
-000304a0: 7473 2e67 6574 2827 616c 6c5f 6461 7461  ts.get('all_data
-000304b0: 272c 6f70 7473 2e67 6574 2827 6465 6c5f  ',opts.get('del_
-000304c0: 616c 6c27 2929 290a 2020 2020 2020 2020  all'))).        
-000304d0: 6465 6661 756c 743d 6f70 7473 2e67 6574  default=opts.get
-000304e0: 2827 6465 6661 756c 7427 2c46 616c 7365  ('default',False
-000304f0: 290a 2020 2020 2020 2020 6966 2066 696e  ).        if fin
-00030500: 6420 696e 205b 2769 6e64 6578 272c 2769  d in ['index','i
-00030510: 6427 5d3a 2023 2066 6f72 206b 6565 7020  d']: # for keep 
-00030520: 6f72 6967 696e 616c 2069 6e64 6578 0a20  original index. 
-00030530: 2020 2020 2020 2020 2020 2074 6d70 3d5b             tmp=[
-00030540: 5d0a 2020 2020 2020 2020 2020 2020 666f  ].            fo
-00030550: 7220 6920 696e 2072 616e 6765 2830 2c6c  r i in range(0,l
-00030560: 656e 2873 656c 6629 293a 0a20 2020 2020  en(self)):.     
-00030570: 2020 2020 2020 2020 2020 2069 6620 6920             if i 
-00030580: 696e 2069 6e70 733a 2063 6f6e 7469 6e75  in inps: continu
-00030590: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000305a0: 2020 746d 702e 6170 7065 6e64 2873 656c    tmp.append(sel
-000305b0: 665b 695d 290a 2020 2020 2020 2020 2020  f[i]).          
-000305c0: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
-000305d0: 5f5f 2869 2066 6f72 2069 2069 6e20 746d  __(i for i in tm
-000305e0: 7029 0a20 2020 2020 2020 2065 6c73 653a  p).        else:
-000305f0: 2023 2044 6174 610a 2020 2020 2020 2020   # Data.        
-00030600: 2020 2020 666f 7220 6920 696e 2069 6e70      for i in inp
-00030610: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-00030620: 2020 2069 6620 616c 6c5f 6461 7461 3a0a     if all_data:.
-00030630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030640: 2020 2020 7768 696c 6520 6920 696e 2073      while i in s
-00030650: 656c 663a 0a20 2020 2020 2020 2020 2020  elf:.           
-00030660: 2020 2020 2020 2020 2020 2020 2073 7570               sup
-00030670: 6572 2829 2e72 656d 6f76 6528 6929 0a20  er().remove(i). 
-00030680: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00030690: 6c69 6620 6920 696e 2073 656c 663a 0a20  lif i in self:. 
-000306a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000306b0: 2020 2073 7570 6572 2829 2e72 656d 6f76     super().remov
-000306c0: 6528 6929 0a0a 2020 2020 6465 6620 4765  e(i)..    def Ge
-000306d0: 7428 7365 6c66 2c2a 696e 7073 2c2a 2a6f  t(self,*inps,**o
-000306e0: 7074 7329 3a0a 2020 2020 2020 2020 6966  pts):.        if
-000306f0: 206e 6f74 2069 6e70 733a 2072 6574 7572   not inps: retur
-00030700: 6e20 7365 6c66 0a20 2020 2020 2020 2066  n self.        f
-00030710: 696e 643d 6f70 7473 2e67 6574 2827 6669  ind=opts.get('fi
-00030720: 6e64 272c 2764 6174 6127 290a 2020 2020  nd','data').    
-00030730: 2020 2020 6465 6661 756c 743d 6f70 7473      default=opts
-00030740: 2e67 6574 2827 6465 6661 756c 7427 2c4e  .get('default',N
-00030750: 6f6e 6529 0a20 2020 2020 2020 206f 7574  one).        out
-00030760: 3d6f 7074 732e 6765 7428 276f 7574 272c  =opts.get('out',
-00030770: 6c69 7374 290a 2020 2020 2020 2020 6572  list).        er
-00030780: 723d 6f70 7473 2e67 6574 2827 6572 7227  r=opts.get('err'
-00030790: 2c46 616c 7365 290a 2020 2020 2020 2020  ,False).        
-000307a0: 6966 206c 656e 2873 656c 6629 203d 3d20  if len(self) == 
-000307b0: 3020 616e 6420 6572 723a 0a20 2020 2020  0 and err:.     
-000307c0: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
-000307d0: 6661 756c 740a 2020 2020 2020 2020 7274  fault.        rt
-000307e0: 3d5b 5d0a 2020 2020 2020 2020 6966 2066  =[].        if f
-000307f0: 696e 6420 696e 205b 2769 6e64 6578 272c  ind in ['index',
-00030800: 2769 6478 275d 3a0a 2020 2020 2020 2020  'idx']:.        
-00030810: 2020 2020 7274 3d73 656c 662e 496e 6465      rt=self.Inde
-00030820: 7828 2a69 6e70 732c 6465 6661 756c 743d  x(*inps,default=
-00030830: 6465 6661 756c 742c 6f75 743d 6f75 7429  default,out=out)
-00030840: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00030850: 2020 2020 2020 2020 2020 2072 743d 4c69             rt=Li
-00030860: 7374 282a 7365 6c66 2c69 6478 3d69 6e70  st(*self,idx=inp
-00030870: 732c 6d6f 6465 3d27 6572 7227 2069 6620  s,mode='err' if 
-00030880: 6572 7220 656c 7365 2027 6175 746f 272c  err else 'auto',
-00030890: 6465 6661 756c 743d 6465 6661 756c 7429  default=default)
-000308a0: 0a20 2020 2020 2020 2069 6620 7274 3a0a  .        if rt:.
-000308b0: 2020 2020 2020 2020 2020 2020 6966 206f              if o
-000308c0: 7574 2069 6e20 5b74 7570 6c65 2c27 7475  ut in [tuple,'tu
-000308d0: 706c 6527 5d3a 0a20 2020 2020 2020 2020  ple']:.         
-000308e0: 2020 2020 2020 2072 6574 7572 6e20 7475         return tu
-000308f0: 706c 6528 7274 290a 2020 2020 2020 2020  ple(rt).        
-00030900: 2020 2020 656c 6966 2049 734e 6f6e 6528      elif IsNone(
-00030910: 6f75 742c 6368 6b5f 7661 6c3d 5b4e 6f6e  out,chk_val=[Non
-00030920: 652c 2727 2c27 7261 7727 5d29 3a0a 2020  e,'','raw']):.  
-00030930: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00030940: 206c 656e 2872 7429 203d 3d20 313a 2072   len(rt) == 1: r
-00030950: 6574 7572 6e20 7274 5b30 5d0a 2020 2020  eturn rt[0].    
-00030960: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00030970: 740a 2020 2020 2020 2020 7265 7475 726e  t.        return
-00030980: 2064 6566 6175 6c74 0a0a 2020 2020 6465   default..    de
-00030990: 6620 496e 6465 7828 7365 6c66 2c2a 696e  f Index(self,*in
-000309a0: 7073 2c2a 2a6f 7074 7329 3a0a 2020 2020  ps,**opts):.    
-000309b0: 2020 2020 6d69 7865 643d 6f70 7473 2e67      mixed=opts.g
-000309c0: 6574 2827 616e 7927 2c6f 7074 732e 6765  et('any',opts.ge
-000309d0: 7428 276d 6978 6564 272c 6f70 7473 2e67  t('mixed',opts.g
-000309e0: 6574 2827 4f52 272c 5472 7565 2929 290a  et('OR',True))).
-000309f0: 2020 2020 2020 2020 616c 6c5f 6461 7461          all_data
-00030a00: 3d6f 7074 732e 6765 7428 2761 6c6c 272c  =opts.get('all',
-00030a10: 6f70 7473 2e67 6574 2827 414c 4c27 2c6f  opts.get('ALL',o
-00030a20: 7074 732e 6765 7428 2765 7665 7279 7468  pts.get('everyth
-00030a30: 696e 6727 2929 290a 2020 2020 2020 2020  ing'))).        
-00030a40: 6f75 743d 6f70 7473 2e67 6574 2827 6f75  out=opts.get('ou
-00030a50: 7427 290a 2020 2020 2020 2020 7065 656c  t').        peel
-00030a60: 3d6f 7074 732e 6765 7428 2770 6565 6c27  =opts.get('peel'
-00030a70: 2c54 7275 6529 0a20 2020 2020 2020 2064  ,True).        d
-00030a80: 6566 6175 6c74 3d6f 7074 732e 6765 7428  efault=opts.get(
-00030a90: 2764 6566 6175 6c74 272c 4661 6c73 6529  'default',False)
-00030aa0: 0a20 2020 2020 2020 2072 743d 5b5d 0a20  .        rt=[]. 
-00030ab0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00030ac0: 696e 7073 3a0a 2020 2020 2020 2020 2020  inps:.          
-00030ad0: 2020 7474 3d5b 5d0a 2020 2020 2020 2020    tt=[].        
-00030ae0: 2020 2020 666f 7220 7a20 696e 2072 616e      for z in ran
-00030af0: 6765 2830 2c6c 656e 2873 656c 6629 293a  ge(0,len(self)):
-00030b00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00030b10: 2069 6620 5479 7065 2869 2c28 2773 7472   if Type(i,('str
-00030b20: 272c 2762 7974 6573 2729 293a 0a20 2020  ','bytes')):.   
-00030b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030b40: 206a 3d69 2e72 6570 6c61 6365 2827 2a27   j=i.replace('*'
-00030b50: 2c27 2e2b 2729 2e72 6570 6c61 6365 2827  ,'.+').replace('
-00030b60: 3f27 2c27 2e27 290a 2020 2020 2020 2020  ?','.').        
-00030b70: 2020 2020 2020 2020 2020 2020 6d6d 3d72              mm=r
-00030b80: 652e 636f 6d70 696c 6528 6a29 0a20 2020  e.compile(j).   
-00030b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030ba0: 2069 6620 626f 6f6c 2872 652e 6d61 7463   if bool(re.matc
-00030bb0: 6828 6d6d 2c73 656c 665b 7a5d 2929 3a0a  h(mm,self[z])):.
-00030bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030bd0: 2020 2020 2020 2020 7474 2e61 7070 656e          tt.appen
-00030be0: 6428 7a29 0a20 2020 2020 2020 2020 2020  d(z).           
-00030bf0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00030c00: 6e6f 7420 616c 6c5f 6461 7461 3a20 6272  not all_data: br
-00030c10: 6561 6b0a 2020 2020 2020 2020 2020 2020  eak.            
-00030c20: 2020 2020 656c 6966 2073 656c 665b 7a5d      elif self[z]
-00030c30: 203d 3d20 693a 0a20 2020 2020 2020 2020   == i:.         
-00030c40: 2020 2020 2020 2020 2020 2074 742e 6170             tt.ap
-00030c50: 7065 6e64 287a 290a 2020 2020 2020 2020  pend(z).        
-00030c60: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00030c70: 6f74 2061 6c6c 5f64 6174 613a 2062 7265  ot all_data: bre
-00030c80: 616b 0a20 2020 2020 2020 2020 2020 2069  ak.            i
-00030c90: 6620 6d69 7865 643a 0a20 2020 2020 2020  f mixed:.       
-00030ca0: 2020 2020 2020 2020 2072 743d 7274 2b74           rt=rt+t
-00030cb0: 740a 2020 2020 2020 2020 2020 2020 656c  t.            el
-00030cc0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00030cd0: 2020 2020 7274 2e61 7070 656e 6428 7475      rt.append(tu
-00030ce0: 706c 6528 7474 2929 0a20 2020 2020 2020  ple(tt)).       
-00030cf0: 2072 6574 7572 6e20 4f75 7446 6f72 6d61   return OutForma
-00030d00: 7428 7274 2c6f 7574 3d6f 7574 2c70 6565  t(rt,out=out,pee
-00030d10: 6c3d 7065 656c 2c6f 7267 3d73 656c 662c  l=peel,org=self,
-00030d20: 6465 6661 756c 743d 6465 6661 756c 7429  default=default)
-00030d30: 0a0a 2020 2020 6465 6620 496e 7365 7274  ..    def Insert
-00030d40: 2873 656c 662c 2a69 6e70 732c 2a2a 6f70  (self,*inps,**op
-00030d50: 7473 293a 0a20 2020 2020 2020 2061 743d  ts):.        at=
-00030d60: 6f70 7473 2e67 6574 2827 6174 272c 2d31  opts.get('at',-1
-00030d70: 290a 2020 2020 2020 2020 6465 6661 756c  ).        defaul
-00030d80: 743d 6f70 7473 2e67 6574 2827 6465 6661  t=opts.get('defa
-00030d90: 756c 7427 2c46 616c 7365 290a 2020 2020  ult',False).    
-00030da0: 2020 2020 6572 723d 6f70 7473 2e67 6574      err=opts.get
-00030db0: 2827 6572 7227 2c46 616c 7365 290a 2020  ('err',False).  
-00030dc0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00030dd0: 6e63 6528 6174 2c73 7472 293a 0a20 2020  nce(at,str):.   
-00030de0: 2020 2020 2020 2020 2069 6620 6174 2069           if at i
-00030df0: 6e20 5b27 7374 6172 7427 2c27 6669 7273  n ['start','firs
-00030e00: 7427 5d3a 2072 6f6f 743d 6c69 7374 2869  t']: root=list(i
-00030e10: 6e70 7329 2b73 656c 660a 2020 2020 2020  nps)+self.      
-00030e20: 2020 2020 2020 656c 6966 2061 7420 696e        elif at in
-00030e30: 205b 2765 6e64 272c 276c 6173 7427 5d3a   ['end','last']:
-00030e40: 2072 6f6f 743d 7365 6c66 2b6c 6973 7428   root=self+list(
-00030e50: 696e 7073 290a 2020 2020 2020 2020 656c  inps).        el
-00030e60: 6966 206c 656e 2873 656c 6629 203d 3d20  if len(self) == 
-00030e70: 303a 0a20 2020 2020 2020 2020 2020 2072  0:.            r
-00030e80: 6f6f 743d 6c69 7374 2869 6e70 7329 0a20  oot=list(inps). 
-00030e90: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
-00030ea0: 7374 616e 6365 2861 742c 696e 7429 3a0a  stance(at,int):.
-00030eb0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00030ec0: 656e 2873 656c 6629 203e 3d20 6162 7328  en(self) >= abs(
-00030ed0: 6174 293a 0a20 2020 2020 2020 2020 2020  at):.           
-00030ee0: 2020 2020 2069 6620 6174 203d 3d20 2d31       if at == -1
-00030ef0: 206f 7220 6c65 6e28 7365 6c66 2920 3d3d   or len(self) ==
-00030f00: 2061 743a 0a20 2020 2020 2020 2020 2020   at:.           
-00030f10: 2020 2020 2020 2020 2072 6f6f 743d 7365           root=se
-00030f20: 6c66 2b6c 6973 7428 696e 7073 290a 2020  lf+list(inps).  
-00030f30: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00030f40: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00030f50: 2020 2020 2020 2020 6966 2061 7420 3c20          if at < 
-00030f60: 2d31 3a20 6174 3d61 742b 310a 2020 2020  -1: at=at+1.    
-00030f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030f80: 726f 6f74 3d73 656c 665b 3a61 745d 2b6c  root=self[:at]+l
-00030f90: 6973 7428 696e 7073 292b 7365 6c66 5b61  ist(inps)+self[a
-00030fa0: 743a 5d0a 2020 2020 2020 2020 2020 2020  t:].            
-00030fb0: 656c 6966 206c 656e 2873 656c 6629 203c  elif len(self) <
-00030fc0: 2061 6273 2861 7429 3a0a 2020 2020 2020   abs(at):.      
-00030fd0: 2020 2020 2020 2020 2020 6966 2061 7420            if at 
-00030fe0: 3e20 303a 0a20 2020 2020 2020 2020 2020  > 0:.           
-00030ff0: 2020 2020 2020 2020 2072 6f6f 743d 7365           root=se
-00031000: 6c66 2b6c 6973 7428 696e 7073 290a 2020  lf+list(inps).  
-00031010: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00031020: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00031030: 2020 2020 2020 2020 726f 6f74 3d6c 6973          root=lis
-00031040: 7428 696e 7073 292b 7365 6c66 0a20 2020  t(inps)+self.   
-00031050: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00031060: 2020 2020 2020 2069 6620 6572 723a 0a20         if err:. 
-00031070: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00031080: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
-00031090: 2020 2020 2020 2020 2020 726f 6f74 3d73            root=s
-000310a0: 656c 662b 6c69 7374 2869 6e70 7329 0a20  elf+list(inps). 
-000310b0: 2020 2020 2020 2073 7570 6572 2829 2e5f         super()._
-000310c0: 5f69 6e69 745f 5f28 6920 666f 7220 6920  _init__(i for i 
-000310d0: 696e 2072 6f6f 7429 0a0a 2020 2020 6465  in root)..    de
-000310e0: 6620 5570 6461 7465 2873 656c 662c 2a69  f Update(self,*i
-000310f0: 6e70 732c 2a2a 6f70 7473 293a 0a20 2020  nps,**opts):.   
-00031100: 2020 2020 2061 743d 6f70 7473 2e67 6574       at=opts.get
-00031110: 2827 6174 272c 3029 0a20 2020 2020 2020  ('at',0).       
-00031120: 2065 7272 3d6f 7074 732e 6765 7428 2765   err=opts.get('e
-00031130: 7272 272c 4661 6c73 6529 0a20 2020 2020  rr',False).     
-00031140: 2020 2064 6566 6175 6c74 3d6f 7074 732e     default=opts.
-00031150: 6765 7428 2764 6566 6175 6c74 272c 4661  get('default',Fa
-00031160: 6c73 6529 0a20 2020 2020 2020 206e 3d6c  lse).        n=l
-00031170: 656e 2873 656c 6629 0a20 2020 2020 2020  en(self).       
-00031180: 2069 6620 6e20 3d3d 2030 3a0a 2020 2020   if n == 0:.    
-00031190: 2020 2020 2020 2020 6966 2065 7272 2069          if err i
-000311a0: 7320 5472 7565 3a0a 2020 2020 2020 2020  s True:.        
-000311b0: 2020 2020 2020 2020 7265 7475 726e 2064          return d
-000311c0: 6566 6175 6c74 0a20 2020 2020 2020 2020  efault.         
-000311d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000311e0: 2020 2020 2020 2020 2073 7570 6572 2829           super()
-000311f0: 2e5f 5f69 6e69 745f 5f28 6920 666f 7220  .__init__(i for 
-00031200: 6920 696e 2069 6e70 7329 0a20 2020 2020  i in inps).     
-00031210: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-00031220: 6365 2861 742c 696e 7429 2061 6e64 206e  ce(at,int) and n
-00031230: 203e 2061 743a 0a20 2020 2020 2020 2020   > at:.         
-00031240: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-00031250: 6528 302c 6c65 6e28 696e 7073 2929 3a0a  e(0,len(inps)):.
-00031260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031270: 6966 206e 203e 2061 742b 693a 0a20 2020  if n > at+i:.   
-00031280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031290: 2073 7570 6572 2829 2e69 6e73 6572 7428   super().insert(
-000312a0: 6174 2b69 2c69 6e70 735b 695d 290a 2020  at+i,inps[i]).  
-000312b0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-000312c0: 6966 2065 7272 2069 7320 5472 7565 3a0a  if err is True:.
-000312d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000312e0: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
-000312f0: 6c74 0a20 2020 2020 2020 2020 2020 2020  lt.             
-00031300: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00031310: 2020 2020 2020 2020 2020 2020 2073 7570               sup
-00031320: 6572 2829 2e5f 5f69 6e69 745f 5f28 6920  er().__init__(i 
-00031330: 666f 7220 6920 696e 2073 656c 662b 6c69  for i in self+li
-00031340: 7374 2869 6e70 7329 5b69 3a5d 290a 2020  st(inps)[i:]).  
-00031350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031360: 2020 6272 6561 6b0a 2020 2020 2020 2020    break.        
-00031370: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
-00031380: 6174 2c28 7475 706c 652c 6c69 7374 2929  at,(tuple,list))
-00031390: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-000313a0: 206c 656e 2869 6e70 7329 203d 3d20 6c65   len(inps) == le
-000313b0: 6e28 6174 293a 0a20 2020 2020 2020 2020  n(at):.         
-000313c0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-000313d0: 7261 6e67 6528 302c 6c65 6e28 6174 2929  range(0,len(at))
-000313e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000313f0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00031400: 6e63 6528 6174 5b69 5d2c 696e 7429 2061  nce(at[i],int) a
-00031410: 6e64 206e 203e 2061 745b 695d 3a0a 2020  nd n > at[i]:.  
-00031420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031430: 2020 2020 2020 7375 7065 7228 292e 696e        super().in
-00031440: 7365 7274 2861 745b 695d 2c69 6e70 735b  sert(at[i],inps[
-00031450: 695d 290a 2020 2020 2020 2020 2020 2020  i]).            
-00031460: 2020 2020 2020 2020 656c 6966 2065 7272          elif err
-00031470: 2069 7320 5472 7565 3a0a 2020 2020 2020   is True:.      
-00031480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031490: 2020 7265 7475 726e 2064 6566 6175 6c74    return default
-000314a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000314b0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000314c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000314d0: 2020 2073 7570 6572 2829 2e61 7070 656e     super().appen
-000314e0: 6428 696e 7073 5b69 5d29 0a0a 2020 2020  d(inps[i])..    
-000314f0: 6465 6620 4669 6e64 2873 656c 662c 2a69  def Find(self,*i
-00031500: 6e70 732c 2a2a 6f70 7473 293a 0a20 2020  nps,**opts):.   
-00031510: 2020 2020 2066 696e 643d 6f70 7473 2e67       find=opts.g
-00031520: 6574 2827 6669 6e64 272c 2769 6e64 6578  et('find','index
-00031530: 2729 0a20 2020 2020 2020 2064 6566 6175  ').        defau
-00031540: 6c74 3d6f 7074 732e 6765 7428 2764 6566  lt=opts.get('def
-00031550: 6175 6c74 272c 5b5d 290a 2020 2020 2020  ault',[]).      
-00031560: 2020 7274 3d5b 5d0a 2020 2020 2020 2020    rt=[].        
-00031570: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
-00031580: 2c6c 656e 2873 656c 6629 293a 0a20 2020  ,len(self)):.   
-00031590: 2020 2020 2020 2020 2066 6f72 206a 2069           for j i
-000315a0: 6e20 696e 7073 3a0a 2020 2020 2020 2020  n inps:.        
-000315b0: 2020 2020 2020 2020 6a3d 6a2e 7265 706c          j=j.repl
-000315c0: 6163 6528 272a 272c 272e 2b27 292e 7265  ace('*','.+').re
-000315d0: 706c 6163 6528 273f 272c 272e 2729 0a20  place('?','.'). 
-000315e0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-000315f0: 6d3d 7265 2e63 6f6d 7069 6c65 286a 290a  m=re.compile(j).
-00031600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031610: 6966 2062 6f6f 6c28 7265 2e6d 6174 6368  if bool(re.match
-00031620: 286d 6d2c 7365 6c66 5b69 5d29 293a 0a20  (mm,self[i])):. 
-00031630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031640: 2020 2069 6620 6669 6e64 2069 6e20 5b27     if find in ['
-00031650: 696e 6465 7827 2c27 6964 7827 5d3a 0a20  index','idx']:. 
-00031660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031670: 2020 2020 2020 2072 742e 6170 7065 6e64         rt.append
-00031680: 2869 290a 2020 2020 2020 2020 2020 2020  (i).            
-00031690: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000316a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000316b0: 2020 2020 2020 7274 2e61 7070 656e 6428        rt.append(
-000316c0: 7365 6c66 5b69 5d29 0a20 2020 2020 2020  self[i]).       
-000316d0: 2069 6620 6c65 6e28 7274 293a 0a20 2020   if len(rt):.   
-000316e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000316f0: 7274 0a20 2020 2020 2020 2072 6574 7572  rt.        retur
-00031700: 6e20 6465 6661 756c 740a 0a20 2020 2064  n default..    d
-00031710: 6566 204d 6f76 6532 6669 7273 7428 7365  ef Move2first(se
-00031720: 6c66 2c66 696e 6429 3a0a 2020 2020 2020  lf,find):.      
-00031730: 2020 6966 2054 7970 6528 6669 6e64 2c28    if Type(find,(
-00031740: 274c 4953 5427 2c27 6c69 7374 272c 2774  'LIST','list','t
-00031750: 7570 6c65 2729 293a 0a20 2020 2020 2020  uple')):.       
-00031760: 2020 2020 2073 656c 662e 4465 6c65 7465       self.Delete
-00031770: 282a 6669 6e64 2c66 696e 643d 2764 6174  (*find,find='dat
-00031780: 6127 290a 2020 2020 2020 2020 2020 2020  a').            
-00031790: 7375 7065 7228 292e 5f5f 696e 6974 5f5f  super().__init__
-000317a0: 2869 2066 6f72 2069 2069 6e20 6c69 7374  (i for i in list
-000317b0: 2866 696e 6429 2b73 656c 6629 0a20 2020  (find)+self).   
-000317c0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000317d0: 2020 2020 2020 2073 656c 662e 4465 6c65         self.Dele
-000317e0: 7465 282a 2866 696e 642c 292c 6669 6e64  te(*(find,),find
-000317f0: 3d27 6461 7461 2729 0a20 2020 2020 2020  ='data').       
-00031800: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-00031810: 6e69 745f 5f28 6920 666f 7220 6920 696e  nit__(i for i in
-00031820: 205b 6669 6e64 5d2b 7365 6c66 290a 2020   [find]+self).  
-00031830: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00031840: 660a 0a20 2020 2064 6566 204d 6f76 6532  f..    def Move2
-00031850: 656e 6428 7365 6c66 2c66 696e 6429 3a0a  end(self,find):.
-00031860: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00031870: 7461 6e63 6528 6669 6e64 2c28 6c69 7374  tance(find,(list
-00031880: 2c74 7570 6c65 2929 3a0a 2020 2020 2020  ,tuple)):.      
-00031890: 2020 2020 2020 7365 6c66 2e44 656c 6574        self.Delet
-000318a0: 6528 2a66 696e 642c 6669 6e64 3d27 6461  e(*find,find='da
-000318b0: 7461 2729 0a20 2020 2020 2020 2020 2020  ta').           
-000318c0: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
-000318d0: 5f28 6920 666f 7220 6920 696e 2073 656c  _(i for i in sel
-000318e0: 662b 6c69 7374 2866 696e 6429 290a 2020  f+list(find)).  
-000318f0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00031900: 2020 2020 2020 2020 7365 6c66 2e44 656c          self.Del
-00031910: 6574 6528 2a28 6669 6e64 2c29 2c66 696e  ete(*(find,),fin
-00031920: 643d 2764 6174 6127 290a 2020 2020 2020  d='data').      
-00031930: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
-00031940: 696e 6974 5f5f 2869 2066 6f72 2069 2069  init__(i for i i
-00031950: 6e20 7365 6c66 2b5b 6669 6e64 5d29 0a20  n self+[find]). 
-00031960: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00031970: 6c66 0a0a 2020 2020 6465 6620 536f 7274  lf..    def Sort
-00031980: 2873 656c 662c 7265 7665 7273 653d 4661  (self,reverse=Fa
-00031990: 6c73 652c 6675 6e63 3d4e 6f6e 652c 6f72  lse,func=None,or
-000319a0: 6465 723d 4e6f 6e65 2c66 6965 6c64 3d4e  der=None,field=N
-000319b0: 6f6e 652c 6261 7365 3d27 6b65 7927 2c73  one,base='key',s
-000319c0: 796d 3d4e 6f6e 6529 3a0a 2020 2020 2020  ym=None):.      
-000319d0: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-000319e0: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
-000319f0: 745f 5f28 6920 666f 7220 6920 696e 2053  t__(i for i in S
-00031a00: 6f72 7428 7365 6c66 2c72 6576 6572 7365  ort(self,reverse
-00031a10: 3d72 6576 6572 7365 2c66 756e 633d 6675  =reverse,func=fu
-00031a20: 6e63 2c6f 7264 6572 3d6f 7264 6572 2c66  nc,order=order,f
-00031a30: 6965 6c64 3d66 6965 6c64 2c62 6173 653d  ield=field,base=
-00031a40: 6261 7365 2c73 796d 3d73 796d 2929 0a20  base,sym=sym)). 
-00031a50: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00031a60: 6e20 7365 6c66 0a20 2020 2020 2020 2065  n self.        e
-00031a70: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-00031a80: 2020 2070 7269 6e74 2827 4e6f 7420 7375     print('Not su
-00031a90: 7070 6f72 7420 6d69 7865 6420 7374 7269  pport mixed stri
-00031aa0: 6e67 2061 6e64 2069 6e74 2729 0a0a 6465  ng and int')..de
-00031ab0: 6620 4974 6572 6162 6c65 2869 6e70 2c64  f Iterable(inp,d
-00031ac0: 6566 6175 6c74 3d5b 5d29 3a0a 2020 2020  efault=[]):.    
-00031ad0: 6966 2069 7369 6e73 7461 6e63 6528 696e  if isinstance(in
-00031ae0: 702c 286c 6973 742c 7475 706c 652c 6469  p,(list,tuple,di
-00031af0: 6374 2929 3a0a 2020 2020 2020 2020 7265  ct)):.        re
-00031b00: 7475 726e 2069 6e70 0a20 2020 2072 6574  turn inp.    ret
-00031b10: 7572 6e20 6465 6661 756c 740a 0a64 6566  urn default..def
-00031b20: 204c 6973 7428 2a69 6e70 732c 2a2a 6f70   List(*inps,**op
-00031b30: 7473 293a 0a20 2020 2027 2727 0a20 2020  ts):.    '''.   
-00031b40: 2074 7570 6c65 326c 6973 743a 200a 2020   tuple2list: .  
-00031b50: 2020 2020 2020 5472 7565 203a 2063 6f6e        True : con
-00031b60: 7665 7274 2074 7570 6c65 2064 6174 6120  vert tuple data 
-00031b70: 746f 206c 6973 7420 6461 7461 0a20 2020  to list data.   
-00031b80: 2020 2020 2046 616c 7365 3a20 6170 7065       False: appe
-00031b90: 6e64 2074 7570 6c65 2069 6e74 6f20 6c69  nd tuple into li
-00031ba0: 7374 0a20 2020 203c 6469 6374 2069 6e70  st.    <dict inp
-00031bb0: 7574 3e0a 2020 2020 2069 7465 6d73 203a  ut>.     items :
-00031bc0: 203c 6469 6374 3e2e 6974 656d 7328 290a   <dict>.items().
-00031bd0: 2020 2020 2064 6174 6120 203a 203c 6469       data  : <di
-00031be0: 6374 3e2e 7661 6c75 6528 290a 2020 2020  ct>.value().    
-00031bf0: 2070 6174 6820 203a 2063 6f6e 7665 7274   path  : convert
-00031c00: 203c 6469 6374 3e20 746f 2070 6174 6820   <dict> to path 
-00031c10: 6c69 6b65 206c 6973 7420 285b 2827 2f61  like list ([('/a
-00031c20: 2f62 272c 3129 2c28 272f 612f 6327 2c32  /b',1),('/a/c',2
-00031c30: 292c 2e2e 2e5d 290a 2020 2020 2028 6465  ),...]).     (de
-00031c40: 6661 756c 7429 3a20 3c64 6963 743e 2e6b  fault): <dict>.k
-00031c50: 6579 7328 290a 2020 2020 3c6f 7074 696f  eys().    <optio
-00031c60: 6e3e 0a20 2020 2020 6967 6e6f 7265 733d  n>.     ignores=
-00031c70: 5b5d 2020 203a 2069 676e 6f72 6520 6772  []   : ignore gr
-00031c80: 6f75 7028 6465 6661 756c 743a 206d 6164  oup(default: mad
-00031c90: 6520 746f 206c 6973 742c 2061 6c6c 290a  e to list, all).
-00031ca0: 2020 2020 2069 6478 3d3c 696e 743e 2020       idx=<int>  
-00031cb0: 2020 3a20 6765 7420 3c69 6478 3e20 6461    : get <idx> da
-00031cc0: 7461 0a20 2020 2020 6465 6c3d 3c69 6e74  ta.     del=<int
-00031cd0: 3e20 2020 203a 2064 656c 6574 6520 3c69  >    : delete <i
-00031ce0: 6478 3e0a 2020 2020 2066 6972 7374 3d3c  dx>.     first=<
-00031cf0: 6461 7461 3e20 3a20 6d6f 7665 203c 6461  data> : move <da
-00031d00: 7461 3e20 746f 2066 6972 7374 0a20 2020  ta> to first.   
-00031d10: 2020 656e 643d 3c64 6174 613e 2020 203a    end=<data>   :
-00031d20: 206d 6f76 6520 3c64 6174 613e 2074 6f20   move <data> to 
-00031d30: 656e 640a 2020 2020 2066 696e 643d 3c64  end.     find=<d
-00031d40: 6174 613e 2020 3a20 6765 7420 496e 6465  ata>  : get Inde
-00031d50: 7820 6c69 7374 0a20 2020 2020 756e 6971  x list.     uniq
-00031d60: 3d46 616c 7365 2020 203a 204d 616b 6520  =False   : Make 
-00031d70: 746f 2055 6e69 7120 6461 7461 0a20 2020  to Uniq data.   
-00031d80: 2020 7374 7269 703d 4661 6c73 6520 203a    strip=False  :
-00031d90: 2072 656d 6f76 6520 7768 6974 6520 7370   remove white sp
-00031da0: 6163 650a 2020 2020 2064 6566 6175 6c74  ace.     default
-00031db0: 2020 2020 2020 3a20 4661 6c73 650a 2020        : False.  
-00031dc0: 2020 206d 6f64 6520 0a20 2020 2020 2020     mode .       
-00031dd0: 2061 7574 6f20 2020 2020 203a 2061 7574   auto      : aut
-00031de0: 6f20 6669 7869 6e67 2069 6e64 6578 0a20  o fixing index. 
-00031df0: 2020 2020 2020 2065 7272 2020 2020 2020         err      
-00031e00: 203a 206e 6f74 2066 6f75 6e64 2074 6865   : not found the
-00031e10: 6e20 7265 7475 726e 2064 6566 6175 6c74  n return default
-00031e20: 2846 616c 7365 290a 2020 2020 2020 2020  (False).        
-00031e30: 6967 6e6f 7265 2020 2020 3a20 6e6f 7420  ignore    : not 
-00031e40: 666f 756e 6420 7468 656e 2069 676e 6f72  found then ignor
-00031e50: 6520 7468 6520 6461 7461 0a20 2020 2027  e the data.    '
-00031e60: 2727 0a20 2020 2064 6566 2044 4428 7329  ''.    def DD(s)
-00031e70: 3a0a 2020 2020 2020 2020 7274 3d5b 5d0a  :.        rt=[].
-00031e80: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00031e90: 2073 3a0a 2020 2020 2020 2020 2020 2020   s:.            
-00031ea0: 6966 2054 7970 6528 735b 695d 2c64 6963  if Type(s[i],dic
-00031eb0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00031ec0: 2020 2020 666f 7220 7a20 696e 2044 4428      for z in DD(
-00031ed0: 735b 695d 293a 0a20 2020 2020 2020 2020  s[i]):.         
-00031ee0: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
-00031ef0: 7065 6e64 2828 692b 272f 272b 7a5b 305d  pend((i+'/'+z[0]
-00031f00: 2c7a 5b31 5d29 290a 2020 2020 2020 2020  ,z[1])).        
-00031f10: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00031f20: 2020 2020 2020 2020 2020 7274 2e61 7070            rt.app
-00031f30: 656e 6428 2869 2c73 5b69 5d29 290a 2020  end((i,s[i])).  
-00031f40: 2020 2020 2020 7265 7475 726e 2072 740a        return rt.
-00031f50: 0a20 2020 2074 7570 6c65 326c 6973 743d  .    tuple2list=
-00031f60: 6f70 7473 2e67 6574 2827 7475 706c 6532  opts.get('tuple2
-00031f70: 6c69 7374 272c 5472 7565 290a 2020 2020  list',True).    
-00031f80: 6d6f 6465 3d6f 7074 732e 6765 7428 276d  mode=opts.get('m
-00031f90: 6f64 6527 2c27 6175 746f 2729 0a20 2020  ode','auto').   
-00031fa0: 2069 676e 6f72 6573 3d6f 7074 732e 6765   ignores=opts.ge
-00031fb0: 7428 2769 676e 6f72 6573 2729 0a20 2020  t('ignores').   
-00031fc0: 2069 6620 6973 696e 7374 616e 6365 2869   if isinstance(i
-00031fd0: 676e 6f72 6573 2c73 7472 293a 0a20 2020  gnores,str):.   
-00031fe0: 2020 2020 2069 676e 6f72 6573 3d74 7570       ignores=tup
-00031ff0: 6c65 2869 676e 6f72 6573 2e73 706c 6974  le(ignores.split
-00032000: 2827 2c27 2929 0a20 2020 2069 6620 6973  (',')).    if is
-00032010: 696e 7374 616e 6365 2869 676e 6f72 6573  instance(ignores
-00032020: 2c28 6c69 7374 2c74 7570 6c65 2929 3a0a  ,(list,tuple)):.
-00032030: 2020 2020 2020 2020 6967 6e6f 7265 733d          ignores=
-00032040: 7475 706c 6528 6967 6e6f 7265 7329 0a20  tuple(ignores). 
-00032050: 2020 2072 743d 5b5d 0a20 2020 2069 6620     rt=[].    if 
-00032060: 6c65 6e28 696e 7073 2920 3d3d 2030 203a  len(inps) == 0 :
-00032070: 2072 6574 7572 6e20 7274 0a20 2020 2069   return rt.    i
-00032080: 6620 5479 7065 2869 6e70 735b 305d 2c28  f Type(inps[0],(
-00032090: 276c 6973 7427 2c27 4c49 5354 2729 293a  'list','LIST')):
-000320a0: 0a20 2020 2020 2020 2072 743d 696e 7073  .        rt=inps
-000320b0: 5b30 5d0a 2020 2020 656c 6966 2054 7970  [0].    elif Typ
-000320c0: 6528 696e 7073 5b30 5d2c 7475 706c 6529  e(inps[0],tuple)
-000320d0: 3a0a 2020 2020 2020 2020 6966 2074 7570  :.        if tup
-000320e0: 6c65 326c 6973 743a 0a20 2020 2020 2020  le2list:.       
-000320f0: 2020 2020 2072 743d 6c69 7374 2869 6e70       rt=list(inp
-00032100: 735b 305d 290a 2020 2020 2020 2020 656c  s[0]).        el
-00032110: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00032120: 7274 2e61 7070 656e 6428 696e 7073 5b30  rt.append(inps[0
-00032130: 5d29 0a20 2020 2065 6c69 6620 5479 7065  ]).    elif Type
-00032140: 2869 6e70 735b 305d 2c64 6963 7429 3a0a  (inps[0],dict):.
-00032150: 2020 2020 2020 2020 6966 206f 7074 732e          if opts.
-00032160: 6765 7428 2764 6174 6127 293a 0a20 2020  get('data'):.   
-00032170: 2020 2020 2020 2020 2072 743d 6c69 7374           rt=list
-00032180: 2869 6e70 735b 305d 2e76 616c 7565 7328  (inps[0].values(
-00032190: 2929 0a20 2020 2020 2020 2065 6c69 6620  )).        elif 
-000321a0: 6f70 7473 2e67 6574 2827 616c 6c27 2c6f  opts.get('all',o
-000321b0: 7074 732e 6765 7428 2777 686f 6c65 272c  pts.get('whole',
-000321c0: 6f70 7473 2e67 6574 2827 6974 656d 7327  opts.get('items'
-000321d0: 2929 293a 0a20 2020 2020 2020 2020 2020  ))):.           
-000321e0: 2072 743d 6c69 7374 2869 6e70 735b 305d   rt=list(inps[0]
-000321f0: 2e69 7465 6d73 2829 290a 2020 2020 2020  .items()).      
-00032200: 2020 656c 6966 206f 7074 732e 6765 7428    elif opts.get(
-00032210: 2770 6174 6827 293a 0a20 2020 2020 2020  'path'):.       
-00032220: 2020 2020 2074 6d70 3d5b 5d0a 2020 2020       tmp=[].    
-00032230: 2020 2020 2020 2020 666f 7220 6b20 696e          for k in
-00032240: 2069 6e70 735b 305d 3a0a 2020 2020 2020   inps[0]:.      
-00032250: 2020 2020 2020 2020 2020 6966 2054 7970            if Typ
-00032260: 6528 696e 7073 5b30 5d5b 6b5d 2c64 6963  e(inps[0][k],dic
-00032270: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00032280: 2020 2020 2020 2020 666f 7220 6420 696e          for d in
-00032290: 2044 4428 696e 7073 5b30 5d5b 6b5d 293a   DD(inps[0][k]):
-000322a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000322b0: 2020 2020 2020 2020 2074 6d70 2e61 7070           tmp.app
-000322c0: 656e 6428 2827 2f27 2b6b 2b27 2f27 2b64  end(('/'+k+'/'+d
-000322d0: 5b30 5d2c 645b 315d 2929 0a20 2020 2020  [0],d[1])).     
-000322e0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000322f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032300: 2020 2020 2074 6d70 2e61 7070 656e 6428       tmp.append(
-00032310: 2827 2f27 2b6b 2c69 6e70 735b 305d 5b6b  ('/'+k,inps[0][k
-00032320: 5d29 290a 2020 2020 2020 2020 2020 2020  ])).            
-00032330: 7274 3d72 742b 746d 700a 2020 2020 2020  rt=rt+tmp.      
-00032340: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00032350: 2020 2020 7274 3d6c 6973 7428 696e 7073      rt=list(inps
-00032360: 5b30 5d29 0a20 2020 2065 6c73 653a 0a20  [0]).    else:. 
-00032370: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00032380: 616e 6365 2869 676e 6f72 6573 2c74 7570  ance(ignores,tup
-00032390: 6c65 2920 616e 6420 2854 7970 6528 696e  le) and (Type(in
-000323a0: 7073 5b30 5d2c 6967 6e6f 7265 7329 206f  ps[0],ignores) o
-000323b0: 7220 4973 496e 2869 6e70 735b 305d 2c69  r IsIn(inps[0],i
-000323c0: 676e 6f72 6573 2929 3a0a 2020 2020 2020  gnores)):.      
-000323d0: 2020 2020 2020 7061 7373 0a20 2020 2020        pass.     
-000323e0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000323f0: 2020 2020 2072 743d 5b69 6e70 735b 305d       rt=[inps[0]
-00032400: 5d0a 2020 2020 666f 7220 6920 696e 2069  ].    for i in i
-00032410: 6e70 735b 313a 5d3a 0a20 2020 2020 2020  nps[1:]:.       
-00032420: 2069 6620 5479 7065 2869 2c6c 6973 7429   if Type(i,list)
-00032430: 3a0a 2020 2020 2020 2020 2020 2020 7274  :.            rt
-00032440: 3d72 742b 690a 2020 2020 2020 2020 656c  =rt+i.        el
+0002ffd0: 2020 6966 2072 7020 3d3d 2064 6566 6175    if rp == defau
+0002ffe0: 6c74 3a20 636f 6e74 696e 7565 0a20 2020  lt: continue.   
+0002fff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030000: 2069 6620 756e 6971 2061 6e64 2072 7020   if uniq and rp 
+00030010: 696e 2073 656c 663a 2063 6f6e 7469 6e75  in self: continu
+00030020: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00030030: 2020 2020 2020 6966 2070 6174 683a 0a20        if path:. 
+00030040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030050: 2020 2020 2020 2069 6620 7270 203d 3d20         if rp == 
+00030060: 272e 273a 2063 6f6e 7469 6e75 650a 2020  '.': continue.  
+00030070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030080: 2020 2020 2020 6966 2072 7020 3d3d 2027        if rp == '
+00030090: 2e2e 2720 616e 6420 6c65 6e28 7365 6c66  ..' and len(self
+000300a0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+000300b0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+000300c0: 656c 2073 656c 665b 2d31 5d0a 2020 2020  el self[-1].    
+000300d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000300e0: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
+000300f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030100: 2020 2020 2073 656c 662e 6170 7065 6e64       self.append
+00030110: 2872 7029 0a20 2020 2020 2020 2020 2020  (rp).           
+00030120: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00030130: 2020 2020 2020 2069 6620 756e 6971 2061         if uniq a
+00030140: 6e64 2070 7020 696e 2073 656c 663a 2063  nd pp in self: c
+00030150: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
+00030160: 2020 2020 2020 2020 7365 6c66 2e61 7070          self.app
+00030170: 656e 6428 7070 290a 2020 2020 2020 2020  end(pp).        
+00030180: 7265 7475 726e 2073 656c 660a 0a20 2020  return self..   
+00030190: 2064 6566 2055 6e69 7128 7365 6c66 2c2a   def Uniq(self,*
+000301a0: 696e 7073 2c2a 2a6f 7074 7329 3a0a 2020  inps,**opts):.  
+000301b0: 2020 2020 2020 7379 6d62 6f6c 3d6f 7074        symbol=opt
+000301c0: 732e 6765 7428 2773 796d 626f 6c27 2c6f  s.get('symbol',o
+000301d0: 7074 732e 6765 7428 2773 706c 6974 272c  pts.get('split',
+000301e0: 6f70 7473 2e67 6574 2827 7370 6c69 745f  opts.get('split_
+000301f0: 7379 6d62 6f6c 2729 2929 0a20 2020 2020  symbol'))).     
+00030200: 2020 2070 6174 683d 6f70 7473 2e67 6574     path=opts.get
+00030210: 2827 7061 7468 272c 4661 6c73 6529 0a20  ('path',False). 
+00030220: 2020 2020 2020 2069 6620 7061 7468 3a20         if path: 
+00030230: 7379 6d62 6f6c 3d27 2f27 0a20 2020 2020  symbol='/'.     
+00030240: 2020 2064 6566 6175 6c74 3d6f 7074 732e     default=opts.
+00030250: 6765 7428 2764 6566 6175 6c74 272c 4661  get('default',Fa
+00030260: 6c73 6529 0a20 2020 2020 2020 2072 743d  lse).        rt=
+00030270: 5b5d 0a20 2020 2020 2020 2066 6f72 2070  [].        for p
+00030280: 7020 696e 2073 656c 6620 2b20 6c69 7374  p in self + list
+00030290: 2869 6e70 7329 3a0a 2020 2020 2020 2020  (inps):.        
+000302a0: 2020 2020 6966 2054 7970 6528 7070 2c28      if Type(pp,(
+000302b0: 2762 7974 6573 272c 2773 7472 2729 293a  'bytes','str')):
+000302c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000302d0: 2069 6620 7379 6d62 6f6c 206f 7220 7061   if symbol or pa
+000302e0: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
+000302f0: 2020 2020 2020 2020 666f 7220 7270 2069          for rp i
+00030300: 6e20 5370 6c69 7428 5374 7269 7028 7070  n Split(Strip(pp
+00030310: 2920 6966 2073 796d 626f 6c20 3d3d 2027  ) if symbol == '
+00030320: 3a77 6869 7465 5f73 7061 6365 3a27 2065  :white_space:' e
+00030330: 6c73 6520 7070 2c27 2027 2069 6620 7379  lse pp,' ' if sy
+00030340: 6d62 6f6c 3d3d 273a 7768 6974 655f 7370  mbol==':white_sp
+00030350: 6163 653a 2720 656c 7365 2073 796d 626f  ace:' else symbo
+00030360: 6c29 3a0a 2020 2020 2020 2020 2020 2020  l):.            
+00030370: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+00030380: 7020 6e6f 7420 696e 2072 7420 616e 6420  p not in rt and 
+00030390: 7270 2021 3d20 6465 6661 756c 743a 0a20  rp != default:. 
+000303a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000303b0: 2020 2020 2020 2020 2020 2069 6620 7061             if pa
+000303c0: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
+000303d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000303e0: 2020 2020 6966 2072 7020 3d3d 2027 2e27      if rp == '.'
+000303f0: 3a20 636f 6e74 696e 7565 0a20 2020 2020  : continue.     
+00030400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030410: 2020 2020 2020 2020 2020 2069 6620 7270             if rp
+00030420: 203d 3d20 272e 2e27 2061 6e64 206c 656e   == '..' and len
+00030430: 2872 7429 3a0a 2020 2020 2020 2020 2020  (rt):.          
+00030440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030450: 2020 2020 2020 2020 2020 6465 6c20 7274            del rt
+00030460: 5b2d 315d 0a20 2020 2020 2020 2020 2020  [-1].           
+00030470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030480: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
+00030490: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+000304a0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+000304b0: 2e61 7070 656e 6428 7270 290a 2020 2020  .append(rp).    
+000304c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000304d0: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
+000304e0: 2020 2020 2069 6620 7070 206e 6f74 2069       if pp not i
+000304f0: 6e20 7274 3a20 7274 2e61 7070 656e 6428  n rt: rt.append(
+00030500: 7070 290a 2020 2020 2020 2020 7375 7065  pp).        supe
+00030510: 7228 292e 5f5f 696e 6974 5f5f 2869 2066  r().__init__(i f
+00030520: 6f72 2069 2069 6e20 7274 290a 2020 2020  or i in rt).    
+00030530: 2020 2020 7265 7475 726e 2073 656c 660a      return self.
+00030540: 0a20 2020 2064 6566 2044 656c 6574 6528  .    def Delete(
+00030550: 7365 6c66 2c2a 696e 7073 2c2a 2a6f 7074  self,*inps,**opt
+00030560: 7329 3a0a 2020 2020 2020 2020 6669 6e64  s):.        find
+00030570: 3d6f 7074 732e 6765 7428 2766 696e 6427  =opts.get('find'
+00030580: 2c27 696e 6465 7827 290a 2020 2020 2020  ,'index').      
+00030590: 2020 616c 6c5f 6461 7461 3d6f 7074 732e    all_data=opts.
+000305a0: 6765 7428 2761 6c6c 272c 6f70 7473 2e67  get('all',opts.g
+000305b0: 6574 2827 616c 6c5f 6461 7461 272c 6f70  et('all_data',op
+000305c0: 7473 2e67 6574 2827 6465 6c5f 616c 6c27  ts.get('del_all'
+000305d0: 2929 290a 2020 2020 2020 2020 6465 6661  ))).        defa
+000305e0: 756c 743d 6f70 7473 2e67 6574 2827 6465  ult=opts.get('de
+000305f0: 6661 756c 7427 2c46 616c 7365 290a 2020  fault',False).  
+00030600: 2020 2020 2020 6966 2066 696e 6420 696e        if find in
+00030610: 205b 2769 6e64 6578 272c 2769 6427 5d3a   ['index','id']:
+00030620: 2023 2066 6f72 206b 6565 7020 6f72 6967   # for keep orig
+00030630: 696e 616c 2069 6e64 6578 0a20 2020 2020  inal index.     
+00030640: 2020 2020 2020 2074 6d70 3d5b 5d0a 2020         tmp=[].  
+00030650: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
+00030660: 696e 2072 616e 6765 2830 2c6c 656e 2873  in range(0,len(s
+00030670: 656c 6629 293a 0a20 2020 2020 2020 2020  elf)):.         
+00030680: 2020 2020 2020 2069 6620 6920 696e 2069         if i in i
+00030690: 6e70 733a 2063 6f6e 7469 6e75 650a 2020  nps: continue.  
+000306a0: 2020 2020 2020 2020 2020 2020 2020 746d                tm
+000306b0: 702e 6170 7065 6e64 2873 656c 665b 695d  p.append(self[i]
+000306c0: 290a 2020 2020 2020 2020 2020 2020 7375  ).            su
+000306d0: 7065 7228 292e 5f5f 696e 6974 5f5f 2869  per().__init__(i
+000306e0: 2066 6f72 2069 2069 6e20 746d 7029 0a20   for i in tmp). 
+000306f0: 2020 2020 2020 2065 6c73 653a 2023 2044         else: # D
+00030700: 6174 610a 2020 2020 2020 2020 2020 2020  ata.            
+00030710: 666f 7220 6920 696e 2069 6e70 733a 0a20  for i in inps:. 
+00030720: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00030730: 6620 616c 6c5f 6461 7461 3a0a 2020 2020  f all_data:.    
+00030740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030750: 7768 696c 6520 6920 696e 2073 656c 663a  while i in self:
+00030760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030770: 2020 2020 2020 2020 2073 7570 6572 2829           super()
+00030780: 2e72 656d 6f76 6528 6929 0a20 2020 2020  .remove(i).     
+00030790: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+000307a0: 6920 696e 2073 656c 663a 0a20 2020 2020  i in self:.     
+000307b0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000307c0: 7570 6572 2829 2e72 656d 6f76 6528 6929  uper().remove(i)
+000307d0: 0a0a 2020 2020 6465 6620 4765 7428 7365  ..    def Get(se
+000307e0: 6c66 2c2a 696e 7073 2c2a 2a6f 7074 7329  lf,*inps,**opts)
+000307f0: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
+00030800: 2069 6e70 733a 2072 6574 7572 6e20 7365   inps: return se
+00030810: 6c66 0a20 2020 2020 2020 2066 696e 643d  lf.        find=
+00030820: 6f70 7473 2e67 6574 2827 6669 6e64 272c  opts.get('find',
+00030830: 2764 6174 6127 290a 2020 2020 2020 2020  'data').        
+00030840: 6465 6661 756c 743d 6f70 7473 2e67 6574  default=opts.get
+00030850: 2827 6465 6661 756c 7427 2c4e 6f6e 6529  ('default',None)
+00030860: 0a20 2020 2020 2020 206f 7574 3d6f 7074  .        out=opt
+00030870: 732e 6765 7428 276f 7574 272c 6c69 7374  s.get('out',list
+00030880: 290a 2020 2020 2020 2020 6572 723d 6f70  ).        err=op
+00030890: 7473 2e67 6574 2827 6572 7227 2c46 616c  ts.get('err',Fal
+000308a0: 7365 290a 2020 2020 2020 2020 6966 206c  se).        if l
+000308b0: 656e 2873 656c 6629 203d 3d20 3020 616e  en(self) == 0 an
+000308c0: 6420 6572 723a 0a20 2020 2020 2020 2020  d err:.         
+000308d0: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
+000308e0: 740a 2020 2020 2020 2020 7274 3d5b 5d0a  t.        rt=[].
+000308f0: 2020 2020 2020 2020 6966 2066 696e 6420          if find 
+00030900: 696e 205b 2769 6e64 6578 272c 2769 6478  in ['index','idx
+00030910: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+00030920: 7274 3d73 656c 662e 496e 6465 7828 2a69  rt=self.Index(*i
+00030930: 6e70 732c 6465 6661 756c 743d 6465 6661  nps,default=defa
+00030940: 756c 742c 6f75 743d 6f75 7429 0a20 2020  ult,out=out).   
+00030950: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00030960: 2020 2020 2020 2072 743d 4c69 7374 282a         rt=List(*
+00030970: 7365 6c66 2c69 6478 3d69 6e70 732c 6d6f  self,idx=inps,mo
+00030980: 6465 3d27 6572 7227 2069 6620 6572 7220  de='err' if err 
+00030990: 656c 7365 2027 6175 746f 272c 6465 6661  else 'auto',defa
+000309a0: 756c 743d 6465 6661 756c 7429 0a20 2020  ult=default).   
+000309b0: 2020 2020 2069 6620 7274 3a0a 2020 2020       if rt:.    
+000309c0: 2020 2020 2020 2020 6966 206f 7574 2069          if out i
+000309d0: 6e20 5b74 7570 6c65 2c27 7475 706c 6527  n [tuple,'tuple'
+000309e0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+000309f0: 2020 2072 6574 7572 6e20 7475 706c 6528     return tuple(
+00030a00: 7274 290a 2020 2020 2020 2020 2020 2020  rt).            
+00030a10: 656c 6966 2049 734e 6f6e 6528 6f75 742c  elif IsNone(out,
+00030a20: 6368 6b5f 7661 6c3d 5b4e 6f6e 652c 2727  chk_val=[None,''
+00030a30: 2c27 7261 7727 5d29 3a0a 2020 2020 2020  ,'raw']):.      
+00030a40: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+00030a50: 2872 7429 203d 3d20 313a 2072 6574 7572  (rt) == 1: retur
+00030a60: 6e20 7274 5b30 5d0a 2020 2020 2020 2020  n rt[0].        
+00030a70: 2020 2020 7265 7475 726e 2072 740a 2020      return rt.  
+00030a80: 2020 2020 2020 7265 7475 726e 2064 6566        return def
+00030a90: 6175 6c74 0a0a 2020 2020 6465 6620 496e  ault..    def In
+00030aa0: 6465 7828 7365 6c66 2c2a 696e 7073 2c2a  dex(self,*inps,*
+00030ab0: 2a6f 7074 7329 3a0a 2020 2020 2020 2020  *opts):.        
+00030ac0: 6d69 7865 643d 6f70 7473 2e67 6574 2827  mixed=opts.get('
+00030ad0: 616e 7927 2c6f 7074 732e 6765 7428 276d  any',opts.get('m
+00030ae0: 6978 6564 272c 6f70 7473 2e67 6574 2827  ixed',opts.get('
+00030af0: 4f52 272c 5472 7565 2929 290a 2020 2020  OR',True))).    
+00030b00: 2020 2020 616c 6c5f 6461 7461 3d6f 7074      all_data=opt
+00030b10: 732e 6765 7428 2761 6c6c 272c 6f70 7473  s.get('all',opts
+00030b20: 2e67 6574 2827 414c 4c27 2c6f 7074 732e  .get('ALL',opts.
+00030b30: 6765 7428 2765 7665 7279 7468 696e 6727  get('everything'
+00030b40: 2929 290a 2020 2020 2020 2020 6f75 743d  ))).        out=
+00030b50: 6f70 7473 2e67 6574 2827 6f75 7427 290a  opts.get('out').
+00030b60: 2020 2020 2020 2020 7065 656c 3d6f 7074          peel=opt
+00030b70: 732e 6765 7428 2770 6565 6c27 2c54 7275  s.get('peel',Tru
+00030b80: 6529 0a20 2020 2020 2020 2064 6566 6175  e).        defau
+00030b90: 6c74 3d6f 7074 732e 6765 7428 2764 6566  lt=opts.get('def
+00030ba0: 6175 6c74 272c 4661 6c73 6529 0a20 2020  ault',False).   
+00030bb0: 2020 2020 2072 743d 5b5d 0a20 2020 2020       rt=[].     
+00030bc0: 2020 2066 6f72 2069 2069 6e20 696e 7073     for i in inps
+00030bd0: 3a0a 2020 2020 2020 2020 2020 2020 7474  :.            tt
+00030be0: 3d5b 5d0a 2020 2020 2020 2020 2020 2020  =[].            
+00030bf0: 666f 7220 7a20 696e 2072 616e 6765 2830  for z in range(0
+00030c00: 2c6c 656e 2873 656c 6629 293a 0a20 2020  ,len(self)):.   
+00030c10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00030c20: 5479 7065 2869 2c28 2773 7472 272c 2762  Type(i,('str','b
+00030c30: 7974 6573 2729 293a 0a20 2020 2020 2020  ytes')):.       
+00030c40: 2020 2020 2020 2020 2020 2020 206a 3d69               j=i
+00030c50: 2e72 6570 6c61 6365 2827 2a27 2c27 2e2b  .replace('*','.+
+00030c60: 2729 2e72 6570 6c61 6365 2827 3f27 2c27  ').replace('?','
+00030c70: 2e27 290a 2020 2020 2020 2020 2020 2020  .').            
+00030c80: 2020 2020 2020 2020 6d6d 3d72 652e 636f          mm=re.co
+00030c90: 6d70 696c 6528 6a29 0a20 2020 2020 2020  mpile(j).       
+00030ca0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00030cb0: 626f 6f6c 2872 652e 6d61 7463 6828 6d6d  bool(re.match(mm
+00030cc0: 2c73 656c 665b 7a5d 2929 3a0a 2020 2020  ,self[z])):.    
+00030cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030ce0: 2020 2020 7474 2e61 7070 656e 6428 7a29      tt.append(z)
+00030cf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030d00: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00030d10: 616c 6c5f 6461 7461 3a20 6272 6561 6b0a  all_data: break.
+00030d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030d30: 656c 6966 2073 656c 665b 7a5d 203d 3d20  elif self[z] == 
+00030d40: 693a 0a20 2020 2020 2020 2020 2020 2020  i:.             
+00030d50: 2020 2020 2020 2074 742e 6170 7065 6e64         tt.append
+00030d60: 287a 290a 2020 2020 2020 2020 2020 2020  (z).            
+00030d70: 2020 2020 2020 2020 6966 206e 6f74 2061          if not a
+00030d80: 6c6c 5f64 6174 613a 2062 7265 616b 0a20  ll_data: break. 
+00030d90: 2020 2020 2020 2020 2020 2069 6620 6d69             if mi
+00030da0: 7865 643a 0a20 2020 2020 2020 2020 2020  xed:.           
+00030db0: 2020 2020 2072 743d 7274 2b74 740a 2020       rt=rt+tt.  
+00030dc0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00030dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030de0: 7274 2e61 7070 656e 6428 7475 706c 6528  rt.append(tuple(
+00030df0: 7474 2929 0a20 2020 2020 2020 2072 6574  tt)).        ret
+00030e00: 7572 6e20 4f75 7446 6f72 6d61 7428 7274  urn OutFormat(rt
+00030e10: 2c6f 7574 3d6f 7574 2c70 6565 6c3d 7065  ,out=out,peel=pe
+00030e20: 656c 2c6f 7267 3d73 656c 662c 6465 6661  el,org=self,defa
+00030e30: 756c 743d 6465 6661 756c 7429 0a0a 2020  ult=default)..  
+00030e40: 2020 6465 6620 496e 7365 7274 2873 656c    def Insert(sel
+00030e50: 662c 2a69 6e70 732c 2a2a 6f70 7473 293a  f,*inps,**opts):
+00030e60: 0a20 2020 2020 2020 2061 743d 6f70 7473  .        at=opts
+00030e70: 2e67 6574 2827 6174 272c 2d31 290a 2020  .get('at',-1).  
+00030e80: 2020 2020 2020 6465 6661 756c 743d 6f70        default=op
+00030e90: 7473 2e67 6574 2827 6465 6661 756c 7427  ts.get('default'
+00030ea0: 2c46 616c 7365 290a 2020 2020 2020 2020  ,False).        
+00030eb0: 6572 723d 6f70 7473 2e67 6574 2827 6572  err=opts.get('er
+00030ec0: 7227 2c46 616c 7365 290a 2020 2020 2020  r',False).      
+00030ed0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00030ee0: 6174 2c73 7472 293a 0a20 2020 2020 2020  at,str):.       
+00030ef0: 2020 2020 2069 6620 6174 2069 6e20 5b27       if at in ['
+00030f00: 7374 6172 7427 2c27 6669 7273 7427 5d3a  start','first']:
+00030f10: 2072 6f6f 743d 6c69 7374 2869 6e70 7329   root=list(inps)
+00030f20: 2b73 656c 660a 2020 2020 2020 2020 2020  +self.          
+00030f30: 2020 656c 6966 2061 7420 696e 205b 2765    elif at in ['e
+00030f40: 6e64 272c 276c 6173 7427 5d3a 2072 6f6f  nd','last']: roo
+00030f50: 743d 7365 6c66 2b6c 6973 7428 696e 7073  t=self+list(inps
+00030f60: 290a 2020 2020 2020 2020 656c 6966 206c  ).        elif l
+00030f70: 656e 2873 656c 6629 203d 3d20 303a 0a20  en(self) == 0:. 
+00030f80: 2020 2020 2020 2020 2020 2072 6f6f 743d             root=
+00030f90: 6c69 7374 2869 6e70 7329 0a20 2020 2020  list(inps).     
+00030fa0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+00030fb0: 6365 2861 742c 696e 7429 3a0a 2020 2020  ce(at,int):.    
+00030fc0: 2020 2020 2020 2020 6966 206c 656e 2873          if len(s
+00030fd0: 656c 6629 203e 3d20 6162 7328 6174 293a  elf) >= abs(at):
+00030fe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030ff0: 2069 6620 6174 203d 3d20 2d31 206f 7220   if at == -1 or 
+00031000: 6c65 6e28 7365 6c66 2920 3d3d 2061 743a  len(self) == at:
+00031010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00031020: 2020 2020 2072 6f6f 743d 7365 6c66 2b6c       root=self+l
+00031030: 6973 7428 696e 7073 290a 2020 2020 2020  ist(inps).      
+00031040: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00031050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031060: 2020 2020 6966 2061 7420 3c20 2d31 3a20      if at < -1: 
+00031070: 6174 3d61 742b 310a 2020 2020 2020 2020  at=at+1.        
+00031080: 2020 2020 2020 2020 2020 2020 726f 6f74              root
+00031090: 3d73 656c 665b 3a61 745d 2b6c 6973 7428  =self[:at]+list(
+000310a0: 696e 7073 292b 7365 6c66 5b61 743a 5d0a  inps)+self[at:].
+000310b0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+000310c0: 206c 656e 2873 656c 6629 203c 2061 6273   len(self) < abs
+000310d0: 2861 7429 3a0a 2020 2020 2020 2020 2020  (at):.          
+000310e0: 2020 2020 2020 6966 2061 7420 3e20 303a        if at > 0:
+000310f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00031100: 2020 2020 2072 6f6f 743d 7365 6c66 2b6c       root=self+l
+00031110: 6973 7428 696e 7073 290a 2020 2020 2020  ist(inps).      
+00031120: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00031130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031140: 2020 2020 726f 6f74 3d6c 6973 7428 696e      root=list(in
+00031150: 7073 292b 7365 6c66 0a20 2020 2020 2020  ps)+self.       
+00031160: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00031170: 2020 2069 6620 6572 723a 0a20 2020 2020     if err:.     
+00031180: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00031190: 6e20 6465 6661 756c 740a 2020 2020 2020  n default.      
+000311a0: 2020 2020 2020 726f 6f74 3d73 656c 662b        root=self+
+000311b0: 6c69 7374 2869 6e70 7329 0a20 2020 2020  list(inps).     
+000311c0: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
+000311d0: 745f 5f28 6920 666f 7220 6920 696e 2072  t__(i for i in r
+000311e0: 6f6f 7429 0a0a 2020 2020 6465 6620 5570  oot)..    def Up
+000311f0: 6461 7465 2873 656c 662c 2a69 6e70 732c  date(self,*inps,
+00031200: 2a2a 6f70 7473 293a 0a20 2020 2020 2020  **opts):.       
+00031210: 2061 743d 6f70 7473 2e67 6574 2827 6174   at=opts.get('at
+00031220: 272c 3029 0a20 2020 2020 2020 2065 7272  ',0).        err
+00031230: 3d6f 7074 732e 6765 7428 2765 7272 272c  =opts.get('err',
+00031240: 4661 6c73 6529 0a20 2020 2020 2020 2064  False).        d
+00031250: 6566 6175 6c74 3d6f 7074 732e 6765 7428  efault=opts.get(
+00031260: 2764 6566 6175 6c74 272c 4661 6c73 6529  'default',False)
+00031270: 0a20 2020 2020 2020 206e 3d6c 656e 2873  .        n=len(s
+00031280: 656c 6629 0a20 2020 2020 2020 2069 6620  elf).        if 
+00031290: 6e20 3d3d 2030 3a0a 2020 2020 2020 2020  n == 0:.        
+000312a0: 2020 2020 6966 2065 7272 2069 7320 5472      if err is Tr
+000312b0: 7565 3a0a 2020 2020 2020 2020 2020 2020  ue:.            
+000312c0: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
+000312d0: 6c74 0a20 2020 2020 2020 2020 2020 2065  lt.            e
+000312e0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000312f0: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
+00031300: 6e69 745f 5f28 6920 666f 7220 6920 696e  nit__(i for i in
+00031310: 2069 6e70 7329 0a20 2020 2020 2020 2065   inps).        e
+00031320: 6c69 6620 6973 696e 7374 616e 6365 2861  lif isinstance(a
+00031330: 742c 696e 7429 2061 6e64 206e 203e 2061  t,int) and n > a
+00031340: 743a 0a20 2020 2020 2020 2020 2020 2066  t:.            f
+00031350: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
+00031360: 6c65 6e28 696e 7073 2929 3a0a 2020 2020  len(inps)):.    
+00031370: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00031380: 203e 2061 742b 693a 0a20 2020 2020 2020   > at+i:.       
+00031390: 2020 2020 2020 2020 2020 2020 2073 7570               sup
+000313a0: 6572 2829 2e69 6e73 6572 7428 6174 2b69  er().insert(at+i
+000313b0: 2c69 6e70 735b 695d 290a 2020 2020 2020  ,inps[i]).      
+000313c0: 2020 2020 2020 2020 2020 656c 6966 2065            elif e
+000313d0: 7272 2069 7320 5472 7565 3a0a 2020 2020  rr is True:.    
+000313e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000313f0: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
+00031400: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00031410: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00031420: 2020 2020 2020 2020 2073 7570 6572 2829           super()
+00031430: 2e5f 5f69 6e69 745f 5f28 6920 666f 7220  .__init__(i for 
+00031440: 6920 696e 2073 656c 662b 6c69 7374 2869  i in self+list(i
+00031450: 6e70 7329 5b69 3a5d 290a 2020 2020 2020  nps)[i:]).      
+00031460: 2020 2020 2020 2020 2020 2020 2020 6272                br
+00031470: 6561 6b0a 2020 2020 2020 2020 656c 6966  eak.        elif
+00031480: 2069 7369 6e73 7461 6e63 6528 6174 2c28   isinstance(at,(
+00031490: 7475 706c 652c 6c69 7374 2929 3a0a 2020  tuple,list)):.  
+000314a0: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+000314b0: 2869 6e70 7329 203d 3d20 6c65 6e28 6174  (inps) == len(at
+000314c0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+000314d0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+000314e0: 6528 302c 6c65 6e28 6174 2929 3a0a 2020  e(0,len(at)):.  
+000314f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031500: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00031510: 6174 5b69 5d2c 696e 7429 2061 6e64 206e  at[i],int) and n
+00031520: 203e 2061 745b 695d 3a0a 2020 2020 2020   > at[i]:.      
+00031530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031540: 2020 7375 7065 7228 292e 696e 7365 7274    super().insert
+00031550: 2861 745b 695d 2c69 6e70 735b 695d 290a  (at[i],inps[i]).
+00031560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031570: 2020 2020 656c 6966 2065 7272 2069 7320      elif err is 
+00031580: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
+00031590: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000315a0: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
+000315b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000315c0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000315d0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000315e0: 7570 6572 2829 2e61 7070 656e 6428 696e  uper().append(in
+000315f0: 7073 5b69 5d29 0a0a 2020 2020 6465 6620  ps[i])..    def 
+00031600: 4669 6e64 2873 656c 662c 2a69 6e70 732c  Find(self,*inps,
+00031610: 2a2a 6f70 7473 293a 0a20 2020 2020 2020  **opts):.       
+00031620: 2066 696e 643d 6f70 7473 2e67 6574 2827   find=opts.get('
+00031630: 6669 6e64 272c 2769 6e64 6578 2729 0a20  find','index'). 
+00031640: 2020 2020 2020 2064 6566 6175 6c74 3d6f         default=o
+00031650: 7074 732e 6765 7428 2764 6566 6175 6c74  pts.get('default
+00031660: 272c 5b5d 290a 2020 2020 2020 2020 7274  ',[]).        rt
+00031670: 3d5b 5d0a 2020 2020 2020 2020 666f 7220  =[].        for 
+00031680: 6920 696e 2072 616e 6765 2830 2c6c 656e  i in range(0,len
+00031690: 2873 656c 6629 293a 0a20 2020 2020 2020  (self)):.       
+000316a0: 2020 2020 2066 6f72 206a 2069 6e20 696e       for j in in
+000316b0: 7073 3a0a 2020 2020 2020 2020 2020 2020  ps:.            
+000316c0: 2020 2020 6a3d 6a2e 7265 706c 6163 6528      j=j.replace(
+000316d0: 272a 272c 272e 2b27 292e 7265 706c 6163  '*','.+').replac
+000316e0: 6528 273f 272c 272e 2729 0a20 2020 2020  e('?','.').     
+000316f0: 2020 2020 2020 2020 2020 206d 6d3d 7265             mm=re
+00031700: 2e63 6f6d 7069 6c65 286a 290a 2020 2020  .compile(j).    
+00031710: 2020 2020 2020 2020 2020 2020 6966 2062              if b
+00031720: 6f6f 6c28 7265 2e6d 6174 6368 286d 6d2c  ool(re.match(mm,
+00031730: 7365 6c66 5b69 5d29 293a 0a20 2020 2020  self[i])):.     
+00031740: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00031750: 6620 6669 6e64 2069 6e20 5b27 696e 6465  f find in ['inde
+00031760: 7827 2c27 6964 7827 5d3a 0a20 2020 2020  x','idx']:.     
+00031770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031780: 2020 2072 742e 6170 7065 6e64 2869 290a     rt.append(i).
+00031790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000317a0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000317b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000317c0: 2020 7274 2e61 7070 656e 6428 7365 6c66    rt.append(self
+000317d0: 5b69 5d29 0a20 2020 2020 2020 2069 6620  [i]).        if 
+000317e0: 6c65 6e28 7274 293a 0a20 2020 2020 2020  len(rt):.       
+000317f0: 2020 2020 2072 6574 7572 6e20 7274 0a20       return rt. 
+00031800: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+00031810: 6661 756c 740a 0a20 2020 2064 6566 204d  fault..    def M
+00031820: 6f76 6532 6669 7273 7428 7365 6c66 2c66  ove2first(self,f
+00031830: 696e 6429 3a0a 2020 2020 2020 2020 6966  ind):.        if
+00031840: 2054 7970 6528 6669 6e64 2c28 274c 4953   Type(find,('LIS
+00031850: 5427 2c27 6c69 7374 272c 2774 7570 6c65  T','list','tuple
+00031860: 2729 293a 0a20 2020 2020 2020 2020 2020  ')):.           
+00031870: 2073 656c 662e 4465 6c65 7465 282a 6669   self.Delete(*fi
+00031880: 6e64 2c66 696e 643d 2764 6174 6127 290a  nd,find='data').
+00031890: 2020 2020 2020 2020 2020 2020 7375 7065              supe
+000318a0: 7228 292e 5f5f 696e 6974 5f5f 2869 2066  r().__init__(i f
+000318b0: 6f72 2069 2069 6e20 6c69 7374 2866 696e  or i in list(fin
+000318c0: 6429 2b73 656c 6629 0a20 2020 2020 2020  d)+self).       
+000318d0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000318e0: 2020 2073 656c 662e 4465 6c65 7465 282a     self.Delete(*
+000318f0: 2866 696e 642c 292c 6669 6e64 3d27 6461  (find,),find='da
+00031900: 7461 2729 0a20 2020 2020 2020 2020 2020  ta').           
+00031910: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
+00031920: 5f28 6920 666f 7220 6920 696e 205b 6669  _(i for i in [fi
+00031930: 6e64 5d2b 7365 6c66 290a 2020 2020 2020  nd]+self).      
+00031940: 2020 7265 7475 726e 2073 656c 660a 0a20    return self.. 
+00031950: 2020 2064 6566 204d 6f76 6532 656e 6428     def Move2end(
+00031960: 7365 6c66 2c66 696e 6429 3a0a 2020 2020  self,find):.    
+00031970: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00031980: 6528 6669 6e64 2c28 6c69 7374 2c74 7570  e(find,(list,tup
+00031990: 6c65 2929 3a0a 2020 2020 2020 2020 2020  le)):.          
+000319a0: 2020 7365 6c66 2e44 656c 6574 6528 2a66    self.Delete(*f
+000319b0: 696e 642c 6669 6e64 3d27 6461 7461 2729  ind,find='data')
+000319c0: 0a20 2020 2020 2020 2020 2020 2073 7570  .            sup
+000319d0: 6572 2829 2e5f 5f69 6e69 745f 5f28 6920  er().__init__(i 
+000319e0: 666f 7220 6920 696e 2073 656c 662b 6c69  for i in self+li
+000319f0: 7374 2866 696e 6429 290a 2020 2020 2020  st(find)).      
+00031a00: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00031a10: 2020 2020 7365 6c66 2e44 656c 6574 6528      self.Delete(
+00031a20: 2a28 6669 6e64 2c29 2c66 696e 643d 2764  *(find,),find='d
+00031a30: 6174 6127 290a 2020 2020 2020 2020 2020  ata').          
+00031a40: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
+00031a50: 5f5f 2869 2066 6f72 2069 2069 6e20 7365  __(i for i in se
+00031a60: 6c66 2b5b 6669 6e64 5d29 0a20 2020 2020  lf+[find]).     
+00031a70: 2020 2072 6574 7572 6e20 7365 6c66 0a0a     return self..
+00031a80: 2020 2020 6465 6620 536f 7274 2873 656c      def Sort(sel
+00031a90: 662c 7265 7665 7273 653d 4661 6c73 652c  f,reverse=False,
+00031aa0: 6675 6e63 3d4e 6f6e 652c 6f72 6465 723d  func=None,order=
+00031ab0: 4e6f 6e65 2c66 6965 6c64 3d4e 6f6e 652c  None,field=None,
+00031ac0: 6261 7365 3d27 6b65 7927 2c73 796d 3d4e  base='key',sym=N
+00031ad0: 6f6e 6529 3a0a 2020 2020 2020 2020 7472  one):.        tr
+00031ae0: 793a 0a20 2020 2020 2020 2020 2020 2073  y:.            s
+00031af0: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
+00031b00: 6920 666f 7220 6920 696e 2053 6f72 7428  i for i in Sort(
+00031b10: 7365 6c66 2c72 6576 6572 7365 3d72 6576  self,reverse=rev
+00031b20: 6572 7365 2c66 756e 633d 6675 6e63 2c6f  erse,func=func,o
+00031b30: 7264 6572 3d6f 7264 6572 2c66 6965 6c64  rder=order,field
+00031b40: 3d66 6965 6c64 2c62 6173 653d 6261 7365  =field,base=base
+00031b50: 2c73 796d 3d73 796d 2929 0a20 2020 2020  ,sym=sym)).     
+00031b60: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00031b70: 6c66 0a20 2020 2020 2020 2065 7863 6570  lf.        excep
+00031b80: 743a 0a20 2020 2020 2020 2020 2020 2070  t:.            p
+00031b90: 7269 6e74 2827 4e6f 7420 7375 7070 6f72  rint('Not suppor
+00031ba0: 7420 6d69 7865 6420 7374 7269 6e67 2061  t mixed string a
+00031bb0: 6e64 2069 6e74 2729 0a0a 6465 6620 4974  nd int')..def It
+00031bc0: 6572 6162 6c65 2869 6e70 2c64 6566 6175  erable(inp,defau
+00031bd0: 6c74 3d5b 5d29 3a0a 2020 2020 6966 2069  lt=[]):.    if i
+00031be0: 7369 6e73 7461 6e63 6528 696e 702c 286c  sinstance(inp,(l
+00031bf0: 6973 742c 7475 706c 652c 6469 6374 2929  ist,tuple,dict))
+00031c00: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00031c10: 2069 6e70 0a20 2020 2072 6574 7572 6e20   inp.    return 
+00031c20: 6465 6661 756c 740a 0a64 6566 204c 6973  default..def Lis
+00031c30: 7428 2a69 6e70 732c 2a2a 6f70 7473 293a  t(*inps,**opts):
+00031c40: 0a20 2020 2027 2727 0a20 2020 2074 7570  .    '''.    tup
+00031c50: 6c65 326c 6973 743a 200a 2020 2020 2020  le2list: .      
+00031c60: 2020 5472 7565 203a 2063 6f6e 7665 7274    True : convert
+00031c70: 2074 7570 6c65 2064 6174 6120 746f 206c   tuple data to l
+00031c80: 6973 7420 6461 7461 0a20 2020 2020 2020  ist data.       
+00031c90: 2046 616c 7365 3a20 6170 7065 6e64 2074   False: append t
+00031ca0: 7570 6c65 2069 6e74 6f20 6c69 7374 0a20  uple into list. 
+00031cb0: 2020 203c 6469 6374 2069 6e70 7574 3e0a     <dict input>.
+00031cc0: 2020 2020 2069 7465 6d73 203a 203c 6469       items : <di
+00031cd0: 6374 3e2e 6974 656d 7328 290a 2020 2020  ct>.items().    
+00031ce0: 2064 6174 6120 203a 203c 6469 6374 3e2e   data  : <dict>.
+00031cf0: 7661 6c75 6528 290a 2020 2020 2070 6174  value().     pat
+00031d00: 6820 203a 2063 6f6e 7665 7274 203c 6469  h  : convert <di
+00031d10: 6374 3e20 746f 2070 6174 6820 6c69 6b65  ct> to path like
+00031d20: 206c 6973 7420 285b 2827 2f61 2f62 272c   list ([('/a/b',
+00031d30: 3129 2c28 272f 612f 6327 2c32 292c 2e2e  1),('/a/c',2),..
+00031d40: 2e5d 290a 2020 2020 2028 6465 6661 756c  .]).     (defaul
+00031d50: 7429 3a20 3c64 6963 743e 2e6b 6579 7328  t): <dict>.keys(
+00031d60: 290a 2020 2020 3c6f 7074 696f 6e3e 0a20  ).    <option>. 
+00031d70: 2020 2020 6967 6e6f 7265 733d 5b5d 2020      ignores=[]  
+00031d80: 203a 2069 676e 6f72 6520 6772 6f75 7028   : ignore group(
+00031d90: 6465 6661 756c 743a 206d 6164 6520 746f  default: made to
+00031da0: 206c 6973 742c 2061 6c6c 290a 2020 2020   list, all).    
+00031db0: 2069 6478 3d3c 696e 743e 2020 2020 3a20   idx=<int>    : 
+00031dc0: 6765 7420 3c69 6478 3e20 6461 7461 0a20  get <idx> data. 
+00031dd0: 2020 2020 6465 6c3d 3c69 6e74 3e20 2020      del=<int>   
+00031de0: 203a 2064 656c 6574 6520 3c69 6478 3e0a   : delete <idx>.
+00031df0: 2020 2020 2066 6972 7374 3d3c 6461 7461       first=<data
+00031e00: 3e20 3a20 6d6f 7665 203c 6461 7461 3e20  > : move <data> 
+00031e10: 746f 2066 6972 7374 0a20 2020 2020 656e  to first.     en
+00031e20: 643d 3c64 6174 613e 2020 203a 206d 6f76  d=<data>   : mov
+00031e30: 6520 3c64 6174 613e 2074 6f20 656e 640a  e <data> to end.
+00031e40: 2020 2020 2066 696e 643d 3c64 6174 613e       find=<data>
+00031e50: 2020 3a20 6765 7420 496e 6465 7820 6c69    : get Index li
+00031e60: 7374 0a20 2020 2020 756e 6971 3d46 616c  st.     uniq=Fal
+00031e70: 7365 2020 203a 204d 616b 6520 746f 2055  se   : Make to U
+00031e80: 6e69 7120 6461 7461 0a20 2020 2020 7374  niq data.     st
+00031e90: 7269 703d 4661 6c73 6520 203a 2072 656d  rip=False  : rem
+00031ea0: 6f76 6520 7768 6974 6520 7370 6163 650a  ove white space.
+00031eb0: 2020 2020 2064 6566 6175 6c74 2020 2020       default    
+00031ec0: 2020 3a20 4661 6c73 650a 2020 2020 206d    : False.     m
+00031ed0: 6f64 6520 0a20 2020 2020 2020 2061 7574  ode .        aut
+00031ee0: 6f20 2020 2020 203a 2061 7574 6f20 6669  o      : auto fi
+00031ef0: 7869 6e67 2069 6e64 6578 0a20 2020 2020  xing index.     
+00031f00: 2020 2065 7272 2020 2020 2020 203a 206e     err       : n
+00031f10: 6f74 2066 6f75 6e64 2074 6865 6e20 7265  ot found then re
+00031f20: 7475 726e 2064 6566 6175 6c74 2846 616c  turn default(Fal
+00031f30: 7365 290a 2020 2020 2020 2020 6967 6e6f  se).        igno
+00031f40: 7265 2020 2020 3a20 6e6f 7420 666f 756e  re    : not foun
+00031f50: 6420 7468 656e 2069 676e 6f72 6520 7468  d then ignore th
+00031f60: 6520 6461 7461 0a20 2020 2027 2727 0a20  e data.    '''. 
+00031f70: 2020 2064 6566 2044 4428 7329 3a0a 2020     def DD(s):.  
+00031f80: 2020 2020 2020 7274 3d5b 5d0a 2020 2020        rt=[].    
+00031f90: 2020 2020 666f 7220 6920 696e 2073 3a0a      for i in s:.
+00031fa0: 2020 2020 2020 2020 2020 2020 6966 2054              if T
+00031fb0: 7970 6528 735b 695d 2c64 6963 7429 3a0a  ype(s[i],dict):.
+00031fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031fd0: 666f 7220 7a20 696e 2044 4428 735b 695d  for z in DD(s[i]
+00031fe0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00031ff0: 2020 2020 2020 2072 742e 6170 7065 6e64         rt.append
+00032000: 2828 692b 272f 272b 7a5b 305d 2c7a 5b31  ((i+'/'+z[0],z[1
+00032010: 5d29 290a 2020 2020 2020 2020 2020 2020  ])).            
+00032020: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00032030: 2020 2020 2020 7274 2e61 7070 656e 6428        rt.append(
+00032040: 2869 2c73 5b69 5d29 290a 2020 2020 2020  (i,s[i])).      
+00032050: 2020 7265 7475 726e 2072 740a 0a20 2020    return rt..   
+00032060: 2074 7570 6c65 326c 6973 743d 6f70 7473   tuple2list=opts
+00032070: 2e67 6574 2827 7475 706c 6532 6c69 7374  .get('tuple2list
+00032080: 272c 5472 7565 290a 2020 2020 6d6f 6465  ',True).    mode
+00032090: 3d6f 7074 732e 6765 7428 276d 6f64 6527  =opts.get('mode'
+000320a0: 2c27 6175 746f 2729 0a20 2020 2069 676e  ,'auto').    ign
+000320b0: 6f72 6573 3d6f 7074 732e 6765 7428 2769  ores=opts.get('i
+000320c0: 676e 6f72 6573 2729 0a20 2020 2069 6620  gnores').    if 
+000320d0: 6973 696e 7374 616e 6365 2869 676e 6f72  isinstance(ignor
+000320e0: 6573 2c73 7472 293a 0a20 2020 2020 2020  es,str):.       
+000320f0: 2069 676e 6f72 6573 3d74 7570 6c65 2869   ignores=tuple(i
+00032100: 676e 6f72 6573 2e73 706c 6974 2827 2c27  gnores.split(','
+00032110: 2929 0a20 2020 2069 6620 6973 696e 7374  )).    if isinst
+00032120: 616e 6365 2869 676e 6f72 6573 2c28 6c69  ance(ignores,(li
+00032130: 7374 2c74 7570 6c65 2929 3a0a 2020 2020  st,tuple)):.    
+00032140: 2020 2020 6967 6e6f 7265 733d 7475 706c      ignores=tupl
+00032150: 6528 6967 6e6f 7265 7329 0a20 2020 2072  e(ignores).    r
+00032160: 743d 5b5d 0a20 2020 2069 6620 6c65 6e28  t=[].    if len(
+00032170: 696e 7073 2920 3d3d 2030 203a 2072 6574  inps) == 0 : ret
+00032180: 7572 6e20 7274 0a20 2020 2069 6620 5479  urn rt.    if Ty
+00032190: 7065 2869 6e70 735b 305d 2c28 276c 6973  pe(inps[0],('lis
+000321a0: 7427 2c27 4c49 5354 2729 293a 0a20 2020  t','LIST')):.   
+000321b0: 2020 2020 2072 743d 696e 7073 5b30 5d0a       rt=inps[0].
+000321c0: 2020 2020 656c 6966 2054 7970 6528 696e      elif Type(in
+000321d0: 7073 5b30 5d2c 7475 706c 6529 3a0a 2020  ps[0],tuple):.  
+000321e0: 2020 2020 2020 6966 2074 7570 6c65 326c        if tuple2l
+000321f0: 6973 743a 0a20 2020 2020 2020 2020 2020  ist:.           
+00032200: 2072 743d 6c69 7374 2869 6e70 735b 305d   rt=list(inps[0]
+00032210: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+00032220: 2020 2020 2020 2020 2020 2020 7274 2e61              rt.a
+00032230: 7070 656e 6428 696e 7073 5b30 5d29 0a20  ppend(inps[0]). 
+00032240: 2020 2065 6c69 6620 5479 7065 2869 6e70     elif Type(inp
+00032250: 735b 305d 2c64 6963 7429 3a0a 2020 2020  s[0],dict):.    
+00032260: 2020 2020 6966 206f 7074 732e 6765 7428      if opts.get(
+00032270: 2764 6174 6127 293a 0a20 2020 2020 2020  'data'):.       
+00032280: 2020 2020 2072 743d 6c69 7374 2869 6e70       rt=list(inp
+00032290: 735b 305d 2e76 616c 7565 7328 2929 0a20  s[0].values()). 
+000322a0: 2020 2020 2020 2065 6c69 6620 6f70 7473         elif opts
+000322b0: 2e67 6574 2827 616c 6c27 2c6f 7074 732e  .get('all',opts.
+000322c0: 6765 7428 2777 686f 6c65 272c 6f70 7473  get('whole',opts
+000322d0: 2e67 6574 2827 6974 656d 7327 2929 293a  .get('items'))):
+000322e0: 0a20 2020 2020 2020 2020 2020 2072 743d  .            rt=
+000322f0: 6c69 7374 2869 6e70 735b 305d 2e69 7465  list(inps[0].ite
+00032300: 6d73 2829 290a 2020 2020 2020 2020 656c  ms()).        el
+00032310: 6966 206f 7074 732e 6765 7428 2770 6174  if opts.get('pat
+00032320: 6827 293a 0a20 2020 2020 2020 2020 2020  h'):.           
+00032330: 2074 6d70 3d5b 5d0a 2020 2020 2020 2020   tmp=[].        
+00032340: 2020 2020 666f 7220 6b20 696e 2069 6e70      for k in inp
+00032350: 735b 305d 3a0a 2020 2020 2020 2020 2020  s[0]:.          
+00032360: 2020 2020 2020 6966 2054 7970 6528 696e        if Type(in
+00032370: 7073 5b30 5d5b 6b5d 2c64 6963 7429 3a0a  ps[0][k],dict):.
+00032380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032390: 2020 2020 666f 7220 6420 696e 2044 4428      for d in DD(
+000323a0: 696e 7073 5b30 5d5b 6b5d 293a 0a20 2020  inps[0][k]):.   
+000323b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000323c0: 2020 2020 2074 6d70 2e61 7070 656e 6428       tmp.append(
+000323d0: 2827 2f27 2b6b 2b27 2f27 2b64 5b30 5d2c  ('/'+k+'/'+d[0],
+000323e0: 645b 315d 2929 0a20 2020 2020 2020 2020  d[1])).         
+000323f0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00032400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032410: 2074 6d70 2e61 7070 656e 6428 2827 2f27   tmp.append(('/'
+00032420: 2b6b 2c69 6e70 735b 305d 5b6b 5d29 290a  +k,inps[0][k])).
+00032430: 2020 2020 2020 2020 2020 2020 7274 3d72              rt=r
+00032440: 742b 746d 700a 2020 2020 2020 2020 656c  t+tmp.        el
 00032450: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00032460: 6966 2054 7970 6528 692c 7475 706c 6529  if Type(i,tuple)
-00032470: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00032480: 2020 6966 2074 7570 6c65 326c 6973 743a    if tuple2list:
-00032490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000324a0: 2020 2020 2072 743d 7274 2b6c 6973 7428       rt=rt+list(
-000324b0: 6929 0a20 2020 2020 2020 2020 2020 2020  i).             
-000324c0: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-000324d0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-000324e0: 2054 7970 6528 692c 6469 6374 293a 0a20   Type(i,dict):. 
-000324f0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00032500: 743d 7274 2b4c 6973 7428 7274 2c69 2c2a  t=rt+List(rt,i,*
-00032510: 2a6f 7074 7329 0a20 2020 2020 2020 2020  *opts).         
-00032520: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-00032530: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00032540: 7369 6e73 7461 6e63 6528 6967 6e6f 7265  sinstance(ignore
-00032550: 732c 7475 706c 6529 2061 6e64 2028 5479  s,tuple) and (Ty
-00032560: 7065 2869 2c69 676e 6f72 6573 2920 6f72  pe(i,ignores) or
-00032570: 2049 7349 6e28 692c 6967 6e6f 7265 7329   IsIn(i,ignores)
-00032580: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00032590: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
-000325a0: 2020 2020 2020 2020 7274 2e61 7070 656e          rt.appen
-000325b0: 6428 6929 0a20 2020 2069 6620 6f70 7473  d(i).    if opts
-000325c0: 2e67 6574 2827 7374 7269 7027 293a 0a20  .get('strip'):. 
-000325d0: 2020 2020 2020 2072 743d 5b69 2e73 7472         rt=[i.str
-000325e0: 6970 2829 2069 6620 6973 696e 7374 616e  ip() if isinstan
-000325f0: 6365 2869 2c28 7374 722c 6279 7465 7329  ce(i,(str,bytes)
-00032600: 2920 656c 7365 2069 2066 6f72 2069 2069  ) else i for i i
-00032610: 6e20 7274 5d0a 2020 2020 6966 206f 7074  n rt].    if opt
-00032620: 732e 6765 7428 2775 6e69 7127 293a 0a20  s.get('uniq'):. 
-00032630: 2020 2020 2020 2072 6574 7572 6e20 556e         return Un
-00032640: 6971 2872 7429 0a20 2020 2069 6478 3d6f  iq(rt).    idx=o
-00032650: 7074 732e 6765 7428 2769 6478 2729 0a20  pts.get('idx'). 
-00032660: 2020 2069 6620 6e6f 7420 4973 4e6f 6e65     if not IsNone
-00032670: 2869 6478 293a 0a20 2020 2020 2020 206f  (idx):.        o
-00032680: 6b2c 6964 783d 496e 6465 7846 6f72 6d28  k,idx=IndexForm(
-00032690: 6964 782c 6964 785f 6f6e 6c79 3d54 7275  idx,idx_only=Tru
-000326a0: 652c 7379 6d62 6f6c 3d27 2c27 290a 2020  e,symbol=',').  
-000326b0: 2020 2020 2020 6966 206f 6b20 6973 2046        if ok is F
-000326c0: 616c 7365 3a20 7265 7475 726e 206f 7074  alse: return opt
-000326d0: 732e 6765 7428 2764 6566 6175 6c74 272c  s.get('default',
-000326e0: 4661 6c73 6529 0a20 2020 2020 2020 2069  False).        i
-000326f0: 6620 6973 696e 7374 616e 6365 2869 6478  f isinstance(idx
-00032700: 2c74 7570 6c65 2920 616e 6420 6c65 6e28  ,tuple) and len(
-00032710: 6964 7829 203d 3d20 323a 0a20 2020 2020  idx) == 2:.     
-00032720: 2020 2020 2020 2069 6478 3d72 616e 6765         idx=range
-00032730: 2869 6478 5b30 5d2c 6964 785b 315d 2b31  (idx[0],idx[1]+1
-00032740: 290a 2020 2020 2020 2020 6966 206e 6f74  ).        if not
-00032750: 2054 7970 6528 6964 782c 286c 6973 742c   Type(idx,(list,
-00032760: 7475 706c 652c 2772 616e 6765 2729 293a  tuple,'range')):
-00032770: 2069 6478 3d5b 6964 785d 0a20 2020 2020   idx=[idx].     
-00032780: 2020 2074 743d 5b5d 0a20 2020 2020 2020     tt=[].       
-00032790: 2066 6f72 2069 2069 6e20 6964 783a 0a20   for i in idx:. 
-000327a0: 2020 2020 2020 2020 2020 2069 6620 6d6f             if mo
-000327b0: 6465 203d 3d20 2761 7574 6f27 3a0a 2020  de == 'auto':.  
-000327c0: 2020 2020 2020 2020 2020 2020 2020 693d                i=
-000327d0: 4669 7849 6e64 6578 2872 742c 692c 6465  FixIndex(rt,i,de
-000327e0: 6661 756c 743d 4661 6c73 652c 6572 723d  fault=False,err=
-000327f0: 4661 6c73 6529 0a20 2020 2020 2020 2020  False).         
-00032800: 2020 2065 6c69 6620 6d6f 6465 2069 6e20     elif mode in 
-00032810: 5b27 6572 7227 2c27 6967 6e6f 7265 275d  ['err','ignore']
-00032820: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00032830: 2020 693d 4669 7849 6e64 6578 2872 742c    i=FixIndex(rt,
-00032840: 692c 6465 6661 756c 743d 4661 6c73 652c  i,default=False,
-00032850: 6572 723d 5472 7565 290a 2020 2020 2020  err=True).      
-00032860: 2020 2020 2020 6966 2069 2069 7320 4661        if i is Fa
-00032870: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00032880: 2020 2020 2069 6620 6d6f 6465 203d 3d20       if mode == 
-00032890: 2765 7272 273a 2072 6574 7572 6e20 6f70  'err': return op
-000328a0: 7473 2e67 6574 2827 6465 6661 756c 7427  ts.get('default'
-000328b0: 2c46 616c 7365 290a 2020 2020 2020 2020  ,False).        
-000328c0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000328d0: 2020 2020 2020 2020 2020 7474 2e61 7070            tt.app
-000328e0: 656e 6428 7274 5b69 5d29 0a20 2020 2020  end(rt[i]).     
-000328f0: 2020 2072 6574 7572 6e20 7474 0a20 2020     return tt.   
-00032900: 2069 6620 6e6f 7420 4973 4e6f 6e65 286f   if not IsNone(o
-00032910: 7074 732e 6765 7428 2772 6d27 2929 3a0a  pts.get('rm')):.
-00032920: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00032930: 6d28 7274 2c2a 6f70 7473 2e67 6574 2827  m(rt,*opts.get('
-00032940: 726d 2729 2069 6620 5479 7065 286f 7074  rm') if Type(opt
-00032950: 732e 6765 7428 2772 6d27 292c 286c 6973  s.get('rm'),(lis
-00032960: 742c 7475 706c 6529 2920 656c 7365 206f  t,tuple)) else o
-00032970: 7074 732e 6765 7428 2772 6d27 2929 0a20  pts.get('rm')). 
-00032980: 2020 2066 6972 7374 3d6f 7074 732e 6765     first=opts.ge
-00032990: 7428 2766 6972 7374 2729 0a20 2020 2069  t('first').    i
-000329a0: 6620 6e6f 7420 4973 4e6f 6e65 2866 6972  f not IsNone(fir
-000329b0: 7374 2920 616e 6420 6669 7273 7420 696e  st) and first in
-000329c0: 2072 743a 0a20 2020 2020 2020 2072 6574   rt:.        ret
-000329d0: 7572 6e20 5b66 6972 7374 5d2b 5b69 2066  urn [first]+[i f
-000329e0: 6f72 2069 2069 6e20 7274 2069 6620 6920  or i in rt if i 
-000329f0: 213d 2066 6972 7374 5d0a 2020 2020 656e  != first].    en
-00032a00: 643d 6f70 7473 2e67 6574 2827 656e 6427  d=opts.get('end'
-00032a10: 290a 2020 2020 6966 206e 6f74 2049 734e  ).    if not IsN
-00032a20: 6f6e 6528 656e 6429 2061 6e64 2065 6e64  one(end) and end
-00032a30: 2069 6e20 7274 3a0a 2020 2020 2020 2020   in rt:.        
-00032a40: 7265 7475 726e 205b 6920 666f 7220 6920  return [i for i 
-00032a50: 696e 2072 7420 6966 2069 2021 3d20 656e  in rt if i != en
-00032a60: 645d 2b5b 656e 645d 0a20 2020 2066 696e  d]+[end].    fin
-00032a70: 643d 6f70 7473 2e67 6574 2827 6669 6e64  d=opts.get('find
-00032a80: 2729 0a20 2020 2069 6620 6e6f 7420 4973  ').    if not Is
-00032a90: 4e6f 6e65 2866 696e 6429 3a0a 2020 2020  None(find):.    
-00032aa0: 2020 2020 6966 206e 6f74 2054 7970 6528      if not Type(
-00032ab0: 6669 6e64 2c28 6c69 7374 2c74 7570 6c65  find,(list,tuple
-00032ac0: 2929 3a20 6669 6e64 3d5b 6669 6e64 5d0a  )): find=[find].
-00032ad0: 2020 2020 2020 2020 7474 3d5b 5d0a 2020          tt=[].  
-00032ae0: 2020 2020 2020 666f 7220 6920 696e 2066        for i in f
-00032af0: 696e 643a 0a20 2020 2020 2020 2020 2020  ind:.           
-00032b00: 2066 6f72 207a 2069 6e20 7261 6e67 6528   for z in range(
-00032b10: 302c 6c65 6e28 7274 2929 3a0a 2020 2020  0,len(rt)):.    
-00032b20: 2020 2020 2020 2020 2020 2020 6966 2054              if T
-00032b30: 7970 6528 692c 2827 7374 7227 2c27 6279  ype(i,('str','by
-00032b40: 7465 7327 2929 3a0a 2020 2020 2020 2020  tes')):.        
-00032b50: 2020 2020 2020 2020 2020 2020 6a3d 692e              j=i.
-00032b60: 7265 706c 6163 6528 272a 272c 272e 2b27  replace('*','.+'
-00032b70: 292e 7265 706c 6163 6528 273f 272c 272e  ).replace('?','.
-00032b80: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-00032b90: 2020 2020 2020 206d 6d3d 7265 2e63 6f6d         mm=re.com
-00032ba0: 7069 6c65 286a 290a 2020 2020 2020 2020  pile(j).        
-00032bb0: 2020 2020 2020 2020 2020 2020 6966 2062              if b
-00032bc0: 6f6f 6c28 7265 2e6d 6174 6368 286d 6d2c  ool(re.match(mm,
-00032bd0: 7274 5b7a 5d29 293a 0a20 2020 2020 2020  rt[z])):.       
-00032be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032bf0: 2074 742e 6170 7065 6e64 287a 290a 2020   tt.append(z).  
-00032c00: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00032c10: 6966 2072 745b 7a5d 203d 3d20 693a 2074  if rt[z] == i: t
-00032c20: 742e 6170 7065 6e64 287a 290a 2020 2020  t.append(z).    
-00032c30: 2020 2020 7265 7475 726e 2074 740a 2020      return tt.  
-00032c40: 2020 7265 7475 726e 2072 740a 0a64 6566    return rt..def
-00032c50: 2052 6570 6c61 6365 2873 7263 2c72 6570   Replace(src,rep
-00032c60: 6c61 6365 5f77 6861 742c 7265 706c 6163  lace_what,replac
-00032c70: 655f 746f 2c64 6566 6175 6c74 3d4e 6f6e  e_to,default=Non
-00032c80: 652c 6e65 776c 696e 653d 275c 6e27 293a  e,newline='\n'):
-00032c90: 0a20 2020 2027 2727 0a20 2020 2072 6570  .    '''.    rep
-00032ca0: 6c61 6365 2073 7472 696e 6720 2873 7263  lace string (src
-00032cb0: 2c20 6672 6f6d 2c20 746f 290a 2020 2020  , from, to).    
-00032cc0: 6966 206e 6f74 2073 7472 696e 6720 7468  if not string th
-00032cd0: 656e 2072 6574 7572 6e20 6465 6661 756c  en return defaul
-00032ce0: 740a 2020 2020 6465 6661 756c 743a 2072  t.    default: r
-00032cf0: 6574 7572 6e20 6465 6669 6e65 6420 7661  eturn defined va
-00032d00: 6c75 6520 7768 656e 206e 6f74 2073 7472  lue when not str
-00032d10: 696e 670a 2020 2020 2020 276f 7267 273a  ing.      'org':
-00032d20: 2072 6574 7572 6e20 7372 630a 2020 2020   return src.    
-00032d30: 2020 2e2e 2e20 203a 2072 6574 7572 6e20    ...  : return 
-00032d40: 6465 6669 6e65 6420 6465 6661 756c 740a  defined default.
-00032d50: 2020 2020 2727 270a 2020 2020 6465 6620      '''.    def 
-00032d60: 5f53 5f28 7372 632c 7029 3a0a 2020 2020  _S_(src,p):.    
-00032d70: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00032d80: 6528 702c 6c69 7374 293a 0a20 2020 2020  e(p,list):.     
-00032d90: 2020 2020 2020 2074 3d5b 5d0a 2020 2020         t=[].    
-00032da0: 2020 2020 2020 2020 6d3d 6c65 6e28 7029          m=len(p)
-00032db0: 2d31 0a20 2020 2020 2020 2020 2020 2066  -1.            f
-00032dc0: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
-00032dd0: 6d2b 3129 3a0a 2020 2020 2020 2020 2020  m+1):.          
-00032de0: 2020 2020 2020 6966 2069 203d 3d20 303a        if i == 0:
-00032df0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032e00: 2020 2020 2074 2e61 7070 656e 6428 7372       t.append(sr
-00032e10: 635b 3a70 5b69 5d5b 305d 5d29 0a20 2020  c[:p[i][0]]).   
-00032e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032e30: 2069 6620 693d 3d6d 3a0a 2020 2020 2020   if i==m:.      
-00032e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032e50: 2020 742e 6170 7065 6e64 2873 7263 5b70    t.append(src[p
-00032e60: 5b69 5d5b 315d 3a5d 290a 2020 2020 2020  [i][1]:]).      
-00032e70: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
-00032e80: 203c 206d 3a0a 2020 2020 2020 2020 2020   < m:.          
-00032e90: 2020 2020 2020 2020 2020 742e 6170 7065            t.appe
-00032ea0: 6e64 2873 7263 5b70 5b69 2d31 5d5b 315d  nd(src[p[i-1][1]
-00032eb0: 3a70 5b69 5d5b 305d 5d29 0a20 2020 2020  :p[i][0]]).     
-00032ec0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00032ed0: 6920 3d3d 206d 3a0a 2020 2020 2020 2020  i == m:.        
-00032ee0: 2020 2020 2020 2020 2020 2020 742e 6170              t.ap
-00032ef0: 7065 6e64 2873 7263 5b70 5b69 2d31 5d5b  pend(src[p[i-1][
-00032f00: 315d 3a70 5b69 5d5b 305d 5d29 0a20 2020  1]:p[i][0]]).   
-00032f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032f20: 2074 2e61 7070 656e 6428 7372 635b 705b   t.append(src[p[
-00032f30: 695d 5b31 5d3a 5d29 0a20 2020 2020 2020  i][1]:]).       
-00032f40: 2020 2020 2072 6574 7572 6e20 740a 0a20       return t.. 
-00032f50: 2020 2069 6620 6e6f 7420 5479 7065 2873     if not Type(s
-00032f60: 7263 2c28 2773 7472 272c 2762 7974 6573  rc,('str','bytes
-00032f70: 2729 293a 0a20 2020 2020 2020 2072 6574  ')):.        ret
-00032f80: 7572 6e20 4465 6661 756c 7428 7372 632c  urn Default(src,
-00032f90: 6465 6661 756c 7429 0a20 2020 2069 6620  default).    if 
-00032fa0: 5479 7065 2873 7263 2c27 6279 7465 7327  Type(src,'bytes'
-00032fb0: 293a 0a20 2020 2020 2020 2072 6570 6c61  ):.        repla
-00032fc0: 6365 5f77 6861 743d 4279 7465 7328 7265  ce_what=Bytes(re
-00032fd0: 706c 6163 655f 7768 6174 290a 2020 2020  place_what).    
-00032fe0: 2020 2020 7265 706c 6163 655f 746f 3d42      replace_to=B
-00032ff0: 7974 6573 2872 6570 6c61 6365 5f74 6f29  ytes(replace_to)
-00033000: 0a20 2020 2020 2020 206e 6577 6c69 6e65  .        newline
-00033010: 3d42 7974 6573 286e 6577 6c69 6e65 290a  =Bytes(newline).
-00033020: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00033030: 2020 7265 706c 6163 655f 7768 6174 3d53    replace_what=S
-00033040: 7472 2872 6570 6c61 6365 5f77 6861 7429  tr(replace_what)
-00033050: 0a20 2020 2020 2020 2072 6570 6c61 6365  .        replace
-00033060: 5f74 6f3d 5374 7228 7265 706c 6163 655f  _to=Str(replace_
-00033070: 746f 290a 2020 2020 2020 2020 6e65 776c  to).        newl
-00033080: 696e 653d 5374 7228 6e65 776c 696e 6529  ine=Str(newline)
-00033090: 0a20 2020 2074 6d70 3d5b 5d0a 2020 2020  .    tmp=[].    
-000330a0: 666f 7220 6969 2069 6e20 7372 632e 7370  for ii in src.sp
-000330b0: 6c69 7428 6e65 776c 696e 6529 3a0a 2020  lit(newline):.  
-000330c0: 2020 2020 2020 7474 3d5f 535f 2869 692c        tt=_S_(ii,
-000330d0: 466f 756e 6428 6969 2c72 6570 6c61 6365  Found(ii,replace
-000330e0: 5f77 6861 742c 6c6f 6361 7469 6f6e 3d54  _what,location=T
-000330f0: 7275 6529 290a 2020 2020 2020 2020 746d  rue)).        tm
-00033100: 702e 6170 7065 6e64 284a 6f69 6e28 7474  p.append(Join(tt
-00033110: 2c72 6570 6c61 6365 5f74 6f29 2069 6620  ,replace_to) if 
-00033120: 7474 2065 6c73 6520 6969 290a 2020 2020  tt else ii).    
-00033130: 7265 7475 726e 204a 6f69 6e28 746d 702c  return Join(tmp,
-00033140: 6e65 776c 696e 6529 0a0a 6465 6620 6b72  newline)..def kr
-00033150: 6328 7274 3d4e 6f6e 652c 6368 6b3d 275f  c(rt=None,chk='_
-00033160: 272c 7274 643d 4e6f 6e65 2c64 6566 6175  ',rtd=None,defau
-00033170: 6c74 3d46 616c 7365 2c6d 6f64 653d 4e6f  lt=False,mode=No
-00033180: 6e65 2c65 7874 3d27 7368 656c 6c27 293a  ne,ext='shell'):
-00033190: 0a20 2020 2067 6c6f 6261 6c20 6b72 635f  .    global krc_
-000331a0: 6465 6669 6e65 0a20 2020 206e 7274 643d  define.    nrtd=
-000331b0: 436f 7079 286b 7263 5f64 6566 696e 652c  Copy(krc_define,
-000331c0: 6465 6570 3d54 7275 6529 2069 6620 7274  deep=True) if rt
-000331d0: 6420 6973 204e 6f6e 6520 656c 7365 2043  d is None else C
-000331e0: 6f70 7928 7274 642c 6465 6570 3d54 7275  opy(rtd,deep=Tru
-000331f0: 6529 0a20 2020 2069 6620 6578 7420 3d3d  e).    if ext ==
-00033200: 2027 7368 656c 6c27 3a20 2320 7079 7468   'shell': # pyth
-00033210: 6f6e 0a20 2020 2020 2020 2069 6620 6e6f  on.        if no
-00033220: 7420 4973 496e 2830 2c6e 7274 645b 2747  t IsIn(0,nrtd['G
-00033230: 4f4f 4427 5d29 3a20 6e72 7464 5b27 474f  OOD']): nrtd['GO
-00033240: 4f44 275d 2e61 7070 656e 6428 3029 0a20  OD'].append(0). 
-00033250: 2020 2020 2020 2069 6620 6e6f 7420 4973         if not Is
-00033260: 496e 2831 2c6e 7274 645b 2745 5252 4f27  In(1,nrtd['ERRO'
-00033270: 5d29 3a20 6e72 7464 5b27 4552 524f 275d  ]): nrtd['ERRO']
-00033280: 3d6e 7274 645b 2745 5252 4f27 5d2b 5b31  =nrtd['ERRO']+[1
-00033290: 2c31 3236 2c31 3238 2c31 3330 2c32 3535  ,126,128,130,255
-000332a0: 5d0a 2020 2020 2020 2020 6966 206e 6f74  ].        if not
-000332b0: 2049 7349 6e28 3132 372c 6e72 7464 5b27   IsIn(127,nrtd['
-000332c0: 4e46 4e44 275d 293a 206e 7274 645b 274e  NFND']): nrtd['N
-000332d0: 464e 4427 5d2e 6170 7065 6e64 2831 3237  FND'].append(127
-000332e0: 290a 2020 2020 656c 6966 2065 7874 203d  ).    elif ext =
-000332f0: 3d20 2770 7974 686f 6e27 3a20 2320 7079  = 'python': # py
-00033300: 7468 6f6e 0a20 2020 2020 2020 2069 6620  thon.        if 
-00033310: 6e6f 7420 4973 496e 2831 2c6e 7274 645b  not IsIn(1,nrtd[
-00033320: 2747 4f4f 4427 5d29 3a20 6e72 7464 5b27  'GOOD']): nrtd['
-00033330: 474f 4f44 275d 2e61 7070 656e 6428 3129  GOOD'].append(1)
-00033340: 2320 5079 7468 6f6e 2773 2054 7275 6520  # Python's True 
-00033350: 6c65 7665 6c0a 2020 2020 2020 2020 6966  level.        if
-00033360: 206e 6f74 2049 7349 6e28 302c 6e72 7464   not IsIn(0,nrtd
-00033370: 5b27 4641 494c 275d 293a 206e 7274 645b  ['FAIL']): nrtd[
-00033380: 2746 4149 4c27 5d2e 6170 7065 6e64 2830  'FAIL'].append(0
-00033390: 2923 2050 7974 686f 6e27 7320 4661 6c73  )# Python's Fals
-000333a0: 6520 6c65 7665 6c0a 2020 2020 2727 270a  e level.    '''.
-000333b0: 2020 2020 5368 656c 6c20 6578 6974 2063      Shell exit c
-000333c0: 6f64 653a 0a20 2020 2020 2031 2020 202d  ode:.      1   -
-000333d0: 2043 6174 6368 616c 6c20 666f 7220 6765   Catchall for ge
-000333e0: 6e65 7261 6c20 6572 726f 7273 0a20 2020  neral errors.   
-000333f0: 2020 2032 2020 202d 204d 6973 7573 6520     2   - Misuse 
-00033400: 6f66 2073 6865 6c6c 2062 7569 6c74 696e  of shell builtin
-00033410: 7320 2861 6363 6f72 6469 6e67 2074 6f20  s (according to 
-00033420: 4261 7368 2064 6f63 756d 656e 7461 7469  Bash documentati
-00033430: 6f6e 290a 2020 2020 3132 3620 2020 2d20  on).    126   - 
-00033440: 436f 6d6d 616e 6420 696e 766f 6b65 6420  Command invoked 
-00033450: 6361 6e6e 6f74 2065 7865 6375 7465 0a20  cannot execute. 
-00033460: 2020 2031 3237 2020 202d 20e2 809c 636f     127   - ...co
-00033470: 6d6d 616e 6420 6e6f 7420 666f 756e 64e2  mmand not found.
-00033480: 809d 0a20 2020 2031 3238 2020 202d 2049  ...    128   - I
-00033490: 6e76 616c 6964 2061 7267 756d 656e 7420  nvalid argument 
-000334a0: 746f 2065 7869 740a 2020 2020 3132 382b  to exit.    128+
-000334b0: 6e20 2d20 4661 7461 6c20 6572 726f 7220  n - Fatal error 
-000334c0: 7369 676e 616c 20e2 809c 6ee2 809d 0a20  signal ...n.... 
-000334d0: 2020 2031 3330 2020 202d 2053 6372 6970     130   - Scrip
-000334e0: 7420 7465 726d 696e 6174 6564 2062 7920  t terminated by 
-000334f0: 436f 6e74 726f 6c2d 430a 2020 2020 3235  Control-C.    25
-00033500: 355c 2a20 2d20 4578 6974 2073 7461 7475  5\* - Exit statu
-00033510: 7320 6f75 7420 6f66 2072 616e 6765 0a20  s out of range. 
-00033520: 2020 2027 2727 0a20 2020 2069 6620 6d6f     '''.    if mo
-00033530: 6465 203d 3d20 2767 6574 273a 0a20 2020  de == 'get':.   
-00033540: 2020 2020 2072 6574 7572 6e20 6e72 7464       return nrtd
-00033550: 0a20 2020 2065 6c69 6620 6d6f 6465 203d  .    elif mode =
-00033560: 3d20 276b 6579 7327 3a0a 2020 2020 2020  = 'keys':.      
-00033570: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00033580: 6e72 7464 2c64 6963 7429 3a0a 2020 2020  nrtd,dict):.    
-00033590: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-000335a0: 7274 642e 6b65 7973 2829 0a20 2020 2064  rtd.keys().    d
-000335b0: 6566 2074 7261 6e73 2869 7274 293a 0a20  ef trans(irt):. 
-000335c0: 2020 2020 2020 2074 7970 655f 6972 743d         type_irt=
-000335d0: 7479 7065 2869 7274 290a 2020 2020 2020  type(irt).      
-000335e0: 2020 666f 7220 6969 2069 6e20 6e72 7464    for ii in nrtd
-000335f0: 3a0a 2020 2020 2020 2020 2020 2020 666f  :.            fo
-00033600: 7220 6a6a 2069 6e20 6e72 7464 5b69 695d  r jj in nrtd[ii]
-00033610: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00033620: 2020 6966 2074 7970 6528 6a6a 2920 3d3d    if type(jj) ==
-00033630: 2074 7970 655f 6972 7420 616e 6420 2828   type_irt and ((
-00033640: 7479 7065 5f69 7274 2069 7320 7374 7220  type_irt is str 
-00033650: 616e 6420 6a6a 2e6c 6f77 6572 2829 203d  and jj.lower() =
-00033660: 3d20 6972 742e 6c6f 7765 7228 2929 206f  = irt.lower()) o
-00033670: 7220 6a6a 203d 3d20 6972 7429 3a0a 2020  r jj == irt):.  
-00033680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00033690: 2020 7265 7475 726e 2069 690a 2020 2020    return ii.    
-000336a0: 2020 2020 7265 7475 726e 2027 554e 4b4e      return 'UNKN
-000336b0: 270a 2020 2020 7274 633d 4765 7428 7274  '.    rtc=Get(rt
-000336c0: 2c27 307c 7263 272c 6572 723d 5472 7565  ,'0|rc',err=True
-000336d0: 2c64 6566 6175 6c74 3d27 6f72 6727 2c74  ,default='org',t
-000336e0: 7970 653d 2862 6f6f 6c2c 696e 742c 6c69  ype=(bool,int,li
-000336f0: 7374 2c74 7570 6c65 2c64 6963 7429 290a  st,tuple,dict)).
-00033700: 2020 2020 6e72 7463 3d74 7261 6e73 2850      nrtc=trans(P
-00033710: 6565 6c28 7274 632c 6572 723d 4661 6c73  eel(rtc,err=Fals
-00033720: 652c 6465 6661 756c 743d 2775 6e6b 6e6f  e,default='unkno
-00033730: 776e 2729 2920 2349 6620 4765 7428 2920  wn')) #If Get() 
-00033740: 676f 7420 6d75 6c74 6920 6461 7461 2074  got multi data t
-00033750: 6865 6e20 7573 6520 6669 7273 7420 6461  hen use first da
-00033760: 7461 0a20 2020 2069 6620 6368 6b20 213d  ta.    if chk !=
-00033770: 2027 5f27 3a0a 2020 2020 2020 2020 6966   '_':.        if
-00033780: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
-00033790: 6368 6b2c 6c69 7374 293a 2063 686b 3d5b  chk,list): chk=[
-000337a0: 6368 6b5d 0a20 2020 2020 2020 2066 6f72  chk].        for
-000337b0: 2063 6320 696e 2063 686b 3a0a 2020 2020   cc in chk:.    
-000337c0: 2020 2020 2020 2020 6966 2074 7261 6e73          if trans
-000337d0: 2863 6329 203d 3d20 6e72 7463 3a0a 2020  (cc) == nrtc:.  
-000337e0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000337f0: 7475 726e 2054 7275 650a 2020 2020 2020  turn True.      
-00033800: 2020 2020 2020 6966 206e 7274 6320 3d3d        if nrtc ==
-00033810: 2027 554e 4b4e 2720 616e 6420 6465 6661   'UNKN' and defa
-00033820: 756c 7420 3d3d 2027 6f72 6727 3a0a 2020  ult == 'org':.  
-00033830: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00033840: 7475 726e 2072 7463 0a20 2020 2020 2020  turn rtc.       
-00033850: 2072 6574 7572 6e20 4465 6661 756c 7428   return Default(
-00033860: 7274 2c64 6566 6175 6c74 290a 2020 2020  rt,default).    
-00033870: 7265 7475 726e 206e 7274 630a 0a64 6566  return nrtc..def
-00033880: 204f 7574 466f 726d 6174 2864 6174 612c   OutFormat(data,
-00033890: 6f75 743d 4e6f 6e65 2c73 7472 6970 3d46  out=None,strip=F
-000338a0: 616c 7365 2c70 6565 6c3d 4e6f 6e65 2c6f  alse,peel=None,o
-000338b0: 7267 3d4e 6f6e 652c 6465 6661 756c 743d  rg=None,default=
-000338c0: 4e6f 6e65 293a 0a20 2020 2027 2727 0a20  None):.    '''. 
-000338d0: 2020 204f 7574 7075 7420 466f 726d 6174     Output Format
-000338e0: 206d 616b 6572 0a20 2020 203c 6f70 7469   maker.    <opti
-000338f0: 6f6e 3e0a 2020 2020 2020 6f75 740a 2020  on>.      out.  
-00033900: 2020 2020 2020 4e6f 6e65 3a20 4e6f 7420        None: Not 
-00033910: 636f 6e76 6572 740a 2020 2020 2020 2020  convert.        
-00033920: 7374 722c 696e 742c 6c69 7374 2c64 6963  str,int,list,dic
-00033930: 7420 3a20 636f 6e76 6572 7420 6461 7461  t : convert data
-00033940: 2074 6f20 7761 6e74 2066 6f72 6d61 740a   to want format.
-00033950: 2020 2020 2020 2020 7261 7720 3a20 5065          raw : Pe
-00033960: 656c 6564 2064 6174 6120 7768 656e 2073  eled data when s
-00033970: 696e 676c 6520 6461 7461 285b 2761 275d  ingle data(['a']
-00033980: 2c28 2761 2729 2c7b 2761 273a 2761 6263  ,('a'),{'a':'abc
-00033990: 277d 2920 6f74 6865 7273 2074 6865 6e20  '}) others then 
-000339a0: 7265 7475 726e 206f 7269 676e 616c 0a20  return orignal. 
-000339b0: 2020 2020 2070 6565 6c0a 2020 2020 2020       peel.      
-000339c0: 2020 4e6f 6e65 203a 2061 7574 6f6d 6174    None : automat
-000339d0: 6963 616c 6c79 2077 6f72 6b69 6e67 2061  ically working a
-000339e0: 6363 6f72 6469 6e67 2074 6f20 6f75 740a  ccording to out.
-000339f0: 2020 2020 2020 2020 5472 7565 203a 2050          True : P
-00033a00: 6565 6c69 6e67 2064 6174 610a 2020 2020  eeling data.    
-00033a10: 2020 2020 4661 6c73 653a 204e 6f74 2050      False: Not P
-00033a20: 6565 6c69 6e67 0a20 2020 2020 2073 7472  eeling.      str
-00033a30: 6970 200a 2020 2020 2020 2020 4661 6c73  ip .        Fals
-00033a40: 653a 206e 6f74 2072 656d 6f76 6520 7768  e: not remove wh
-00033a50: 6974 6520 7370 6163 650a 2020 2020 2020  ite space.      
-00033a60: 2020 5472 7565 203a 2072 656d 6f76 6520    True : remove 
-00033a70: 7768 6974 6520 7370 6163 650a 2020 2020  white space.    
-00033a80: 2727 270a 2020 2020 6f75 745f 6461 7461  '''.    out_data
-00033a90: 3d4e 6f6e 650a 2020 2020 6966 2049 7349  =None.    if IsI
-00033aa0: 6e28 6461 7461 2c5b 5b5d 2c7b 7d5d 2920  n(data,[[],{}]) 
-00033ab0: 616e 6420 4973 496e 2864 6566 6175 6c74  and IsIn(default
-00033ac0: 2c5b 276f 7267 272c 276f 7269 6769 6e61  ,['org','origina
-00033ad0: 6c27 5d29 3a0a 2020 2020 2020 2020 2349  l']):.        #I
-00033ae0: 6620 6e6f 2064 6174 6120 616e 6420 6465  f no data and de
-00033af0: 6661 756c 7420 6973 206f 7269 6769 6e61  fault is origina
-00033b00: 6c20 7468 656e 2063 6f6e 7665 7274 206f  l then convert o
-00033b10: 7269 6769 6e61 6c20 746f 206f 7574 0a20  riginal to out. 
-00033b20: 2020 2020 2020 2064 6174 613d 6f72 670a         data=org.
-00033b30: 2020 2020 6966 2049 7349 6e28 6f75 742c      if IsIn(out,
-00033b40: 5b74 7570 6c65 2c27 7475 706c 6527 2c6c  [tuple,'tuple',l
-00033b50: 6973 742c 276c 6973 7427 5d29 3a0a 2020  ist,'list']):.  
-00033b60: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
-00033b70: 6e73 7461 6e63 6528 6461 7461 2c28 7475  nstance(data,(tu
-00033b80: 706c 652c 6c69 7374 2929 3a0a 2020 2020  ple,list)):.    
-00033b90: 2020 2020 2020 2020 6f75 745f 6461 7461          out_data
-00033ba0: 3d5b 6461 7461 5d0a 2020 2020 2020 2020  =[data].        
-00033bb0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00033bc0: 2020 6f75 745f 6461 7461 3d6c 6973 7428    out_data=list(
-00033bd0: 6461 7461 290a 2020 2020 2020 2020 6966  data).        if
-00033be0: 206f 7574 2069 6e20 5b74 7570 6c65 2c27   out in [tuple,'
-00033bf0: 7475 706c 6527 5d3a 0a20 2020 2020 2020  tuple']:.       
-00033c00: 2020 2020 2069 6620 6f75 745f 6461 7461       if out_data
-00033c10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00033c20: 2020 7265 7475 726e 2074 7570 6c65 286f    return tuple(o
-00033c30: 7574 5f64 6174 6129 0a20 2020 2020 2020  ut_data).       
-00033c40: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
-00033c50: 616e 6365 2864 6566 6175 6c74 2c74 7570  ance(default,tup
-00033c60: 6c65 293a 0a20 2020 2020 2020 2020 2020  le):.           
-00033c70: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-00033c80: 756c 740a 2020 2020 2020 2020 2020 2020  ult.            
-00033c90: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00033ca0: 2020 2020 2020 7265 7475 726e 2028 4465        return (De
-00033cb0: 6661 756c 7428 6f72 672c 6465 6661 756c  fault(org,defaul
-00033cc0: 7429 290a 2020 2020 2020 2020 6966 206f  t)).        if o
-00033cd0: 7574 5f64 6174 613a 0a20 2020 2020 2020  ut_data:.       
-00033ce0: 2020 2020 2072 6574 7572 6e20 6f75 745f       return out_
-00033cf0: 6461 7461 0a20 2020 2020 2020 2065 6c69  data.        eli
-00033d00: 6620 6973 696e 7374 616e 6365 2864 6566  f isinstance(def
-00033d10: 6175 6c74 2c6c 6973 7429 3a0a 2020 2020  ault,list):.    
-00033d20: 2020 2020 2020 2020 7265 7475 726e 2064          return d
-00033d30: 6566 6175 6c74 0a20 2020 2020 2020 2065  efault.        e
-00033d40: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00033d50: 2072 6574 7572 6e20 5b44 6566 6175 6c74   return [Default
-00033d60: 286f 7267 2c64 6566 6175 6c74 295d 0a20  (org,default)]. 
-00033d70: 2020 2065 6c69 6620 4973 496e 286f 7574     elif IsIn(out
-00033d80: 2c5b 6469 6374 2c27 6469 6374 275d 293a  ,[dict,'dict']):
-00033d90: 0a20 2020 2020 2020 2069 6620 6461 7461  .        if data
-00033da0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00033db0: 7475 726e 2044 6963 7428 6461 7461 290a  turn Dict(data).
-00033dc0: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-00033dd0: 6e73 7461 6e63 6528 6465 6661 756c 742c  nstance(default,
-00033de0: 6469 6374 293a 0a20 2020 2020 2020 2020  dict):.         
-00033df0: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
-00033e00: 740a 2020 2020 2020 2020 656c 7365 3a0a  t.        else:.
-00033e10: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00033e20: 726e 2044 6566 6175 6c74 286f 7267 2c64  rn Default(org,d
-00033e30: 6566 6175 6c74 290a 2020 2020 656c 6966  efault).    elif
-00033e40: 2049 7349 6e28 6f75 742c 5b27 7374 7227   IsIn(out,['str'
-00033e50: 2c73 7472 2c27 7374 7269 6e67 272c 2774  ,str,'string','t
-00033e60: 6578 7427 5d29 3a0a 2020 2020 2020 2020  ext']):.        
-00033e70: 6f75 745f 6461 7461 3d57 6869 7465 5374  out_data=WhiteSt
-00033e80: 7269 7028 5065 656c 2853 7472 2864 6174  rip(Peel(Str(dat
-00033e90: 6129 2c70 6565 6c29 2c73 7472 6970 290a  a),peel),strip).
-00033ea0: 2020 2020 656c 6966 2049 7349 6e28 6f75      elif IsIn(ou
-00033eb0: 742c 5b27 696e 7427 2c69 6e74 2c27 696e  t,['int',int,'in
-00033ec0: 7465 6765 7227 2c27 6e75 6d62 6572 272c  teger','number',
-00033ed0: 276e 756d 6572 6963 275d 293a 0a20 2020  'numeric']):.   
-00033ee0: 2020 2020 206f 7574 5f64 6174 613d 496e       out_data=In
-00033ef0: 7428 5768 6974 6553 7472 6970 2850 6565  t(WhiteStrip(Pee
-00033f00: 6c28 6461 7461 2c70 6565 6c29 2c73 7472  l(data,peel),str
-00033f10: 6970 2929 0a20 2020 2069 6620 6f75 745f  ip)).    if out_
-00033f20: 6461 7461 2069 7320 4661 6c73 653a 2023  data is False: #
-00033f30: 6966 2073 7472 206f 7220 696e 7420 676f  if str or int go
-00033f40: 7420 4661 6c73 6520 7468 656e 200a 2020  t False then .  
-00033f50: 2020 2020 2020 7265 7475 726e 2044 6566        return Def
-00033f60: 6175 6c74 286f 7267 2c64 6566 6175 6c74  ault(org,default
-00033f70: 290a 2020 2020 6966 2049 734e 6f6e 6528  ).    if IsNone(
-00033f80: 7065 656c 293a 2070 6565 6c3d 5472 7565  peel): peel=True
-00033f90: 0a20 2020 206f 7574 5f64 6174 613d 5768  .    out_data=Wh
-00033fa0: 6974 6553 7472 6970 2850 6565 6c28 6461  iteStrip(Peel(da
-00033fb0: 7461 2c70 6565 6c29 2c73 7472 6970 290a  ta,peel),strip).
-00033fc0: 2020 2020 6966 206f 7574 5f64 6174 613a      if out_data:
-00033fd0: 2072 6574 7572 6e20 6f75 745f 6461 7461   return out_data
-00033fe0: 0a20 2020 2072 6574 7572 6e20 4465 6661  .    return Defa
-00033ff0: 756c 7428 6f72 672c 6465 6661 756c 7429  ult(org,default)
-00034000: 0a0a 6465 6620 4665 6564 4675 6e63 286f  ..def FeedFunc(o
-00034010: 626a 2c2a 696e 7073 2c2a 2a6f 7074 7329  bj,*inps,**opts)
-00034020: 3a0a 2020 2020 2727 270a 2020 2020 4175  :.    '''.    Au
-00034030: 746f 6d61 7469 6361 6c6c 7920 4665 6564  tomatically Feed
-00034040: 206d 6174 6368 6564 2076 6172 6961 626c   matched variabl
-00034050: 6573 2074 6f20 6675 6e63 7469 6f6e 0a20  es to function. 
-00034060: 2020 2046 6565 6446 756e 6328 3c66 756e     FeedFunc(<fun
-00034070: 633e 2c3c 6675 6e63 7469 6f6e 2773 2061  c>,<function's a
-00034080: 7267 756d 656e 7473 3e2c 3c66 756e 6374  rguments>,<funct
-00034090: 696f 6e27 7320 7661 7269 6162 6c65 733e  ion's variables>
-000340a0: 290a 2020 2020 6966 2073 6f6d 6574 6869  ).    if somethi
-000340b0: 6e67 2077 726f 6e67 2074 6865 6e20 7265  ng wrong then re
-000340c0: 7475 726e 2046 616c 7365 0a20 2020 2069  turn False.    i
-000340d0: 6620 636f 7272 6563 7420 7468 656e 2072  f correct then r
-000340e0: 6574 7572 6e20 6f75 7470 7574 206f 6620  eturn output of 
-000340f0: 7261 6e20 7468 6520 4675 6e63 7469 6f6e  ran the Function
-00034100: 2077 6974 6820 696e 7075 7473 0a20 2020   with inputs.   
-00034110: 2027 2727 0a20 2020 2069 6620 5479 7065   '''.    if Type
-00034120: 286f 626a 2c27 7374 7227 2920 616e 6420  (obj,'str') and 
-00034130: 6e6f 7420 696e 7370 6563 742e 6973 636c  not inspect.iscl
-00034140: 6173 7328 6f62 6a29 3a20 2320 666f 7220  ass(obj): # for 
-00034150: 7374 7220 636c 6173 730a 2020 2020 2020  str class.      
-00034160: 2020 6d79 6d6f 643d 4d79 4d6f 6475 6c65    mymod=MyModule
-00034170: 2864 6566 6175 6c74 3d46 616c 7365 2c70  (default=False,p
-00034180: 6172 656e 743d 3129 0a20 2020 2020 2020  arent=1).       
-00034190: 2069 6620 6d79 6d6f 6420 6973 2046 616c   if mymod is Fal
-000341a0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000341b0: 6d79 6d6f 643d 4d79 4d6f 6475 6c65 2864  mymod=MyModule(d
-000341c0: 6566 6175 6c74 3d46 616c 7365 2c70 6172  efault=False,par
-000341d0: 656e 743d 3029 0a20 2020 2020 2020 2069  ent=0).        i
-000341e0: 6620 6d79 6d6f 6420 6973 2046 616c 7365  f mymod is False
-000341f0: 3a0a 2020 2020 2020 2020 2020 2020 6d79  :.            my
-00034200: 6d6f 643d 4d79 4d6f 6475 6c65 2864 6566  mod=MyModule(def
-00034210: 6175 6c74 3d46 616c 7365 2c70 6172 656e  ault=False,paren
-00034220: 743d 2d31 290a 2020 2020 2020 2020 6966  t=-1).        if
-00034230: 2054 7970 6528 6d79 6d6f 642c 276d 6f64   Type(mymod,'mod
-00034240: 756c 6527 293a 0a20 2020 2020 2020 2020  ule'):.         
-00034250: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-00034260: 2020 2020 2020 2020 6f62 6a3d 6765 7461          obj=geta
-00034270: 7474 7228 6d79 6d6f 642c 6f62 6a2c 4e6f  ttr(mymod,obj,No
-00034280: 6e65 290a 2020 2020 2020 2020 2020 2020  ne).            
-00034290: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
-000342a0: 2020 2020 2020 2020 5374 6445 7272 2827          StdErr('
-000342b0: 4675 6e63 7469 6f6e 206e 616d 6520 227b  Function name "{
-000342c0: 7d22 206e 6f74 2066 6f75 6e64 2069 6e20  }" not found in 
-000342d0: 7468 6520 6d6f 6475 6c65 5c6e 272e 666f  the module\n'.fo
-000342e0: 726d 6174 286f 626a 2929 0a20 2020 2020  rmat(obj)).     
-000342f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00034300: 6e20 4661 6c73 650a 2020 2020 6966 2054  n False.    if T
-00034310: 7970 6528 6f62 6a2c 2827 6675 6e63 7469  ype(obj,('functi
-00034320: 6f6e 272c 276d 6574 686f 6427 2c27 6275  on','method','bu
-00034330: 696c 7469 6e5f 6675 6e63 7469 6f6e 5f6f  iltin_function_o
-00034340: 725f 6d65 7468 6f64 272c 2774 7970 6527  r_method','type'
-00034350: 2c27 696e 7427 2c27 7374 7227 2c27 6c69  ,'int','str','li
-00034360: 7374 272c 2764 6963 7427 2929 3a0a 2020  st','dict')):.  
-00034370: 2020 2020 2020 6663 6172 6773 3d46 756e        fcargs=Fun
-00034380: 6374 696f 6e41 7267 7328 6f62 6a2c 6d6f  ctionArgs(obj,mo
-00034390: 6465 3d27 6465 7461 696c 272c 6465 6661  de='detail',defa
-000343a0: 756c 743d 7b7d 290a 2020 2020 2020 2020  ult={}).        
-000343b0: 6e69 6e70 733d 5b5d 0a20 2020 2020 2020  ninps=[].       
-000343c0: 206e 6f70 7473 3d7b 7d0a 2020 2020 2020   nopts={}.      
-000343d0: 2020 2353 7065 6369 616c 2063 6173 6520    #Special case 
-000343e0: 696e 742c 7374 722c 6c69 7374 2c64 6963  int,str,list,dic
-000343f0: 740a 2020 2020 2020 2020 6966 2054 7970  t.        if Typ
-00034400: 6528 6f62 6a2c 2028 2769 6e74 272c 2773  e(obj, ('int','s
-00034410: 7472 272c 276c 6973 7427 2c27 6469 6374  tr','list','dict
-00034420: 2729 293a 0a20 2020 2020 2020 2020 2020  ')):.           
-00034430: 2069 6620 696e 7073 3a20 6e69 6e70 732e   if inps: ninps.
-00034440: 6170 7065 6e64 2869 6e70 735b 305d 290a  append(inps[0]).
-00034450: 2020 2020 2020 2020 2020 2020 6966 2027              if '
-00034460: 6261 7365 2720 696e 206f 7074 733a 2023  base' in opts: #
-00034470: 696e 7428 290a 2020 2020 2020 2020 2020  int().          
-00034480: 2020 2020 2020 6e6f 7074 735b 2762 6173        nopts['bas
-00034490: 6527 5d3d 6f70 7473 5b27 6261 7365 275d  e']=opts['base']
-000344a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000344b0: 2765 6e63 6f64 696e 6727 2069 6e20 6f70  'encoding' in op
-000344c0: 7473 3a20 2320 7374 7228 290a 2020 2020  ts: # str().    
-000344d0: 2020 2020 2020 2020 2020 2020 6e6f 7074              nopt
-000344e0: 735b 2765 6e63 6f64 696e 6727 5d3d 6f70  s['encoding']=op
-000344f0: 7473 5b27 656e 636f 6469 6e67 275d 0a20  ts['encoding']. 
-00034500: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00034510: 5479 7065 286f 626a 2c27 7374 7227 2920  Type(obj,'str') 
-00034520: 616e 6420 6e69 6e70 7320 616e 6420 5479  and ninps and Ty
-00034530: 7065 286e 696e 7073 5b30 5d2c 2762 7974  pe(ninps[0],'byt
-00034540: 6573 2729 2061 6e64 2027 656e 636f 6469  es') and 'encodi
-00034550: 6e67 2720 6e6f 7420 696e 206f 7074 733a  ng' not in opts:
-00034560: 2023 2073 7472 2829 0a20 2020 2020 2020   # str().       
-00034570: 2020 2020 2020 2020 206e 6f70 7473 5b27           nopts['
-00034580: 656e 636f 6469 6e67 275d 3d27 6173 6369  encoding']='asci
-00034590: 6927 0a20 2020 2020 2020 2069 6478 3d30  i'.        idx=0
-000345a0: 0a20 2020 2020 2020 2069 6620 2761 7267  .        if 'arg
-000345b0: 7327 2069 6e20 6663 6172 6773 3a0a 2020  s' in fcargs:.  
-000345c0: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-000345d0: 696e 2066 6361 7267 735b 2761 7267 7327  in fcargs['args'
-000345e0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-000345f0: 2020 2069 6620 6c65 6e28 696e 7073 2920     if len(inps) 
-00034600: 3e20 6964 783a 0a20 2020 2020 2020 2020  > idx:.         
-00034610: 2020 2020 2020 2020 2020 206e 696e 7073             ninps
-00034620: 2e61 7070 656e 6428 696e 7073 5b69 6478  .append(inps[idx
-00034630: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
-00034640: 2020 2020 2020 2069 6478 2b3d 310a 2020         idx+=1.  
-00034650: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00034660: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00034670: 2020 2020 2020 2020 6966 2069 2069 6e20          if i in 
-00034680: 6f70 7473 3a0a 2020 2020 2020 2020 2020  opts:.          
-00034690: 2020 2020 2020 2020 2020 2020 2020 6e69                ni
-000346a0: 6e70 732e 6170 7065 6e64 286f 7074 732e  nps.append(opts.
-000346b0: 706f 7028 6929 290a 2020 2020 2020 2020  pop(i)).        
-000346c0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000346d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000346e0: 2020 2020 2020 2020 2020 5374 6445 7272            StdErr
-000346f0: 2827 696e 7075 7420 7061 7261 6d65 7465  ('input paramete
-00034700: 7220 227b 7d22 206e 6f74 2066 6f75 6e64  r "{}" not found
-00034710: 5c6e 272e 666f 726d 6174 2869 2929 0a20  \n'.format(i)). 
-00034720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034730: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
-00034740: 6c73 650a 2020 2020 2020 2020 6966 2027  lse.        if '
-00034750: 7661 7261 7267 7327 2069 6e20 6663 6172  varargs' in fcar
-00034760: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
-00034770: 6e69 6e70 733d 6e69 6e70 732b 6c69 7374  ninps=ninps+list
-00034780: 2869 6e70 735b 6964 783a 5d29 0a20 2020  (inps[idx:]).   
-00034790: 2020 2020 2069 6620 2764 6566 6175 6c74       if 'default
-000347a0: 7327 2069 6e20 6663 6172 6773 3a0a 2020  s' in fcargs:.  
-000347b0: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-000347c0: 696e 2066 6361 7267 735b 2764 6566 6175  in fcargs['defau
-000347d0: 6c74 7327 5d3a 0a20 2020 2020 2020 2020  lts']:.         
-000347e0: 2020 2020 2020 2069 6620 6920 696e 206f         if i in o
-000347f0: 7074 733a 0a20 2020 2020 2020 2020 2020  pts:.           
-00034800: 2020 2020 2020 2020 206e 6f70 7473 5b69           nopts[i
-00034810: 5d3d 6f70 7473 2e70 6f70 2869 2920 236d  ]=opts.pop(i) #m
-00034820: 616b 6520 7769 7468 2069 6e70 7574 2076  ake with input v
-00034830: 616c 7565 0a20 2020 2020 2020 2020 2020  alue.           
-00034840: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00034850: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00034860: 6f70 7473 5b69 5d3d 6663 6172 6773 5b27  opts[i]=fcargs['
-00034870: 6465 6661 756c 7473 275d 5b69 5d20 2320  defaults'][i] # 
-00034880: 6d61 6b65 2077 6974 6820 6465 6661 756c  make with defaul
-00034890: 7420 7661 6c75 650a 2020 2020 2020 2020  t value.        
-000348a0: 6966 2027 6b65 7977 6f72 6473 2720 696e  if 'keywords' in
-000348b0: 2066 6361 7267 733a 0a20 2020 2020 2020   fcargs:.       
-000348c0: 2020 2020 206e 6f70 7473 2e75 7064 6174       nopts.updat
-000348d0: 6528 6f70 7473 290a 2020 2020 2020 2020  e(opts).        
-000348e0: 2352 756e 2066 756e 6374 696f 6e20 7769  #Run function wi
-000348f0: 7468 2066 6f75 6e64 2061 7267 756d 656e  th found argumen
-00034900: 7473 0a20 2020 2020 2020 2069 6620 6e69  ts.        if ni
-00034910: 6e70 7320 616e 6420 6e6f 7074 733a 0a20  nps and nopts:. 
-00034920: 2020 2020 2020 2020 2020 2069 6620 5479             if Ty
-00034930: 7065 286f 626a 2c28 2769 6e74 272c 2773  pe(obj,('int','s
-00034940: 7472 2729 293a 0a20 2020 2020 2020 2020  tr')):.         
-00034950: 2020 2020 2020 2072 6574 7572 6e20 6f62         return ob
-00034960: 6a28 6e69 6e70 735b 305d 2c2a 2a6e 6f70  j(ninps[0],**nop
-00034970: 7473 290a 2020 2020 2020 2020 2020 2020  ts).            
-00034980: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00034990: 2020 2020 2020 7265 7475 726e 206f 626a        return obj
-000349a0: 282a 6e69 6e70 732c 2a2a 6e6f 7074 7329  (*ninps,**nopts)
-000349b0: 0a20 2020 2020 2020 2065 6c69 6620 6e69  .        elif ni
-000349c0: 6e70 733a 0a20 2020 2020 2020 2020 2020  nps:.           
-000349d0: 2069 6620 5479 7065 286f 626a 2c28 2769   if Type(obj,('i
-000349e0: 6e74 272c 2773 7472 272c 276c 6973 7427  nt','str','list'
-000349f0: 2c27 6469 6374 2729 293a 0a20 2020 2020  ,'dict')):.     
-00034a00: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00034a10: 6e20 6f62 6a28 6e69 6e70 735b 305d 290a  n obj(ninps[0]).
-00034a20: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00034a30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00034a40: 2020 7265 7475 726e 206f 626a 282a 6e69    return obj(*ni
-00034a50: 6e70 7329 0a20 2020 2020 2020 2065 6c69  nps).        eli
-00034a60: 6620 6e6f 7074 733a 0a20 2020 2020 2020  f nopts:.       
-00034a70: 2020 2020 2072 6574 7572 6e20 6f62 6a28       return obj(
-00034a80: 2a2a 6e6f 7074 7329 0a20 2020 2020 2020  **nopts).       
-00034a90: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00034aa0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-00034ab0: 2020 2020 2020 2020 7265 7475 726e 206f          return o
-00034ac0: 626a 2829 0a20 2020 2020 2020 2020 2020  bj().           
-00034ad0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-00034ae0: 2020 2020 2020 2020 2065 3d45 7863 6570           e=Excep
-00034af0: 744d 6573 7361 6765 2829 0a20 2020 2020  tMessage().     
-00034b00: 2020 2020 2020 2020 2020 2053 7464 4572             StdEr
-00034b10: 7228 6529 0a20 2020 2072 6574 7572 6e20  r(e).    return 
-00034b20: 4661 6c73 650a 0a64 6566 2070 7269 6e74  False..def print
-00034b30: 6628 2a6d 7367 2c2a 2a6f 7074 7329 3a0a  f(*msg,**opts):.
-00034b40: 2020 2020 2727 270a 2020 2020 5369 6d69      '''.    Simi
-00034b50: 6c61 7220 6173 2070 7269 6e74 2829 0a20  lar as print(). 
-00034b60: 2020 2064 6174 653d 5472 7565 2f46 616c     date=True/Fal
-00034b70: 7365 2020 2020 2020 2020 2020 2020 2020  se              
-00034b80: 3a20 2854 7275 6529 2070 7269 6e74 2064  : (True) print d
-00034b90: 6174 6520 696e 6974 6961 6c20 6c69 6e65  ate initial line
-00034ba0: 0a20 2020 2064 6174 655f 666f 726d 6174  .    date_format
-00034bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034bc0: 2020 3a20 6966 2064 6566 696e 6564 2064    : if defined d
-00034bd0: 6174 655f 666f 726d 6174 2074 6865 6e20  ate_format then 
-00034be0: 7072 696e 7420 6461 7465 2077 6974 6820  print date with 
-00034bf0: 6461 7465 5f66 6f72 6d61 740a 2020 2020  date_format.    
-00034c00: 6469 7265 6374 3d46 616c 7365 2f54 7275  direct=False/Tru
-00034c10: 6520 2020 2020 2020 2020 2020 203a 2028  e            : (
-00034c20: 5472 7565 2920 7072 696e 7420 7769 7468  True) print with
-00034c30: 6f75 7420 6e65 776c 696e 6520 616e 6420  out newline and 
-00034c40: 616e 7920 696e 7472 6f20 696e 666f 726d  any intro inform
-00034c50: 6174 696f 6e0a 2020 2020 6c6f 6766 696c  ation.    logfil
-00034c60: 653d 2020 2020 2020 2020 2020 2020 2020  e=              
-00034c70: 2020 2020 2020 203a 2073 6176 6569 6e67         : saveing
-00034c80: 206c 6f67 2074 6f20 6c6f 6766 696c 650a   log to logfile.
-00034c90: 2020 2020 6361 6c6c 6572 5f64 6574 6169      caller_detai
-00034ca0: 6c3d 4661 6c73 652f 5472 7565 2020 2020  l=False/True    
-00034cb0: 203a 2070 7269 6e74 2063 616c 6c65 7220   : print caller 
-00034cc0: 696e 666f 726d 6174 696f 6e0a 2020 2020  information.    
-00034cd0: 2020 2054 7275 653a 0a20 2020 2020 2020     True:.       
-00034ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034cf0: 2020 2020 2020 2020 2020 2d20 6c69 6e65            - line
-00034d00: 206e 756d 6265 722c 2066 696c 656e 616d   number, filenam
-00034d10: 652c 2061 7267 732c 206f 7074 696f 6e61  e, args, optiona
-00034d20: 6c20 6361 6c6c 6572 5f66 756c 6c5f 6669  l caller_full_fi
-00034d30: 6c65 6e61 6d65 0a20 2020 2020 2020 4661  lename.       Fa
-00034d40: 6c73 653a 2028 6465 7461 696c 2073 656c  lse: (detail sel
-00034d50: 6563 7469 6f6e 290a 2020 2020 2020 2020  ection).        
-00034d60: 2020 6361 6c6c 6572 5f61 7267 733d 4661    caller_args=Fa
-00034d70: 6c73 652f 5472 7565 203a 2028 4661 6c73  lse/True : (Fals
-00034d80: 6529 2070 7269 6e74 2061 7267 7320 6f66  e) print args of
-00034d90: 2066 756e 6374 696f 6e0a 2020 2020 2020   function.      
-00034da0: 2020 2020 6361 6c6c 6572 5f66 696c 656e      caller_filen
-00034db0: 616d 653d 4661 6c73 652f 5472 7565 203a  ame=False/True :
-00034dc0: 2028 4661 6c73 6529 2070 7269 6e74 2066   (False) print f
-00034dd0: 696c 656e 616d 650a 2020 2020 2020 2020  ilename.        
-00034de0: 2020 6361 6c6c 6572 5f66 756c 6c5f 6669    caller_full_fi
-00034df0: 6c65 6e61 6d65 3d46 616c 7365 2f54 7275  lename=False/Tru
-00034e00: 6520 3a20 2846 616c 7365 2920 7072 696e  e : (False) prin
-00034e10: 7420 6675 6c6c 2070 6174 6820 6669 6c65  t full path file
-00034e20: 6e61 6d65 0a20 2020 2020 2020 2020 2063  name.          c
-00034e30: 616c 6c65 725f 6c69 6e65 5f6e 756d 6265  aller_line_numbe
-00034e40: 723d 4661 6c73 652f 5472 7565 203a 2028  r=False/True : (
-00034e50: 4661 6c73 6529 2070 7269 6e74 206c 696e  False) print lin
-00034e60: 6520 6e75 6d62 6572 200a 2020 2020 6361  e number .    ca
-00034e70: 6c6c 6572 5f74 7265 653d 4661 6c73 652f  ller_tree=False/
-00034e80: 5472 7565 2020 2020 2020 203a 2070 7269  True       : pri
-00034e90: 6e74 2074 7265 6520 6f66 2063 616c 6c65  nt tree of calle
-00034ea0: 7220 6869 7374 6f72 790a 2020 2020 2020  r history.      
-00034eb0: 2054 7275 653a 0a20 2020 2020 2020 2020   True:.         
-00034ec0: 202d 2074 7265 6520 616e 6420 6869 7374   - tree and hist
-00034ed0: 6f72 790a 2020 2020 2020 2046 616c 7365  ory.       False
-00034ee0: 3a0a 2020 2020 2020 2020 2020 6361 6c6c  :.          call
-00034ef0: 6572 5f68 6973 746f 7279 3d46 616c 7365  er_history=False
-00034f00: 2f54 7275 6520 3a20 7265 7475 726e 2068  /True : return h
-00034f10: 6973 746f 7279 2077 6974 686f 7574 2074  istory without t
-00034f20: 7265 650a 2020 2020 7379 736c 6f67 643d  ree.    syslogd=
-00034f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034f40: 2020 2020 203a 206c 6f67 6769 6e67 2074       : logging t
-00034f50: 6f20 7379 736c 6f67 6420 6461 656d 6f6e  o syslogd daemon
-00034f60: 0a20 2020 2065 6e64 5f6e 6577 6c69 6e65  .    end_newline
-00034f70: 3d54 7275 652f 4661 6c73 6520 2020 2020  =True/False     
-00034f80: 2020 3a20 6d61 726b 206e 6577 206c 696e    : mark new lin
-00034f90: 6520 6174 2065 6e64 206f 6620 7468 6520  e at end of the 
-00034fa0: 6c69 6e65 0a20 2020 2073 7461 7274 5f6e  line.    start_n
-00034fb0: 6577 6c69 6e65 3d46 616c 7365 2f54 7275  ewline=False/Tru
-00034fc0: 6520 2020 2020 3a20 6d61 726b 206e 6577  e     : mark new
-00034fd0: 206c 696e 6520 6174 2073 7461 7274 206f   line at start o
-00034fe0: 6620 7468 6520 6c69 6e65 0a20 2020 2069  f the line.    i
-00034ff0: 6e74 726f 3d3c 7374 723e 2020 2020 2020  ntro=<str>      
-00035000: 2020 2020 2020 2020 2020 2020 3a20 6c6f              : lo
-00035010: 6720 696e 7472 6f20 7374 7269 6e67 2062  g intro string b
-00035020: 6566 6f72 6520 6c6f 6720 6461 7461 0a20  efore log data. 
-00035030: 2020 206e 6f5f 696e 7472 6f20 2020 2020     no_intro     
+00032460: 7274 3d6c 6973 7428 696e 7073 5b30 5d29  rt=list(inps[0])
+00032470: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+00032480: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00032490: 2869 676e 6f72 6573 2c74 7570 6c65 2920  (ignores,tuple) 
+000324a0: 616e 6420 2854 7970 6528 696e 7073 5b30  and (Type(inps[0
+000324b0: 5d2c 6967 6e6f 7265 7329 206f 7220 4973  ],ignores) or Is
+000324c0: 496e 2869 6e70 735b 305d 2c69 676e 6f72  In(inps[0],ignor
+000324d0: 6573 2929 3a0a 2020 2020 2020 2020 2020  es)):.          
+000324e0: 2020 7061 7373 0a20 2020 2020 2020 2065    pass.        e
+000324f0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00032500: 2072 743d 5b69 6e70 735b 305d 5d0a 2020   rt=[inps[0]].  
+00032510: 2020 666f 7220 6920 696e 2069 6e70 735b    for i in inps[
+00032520: 313a 5d3a 0a20 2020 2020 2020 2069 6620  1:]:.        if 
+00032530: 5479 7065 2869 2c6c 6973 7429 3a0a 2020  Type(i,list):.  
+00032540: 2020 2020 2020 2020 2020 7274 3d72 742b            rt=rt+
+00032550: 690a 2020 2020 2020 2020 656c 7365 3a0a  i.        else:.
+00032560: 2020 2020 2020 2020 2020 2020 6966 2054              if T
+00032570: 7970 6528 692c 7475 706c 6529 3a0a 2020  ype(i,tuple):.  
+00032580: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00032590: 2074 7570 6c65 326c 6973 743a 0a20 2020   tuple2list:.   
+000325a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000325b0: 2072 743d 7274 2b6c 6973 7428 6929 0a20   rt=rt+list(i). 
+000325c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000325d0: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
+000325e0: 2020 2020 2020 2020 656c 6966 2054 7970          elif Typ
+000325f0: 6528 692c 6469 6374 293a 0a20 2020 2020  e(i,dict):.     
+00032600: 2020 2020 2020 2020 2020 2072 743d 7274             rt=rt
+00032610: 2b4c 6973 7428 7274 2c69 2c2a 2a6f 7074  +List(rt,i,**opt
+00032620: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
+00032630: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
+00032640: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00032650: 7461 6e63 6528 6967 6e6f 7265 732c 7475  tance(ignores,tu
+00032660: 706c 6529 2061 6e64 2028 5479 7065 2869  ple) and (Type(i
+00032670: 2c69 676e 6f72 6573 2920 6f72 2049 7349  ,ignores) or IsI
+00032680: 6e28 692c 6967 6e6f 7265 7329 293a 0a20  n(i,ignores)):. 
+00032690: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+000326a0: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
+000326b0: 2020 2020 7274 2e61 7070 656e 6428 6929      rt.append(i)
+000326c0: 0a20 2020 2069 6620 6f70 7473 2e67 6574  .    if opts.get
+000326d0: 2827 7374 7269 7027 293a 0a20 2020 2020  ('strip'):.     
+000326e0: 2020 2072 743d 5b69 2e73 7472 6970 2829     rt=[i.strip()
+000326f0: 2069 6620 6973 696e 7374 616e 6365 2869   if isinstance(i
+00032700: 2c28 7374 722c 6279 7465 7329 2920 656c  ,(str,bytes)) el
+00032710: 7365 2069 2066 6f72 2069 2069 6e20 7274  se i for i in rt
+00032720: 5d0a 2020 2020 6966 206f 7074 732e 6765  ].    if opts.ge
+00032730: 7428 2775 6e69 7127 293a 0a20 2020 2020  t('uniq'):.     
+00032740: 2020 2072 6574 7572 6e20 556e 6971 2872     return Uniq(r
+00032750: 7429 0a20 2020 2069 6478 3d6f 7074 732e  t).    idx=opts.
+00032760: 6765 7428 2769 6478 2729 0a20 2020 2069  get('idx').    i
+00032770: 6620 6e6f 7420 4973 4e6f 6e65 2869 6478  f not IsNone(idx
+00032780: 293a 0a20 2020 2020 2020 206f 6b2c 6964  ):.        ok,id
+00032790: 783d 496e 6465 7846 6f72 6d28 6964 782c  x=IndexForm(idx,
+000327a0: 6964 785f 6f6e 6c79 3d54 7275 652c 7379  idx_only=True,sy
+000327b0: 6d62 6f6c 3d27 2c27 290a 2020 2020 2020  mbol=',').      
+000327c0: 2020 6966 206f 6b20 6973 2046 616c 7365    if ok is False
+000327d0: 3a20 7265 7475 726e 206f 7074 732e 6765  : return opts.ge
+000327e0: 7428 2764 6566 6175 6c74 272c 4661 6c73  t('default',Fals
+000327f0: 6529 0a20 2020 2020 2020 2069 6620 6973  e).        if is
+00032800: 696e 7374 616e 6365 2869 6478 2c74 7570  instance(idx,tup
+00032810: 6c65 2920 616e 6420 6c65 6e28 6964 7829  le) and len(idx)
+00032820: 203d 3d20 323a 0a20 2020 2020 2020 2020   == 2:.         
+00032830: 2020 2069 6478 3d72 616e 6765 2869 6478     idx=range(idx
+00032840: 5b30 5d2c 6964 785b 315d 2b31 290a 2020  [0],idx[1]+1).  
+00032850: 2020 2020 2020 6966 206e 6f74 2054 7970        if not Typ
+00032860: 6528 6964 782c 286c 6973 742c 7475 706c  e(idx,(list,tupl
+00032870: 652c 2772 616e 6765 2729 293a 2069 6478  e,'range')): idx
+00032880: 3d5b 6964 785d 0a20 2020 2020 2020 2074  =[idx].        t
+00032890: 743d 5b5d 0a20 2020 2020 2020 2066 6f72  t=[].        for
+000328a0: 2069 2069 6e20 6964 783a 0a20 2020 2020   i in idx:.     
+000328b0: 2020 2020 2020 2069 6620 6d6f 6465 203d         if mode =
+000328c0: 3d20 2761 7574 6f27 3a0a 2020 2020 2020  = 'auto':.      
+000328d0: 2020 2020 2020 2020 2020 693d 4669 7849            i=FixI
+000328e0: 6e64 6578 2872 742c 692c 6465 6661 756c  ndex(rt,i,defaul
+000328f0: 743d 4661 6c73 652c 6572 723d 4661 6c73  t=False,err=Fals
+00032900: 6529 0a20 2020 2020 2020 2020 2020 2065  e).            e
+00032910: 6c69 6620 6d6f 6465 2069 6e20 5b27 6572  lif mode in ['er
+00032920: 7227 2c27 6967 6e6f 7265 275d 3a0a 2020  r','ignore']:.  
+00032930: 2020 2020 2020 2020 2020 2020 2020 693d                i=
+00032940: 4669 7849 6e64 6578 2872 742c 692c 6465  FixIndex(rt,i,de
+00032950: 6661 756c 743d 4661 6c73 652c 6572 723d  fault=False,err=
+00032960: 5472 7565 290a 2020 2020 2020 2020 2020  True).          
+00032970: 2020 6966 2069 2069 7320 4661 6c73 653a    if i is False:
+00032980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00032990: 2069 6620 6d6f 6465 203d 3d20 2765 7272   if mode == 'err
+000329a0: 273a 2072 6574 7572 6e20 6f70 7473 2e67  ': return opts.g
+000329b0: 6574 2827 6465 6661 756c 7427 2c46 616c  et('default',Fal
+000329c0: 7365 290a 2020 2020 2020 2020 2020 2020  se).            
+000329d0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+000329e0: 2020 2020 2020 7474 2e61 7070 656e 6428        tt.append(
+000329f0: 7274 5b69 5d29 0a20 2020 2020 2020 2072  rt[i]).        r
+00032a00: 6574 7572 6e20 7474 0a20 2020 2069 6620  eturn tt.    if 
+00032a10: 6e6f 7420 4973 4e6f 6e65 286f 7074 732e  not IsNone(opts.
+00032a20: 6765 7428 2772 6d27 2929 3a0a 2020 2020  get('rm')):.    
+00032a30: 2020 2020 7265 7475 726e 2072 6d28 7274      return rm(rt
+00032a40: 2c2a 6f70 7473 2e67 6574 2827 726d 2729  ,*opts.get('rm')
+00032a50: 2069 6620 5479 7065 286f 7074 732e 6765   if Type(opts.ge
+00032a60: 7428 2772 6d27 292c 286c 6973 742c 7475  t('rm'),(list,tu
+00032a70: 706c 6529 2920 656c 7365 206f 7074 732e  ple)) else opts.
+00032a80: 6765 7428 2772 6d27 2929 0a20 2020 2066  get('rm')).    f
+00032a90: 6972 7374 3d6f 7074 732e 6765 7428 2766  irst=opts.get('f
+00032aa0: 6972 7374 2729 0a20 2020 2069 6620 6e6f  irst').    if no
+00032ab0: 7420 4973 4e6f 6e65 2866 6972 7374 2920  t IsNone(first) 
+00032ac0: 616e 6420 6669 7273 7420 696e 2072 743a  and first in rt:
+00032ad0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00032ae0: 5b66 6972 7374 5d2b 5b69 2066 6f72 2069  [first]+[i for i
+00032af0: 2069 6e20 7274 2069 6620 6920 213d 2066   in rt if i != f
+00032b00: 6972 7374 5d0a 2020 2020 656e 643d 6f70  irst].    end=op
+00032b10: 7473 2e67 6574 2827 656e 6427 290a 2020  ts.get('end').  
+00032b20: 2020 6966 206e 6f74 2049 734e 6f6e 6528    if not IsNone(
+00032b30: 656e 6429 2061 6e64 2065 6e64 2069 6e20  end) and end in 
+00032b40: 7274 3a0a 2020 2020 2020 2020 7265 7475  rt:.        retu
+00032b50: 726e 205b 6920 666f 7220 6920 696e 2072  rn [i for i in r
+00032b60: 7420 6966 2069 2021 3d20 656e 645d 2b5b  t if i != end]+[
+00032b70: 656e 645d 0a20 2020 2066 696e 643d 6f70  end].    find=op
+00032b80: 7473 2e67 6574 2827 6669 6e64 2729 0a20  ts.get('find'). 
+00032b90: 2020 2069 6620 6e6f 7420 4973 4e6f 6e65     if not IsNone
+00032ba0: 2866 696e 6429 3a0a 2020 2020 2020 2020  (find):.        
+00032bb0: 6966 206e 6f74 2054 7970 6528 6669 6e64  if not Type(find
+00032bc0: 2c28 6c69 7374 2c74 7570 6c65 2929 3a20  ,(list,tuple)): 
+00032bd0: 6669 6e64 3d5b 6669 6e64 5d0a 2020 2020  find=[find].    
+00032be0: 2020 2020 7474 3d5b 5d0a 2020 2020 2020      tt=[].      
+00032bf0: 2020 666f 7220 6920 696e 2066 696e 643a    for i in find:
+00032c00: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00032c10: 207a 2069 6e20 7261 6e67 6528 302c 6c65   z in range(0,le
+00032c20: 6e28 7274 2929 3a0a 2020 2020 2020 2020  n(rt)):.        
+00032c30: 2020 2020 2020 2020 6966 2054 7970 6528          if Type(
+00032c40: 692c 2827 7374 7227 2c27 6279 7465 7327  i,('str','bytes'
+00032c50: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+00032c60: 2020 2020 2020 2020 6a3d 692e 7265 706c          j=i.repl
+00032c70: 6163 6528 272a 272c 272e 2b27 292e 7265  ace('*','.+').re
+00032c80: 706c 6163 6528 273f 272c 272e 2729 0a20  place('?','.'). 
+00032c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032ca0: 2020 206d 6d3d 7265 2e63 6f6d 7069 6c65     mm=re.compile
+00032cb0: 286a 290a 2020 2020 2020 2020 2020 2020  (j).            
+00032cc0: 2020 2020 2020 2020 6966 2062 6f6f 6c28          if bool(
+00032cd0: 7265 2e6d 6174 6368 286d 6d2c 7274 5b7a  re.match(mm,rt[z
+00032ce0: 5d29 293a 0a20 2020 2020 2020 2020 2020  ])):.           
+00032cf0: 2020 2020 2020 2020 2020 2020 2074 742e               tt.
+00032d00: 6170 7065 6e64 287a 290a 2020 2020 2020  append(z).      
+00032d10: 2020 2020 2020 2020 2020 656c 6966 2072            elif r
+00032d20: 745b 7a5d 203d 3d20 693a 2074 742e 6170  t[z] == i: tt.ap
+00032d30: 7065 6e64 287a 290a 2020 2020 2020 2020  pend(z).        
+00032d40: 7265 7475 726e 2074 740a 2020 2020 7265  return tt.    re
+00032d50: 7475 726e 2072 740a 0a64 6566 2052 6570  turn rt..def Rep
+00032d60: 6c61 6365 2873 7263 2c72 6570 6c61 6365  lace(src,replace
+00032d70: 5f77 6861 742c 7265 706c 6163 655f 746f  _what,replace_to
+00032d80: 2c64 6566 6175 6c74 3d4e 6f6e 652c 6e65  ,default=None,ne
+00032d90: 776c 696e 653d 275c 6e27 293a 0a20 2020  wline='\n'):.   
+00032da0: 2027 2727 0a20 2020 2072 6570 6c61 6365   '''.    replace
+00032db0: 2073 7472 696e 6720 2873 7263 2c20 6672   string (src, fr
+00032dc0: 6f6d 2c20 746f 290a 2020 2020 6966 206e  om, to).    if n
+00032dd0: 6f74 2073 7472 696e 6720 7468 656e 2072  ot string then r
+00032de0: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
+00032df0: 2020 6465 6661 756c 743a 2072 6574 7572    default: retur
+00032e00: 6e20 6465 6669 6e65 6420 7661 6c75 6520  n defined value 
+00032e10: 7768 656e 206e 6f74 2073 7472 696e 670a  when not string.
+00032e20: 2020 2020 2020 276f 7267 273a 2072 6574        'org': ret
+00032e30: 7572 6e20 7372 630a 2020 2020 2020 2e2e  urn src.      ..
+00032e40: 2e20 203a 2072 6574 7572 6e20 6465 6669  .  : return defi
+00032e50: 6e65 6420 6465 6661 756c 740a 2020 2020  ned default.    
+00032e60: 2727 270a 2020 2020 6465 6620 5f53 5f28  '''.    def _S_(
+00032e70: 7372 632c 7029 3a0a 2020 2020 2020 2020  src,p):.        
+00032e80: 6966 2069 7369 6e73 7461 6e63 6528 702c  if isinstance(p,
+00032e90: 6c69 7374 293a 0a20 2020 2020 2020 2020  list):.         
+00032ea0: 2020 2074 3d5b 5d0a 2020 2020 2020 2020     t=[].        
+00032eb0: 2020 2020 6d3d 6c65 6e28 7029 2d31 0a20      m=len(p)-1. 
+00032ec0: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
+00032ed0: 2069 6e20 7261 6e67 6528 302c 6d2b 3129   in range(0,m+1)
+00032ee0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00032ef0: 2020 6966 2069 203d 3d20 303a 0a20 2020    if i == 0:.   
+00032f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032f10: 2074 2e61 7070 656e 6428 7372 635b 3a70   t.append(src[:p
+00032f20: 5b69 5d5b 305d 5d29 0a20 2020 2020 2020  [i][0]]).       
+00032f30: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00032f40: 693d 3d6d 3a0a 2020 2020 2020 2020 2020  i==m:.          
+00032f50: 2020 2020 2020 2020 2020 2020 2020 742e                t.
+00032f60: 6170 7065 6e64 2873 7263 5b70 5b69 5d5b  append(src[p[i][
+00032f70: 315d 3a5d 290a 2020 2020 2020 2020 2020  1]:]).          
+00032f80: 2020 2020 2020 656c 6966 2069 203c 206d        elif i < m
+00032f90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00032fa0: 2020 2020 2020 742e 6170 7065 6e64 2873        t.append(s
+00032fb0: 7263 5b70 5b69 2d31 5d5b 315d 3a70 5b69  rc[p[i-1][1]:p[i
+00032fc0: 5d5b 305d 5d29 0a20 2020 2020 2020 2020  ][0]]).         
+00032fd0: 2020 2020 2020 2065 6c69 6620 6920 3d3d         elif i ==
+00032fe0: 206d 3a0a 2020 2020 2020 2020 2020 2020   m:.            
+00032ff0: 2020 2020 2020 2020 742e 6170 7065 6e64          t.append
+00033000: 2873 7263 5b70 5b69 2d31 5d5b 315d 3a70  (src[p[i-1][1]:p
+00033010: 5b69 5d5b 305d 5d29 0a20 2020 2020 2020  [i][0]]).       
+00033020: 2020 2020 2020 2020 2020 2020 2074 2e61               t.a
+00033030: 7070 656e 6428 7372 635b 705b 695d 5b31  ppend(src[p[i][1
+00033040: 5d3a 5d29 0a20 2020 2020 2020 2020 2020  ]:]).           
+00033050: 2072 6574 7572 6e20 740a 0a20 2020 2069   return t..    i
+00033060: 6620 6e6f 7420 5479 7065 2873 7263 2c28  f not Type(src,(
+00033070: 2773 7472 272c 2762 7974 6573 2729 293a  'str','bytes')):
+00033080: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00033090: 4465 6661 756c 7428 7372 632c 6465 6661  Default(src,defa
+000330a0: 756c 7429 0a20 2020 2069 6620 5479 7065  ult).    if Type
+000330b0: 2873 7263 2c27 6279 7465 7327 293a 0a20  (src,'bytes'):. 
+000330c0: 2020 2020 2020 2072 6570 6c61 6365 5f77         replace_w
+000330d0: 6861 743d 4279 7465 7328 7265 706c 6163  hat=Bytes(replac
+000330e0: 655f 7768 6174 290a 2020 2020 2020 2020  e_what).        
+000330f0: 7265 706c 6163 655f 746f 3d42 7974 6573  replace_to=Bytes
+00033100: 2872 6570 6c61 6365 5f74 6f29 0a20 2020  (replace_to).   
+00033110: 2020 2020 206e 6577 6c69 6e65 3d42 7974       newline=Byt
+00033120: 6573 286e 6577 6c69 6e65 290a 2020 2020  es(newline).    
+00033130: 656c 7365 3a0a 2020 2020 2020 2020 7265  else:.        re
+00033140: 706c 6163 655f 7768 6174 3d53 7472 2872  place_what=Str(r
+00033150: 6570 6c61 6365 5f77 6861 7429 0a20 2020  eplace_what).   
+00033160: 2020 2020 2072 6570 6c61 6365 5f74 6f3d       replace_to=
+00033170: 5374 7228 7265 706c 6163 655f 746f 290a  Str(replace_to).
+00033180: 2020 2020 2020 2020 6e65 776c 696e 653d          newline=
+00033190: 5374 7228 6e65 776c 696e 6529 0a20 2020  Str(newline).   
+000331a0: 2074 6d70 3d5b 5d0a 2020 2020 666f 7220   tmp=[].    for 
+000331b0: 6969 2069 6e20 7372 632e 7370 6c69 7428  ii in src.split(
+000331c0: 6e65 776c 696e 6529 3a0a 2020 2020 2020  newline):.      
+000331d0: 2020 7474 3d5f 535f 2869 692c 466f 756e    tt=_S_(ii,Foun
+000331e0: 6428 6969 2c72 6570 6c61 6365 5f77 6861  d(ii,replace_wha
+000331f0: 742c 6c6f 6361 7469 6f6e 3d54 7275 6529  t,location=True)
+00033200: 290a 2020 2020 2020 2020 746d 702e 6170  ).        tmp.ap
+00033210: 7065 6e64 284a 6f69 6e28 7474 2c72 6570  pend(Join(tt,rep
+00033220: 6c61 6365 5f74 6f29 2069 6620 7474 2065  lace_to) if tt e
+00033230: 6c73 6520 6969 290a 2020 2020 7265 7475  lse ii).    retu
+00033240: 726e 204a 6f69 6e28 746d 702c 6e65 776c  rn Join(tmp,newl
+00033250: 696e 6529 0a0a 6465 6620 6b72 6328 7274  ine)..def krc(rt
+00033260: 3d4e 6f6e 652c 6368 6b3d 275f 272c 7274  =None,chk='_',rt
+00033270: 643d 4e6f 6e65 2c64 6566 6175 6c74 3d46  d=None,default=F
+00033280: 616c 7365 2c6d 6f64 653d 4e6f 6e65 2c65  alse,mode=None,e
+00033290: 7874 3d27 7368 656c 6c27 293a 0a20 2020  xt='shell'):.   
+000332a0: 2067 6c6f 6261 6c20 6b72 635f 6465 6669   global krc_defi
+000332b0: 6e65 0a20 2020 206e 7274 643d 436f 7079  ne.    nrtd=Copy
+000332c0: 286b 7263 5f64 6566 696e 652c 6465 6570  (krc_define,deep
+000332d0: 3d54 7275 6529 2069 6620 7274 6420 6973  =True) if rtd is
+000332e0: 204e 6f6e 6520 656c 7365 2043 6f70 7928   None else Copy(
+000332f0: 7274 642c 6465 6570 3d54 7275 6529 0a20  rtd,deep=True). 
+00033300: 2020 2069 6620 6578 7420 3d3d 2027 7368     if ext == 'sh
+00033310: 656c 6c27 3a20 2320 7079 7468 6f6e 0a20  ell': # python. 
+00033320: 2020 2020 2020 2069 6620 6e6f 7420 4973         if not Is
+00033330: 496e 2830 2c6e 7274 645b 2747 4f4f 4427  In(0,nrtd['GOOD'
+00033340: 5d29 3a20 6e72 7464 5b27 474f 4f44 275d  ]): nrtd['GOOD']
+00033350: 2e61 7070 656e 6428 3029 0a20 2020 2020  .append(0).     
+00033360: 2020 2069 6620 6e6f 7420 4973 496e 2831     if not IsIn(1
+00033370: 2c6e 7274 645b 2745 5252 4f27 5d29 3a20  ,nrtd['ERRO']): 
+00033380: 6e72 7464 5b27 4552 524f 275d 3d6e 7274  nrtd['ERRO']=nrt
+00033390: 645b 2745 5252 4f27 5d2b 5b31 2c31 3236  d['ERRO']+[1,126
+000333a0: 2c31 3238 2c31 3330 2c32 3535 5d0a 2020  ,128,130,255].  
+000333b0: 2020 2020 2020 6966 206e 6f74 2049 7349        if not IsI
+000333c0: 6e28 3132 372c 6e72 7464 5b27 4e46 4e44  n(127,nrtd['NFND
+000333d0: 275d 293a 206e 7274 645b 274e 464e 4427  ']): nrtd['NFND'
+000333e0: 5d2e 6170 7065 6e64 2831 3237 290a 2020  ].append(127).  
+000333f0: 2020 656c 6966 2065 7874 203d 3d20 2770    elif ext == 'p
+00033400: 7974 686f 6e27 3a20 2320 7079 7468 6f6e  ython': # python
+00033410: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00033420: 4973 496e 2831 2c6e 7274 645b 2747 4f4f  IsIn(1,nrtd['GOO
+00033430: 4427 5d29 3a20 6e72 7464 5b27 474f 4f44  D']): nrtd['GOOD
+00033440: 275d 2e61 7070 656e 6428 3129 2320 5079  '].append(1)# Py
+00033450: 7468 6f6e 2773 2054 7275 6520 6c65 7665  thon's True leve
+00033460: 6c0a 2020 2020 2020 2020 6966 206e 6f74  l.        if not
+00033470: 2049 7349 6e28 302c 6e72 7464 5b27 4641   IsIn(0,nrtd['FA
+00033480: 494c 275d 293a 206e 7274 645b 2746 4149  IL']): nrtd['FAI
+00033490: 4c27 5d2e 6170 7065 6e64 2830 2923 2050  L'].append(0)# P
+000334a0: 7974 686f 6e27 7320 4661 6c73 6520 6c65  ython's False le
+000334b0: 7665 6c0a 2020 2020 2727 270a 2020 2020  vel.    '''.    
+000334c0: 5368 656c 6c20 6578 6974 2063 6f64 653a  Shell exit code:
+000334d0: 0a20 2020 2020 2031 2020 202d 2043 6174  .      1   - Cat
+000334e0: 6368 616c 6c20 666f 7220 6765 6e65 7261  chall for genera
+000334f0: 6c20 6572 726f 7273 0a20 2020 2020 2032  l errors.      2
+00033500: 2020 202d 204d 6973 7573 6520 6f66 2073     - Misuse of s
+00033510: 6865 6c6c 2062 7569 6c74 696e 7320 2861  hell builtins (a
+00033520: 6363 6f72 6469 6e67 2074 6f20 4261 7368  ccording to Bash
+00033530: 2064 6f63 756d 656e 7461 7469 6f6e 290a   documentation).
+00033540: 2020 2020 3132 3620 2020 2d20 436f 6d6d      126   - Comm
+00033550: 616e 6420 696e 766f 6b65 6420 6361 6e6e  and invoked cann
+00033560: 6f74 2065 7865 6375 7465 0a20 2020 2031  ot execute.    1
+00033570: 3237 2020 202d 20e2 809c 636f 6d6d 616e  27   - ...comman
+00033580: 6420 6e6f 7420 666f 756e 64e2 809d 0a20  d not found.... 
+00033590: 2020 2031 3238 2020 202d 2049 6e76 616c     128   - Inval
+000335a0: 6964 2061 7267 756d 656e 7420 746f 2065  id argument to e
+000335b0: 7869 740a 2020 2020 3132 382b 6e20 2d20  xit.    128+n - 
+000335c0: 4661 7461 6c20 6572 726f 7220 7369 676e  Fatal error sign
+000335d0: 616c 20e2 809c 6ee2 809d 0a20 2020 2031  al ...n....    1
+000335e0: 3330 2020 202d 2053 6372 6970 7420 7465  30   - Script te
+000335f0: 726d 696e 6174 6564 2062 7920 436f 6e74  rminated by Cont
+00033600: 726f 6c2d 430a 2020 2020 3235 355c 2a20  rol-C.    255\* 
+00033610: 2d20 4578 6974 2073 7461 7475 7320 6f75  - Exit status ou
+00033620: 7420 6f66 2072 616e 6765 0a20 2020 2027  t of range.    '
+00033630: 2727 0a20 2020 2069 6620 6d6f 6465 203d  ''.    if mode =
+00033640: 3d20 2767 6574 273a 0a20 2020 2020 2020  = 'get':.       
+00033650: 2072 6574 7572 6e20 6e72 7464 0a20 2020   return nrtd.   
+00033660: 2065 6c69 6620 6d6f 6465 203d 3d20 276b   elif mode == 'k
+00033670: 6579 7327 3a0a 2020 2020 2020 2020 6966  eys':.        if
+00033680: 2069 7369 6e73 7461 6e63 6528 6e72 7464   isinstance(nrtd
+00033690: 2c64 6963 7429 3a0a 2020 2020 2020 2020  ,dict):.        
+000336a0: 2020 2020 7265 7475 726e 206e 7274 642e      return nrtd.
+000336b0: 6b65 7973 2829 0a20 2020 2064 6566 2074  keys().    def t
+000336c0: 7261 6e73 2869 7274 293a 0a20 2020 2020  rans(irt):.     
+000336d0: 2020 2074 7970 655f 6972 743d 7479 7065     type_irt=type
+000336e0: 2869 7274 290a 2020 2020 2020 2020 666f  (irt).        fo
+000336f0: 7220 6969 2069 6e20 6e72 7464 3a0a 2020  r ii in nrtd:.  
+00033700: 2020 2020 2020 2020 2020 666f 7220 6a6a            for jj
+00033710: 2069 6e20 6e72 7464 5b69 695d 3a0a 2020   in nrtd[ii]:.  
+00033720: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00033730: 2074 7970 6528 6a6a 2920 3d3d 2074 7970   type(jj) == typ
+00033740: 655f 6972 7420 616e 6420 2828 7479 7065  e_irt and ((type
+00033750: 5f69 7274 2069 7320 7374 7220 616e 6420  _irt is str and 
+00033760: 6a6a 2e6c 6f77 6572 2829 203d 3d20 6972  jj.lower() == ir
+00033770: 742e 6c6f 7765 7228 2929 206f 7220 6a6a  t.lower()) or jj
+00033780: 203d 3d20 6972 7429 3a0a 2020 2020 2020   == irt):.      
+00033790: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000337a0: 7475 726e 2069 690a 2020 2020 2020 2020  turn ii.        
+000337b0: 7265 7475 726e 2027 554e 4b4e 270a 2020  return 'UNKN'.  
+000337c0: 2020 7274 633d 4765 7428 7274 2c27 307c    rtc=Get(rt,'0|
+000337d0: 7263 272c 6572 723d 5472 7565 2c64 6566  rc',err=True,def
+000337e0: 6175 6c74 3d27 6f72 6727 2c74 7970 653d  ault='org',type=
+000337f0: 2862 6f6f 6c2c 696e 742c 6c69 7374 2c74  (bool,int,list,t
+00033800: 7570 6c65 2c64 6963 7429 290a 2020 2020  uple,dict)).    
+00033810: 6e72 7463 3d74 7261 6e73 2850 6565 6c28  nrtc=trans(Peel(
+00033820: 7274 632c 6572 723d 4661 6c73 652c 6465  rtc,err=False,de
+00033830: 6661 756c 743d 2775 6e6b 6e6f 776e 2729  fault='unknown')
+00033840: 2920 2349 6620 4765 7428 2920 676f 7420  ) #If Get() got 
+00033850: 6d75 6c74 6920 6461 7461 2074 6865 6e20  multi data then 
+00033860: 7573 6520 6669 7273 7420 6461 7461 0a20  use first data. 
+00033870: 2020 2069 6620 6368 6b20 213d 2027 5f27     if chk != '_'
+00033880: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
+00033890: 2069 7369 6e73 7461 6e63 6528 6368 6b2c   isinstance(chk,
+000338a0: 6c69 7374 293a 2063 686b 3d5b 6368 6b5d  list): chk=[chk]
+000338b0: 0a20 2020 2020 2020 2066 6f72 2063 6320  .        for cc 
+000338c0: 696e 2063 686b 3a0a 2020 2020 2020 2020  in chk:.        
+000338d0: 2020 2020 6966 2074 7261 6e73 2863 6329      if trans(cc)
+000338e0: 203d 3d20 6e72 7463 3a0a 2020 2020 2020   == nrtc:.      
+000338f0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00033900: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
+00033910: 2020 6966 206e 7274 6320 3d3d 2027 554e    if nrtc == 'UN
+00033920: 4b4e 2720 616e 6420 6465 6661 756c 7420  KN' and default 
+00033930: 3d3d 2027 6f72 6727 3a0a 2020 2020 2020  == 'org':.      
+00033940: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00033950: 2072 7463 0a20 2020 2020 2020 2072 6574   rtc.        ret
+00033960: 7572 6e20 4465 6661 756c 7428 7274 2c64  urn Default(rt,d
+00033970: 6566 6175 6c74 290a 2020 2020 7265 7475  efault).    retu
+00033980: 726e 206e 7274 630a 0a64 6566 204f 7574  rn nrtc..def Out
+00033990: 466f 726d 6174 2864 6174 612c 6f75 743d  Format(data,out=
+000339a0: 4e6f 6e65 2c73 7472 6970 3d46 616c 7365  None,strip=False
+000339b0: 2c70 6565 6c3d 4e6f 6e65 2c6f 7267 3d4e  ,peel=None,org=N
+000339c0: 6f6e 652c 6465 6661 756c 743d 4e6f 6e65  one,default=None
+000339d0: 293a 0a20 2020 2027 2727 0a20 2020 204f  ):.    '''.    O
+000339e0: 7574 7075 7420 466f 726d 6174 206d 616b  utput Format mak
+000339f0: 6572 0a20 2020 203c 6f70 7469 6f6e 3e0a  er.    <option>.
+00033a00: 2020 2020 2020 6f75 740a 2020 2020 2020        out.      
+00033a10: 2020 4e6f 6e65 3a20 4e6f 7420 636f 6e76    None: Not conv
+00033a20: 6572 740a 2020 2020 2020 2020 7374 722c  ert.        str,
+00033a30: 696e 742c 6c69 7374 2c64 6963 7420 3a20  int,list,dict : 
+00033a40: 636f 6e76 6572 7420 6461 7461 2074 6f20  convert data to 
+00033a50: 7761 6e74 2066 6f72 6d61 740a 2020 2020  want format.    
+00033a60: 2020 2020 7261 7720 3a20 5065 656c 6564      raw : Peeled
+00033a70: 2064 6174 6120 7768 656e 2073 696e 676c   data when singl
+00033a80: 6520 6461 7461 285b 2761 275d 2c28 2761  e data(['a'],('a
+00033a90: 2729 2c7b 2761 273a 2761 6263 277d 2920  '),{'a':'abc'}) 
+00033aa0: 6f74 6865 7273 2074 6865 6e20 7265 7475  others then retu
+00033ab0: 726e 206f 7269 676e 616c 0a20 2020 2020  rn orignal.     
+00033ac0: 2070 6565 6c0a 2020 2020 2020 2020 4e6f   peel.        No
+00033ad0: 6e65 203a 2061 7574 6f6d 6174 6963 616c  ne : automatical
+00033ae0: 6c79 2077 6f72 6b69 6e67 2061 6363 6f72  ly working accor
+00033af0: 6469 6e67 2074 6f20 6f75 740a 2020 2020  ding to out.    
+00033b00: 2020 2020 5472 7565 203a 2050 6565 6c69      True : Peeli
+00033b10: 6e67 2064 6174 610a 2020 2020 2020 2020  ng data.        
+00033b20: 4661 6c73 653a 204e 6f74 2050 6565 6c69  False: Not Peeli
+00033b30: 6e67 0a20 2020 2020 2073 7472 6970 200a  ng.      strip .
+00033b40: 2020 2020 2020 2020 4661 6c73 653a 206e          False: n
+00033b50: 6f74 2072 656d 6f76 6520 7768 6974 6520  ot remove white 
+00033b60: 7370 6163 650a 2020 2020 2020 2020 5472  space.        Tr
+00033b70: 7565 203a 2072 656d 6f76 6520 7768 6974  ue : remove whit
+00033b80: 6520 7370 6163 650a 2020 2020 2727 270a  e space.    '''.
+00033b90: 2020 2020 6f75 745f 6461 7461 3d4e 6f6e      out_data=Non
+00033ba0: 650a 2020 2020 6966 2049 7349 6e28 6461  e.    if IsIn(da
+00033bb0: 7461 2c5b 5b5d 2c7b 7d5d 2920 616e 6420  ta,[[],{}]) and 
+00033bc0: 4973 496e 2864 6566 6175 6c74 2c5b 276f  IsIn(default,['o
+00033bd0: 7267 272c 276f 7269 6769 6e61 6c27 5d29  rg','original'])
+00033be0: 3a0a 2020 2020 2020 2020 2349 6620 6e6f  :.        #If no
+00033bf0: 2064 6174 6120 616e 6420 6465 6661 756c   data and defaul
+00033c00: 7420 6973 206f 7269 6769 6e61 6c20 7468  t is original th
+00033c10: 656e 2063 6f6e 7665 7274 206f 7269 6769  en convert origi
+00033c20: 6e61 6c20 746f 206f 7574 0a20 2020 2020  nal to out.     
+00033c30: 2020 2064 6174 613d 6f72 670a 2020 2020     data=org.    
+00033c40: 6966 2049 7349 6e28 6f75 742c 5b74 7570  if IsIn(out,[tup
+00033c50: 6c65 2c27 7475 706c 6527 2c6c 6973 742c  le,'tuple',list,
+00033c60: 276c 6973 7427 5d29 3a0a 2020 2020 2020  'list']):.      
+00033c70: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
+00033c80: 6e63 6528 6461 7461 2c28 7475 706c 652c  nce(data,(tuple,
+00033c90: 6c69 7374 2929 3a0a 2020 2020 2020 2020  list)):.        
+00033ca0: 2020 2020 6f75 745f 6461 7461 3d5b 6461      out_data=[da
+00033cb0: 7461 5d0a 2020 2020 2020 2020 656c 7365  ta].        else
+00033cc0: 3a0a 2020 2020 2020 2020 2020 2020 6f75  :.            ou
+00033cd0: 745f 6461 7461 3d6c 6973 7428 6461 7461  t_data=list(data
+00033ce0: 290a 2020 2020 2020 2020 6966 206f 7574  ).        if out
+00033cf0: 2069 6e20 5b74 7570 6c65 2c27 7475 706c   in [tuple,'tupl
+00033d00: 6527 5d3a 0a20 2020 2020 2020 2020 2020  e']:.           
+00033d10: 2069 6620 6f75 745f 6461 7461 3a0a 2020   if out_data:.  
+00033d20: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00033d30: 7475 726e 2074 7570 6c65 286f 7574 5f64  turn tuple(out_d
+00033d40: 6174 6129 0a20 2020 2020 2020 2020 2020  ata).           
+00033d50: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+00033d60: 2864 6566 6175 6c74 2c74 7570 6c65 293a  (default,tuple):
+00033d70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00033d80: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+00033d90: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00033da0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00033db0: 2020 7265 7475 726e 2028 4465 6661 756c    return (Defaul
+00033dc0: 7428 6f72 672c 6465 6661 756c 7429 290a  t(org,default)).
+00033dd0: 2020 2020 2020 2020 6966 206f 7574 5f64          if out_d
+00033de0: 6174 613a 0a20 2020 2020 2020 2020 2020  ata:.           
+00033df0: 2072 6574 7572 6e20 6f75 745f 6461 7461   return out_data
+00033e00: 0a20 2020 2020 2020 2065 6c69 6620 6973  .        elif is
+00033e10: 696e 7374 616e 6365 2864 6566 6175 6c74  instance(default
+00033e20: 2c6c 6973 7429 3a0a 2020 2020 2020 2020  ,list):.        
+00033e30: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
+00033e40: 6c74 0a20 2020 2020 2020 2065 6c73 653a  lt.        else:
+00033e50: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00033e60: 7572 6e20 5b44 6566 6175 6c74 286f 7267  urn [Default(org
+00033e70: 2c64 6566 6175 6c74 295d 0a20 2020 2065  ,default)].    e
+00033e80: 6c69 6620 4973 496e 286f 7574 2c5b 6469  lif IsIn(out,[di
+00033e90: 6374 2c27 6469 6374 275d 293a 0a20 2020  ct,'dict']):.   
+00033ea0: 2020 2020 2069 6620 6461 7461 3a0a 2020       if data:.  
+00033eb0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00033ec0: 2044 6963 7428 6461 7461 290a 2020 2020   Dict(data).    
+00033ed0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+00033ee0: 6e63 6528 6465 6661 756c 742c 6469 6374  nce(default,dict
+00033ef0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00033f00: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
+00033f10: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00033f20: 2020 2020 2020 2020 7265 7475 726e 2044          return D
+00033f30: 6566 6175 6c74 286f 7267 2c64 6566 6175  efault(org,defau
+00033f40: 6c74 290a 2020 2020 656c 6966 2049 7349  lt).    elif IsI
+00033f50: 6e28 6f75 742c 5b27 7374 7227 2c73 7472  n(out,['str',str
+00033f60: 2c27 7374 7269 6e67 272c 2774 6578 7427  ,'string','text'
+00033f70: 5d29 3a0a 2020 2020 2020 2020 6f75 745f  ]):.        out_
+00033f80: 6461 7461 3d57 6869 7465 5374 7269 7028  data=WhiteStrip(
+00033f90: 5065 656c 2853 7472 2864 6174 6129 2c70  Peel(Str(data),p
+00033fa0: 6565 6c29 2c73 7472 6970 290a 2020 2020  eel),strip).    
+00033fb0: 656c 6966 2049 7349 6e28 6f75 742c 5b27  elif IsIn(out,['
+00033fc0: 696e 7427 2c69 6e74 2c27 696e 7465 6765  int',int,'intege
+00033fd0: 7227 2c27 6e75 6d62 6572 272c 276e 756d  r','number','num
+00033fe0: 6572 6963 275d 293a 0a20 2020 2020 2020  eric']):.       
+00033ff0: 206f 7574 5f64 6174 613d 496e 7428 5768   out_data=Int(Wh
+00034000: 6974 6553 7472 6970 2850 6565 6c28 6461  iteStrip(Peel(da
+00034010: 7461 2c70 6565 6c29 2c73 7472 6970 2929  ta,peel),strip))
+00034020: 0a20 2020 2069 6620 6f75 745f 6461 7461  .    if out_data
+00034030: 2069 7320 4661 6c73 653a 2023 6966 2073   is False: #if s
+00034040: 7472 206f 7220 696e 7420 676f 7420 4661  tr or int got Fa
+00034050: 6c73 6520 7468 656e 200a 2020 2020 2020  lse then .      
+00034060: 2020 7265 7475 726e 2044 6566 6175 6c74    return Default
+00034070: 286f 7267 2c64 6566 6175 6c74 290a 2020  (org,default).  
+00034080: 2020 6966 2049 734e 6f6e 6528 7065 656c    if IsNone(peel
+00034090: 293a 2070 6565 6c3d 5472 7565 0a20 2020  ): peel=True.   
+000340a0: 206f 7574 5f64 6174 613d 5768 6974 6553   out_data=WhiteS
+000340b0: 7472 6970 2850 6565 6c28 6461 7461 2c70  trip(Peel(data,p
+000340c0: 6565 6c29 2c73 7472 6970 290a 2020 2020  eel),strip).    
+000340d0: 6966 206f 7574 5f64 6174 613a 2072 6574  if out_data: ret
+000340e0: 7572 6e20 6f75 745f 6461 7461 0a20 2020  urn out_data.   
+000340f0: 2072 6574 7572 6e20 4465 6661 756c 7428   return Default(
+00034100: 6f72 672c 6465 6661 756c 7429 0a0a 6465  org,default)..de
+00034110: 6620 4665 6564 4675 6e63 286f 626a 2c2a  f FeedFunc(obj,*
+00034120: 696e 7073 2c2a 2a6f 7074 7329 3a0a 2020  inps,**opts):.  
+00034130: 2020 2727 270a 2020 2020 4175 746f 6d61    '''.    Automa
+00034140: 7469 6361 6c6c 7920 4665 6564 206d 6174  tically Feed mat
+00034150: 6368 6564 2076 6172 6961 626c 6573 2074  ched variables t
+00034160: 6f20 6675 6e63 7469 6f6e 0a20 2020 2046  o function.    F
+00034170: 6565 6446 756e 6328 3c66 756e 633e 2c3c  eedFunc(<func>,<
+00034180: 6675 6e63 7469 6f6e 2773 2061 7267 756d  function's argum
+00034190: 656e 7473 3e2c 3c66 756e 6374 696f 6e27  ents>,<function'
+000341a0: 7320 7661 7269 6162 6c65 733e 290a 2020  s variables>).  
+000341b0: 2020 6966 2073 6f6d 6574 6869 6e67 2077    if something w
+000341c0: 726f 6e67 2074 6865 6e20 7265 7475 726e  rong then return
+000341d0: 2046 616c 7365 0a20 2020 2069 6620 636f   False.    if co
+000341e0: 7272 6563 7420 7468 656e 2072 6574 7572  rrect then retur
+000341f0: 6e20 6f75 7470 7574 206f 6620 7261 6e20  n output of ran 
+00034200: 7468 6520 4675 6e63 7469 6f6e 2077 6974  the Function wit
+00034210: 6820 696e 7075 7473 0a20 2020 2027 2727  h inputs.    '''
+00034220: 0a20 2020 2069 6620 5479 7065 286f 626a  .    if Type(obj
+00034230: 2c27 7374 7227 2920 616e 6420 6e6f 7420  ,'str') and not 
+00034240: 696e 7370 6563 742e 6973 636c 6173 7328  inspect.isclass(
+00034250: 6f62 6a29 3a20 2320 666f 7220 7374 7220  obj): # for str 
+00034260: 636c 6173 730a 2020 2020 2020 2020 6d79  class.        my
+00034270: 6d6f 643d 4d79 4d6f 6475 6c65 2864 6566  mod=MyModule(def
+00034280: 6175 6c74 3d46 616c 7365 2c70 6172 656e  ault=False,paren
+00034290: 743d 3129 0a20 2020 2020 2020 2069 6620  t=1).        if 
+000342a0: 6d79 6d6f 6420 6973 2046 616c 7365 3a0a  mymod is False:.
+000342b0: 2020 2020 2020 2020 2020 2020 6d79 6d6f              mymo
+000342c0: 643d 4d79 4d6f 6475 6c65 2864 6566 6175  d=MyModule(defau
+000342d0: 6c74 3d46 616c 7365 2c70 6172 656e 743d  lt=False,parent=
+000342e0: 3029 0a20 2020 2020 2020 2069 6620 6d79  0).        if my
+000342f0: 6d6f 6420 6973 2046 616c 7365 3a0a 2020  mod is False:.  
+00034300: 2020 2020 2020 2020 2020 6d79 6d6f 643d            mymod=
+00034310: 4d79 4d6f 6475 6c65 2864 6566 6175 6c74  MyModule(default
+00034320: 3d46 616c 7365 2c70 6172 656e 743d 2d31  =False,parent=-1
+00034330: 290a 2020 2020 2020 2020 6966 2054 7970  ).        if Typ
+00034340: 6528 6d79 6d6f 642c 276d 6f64 756c 6527  e(mymod,'module'
+00034350: 293a 0a20 2020 2020 2020 2020 2020 2074  ):.            t
+00034360: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00034370: 2020 2020 6f62 6a3d 6765 7461 7474 7228      obj=getattr(
+00034380: 6d79 6d6f 642c 6f62 6a2c 4e6f 6e65 290a  mymod,obj,None).
+00034390: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+000343a0: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
+000343b0: 2020 2020 5374 6445 7272 2827 4675 6e63      StdErr('Func
+000343c0: 7469 6f6e 206e 616d 6520 227b 7d22 206e  tion name "{}" n
+000343d0: 6f74 2066 6f75 6e64 2069 6e20 7468 6520  ot found in the 
+000343e0: 6d6f 6475 6c65 5c6e 272e 666f 726d 6174  module\n'.format
+000343f0: 286f 626a 2929 0a20 2020 2020 2020 2020  (obj)).         
+00034400: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+00034410: 6c73 650a 2020 2020 6966 2054 7970 6528  lse.    if Type(
+00034420: 6f62 6a2c 2827 6675 6e63 7469 6f6e 272c  obj,('function',
+00034430: 276d 6574 686f 6427 2c27 6275 696c 7469  'method','builti
+00034440: 6e5f 6675 6e63 7469 6f6e 5f6f 725f 6d65  n_function_or_me
+00034450: 7468 6f64 272c 2774 7970 6527 2c27 696e  thod','type','in
+00034460: 7427 2c27 7374 7227 2c27 6c69 7374 272c  t','str','list',
+00034470: 2764 6963 7427 2929 3a0a 2020 2020 2020  'dict')):.      
+00034480: 2020 6663 6172 6773 3d46 756e 6374 696f    fcargs=Functio
+00034490: 6e41 7267 7328 6f62 6a2c 6d6f 6465 3d27  nArgs(obj,mode='
+000344a0: 6465 7461 696c 272c 6465 6661 756c 743d  detail',default=
+000344b0: 7b7d 290a 2020 2020 2020 2020 6e69 6e70  {}).        ninp
+000344c0: 733d 5b5d 0a20 2020 2020 2020 206e 6f70  s=[].        nop
+000344d0: 7473 3d7b 7d0a 2020 2020 2020 2020 2353  ts={}.        #S
+000344e0: 7065 6369 616c 2063 6173 6520 696e 742c  pecial case int,
+000344f0: 7374 722c 6c69 7374 2c64 6963 740a 2020  str,list,dict.  
+00034500: 2020 2020 2020 6966 2054 7970 6528 6f62        if Type(ob
+00034510: 6a2c 2028 2769 6e74 272c 2773 7472 272c  j, ('int','str',
+00034520: 276c 6973 7427 2c27 6469 6374 2729 293a  'list','dict')):
+00034530: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00034540: 696e 7073 3a20 6e69 6e70 732e 6170 7065  inps: ninps.appe
+00034550: 6e64 2869 6e70 735b 305d 290a 2020 2020  nd(inps[0]).    
+00034560: 2020 2020 2020 2020 6966 2027 6261 7365          if 'base
+00034570: 2720 696e 206f 7074 733a 2023 696e 7428  ' in opts: #int(
+00034580: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00034590: 2020 6e6f 7074 735b 2762 6173 6527 5d3d    nopts['base']=
+000345a0: 6f70 7473 5b27 6261 7365 275d 0a20 2020  opts['base'].   
+000345b0: 2020 2020 2020 2020 2069 6620 2765 6e63           if 'enc
+000345c0: 6f64 696e 6727 2069 6e20 6f70 7473 3a20  oding' in opts: 
+000345d0: 2320 7374 7228 290a 2020 2020 2020 2020  # str().        
+000345e0: 2020 2020 2020 2020 6e6f 7074 735b 2765          nopts['e
+000345f0: 6e63 6f64 696e 6727 5d3d 6f70 7473 5b27  ncoding']=opts['
+00034600: 656e 636f 6469 6e67 275d 0a20 2020 2020  encoding'].     
+00034610: 2020 2020 2020 2065 6c69 6620 5479 7065         elif Type
+00034620: 286f 626a 2c27 7374 7227 2920 616e 6420  (obj,'str') and 
+00034630: 6e69 6e70 7320 616e 6420 5479 7065 286e  ninps and Type(n
+00034640: 696e 7073 5b30 5d2c 2762 7974 6573 2729  inps[0],'bytes')
+00034650: 2061 6e64 2027 656e 636f 6469 6e67 2720   and 'encoding' 
+00034660: 6e6f 7420 696e 206f 7074 733a 2023 2073  not in opts: # s
+00034670: 7472 2829 0a20 2020 2020 2020 2020 2020  tr().           
+00034680: 2020 2020 206e 6f70 7473 5b27 656e 636f       nopts['enco
+00034690: 6469 6e67 275d 3d27 6173 6369 6927 0a20  ding']='ascii'. 
+000346a0: 2020 2020 2020 2069 6478 3d30 0a20 2020         idx=0.   
+000346b0: 2020 2020 2069 6620 2761 7267 7327 2069       if 'args' i
+000346c0: 6e20 6663 6172 6773 3a0a 2020 2020 2020  n fcargs:.      
+000346d0: 2020 2020 2020 666f 7220 6920 696e 2066        for i in f
+000346e0: 6361 7267 735b 2761 7267 7327 5d3a 0a20  cargs['args']:. 
+000346f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00034700: 6620 6c65 6e28 696e 7073 2920 3e20 6964  f len(inps) > id
+00034710: 783a 0a20 2020 2020 2020 2020 2020 2020  x:.             
+00034720: 2020 2020 2020 206e 696e 7073 2e61 7070         ninps.app
+00034730: 656e 6428 696e 7073 5b69 6478 5d29 0a20  end(inps[idx]). 
+00034740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034750: 2020 2069 6478 2b3d 310a 2020 2020 2020     idx+=1.      
+00034760: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00034770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034780: 2020 2020 6966 2069 2069 6e20 6f70 7473      if i in opts
+00034790: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000347a0: 2020 2020 2020 2020 2020 6e69 6e70 732e            ninps.
+000347b0: 6170 7065 6e64 286f 7074 732e 706f 7028  append(opts.pop(
+000347c0: 6929 290a 2020 2020 2020 2020 2020 2020  i)).            
+000347d0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000347e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000347f0: 2020 2020 2020 5374 6445 7272 2827 696e        StdErr('in
+00034800: 7075 7420 7061 7261 6d65 7465 7220 227b  put parameter "{
+00034810: 7d22 206e 6f74 2066 6f75 6e64 5c6e 272e  }" not found\n'.
+00034820: 666f 726d 6174 2869 2929 0a20 2020 2020  format(i)).     
+00034830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034840: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+00034850: 2020 2020 2020 2020 6966 2027 7661 7261          if 'vara
+00034860: 7267 7327 2069 6e20 6663 6172 6773 3a0a  rgs' in fcargs:.
+00034870: 2020 2020 2020 2020 2020 2020 6e69 6e70              ninp
+00034880: 733d 6e69 6e70 732b 6c69 7374 2869 6e70  s=ninps+list(inp
+00034890: 735b 6964 783a 5d29 0a20 2020 2020 2020  s[idx:]).       
+000348a0: 2069 6620 2764 6566 6175 6c74 7327 2069   if 'defaults' i
+000348b0: 6e20 6663 6172 6773 3a0a 2020 2020 2020  n fcargs:.      
+000348c0: 2020 2020 2020 666f 7220 6920 696e 2066        for i in f
+000348d0: 6361 7267 735b 2764 6566 6175 6c74 7327  cargs['defaults'
+000348e0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+000348f0: 2020 2069 6620 6920 696e 206f 7074 733a     if i in opts:
+00034900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00034910: 2020 2020 206e 6f70 7473 5b69 5d3d 6f70       nopts[i]=op
+00034920: 7473 2e70 6f70 2869 2920 236d 616b 6520  ts.pop(i) #make 
+00034930: 7769 7468 2069 6e70 7574 2076 616c 7565  with input value
+00034940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00034950: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00034960: 2020 2020 2020 2020 2020 206e 6f70 7473             nopts
+00034970: 5b69 5d3d 6663 6172 6773 5b27 6465 6661  [i]=fcargs['defa
+00034980: 756c 7473 275d 5b69 5d20 2320 6d61 6b65  ults'][i] # make
+00034990: 2077 6974 6820 6465 6661 756c 7420 7661   with default va
+000349a0: 6c75 650a 2020 2020 2020 2020 6966 2027  lue.        if '
+000349b0: 6b65 7977 6f72 6473 2720 696e 2066 6361  keywords' in fca
+000349c0: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
+000349d0: 206e 6f70 7473 2e75 7064 6174 6528 6f70   nopts.update(op
+000349e0: 7473 290a 2020 2020 2020 2020 2352 756e  ts).        #Run
+000349f0: 2066 756e 6374 696f 6e20 7769 7468 2066   function with f
+00034a00: 6f75 6e64 2061 7267 756d 656e 7473 0a20  ound arguments. 
+00034a10: 2020 2020 2020 2069 6620 6e69 6e70 7320         if ninps 
+00034a20: 616e 6420 6e6f 7074 733a 0a20 2020 2020  and nopts:.     
+00034a30: 2020 2020 2020 2069 6620 5479 7065 286f         if Type(o
+00034a40: 626a 2c28 2769 6e74 272c 2773 7472 2729  bj,('int','str')
+00034a50: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00034a60: 2020 2072 6574 7572 6e20 6f62 6a28 6e69     return obj(ni
+00034a70: 6e70 735b 305d 2c2a 2a6e 6f70 7473 290a  nps[0],**nopts).
+00034a80: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00034a90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00034aa0: 2020 7265 7475 726e 206f 626a 282a 6e69    return obj(*ni
+00034ab0: 6e70 732c 2a2a 6e6f 7074 7329 0a20 2020  nps,**nopts).   
+00034ac0: 2020 2020 2065 6c69 6620 6e69 6e70 733a       elif ninps:
+00034ad0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00034ae0: 5479 7065 286f 626a 2c28 2769 6e74 272c  Type(obj,('int',
+00034af0: 2773 7472 272c 276c 6973 7427 2c27 6469  'str','list','di
+00034b00: 6374 2729 293a 0a20 2020 2020 2020 2020  ct')):.         
+00034b10: 2020 2020 2020 2072 6574 7572 6e20 6f62         return ob
+00034b20: 6a28 6e69 6e70 735b 305d 290a 2020 2020  j(ninps[0]).    
+00034b30: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00034b40: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00034b50: 7475 726e 206f 626a 282a 6e69 6e70 7329  turn obj(*ninps)
+00034b60: 0a20 2020 2020 2020 2065 6c69 6620 6e6f  .        elif no
+00034b70: 7074 733a 0a20 2020 2020 2020 2020 2020  pts:.           
+00034b80: 2072 6574 7572 6e20 6f62 6a28 2a2a 6e6f   return obj(**no
+00034b90: 7074 7329 0a20 2020 2020 2020 2065 6c73  pts).        els
+00034ba0: 653a 0a20 2020 2020 2020 2020 2020 2074  e:.            t
+00034bb0: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00034bc0: 2020 2020 7265 7475 726e 206f 626a 2829      return obj()
+00034bd0: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
+00034be0: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
+00034bf0: 2020 2020 2065 3d45 7863 6570 744d 6573       e=ExceptMes
+00034c00: 7361 6765 2829 0a20 2020 2020 2020 2020  sage().         
+00034c10: 2020 2020 2020 2053 7464 4572 7228 6529         StdErr(e)
+00034c20: 0a20 2020 2072 6574 7572 6e20 4661 6c73  .    return Fals
+00034c30: 650a 0a64 6566 2070 7269 6e74 6628 2a6d  e..def printf(*m
+00034c40: 7367 2c2a 2a6f 7074 7329 3a0a 2020 2020  sg,**opts):.    
+00034c50: 2727 270a 2020 2020 5369 6d69 6c61 7220  '''.    Similar 
+00034c60: 6173 2070 7269 6e74 2829 0a20 2020 2064  as print().    d
+00034c70: 6174 653d 5472 7565 2f46 616c 7365 2020  ate=True/False  
+00034c80: 2020 2020 2020 2020 2020 2020 3a20 2854              : (T
+00034c90: 7275 6529 2070 7269 6e74 2064 6174 6520  rue) print date 
+00034ca0: 696e 6974 6961 6c20 6c69 6e65 0a20 2020  initial line.   
+00034cb0: 2064 6174 655f 666f 726d 6174 2020 2020   date_format    
+00034cc0: 2020 2020 2020 2020 2020 2020 2020 3a20                : 
+00034cd0: 6966 2064 6566 696e 6564 2064 6174 655f  if defined date_
+00034ce0: 666f 726d 6174 2074 6865 6e20 7072 696e  format then prin
+00034cf0: 7420 6461 7465 2077 6974 6820 6461 7465  t date with date
+00034d00: 5f66 6f72 6d61 740a 2020 2020 6469 7265  _format.    dire
+00034d10: 6374 3d46 616c 7365 2f54 7275 6520 2020  ct=False/True   
+00034d20: 2020 2020 2020 2020 203a 2028 5472 7565           : (True
+00034d30: 2920 7072 696e 7420 7769 7468 6f75 7420  ) print without 
+00034d40: 6e65 776c 696e 6520 616e 6420 616e 7920  newline and any 
+00034d50: 696e 7472 6f20 696e 666f 726d 6174 696f  intro informatio
+00034d60: 6e0a 2020 2020 6c6f 6766 696c 653d 2020  n.    logfile=  
+00034d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034d80: 2020 203a 2073 6176 6569 6e67 206c 6f67     : saveing log
+00034d90: 2074 6f20 6c6f 6766 696c 650a 2020 2020   to logfile.    
+00034da0: 6361 6c6c 6572 5f64 6574 6169 6c3d 4661  caller_detail=Fa
+00034db0: 6c73 652f 5472 7565 2020 2020 203a 2070  lse/True     : p
+00034dc0: 7269 6e74 2063 616c 6c65 7220 696e 666f  rint caller info
+00034dd0: 726d 6174 696f 6e0a 2020 2020 2020 2054  rmation.       T
+00034de0: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
+00034df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034e00: 2020 2020 2020 2d20 6c69 6e65 206e 756d        - line num
+00034e10: 6265 722c 2066 696c 656e 616d 652c 2061  ber, filename, a
+00034e20: 7267 732c 206f 7074 696f 6e61 6c20 6361  rgs, optional ca
+00034e30: 6c6c 6572 5f66 756c 6c5f 6669 6c65 6e61  ller_full_filena
+00034e40: 6d65 0a20 2020 2020 2020 4661 6c73 653a  me.       False:
+00034e50: 2028 6465 7461 696c 2073 656c 6563 7469   (detail selecti
+00034e60: 6f6e 290a 2020 2020 2020 2020 2020 6361  on).          ca
+00034e70: 6c6c 6572 5f61 7267 733d 4661 6c73 652f  ller_args=False/
+00034e80: 5472 7565 203a 2028 4661 6c73 6529 2070  True : (False) p
+00034e90: 7269 6e74 2061 7267 7320 6f66 2066 756e  rint args of fun
+00034ea0: 6374 696f 6e0a 2020 2020 2020 2020 2020  ction.          
+00034eb0: 6361 6c6c 6572 5f66 696c 656e 616d 653d  caller_filename=
+00034ec0: 4661 6c73 652f 5472 7565 203a 2028 4661  False/True : (Fa
+00034ed0: 6c73 6529 2070 7269 6e74 2066 696c 656e  lse) print filen
+00034ee0: 616d 650a 2020 2020 2020 2020 2020 6361  ame.          ca
+00034ef0: 6c6c 6572 5f66 756c 6c5f 6669 6c65 6e61  ller_full_filena
+00034f00: 6d65 3d46 616c 7365 2f54 7275 6520 3a20  me=False/True : 
+00034f10: 2846 616c 7365 2920 7072 696e 7420 6675  (False) print fu
+00034f20: 6c6c 2070 6174 6820 6669 6c65 6e61 6d65  ll path filename
+00034f30: 0a20 2020 2020 2020 2020 2063 616c 6c65  .          calle
+00034f40: 725f 6c69 6e65 5f6e 756d 6265 723d 4661  r_line_number=Fa
+00034f50: 6c73 652f 5472 7565 203a 2028 4661 6c73  lse/True : (Fals
+00034f60: 6529 2070 7269 6e74 206c 696e 6520 6e75  e) print line nu
+00034f70: 6d62 6572 200a 2020 2020 6361 6c6c 6572  mber .    caller
+00034f80: 5f74 7265 653d 4661 6c73 652f 5472 7565  _tree=False/True
+00034f90: 2020 2020 2020 203a 2070 7269 6e74 2074         : print t
+00034fa0: 7265 6520 6f66 2063 616c 6c65 7220 6869  ree of caller hi
+00034fb0: 7374 6f72 790a 2020 2020 2020 2054 7275  story.       Tru
+00034fc0: 653a 0a20 2020 2020 2020 2020 202d 2074  e:.          - t
+00034fd0: 7265 6520 616e 6420 6869 7374 6f72 790a  ree and history.
+00034fe0: 2020 2020 2020 2046 616c 7365 3a0a 2020         False:.  
+00034ff0: 2020 2020 2020 2020 6361 6c6c 6572 5f68          caller_h
+00035000: 6973 746f 7279 3d46 616c 7365 2f54 7275  istory=False/Tru
+00035010: 6520 3a20 7265 7475 726e 2068 6973 746f  e : return histo
+00035020: 7279 2077 6974 686f 7574 2074 7265 650a  ry without tree.
+00035030: 2020 2020 7379 736c 6f67 643d 2020 2020      syslogd=    
 00035040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035050: 3a20 5472 7565 3a20 7465 6d70 6f72 6172  : True: temporar
-00035060: 7920 7265 6d6f 7665 2069 6e74 726f 202c  y remove intro ,
-00035070: 2046 616c 7365 2864 6566 6175 6c74 293a   False(default):
-00035080: 2049 6e74 726f 2077 6865 6e20 6578 6973   Intro when exis
-00035090: 7420 696e 7472 6f2c 204e 6f6e 653a 2073  t intro, None: s
-000350a0: 7061 6365 2069 6e73 7465 6164 2069 6e74  pace instead int
-000350b0: 726f 2073 7472 696e 670a 2020 2020 6c6f  ro string.    lo
-000350c0: 675f 6c65 7665 6c3d 3c69 6e74 3e20 2020  g_level=<int>   
-000350d0: 2020 2020 2020 2020 2020 203a 206d 616b             : mak
-000350e0: 6520 6c6f 672d 6c65 7665 6c0a 2020 2020  e log-level.    
-000350f0: 2020 2020 7072 696e 7466 5f6c 6f67 5f62      printf_log_b
-00035100: 6173 653d 360a 2020 2020 2020 2020 7072  ase=6.        pr
-00035110: 696e 7466 2827 6161 6161 6127 2c6c 6f67  intf('aaaaa',log
-00035120: 5f6c 6576 656c 3d33 2920 2d3e 2074 6869  _level=3) -> thi
-00035130: 7320 7769 6c6c 2070 7269 6e74 0a20 2020  s will print.   
-00035140: 2020 2020 2070 7269 6e74 6628 2762 6262       printf('bbb
-00035150: 6262 272c 6c6f 675f 6c65 7665 6c3d 3829  bb',log_level=8)
-00035160: 202d 3e20 7468 6973 206e 6f74 2070 7269   -> this not pri
-00035170: 6e74 2e20 6275 7420 6966 2063 6861 6e67  nt. but if chang
-00035180: 6520 7072 696e 7466 5f6c 6f67 5f62 6173  e printf_log_bas
-00035190: 6520 746f 2039 2074 6865 6e20 6974 2077  e to 9 then it w
-000351a0: 696c 6c20 7072 696e 740a 2020 2020 6c6f  ill print.    lo
-000351b0: 673d 3c66 756e 633e 2020 2020 2020 2020  g=<func>        
-000351c0: 2020 2020 2020 2020 2020 203a 2070 7574             : put
-000351d0: 206c 6f67 6769 6e67 2064 6174 6120 746f   logging data to
-000351e0: 206c 6f67 2066 756e 6374 696f 6e0a 2020   log function.  
-000351f0: 2020 6473 703d 2020 2020 2020 2020 2020    dsp=          
-00035200: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-00035210: 2044 6973 706c 6179 2066 6f72 6d61 740a   Display format.
-00035220: 2020 2020 2020 2020 6120 203a 2061 7574          a  : aut
-00035230: 6f0a 2020 2020 2020 2020 7320 203a 2073  o.        s  : s
-00035240: 6372 6565 6e0a 2020 2020 2020 2020 6620  creen.        f 
-00035250: 203a 2073 6176 6520 746f 2066 696c 650a   : save to file.
-00035260: 2020 2020 2020 2020 6420 203a 2073 6176          d  : sav
-00035270: 6520 746f 2064 6562 7567 2066 696c 650a  e to debug file.
-00035280: 2020 2020 2020 2020 6520 203a 206c 6f67          e  : log
-00035290: 2074 6f20 7374 616e 6461 7264 2065 7272   to standard err
-000352a0: 6f72 200a 2020 2020 2020 2020 6320 203a  or .        c  :
-000352b0: 2063 6f6e 736f 6c65 0a20 2020 2020 2020   console.       
-000352c0: 2069 2020 3a20 6967 6e6f 7265 2070 7269   i  : ignore pri
-000352d0: 6e74 0a20 2020 2020 2020 2072 2020 3a20  nt.        r  : 
-000352e0: 7265 7475 726e 0a20 2020 2020 2020 2020  return.         
-000352f0: 2020 7274 3d70 7269 6e74 6628 2778 7878    rt=printf('xxx
-00035300: 7827 2c64 7370 3d27 7227 290a 2020 2020  x',dsp='r').    
-00035310: 2020 2020 2020 2070 7269 6e74 2872 7429         print(rt)
-00035320: 0a20 2020 2027 2727 0a20 2020 2067 6c6f  .    '''.    glo
-00035330: 6261 6c20 7072 696e 7466 5f63 616c 6c65  bal printf_calle
-00035340: 725f 6465 7461 696c 0a20 2020 2067 6c6f  r_detail.    glo
-00035350: 6261 6c20 7072 696e 7466 5f63 616c 6c65  bal printf_calle
-00035360: 725f 7472 6565 0a20 2020 2067 6c6f 6261  r_tree.    globa
-00035370: 6c20 7072 696e 7466 5f6c 6f67 5f62 6173  l printf_log_bas
-00035380: 650a 2020 2020 676c 6f62 616c 2070 7269  e.    global pri
-00035390: 6e74 665f 6361 6c6c 6572 5f6e 616d 650a  ntf_caller_name.
-000353a0: 2020 2020 676c 6f62 616c 2070 7269 6e74      global print
-000353b0: 665f 6e65 776c 696e 655f 696e 666f 0a20  f_newline_info. 
-000353c0: 2020 2067 6c6f 6261 6c20 7072 696e 7466     global printf
-000353d0: 5f69 676e 6f72 655f 656d 7074 790a 2020  _ignore_empty.  
-000353e0: 2020 676c 6f62 616c 2070 7269 6e74 665f    global printf_
-000353f0: 6462 675f 656d 7074 790a 2020 2020 676c  dbg_empty.    gl
-00035400: 6f62 616c 2070 7269 6e74 665f 7363 725f  obal printf_scr_
-00035410: 6462 670a 2020 2020 6469 7265 6374 3d6f  dbg.    direct=o
-00035420: 7074 732e 6765 7428 2764 6972 6563 7427  pts.get('direct'
-00035430: 2c46 616c 7365 290a 2020 2020 6473 703d  ,False).    dsp=
-00035440: 6f70 7473 2e67 6574 2827 6473 7027 2c6f  opts.get('dsp',o
-00035450: 7074 732e 6765 7428 276d 6f64 6527 2c27  pts.get('mode','
-00035460: 6127 2929 0a20 2020 2069 6620 6e6f 7420  a')).    if not 
-00035470: 6473 703a 2064 7370 3d27 6127 0a20 2020  dsp: dsp='a'.   
-00035480: 2069 6620 6473 7020 3d3d 2027 6927 3a20   if dsp == 'i': 
-00035490: 7265 7475 726e 2023 2069 676e 6f72 6520  return # ignore 
-000354a0: 7072 696e 740a 2020 2020 6c6f 673d 6f70  print.    log=op
-000354b0: 7473 2e67 6574 2827 6c6f 6727 2c4e 6f6e  ts.get('log',Non
-000354c0: 6529 0a20 2020 206c 6f67 5f6c 6576 656c  e).    log_level
-000354d0: 3d6f 7074 732e 6765 7428 276c 6f67 5f6c  =opts.get('log_l
-000354e0: 6576 656c 272c 4e6f 6e65 290a 2020 2020  evel',None).    
-000354f0: 7061 7265 6e74 5f6e 3d6f 7074 732e 6765  parent_n=opts.ge
-00035500: 7428 2763 616c 6c65 725f 7061 7265 6e74  t('caller_parent
-00035510: 272c 3129 0a20 2020 2063 616c 6c65 725f  ',1).    caller_
-00035520: 6465 7461 696c 3d6f 7074 732e 6765 7428  detail=opts.get(
-00035530: 2763 616c 6c65 7227 2c6f 7074 732e 6765  'caller',opts.ge
-00035540: 7428 2763 616c 6c65 725f 6465 7461 696c  t('caller_detail
-00035550: 272c 7072 696e 7466 5f63 616c 6c65 725f  ',printf_caller_
-00035560: 6465 7461 696c 2929 0a20 2020 2063 616c  detail)).    cal
-00035570: 6c65 725f 7472 6565 3d6f 7074 732e 6765  ler_tree=opts.ge
-00035580: 7428 2763 616c 6c65 725f 7472 6565 272c  t('caller_tree',
-00035590: 7072 696e 7466 5f63 616c 6c65 725f 7472  printf_caller_tr
-000355a0: 6565 290a 2020 2020 6361 6c6c 6572 5f68  ee).    caller_h
-000355b0: 6973 746f 7279 3d6f 7074 732e 6765 7428  istory=opts.get(
-000355c0: 2763 616c 6c65 725f 6869 7374 6f72 7927  'caller_history'
-000355d0: 2c46 616c 7365 290a 2020 2020 6361 6c6c  ,False).    call
-000355e0: 6572 5f69 676e 6f72 653d 6f70 7473 2e67  er_ignore=opts.g
-000355f0: 6574 2827 6361 6c6c 6572 5f69 676e 6f72  et('caller_ignor
-00035600: 6527 2c6f 7074 732e 6765 7428 2763 616c  e',opts.get('cal
-00035610: 6c65 725f 7570 7065 7227 2c5b 5d29 290a  ler_upper',[])).
-00035620: 2020 2020 6361 6c6c 6572 5f66 756c 6c5f      caller_full_
-00035630: 6669 6c65 6e61 6d65 3d6f 7074 732e 6765  filename=opts.ge
-00035640: 7428 2763 616c 6c65 725f 6675 6c6c 5f66  t('caller_full_f
-00035650: 696c 656e 616d 6527 2c46 616c 7365 290a  ilename',False).
-00035660: 2020 2020 6361 6c6c 6572 5f66 696c 656e      caller_filen
-00035670: 616d 653d 6f70 7473 2e67 6574 2827 6361  ame=opts.get('ca
-00035680: 6c6c 6572 5f66 696c 656e 616d 6527 2c46  ller_filename',F
-00035690: 616c 7365 290a 2020 2020 6361 6c6c 6572  alse).    caller
-000356a0: 5f6c 696e 655f 6e75 6d62 6572 3d6f 7074  _line_number=opt
-000356b0: 732e 6765 7428 2763 616c 6c65 725f 6c69  s.get('caller_li
-000356c0: 6e65 5f6e 756d 6265 7227 2c46 616c 7365  ne_number',False
-000356d0: 290a 2020 2020 6361 6c6c 6572 5f61 7267  ).    caller_arg
-000356e0: 733d 6f70 7473 2e67 6574 2827 6361 6c6c  s=opts.get('call
-000356f0: 6572 5f61 7267 7327 2c46 616c 7365 290a  er_args',False).
-00035700: 2020 2020 6361 6c6c 6572 5f6e 616d 653d      caller_name=
-00035710: 6f70 7473 2e67 6574 2827 6361 6c6c 6572  opts.get('caller
-00035720: 5f6e 616d 6527 2c70 7269 6e74 665f 6361  _name',printf_ca
-00035730: 6c6c 6572 5f6e 616d 6529 0a20 2020 2073  ller_name).    s
-00035740: 7973 6c6f 6764 3d6f 7074 732e 6765 7428  yslogd=opts.get(
-00035750: 2773 7973 6c6f 6764 272c 4e6f 6e65 290a  'syslogd',None).
-00035760: 2020 2020 7363 725f 6462 673d 6f70 7473      scr_dbg=opts
-00035770: 2e67 6574 2827 7363 725f 6462 6727 2c70  .get('scr_dbg',p
-00035780: 7269 6e74 665f 7363 725f 6462 6729 0a20  rintf_scr_dbg). 
-00035790: 2020 2073 6372 5f64 6267 5f63 6f6e 6469     scr_dbg_condi
-000357a0: 7469 6f6e 3d6f 7074 732e 6765 7428 2773  tion=opts.get('s
-000357b0: 6372 5f64 6267 5f63 6f6e 6469 7469 6f6e  cr_dbg_condition
-000357c0: 2729 0a20 2020 206e 6f5f 696e 7472 6f3d  ').    no_intro=
-000357d0: 6f70 7473 2e67 6574 2827 6e6f 5f69 6e74  opts.get('no_int
-000357e0: 726f 272c 4661 6c73 6529 0a20 2020 2069  ro',False).    i
-000357f0: 676e 6f72 655f 656d 7074 793d 6f70 7473  gnore_empty=opts
-00035800: 2e67 6574 2827 6967 6e6f 7265 5f65 6d70  .get('ignore_emp
-00035810: 7479 272c 7072 696e 7466 5f69 676e 6f72  ty',printf_ignor
-00035820: 655f 656d 7074 7929 0a20 2020 2064 6267  e_empty).    dbg
-00035830: 5f65 6d70 7479 3d6f 7074 732e 6765 7428  _empty=opts.get(
-00035840: 2764 6267 5f65 6d70 7479 272c 7072 696e  'dbg_empty',prin
-00035850: 7466 5f64 6267 5f65 6d70 7479 290a 2020  tf_dbg_empty).  
-00035860: 2020 6d73 675f 7370 6c69 743d 6f70 7473    msg_split=opts
-00035870: 2e67 6574 2827 6d73 675f 7370 6c69 7427  .get('msg_split'
-00035880: 2c27 2027 290a 2020 2020 6d73 673d 6c69  ,' ').    msg=li
-00035890: 7374 286d 7367 290a 2020 2020 6966 206e  st(msg).    if n
-000358a0: 6f5f 696e 7472 6f20 6973 2054 7275 6520  o_intro is True 
-000358b0: 6f72 2064 6972 6563 743a 0a20 2020 2020  or direct:.     
-000358c0: 2020 2064 6174 655f 666f 726d 6174 3d4e     date_format=N
-000358d0: 6f6e 650a 2020 2020 656c 7365 3a0a 2020  one.    else:.  
-000358e0: 2020 2020 2020 6461 7465 5f66 6f72 6d61        date_forma
-000358f0: 743d 6f70 7473 2e67 6574 2827 6461 7465  t=opts.get('date
-00035900: 5f66 6f72 6d61 7427 2c27 256d 2f25 642f  _format','%m/%d/
-00035910: 2559 2025 483a 254d 3a25 5327 2069 6620  %Y %H:%M:%S' if 
-00035920: 6f70 7473 2e67 6574 2827 6461 7465 2729  opts.get('date')
-00035930: 2065 6c73 6520 4e6f 6e65 290a 2020 2020   else None).    
-00035940: 2320 656e 6420 6e65 776c 696e 6520 6465  # end newline de
-00035950: 7369 676e 0a20 2020 206e 6577 5f6c 696e  sign.    new_lin
-00035960: 653d 2727 2069 6620 6469 7265 6374 2065  e='' if direct e
-00035970: 6c73 6520 6f70 7473 2e67 6574 2827 6e65  lse opts.get('ne
-00035980: 775f 6c69 6e65 272c 6f70 7473 2e67 6574  w_line',opts.get
-00035990: 2827 6e65 776c 696e 6527 2c6f 7074 732e  ('newline',opts.
-000359a0: 6765 7428 2765 6e64 272c 6f70 7473 2e67  get('end',opts.g
-000359b0: 6574 2827 656e 645f 6e65 776c 696e 6527  et('end_newline'
-000359c0: 2c6f 7074 732e 6765 7428 2770 6f73 745f  ,opts.get('post_
-000359d0: 6e65 776c 696e 6527 2c27 5c6e 2729 2929  newline','\n')))
-000359e0: 2929 0a20 2020 2069 6620 6e65 775f 6c69  )).    if new_li
-000359f0: 6e65 206e 6f74 2069 6e20 5b27 272c 275c  ne not in ['','\
-00035a00: 6e27 5d3a 6e65 775f 6c69 6e65 3d27 5c6e  n']:new_line='\n
-00035a10: 2720 6966 206e 6577 5f6c 696e 6520 616e  ' if new_line an
-00035a20: 6420 6e6f 7420 6469 7265 6374 2065 6c73  d not direct els
-00035a30: 6520 2727 0a20 2020 2023 2073 7461 7274  e ''.    # start
-00035a40: 206e 6577 6c69 6e65 2064 6573 6967 6e0a   newline design.
-00035a50: 2020 2020 6e6f 5f73 7461 7274 5f6e 6577      no_start_new
-00035a60: 6c69 6e65 3d6f 7074 732e 6765 7428 276e  line=opts.get('n
-00035a70: 6f5f 7374 6172 745f 6e65 776c 696e 6527  o_start_newline'
-00035a80: 290a 2020 2020 7374 6172 745f 6e65 776c  ).    start_newl
-00035a90: 696e 653d 2727 2069 6620 6e6f 5f73 7461  ine='' if no_sta
-00035aa0: 7274 5f6e 6577 6c69 6e65 2069 7320 5472  rt_newline is Tr
-00035ab0: 7565 2065 6c73 6520 6f70 7473 2e67 6574  ue else opts.get
-00035ac0: 2827 7374 6172 745f 6e65 776c 696e 6527  ('start_newline'
-00035ad0: 2c6f 7074 732e 6765 7428 2773 7461 7274  ,opts.get('start
-00035ae0: 272c 6f70 7473 2e67 6574 2827 7072 655f  ',opts.get('pre_
-00035af0: 6e65 776c 696e 6527 2929 290a 2020 2020  newline'))).    
-00035b00: 6966 206e 6f5f 7374 6172 745f 6e65 776c  if no_start_newl
-00035b10: 696e 653a 0a20 2020 2020 2020 2073 7461  ine:.        sta
-00035b20: 7274 5f6e 6577 6c69 6e65 3d27 270a 2020  rt_newline=''.  
-00035b30: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00035b40: 6966 2073 7461 7274 5f6e 6577 6c69 6e65  if start_newline
-00035b50: 2069 7320 5472 7565 3a0a 2020 2020 2020   is True:.      
-00035b60: 2020 2020 2020 7374 6172 745f 6e65 776c        start_newl
-00035b70: 696e 653d 275c 6e27 0a20 2020 2020 2020  ine='\n'.       
-00035b80: 2065 6c69 6620 4973 496e 2873 7461 7274   elif IsIn(start
-00035b90: 5f6e 6577 6c69 6e65 2c5b 2741 272c 2741  _newline,['A','A
-00035ba0: 7574 6f27 5d29 3a0a 2020 2020 2020 2020  uto']):.        
-00035bb0: 2020 2020 7374 6172 745f 6e65 776c 696e      start_newlin
-00035bc0: 653d 2761 7574 6f27 0a20 2020 2020 2020  e='auto'.       
-00035bd0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00035be0: 2020 2073 7461 7274 5f6e 6577 6c69 6e65     start_newline
-00035bf0: 3d27 270a 0a20 2020 2069 6620 6e6f 5f69  =''..    if no_i
-00035c00: 6e74 726f 2069 7320 5472 7565 3a20 2320  ntro is True: # 
-00035c10: 6966 206e 6f5f 696e 7472 6f20 7468 656e  if no_intro then
-00035c20: 2069 676e 6f72 6520 7374 6172 745f 6e65   ignore start_ne
-00035c30: 776c 696e 6520 6d61 726b 0a20 2020 2020  wline mark.     
-00035c40: 2020 2073 7461 7274 5f6e 6577 6c69 6e65     start_newline
-00035c50: 3d27 270a 0a20 2020 2069 6e74 726f 3d6f  =''..    intro=o
-00035c60: 7074 732e 6765 7428 2769 6e74 726f 272c  pts.get('intro',
-00035c70: 4e6f 6e65 290a 2020 2020 6c6f 6766 696c  None).    logfil
-00035c80: 653d 6f70 7473 2e67 6574 2827 6c6f 6766  e=opts.get('logf
-00035c90: 696c 6527 2c6f 7074 732e 6765 7428 276c  ile',opts.get('l
-00035ca0: 6f67 5f66 696c 6527 2c5b 5d29 290a 2020  og_file',[])).  
-00035cb0: 2020 6967 6e6f 7265 5f6d 7973 656c 663d    ignore_myself=
-00035cc0: 6f70 7473 2e67 6574 2827 6967 6e6f 7265  opts.get('ignore
-00035cd0: 5f6d 7973 656c 6627 2c54 7275 6529 0a20  _myself',True). 
-00035ce0: 2020 2064 6566 206d 7367 5f6d 616b 6572     def msg_maker
-00035cf0: 282a 6d73 672c 6d73 675f 7370 6c69 743d  (*msg,msg_split=
-00035d00: 2720 272c 696e 7472 6f5f 6c65 6e3d 302c  ' ',intro_len=0,
-00035d10: 696e 7472 6f5f 6d73 673d 2727 293a 0a20  intro_msg=''):. 
-00035d20: 2020 2020 2020 2023 204d 616b 6520 696e         # Make in
-00035d30: 7075 7420 6461 7461 2074 6f20 6120 7374  put data to a st
-00035d40: 7269 6e67 206d 7367 200a 2020 2020 2020  ring msg .      
-00035d50: 2020 6d73 675f 7374 723d 2727 0a20 2020    msg_str=''.   
-00035d60: 2020 2020 2054 543d 3020 2023 2046 6f72       TT=0  # For
-00035d70: 2027 5c6e 2720 6f72 2027 5c6e 5c6e 2720   '\n' or '\n\n' 
-00035d80: 2e2e 2e0a 2020 2020 2020 2020 666f 7220  ....        for 
-00035d90: 6969 2069 6e20 6d73 673a 0a20 2020 2020  ii in msg:.     
-00035da0: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
-00035db0: 696e 7374 616e 6365 2869 692c 7374 7229  instance(ii,str)
-00035dc0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00035dd0: 2020 6966 2069 6e74 726f 5f6c 656e 3a0a    if intro_len:.
-00035de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035df0: 2020 2020 613d 436f 6c6f 7253 7472 2857      a=ColorStr(W
-00035e00: 7261 7053 7472 696e 6728 5374 7228 7070  rapString(Str(pp
-00035e10: 7269 6e74 2e70 666f 726d 6174 2869 6929  rint.pformat(ii)
-00035e20: 2c64 6566 6175 6c74 3d27 6f72 6727 292c  ,default='org'),
-00035e30: 6673 7061 6365 3d30 2069 6620 6e6f 7420  fspace=0 if not 
-00035e40: 6d73 675f 7374 7220 6f72 206d 7367 5f73  msg_str or msg_s
-00035e50: 706c 6974 2021 3d20 275c 6e27 206f 7220  plit != '\n' or 
-00035e60: 5454 2065 6c73 6520 696e 7472 6f5f 6c65  TT else intro_le
-00035e70: 6e2c 206e 7370 6163 653d 696e 7472 6f5f  n, nspace=intro_
-00035e80: 6c65 6e2c 6d6f 6465 3d27 7370 6163 6527  len,mode='space'
-00035e90: 292c 2a2a 6f70 7473 290a 2020 2020 2020  ),**opts).      
-00035ea0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00035eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035ec0: 2020 2020 613d 436f 6c6f 7253 7472 2853      a=ColorStr(S
-00035ed0: 7472 2870 7072 696e 742e 7066 6f72 6d61  tr(pprint.pforma
-00035ee0: 7428 6969 292c 6465 6661 756c 743d 276f  t(ii),default='o
-00035ef0: 7267 2729 2c2a 2a6f 7074 7329 0a20 2020  rg'),**opts).   
-00035f00: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00035f10: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00035f20: 6620 275c 6e27 2069 6e20 6969 2061 6e64  f '\n' in ii and
-00035f30: 206e 6f74 2069 692e 7265 706c 6163 6528   not ii.replace(
-00035f40: 275c 6e27 2c27 2729 3a20 2363 6f6e 7665  '\n',''): #conve
-00035f50: 7274 205c 6e20 6f72 205c 6e5c 6e20 2e2e  rt \n or \n\n ..
-00035f60: 2e2e 2074 6f20 7772 6170 7069 6e67 2066  .. to wrapping f
-00035f70: 6f72 6d61 740a 2020 2020 2020 2020 2020  ormat.          
-00035f80: 2020 2020 2020 2020 2020 5454 2b3d 310a            TT+=1.
-00035f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035fa0: 2020 2020 6969 3d69 692b 2754 270a 2020      ii=ii+'T'.  
-00035fb0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00035fc0: 2069 6e74 726f 5f6c 656e 3a0a 2020 2020   intro_len:.    
-00035fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035fe0: 613d 436f 6c6f 7253 7472 2857 7261 7053  a=ColorStr(WrapS
-00035ff0: 7472 696e 6728 5374 7228 6969 2c64 6566  tring(Str(ii,def
-00036000: 6175 6c74 3d27 6f72 6727 292c 6673 7061  ault='org'),fspa
-00036010: 6365 3d30 2069 6620 6e6f 7420 6d73 675f  ce=0 if not msg_
-00036020: 7374 7220 6f72 206d 7367 5f73 706c 6974  str or msg_split
-00036030: 2021 3d20 275c 6e27 206f 7220 5454 2065   != '\n' or TT e
-00036040: 6c73 6520 696e 7472 6f5f 6c65 6e2c 206e  lse intro_len, n
-00036050: 7370 6163 653d 696e 7472 6f5f 6c65 6e2c  space=intro_len,
-00036060: 6d6f 6465 3d27 7370 6163 6527 292c 2a2a  mode='space'),**
-00036070: 6f70 7473 290a 2020 2020 2020 2020 2020  opts).          
-00036080: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00036090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000360a0: 613d 436f 6c6f 7253 7472 2853 7472 2869  a=ColorStr(Str(i
-000360b0: 692c 6465 6661 756c 743d 276f 7267 2729  i,default='org')
-000360c0: 2c2a 2a6f 7074 7329 0a20 2020 2020 2020  ,**opts).       
-000360d0: 2020 2020 2020 2020 2023 5265 636f 7665           #Recove
-000360e0: 7220 6164 6465 6420 5420 666f 7220 7772  r added T for wr
-000360f0: 6170 7069 6e67 2066 6f72 6d61 7420 746f  apping format to
-00036100: 206f 7269 6769 6e61 6c0a 2020 2020 2020   original.      
-00036110: 2020 2020 2020 2020 2020 6966 2054 5420            if TT 
-00036120: 616e 6420 275c 6e27 2069 6e20 6969 2061  and '\n' in ii a
-00036130: 6e64 2069 692e 7265 706c 6163 6528 275c  nd ii.replace('\
-00036140: 6e27 2c27 2729 203d 3d20 2754 273a 2061  n','') == 'T': a
-00036150: 3d61 5b3a 2d31 5d0a 2020 2020 2020 2020  =a[:-1].        
-00036160: 2020 2020 6966 206d 7367 5f73 7472 3a0a      if msg_str:.
-00036170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036180: 6966 2054 543a 0a20 2020 2020 2020 2020  if TT:.         
-00036190: 2020 2020 2020 2020 2020 2023 6966 206d             #if m
-000361a0: 6573 7361 6765 2073 706c 6974 6572 2065  essage spliter e
-000361b0: 7869 7374 2061 6e64 2066 6978 2074 6f20  xist and fix to 
-000361c0: 6669 7273 7420 6368 6172 6163 7465 720a  first character.
-000361d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000361e0: 2020 2020 6966 2054 5420 3d3d 2031 2061      if TT == 1 a
-000361f0: 6e64 206e 6f74 2069 692e 7265 706c 6163  nd not ii.replac
-00036200: 6528 275c 6e27 2c27 2729 3a0a 2020 2020  e('\n',''):.    
-00036210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036220: 2020 2020 6d73 675f 7374 723d 6d73 675f      msg_str=msg_
-00036230: 7374 7220 2b20 6d73 675f 7370 6c69 7420  str + msg_split 
-00036240: 2b20 610a 2020 2020 2020 2020 2020 2020  + a.            
-00036250: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00036260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036270: 2020 2020 2020 6d73 675f 7374 723d 6d73        msg_str=ms
-00036280: 675f 7374 7220 2b20 610a 2020 2020 2020  g_str + a.      
-00036290: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000362a0: 2069 692e 7265 706c 6163 6528 275c 6e27   ii.replace('\n'
-000362b0: 2c27 2729 3a20 5454 3d30 2023 2072 656d  ,''): TT=0 # rem
-000362c0: 6f76 6520 7370 6563 6961 6c20 666f 726d  ove special form
-000362d0: 6174 2074 6167 0a20 2020 2020 2020 2020  at tag.         
-000362e0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000362f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036300: 206d 7367 5f73 7472 3d6d 7367 5f73 7472   msg_str=msg_str
-00036310: 202b 206d 7367 5f73 706c 6974 202b 2061   + msg_split + a
-00036320: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00036330: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00036340: 2020 2069 6620 696e 7472 6f5f 6d73 673a     if intro_msg:
-00036350: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00036360: 2020 2020 206d 7367 5f73 7472 3d69 6e74       msg_str=int
-00036370: 726f 5f6d 7367 202b 2061 200a 2020 2020  ro_msg + a .    
-00036380: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00036390: 2069 6e74 726f 5f6c 656e 3a0a 2020 2020   intro_len:.    
-000363a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000363b0: 6d73 675f 7374 723d 2053 7061 6365 286e  msg_str= Space(n
-000363c0: 756d 3d69 6e74 726f 5f6c 656e 2920 2b20  um=intro_len) + 
-000363d0: 610a 2020 2020 2020 2020 2020 2020 2020  a.              
-000363e0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000363f0: 2020 2020 2020 2020 2020 2020 6d73 675f              msg_
-00036400: 7374 723d 6120 0a20 2020 2020 2020 2020  str=a .         
-00036410: 2020 2023 2069 6620 656e 6420 6f66 2074     # if end of t
-00036420: 6865 206c 696e 6520 6861 7320 6578 7472  he line has extr
-00036430: 6120 275c 6e27 2074 6865 6e20 7265 636f  a '\n' then reco
-00036440: 7665 7220 7468 6520 6c6f 7374 6564 2027  ver the losted '
-00036450: 5c6e 2720 6279 2057 7261 7053 7472 696e  \n' by WrapStrin
-00036460: 6728 290a 2020 2020 2020 2020 2020 2020  g().            
-00036470: 6966 2069 7369 6e73 7461 6e63 6528 6969  if isinstance(ii
-00036480: 2c73 7472 2920 616e 6420 6c65 6e28 6969  ,str) and len(ii
-00036490: 2920 3e20 3120 616e 6420 6969 5b2d 315d  ) > 1 and ii[-1]
-000364a0: 203d 3d20 275c 6e27 3a0a 2020 2020 2020   == '\n':.      
-000364b0: 2020 2020 2020 2020 2020 6d73 675f 7374            msg_st
-000364c0: 723d 6d73 675f 7374 7220 2b20 6969 5b2d  r=msg_str + ii[-
-000364d0: 315d 0a20 2020 2020 2020 2072 6574 7572  1].        retur
-000364e0: 6e20 6d73 675f 7374 720a 0a20 2020 2023  n msg_str..    #
-000364f0: 4765 7420 4c6f 6766 696c 6520 696e 666f  Get Logfile info
-00036500: 726d 6174 696f 6e20 666f 7220 4f4c 4420  rmation for OLD 
-00036510: 7665 7273 696f 6e20 616e 6420 7265 6d6f  version and remo
-00036520: 7665 2074 6865 204c 6f67 6669 6c65 2069  ve the Logfile i
-00036530: 6e66 6f72 6d61 7469 6f6e 2069 6e20 7468  nformation in th
-00036540: 6520 6d65 7373 6167 6573 0a20 2020 2069  e messages.    i
-00036550: 6620 6973 696e 7374 616e 6365 286c 6f67  f isinstance(log
-00036560: 6669 6c65 2c73 7472 293a 0a20 2020 2020  file,str):.     
-00036570: 2020 206c 6f67 6669 6c65 3d6c 6f67 6669     logfile=logfi
-00036580: 6c65 2e73 706c 6974 2827 2c27 290a 2020  le.split(',').  
-00036590: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
-000365a0: 6528 6c6f 6766 696c 652c 7475 706c 6529  e(logfile,tuple)
-000365b0: 3a0a 2020 2020 2020 2020 6c6f 6766 696c  :.        logfil
-000365c0: 653d 6c69 7374 2874 7570 6c65 290a 2020  e=list(tuple).  
-000365d0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-000365e0: 6e63 6528 6c6f 6766 696c 652c 6c69 7374  nce(logfile,list
-000365f0: 293a 0a20 2020 2020 2020 206c 6f67 6669  ):.        logfi
-00036600: 6c65 3d5b 5d0a 2020 2020 666f 7220 6969  le=[].    for ii
-00036610: 2069 6e20 6d73 673a 0a20 2020 2020 2020   in msg:.       
-00036620: 2069 6620 6973 696e 7374 616e 6365 2869   if isinstance(i
-00036630: 692c 7374 7229 2061 6e64 2027 3a27 2069  i,str) and ':' i
-00036640: 6e20 6969 3a0a 2020 2020 2020 2020 2020  n ii:.          
-00036650: 2020 6c6f 6766 696c 655f 6c69 7374 3d69    logfile_list=i
-00036660: 692e 7370 6c69 7428 273a 2729 0a20 2020  i.split(':').   
-00036670: 2020 2020 2020 2020 2069 6620 6c6f 6766           if logf
-00036680: 696c 655f 6c69 7374 5b30 5d20 696e 205b  ile_list[0] in [
-00036690: 276c 6f67 5f66 696c 6527 2c27 6c6f 6766  'log_file','logf
-000366a0: 696c 6527 5d3a 0a20 2020 2020 2020 2020  ile']:.         
-000366b0: 2020 2020 2020 2069 6620 6c65 6e28 6c6f         if len(lo
-000366c0: 6766 696c 655f 6c69 7374 2920 3e20 323a  gfile_list) > 2:
-000366d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000366e0: 2020 2020 2066 6f72 206a 6a20 696e 206c       for jj in l
-000366f0: 6f67 6669 6c65 5f6c 6973 745b 313a 5d3a  ogfile_list[1:]:
-00036700: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00036710: 2020 2020 2020 2020 206c 6f67 6669 6c65           logfile
-00036720: 2e61 7070 656e 6428 6a6a 290a 2020 2020  .append(jj).    
-00036730: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00036740: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00036750: 2020 2020 2020 6c6f 6766 696c 653d 6c6f        logfile=lo
-00036760: 6766 696c 652b 6c6f 6766 696c 655f 6c69  gfile+logfile_li
-00036770: 7374 5b31 5d2e 7370 6c69 7428 272c 2729  st[1].split(',')
-00036780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00036790: 2069 6620 6973 696e 7374 616e 6365 286d   if isinstance(m
-000367a0: 7367 2c74 7570 6c65 293a 0a20 2020 2020  sg,tuple):.     
-000367b0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-000367c0: 7367 3d6c 6973 7428 6d73 6729 0a20 2020  sg=list(msg).   
-000367d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000367e0: 206d 7367 2e72 656d 6f76 6528 6969 290a   msg.remove(ii).
-000367f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036800: 2020 2020 6d73 673d 7475 706c 6528 6d73      msg=tuple(ms
-00036810: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
-00036820: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00036830: 2020 2020 2020 2020 2020 2020 206d 7367               msg
-00036840: 2e72 656d 6f76 6528 6969 290a 2020 2020  .remove(ii).    
-00036850: 0a20 2020 2023 2073 6176 6520 6d73 6728  .    # save msg(
-00036860: 7265 6d6f 7665 6420 6c6f 675f 6669 6c65  removed log_file
-00036870: 2069 6e66 6f72 6d61 7469 6f6e 2920 746f   information) to
-00036880: 2073 7973 6c6f 6764 200a 2020 2020 6966   syslogd .    if
-00036890: 2073 7973 6c6f 6764 3a0a 2020 2020 2020   syslogd:.      
-000368a0: 2020 2320 4d61 6b65 2061 206d 6573 7361    # Make a messa
-000368b0: 6765 2074 6f20 7369 6e67 6c65 206c 696e  ge to single lin
-000368c0: 650a 2020 2020 2020 2020 746d 705f 7374  e.        tmp_st
-000368d0: 723d 6d73 675f 6d61 6b65 7228 2a6d 7367  r=msg_maker(*msg
-000368e0: 2c6d 7367 5f73 706c 6974 3d6d 7367 5f73  ,msg_split=msg_s
-000368f0: 706c 6974 290a 2020 2020 2020 2020 6966  plit).        if
-00036900: 2073 7973 6c6f 6764 2069 6e20 5b27 494e   syslogd in ['IN
-00036910: 464f 272c 2769 6e66 6f27 5d3a 0a20 2020  FO','info']:.   
-00036920: 2020 2020 2020 2020 2073 7973 6c6f 672e           syslog.
-00036930: 7379 736c 6f67 2873 7973 6c6f 672e 4c4f  syslog(syslog.LO
-00036940: 475f 494e 464f 2c74 6d70 5f73 7472 290a  G_INFO,tmp_str).
-00036950: 2020 2020 2020 2020 656c 6966 2073 7973          elif sys
-00036960: 6c6f 6764 2069 6e20 5b27 4b45 524e 272c  logd in ['KERN',
-00036970: 276b 6572 6e27 5d3a 0a20 2020 2020 2020  'kern']:.       
-00036980: 2020 2020 2073 7973 6c6f 672e 7379 736c       syslog.sysl
-00036990: 6f67 2873 7973 6c6f 672e 4c4f 475f 4b45  og(syslog.LOG_KE
-000369a0: 524e 2c74 6d70 5f73 7472 290a 2020 2020  RN,tmp_str).    
-000369b0: 2020 2020 656c 6966 2073 7973 6c6f 6764      elif syslogd
-000369c0: 2069 6e20 5b27 4552 5227 2c27 6572 7227   in ['ERR','err'
-000369d0: 5d3a 0a20 2020 2020 2020 2020 2020 2073  ]:.            s
-000369e0: 7973 6c6f 672e 7379 736c 6f67 2873 7973  yslog.syslog(sys
-000369f0: 6c6f 672e 4c4f 475f 4552 522c 746d 705f  log.LOG_ERR,tmp_
-00036a00: 7374 7229 0a20 2020 2020 2020 2065 6c69  str).        eli
-00036a10: 6620 7379 736c 6f67 6420 696e 205b 2743  f syslogd in ['C
-00036a20: 5249 5427 2c27 6372 6974 275d 3a0a 2020  RIT','crit']:.  
-00036a30: 2020 2020 2020 2020 2020 7379 736c 6f67            syslog
-00036a40: 2e73 7973 6c6f 6728 7379 736c 6f67 2e4c  .syslog(syslog.L
-00036a50: 4f47 5f43 5249 542c 746d 705f 7374 7229  OG_CRIT,tmp_str)
-00036a60: 0a20 2020 2020 2020 2065 6c69 6620 7379  .        elif sy
-00036a70: 736c 6f67 6420 696e 205b 2757 4152 4e27  slogd in ['WARN'
-00036a80: 2c27 7761 726e 275d 3a0a 2020 2020 2020  ,'warn']:.      
-00036a90: 2020 2020 2020 7379 736c 6f67 2e73 7973        syslog.sys
-00036aa0: 6c6f 6728 7379 736c 6f67 2e4c 4f47 5f57  log(syslog.LOG_W
-00036ab0: 4152 4e49 4e47 2c74 6d70 5f73 7472 290a  ARNING,tmp_str).
-00036ac0: 2020 2020 2020 2020 656c 6966 2073 7973          elif sys
-00036ad0: 6c6f 6764 2069 6e20 5b27 4442 4727 2c27  logd in ['DBG','
-00036ae0: 4445 4255 4727 2c27 6462 6727 2c27 6465  DEBUG','dbg','de
-00036af0: 6275 6727 5d3a 0a20 2020 2020 2020 2020  bug']:.         
-00036b00: 2020 2073 7973 6c6f 672e 7379 736c 6f67     syslog.syslog
-00036b10: 2873 7973 6c6f 672e 4c4f 475f 4445 4255  (syslog.LOG_DEBU
-00036b20: 472c 746d 705f 7374 7229 0a20 2020 2020  G,tmp_str).     
-00036b30: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00036b40: 2020 2020 2073 7973 6c6f 672e 7379 736c       syslog.sysl
-00036b50: 6f67 2874 6d70 5f73 7472 290a 0a20 2020  og(tmp_str)..   
-00036b60: 2023 5768 656e 2068 6176 696e 6720 4c6f   #When having Lo
-00036b70: 6720 6675 6e63 7469 6f6e 2074 6865 6e20  g function then 
-00036b80: 6769 7665 2074 6865 2064 6174 6120 746f  give the data to
-00036b90: 206c 6f67 2066 756e 6374 696f 6e0a 2020   log function.  
-00036ba0: 2020 6c6f 675f 703d 4661 6c73 650a 2020    log_p=False.  
-00036bb0: 2020 6966 2049 7346 756e 6374 696f 6e28    if IsFunction(
-00036bc0: 6c6f 6729 3a20 2320 4c6f 6720 6675 6e63  log): # Log func
-00036bd0: 7469 6f6e 2820 6465 6275 6720 6d6f 6465  tion( debug mode
-00036be0: 206c 6f67 2066 756e 6374 696f 6e20 746f   log function to
-00036bf0: 6f20 290a 2020 2020 2020 2020 7472 793a  o ).        try:
-00036c00: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00036c10: 2827 6427 2069 6e20 6473 7020 6f72 2027  ('d' in dsp or '
-00036c20: 6627 2069 6e20 6473 7029 2061 6e64 206c  f' in dsp) and l
-00036c30: 6f67 6669 6c65 3a0a 2020 2020 2020 2020  ogfile:.        
-00036c40: 2020 2020 2020 2020 6966 2027 6361 6c6c          if 'call
-00036c50: 6572 5f70 6172 656e 7427 2069 6e20 6f70  er_parent' in op
-00036c60: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
-00036c70: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00036c80: 7461 6e63 6528 6f70 7473 5b27 6361 6c6c  tance(opts['call
-00036c90: 6572 5f70 6172 656e 7427 5d2c 696e 7429  er_parent'],int)
-00036ca0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00036cb0: 2020 2020 2020 2020 2020 6f70 7473 5b27            opts['
-00036cc0: 6361 6c6c 6572 5f70 6172 656e 7427 5d3d  caller_parent']=
-00036cd0: 6f70 7473 5b27 6361 6c6c 6572 5f70 6172  opts['caller_par
-00036ce0: 656e 7427 5d2b 310a 2020 2020 2020 2020  ent']+1.        
-00036cf0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00036d00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00036d10: 2020 2020 2020 2020 2020 6f70 7473 5b27            opts['
-00036d20: 6361 6c6c 6572 5f70 6172 656e 7427 5d3d  caller_parent']=
-00036d30: 320a 2020 2020 2020 2020 2020 2020 2020  2.              
-00036d40: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00036d50: 2020 2020 2020 2020 2020 2020 6f70 7473              opts
-00036d60: 5b27 6361 6c6c 6572 5f70 6172 656e 7427  ['caller_parent'
-00036d70: 5d3d 320a 2020 2020 2020 2020 2020 2020  ]=2.            
-00036d80: 4665 6564 4675 6e63 286c 6f67 2c2a 6d73  FeedFunc(log,*ms
-00036d90: 672c 2a2a 6f70 7473 290a 2020 2020 2020  g,**opts).      
-00036da0: 2020 2020 2020 2320 4966 206c 6f67 2066        # If log f
-00036db0: 756e 6374 696f 6e20 7461 6b65 206f 7665  unction take ove
-00036dc0: 7220 7468 6520 6c6f 6720 7468 656e 206e  r the log then n
-00036dd0: 6f20 6d6f 7265 2070 7269 6e74 2074 6f20  o more print to 
-00036de0: 6f74 6865 7273 0a20 2020 2020 2020 2020  others.         
-00036df0: 2020 2072 6574 7572 6e0a 2020 2020 2020     return.      
-00036e00: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
-00036e10: 2020 2020 2020 7061 7373 0a0a 2020 2020        pass..    
-00036e20: 2320 4d61 6b65 2061 2049 6e74 726f 0a20  # Make a Intro. 
-00036e30: 2020 2069 6e74 726f 5f6c 656e 3d30 0a20     intro_len=0. 
-00036e40: 2020 2069 6e74 726f 5f6d 7367 3d27 270a     intro_msg=''.
-00036e50: 2020 2020 6966 206e 6f74 2064 6972 6563      if not direc
-00036e60: 7420 616e 6420 6e6f 7420 6e6f 5f69 6e74  t and not no_int
-00036e70: 726f 3a0a 2020 2020 2020 2020 696e 7472  ro:.        intr
-00036e80: 6f5f 6d73 673d 277b 307d 2027 2e66 6f72  o_msg='{0} '.for
-00036e90: 6d61 7428 5449 4d45 2829 2e4e 6f77 2829  mat(TIME().Now()
-00036ea0: 2e73 7472 6674 696d 6528 6461 7465 5f66  .strftime(date_f
-00036eb0: 6f72 6d61 7429 2920 6966 2064 6174 655f  ormat)) if date_
-00036ec0: 666f 726d 6174 2061 6e64 206e 6f74 2073  format and not s
-00036ed0: 7973 6c6f 6764 2065 6c73 6520 2727 0a20  yslogd else ''. 
-00036ee0: 2020 2020 2020 2069 6e74 726f 5f6c 656e         intro_len
-00036ef0: 3d6c 656e 2869 6e74 726f 5f6d 7367 290a  =len(intro_msg).
-00036f00: 2020 2020 2020 2020 6966 2063 616c 6c65          if calle
-00036f10: 725f 6465 7461 696c 206f 7220 6361 6c6c  r_detail or call
-00036f20: 6572 5f74 7265 6520 6f72 2063 616c 6c65  er_tree or calle
-00036f30: 725f 6869 7374 6f72 7920 6f72 2063 616c  r_history or cal
-00036f40: 6c65 725f 6967 6e6f 7265 3a0a 2020 2020  ler_ignore:.    
-00036f50: 2020 2020 2020 2020 6966 2069 676e 6f72          if ignor
-00036f60: 655f 6d79 7365 6c66 3a0a 2020 2020 2020  e_myself:.      
-00036f70: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00036f80: 2069 7369 6e73 7461 6e63 6528 6361 6c6c   isinstance(call
-00036f90: 6572 5f69 676e 6f72 652c 6c69 7374 293a  er_ignore,list):
-00036fa0: 2063 616c 6c65 725f 6967 6e6f 7265 3d5b   caller_ignore=[
-00036fb0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-00036fc0: 2020 6966 2027 4665 6564 4675 6e63 2720    if 'FeedFunc' 
-00036fd0: 6e6f 7420 696e 2063 616c 6c65 725f 6967  not in caller_ig
-00036fe0: 6e6f 7265 3a20 6361 6c6c 6572 5f69 676e  nore: caller_ign
-00036ff0: 6f72 652e 6170 7065 6e64 2827 4665 6564  ore.append('Feed
-00037000: 4675 6e63 2729 0a20 2020 2020 2020 2020  Func').         
-00037010: 2020 2020 2020 2069 6620 2770 7269 6e74         if 'print
-00037020: 6627 206e 6f74 2069 6e20 6361 6c6c 6572  f' not in caller
-00037030: 5f69 676e 6f72 653a 2063 616c 6c65 725f  _ignore: caller_
-00037040: 6967 6e6f 7265 2e61 7070 656e 6428 2770  ignore.append('p
-00037050: 7269 6e74 6627 290a 2020 2020 2020 2020  rintf').        
-00037060: 6966 2063 616c 6c65 725f 6967 6e6f 7265  if caller_ignore
-00037070: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
-00037080: 6361 6c6c 6572 5f69 676e 6f72 652c 6c69  caller_ignore,li
-00037090: 7374 293a 0a20 2020 2020 2020 2020 2020  st):.           
-000370a0: 2061 7267 3d7b 2770 6172 656e 7427 3a70   arg={'parent':p
-000370b0: 6172 656e 745f 6e2c 2761 7267 7327 3a46  arent_n,'args':F
-000370c0: 616c 7365 2c27 6869 7374 6f72 7927 3a54  alse,'history':T
-000370d0: 7275 652c 2774 7265 6527 3a46 616c 7365  rue,'tree':False
-000370e0: 7d0a 2020 2020 2020 2020 2020 2020 6361  }.            ca
-000370f0: 6c6c 5f6e 616d 653d 4675 6e63 7469 6f6e  ll_name=Function
-00037100: 4e61 6d65 282a 2a61 7267 290a 2020 2020  Name(**arg).    
-00037110: 2020 2020 2020 2020 6e65 775f 703d 300a          new_p=0.
-00037120: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00037130: 6920 696e 2072 616e 6765 286c 656e 2863  i in range(len(c
-00037140: 616c 6c5f 6e61 6d65 292d 312c 302c 2d31  all_name)-1,0,-1
-00037150: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00037160: 2020 2069 6620 6361 6c6c 5f6e 616d 655b     if call_name[
-00037170: 695d 5b30 5d20 696e 2063 616c 6c65 725f  i][0] in caller_
-00037180: 6967 6e6f 7265 3a0a 2020 2020 2020 2020  ignore:.        
-00037190: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
-000371a0: 702b 3d31 0a20 2020 2020 2020 2020 2020  p+=1.           
-000371b0: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
-000371c0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000371d0: 2020 6272 6561 6b0a 2020 2020 2020 2020    break.        
-000371e0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-000371f0: 6528 7061 7265 6e74 5f6e 2c73 7472 293a  e(parent_n,str):
-00037200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00037210: 2070 6172 656e 745f 6e5f 613d 7061 7265   parent_n_a=pare
-00037220: 6e74 5f6e 2e73 706c 6974 2827 2d27 290a  nt_n.split('-').
-00037230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037240: 6966 2070 6172 656e 745f 6e5f 615b 305d  if parent_n_a[0]
-00037250: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00037260: 2020 2020 2020 7061 7265 6e74 5f6e 5f61        parent_n_a
-00037270: 5b30 5d3d 277b 7d27 2e66 6f72 6d61 7428  [0]='{}'.format(
-00037280: 696e 7428 7061 7265 6e74 5f6e 5f61 5b30  int(parent_n_a[0
-00037290: 5d29 2b6e 6577 5f70 290a 2020 2020 2020  ])+new_p).      
-000372a0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-000372b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000372c0: 2020 2020 7061 7265 6e74 5f6e 5f61 5b30      parent_n_a[0
-000372d0: 5d3d 277b 7d27 2e66 6f72 6d61 7428 6e65  ]='{}'.format(ne
-000372e0: 775f 7029 0a20 2020 2020 2020 2020 2020  w_p).           
-000372f0: 2020 2020 2069 6620 6c65 6e28 7061 7265       if len(pare
-00037300: 6e74 5f6e 5f61 2920 3d3d 2032 2061 6e64  nt_n_a) == 2 and
-00037310: 2070 6172 656e 745f 6e5f 615b 315d 3a0a   parent_n_a[1]:.
-00037320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037330: 2020 2020 7061 7265 6e74 5f6e 5f61 5b31      parent_n_a[1
-00037340: 5d3d 277b 7d27 2e66 6f72 6d61 7428 696e  ]='{}'.format(in
-00037350: 7428 7061 7265 6e74 5f6e 5f61 5b31 5d29  t(parent_n_a[1])
-00037360: 2b6e 6577 5f70 290a 2020 2020 2020 2020  +new_p).        
-00037370: 2020 2020 2020 2020 7061 7265 6e74 5f6e          parent_n
-00037380: 3d27 2d27 2e6a 6f69 6e28 7061 7265 6e74  ='-'.join(parent
-00037390: 5f6e 5f61 290a 2020 2020 2020 2020 2020  _n_a).          
-000373a0: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
-000373b0: 6528 7061 7265 6e74 5f6e 2c69 6e74 293a  e(parent_n,int):
-000373c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000373d0: 2070 6172 656e 745f 6e3d 7061 7265 6e74   parent_n=parent
-000373e0: 5f6e 2b6e 6577 5f70 0a20 2020 2020 2020  _n+new_p.       
-000373f0: 2069 6620 6361 6c6c 6572 5f6e 616d 6520   if caller_name 
-00037400: 6f72 2063 616c 6c65 725f 6967 6e6f 7265  or caller_ignore
-00037410: 3a0a 2020 2020 2020 2020 2020 2020 6172  :.            ar
-00037420: 673d 7b27 7061 7265 6e74 273a 7061 7265  g={'parent':pare
-00037430: 6e74 5f6e 7d0a 2020 2020 2020 2020 2020  nt_n}.          
-00037440: 2020 6966 2063 616c 6c65 725f 6465 7461    if caller_deta
-00037450: 696c 3a0a 2020 2020 2020 2020 2020 2020  il:.            
-00037460: 2020 2020 6172 672e 7570 6461 7465 287b      arg.update({
-00037470: 276c 696e 655f 6e75 6d62 6572 273a 5472  'line_number':Tr
-00037480: 7565 2c27 6675 6c6c 5f66 696c 656e 616d  ue,'full_filenam
-00037490: 6527 3a63 616c 6c65 725f 6675 6c6c 5f66  e':caller_full_f
-000374a0: 696c 656e 616d 652c 2766 696c 656e 616d  ilename,'filenam
-000374b0: 6527 3a54 7275 652c 2761 7267 7327 3a54  e':True,'args':T
-000374c0: 7275 657d 290a 2020 2020 2020 2020 2020  rue}).          
-000374d0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000374e0: 2020 2020 2020 2020 6172 675b 276c 696e          arg['lin
-000374f0: 655f 6e75 6d62 6572 275d 3d63 616c 6c65  e_number']=calle
-00037500: 725f 6c69 6e65 5f6e 756d 6265 720a 2020  r_line_number.  
-00037510: 2020 2020 2020 2020 2020 2020 2020 6172                ar
-00037520: 675b 2766 756c 6c5f 6669 6c65 6e61 6d65  g['full_filename
-00037530: 275d 3d63 616c 6c65 725f 6675 6c6c 5f66  ']=caller_full_f
-00037540: 696c 656e 616d 650a 2020 2020 2020 2020  ilename.        
-00037550: 2020 2020 2020 2020 6172 675b 2761 7267          arg['arg
-00037560: 7327 5d3d 6361 6c6c 6572 5f61 7267 730a  s']=caller_args.
-00037570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037580: 6172 675b 2766 696c 656e 616d 6527 5d3d  arg['filename']=
-00037590: 6361 6c6c 6572 5f66 696c 656e 616d 650a  caller_filename.
-000375a0: 2020 2020 2020 2020 2020 2020 6966 2063              if c
-000375b0: 616c 6c65 725f 7472 6565 3a0a 2020 2020  aller_tree:.    
-000375c0: 2020 2020 2020 2020 2020 2020 6172 672e              arg.
-000375d0: 7570 6461 7465 287b 2768 6973 746f 7279  update({'history
-000375e0: 273a 5472 7565 2c27 7472 6565 273a 5472  ':True,'tree':Tr
-000375f0: 7565 7d29 0a20 2020 2020 2020 2020 2020  ue}).           
-00037600: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00037610: 2020 2020 2020 2061 7267 5b27 6869 7374         arg['hist
-00037620: 6f72 7927 5d3d 6361 6c6c 6572 5f68 6973  ory']=caller_his
-00037630: 746f 7279 0a20 2020 2020 2020 2020 2020  tory.           
-00037640: 2063 616c 6c5f 6e61 6d65 3d46 756e 6374   call_name=Funct
-00037650: 696f 6e4e 616d 6528 2a2a 6172 6729 0a20  ionName(**arg). 
-00037660: 2020 2020 2020 2020 2020 2069 6620 6361             if ca
-00037670: 6c6c 5f6e 616d 653a 0a20 2020 2020 2020  ll_name:.       
-00037680: 2020 2020 2020 2020 2023 2069 6620 6c69           # if li
-00037690: 6e65 5f6e 756d 6265 7220 616e 6420 6669  ne_number and fi
-000376a0: 6c65 6e61 6d65 2074 6865 6e20 7072 696e  lename then prin
-000376b0: 7420 6c6f 6767 696e 6720 6174 206e 6578  t logging at nex
-000376c0: 7420 6c69 6e65 0a20 2020 2020 2020 2020  t line.         
-000376d0: 2020 2020 2020 2023 2069 6620 6461 7465         # if date
-000376e0: 5f66 6f72 6d61 7420 7468 656e 206c 6f67  _format then log
-000376f0: 6769 6e67 2773 2069 6e74 726f 206c 656e  ging's intro len
-00037700: 6774 6820 7769 6c6c 2062 6520 6461 7465  gth will be date
-00037710: 2066 6f72 6d61 740a 2020 2020 2020 2020   format.        
-00037720: 2020 2020 2020 2020 2320 6966 206e 6f74          # if not
-00037730: 2064 6174 655f 666f 726d 6174 2074 6865   date_format the
-00037740: 6e20 6c6f 6767 696e 2773 2069 6e74 726f  n loggin's intro
-00037750: 206c 656e 6774 6820 7769 6c6c 2062 6520   length will be 
-00037760: 7374 6570 7069 6e67 206c 656e 6774 680a  stepping length.
-00037770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037780: 6966 2069 7369 6e73 7461 6e63 6528 6361  if isinstance(ca
-00037790: 6c6c 5f6e 616d 652c 7374 7229 3a20 6361  ll_name,str): ca
-000377a0: 6c6c 5f6e 616d 653d 5b63 616c 6c5f 6e61  ll_name=[call_na
-000377b0: 6d65 5d0a 2020 2020 2020 2020 2020 2020  me].            
-000377c0: 2020 2020 6966 2063 616c 6c65 725f 7472      if caller_tr
-000377d0: 6565 206f 7220 6361 6c6c 6572 5f68 6973  ee or caller_his
-000377e0: 746f 7279 3a20 6361 6c6c 5f6e 616d 653d  tory: call_name=
-000377f0: 6361 6c6c 5f6e 616d 652b 5b27 275d 2069  call_name+[''] i
-00037800: 6620 6461 7465 5f66 6f72 6d61 7420 656c  f date_format el
-00037810: 7365 2063 616c 6c5f 6e61 6d65 2b5b 2720  se call_name+[' 
-00037820: 275d 0a20 2020 2020 2020 2020 2020 2020  '].             
-00037830: 2020 2069 6e74 726f 5f6d 7367 3d69 6e74     intro_msg=int
-00037840: 726f 5f6d 7367 2b57 7261 7053 7472 696e  ro_msg+WrapStrin
-00037850: 6728 4a6f 696e 2863 616c 6c5f 6e61 6d65  g(Join(call_name
-00037860: 2c27 5c6e 2729 2c66 7370 6163 653d 302c  ,'\n'),fspace=0,
-00037870: 206e 7370 6163 653d 6c65 6e28 696e 7472   nspace=len(intr
-00037880: 6f5f 6d73 6729 2c6d 6f64 653d 2773 7061  o_msg),mode='spa
-00037890: 6365 272c 6967 6e6f 7265 5f65 6d70 7479  ce',ignore_empty
-000378a0: 5f65 6e64 6c69 6e65 3d46 616c 7365 2920  _endline=False) 
-000378b0: 2b20 273a 2027 0a20 2020 2020 2020 2020  + ': '.         
-000378c0: 2020 2020 2020 2069 6e74 726f 5f6c 656e         intro_len
-000378d0: 3d69 6e74 726f 5f6c 656e 2b6c 656e 2863  =intro_len+len(c
-000378e0: 616c 6c5f 6e61 6d65 5b2d 315d 292b 320a  all_name[-1])+2.
-000378f0: 2020 2020 2020 2020 6966 2054 7970 6528          if Type(
-00037900: 696e 7472 6f2c 2773 7472 2729 2061 6e64  intro,'str') and
-00037910: 2069 6e74 726f 3a0a 2020 2020 2020 2020   intro:.        
-00037920: 2020 2020 696e 7472 6f5f 6d73 673d 696e      intro_msg=in
-00037930: 7472 6f5f 6d73 672b 696e 7472 6f2b 273a  tro_msg+intro+':
-00037940: 2027 0a20 2020 2020 2020 2020 2020 2069   '.            i
-00037950: 6e74 726f 5f6c 656e 3d69 6e74 726f 5f6c  ntro_len=intro_l
-00037960: 656e 2b6c 656e 2869 6e74 726f 292b 320a  en+len(intro)+2.
-00037970: 0a20 2020 2023 204d 616b 6520 696e 7075  .    # Make inpu
-00037980: 7420 6461 7461 2074 6f20 6120 7374 7269  t data to a stri
-00037990: 6e67 206d 7367 200a 2020 2020 6966 2073  ng msg .    if s
-000379a0: 7461 7274 5f6e 6577 6c69 6e65 3a0a 2020  tart_newline:.  
-000379b0: 2020 2020 2020 6966 206c 656e 286d 7367        if len(msg
-000379c0: 2920 616e 6420 6973 696e 7374 616e 6365  ) and isinstance
-000379d0: 286d 7367 5b30 5d2c 7374 7229 2061 6e64  (msg[0],str) and
-000379e0: 206c 656e 286d 7367 5b30 5d29 2061 6e64   len(msg[0]) and
-000379f0: 206d 7367 5b30 5d5b 305d 203d 3d20 275c   msg[0][0] == '\
-00037a00: 6e27 3a20 6d73 675b 305d 3d6d 7367 5b30  n': msg[0]=msg[0
-00037a10: 5d5b 313a 5d0a 2020 2020 2020 2020 6966  ][1:].        if
-00037a20: 2073 7461 7274 5f6e 6577 6c69 6e65 203d   start_newline =
-00037a30: 3d20 2761 7574 6f27 3a0a 2020 2020 2020  = 'auto':.      
-00037a40: 2020 2020 2020 6966 2070 7269 6e74 665f        if printf_
-00037a50: 6e65 776c 696e 655f 696e 666f 2e47 6574  newline_info.Get
-00037a60: 2864 7370 293a 0a20 2020 2020 2020 2020  (dsp):.         
-00037a70: 2020 2020 2020 2073 7461 7274 5f6e 6577         start_new
-00037a80: 6c69 6e65 3d27 5c6e 270a 2020 2020 2020  line='\n'.      
-00037a90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00037aa0: 2020 2020 2020 2020 2020 2020 7374 6172              star
-00037ab0: 745f 6e65 776c 696e 653d 2727 0a20 2020  t_newline=''.   
-00037ac0: 206d 7367 5f73 7472 3d6d 7367 5f6d 616b   msg_str=msg_mak
-00037ad0: 6572 282a 6d73 672c 6d73 675f 7370 6c69  er(*msg,msg_spli
-00037ae0: 743d 6d73 675f 7370 6c69 742c 696e 7472  t=msg_split,intr
-00037af0: 6f5f 6c65 6e3d 696e 7472 6f5f 6c65 6e2c  o_len=intro_len,
-00037b00: 696e 7472 6f5f 6d73 673d 2727 2069 6620  intro_msg='' if 
-00037b10: 6e6f 5f69 6e74 726f 2069 7320 4e6f 6e65  no_intro is None
-00037b20: 2065 6c73 6520 696e 7472 6f5f 6d73 6729   else intro_msg)
-00037b30: 0a23 2044 4f6e 2774 206e 6565 6420 6265  .# DOn't need be
-00037b40: 6c6f 7720 636f 6465 0a23 2020 2020 6966  low code.#    if
-00037b50: 206e 6577 5f6c 696e 653a 0a23 2020 2020   new_line:.#    
-00037b60: 2020 2020 6966 206d 7367 5f73 7472 2061      if msg_str a
-00037b70: 6e64 206d 7367 5f73 7472 5b2d 315d 203d  nd msg_str[-1] =
-00037b80: 3d20 275c 6e27 3a20 6d73 675f 7374 723d  = '\n': msg_str=
-00037b90: 6d73 675f 7374 725b 3a2d 315d 0a0a 2020  msg_str[:-1]..  
-00037ba0: 2020 2323 2069 6620 656e 6420 6f66 206c    ## if end of l
-00037bb0: 696e 6520 6861 7665 206e 6f20 6e65 776c  ine have no newl
-00037bc0: 696e 652c 2062 7574 2069 7420 6861 7320  ine, but it has 
-00037bd0: 696e 7472 6f20 7468 656e 2061 6464 696e  intro then addin
-00037be0: 6720 7374 6172 745f 6e65 776c 696e 650a  g start_newline.
-00037bf0: 2020 2020 2369 6620 696e 7472 6f5f 6d73      #if intro_ms
-00037c00: 6720 616e 6420 6e6f 7420 6e6f 5f73 7461  g and not no_sta
-00037c10: 7274 5f6e 6577 6c69 6e65 3a0a 2020 2020  rt_newline:.    
-00037c20: 2320 2020 2069 6620 7072 696e 7466 5f6e  #    if printf_n
-00037c30: 6577 6c69 6e65 5f69 6e66 6f2e 4765 7428  ewline_info.Get(
-00037c40: 6473 7029 3a20 0a20 2020 2023 2020 2020  dsp): .    #    
-00037c50: 2020 2020 7374 6172 745f 6e65 776c 696e      start_newlin
-00037c60: 653d 275c 6e27 0a0a 2020 2020 2344 4247  e='\n'..    #DBG
-00037c70: 204d 4f44 4520 666f 7220 7072 696e 7469   MODE for printi
-00037c80: 6e67 0a20 2020 2073 6372 5f64 6267 5f70  ng.    scr_dbg_p
-00037c90: 7269 6e74 3d46 616c 7365 0a20 2020 2069  rint=False.    i
-00037ca0: 6620 7363 725f 6462 6720 6973 2054 7275  f scr_dbg is Tru
-00037cb0: 653a 0a20 2020 2020 2020 2069 6620 7363  e:.        if sc
-00037cc0: 725f 6462 675f 636f 6e64 6974 696f 6e20  r_dbg_condition 
-00037cd0: 6973 204e 6f6e 6520 6f72 206d 7367 5f73  is None or msg_s
-00037ce0: 7472 203d 3d20 7363 725f 6462 675f 636f  tr == scr_dbg_co
-00037cf0: 6e64 6974 696f 6e3a 0a20 2020 2020 2020  ndition:.       
-00037d00: 2020 2020 2073 6372 5f64 6267 5f70 7269       scr_dbg_pri
-00037d10: 6e74 3d54 7275 650a 2020 2020 2020 2020  nt=True.        
-00037d20: 2020 2020 6172 673d 7b27 7061 7265 6e74      arg={'parent
-00037d30: 273a 2731 2d39 272c 276c 696e 655f 6e75  ':'1-9','line_nu
-00037d40: 6d62 6572 273a 5472 7565 2c27 6669 6c65  mber':True,'file
-00037d50: 6e61 6d65 273a 5472 7565 2c27 6172 6773  name':True,'args
-00037d60: 273a 4661 6c73 652c 2768 6973 746f 7279  ':False,'history
-00037d70: 273a 5472 7565 2c27 7472 6565 273a 5472  ':True,'tree':Tr
-00037d80: 7565 7d0a 2020 2020 2020 2020 2020 2020  ue}.            
-00037d90: 6361 6c6c 5f6e 616d 653d 4675 6e63 7469  call_name=Functi
-00037da0: 6f6e 4e61 6d65 282a 2a61 7267 290a 2020  onName(**arg).  
-00037db0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00037dc0: 272d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 4655  '-------------FU
-00037dd0: 4e43 5449 4f4e 2d2d 2d2d 2d2d 2d2d 2d2d  NCTION----------
-00037de0: 2d2d 2d2d 2d2d 2d2d 2d2d 2729 0a20 2020  ----------').   
-00037df0: 2020 2020 2020 2020 2070 7269 6e74 284a           print(J
-00037e00: 6f69 6e28 6361 6c6c 5f6e 616d 652c 275c  oin(call_name,'\
-00037e10: 6e27 2929 0a20 2020 2020 2020 2020 2020  n')).           
-00037e20: 2070 7269 6e74 2827 2d2d 2d2d 2d2d 2d2d   print('--------
-00037e30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00037e40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00037e50: 2d27 290a 2020 2020 2020 2020 2020 2020  -').            
-00037e60: 7072 696e 7428 276c 6f67 2020 2020 2020  print('log      
-00037e70: 2020 2020 2020 2020 2020 2020 203a 7b7d               :{}
-00037e80: 2028 6675 6e63 7469 6f6e 3a7b 7d3a 7b7d   (function:{}:{}
-00037e90: 2927 2e66 6f72 6d61 7428 6c6f 672c 4973  )'.format(log,Is
-00037ea0: 4675 6e63 7469 6f6e 286c 6f67 292c 6f70  Function(log),op
-00037eb0: 7473 2929 0a20 2020 2020 2020 2020 2020  ts)).           
-00037ec0: 2070 7269 6e74 2827 6c6f 6766 696c 6520   print('logfile 
-00037ed0: 2020 2020 2020 2020 2020 2020 2020 3a7b                :{
-00037ee0: 7d27 2e66 6f72 6d61 7428 6c6f 6766 696c  }'.format(logfil
-00037ef0: 6529 290a 2020 2020 2020 2020 2020 2020  e)).            
-00037f00: 7072 696e 7428 276e 6577 6c69 6e65 2069  print('newline i
-00037f10: 6e66 6f20 2020 2020 2020 2020 203a 7b7d  nfo          :{}
-00037f20: 272e 666f 726d 6174 2870 7269 6e74 665f  '.format(printf_
-00037f30: 6e65 776c 696e 655f 696e 666f 2e64 6174  newline_info.dat
-00037f40: 6129 290a 2020 2020 2020 2020 2020 2020  a)).            
-00037f50: 7072 696e 7428 2766 6f72 6365 206e 6f20  print('force no 
-00037f60: 7374 6172 7420 6e65 776c 696e 653a 7b7d  start newline:{}
-00037f70: 272e 666f 726d 6174 286e 6f5f 7374 6172  '.format(no_star
-00037f80: 745f 6e65 776c 696e 6529 290a 2020 2020  t_newline)).    
-00037f90: 2020 2020 2020 2020 7072 696e 7428 276e          print('n
-00037fa0: 6577 6c69 6e65 2020 2020 2020 2020 2020  ewline          
-00037fb0: 2020 2020 203a 2864 6972 6563 743a 7b7d       :(direct:{}
-00037fc0: 2c73 7461 7274 3a7b 7d2c 656e 643a 7b7d  ,start:{},end:{}
-00037fd0: 2927 2e66 6f72 6d61 7428 6469 7265 6374  )'.format(direct
-00037fe0: 2c54 7275 6520 6966 2073 7461 7274 5f6e  ,True if start_n
-00037ff0: 6577 6c69 6e65 2065 6c73 6520 4661 6c73  ewline else Fals
-00038000: 652c 5472 7565 2069 6620 6e65 775f 6c69  e,True if new_li
-00038010: 6e65 2065 6c73 6520 4661 6c73 6529 290a  ne else False)).
-00038020: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00038030: 7428 2769 676e 6f72 655f 656d 7074 7920  t('ignore_empty 
-00038040: 2020 2020 2020 2020 203a 7b7d 272e 666f           :{}'.fo
-00038050: 726d 6174 2869 676e 6f72 655f 656d 7074  rmat(ignore_empt
-00038060: 7929 290a 2020 2020 2020 2020 2020 2020  y)).            
-00038070: 7072 696e 7428 276d 6573 7361 6765 2020  print('message  
-00038080: 2020 2020 2020 2020 2020 2020 203a 5b7b               :[{
-00038090: 7d5d 272e 666f 726d 6174 286d 7367 2929  }]'.format(msg))
-000380a0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-000380b0: 6e74 2827 696e 7472 6f20 2020 2020 2020  nt('intro       
-000380c0: 2020 2020 2020 2020 2020 3a5b 7b7d 5d27            :[{}]'
-000380d0: 2e66 6f72 6d61 7428 696e 7472 6f5f 6d73  .format(intro_ms
-000380e0: 6729 290a 2020 2020 2020 2020 2020 2020  g)).            
-000380f0: 7072 696e 7428 276c 6f67 206c 6576 656c  print('log level
-00038100: 2020 2020 2020 2020 2020 2020 203a 7b7d               :{}
-00038110: 203c 207b 7d20 2870 7269 6e74 3a7b 7d29   < {} (print:{})
-00038120: 272e 666f 726d 6174 2870 7269 6e74 665f  '.format(printf_
-00038130: 6c6f 675f 6261 7365 2c6c 6f67 5f6c 6576  log_base,log_lev
-00038140: 656c 2c20 7072 696e 7466 5f6c 6f67 5f62  el, printf_log_b
-00038150: 6173 6520 3c20 6c6f 675f 6c65 7665 6c20  ase < log_level 
-00038160: 6966 2049 7349 6e74 2870 7269 6e74 665f  if IsInt(printf_
-00038170: 6c6f 675f 6261 7365 2920 616e 6420 4973  log_base) and Is
-00038180: 496e 7428 6c6f 675f 6c65 7665 6c29 2065  Int(log_level) e
-00038190: 6c73 6520 5472 7565 2929 0a20 2020 2020  lse True)).     
-000381a0: 2020 2020 2020 2070 7269 6e74 2827 6265         print('be
-000381b0: 666f 7265 206d 6f64 6520 7072 696e 7420  fore mode print 
-000381c0: 2020 2020 3a5b 7b7d 5d27 2e66 6f72 6d61      :[{}]'.forma
-000381d0: 7428 7374 6172 745f 6e65 776c 696e 652b  t(start_newline+
-000381e0: 6d73 675f 7374 722b 6e65 775f 6c69 6e65  msg_str+new_line
-000381f0: 2929 0a0a 2020 2020 2320 5361 7665 2074  ))..    # Save t
-00038200: 6f20 6669 6c65 206f 7220 7072 696e 7420  o file or print 
-00038210: 746f 2073 6372 6565 6e20 6669 6c74 6572  to screen filter
-00038220: 2077 6974 6820 6c6f 675f 6c65 7665 6c20   with log_level 
-00038230: 616e 6420 616c 7265 6164 7920 6c6f 6767  and already logg
-00038240: 696e 6720 7769 7468 206c 6f67 2066 756e  ing with log fun
-00038250: 6374 696f 6e20 6f72 206e 6f74 2e0a 2020  ction or not..  
-00038260: 2020 6966 2027 6427 2069 6e20 6473 7020    if 'd' in dsp 
-00038270: 616e 6420 4973 496e 7428 7072 696e 7466  and IsInt(printf
-00038280: 5f6c 6f67 5f62 6173 6529 2061 6e64 2049  _log_base) and I
-00038290: 7349 6e74 286c 6f67 5f6c 6576 656c 293a  sInt(log_level):
-000382a0: 0a20 2020 2020 2020 2069 6620 7072 696e  .        if prin
-000382b0: 7466 5f6c 6f67 5f62 6173 6520 3c20 6c6f  tf_log_base < lo
-000382c0: 675f 6c65 7665 6c3a 0a20 2020 2020 2020  g_level:.       
-000382d0: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
-000382e0: 2320 6966 206a 7573 7420 7768 6974 6573  # if just whites
-000382f0: 7061 6365 2074 6865 6e20 6e6f 7420 6e65  pace then not ne
-00038300: 776c 696e 652c 2073 6f6d 6574 6869 6e67  wline, something
-00038310: 2065 6c73 6520 7769 7468 2064 6174 6120   else with data 
-00038320: 7468 656e 2077 6861 7420 6576 6572 0a20  then what ever. 
-00038330: 2020 2023 2053 6176 6520 6d73 6720 746f     # Save msg to
-00038340: 206c 6f67 6669 6c65 2077 6865 6e20 6465   logfile when de
-00038350: 6669 6e65 6420 6c6f 6766 696c 650a 2020  fined logfile.  
-00038360: 2020 6966 206c 6f67 6669 6c65 3a20 2320    if logfile: # 
-00038370: 616c 6c20 6d6f 6465 2063 616e 2028 6576  all mode can (ev
-00038380: 656e 2069 6620 642c 2066 2c20 6929 206a  en if d, f, i) j
-00038390: 7573 7420 6c6f 6769 6e67 2074 6f20 6669  ust loging to fi
-000383a0: 6c65 2e0a 2020 2020 2020 2020 666f 7220  le..        for 
-000383b0: 6969 2069 6e20 6c6f 6766 696c 653a 0a20  ii in logfile:. 
-000383c0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-000383d0: 696e 7374 616e 6365 2869 692c 7374 7229  instance(ii,str)
-000383e0: 2061 6e64 2069 693a 0a20 2020 2020 2020   and ii:.       
-000383f0: 2020 2020 2020 2020 2069 695f 643d 6f73           ii_d=os
-00038400: 2e70 6174 682e 6469 726e 616d 6528 6969  .path.dirname(ii
-00038410: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00038420: 2020 6969 5f64 3d69 695f 6420 6966 2069    ii_d=ii_d if i
-00038430: 695f 6420 656c 7365 2027 2e27 2023 2049  i_d else '.' # I
-00038440: 6620 6a75 7374 2066 696c 656e 616d 6520  f just filename 
-00038450: 7468 656e 2064 6972 6563 746f 7279 2074  then directory t
-00038460: 6f20 2e28 6375 7272 656e 7420 6469 7265  o .(current dire
-00038470: 6374 6f72 7929 0a20 2020 2020 2020 2020  ctory).         
-00038480: 2020 2020 2020 2069 6620 6969 2061 6e64         if ii and
-00038490: 206f 732e 7061 7468 2e69 7364 6972 2869   os.path.isdir(i
-000384a0: 695f 6429 3a0a 2020 2020 2020 2020 2020  i_d):.          
-000384b0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-000384c0: 206d 7367 5f73 7472 3a0a 2020 2020 2020   msg_str:.      
-000384d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000384e0: 2020 6966 2064 6267 5f65 6d70 7479 2061    if dbg_empty a
-000384f0: 6e64 206e 6f74 2069 676e 6f72 655f 656d  nd not ignore_em
-00038500: 7074 793a 2020 2023 2049 676e 6f72 6520  pty:   # Ignore 
-00038510: 656d 7074 7920 6461 7461 206f 6e20 7363  empty data on sc
-00038520: 7265 656e 2077 2f6f 2064 6562 7567 6769  reen w/o debuggi
-00038530: 6e67 200a 2020 2020 2020 2020 2020 2020  ng .            
-00038540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038550: 7061 7265 6e74 5f6e 3d6f 7074 732e 6765  parent_n=opts.ge
-00038560: 7428 2763 616c 6c65 725f 7061 7265 6e74  t('caller_parent
-00038570: 2729 2069 6620 6973 696e 7374 616e 6365  ') if isinstance
-00038580: 286f 7074 732e 6765 7428 2763 616c 6c65  (opts.get('calle
-00038590: 725f 7061 7265 6e74 2729 2c69 6e74 2920  r_parent'),int) 
-000385a0: 656c 7365 2031 0a20 2020 2020 2020 2020  else 1.         
-000385b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000385c0: 2020 2061 7267 3d7b 2770 6172 656e 7427     arg={'parent'
-000385d0: 3a70 6172 656e 745f 6e2c 276c 696e 655f  :parent_n,'line_
-000385e0: 6e75 6d62 6572 273a 5472 7565 2c27 6669  number':True,'fi
-000385f0: 6c65 6e61 6d65 273a 5472 7565 2c27 6172  lename':True,'ar
-00038600: 6773 273a 4661 6c73 652c 2768 6973 746f  gs':False,'histo
-00038610: 7279 273a 4661 6c73 652c 2774 7265 6527  ry':False,'tree'
-00038620: 3a46 616c 7365 7d0a 2020 2020 2020 2020  :False}.        
-00038630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038640: 2020 2020 6361 6c6c 5f6e 616d 653d 4675      call_name=Fu
-00038650: 6e63 7469 6f6e 4e61 6d65 282a 2a61 7267  nctionName(**arg
-00038660: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00038670: 2020 2020 2020 2020 2020 2020 2020 6d73                ms
-00038680: 675f 7374 723d 696e 7472 6f5f 6d73 6720  g_str=intro_msg 
-00038690: 2b20 436f 6c6f 7253 7472 2857 7261 7053  + ColorStr(WrapS
-000386a0: 7472 696e 6728 275b 2a2a 2045 6d70 7479  tring('[** Empty
-000386b0: 2d44 6174 6120 2a2a 5d20 287b 7d29 272e  -Data **] ({})'.
-000386c0: 666f 726d 6174 2863 616c 6c5f 6e61 6d65  format(call_name
-000386d0: 292c 6673 7061 6365 3d69 6e74 726f 5f6c  ),fspace=intro_l
-000386e0: 656e 2c20 6e73 7061 6365 3d69 6e74 726f  en, nspace=intro
-000386f0: 5f6c 656e 2c6d 6f64 653d 2773 7061 6365  _len,mode='space
-00038700: 2729 2c2a 2a6f 7074 7329 0a20 2020 2020  '),**opts).     
-00038710: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00038720: 6620 6e6f 7420 6d73 675f 7374 723a 2072  f not msg_str: r
-00038730: 6574 7572 6e0a 0a20 2020 2020 2020 2020  eturn..         
-00038740: 2020 2020 2020 2020 2020 2023 2069 6620             # if 
-00038750: 656e 6420 6f66 206c 696e 6520 6861 7665  end of line have
-00038760: 206e 6f20 6e65 776c 696e 652c 2062 7574   no newline, but
-00038770: 2069 7420 6861 7320 696e 7472 6f20 7468   it has intro th
-00038780: 656e 2061 6464 696e 6720 7374 6172 745f  en adding start_
-00038790: 6e65 776c 696e 650a 2020 2020 2020 2020  newline.        
-000387a0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-000387b0: 6e74 726f 5f6d 7367 2061 6e64 206e 6f74  ntro_msg and not
-000387c0: 206e 6f5f 7374 6172 745f 6e65 776c 696e   no_start_newlin
-000387d0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000387e0: 2020 2020 2020 2020 2020 2069 6620 7072             if pr
-000387f0: 696e 7466 5f6e 6577 6c69 6e65 5f69 6e66  intf_newline_inf
-00038800: 6f2e 4765 7428 4279 7465 7328 6969 2929  o.Get(Bytes(ii))
-00038810: 3a20 0a20 2020 2020 2020 2020 2020 2020  : .             
-00038820: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00038830: 7461 7274 5f6e 6577 6c69 6e65 3d27 5c6e  tart_newline='\n
-00038840: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
-00038850: 2020 2020 2020 6966 2073 6372 5f64 6267        if scr_dbg
-00038860: 5f70 7269 6e74 3a0a 2020 2020 2020 2020  _print:.        
-00038870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038880: 7072 696e 7428 276d 6f64 6520 2020 2020  print('mode     
-00038890: 2020 2020 2020 2020 2020 2020 203a 7b7d               :{}
-000388a0: 2028 6265 666f 7265 206e 6f20 6e65 776c   (before no newl
-000388b0: 696e 653a 7b7d 2927 2e66 6f72 6d61 7428  ine:{})'.format(
-000388c0: 6969 2c54 7275 6520 6966 2070 7269 6e74  ii,True if print
-000388d0: 665f 6e65 776c 696e 655f 696e 666f 2e47  f_newline_info.G
-000388e0: 6574 2842 7974 6573 2869 6929 2920 656c  et(Bytes(ii)) el
-000388f0: 7365 2046 616c 7365 2929 0a20 2020 2020  se False)).     
-00038900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038910: 2020 2070 7269 6e74 2827 7570 6461 7465     print('update
-00038920: 6420 7374 6172 7420 6e65 776c 696e 6520  d start newline 
-00038930: 3a7b 7d27 2e66 6f72 6d61 7428 5472 7565  :{}'.format(True
-00038940: 2069 6620 7374 6172 745f 6e65 776c 696e   if start_newlin
-00038950: 6520 656c 7365 2046 616c 7365 2929 0a20  e else False)). 
-00038960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038970: 2020 2020 2020 2070 7269 6e74 2827 7072         print('pr
-00038980: 696e 7420 2020 2020 2020 2020 2020 2020  int             
-00038990: 2020 2020 3a5b 7b7d 5d27 2e66 6f72 6d61      :[{}]'.forma
-000389a0: 7428 7374 6172 745f 6e65 776c 696e 652b  t(start_newline+
-000389b0: 6d73 675f 7374 722b 6e65 775f 6c69 6e65  msg_str+new_line
-000389c0: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-000389d0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-000389e0: 2827 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ('--------------
-000389f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d27 290a 2020  -----------').  
-00038a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038a20: 2020 6c6f 675f 703d 5472 7565 2020 2320    log_p=True  # 
-00038a30: 7772 6974 696e 6720 746f 206c 6f67 5f66  writing to log_f
-00038a40: 696c 650a 2020 2020 2020 2020 2020 2020  ile.            
-00038a50: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-00038a60: 6e28 6969 2c27 612b 2729 2061 7320 663a  n(ii,'a+') as f:
-00038a70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00038a80: 2020 2020 2020 2020 2066 2e77 7269 7465           f.write
-00038a90: 2873 7461 7274 5f6e 6577 6c69 6e65 2b6d  (start_newline+m
-00038aa0: 7367 5f73 7472 2b6e 6577 5f6c 696e 6529  sg_str+new_line)
-00038ab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00038ac0: 2020 2020 2069 6620 6e65 775f 6c69 6e65       if new_line
-00038ad0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00038ae0: 2020 2020 2020 2020 2020 7072 696e 7466            printf
-00038af0: 5f6e 6577 6c69 6e65 5f69 6e66 6f2e 4465  _newline_info.De
-00038b00: 6c28 4279 7465 7328 6969 2929 0a20 2020  l(Bytes(ii)).   
-00038b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038b20: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00038b30: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00038b40: 7269 6e74 665f 6e65 776c 696e 655f 696e  rintf_newline_in
-00038b50: 666f 2e50 7574 2842 7974 6573 2869 6929  fo.Put(Bytes(ii)
-00038b60: 2c54 7275 6529 0a20 2020 2069 6620 6967  ,True).    if ig
-00038b70: 6e6f 7265 5f65 6d70 7479 2069 7320 5472  nore_empty is Tr
-00038b80: 7565 2061 6e64 206e 6f74 206d 7367 5f73  ue and not msg_s
-00038b90: 7472 3a20 7265 7475 726e 2023 2049 676e  tr: return # Ign
-00038ba0: 6f72 6520 656d 7074 7920 6461 7461 206f  ore empty data o
-00038bb0: 6e20 7363 7265 656e 0a20 2020 2023 2070  n screen.    # p
-00038bc0: 7269 6e74 206d 7367 2074 6f20 7363 7265  rint msg to scre
-00038bd0: 656e 2077 6865 6e20 6469 6420 6e6f 7420  en when did not 
-00038be0: 646f 6e65 2077 6974 6820 6c6f 6766 696c  done with logfil
-00038bf0: 6520 6f72 206c 6f67 2066 756e 6374 696f  e or log functio
-00038c00: 6e0a 2020 2020 6966 2027 6527 2069 6e20  n.    if 'e' in 
-00038c10: 6473 703a 0a20 2020 2020 2020 2023 2069  dsp:.        # i
-00038c20: 6620 656e 6420 6f66 206c 696e 6520 6861  f end of line ha
-00038c30: 7665 206e 6f20 6e65 776c 696e 652c 2062  ve no newline, b
-00038c40: 7574 2069 7420 6861 7320 696e 7472 6f20  ut it has intro 
-00038c50: 7468 656e 2061 6464 696e 6720 7374 6172  then adding star
-00038c60: 745f 6e65 776c 696e 650a 2020 2020 2020  t_newline.      
-00038c70: 2020 6966 2069 6e74 726f 5f6d 7367 2061    if intro_msg a
-00038c80: 6e64 206e 6f74 206e 6f5f 7374 6172 745f  nd not no_start_
-00038c90: 6e65 776c 696e 653a 0a20 2020 2020 2020  newline:.       
-00038ca0: 2020 2020 2069 6620 7072 696e 7466 5f6e       if printf_n
-00038cb0: 6577 6c69 6e65 5f69 6e66 6f2e 4765 7428  ewline_info.Get(
-00038cc0: 2765 2729 3a20 0a20 2020 2020 2020 2020  'e'): .         
-00038cd0: 2020 2020 2020 2073 7461 7274 5f6e 6577         start_new
-00038ce0: 6c69 6e65 3d27 5c6e 270a 2020 2020 2020  line='\n'.      
-00038cf0: 2020 6966 2073 6372 5f64 6267 5f70 7269    if scr_dbg_pri
-00038d00: 6e74 3a0a 2020 2020 2020 2020 2020 2020  nt:.            
-00038d10: 7072 696e 7428 276d 6f64 6520 2020 2020  print('mode     
-00038d20: 2020 2020 2020 2020 2020 2020 203a 7b7d               :{}
-00038d30: 2028 6265 666f 7265 206e 6f20 6e65 776c   (before no newl
-00038d40: 696e 653a 7b7d 2927 2e66 6f72 6d61 7428  ine:{})'.format(
-00038d50: 2765 272c 5472 7565 2069 6620 7072 696e  'e',True if prin
-00038d60: 7466 5f6e 6577 6c69 6e65 5f69 6e66 6f2e  tf_newline_info.
-00038d70: 4765 7428 2765 2729 2065 6c73 6520 4661  Get('e') else Fa
-00038d80: 6c73 6529 290a 2020 2020 2020 2020 2020  lse)).          
-00038d90: 2020 7072 696e 7428 2775 7064 6174 6564    print('updated
-00038da0: 2073 7461 7274 206e 6577 6c69 6e65 203a   start newline :
-00038db0: 7b7d 272e 666f 726d 6174 2854 7275 6520  {}'.format(True 
-00038dc0: 6966 2073 7461 7274 5f6e 6577 6c69 6e65  if start_newline
-00038dd0: 2065 6c73 6520 4661 6c73 6529 290a 2020   else False)).  
-00038de0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00038df0: 2770 7269 6e74 2020 2020 2020 2020 2020  'print          
-00038e00: 2020 2020 2020 203a 5b7b 7d5d 272e 666f         :[{}]'.fo
-00038e10: 726d 6174 2873 7461 7274 5f6e 6577 6c69  rmat(start_newli
-00038e20: 6e65 2b6d 7367 5f73 7472 2b6e 6577 5f6c  ne+msg_str+new_l
-00038e30: 696e 6529 290a 2020 2020 2020 2020 2020  ine)).          
-00038e40: 2020 7072 696e 7428 272d 2d2d 2d2d 2d2d    print('-------
-00038e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038e70: 2d2d 2729 0a20 2020 2020 2020 2053 7464  --').        Std
-00038e80: 4572 7228 7374 6172 745f 6e65 776c 696e  Err(start_newlin
-00038e90: 652b 6d73 675f 7374 722b 6e65 775f 6c69  e+msg_str+new_li
-00038ea0: 6e65 290a 2020 2020 2020 2020 7072 696e  ne).        prin
-00038eb0: 7466 5f6e 6577 6c69 6e65 5f69 6e66 6f2e  tf_newline_info.
-00038ec0: 5075 7428 2765 272c 4661 6c73 6520 6966  Put('e',False if
-00038ed0: 206e 6577 5f6c 696e 6520 656c 7365 2054   new_line else T
-00038ee0: 7275 6529 0a20 2020 2065 6c69 6620 2763  rue).    elif 'c
-00038ef0: 2720 696e 2064 7370 3a20 2344 6973 706c  ' in dsp: #Displ
-00038f00: 6179 2074 6f20 636f 6e73 6f6c 6520 2869  ay to console (i
-00038f10: 7420 616c 736f 2077 6f72 6b20 7769 7468  t also work with
-00038f20: 2052 6f62 6f74 2046 7261 6d65 776f 726b   Robot Framework
-00038f30: 290a 2020 2020 2020 2020 7072 696e 7428  ).        print(
-00038f40: 7374 6172 745f 6e65 776c 696e 652b 6d73  start_newline+ms
-00038f50: 675f 7374 722b 6e65 775f 6c69 6e65 2c65  g_str+new_line,e
-00038f60: 6e64 3d27 272c 6669 6c65 3d73 7973 2e5f  nd='',file=sys._
-00038f70: 5f73 7464 6f75 745f 5f29 0a20 2020 2065  _stdout__).    e
-00038f80: 6c69 6620 2773 2720 696e 2064 7370 206f  lif 's' in dsp o
-00038f90: 7220 2761 2720 696e 2064 7370 3a20 2320  r 'a' in dsp: # 
-00038fa0: 5072 696e 7420 6f75 7420 6f6e 2073 6372  Print out on scr
-00038fb0: 6565 6e0a 2020 2020 2020 2020 6966 2069  een.        if i
-00038fc0: 6e74 726f 5f6d 7367 2061 6e64 206e 6f74  ntro_msg and not
-00038fd0: 206e 6f5f 7374 6172 745f 6e65 776c 696e   no_start_newlin
-00038fe0: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
-00038ff0: 6620 7072 696e 7466 5f6e 6577 6c69 6e65  f printf_newline
-00039000: 5f69 6e66 6f2e 4765 7428 2761 2720 6966  _info.Get('a' if
-00039010: 2027 6127 2069 6e20 6473 7020 656c 7365   'a' in dsp else
-00039020: 2027 7327 293a 200a 2020 2020 2020 2020   's'): .        
-00039030: 2020 2020 2020 2020 7374 6172 745f 6e65          start_ne
-00039040: 776c 696e 653d 275c 6e27 0a20 2020 2020  wline='\n'.     
-00039050: 2020 2069 6620 7363 725f 6462 675f 7072     if scr_dbg_pr
-00039060: 696e 743a 0a20 2020 2020 2020 2020 2020  int:.           
-00039070: 2070 7269 6e74 2827 6d6f 6465 2020 2020   print('mode    
-00039080: 2020 2020 2020 2020 2020 2020 2020 3a7b                :{
-00039090: 7d20 2862 6566 6f72 6520 6e6f 206e 6577  } (before no new
-000390a0: 6c69 6e65 3a7b 7d29 272e 666f 726d 6174  line:{})'.format
-000390b0: 2827 6127 2c54 7275 6520 6966 2070 7269  ('a',True if pri
-000390c0: 6e74 665f 6e65 776c 696e 655f 696e 666f  ntf_newline_info
-000390d0: 2e47 6574 2827 6127 2069 6620 2761 2720  .Get('a' if 'a' 
-000390e0: 696e 2064 7370 2065 6c73 6520 2773 2729  in dsp else 's')
-000390f0: 2065 6c73 6520 4661 6c73 6529 290a 2020   else False)).  
-00039100: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00039110: 2775 7064 6174 6564 2073 7461 7274 206e  'updated start n
-00039120: 6577 6c69 6e65 203a 7b7d 272e 666f 726d  ewline :{}'.form
-00039130: 6174 2854 7275 6520 6966 2073 7461 7274  at(True if start
-00039140: 5f6e 6577 6c69 6e65 2065 6c73 6520 4661  _newline else Fa
-00039150: 6c73 6529 290a 2020 2020 2020 2020 2020  lse)).          
-00039160: 2020 7072 696e 7428 2770 7269 6e74 2020    print('print  
-00039170: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-00039180: 5b7b 7d5d 272e 666f 726d 6174 2873 7461  [{}]'.format(sta
-00039190: 7274 5f6e 6577 6c69 6e65 2b6d 7367 5f73  rt_newline+msg_s
-000391a0: 7472 2b6e 6577 5f6c 696e 6529 290a 2020  tr+new_line)).  
-000391b0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-000391c0: 272d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  '---------------
-000391d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000391e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2729 0a20 2020  ----------').   
-000391f0: 2020 2020 2023 2069 6620 656e 6420 6f66       # if end of
-00039200: 206c 696e 6520 6861 7665 206e 6f20 6e65   line have no ne
-00039210: 776c 696e 652c 2062 7574 2069 7420 6861  wline, but it ha
-00039220: 7320 696e 7472 6f20 7468 656e 2061 6464  s intro then add
-00039230: 696e 6720 7374 6172 745f 6e65 776c 696e  ing start_newlin
-00039240: 650a 2020 2020 2020 2020 5374 644f 7574  e.        StdOut
-00039250: 2873 7461 7274 5f6e 6577 6c69 6e65 2b6d  (start_newline+m
-00039260: 7367 5f73 7472 2b6e 6577 5f6c 696e 6529  sg_str+new_line)
-00039270: 0a20 2020 2020 2020 2070 7269 6e74 665f  .        printf_
-00039280: 6e65 776c 696e 655f 696e 666f 2e50 7574  newline_info.Put
-00039290: 2827 6127 2069 6620 2761 2720 696e 2064  ('a' if 'a' in d
-000392a0: 7370 2065 6c73 6520 2773 272c 4661 6c73  sp else 's',Fals
-000392b0: 6520 6966 206e 6577 5f6c 696e 6520 656c  e if new_line el
-000392c0: 7365 2054 7275 6529 0a20 2020 2023 2072  se True).    # r
-000392d0: 6574 7572 6e20 6d73 6720 7768 656e 2072  eturn msg when r
-000392e0: 6571 7569 7265 6420 7265 7475 726e 2077  equired return w
-000392f0: 6861 7465 7665 7220 636f 6e64 6974 696f  hatever conditio
-00039300: 6e0a 2020 2020 6966 2027 7227 2069 6e20  n.    if 'r' in 
-00039310: 6473 703a 0a20 2020 2020 2020 2072 6574  dsp:.        ret
-00039320: 7572 6e20 6d73 675f 7374 720a 0a64 6566  urn msg_str..def
-00039330: 2043 6f6c 6f72 5374 7228 6d73 672c 2a2a   ColorStr(msg,**
-00039340: 6f70 7473 293a 0a20 2020 2063 6f6c 6f72  opts):.    color
-00039350: 3d6f 7074 732e 6765 7428 2763 6f6c 6f72  =opts.get('color
-00039360: 272c 4e6f 6e65 290a 2020 2020 636f 6c6f  ',None).    colo
-00039370: 725f 6462 3d6f 7074 732e 6765 7428 2763  r_db=opts.get('c
-00039380: 6f6c 6f72 5f64 6227 2c7b 2762 6c75 6527  olor_db',{'blue'
-00039390: 3a20 3334 2c20 2767 7265 7927 3a20 3330  : 34, 'grey': 30
-000393a0: 2c20 2779 656c 6c6f 7727 3a20 3333 2c20  , 'yellow': 33, 
-000393b0: 2767 7265 656e 273a 2033 322c 2027 6379  'green': 32, 'cy
-000393c0: 616e 273a 2033 362c 2027 6d61 6765 6e74  an': 36, 'magent
-000393d0: 6127 3a20 3335 2c20 2777 6869 7465 273a  a': 35, 'white':
-000393e0: 2033 372c 2027 7265 6427 3a20 3331 7d29   37, 'red': 31})
-000393f0: 0a20 2020 2062 675f 636f 6c6f 723d 6f70  .    bg_color=op
-00039400: 7473 2e67 6574 2827 6267 5f63 6f6c 6f72  ts.get('bg_color
-00039410: 272c 4e6f 6e65 290a 2020 2020 6267 5f63  ',None).    bg_c
-00039420: 6f6c 6f72 5f64 623d 6f70 7473 2e67 6574  olor_db=opts.get
-00039430: 2827 6267 5f63 6f6c 6f72 5f64 6227 2c7b  ('bg_color_db',{
-00039440: 2763 7961 6e27 3a20 3436 2c20 2777 6869  'cyan': 46, 'whi
-00039450: 7465 273a 2034 372c 2027 6772 6579 273a  te': 47, 'grey':
-00039460: 2034 302c 2027 7965 6c6c 6f77 273a 2034   40, 'yellow': 4
-00039470: 332c 2027 626c 7565 273a 2034 342c 2027  3, 'blue': 44, '
-00039480: 6d61 6765 6e74 6127 3a20 3435 2c20 2772  magenta': 45, 'r
-00039490: 6564 273a 2034 312c 2027 6772 6565 6e27  ed': 41, 'green'
-000394a0: 3a20 3432 7d29 0a20 2020 2061 7474 723d  : 42}).    attr=
-000394b0: 6f70 7473 2e67 6574 2827 6174 7472 272c  opts.get('attr',
-000394c0: 4e6f 6e65 290a 2020 2020 6174 7472 5f64  None).    attr_d
-000394d0: 623d 6f70 7473 2e67 6574 2827 6174 7472  b=opts.get('attr
-000394e0: 5f64 6227 2c7b 2772 6576 6572 7365 273a  _db',{'reverse':
-000394f0: 2037 2c20 2762 6c69 6e6b 273a 2035 2c27   7, 'blink': 5,'
-00039500: 636f 6e63 6561 6c65 6427 3a20 382c 2027  concealed': 8, '
-00039510: 756e 6465 726c 696e 6527 3a20 342c 2027  underline': 4, '
-00039520: 626f 6c64 273a 2031 7d29 0a20 2020 2069  bold': 1}).    i
-00039530: 6620 4973 4e6f 6e65 286f 732e 6765 7465  f IsNone(os.gete
-00039540: 6e76 2827 414e 5349 5f43 4f4c 4f52 535f  nv('ANSI_COLORS_
-00039550: 4449 5341 424c 4544 2729 2920 616e 6420  DISABLED')) and 
-00039560: 2863 6f6c 6f72 206f 7220 6267 5f63 6f6c  (color or bg_col
-00039570: 6f72 206f 7220 6174 7472 293a 0a20 2020  or or attr):.   
-00039580: 2020 2020 2072 6573 6574 3d27 2727 5c30       reset='''\0
-00039590: 3333 5b30 6d27 2727 0a20 2020 2020 2020  33[0m'''.       
-000395a0: 2066 6d74 5f6d 7367 3d27 2727 5c30 3333   fmt_msg='''\033
-000395b0: 5b25 646d 2573 2727 270a 2020 2020 2020  [%dm%s'''.      
-000395c0: 2020 6966 2063 6f6c 6f72 2061 6e64 2063    if color and c
-000395d0: 6f6c 6f72 2069 6e20 636f 6c6f 725f 6462  olor in color_db
-000395e0: 3a0a 2020 2020 2020 2020 2020 2020 6d73  :.            ms
-000395f0: 673d 666d 745f 6d73 6720 2520 2863 6f6c  g=fmt_msg % (col
-00039600: 6f72 5f64 625b 636f 6c6f 725d 2c6d 7367  or_db[color],msg
-00039610: 290a 2020 2020 2020 2020 6966 2062 675f  ).        if bg_
-00039620: 636f 6c6f 7220 616e 6420 6267 5f63 6f6c  color and bg_col
-00039630: 6f72 2069 6e20 6267 5f63 6f6c 6f72 5f64  or in bg_color_d
-00039640: 623a 0a20 2020 2020 2020 2020 2020 206d  b:.            m
-00039650: 7367 3d66 6d74 5f6d 7367 2025 2028 636f  sg=fmt_msg % (co
-00039660: 6c6f 725f 6462 5b62 675f 636f 6c6f 725d  lor_db[bg_color]
-00039670: 2c6d 7367 290a 2020 2020 2020 2020 6966  ,msg).        if
-00039680: 2061 7474 7220 616e 6420 6174 7472 2069   attr and attr i
-00039690: 6e20 6174 7472 5f64 623a 0a20 2020 2020  n attr_db:.     
-000396a0: 2020 2020 2020 206d 7367 3d66 6d74 5f6d         msg=fmt_m
-000396b0: 7367 2025 2028 6174 7472 5f64 625b 6174  sg % (attr_db[at
-000396c0: 7472 5d2c 6d73 6729 0a20 2020 2020 2020  tr],msg).       
-000396d0: 2072 6574 7572 6e20 6d73 672b 7265 7365   return msg+rese
-000396e0: 7420 2353 7570 706f 7274 2043 6f6c 6f72  t #Support Color
-000396f0: 0a20 2020 2072 6574 7572 6e20 6d73 6720  .    return msg 
-00039700: 234e 6f74 2073 7570 706f 7274 2063 6f6c  #Not support col
-00039710: 6f72 0a0a 6465 6620 436c 6561 6e41 6e73  or..def CleanAns
-00039720: 6928 6461 7461 293a 0a20 2020 2061 6e73  i(data):.    ans
-00039730: 695f 6573 6361 7065 203d 2072 652e 636f  i_escape = re.co
-00039740: 6d70 696c 6528 7227 5c78 3142 5c5b 5b30  mpile(r'\x1B\[[0
-00039750: 2d3f 5d2a 5b20 2d2f 5d2a 5b40 2d7e 5d27  -?]*[ -/]*[@-~]'
-00039760: 290a 2020 2020 6966 2054 7970 6528 6461  ).    if Type(da
-00039770: 7461 2c28 2773 7472 272c 2762 7974 6573  ta,('str','bytes
-00039780: 2729 293a 0a20 2020 2020 2020 2072 6574  ')):.        ret
-00039790: 7572 6e20 616e 7369 5f65 7363 6170 652e  urn ansi_escape.
-000397a0: 7375 6228 2727 2c53 7472 2864 6174 6129  sub('',Str(data)
-000397b0: 290a 2020 2020 656c 6966 2069 7369 6e73  ).    elif isins
-000397c0: 7461 6e63 6528 6461 7461 2c28 6c69 7374  tance(data,(list
-000397d0: 2c74 7570 6c65 2929 3a0a 2020 2020 2020  ,tuple)):.      
-000397e0: 2020 7265 7475 726e 205b 436c 6561 6e41    return [CleanA
-000397f0: 6e73 6928 6969 2920 666f 7220 6969 2069  nsi(ii) for ii i
-00039800: 6e20 6461 7461 5d0a 2020 2020 656c 6966  n data].    elif
-00039810: 2069 7369 6e73 7461 6e63 6528 6461 7461   isinstance(data
-00039820: 2c64 6963 7429 3a0a 2020 2020 2020 2020  ,dict):.        
-00039830: 666f 7220 6920 696e 2064 6174 613a 0a20  for i in data:. 
-00039840: 2020 2020 2020 2020 2020 2064 6174 615b             data[
-00039850: 695d 3d43 6c65 616e 416e 7369 2864 6174  i]=CleanAnsi(dat
-00039860: 615b 695d 290a 2020 2020 7265 7475 726e  a[i]).    return
-00039870: 2064 6174 610a 0a64 6566 2063 6c69 5f69   data..def cli_i
-00039880: 6e70 7574 286d 7367 2c2a 2a6f 7074 7329  nput(msg,**opts)
-00039890: 3a0a 2020 2020 2727 270a 2020 2020 434c  :.    '''.    CL
-000398a0: 4920 496e 7075 7420 636f 6d6d 616e 640a  I Input command.
-000398b0: 2020 2020 6869 6464 656e 206f 7220 7061      hidden or pa
-000398c0: 7373 7764 203d 2054 7275 6520 3a20 696e  sswd = True : in
-000398d0: 7075 7420 6173 2070 6173 7377 6f72 642c  put as password,
-000398e0: 2046 616c 7365 3a20 2864 6566 6175 6c74   False: (default
-000398f0: 2920 6e6f 726d 616c 2074 6578 7420 696e  ) normal text in
-00039900: 7075 740a 2020 2020 2727 270a 2020 2020  put.    '''.    
-00039910: 6869 6464 656e 3d6f 7074 732e 6765 7428  hidden=opts.get(
-00039920: 2768 6964 6465 6e27 2c6f 7074 732e 6765  'hidden',opts.ge
-00039930: 7428 2770 6173 7377 6427 2c6f 7074 732e  t('passwd',opts.
-00039940: 6765 7428 2770 6173 7377 6f72 6427 2c46  get('password',F
-00039950: 616c 7365 2929 290a 2020 2020 6966 2068  alse))).    if h
-00039960: 6964 6465 6e3a 0a20 2020 2020 2020 2069  idden:.        i
-00039970: 6620 7379 732e 7374 6469 6e2e 6973 6174  f sys.stdin.isat
-00039980: 7479 2829 3a0a 2020 2020 2020 2020 2020  ty():.          
-00039990: 2020 7020 3d20 6765 7470 6173 732e 6765    p = getpass.ge
-000399a0: 7470 6173 7328 6d73 6729 0a20 2020 2020  tpass(msg).     
-000399b0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000399c0: 2020 2020 2070 7269 6e74 6628 6d73 672c       printf(msg,
-000399d0: 656e 645f 6c69 6e65 3d27 2729 0a20 2020  end_line='').   
-000399e0: 2020 2020 2020 2020 2070 203d 2073 7973           p = sys
-000399f0: 2e73 7464 696e 2e72 6561 646c 696e 6528  .stdin.readline(
-00039a00: 292e 7273 7472 6970 2829 0a20 2020 2065  ).rstrip().    e
-00039a10: 6c73 653a 0a20 2020 2020 2020 2069 6620  lse:.        if 
-00039a20: 5079 5665 7228 3229 3a0a 2020 2020 2020  PyVer(2):.      
-00039a30: 2020 2020 2020 703d 7261 775f 696e 7075        p=raw_inpu
-00039a40: 7428 6d73 6729 0a20 2020 2020 2020 2065  t(msg).        e
-00039a50: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00039a60: 2070 3d69 6e70 7574 286d 7367 290a 2020   p=input(msg).  
-00039a70: 2020 7265 7475 726e 2070 0a0a 6465 6620    return p..def 
-00039a80: 5479 7065 4461 7461 2873 7263 2c77 616e  TypeData(src,wan
-00039a90: 745f 7479 7065 3d4e 6f6e 652c 6465 6661  t_type=None,defa
-00039aa0: 756c 743d 276f 7267 272c 7370 6c69 7465  ult='org',splite
-00039ab0: 723d 4e6f 6e65 293a 0a20 2020 2027 2727  r=None):.    '''
-00039ac0: 436f 6e76 6572 7420 2869 6e70 7574 2964  Convert (input)d
-00039ad0: 6174 6120 746f 2077 616e 7420 7479 7065  ata to want type
-00039ae0: 2028 6578 3a20 7374 7220 2d3e 206c 6973   (ex: str -> lis
-00039af0: 742c 2069 6e74 2c20 2e2e 2e29 2c20 6361  t, int, ...), ca
-00039b00: 6e20 6e6f 7420 636f 6e76 6572 7420 746f  n not convert to
-00039b10: 2074 7970 6520 7468 656e 2072 6574 7572   type then retur
-00039b20: 6e20 4661 6c73 6527 2727 0a20 2020 2069  n False'''.    i
-00039b30: 6620 5479 7065 2877 616e 745f 7479 7065  f Type(want_type
-00039b40: 2c27 7374 7227 293a 0a20 2020 2020 2020  ,'str'):.       
-00039b50: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
-00039b60: 7263 2c28 6c69 7374 2c74 7570 6c65 2929  rc,(list,tuple))
-00039b70: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00039b80: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
-00039b90: 7370 6c69 7465 722c 7374 7229 3a20 7370  spliter,str): sp
-00039ba0: 6c69 7465 723d 2720 270a 2020 2020 2020  liter=' '.      
-00039bb0: 2020 2020 2020 7265 7475 726e 204a 6f69        return Joi
-00039bc0: 6e28 5374 7228 7372 6329 2c53 7472 2873  n(Str(src),Str(s
-00039bd0: 706c 6974 6572 2929 0a20 2020 2020 2020  pliter)).       
-00039be0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00039bf0: 2020 2072 6574 7572 6e20 5374 7228 7372     return Str(sr
-00039c00: 632c 6d6f 6465 3d27 666f 7263 6527 290a  c,mode='force').
-00039c10: 2020 2020 656c 6966 2054 7970 6528 7761      elif Type(wa
-00039c20: 6e74 5f74 7970 652c 2762 7974 6573 2729  nt_type,'bytes')
-00039c30: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
-00039c40: 6e73 7461 6e63 6528 7372 632c 286c 6973  nstance(src,(lis
-00039c50: 742c 7475 706c 6529 293a 0a20 2020 2020  t,tuple)):.     
-00039c60: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
-00039c70: 696e 7374 616e 6365 2873 706c 6974 6572  instance(spliter
-00039c80: 2c73 7472 293a 2073 706c 6974 6572 3d62  ,str): spliter=b
-00039c90: 2720 270a 2020 2020 2020 2020 2020 2020  ' '.            
-00039ca0: 7265 7475 726e 204a 6f69 6e28 4279 7465  return Join(Byte
-00039cb0: 7328 7372 6329 2c42 7974 6573 2873 706c  s(src),Bytes(spl
-00039cc0: 6974 6572 2929 0a20 2020 2020 2020 2065  iter)).        e
-00039cd0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00039ce0: 2072 6574 7572 6e20 4279 7465 7328 7372   return Bytes(sr
-00039cf0: 6329 0a20 2020 2065 6c69 6620 5479 7065  c).    elif Type
-00039d00: 2877 616e 745f 7479 7065 2c27 696e 7427  (want_type,'int'
-00039d10: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-00039d20: 6e20 496e 7428 7372 632c 6572 723d 5472  n Int(src,err=Tr
-00039d30: 7565 290a 2020 2020 656c 6966 2054 7970  ue).    elif Typ
-00039d40: 6528 7761 6e74 5f74 7970 652c 2827 6c69  e(want_type,('li
-00039d50: 7374 272c 2774 7570 6c65 2729 2920 616e  st','tuple')) an
-00039d60: 6420 6973 696e 7374 616e 6365 2873 7263  d isinstance(src
-00039d70: 2c73 7472 2920 616e 6420 6973 696e 7374  ,str) and isinst
+00035050: 203a 206c 6f67 6769 6e67 2074 6f20 7379   : logging to sy
+00035060: 736c 6f67 6420 6461 656d 6f6e 0a20 2020  slogd daemon.   
+00035070: 2065 6e64 5f6e 6577 6c69 6e65 3d54 7275   end_newline=Tru
+00035080: 652f 4661 6c73 6520 2020 2020 2020 3a20  e/False       : 
+00035090: 6d61 726b 206e 6577 206c 696e 6520 6174  mark new line at
+000350a0: 2065 6e64 206f 6620 7468 6520 6c69 6e65   end of the line
+000350b0: 0a20 2020 2073 7461 7274 5f6e 6577 6c69  .    start_newli
+000350c0: 6e65 3d46 616c 7365 2f54 7275 6520 2020  ne=False/True   
+000350d0: 2020 3a20 6d61 726b 206e 6577 206c 696e    : mark new lin
+000350e0: 6520 6174 2073 7461 7274 206f 6620 7468  e at start of th
+000350f0: 6520 6c69 6e65 0a20 2020 2069 6e74 726f  e line.    intro
+00035100: 3d3c 7374 723e 2020 2020 2020 2020 2020  =<str>          
+00035110: 2020 2020 2020 2020 3a20 6c6f 6720 696e          : log in
+00035120: 7472 6f20 7374 7269 6e67 2062 6566 6f72  tro string befor
+00035130: 6520 6c6f 6720 6461 7461 0a20 2020 206e  e log data.    n
+00035140: 6f5f 696e 7472 6f20 2020 2020 2020 2020  o_intro         
+00035150: 2020 2020 2020 2020 2020 2020 3a20 5472              : Tr
+00035160: 7565 3a20 7465 6d70 6f72 6172 7920 7265  ue: temporary re
+00035170: 6d6f 7665 2069 6e74 726f 202c 2046 616c  move intro , Fal
+00035180: 7365 2864 6566 6175 6c74 293a 2049 6e74  se(default): Int
+00035190: 726f 2077 6865 6e20 6578 6973 7420 696e  ro when exist in
+000351a0: 7472 6f2c 204e 6f6e 653a 2073 7061 6365  tro, None: space
+000351b0: 2069 6e73 7465 6164 2069 6e74 726f 2073   instead intro s
+000351c0: 7472 696e 670a 2020 2020 6c6f 675f 6c65  tring.    log_le
+000351d0: 7665 6c3d 3c69 6e74 3e20 2020 2020 2020  vel=<int>       
+000351e0: 2020 2020 2020 203a 206d 616b 6520 6c6f         : make lo
+000351f0: 672d 6c65 7665 6c0a 2020 2020 2020 2020  g-level.        
+00035200: 7072 696e 7466 5f6c 6f67 5f62 6173 653d  printf_log_base=
+00035210: 360a 2020 2020 2020 2020 7072 696e 7466  6.        printf
+00035220: 2827 6161 6161 6127 2c6c 6f67 5f6c 6576  ('aaaaa',log_lev
+00035230: 656c 3d33 2920 2d3e 2074 6869 7320 7769  el=3) -> this wi
+00035240: 6c6c 2070 7269 6e74 0a20 2020 2020 2020  ll print.       
+00035250: 2070 7269 6e74 6628 2762 6262 6262 272c   printf('bbbbb',
+00035260: 6c6f 675f 6c65 7665 6c3d 3829 202d 3e20  log_level=8) -> 
+00035270: 7468 6973 206e 6f74 2070 7269 6e74 2e20  this not print. 
+00035280: 6275 7420 6966 2063 6861 6e67 6520 7072  but if change pr
+00035290: 696e 7466 5f6c 6f67 5f62 6173 6520 746f  intf_log_base to
+000352a0: 2039 2074 6865 6e20 6974 2077 696c 6c20   9 then it will 
+000352b0: 7072 696e 740a 2020 2020 6c6f 673d 3c66  print.    log=<f
+000352c0: 756e 633e 2020 2020 2020 2020 2020 2020  unc>            
+000352d0: 2020 2020 2020 203a 2070 7574 206c 6f67         : put log
+000352e0: 6769 6e67 2064 6174 6120 746f 206c 6f67  ging data to log
+000352f0: 2066 756e 6374 696f 6e0a 2020 2020 6473   function.    ds
+00035300: 703d 2020 2020 2020 2020 2020 2020 2020  p=              
+00035310: 2020 2020 2020 2020 2020 203a 2044 6973             : Dis
+00035320: 706c 6179 2066 6f72 6d61 740a 2020 2020  play format.    
+00035330: 2020 2020 6120 203a 2061 7574 6f0a 2020      a  : auto.  
+00035340: 2020 2020 2020 7320 203a 2073 6372 6565        s  : scree
+00035350: 6e0a 2020 2020 2020 2020 6620 203a 2073  n.        f  : s
+00035360: 6176 6520 746f 2066 696c 650a 2020 2020  ave to file.    
+00035370: 2020 2020 6420 203a 2073 6176 6520 746f      d  : save to
+00035380: 2064 6562 7567 2066 696c 650a 2020 2020   debug file.    
+00035390: 2020 2020 6520 203a 206c 6f67 2074 6f20      e  : log to 
+000353a0: 7374 616e 6461 7264 2065 7272 6f72 200a  standard error .
+000353b0: 2020 2020 2020 2020 6320 203a 2063 6f6e          c  : con
+000353c0: 736f 6c65 0a20 2020 2020 2020 2069 2020  sole.        i  
+000353d0: 3a20 6967 6e6f 7265 2070 7269 6e74 0a20  : ignore print. 
+000353e0: 2020 2020 2020 2072 2020 3a20 7265 7475         r  : retu
+000353f0: 726e 0a20 2020 2020 2020 2020 2020 7274  rn.           rt
+00035400: 3d70 7269 6e74 6628 2778 7878 7827 2c64  =printf('xxxx',d
+00035410: 7370 3d27 7227 290a 2020 2020 2020 2020  sp='r').        
+00035420: 2020 2070 7269 6e74 2872 7429 0a20 2020     print(rt).   
+00035430: 2027 2727 0a20 2020 2067 6c6f 6261 6c20   '''.    global 
+00035440: 7072 696e 7466 5f63 616c 6c65 725f 6465  printf_caller_de
+00035450: 7461 696c 0a20 2020 2067 6c6f 6261 6c20  tail.    global 
+00035460: 7072 696e 7466 5f63 616c 6c65 725f 7472  printf_caller_tr
+00035470: 6565 0a20 2020 2067 6c6f 6261 6c20 7072  ee.    global pr
+00035480: 696e 7466 5f6c 6f67 5f62 6173 650a 2020  intf_log_base.  
+00035490: 2020 676c 6f62 616c 2070 7269 6e74 665f    global printf_
+000354a0: 6361 6c6c 6572 5f6e 616d 650a 2020 2020  caller_name.    
+000354b0: 676c 6f62 616c 2070 7269 6e74 665f 6e65  global printf_ne
+000354c0: 776c 696e 655f 696e 666f 0a20 2020 2067  wline_info.    g
+000354d0: 6c6f 6261 6c20 7072 696e 7466 5f69 676e  lobal printf_ign
+000354e0: 6f72 655f 656d 7074 790a 2020 2020 676c  ore_empty.    gl
+000354f0: 6f62 616c 2070 7269 6e74 665f 6462 675f  obal printf_dbg_
+00035500: 656d 7074 790a 2020 2020 676c 6f62 616c  empty.    global
+00035510: 2070 7269 6e74 665f 7363 725f 6462 670a   printf_scr_dbg.
+00035520: 2020 2020 6469 7265 6374 3d6f 7074 732e      direct=opts.
+00035530: 6765 7428 2764 6972 6563 7427 2c46 616c  get('direct',Fal
+00035540: 7365 290a 2020 2020 6473 703d 6f70 7473  se).    dsp=opts
+00035550: 2e67 6574 2827 6473 7027 2c6f 7074 732e  .get('dsp',opts.
+00035560: 6765 7428 276d 6f64 6527 2c27 6127 2929  get('mode','a'))
+00035570: 0a20 2020 2069 6620 6e6f 7420 6473 703a  .    if not dsp:
+00035580: 2064 7370 3d27 6127 0a20 2020 2069 6620   dsp='a'.    if 
+00035590: 6473 7020 3d3d 2027 6927 3a20 7265 7475  dsp == 'i': retu
+000355a0: 726e 2023 2069 676e 6f72 6520 7072 696e  rn # ignore prin
+000355b0: 740a 2020 2020 6c6f 673d 6f70 7473 2e67  t.    log=opts.g
+000355c0: 6574 2827 6c6f 6727 2c4e 6f6e 6529 0a20  et('log',None). 
+000355d0: 2020 206c 6f67 5f6c 6576 656c 3d6f 7074     log_level=opt
+000355e0: 732e 6765 7428 276c 6f67 5f6c 6576 656c  s.get('log_level
+000355f0: 272c 4e6f 6e65 290a 2020 2020 7061 7265  ',None).    pare
+00035600: 6e74 5f6e 3d6f 7074 732e 6765 7428 2763  nt_n=opts.get('c
+00035610: 616c 6c65 725f 7061 7265 6e74 272c 3129  aller_parent',1)
+00035620: 0a20 2020 2063 616c 6c65 725f 6465 7461  .    caller_deta
+00035630: 696c 3d6f 7074 732e 6765 7428 2763 616c  il=opts.get('cal
+00035640: 6c65 7227 2c6f 7074 732e 6765 7428 2763  ler',opts.get('c
+00035650: 616c 6c65 725f 6465 7461 696c 272c 7072  aller_detail',pr
+00035660: 696e 7466 5f63 616c 6c65 725f 6465 7461  intf_caller_deta
+00035670: 696c 2929 0a20 2020 2063 616c 6c65 725f  il)).    caller_
+00035680: 7472 6565 3d6f 7074 732e 6765 7428 2763  tree=opts.get('c
+00035690: 616c 6c65 725f 7472 6565 272c 7072 696e  aller_tree',prin
+000356a0: 7466 5f63 616c 6c65 725f 7472 6565 290a  tf_caller_tree).
+000356b0: 2020 2020 6361 6c6c 6572 5f68 6973 746f      caller_histo
+000356c0: 7279 3d6f 7074 732e 6765 7428 2763 616c  ry=opts.get('cal
+000356d0: 6c65 725f 6869 7374 6f72 7927 2c46 616c  ler_history',Fal
+000356e0: 7365 290a 2020 2020 6361 6c6c 6572 5f69  se).    caller_i
+000356f0: 676e 6f72 653d 6f70 7473 2e67 6574 2827  gnore=opts.get('
+00035700: 6361 6c6c 6572 5f69 676e 6f72 6527 2c6f  caller_ignore',o
+00035710: 7074 732e 6765 7428 2763 616c 6c65 725f  pts.get('caller_
+00035720: 7570 7065 7227 2c5b 5d29 290a 2020 2020  upper',[])).    
+00035730: 6361 6c6c 6572 5f66 756c 6c5f 6669 6c65  caller_full_file
+00035740: 6e61 6d65 3d6f 7074 732e 6765 7428 2763  name=opts.get('c
+00035750: 616c 6c65 725f 6675 6c6c 5f66 696c 656e  aller_full_filen
+00035760: 616d 6527 2c46 616c 7365 290a 2020 2020  ame',False).    
+00035770: 6361 6c6c 6572 5f66 696c 656e 616d 653d  caller_filename=
+00035780: 6f70 7473 2e67 6574 2827 6361 6c6c 6572  opts.get('caller
+00035790: 5f66 696c 656e 616d 6527 2c46 616c 7365  _filename',False
+000357a0: 290a 2020 2020 6361 6c6c 6572 5f6c 696e  ).    caller_lin
+000357b0: 655f 6e75 6d62 6572 3d6f 7074 732e 6765  e_number=opts.ge
+000357c0: 7428 2763 616c 6c65 725f 6c69 6e65 5f6e  t('caller_line_n
+000357d0: 756d 6265 7227 2c46 616c 7365 290a 2020  umber',False).  
+000357e0: 2020 6361 6c6c 6572 5f61 7267 733d 6f70    caller_args=op
+000357f0: 7473 2e67 6574 2827 6361 6c6c 6572 5f61  ts.get('caller_a
+00035800: 7267 7327 2c46 616c 7365 290a 2020 2020  rgs',False).    
+00035810: 6361 6c6c 6572 5f6e 616d 653d 6f70 7473  caller_name=opts
+00035820: 2e67 6574 2827 6361 6c6c 6572 5f6e 616d  .get('caller_nam
+00035830: 6527 2c70 7269 6e74 665f 6361 6c6c 6572  e',printf_caller
+00035840: 5f6e 616d 6529 0a20 2020 2073 7973 6c6f  _name).    syslo
+00035850: 6764 3d6f 7074 732e 6765 7428 2773 7973  gd=opts.get('sys
+00035860: 6c6f 6764 272c 4e6f 6e65 290a 2020 2020  logd',None).    
+00035870: 7363 725f 6462 673d 6f70 7473 2e67 6574  scr_dbg=opts.get
+00035880: 2827 7363 725f 6462 6727 2c70 7269 6e74  ('scr_dbg',print
+00035890: 665f 7363 725f 6462 6729 0a20 2020 2073  f_scr_dbg).    s
+000358a0: 6372 5f64 6267 5f63 6f6e 6469 7469 6f6e  cr_dbg_condition
+000358b0: 3d6f 7074 732e 6765 7428 2773 6372 5f64  =opts.get('scr_d
+000358c0: 6267 5f63 6f6e 6469 7469 6f6e 2729 0a20  bg_condition'). 
+000358d0: 2020 206e 6f5f 696e 7472 6f3d 6f70 7473     no_intro=opts
+000358e0: 2e67 6574 2827 6e6f 5f69 6e74 726f 272c  .get('no_intro',
+000358f0: 4661 6c73 6529 0a20 2020 2069 676e 6f72  False).    ignor
+00035900: 655f 656d 7074 793d 6f70 7473 2e67 6574  e_empty=opts.get
+00035910: 2827 6967 6e6f 7265 5f65 6d70 7479 272c  ('ignore_empty',
+00035920: 7072 696e 7466 5f69 676e 6f72 655f 656d  printf_ignore_em
+00035930: 7074 7929 0a20 2020 2064 6267 5f65 6d70  pty).    dbg_emp
+00035940: 7479 3d6f 7074 732e 6765 7428 2764 6267  ty=opts.get('dbg
+00035950: 5f65 6d70 7479 272c 7072 696e 7466 5f64  _empty',printf_d
+00035960: 6267 5f65 6d70 7479 290a 2020 2020 6d73  bg_empty).    ms
+00035970: 675f 7370 6c69 743d 6f70 7473 2e67 6574  g_split=opts.get
+00035980: 2827 6d73 675f 7370 6c69 7427 2c27 2027  ('msg_split',' '
+00035990: 290a 2020 2020 6d73 673d 6c69 7374 286d  ).    msg=list(m
+000359a0: 7367 290a 2020 2020 6966 206e 6f5f 696e  sg).    if no_in
+000359b0: 7472 6f20 6973 2054 7275 6520 6f72 2064  tro is True or d
+000359c0: 6972 6563 743a 0a20 2020 2020 2020 2064  irect:.        d
+000359d0: 6174 655f 666f 726d 6174 3d4e 6f6e 650a  ate_format=None.
+000359e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000359f0: 2020 6461 7465 5f66 6f72 6d61 743d 6f70    date_format=op
+00035a00: 7473 2e67 6574 2827 6461 7465 5f66 6f72  ts.get('date_for
+00035a10: 6d61 7427 2c27 256d 2f25 642f 2559 2025  mat','%m/%d/%Y %
+00035a20: 483a 254d 3a25 5327 2069 6620 6f70 7473  H:%M:%S' if opts
+00035a30: 2e67 6574 2827 6461 7465 2729 2065 6c73  .get('date') els
+00035a40: 6520 4e6f 6e65 290a 2020 2020 2320 656e  e None).    # en
+00035a50: 6420 6e65 776c 696e 6520 6465 7369 676e  d newline design
+00035a60: 0a20 2020 206e 6577 5f6c 696e 653d 2727  .    new_line=''
+00035a70: 2069 6620 6469 7265 6374 2065 6c73 6520   if direct else 
+00035a80: 6f70 7473 2e67 6574 2827 6e65 775f 6c69  opts.get('new_li
+00035a90: 6e65 272c 6f70 7473 2e67 6574 2827 6e65  ne',opts.get('ne
+00035aa0: 776c 696e 6527 2c6f 7074 732e 6765 7428  wline',opts.get(
+00035ab0: 2765 6e64 272c 6f70 7473 2e67 6574 2827  'end',opts.get('
+00035ac0: 656e 645f 6e65 776c 696e 6527 2c6f 7074  end_newline',opt
+00035ad0: 732e 6765 7428 2770 6f73 745f 6e65 776c  s.get('post_newl
+00035ae0: 696e 6527 2c27 5c6e 2729 2929 2929 0a20  ine','\n'))))). 
+00035af0: 2020 2069 6620 6e65 775f 6c69 6e65 206e     if new_line n
+00035b00: 6f74 2069 6e20 5b27 272c 275c 6e27 5d3a  ot in ['','\n']:
+00035b10: 6e65 775f 6c69 6e65 3d27 5c6e 2720 6966  new_line='\n' if
+00035b20: 206e 6577 5f6c 696e 6520 616e 6420 6e6f   new_line and no
+00035b30: 7420 6469 7265 6374 2065 6c73 6520 2727  t direct else ''
+00035b40: 0a20 2020 2023 2073 7461 7274 206e 6577  .    # start new
+00035b50: 6c69 6e65 2064 6573 6967 6e0a 2020 2020  line design.    
+00035b60: 6e6f 5f73 7461 7274 5f6e 6577 6c69 6e65  no_start_newline
+00035b70: 3d6f 7074 732e 6765 7428 276e 6f5f 7374  =opts.get('no_st
+00035b80: 6172 745f 6e65 776c 696e 6527 290a 2020  art_newline').  
+00035b90: 2020 7374 6172 745f 6e65 776c 696e 653d    start_newline=
+00035ba0: 2727 2069 6620 6e6f 5f73 7461 7274 5f6e  '' if no_start_n
+00035bb0: 6577 6c69 6e65 2069 7320 5472 7565 2065  ewline is True e
+00035bc0: 6c73 6520 6f70 7473 2e67 6574 2827 7374  lse opts.get('st
+00035bd0: 6172 745f 6e65 776c 696e 6527 2c6f 7074  art_newline',opt
+00035be0: 732e 6765 7428 2773 7461 7274 272c 6f70  s.get('start',op
+00035bf0: 7473 2e67 6574 2827 7072 655f 6e65 776c  ts.get('pre_newl
+00035c00: 696e 6527 2929 290a 2020 2020 6966 206e  ine'))).    if n
+00035c10: 6f5f 7374 6172 745f 6e65 776c 696e 653a  o_start_newline:
+00035c20: 0a20 2020 2020 2020 2073 7461 7274 5f6e  .        start_n
+00035c30: 6577 6c69 6e65 3d27 270a 2020 2020 656c  ewline=''.    el
+00035c40: 7365 3a0a 2020 2020 2020 2020 6966 2073  se:.        if s
+00035c50: 7461 7274 5f6e 6577 6c69 6e65 2069 7320  tart_newline is 
+00035c60: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
+00035c70: 2020 7374 6172 745f 6e65 776c 696e 653d    start_newline=
+00035c80: 275c 6e27 0a20 2020 2020 2020 2065 6c69  '\n'.        eli
+00035c90: 6620 4973 496e 2873 7461 7274 5f6e 6577  f IsIn(start_new
+00035ca0: 6c69 6e65 2c5b 2741 272c 2741 7574 6f27  line,['A','Auto'
+00035cb0: 5d29 3a0a 2020 2020 2020 2020 2020 2020  ]):.            
+00035cc0: 7374 6172 745f 6e65 776c 696e 653d 2761  start_newline='a
+00035cd0: 7574 6f27 0a20 2020 2020 2020 2065 6c73  uto'.        els
+00035ce0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+00035cf0: 7461 7274 5f6e 6577 6c69 6e65 3d27 270a  tart_newline=''.
+00035d00: 0a20 2020 2069 6620 6e6f 5f69 6e74 726f  .    if no_intro
+00035d10: 2069 7320 5472 7565 3a20 2320 6966 206e   is True: # if n
+00035d20: 6f5f 696e 7472 6f20 7468 656e 2069 676e  o_intro then ign
+00035d30: 6f72 6520 7374 6172 745f 6e65 776c 696e  ore start_newlin
+00035d40: 6520 6d61 726b 0a20 2020 2020 2020 2073  e mark.        s
+00035d50: 7461 7274 5f6e 6577 6c69 6e65 3d27 270a  tart_newline=''.
+00035d60: 0a20 2020 2069 6e74 726f 3d6f 7074 732e  .    intro=opts.
+00035d70: 6765 7428 2769 6e74 726f 272c 4e6f 6e65  get('intro',None
+00035d80: 290a 2020 2020 6c6f 6766 696c 653d 6f70  ).    logfile=op
+00035d90: 7473 2e67 6574 2827 6c6f 6766 696c 6527  ts.get('logfile'
+00035da0: 2c6f 7074 732e 6765 7428 276c 6f67 5f66  ,opts.get('log_f
+00035db0: 696c 6527 2c5b 5d29 290a 2020 2020 6967  ile',[])).    ig
+00035dc0: 6e6f 7265 5f6d 7973 656c 663d 6f70 7473  nore_myself=opts
+00035dd0: 2e67 6574 2827 6967 6e6f 7265 5f6d 7973  .get('ignore_mys
+00035de0: 656c 6627 2c54 7275 6529 0a20 2020 2064  elf',True).    d
+00035df0: 6566 206d 7367 5f6d 616b 6572 282a 6d73  ef msg_maker(*ms
+00035e00: 672c 6d73 675f 7370 6c69 743d 2720 272c  g,msg_split=' ',
+00035e10: 696e 7472 6f5f 6c65 6e3d 302c 696e 7472  intro_len=0,intr
+00035e20: 6f5f 6d73 673d 2727 293a 0a20 2020 2020  o_msg=''):.     
+00035e30: 2020 2023 204d 616b 6520 696e 7075 7420     # Make input 
+00035e40: 6461 7461 2074 6f20 6120 7374 7269 6e67  data to a string
+00035e50: 206d 7367 200a 2020 2020 2020 2020 6d73   msg .        ms
+00035e60: 675f 7374 723d 2727 0a20 2020 2020 2020  g_str=''.       
+00035e70: 2054 543d 3020 2023 2046 6f72 2027 5c6e   TT=0  # For '\n
+00035e80: 2720 6f72 2027 5c6e 5c6e 2720 2e2e 2e0a  ' or '\n\n' ....
+00035e90: 2020 2020 2020 2020 666f 7220 6969 2069          for ii i
+00035ea0: 6e20 6d73 673a 0a20 2020 2020 2020 2020  n msg:.         
+00035eb0: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
+00035ec0: 616e 6365 2869 692c 7374 7229 3a0a 2020  ance(ii,str):.  
+00035ed0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00035ee0: 2069 6e74 726f 5f6c 656e 3a0a 2020 2020   intro_len:.    
+00035ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035f00: 613d 436f 6c6f 7253 7472 2857 7261 7053  a=ColorStr(WrapS
+00035f10: 7472 696e 6728 5374 7228 7070 7269 6e74  tring(Str(pprint
+00035f20: 2e70 666f 726d 6174 2869 6929 2c64 6566  .pformat(ii),def
+00035f30: 6175 6c74 3d27 6f72 6727 292c 6673 7061  ault='org'),fspa
+00035f40: 6365 3d30 2069 6620 6e6f 7420 6d73 675f  ce=0 if not msg_
+00035f50: 7374 7220 6f72 206d 7367 5f73 706c 6974  str or msg_split
+00035f60: 2021 3d20 275c 6e27 206f 7220 5454 2065   != '\n' or TT e
+00035f70: 6c73 6520 696e 7472 6f5f 6c65 6e2c 206e  lse intro_len, n
+00035f80: 7370 6163 653d 696e 7472 6f5f 6c65 6e2c  space=intro_len,
+00035f90: 6d6f 6465 3d27 7370 6163 6527 292c 2a2a  mode='space'),**
+00035fa0: 6f70 7473 290a 2020 2020 2020 2020 2020  opts).          
+00035fb0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00035fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035fd0: 613d 436f 6c6f 7253 7472 2853 7472 2870  a=ColorStr(Str(p
+00035fe0: 7072 696e 742e 7066 6f72 6d61 7428 6969  print.pformat(ii
+00035ff0: 292c 6465 6661 756c 743d 276f 7267 2729  ),default='org')
+00036000: 2c2a 2a6f 7074 7329 0a20 2020 2020 2020  ,**opts).       
+00036010: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00036020: 2020 2020 2020 2020 2020 2069 6620 275c             if '\
+00036030: 6e27 2069 6e20 6969 2061 6e64 206e 6f74  n' in ii and not
+00036040: 2069 692e 7265 706c 6163 6528 275c 6e27   ii.replace('\n'
+00036050: 2c27 2729 3a20 2363 6f6e 7665 7274 205c  ,''): #convert \
+00036060: 6e20 6f72 205c 6e5c 6e20 2e2e 2e2e 2074  n or \n\n .... t
+00036070: 6f20 7772 6170 7069 6e67 2066 6f72 6d61  o wrapping forma
+00036080: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
+00036090: 2020 2020 2020 5454 2b3d 310a 2020 2020        TT+=1.    
+000360a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000360b0: 6969 3d69 692b 2754 270a 2020 2020 2020  ii=ii+'T'.      
+000360c0: 2020 2020 2020 2020 2020 6966 2069 6e74            if int
+000360d0: 726f 5f6c 656e 3a0a 2020 2020 2020 2020  ro_len:.        
+000360e0: 2020 2020 2020 2020 2020 2020 613d 436f              a=Co
+000360f0: 6c6f 7253 7472 2857 7261 7053 7472 696e  lorStr(WrapStrin
+00036100: 6728 5374 7228 6969 2c64 6566 6175 6c74  g(Str(ii,default
+00036110: 3d27 6f72 6727 292c 6673 7061 6365 3d30  ='org'),fspace=0
+00036120: 2069 6620 6e6f 7420 6d73 675f 7374 7220   if not msg_str 
+00036130: 6f72 206d 7367 5f73 706c 6974 2021 3d20  or msg_split != 
+00036140: 275c 6e27 206f 7220 5454 2065 6c73 6520  '\n' or TT else 
+00036150: 696e 7472 6f5f 6c65 6e2c 206e 7370 6163  intro_len, nspac
+00036160: 653d 696e 7472 6f5f 6c65 6e2c 6d6f 6465  e=intro_len,mode
+00036170: 3d27 7370 6163 6527 292c 2a2a 6f70 7473  ='space'),**opts
+00036180: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00036190: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000361a0: 2020 2020 2020 2020 2020 2020 613d 436f              a=Co
+000361b0: 6c6f 7253 7472 2853 7472 2869 692c 6465  lorStr(Str(ii,de
+000361c0: 6661 756c 743d 276f 7267 2729 2c2a 2a6f  fault='org'),**o
+000361d0: 7074 7329 0a20 2020 2020 2020 2020 2020  pts).           
+000361e0: 2020 2020 2023 5265 636f 7665 7220 6164       #Recover ad
+000361f0: 6465 6420 5420 666f 7220 7772 6170 7069  ded T for wrappi
+00036200: 6e67 2066 6f72 6d61 7420 746f 206f 7269  ng format to ori
+00036210: 6769 6e61 6c0a 2020 2020 2020 2020 2020  ginal.          
+00036220: 2020 2020 2020 6966 2054 5420 616e 6420        if TT and 
+00036230: 275c 6e27 2069 6e20 6969 2061 6e64 2069  '\n' in ii and i
+00036240: 692e 7265 706c 6163 6528 275c 6e27 2c27  i.replace('\n','
+00036250: 2729 203d 3d20 2754 273a 2061 3d61 5b3a  ') == 'T': a=a[:
+00036260: 2d31 5d0a 2020 2020 2020 2020 2020 2020  -1].            
+00036270: 6966 206d 7367 5f73 7472 3a0a 2020 2020  if msg_str:.    
+00036280: 2020 2020 2020 2020 2020 2020 6966 2054              if T
+00036290: 543a 0a20 2020 2020 2020 2020 2020 2020  T:.             
+000362a0: 2020 2020 2020 2023 6966 206d 6573 7361         #if messa
+000362b0: 6765 2073 706c 6974 6572 2065 7869 7374  ge spliter exist
+000362c0: 2061 6e64 2066 6978 2074 6f20 6669 7273   and fix to firs
+000362d0: 7420 6368 6172 6163 7465 720a 2020 2020  t character.    
+000362e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000362f0: 6966 2054 5420 3d3d 2031 2061 6e64 206e  if TT == 1 and n
+00036300: 6f74 2069 692e 7265 706c 6163 6528 275c  ot ii.replace('\
+00036310: 6e27 2c27 2729 3a0a 2020 2020 2020 2020  n',''):.        
+00036320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036330: 6d73 675f 7374 723d 6d73 675f 7374 7220  msg_str=msg_str 
+00036340: 2b20 6d73 675f 7370 6c69 7420 2b20 610a  + msg_split + a.
+00036350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036360: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00036370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036380: 2020 6d73 675f 7374 723d 6d73 675f 7374    msg_str=msg_st
+00036390: 7220 2b20 610a 2020 2020 2020 2020 2020  r + a.          
+000363a0: 2020 2020 2020 2020 2020 6966 2069 692e            if ii.
+000363b0: 7265 706c 6163 6528 275c 6e27 2c27 2729  replace('\n','')
+000363c0: 3a20 5454 3d30 2023 2072 656d 6f76 6520  : TT=0 # remove 
+000363d0: 7370 6563 6961 6c20 666f 726d 6174 2074  special format t
+000363e0: 6167 0a20 2020 2020 2020 2020 2020 2020  ag.             
+000363f0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00036400: 2020 2020 2020 2020 2020 2020 206d 7367               msg
+00036410: 5f73 7472 3d6d 7367 5f73 7472 202b 206d  _str=msg_str + m
+00036420: 7367 5f73 706c 6974 202b 2061 0a20 2020  sg_split + a.   
+00036430: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00036440: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00036450: 6620 696e 7472 6f5f 6d73 673a 0a20 2020  f intro_msg:.   
+00036460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036470: 206d 7367 5f73 7472 3d69 6e74 726f 5f6d   msg_str=intro_m
+00036480: 7367 202b 2061 200a 2020 2020 2020 2020  sg + a .        
+00036490: 2020 2020 2020 2020 656c 6966 2069 6e74          elif int
+000364a0: 726f 5f6c 656e 3a0a 2020 2020 2020 2020  ro_len:.        
+000364b0: 2020 2020 2020 2020 2020 2020 6d73 675f              msg_
+000364c0: 7374 723d 2053 7061 6365 286e 756d 3d69  str= Space(num=i
+000364d0: 6e74 726f 5f6c 656e 2920 2b20 610a 2020  ntro_len) + a.  
+000364e0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+000364f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00036500: 2020 2020 2020 2020 6d73 675f 7374 723d          msg_str=
+00036510: 6120 0a20 2020 2020 2020 2020 2020 2023  a .            #
+00036520: 2069 6620 656e 6420 6f66 2074 6865 206c   if end of the l
+00036530: 696e 6520 6861 7320 6578 7472 6120 275c  ine has extra '\
+00036540: 6e27 2074 6865 6e20 7265 636f 7665 7220  n' then recover 
+00036550: 7468 6520 6c6f 7374 6564 2027 5c6e 2720  the losted '\n' 
+00036560: 6279 2057 7261 7053 7472 696e 6728 290a  by WrapString().
+00036570: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00036580: 7369 6e73 7461 6e63 6528 6969 2c73 7472  sinstance(ii,str
+00036590: 2920 616e 6420 6c65 6e28 6969 2920 3e20  ) and len(ii) > 
+000365a0: 3120 616e 6420 6969 5b2d 315d 203d 3d20  1 and ii[-1] == 
+000365b0: 275c 6e27 3a0a 2020 2020 2020 2020 2020  '\n':.          
+000365c0: 2020 2020 2020 6d73 675f 7374 723d 6d73        msg_str=ms
+000365d0: 675f 7374 7220 2b20 6969 5b2d 315d 0a20  g_str + ii[-1]. 
+000365e0: 2020 2020 2020 2072 6574 7572 6e20 6d73         return ms
+000365f0: 675f 7374 720a 0a20 2020 2023 4765 7420  g_str..    #Get 
+00036600: 4c6f 6766 696c 6520 696e 666f 726d 6174  Logfile informat
+00036610: 696f 6e20 666f 7220 4f4c 4420 7665 7273  ion for OLD vers
+00036620: 696f 6e20 616e 6420 7265 6d6f 7665 2074  ion and remove t
+00036630: 6865 204c 6f67 6669 6c65 2069 6e66 6f72  he Logfile infor
+00036640: 6d61 7469 6f6e 2069 6e20 7468 6520 6d65  mation in the me
+00036650: 7373 6167 6573 0a20 2020 2069 6620 6973  ssages.    if is
+00036660: 696e 7374 616e 6365 286c 6f67 6669 6c65  instance(logfile
+00036670: 2c73 7472 293a 0a20 2020 2020 2020 206c  ,str):.        l
+00036680: 6f67 6669 6c65 3d6c 6f67 6669 6c65 2e73  ogfile=logfile.s
+00036690: 706c 6974 2827 2c27 290a 2020 2020 656c  plit(',').    el
+000366a0: 6966 2069 7369 6e73 7461 6e63 6528 6c6f  if isinstance(lo
+000366b0: 6766 696c 652c 7475 706c 6529 3a0a 2020  gfile,tuple):.  
+000366c0: 2020 2020 2020 6c6f 6766 696c 653d 6c69        logfile=li
+000366d0: 7374 2874 7570 6c65 290a 2020 2020 6966  st(tuple).    if
+000366e0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+000366f0: 6c6f 6766 696c 652c 6c69 7374 293a 0a20  logfile,list):. 
+00036700: 2020 2020 2020 206c 6f67 6669 6c65 3d5b         logfile=[
+00036710: 5d0a 2020 2020 666f 7220 6969 2069 6e20  ].    for ii in 
+00036720: 6d73 673a 0a20 2020 2020 2020 2069 6620  msg:.        if 
+00036730: 6973 696e 7374 616e 6365 2869 692c 7374  isinstance(ii,st
+00036740: 7229 2061 6e64 2027 3a27 2069 6e20 6969  r) and ':' in ii
+00036750: 3a0a 2020 2020 2020 2020 2020 2020 6c6f  :.            lo
+00036760: 6766 696c 655f 6c69 7374 3d69 692e 7370  gfile_list=ii.sp
+00036770: 6c69 7428 273a 2729 0a20 2020 2020 2020  lit(':').       
+00036780: 2020 2020 2069 6620 6c6f 6766 696c 655f       if logfile_
+00036790: 6c69 7374 5b30 5d20 696e 205b 276c 6f67  list[0] in ['log
+000367a0: 5f66 696c 6527 2c27 6c6f 6766 696c 6527  _file','logfile'
+000367b0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+000367c0: 2020 2069 6620 6c65 6e28 6c6f 6766 696c     if len(logfil
+000367d0: 655f 6c69 7374 2920 3e20 323a 0a20 2020  e_list) > 2:.   
+000367e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000367f0: 2066 6f72 206a 6a20 696e 206c 6f67 6669   for jj in logfi
+00036800: 6c65 5f6c 6973 745b 313a 5d3a 0a20 2020  le_list[1:]:.   
+00036810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036820: 2020 2020 206c 6f67 6669 6c65 2e61 7070       logfile.app
+00036830: 656e 6428 6a6a 290a 2020 2020 2020 2020  end(jj).        
+00036840: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00036850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036860: 2020 6c6f 6766 696c 653d 6c6f 6766 696c    logfile=logfil
+00036870: 652b 6c6f 6766 696c 655f 6c69 7374 5b31  e+logfile_list[1
+00036880: 5d2e 7370 6c69 7428 272c 2729 0a20 2020  ].split(',').   
+00036890: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000368a0: 6973 696e 7374 616e 6365 286d 7367 2c74  isinstance(msg,t
+000368b0: 7570 6c65 293a 0a20 2020 2020 2020 2020  uple):.         
+000368c0: 2020 2020 2020 2020 2020 206d 7367 3d6c             msg=l
+000368d0: 6973 7428 6d73 6729 0a20 2020 2020 2020  ist(msg).       
+000368e0: 2020 2020 2020 2020 2020 2020 206d 7367               msg
+000368f0: 2e72 656d 6f76 6528 6969 290a 2020 2020  .remove(ii).    
+00036900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036910: 6d73 673d 7475 706c 6528 6d73 6729 0a20  msg=tuple(msg). 
+00036920: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00036930: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00036940: 2020 2020 2020 2020 206d 7367 2e72 656d           msg.rem
+00036950: 6f76 6528 6969 290a 2020 2020 0a20 2020  ove(ii).    .   
+00036960: 2023 2073 6176 6520 6d73 6728 7265 6d6f   # save msg(remo
+00036970: 7665 6420 6c6f 675f 6669 6c65 2069 6e66  ved log_file inf
+00036980: 6f72 6d61 7469 6f6e 2920 746f 2073 7973  ormation) to sys
+00036990: 6c6f 6764 200a 2020 2020 6966 2073 7973  logd .    if sys
+000369a0: 6c6f 6764 3a0a 2020 2020 2020 2020 2320  logd:.        # 
+000369b0: 4d61 6b65 2061 206d 6573 7361 6765 2074  Make a message t
+000369c0: 6f20 7369 6e67 6c65 206c 696e 650a 2020  o single line.  
+000369d0: 2020 2020 2020 746d 705f 7374 723d 6d73        tmp_str=ms
+000369e0: 675f 6d61 6b65 7228 2a6d 7367 2c6d 7367  g_maker(*msg,msg
+000369f0: 5f73 706c 6974 3d6d 7367 5f73 706c 6974  _split=msg_split
+00036a00: 290a 2020 2020 2020 2020 6966 2073 7973  ).        if sys
+00036a10: 6c6f 6764 2069 6e20 5b27 494e 464f 272c  logd in ['INFO',
+00036a20: 2769 6e66 6f27 5d3a 0a20 2020 2020 2020  'info']:.       
+00036a30: 2020 2020 2073 7973 6c6f 672e 7379 736c       syslog.sysl
+00036a40: 6f67 2873 7973 6c6f 672e 4c4f 475f 494e  og(syslog.LOG_IN
+00036a50: 464f 2c74 6d70 5f73 7472 290a 2020 2020  FO,tmp_str).    
+00036a60: 2020 2020 656c 6966 2073 7973 6c6f 6764      elif syslogd
+00036a70: 2069 6e20 5b27 4b45 524e 272c 276b 6572   in ['KERN','ker
+00036a80: 6e27 5d3a 0a20 2020 2020 2020 2020 2020  n']:.           
+00036a90: 2073 7973 6c6f 672e 7379 736c 6f67 2873   syslog.syslog(s
+00036aa0: 7973 6c6f 672e 4c4f 475f 4b45 524e 2c74  yslog.LOG_KERN,t
+00036ab0: 6d70 5f73 7472 290a 2020 2020 2020 2020  mp_str).        
+00036ac0: 656c 6966 2073 7973 6c6f 6764 2069 6e20  elif syslogd in 
+00036ad0: 5b27 4552 5227 2c27 6572 7227 5d3a 0a20  ['ERR','err']:. 
+00036ae0: 2020 2020 2020 2020 2020 2073 7973 6c6f             syslo
+00036af0: 672e 7379 736c 6f67 2873 7973 6c6f 672e  g.syslog(syslog.
+00036b00: 4c4f 475f 4552 522c 746d 705f 7374 7229  LOG_ERR,tmp_str)
+00036b10: 0a20 2020 2020 2020 2065 6c69 6620 7379  .        elif sy
+00036b20: 736c 6f67 6420 696e 205b 2743 5249 5427  slogd in ['CRIT'
+00036b30: 2c27 6372 6974 275d 3a0a 2020 2020 2020  ,'crit']:.      
+00036b40: 2020 2020 2020 7379 736c 6f67 2e73 7973        syslog.sys
+00036b50: 6c6f 6728 7379 736c 6f67 2e4c 4f47 5f43  log(syslog.LOG_C
+00036b60: 5249 542c 746d 705f 7374 7229 0a20 2020  RIT,tmp_str).   
+00036b70: 2020 2020 2065 6c69 6620 7379 736c 6f67       elif syslog
+00036b80: 6420 696e 205b 2757 4152 4e27 2c27 7761  d in ['WARN','wa
+00036b90: 726e 275d 3a0a 2020 2020 2020 2020 2020  rn']:.          
+00036ba0: 2020 7379 736c 6f67 2e73 7973 6c6f 6728    syslog.syslog(
+00036bb0: 7379 736c 6f67 2e4c 4f47 5f57 4152 4e49  syslog.LOG_WARNI
+00036bc0: 4e47 2c74 6d70 5f73 7472 290a 2020 2020  NG,tmp_str).    
+00036bd0: 2020 2020 656c 6966 2073 7973 6c6f 6764      elif syslogd
+00036be0: 2069 6e20 5b27 4442 4727 2c27 4445 4255   in ['DBG','DEBU
+00036bf0: 4727 2c27 6462 6727 2c27 6465 6275 6727  G','dbg','debug'
+00036c00: 5d3a 0a20 2020 2020 2020 2020 2020 2073  ]:.            s
+00036c10: 7973 6c6f 672e 7379 736c 6f67 2873 7973  yslog.syslog(sys
+00036c20: 6c6f 672e 4c4f 475f 4445 4255 472c 746d  log.LOG_DEBUG,tm
+00036c30: 705f 7374 7229 0a20 2020 2020 2020 2065  p_str).        e
+00036c40: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00036c50: 2073 7973 6c6f 672e 7379 736c 6f67 2874   syslog.syslog(t
+00036c60: 6d70 5f73 7472 290a 0a20 2020 2023 5768  mp_str)..    #Wh
+00036c70: 656e 2068 6176 696e 6720 4c6f 6720 6675  en having Log fu
+00036c80: 6e63 7469 6f6e 2074 6865 6e20 6769 7665  nction then give
+00036c90: 2074 6865 2064 6174 6120 746f 206c 6f67   the data to log
+00036ca0: 2066 756e 6374 696f 6e0a 2020 2020 6c6f   function.    lo
+00036cb0: 675f 703d 4661 6c73 650a 2020 2020 6966  g_p=False.    if
+00036cc0: 2049 7346 756e 6374 696f 6e28 6c6f 6729   IsFunction(log)
+00036cd0: 3a20 2320 4c6f 6720 6675 6e63 7469 6f6e  : # Log function
+00036ce0: 2820 6465 6275 6720 6d6f 6465 206c 6f67  ( debug mode log
+00036cf0: 2066 756e 6374 696f 6e20 746f 6f20 290a   function too ).
+00036d00: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+00036d10: 2020 2020 2020 2020 2069 6620 2827 6427           if ('d'
+00036d20: 2069 6e20 6473 7020 6f72 2027 6627 2069   in dsp or 'f' i
+00036d30: 6e20 6473 7029 2061 6e64 206c 6f67 6669  n dsp) and logfi
+00036d40: 6c65 3a0a 2020 2020 2020 2020 2020 2020  le:.            
+00036d50: 2020 2020 6966 2027 6361 6c6c 6572 5f70      if 'caller_p
+00036d60: 6172 656e 7427 2069 6e20 6f70 7473 3a0a  arent' in opts:.
+00036d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036d80: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00036d90: 6528 6f70 7473 5b27 6361 6c6c 6572 5f70  e(opts['caller_p
+00036da0: 6172 656e 7427 5d2c 696e 7429 3a0a 2020  arent'],int):.  
+00036db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036dc0: 2020 2020 2020 6f70 7473 5b27 6361 6c6c        opts['call
+00036dd0: 6572 5f70 6172 656e 7427 5d3d 6f70 7473  er_parent']=opts
+00036de0: 5b27 6361 6c6c 6572 5f70 6172 656e 7427  ['caller_parent'
+00036df0: 5d2b 310a 2020 2020 2020 2020 2020 2020  ]+1.            
+00036e00: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00036e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036e20: 2020 2020 2020 6f70 7473 5b27 6361 6c6c        opts['call
+00036e30: 6572 5f70 6172 656e 7427 5d3d 320a 2020  er_parent']=2.  
+00036e40: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00036e50: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00036e60: 2020 2020 2020 2020 6f70 7473 5b27 6361          opts['ca
+00036e70: 6c6c 6572 5f70 6172 656e 7427 5d3d 320a  ller_parent']=2.
+00036e80: 2020 2020 2020 2020 2020 2020 4665 6564              Feed
+00036e90: 4675 6e63 286c 6f67 2c2a 6d73 672c 2a2a  Func(log,*msg,**
+00036ea0: 6f70 7473 290a 2020 2020 2020 2020 2020  opts).          
+00036eb0: 2020 2320 4966 206c 6f67 2066 756e 6374    # If log funct
+00036ec0: 696f 6e20 7461 6b65 206f 7665 7220 7468  ion take over th
+00036ed0: 6520 6c6f 6720 7468 656e 206e 6f20 6d6f  e log then no mo
+00036ee0: 7265 2070 7269 6e74 2074 6f20 6f74 6865  re print to othe
+00036ef0: 7273 0a20 2020 2020 2020 2020 2020 2072  rs.            r
+00036f00: 6574 7572 6e0a 2020 2020 2020 2020 6578  eturn.        ex
+00036f10: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
+00036f20: 2020 7061 7373 0a0a 2020 2020 2320 4d61    pass..    # Ma
+00036f30: 6b65 2061 2049 6e74 726f 0a20 2020 2069  ke a Intro.    i
+00036f40: 6e74 726f 5f6c 656e 3d30 0a20 2020 2069  ntro_len=0.    i
+00036f50: 6e74 726f 5f6d 7367 3d27 270a 2020 2020  ntro_msg=''.    
+00036f60: 6966 206e 6f74 2064 6972 6563 7420 616e  if not direct an
+00036f70: 6420 6e6f 7420 6e6f 5f69 6e74 726f 3a0a  d not no_intro:.
+00036f80: 2020 2020 2020 2020 696e 7472 6f5f 6d73          intro_ms
+00036f90: 673d 277b 307d 2027 2e66 6f72 6d61 7428  g='{0} '.format(
+00036fa0: 5449 4d45 2829 2e4e 6f77 2829 2e73 7472  TIME().Now().str
+00036fb0: 6674 696d 6528 6461 7465 5f66 6f72 6d61  ftime(date_forma
+00036fc0: 7429 2920 6966 2064 6174 655f 666f 726d  t)) if date_form
+00036fd0: 6174 2061 6e64 206e 6f74 2073 7973 6c6f  at and not syslo
+00036fe0: 6764 2065 6c73 6520 2727 0a20 2020 2020  gd else ''.     
+00036ff0: 2020 2069 6e74 726f 5f6c 656e 3d6c 656e     intro_len=len
+00037000: 2869 6e74 726f 5f6d 7367 290a 2020 2020  (intro_msg).    
+00037010: 2020 2020 6966 2063 616c 6c65 725f 6465      if caller_de
+00037020: 7461 696c 206f 7220 6361 6c6c 6572 5f74  tail or caller_t
+00037030: 7265 6520 6f72 2063 616c 6c65 725f 6869  ree or caller_hi
+00037040: 7374 6f72 7920 6f72 2063 616c 6c65 725f  story or caller_
+00037050: 6967 6e6f 7265 3a0a 2020 2020 2020 2020  ignore:.        
+00037060: 2020 2020 6966 2069 676e 6f72 655f 6d79      if ignore_my
+00037070: 7365 6c66 3a0a 2020 2020 2020 2020 2020  self:.          
+00037080: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
+00037090: 6e73 7461 6e63 6528 6361 6c6c 6572 5f69  nstance(caller_i
+000370a0: 676e 6f72 652c 6c69 7374 293a 2063 616c  gnore,list): cal
+000370b0: 6c65 725f 6967 6e6f 7265 3d5b 5d0a 2020  ler_ignore=[].  
+000370c0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000370d0: 2027 4665 6564 4675 6e63 2720 6e6f 7420   'FeedFunc' not 
+000370e0: 696e 2063 616c 6c65 725f 6967 6e6f 7265  in caller_ignore
+000370f0: 3a20 6361 6c6c 6572 5f69 676e 6f72 652e  : caller_ignore.
+00037100: 6170 7065 6e64 2827 4665 6564 4675 6e63  append('FeedFunc
+00037110: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+00037120: 2020 2069 6620 2770 7269 6e74 6627 206e     if 'printf' n
+00037130: 6f74 2069 6e20 6361 6c6c 6572 5f69 676e  ot in caller_ign
+00037140: 6f72 653a 2063 616c 6c65 725f 6967 6e6f  ore: caller_igno
+00037150: 7265 2e61 7070 656e 6428 2770 7269 6e74  re.append('print
+00037160: 6627 290a 2020 2020 2020 2020 6966 2063  f').        if c
+00037170: 616c 6c65 725f 6967 6e6f 7265 2061 6e64  aller_ignore and
+00037180: 2069 7369 6e73 7461 6e63 6528 6361 6c6c   isinstance(call
+00037190: 6572 5f69 676e 6f72 652c 6c69 7374 293a  er_ignore,list):
+000371a0: 0a20 2020 2020 2020 2020 2020 2061 7267  .            arg
+000371b0: 3d7b 2770 6172 656e 7427 3a70 6172 656e  ={'parent':paren
+000371c0: 745f 6e2c 2761 7267 7327 3a46 616c 7365  t_n,'args':False
+000371d0: 2c27 6869 7374 6f72 7927 3a54 7275 652c  ,'history':True,
+000371e0: 2774 7265 6527 3a46 616c 7365 7d0a 2020  'tree':False}.  
+000371f0: 2020 2020 2020 2020 2020 6361 6c6c 5f6e            call_n
+00037200: 616d 653d 4675 6e63 7469 6f6e 4e61 6d65  ame=FunctionName
+00037210: 282a 2a61 7267 290a 2020 2020 2020 2020  (**arg).        
+00037220: 2020 2020 6e65 775f 703d 300a 2020 2020      new_p=0.    
+00037230: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+00037240: 2072 616e 6765 286c 656e 2863 616c 6c5f   range(len(call_
+00037250: 6e61 6d65 292d 312c 302c 2d31 293a 0a20  name)-1,0,-1):. 
+00037260: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00037270: 6620 6361 6c6c 5f6e 616d 655b 695d 5b30  f call_name[i][0
+00037280: 5d20 696e 2063 616c 6c65 725f 6967 6e6f  ] in caller_igno
+00037290: 7265 3a0a 2020 2020 2020 2020 2020 2020  re:.            
+000372a0: 2020 2020 2020 2020 6e65 775f 702b 3d31          new_p+=1
+000372b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000372c0: 2020 2020 2063 6f6e 7469 6e75 650a 2020       continue.  
+000372d0: 2020 2020 2020 2020 2020 2020 2020 6272                br
+000372e0: 6561 6b0a 2020 2020 2020 2020 2020 2020  eak.            
+000372f0: 6966 2069 7369 6e73 7461 6e63 6528 7061  if isinstance(pa
+00037300: 7265 6e74 5f6e 2c73 7472 293a 0a20 2020  rent_n,str):.   
+00037310: 2020 2020 2020 2020 2020 2020 2070 6172               par
+00037320: 656e 745f 6e5f 613d 7061 7265 6e74 5f6e  ent_n_a=parent_n
+00037330: 2e73 706c 6974 2827 2d27 290a 2020 2020  .split('-').    
+00037340: 2020 2020 2020 2020 2020 2020 6966 2070              if p
+00037350: 6172 656e 745f 6e5f 615b 305d 3a0a 2020  arent_n_a[0]:.  
+00037360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037370: 2020 7061 7265 6e74 5f6e 5f61 5b30 5d3d    parent_n_a[0]=
+00037380: 277b 7d27 2e66 6f72 6d61 7428 696e 7428  '{}'.format(int(
+00037390: 7061 7265 6e74 5f6e 5f61 5b30 5d29 2b6e  parent_n_a[0])+n
+000373a0: 6577 5f70 290a 2020 2020 2020 2020 2020  ew_p).          
+000373b0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+000373c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000373d0: 7061 7265 6e74 5f6e 5f61 5b30 5d3d 277b  parent_n_a[0]='{
+000373e0: 7d27 2e66 6f72 6d61 7428 6e65 775f 7029  }'.format(new_p)
+000373f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00037400: 2069 6620 6c65 6e28 7061 7265 6e74 5f6e   if len(parent_n
+00037410: 5f61 2920 3d3d 2032 2061 6e64 2070 6172  _a) == 2 and par
+00037420: 656e 745f 6e5f 615b 315d 3a0a 2020 2020  ent_n_a[1]:.    
+00037430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037440: 7061 7265 6e74 5f6e 5f61 5b31 5d3d 277b  parent_n_a[1]='{
+00037450: 7d27 2e66 6f72 6d61 7428 696e 7428 7061  }'.format(int(pa
+00037460: 7265 6e74 5f6e 5f61 5b31 5d29 2b6e 6577  rent_n_a[1])+new
+00037470: 5f70 290a 2020 2020 2020 2020 2020 2020  _p).            
+00037480: 2020 2020 7061 7265 6e74 5f6e 3d27 2d27      parent_n='-'
+00037490: 2e6a 6f69 6e28 7061 7265 6e74 5f6e 5f61  .join(parent_n_a
+000374a0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+000374b0: 6966 2069 7369 6e73 7461 6e63 6528 7061  if isinstance(pa
+000374c0: 7265 6e74 5f6e 2c69 6e74 293a 0a20 2020  rent_n,int):.   
+000374d0: 2020 2020 2020 2020 2020 2020 2070 6172               par
+000374e0: 656e 745f 6e3d 7061 7265 6e74 5f6e 2b6e  ent_n=parent_n+n
+000374f0: 6577 5f70 0a20 2020 2020 2020 2069 6620  ew_p.        if 
+00037500: 6361 6c6c 6572 5f6e 616d 6520 6f72 2063  caller_name or c
+00037510: 616c 6c65 725f 6967 6e6f 7265 3a0a 2020  aller_ignore:.  
+00037520: 2020 2020 2020 2020 2020 6172 673d 7b27            arg={'
+00037530: 7061 7265 6e74 273a 7061 7265 6e74 5f6e  parent':parent_n
+00037540: 7d0a 2020 2020 2020 2020 2020 2020 6966  }.            if
+00037550: 2063 616c 6c65 725f 6465 7461 696c 3a0a   caller_detail:.
+00037560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037570: 6172 672e 7570 6461 7465 287b 276c 696e  arg.update({'lin
+00037580: 655f 6e75 6d62 6572 273a 5472 7565 2c27  e_number':True,'
+00037590: 6675 6c6c 5f66 696c 656e 616d 6527 3a63  full_filename':c
+000375a0: 616c 6c65 725f 6675 6c6c 5f66 696c 656e  aller_full_filen
+000375b0: 616d 652c 2766 696c 656e 616d 6527 3a54  ame,'filename':T
+000375c0: 7275 652c 2761 7267 7327 3a54 7275 657d  rue,'args':True}
+000375d0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+000375e0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+000375f0: 2020 2020 6172 675b 276c 696e 655f 6e75      arg['line_nu
+00037600: 6d62 6572 275d 3d63 616c 6c65 725f 6c69  mber']=caller_li
+00037610: 6e65 5f6e 756d 6265 720a 2020 2020 2020  ne_number.      
+00037620: 2020 2020 2020 2020 2020 6172 675b 2766            arg['f
+00037630: 756c 6c5f 6669 6c65 6e61 6d65 275d 3d63  ull_filename']=c
+00037640: 616c 6c65 725f 6675 6c6c 5f66 696c 656e  aller_full_filen
+00037650: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
+00037660: 2020 2020 6172 675b 2761 7267 7327 5d3d      arg['args']=
+00037670: 6361 6c6c 6572 5f61 7267 730a 2020 2020  caller_args.    
+00037680: 2020 2020 2020 2020 2020 2020 6172 675b              arg[
+00037690: 2766 696c 656e 616d 6527 5d3d 6361 6c6c  'filename']=call
+000376a0: 6572 5f66 696c 656e 616d 650a 2020 2020  er_filename.    
+000376b0: 2020 2020 2020 2020 6966 2063 616c 6c65          if calle
+000376c0: 725f 7472 6565 3a0a 2020 2020 2020 2020  r_tree:.        
+000376d0: 2020 2020 2020 2020 6172 672e 7570 6461          arg.upda
+000376e0: 7465 287b 2768 6973 746f 7279 273a 5472  te({'history':Tr
+000376f0: 7565 2c27 7472 6565 273a 5472 7565 7d29  ue,'tree':True})
+00037700: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00037710: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00037720: 2020 2061 7267 5b27 6869 7374 6f72 7927     arg['history'
+00037730: 5d3d 6361 6c6c 6572 5f68 6973 746f 7279  ]=caller_history
+00037740: 0a20 2020 2020 2020 2020 2020 2063 616c  .            cal
+00037750: 6c5f 6e61 6d65 3d46 756e 6374 696f 6e4e  l_name=FunctionN
+00037760: 616d 6528 2a2a 6172 6729 0a20 2020 2020  ame(**arg).     
+00037770: 2020 2020 2020 2069 6620 6361 6c6c 5f6e         if call_n
+00037780: 616d 653a 0a20 2020 2020 2020 2020 2020  ame:.           
+00037790: 2020 2020 2023 2069 6620 6c69 6e65 5f6e       # if line_n
+000377a0: 756d 6265 7220 616e 6420 6669 6c65 6e61  umber and filena
+000377b0: 6d65 2074 6865 6e20 7072 696e 7420 6c6f  me then print lo
+000377c0: 6767 696e 6720 6174 206e 6578 7420 6c69  gging at next li
+000377d0: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
+000377e0: 2020 2023 2069 6620 6461 7465 5f66 6f72     # if date_for
+000377f0: 6d61 7420 7468 656e 206c 6f67 6769 6e67  mat then logging
+00037800: 2773 2069 6e74 726f 206c 656e 6774 6820  's intro length 
+00037810: 7769 6c6c 2062 6520 6461 7465 2066 6f72  will be date for
+00037820: 6d61 740a 2020 2020 2020 2020 2020 2020  mat.            
+00037830: 2020 2020 2320 6966 206e 6f74 2064 6174      # if not dat
+00037840: 655f 666f 726d 6174 2074 6865 6e20 6c6f  e_format then lo
+00037850: 6767 696e 2773 2069 6e74 726f 206c 656e  ggin's intro len
+00037860: 6774 6820 7769 6c6c 2062 6520 7374 6570  gth will be step
+00037870: 7069 6e67 206c 656e 6774 680a 2020 2020  ping length.    
+00037880: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00037890: 7369 6e73 7461 6e63 6528 6361 6c6c 5f6e  sinstance(call_n
+000378a0: 616d 652c 7374 7229 3a20 6361 6c6c 5f6e  ame,str): call_n
+000378b0: 616d 653d 5b63 616c 6c5f 6e61 6d65 5d0a  ame=[call_name].
+000378c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000378d0: 6966 2063 616c 6c65 725f 7472 6565 206f  if caller_tree o
+000378e0: 7220 6361 6c6c 6572 5f68 6973 746f 7279  r caller_history
+000378f0: 3a20 6361 6c6c 5f6e 616d 653d 6361 6c6c  : call_name=call
+00037900: 5f6e 616d 652b 5b27 275d 2069 6620 6461  _name+[''] if da
+00037910: 7465 5f66 6f72 6d61 7420 656c 7365 2063  te_format else c
+00037920: 616c 6c5f 6e61 6d65 2b5b 2720 275d 0a20  all_name+[' ']. 
+00037930: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00037940: 6e74 726f 5f6d 7367 3d69 6e74 726f 5f6d  ntro_msg=intro_m
+00037950: 7367 2b57 7261 7053 7472 696e 6728 4a6f  sg+WrapString(Jo
+00037960: 696e 2863 616c 6c5f 6e61 6d65 2c27 5c6e  in(call_name,'\n
+00037970: 2729 2c66 7370 6163 653d 302c 206e 7370  '),fspace=0, nsp
+00037980: 6163 653d 6c65 6e28 696e 7472 6f5f 6d73  ace=len(intro_ms
+00037990: 6729 2c6d 6f64 653d 2773 7061 6365 272c  g),mode='space',
+000379a0: 6967 6e6f 7265 5f65 6d70 7479 5f65 6e64  ignore_empty_end
+000379b0: 6c69 6e65 3d46 616c 7365 2920 2b20 273a  line=False) + ':
+000379c0: 2027 0a20 2020 2020 2020 2020 2020 2020   '.             
+000379d0: 2020 2069 6e74 726f 5f6c 656e 3d69 6e74     intro_len=int
+000379e0: 726f 5f6c 656e 2b6c 656e 2863 616c 6c5f  ro_len+len(call_
+000379f0: 6e61 6d65 5b2d 315d 292b 320a 2020 2020  name[-1])+2.    
+00037a00: 2020 2020 6966 2054 7970 6528 696e 7472      if Type(intr
+00037a10: 6f2c 2773 7472 2729 2061 6e64 2069 6e74  o,'str') and int
+00037a20: 726f 3a0a 2020 2020 2020 2020 2020 2020  ro:.            
+00037a30: 696e 7472 6f5f 6d73 673d 696e 7472 6f5f  intro_msg=intro_
+00037a40: 6d73 672b 696e 7472 6f2b 273a 2027 0a20  msg+intro+': '. 
+00037a50: 2020 2020 2020 2020 2020 2069 6e74 726f             intro
+00037a60: 5f6c 656e 3d69 6e74 726f 5f6c 656e 2b6c  _len=intro_len+l
+00037a70: 656e 2869 6e74 726f 292b 320a 0a20 2020  en(intro)+2..   
+00037a80: 2023 204d 616b 6520 696e 7075 7420 6461   # Make input da
+00037a90: 7461 2074 6f20 6120 7374 7269 6e67 206d  ta to a string m
+00037aa0: 7367 200a 2020 2020 6966 2073 7461 7274  sg .    if start
+00037ab0: 5f6e 6577 6c69 6e65 3a0a 2020 2020 2020  _newline:.      
+00037ac0: 2020 6966 206c 656e 286d 7367 2920 616e    if len(msg) an
+00037ad0: 6420 6973 696e 7374 616e 6365 286d 7367  d isinstance(msg
+00037ae0: 5b30 5d2c 7374 7229 2061 6e64 206c 656e  [0],str) and len
+00037af0: 286d 7367 5b30 5d29 2061 6e64 206d 7367  (msg[0]) and msg
+00037b00: 5b30 5d5b 305d 203d 3d20 275c 6e27 3a20  [0][0] == '\n': 
+00037b10: 6d73 675b 305d 3d6d 7367 5b30 5d5b 313a  msg[0]=msg[0][1:
+00037b20: 5d0a 2020 2020 2020 2020 6966 2073 7461  ].        if sta
+00037b30: 7274 5f6e 6577 6c69 6e65 203d 3d20 2761  rt_newline == 'a
+00037b40: 7574 6f27 3a0a 2020 2020 2020 2020 2020  uto':.          
+00037b50: 2020 6966 2070 7269 6e74 665f 6e65 776c    if printf_newl
+00037b60: 696e 655f 696e 666f 2e47 6574 2864 7370  ine_info.Get(dsp
+00037b70: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00037b80: 2020 2073 7461 7274 5f6e 6577 6c69 6e65     start_newline
+00037b90: 3d27 5c6e 270a 2020 2020 2020 2020 2020  ='\n'.          
+00037ba0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00037bb0: 2020 2020 2020 2020 7374 6172 745f 6e65          start_ne
+00037bc0: 776c 696e 653d 2727 0a20 2020 206d 7367  wline=''.    msg
+00037bd0: 5f73 7472 3d6d 7367 5f6d 616b 6572 282a  _str=msg_maker(*
+00037be0: 6d73 672c 6d73 675f 7370 6c69 743d 6d73  msg,msg_split=ms
+00037bf0: 675f 7370 6c69 742c 696e 7472 6f5f 6c65  g_split,intro_le
+00037c00: 6e3d 696e 7472 6f5f 6c65 6e2c 696e 7472  n=intro_len,intr
+00037c10: 6f5f 6d73 673d 2727 2069 6620 6e6f 5f69  o_msg='' if no_i
+00037c20: 6e74 726f 2069 7320 4e6f 6e65 2065 6c73  ntro is None els
+00037c30: 6520 696e 7472 6f5f 6d73 6729 0a23 2044  e intro_msg).# D
+00037c40: 4f6e 2774 206e 6565 6420 6265 6c6f 7720  On't need below 
+00037c50: 636f 6465 0a23 2020 2020 6966 206e 6577  code.#    if new
+00037c60: 5f6c 696e 653a 0a23 2020 2020 2020 2020  _line:.#        
+00037c70: 6966 206d 7367 5f73 7472 2061 6e64 206d  if msg_str and m
+00037c80: 7367 5f73 7472 5b2d 315d 203d 3d20 275c  sg_str[-1] == '\
+00037c90: 6e27 3a20 6d73 675f 7374 723d 6d73 675f  n': msg_str=msg_
+00037ca0: 7374 725b 3a2d 315d 0a0a 2020 2020 2323  str[:-1]..    ##
+00037cb0: 2069 6620 656e 6420 6f66 206c 696e 6520   if end of line 
+00037cc0: 6861 7665 206e 6f20 6e65 776c 696e 652c  have no newline,
+00037cd0: 2062 7574 2069 7420 6861 7320 696e 7472   but it has intr
+00037ce0: 6f20 7468 656e 2061 6464 696e 6720 7374  o then adding st
+00037cf0: 6172 745f 6e65 776c 696e 650a 2020 2020  art_newline.    
+00037d00: 2369 6620 696e 7472 6f5f 6d73 6720 616e  #if intro_msg an
+00037d10: 6420 6e6f 7420 6e6f 5f73 7461 7274 5f6e  d not no_start_n
+00037d20: 6577 6c69 6e65 3a0a 2020 2020 2320 2020  ewline:.    #   
+00037d30: 2069 6620 7072 696e 7466 5f6e 6577 6c69   if printf_newli
+00037d40: 6e65 5f69 6e66 6f2e 4765 7428 6473 7029  ne_info.Get(dsp)
+00037d50: 3a20 0a20 2020 2023 2020 2020 2020 2020  : .    #        
+00037d60: 7374 6172 745f 6e65 776c 696e 653d 275c  start_newline='\
+00037d70: 6e27 0a0a 2020 2020 2344 4247 204d 4f44  n'..    #DBG MOD
+00037d80: 4520 666f 7220 7072 696e 7469 6e67 0a20  E for printing. 
+00037d90: 2020 2073 6372 5f64 6267 5f70 7269 6e74     scr_dbg_print
+00037da0: 3d46 616c 7365 0a20 2020 2069 6620 7363  =False.    if sc
+00037db0: 725f 6462 6720 6973 2054 7275 653a 0a20  r_dbg is True:. 
+00037dc0: 2020 2020 2020 2069 6620 7363 725f 6462         if scr_db
+00037dd0: 675f 636f 6e64 6974 696f 6e20 6973 204e  g_condition is N
+00037de0: 6f6e 6520 6f72 206d 7367 5f73 7472 203d  one or msg_str =
+00037df0: 3d20 7363 725f 6462 675f 636f 6e64 6974  = scr_dbg_condit
+00037e00: 696f 6e3a 0a20 2020 2020 2020 2020 2020  ion:.           
+00037e10: 2073 6372 5f64 6267 5f70 7269 6e74 3d54   scr_dbg_print=T
+00037e20: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+00037e30: 6172 673d 7b27 7061 7265 6e74 273a 2731  arg={'parent':'1
+00037e40: 2d39 272c 276c 696e 655f 6e75 6d62 6572  -9','line_number
+00037e50: 273a 5472 7565 2c27 6669 6c65 6e61 6d65  ':True,'filename
+00037e60: 273a 5472 7565 2c27 6172 6773 273a 4661  ':True,'args':Fa
+00037e70: 6c73 652c 2768 6973 746f 7279 273a 5472  lse,'history':Tr
+00037e80: 7565 2c27 7472 6565 273a 5472 7565 7d0a  ue,'tree':True}.
+00037e90: 2020 2020 2020 2020 2020 2020 6361 6c6c              call
+00037ea0: 5f6e 616d 653d 4675 6e63 7469 6f6e 4e61  _name=FunctionNa
+00037eb0: 6d65 282a 2a61 7267 290a 2020 2020 2020  me(**arg).      
+00037ec0: 2020 2020 2020 7072 696e 7428 272d 2d2d        print('---
+00037ed0: 2d2d 2d2d 2d2d 2d2d 2d2d 4655 4e43 5449  ----------FUNCTI
+00037ee0: 4f4e 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ON--------------
+00037ef0: 2d2d 2d2d 2d2d 2729 0a20 2020 2020 2020  ------').       
+00037f00: 2020 2020 2070 7269 6e74 284a 6f69 6e28       print(Join(
+00037f10: 6361 6c6c 5f6e 616d 652c 275c 6e27 2929  call_name,'\n'))
+00037f20: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+00037f30: 6e74 2827 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  nt('------------
+00037f40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00037f50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d27 290a  -------------').
+00037f60: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00037f70: 7428 276c 6f67 2020 2020 2020 2020 2020  t('log          
+00037f80: 2020 2020 2020 2020 203a 7b7d 2028 6675           :{} (fu
+00037f90: 6e63 7469 6f6e 3a7b 7d3a 7b7d 2927 2e66  nction:{}:{})'.f
+00037fa0: 6f72 6d61 7428 6c6f 672c 4973 4675 6e63  ormat(log,IsFunc
+00037fb0: 7469 6f6e 286c 6f67 292c 6f70 7473 2929  tion(log),opts))
+00037fc0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+00037fd0: 6e74 2827 6c6f 6766 696c 6520 2020 2020  nt('logfile     
+00037fe0: 2020 2020 2020 2020 2020 3a7b 7d27 2e66            :{}'.f
+00037ff0: 6f72 6d61 7428 6c6f 6766 696c 6529 290a  ormat(logfile)).
+00038000: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00038010: 7428 276e 6577 6c69 6e65 2069 6e66 6f20  t('newline info 
+00038020: 2020 2020 2020 2020 203a 7b7d 272e 666f           :{}'.fo
+00038030: 726d 6174 2870 7269 6e74 665f 6e65 776c  rmat(printf_newl
+00038040: 696e 655f 696e 666f 2e64 6174 6129 290a  ine_info.data)).
+00038050: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00038060: 7428 2766 6f72 6365 206e 6f20 7374 6172  t('force no star
+00038070: 7420 6e65 776c 696e 653a 7b7d 272e 666f  t newline:{}'.fo
+00038080: 726d 6174 286e 6f5f 7374 6172 745f 6e65  rmat(no_start_ne
+00038090: 776c 696e 6529 290a 2020 2020 2020 2020  wline)).        
+000380a0: 2020 2020 7072 696e 7428 276e 6577 6c69      print('newli
+000380b0: 6e65 2020 2020 2020 2020 2020 2020 2020  ne              
+000380c0: 203a 2864 6972 6563 743a 7b7d 2c73 7461   :(direct:{},sta
+000380d0: 7274 3a7b 7d2c 656e 643a 7b7d 2927 2e66  rt:{},end:{})'.f
+000380e0: 6f72 6d61 7428 6469 7265 6374 2c54 7275  ormat(direct,Tru
+000380f0: 6520 6966 2073 7461 7274 5f6e 6577 6c69  e if start_newli
+00038100: 6e65 2065 6c73 6520 4661 6c73 652c 5472  ne else False,Tr
+00038110: 7565 2069 6620 6e65 775f 6c69 6e65 2065  ue if new_line e
+00038120: 6c73 6520 4661 6c73 6529 290a 2020 2020  lse False)).    
+00038130: 2020 2020 2020 2020 7072 696e 7428 2769          print('i
+00038140: 676e 6f72 655f 656d 7074 7920 2020 2020  gnore_empty     
+00038150: 2020 2020 203a 7b7d 272e 666f 726d 6174       :{}'.format
+00038160: 2869 676e 6f72 655f 656d 7074 7929 290a  (ignore_empty)).
+00038170: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00038180: 7428 276d 6573 7361 6765 2020 2020 2020  t('message      
+00038190: 2020 2020 2020 2020 203a 5b7b 7d5d 272e           :[{}]'.
+000381a0: 666f 726d 6174 286d 7367 2929 0a20 2020  format(msg)).   
+000381b0: 2020 2020 2020 2020 2070 7269 6e74 2827           print('
+000381c0: 696e 7472 6f20 2020 2020 2020 2020 2020  intro           
+000381d0: 2020 2020 2020 3a5b 7b7d 5d27 2e66 6f72        :[{}]'.for
+000381e0: 6d61 7428 696e 7472 6f5f 6d73 6729 290a  mat(intro_msg)).
+000381f0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00038200: 7428 276c 6f67 206c 6576 656c 2020 2020  t('log level    
+00038210: 2020 2020 2020 2020 203a 7b7d 203c 207b           :{} < {
+00038220: 7d20 2870 7269 6e74 3a7b 7d29 272e 666f  } (print:{})'.fo
+00038230: 726d 6174 2870 7269 6e74 665f 6c6f 675f  rmat(printf_log_
+00038240: 6261 7365 2c6c 6f67 5f6c 6576 656c 2c20  base,log_level, 
+00038250: 7072 696e 7466 5f6c 6f67 5f62 6173 6520  printf_log_base 
+00038260: 3c20 6c6f 675f 6c65 7665 6c20 6966 2049  < log_level if I
+00038270: 7349 6e74 2870 7269 6e74 665f 6c6f 675f  sInt(printf_log_
+00038280: 6261 7365 2920 616e 6420 4973 496e 7428  base) and IsInt(
+00038290: 6c6f 675f 6c65 7665 6c29 2065 6c73 6520  log_level) else 
+000382a0: 5472 7565 2929 0a20 2020 2020 2020 2020  True)).         
+000382b0: 2020 2070 7269 6e74 2827 6265 666f 7265     print('before
+000382c0: 206d 6f64 6520 7072 696e 7420 2020 2020   mode print     
+000382d0: 3a5b 7b7d 5d27 2e66 6f72 6d61 7428 7374  :[{}]'.format(st
+000382e0: 6172 745f 6e65 776c 696e 652b 6d73 675f  art_newline+msg_
+000382f0: 7374 722b 6e65 775f 6c69 6e65 2929 0a0a  str+new_line))..
+00038300: 2020 2020 2320 5361 7665 2074 6f20 6669      # Save to fi
+00038310: 6c65 206f 7220 7072 696e 7420 746f 2073  le or print to s
+00038320: 6372 6565 6e20 6669 6c74 6572 2077 6974  creen filter wit
+00038330: 6820 6c6f 675f 6c65 7665 6c20 616e 6420  h log_level and 
+00038340: 616c 7265 6164 7920 6c6f 6767 696e 6720  already logging 
+00038350: 7769 7468 206c 6f67 2066 756e 6374 696f  with log functio
+00038360: 6e20 6f72 206e 6f74 2e0a 2020 2020 6966  n or not..    if
+00038370: 2027 6427 2069 6e20 6473 7020 616e 6420   'd' in dsp and 
+00038380: 4973 496e 7428 7072 696e 7466 5f6c 6f67  IsInt(printf_log
+00038390: 5f62 6173 6529 2061 6e64 2049 7349 6e74  _base) and IsInt
+000383a0: 286c 6f67 5f6c 6576 656c 293a 0a20 2020  (log_level):.   
+000383b0: 2020 2020 2069 6620 7072 696e 7466 5f6c       if printf_l
+000383c0: 6f67 5f62 6173 6520 3c20 6c6f 675f 6c65  og_base < log_le
+000383d0: 7665 6c3a 0a20 2020 2020 2020 2020 2020  vel:.           
+000383e0: 2072 6574 7572 6e0a 2020 2020 2320 6966   return.    # if
+000383f0: 206a 7573 7420 7768 6974 6573 7061 6365   just whitespace
+00038400: 2074 6865 6e20 6e6f 7420 6e65 776c 696e   then not newlin
+00038410: 652c 2073 6f6d 6574 6869 6e67 2065 6c73  e, something els
+00038420: 6520 7769 7468 2064 6174 6120 7468 656e  e with data then
+00038430: 2077 6861 7420 6576 6572 0a20 2020 2023   what ever.    #
+00038440: 2053 6176 6520 6d73 6720 746f 206c 6f67   Save msg to log
+00038450: 6669 6c65 2077 6865 6e20 6465 6669 6e65  file when define
+00038460: 6420 6c6f 6766 696c 650a 2020 2020 6966  d logfile.    if
+00038470: 206c 6f67 6669 6c65 3a20 2320 616c 6c20   logfile: # all 
+00038480: 6d6f 6465 2063 616e 2028 6576 656e 2069  mode can (even i
+00038490: 6620 642c 2066 2c20 6929 206a 7573 7420  f d, f, i) just 
+000384a0: 6c6f 6769 6e67 2074 6f20 6669 6c65 2e0a  loging to file..
+000384b0: 2020 2020 2020 2020 666f 7220 6969 2069          for ii i
+000384c0: 6e20 6c6f 6766 696c 653a 0a20 2020 2020  n logfile:.     
+000384d0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+000384e0: 616e 6365 2869 692c 7374 7229 2061 6e64  ance(ii,str) and
+000384f0: 2069 693a 0a20 2020 2020 2020 2020 2020   ii:.           
+00038500: 2020 2020 2069 695f 643d 6f73 2e70 6174       ii_d=os.pat
+00038510: 682e 6469 726e 616d 6528 6969 290a 2020  h.dirname(ii).  
+00038520: 2020 2020 2020 2020 2020 2020 2020 6969                ii
+00038530: 5f64 3d69 695f 6420 6966 2069 695f 6420  _d=ii_d if ii_d 
+00038540: 656c 7365 2027 2e27 2023 2049 6620 6a75  else '.' # If ju
+00038550: 7374 2066 696c 656e 616d 6520 7468 656e  st filename then
+00038560: 2064 6972 6563 746f 7279 2074 6f20 2e28   directory to .(
+00038570: 6375 7272 656e 7420 6469 7265 6374 6f72  current director
+00038580: 7929 0a20 2020 2020 2020 2020 2020 2020  y).             
+00038590: 2020 2069 6620 6969 2061 6e64 206f 732e     if ii and os.
+000385a0: 7061 7468 2e69 7364 6972 2869 695f 6429  path.isdir(ii_d)
+000385b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000385c0: 2020 2020 2020 6966 206e 6f74 206d 7367        if not msg
+000385d0: 5f73 7472 3a0a 2020 2020 2020 2020 2020  _str:.          
+000385e0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000385f0: 2064 6267 5f65 6d70 7479 2061 6e64 206e   dbg_empty and n
+00038600: 6f74 2069 676e 6f72 655f 656d 7074 793a  ot ignore_empty:
+00038610: 2020 2023 2049 676e 6f72 6520 656d 7074     # Ignore empt
+00038620: 7920 6461 7461 206f 6e20 7363 7265 656e  y data on screen
+00038630: 2077 2f6f 2064 6562 7567 6769 6e67 200a   w/o debugging .
+00038640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038650: 2020 2020 2020 2020 2020 2020 7061 7265              pare
+00038660: 6e74 5f6e 3d6f 7074 732e 6765 7428 2763  nt_n=opts.get('c
+00038670: 616c 6c65 725f 7061 7265 6e74 2729 2069  aller_parent') i
+00038680: 6620 6973 696e 7374 616e 6365 286f 7074  f isinstance(opt
+00038690: 732e 6765 7428 2763 616c 6c65 725f 7061  s.get('caller_pa
+000386a0: 7265 6e74 2729 2c69 6e74 2920 656c 7365  rent'),int) else
+000386b0: 2031 0a20 2020 2020 2020 2020 2020 2020   1.             
+000386c0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+000386d0: 7267 3d7b 2770 6172 656e 7427 3a70 6172  rg={'parent':par
+000386e0: 656e 745f 6e2c 276c 696e 655f 6e75 6d62  ent_n,'line_numb
+000386f0: 6572 273a 5472 7565 2c27 6669 6c65 6e61  er':True,'filena
+00038700: 6d65 273a 5472 7565 2c27 6172 6773 273a  me':True,'args':
+00038710: 4661 6c73 652c 2768 6973 746f 7279 273a  False,'history':
+00038720: 4661 6c73 652c 2774 7265 6527 3a46 616c  False,'tree':Fal
+00038730: 7365 7d0a 2020 2020 2020 2020 2020 2020  se}.            
+00038740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038750: 6361 6c6c 5f6e 616d 653d 4675 6e63 7469  call_name=Functi
+00038760: 6f6e 4e61 6d65 282a 2a61 7267 290a 2020  onName(**arg).  
+00038770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038780: 2020 2020 2020 2020 2020 6d73 675f 7374            msg_st
+00038790: 723d 696e 7472 6f5f 6d73 6720 2b20 436f  r=intro_msg + Co
+000387a0: 6c6f 7253 7472 2857 7261 7053 7472 696e  lorStr(WrapStrin
+000387b0: 6728 275b 2a2a 2045 6d70 7479 2d44 6174  g('[** Empty-Dat
+000387c0: 6120 2a2a 5d20 287b 7d29 272e 666f 726d  a **] ({})'.form
+000387d0: 6174 2863 616c 6c5f 6e61 6d65 292c 6673  at(call_name),fs
+000387e0: 7061 6365 3d69 6e74 726f 5f6c 656e 2c20  pace=intro_len, 
+000387f0: 6e73 7061 6365 3d69 6e74 726f 5f6c 656e  nspace=intro_len
+00038800: 2c6d 6f64 653d 2773 7061 6365 2729 2c2a  ,mode='space'),*
+00038810: 2a6f 7074 7329 0a20 2020 2020 2020 2020  *opts).         
+00038820: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00038830: 7420 6d73 675f 7374 723a 2072 6574 7572  t msg_str: retur
+00038840: 6e0a 0a20 2020 2020 2020 2020 2020 2020  n..             
+00038850: 2020 2020 2020 2023 2069 6620 656e 6420         # if end 
+00038860: 6f66 206c 696e 6520 6861 7665 206e 6f20  of line have no 
+00038870: 6e65 776c 696e 652c 2062 7574 2069 7420  newline, but it 
+00038880: 6861 7320 696e 7472 6f20 7468 656e 2061  has intro then a
+00038890: 6464 696e 6720 7374 6172 745f 6e65 776c  dding start_newl
+000388a0: 696e 650a 2020 2020 2020 2020 2020 2020  ine.            
+000388b0: 2020 2020 2020 2020 6966 2069 6e74 726f          if intro
+000388c0: 5f6d 7367 2061 6e64 206e 6f74 206e 6f5f  _msg and not no_
+000388d0: 7374 6172 745f 6e65 776c 696e 653a 0a20  start_newline:. 
+000388e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000388f0: 2020 2020 2020 2069 6620 7072 696e 7466         if printf
+00038900: 5f6e 6577 6c69 6e65 5f69 6e66 6f2e 4765  _newline_info.Ge
+00038910: 7428 4279 7465 7328 6969 2929 3a20 0a20  t(Bytes(ii)): . 
+00038920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038930: 2020 2020 2020 2020 2020 2073 7461 7274             start
+00038940: 5f6e 6577 6c69 6e65 3d27 5c6e 270a 2020  _newline='\n'.  
+00038950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038960: 2020 6966 2073 6372 5f64 6267 5f70 7269    if scr_dbg_pri
+00038970: 6e74 3a0a 2020 2020 2020 2020 2020 2020  nt:.            
+00038980: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00038990: 7428 276d 6f64 6520 2020 2020 2020 2020  t('mode         
+000389a0: 2020 2020 2020 2020 203a 7b7d 2028 6265           :{} (be
+000389b0: 666f 7265 206e 6f20 6e65 776c 696e 653a  fore no newline:
+000389c0: 7b7d 2927 2e66 6f72 6d61 7428 6969 2c54  {})'.format(ii,T
+000389d0: 7275 6520 6966 2070 7269 6e74 665f 6e65  rue if printf_ne
+000389e0: 776c 696e 655f 696e 666f 2e47 6574 2842  wline_info.Get(B
+000389f0: 7974 6573 2869 6929 2920 656c 7365 2046  ytes(ii)) else F
+00038a00: 616c 7365 2929 0a20 2020 2020 2020 2020  alse)).         
+00038a10: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00038a20: 7269 6e74 2827 7570 6461 7465 6420 7374  rint('updated st
+00038a30: 6172 7420 6e65 776c 696e 6520 3a7b 7d27  art newline :{}'
+00038a40: 2e66 6f72 6d61 7428 5472 7565 2069 6620  .format(True if 
+00038a50: 7374 6172 745f 6e65 776c 696e 6520 656c  start_newline el
+00038a60: 7365 2046 616c 7365 2929 0a20 2020 2020  se False)).     
+00038a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038a80: 2020 2070 7269 6e74 2827 7072 696e 7420     print('print 
+00038a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038aa0: 3a5b 7b7d 5d27 2e66 6f72 6d61 7428 7374  :[{}]'.format(st
+00038ab0: 6172 745f 6e65 776c 696e 652b 6d73 675f  art_newline+msg_
+00038ac0: 7374 722b 6e65 775f 6c69 6e65 2929 0a20  str+new_line)). 
+00038ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038ae0: 2020 2020 2020 2070 7269 6e74 2827 2d2d         print('--
+00038af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038b10: 2d2d 2d2d 2d2d 2d27 290a 2020 2020 2020  -------').      
+00038b20: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
+00038b30: 675f 703d 5472 7565 2020 2320 7772 6974  g_p=True  # writ
+00038b40: 696e 6720 746f 206c 6f67 5f66 696c 650a  ing to log_file.
+00038b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038b60: 2020 2020 7769 7468 206f 7065 6e28 6969      with open(ii
+00038b70: 2c27 612b 2729 2061 7320 663a 0a20 2020  ,'a+') as f:.   
+00038b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038b90: 2020 2020 2066 2e77 7269 7465 2873 7461       f.write(sta
+00038ba0: 7274 5f6e 6577 6c69 6e65 2b6d 7367 5f73  rt_newline+msg_s
+00038bb0: 7472 2b6e 6577 5f6c 696e 6529 0a20 2020  tr+new_line).   
+00038bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038bd0: 2069 6620 6e65 775f 6c69 6e65 3a0a 2020   if new_line:.  
+00038be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038bf0: 2020 2020 2020 7072 696e 7466 5f6e 6577        printf_new
+00038c00: 6c69 6e65 5f69 6e66 6f2e 4465 6c28 4279  line_info.Del(By
+00038c10: 7465 7328 6969 2929 0a20 2020 2020 2020  tes(ii)).       
+00038c20: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00038c30: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00038c40: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00038c50: 665f 6e65 776c 696e 655f 696e 666f 2e50  f_newline_info.P
+00038c60: 7574 2842 7974 6573 2869 6929 2c54 7275  ut(Bytes(ii),Tru
+00038c70: 6529 0a20 2020 2069 6620 6967 6e6f 7265  e).    if ignore
+00038c80: 5f65 6d70 7479 2069 7320 5472 7565 2061  _empty is True a
+00038c90: 6e64 206e 6f74 206d 7367 5f73 7472 3a20  nd not msg_str: 
+00038ca0: 7265 7475 726e 2023 2049 676e 6f72 6520  return # Ignore 
+00038cb0: 656d 7074 7920 6461 7461 206f 6e20 7363  empty data on sc
+00038cc0: 7265 656e 0a20 2020 2023 2070 7269 6e74  reen.    # print
+00038cd0: 206d 7367 2074 6f20 7363 7265 656e 2077   msg to screen w
+00038ce0: 6865 6e20 6469 6420 6e6f 7420 646f 6e65  hen did not done
+00038cf0: 2077 6974 6820 6c6f 6766 696c 6520 6f72   with logfile or
+00038d00: 206c 6f67 2066 756e 6374 696f 6e0a 2020   log function.  
+00038d10: 2020 6966 2027 6527 2069 6e20 6473 703a    if 'e' in dsp:
+00038d20: 0a20 2020 2020 2020 2023 2069 6620 656e  .        # if en
+00038d30: 6420 6f66 206c 696e 6520 6861 7665 206e  d of line have n
+00038d40: 6f20 6e65 776c 696e 652c 2062 7574 2069  o newline, but i
+00038d50: 7420 6861 7320 696e 7472 6f20 7468 656e  t has intro then
+00038d60: 2061 6464 696e 6720 7374 6172 745f 6e65   adding start_ne
+00038d70: 776c 696e 650a 2020 2020 2020 2020 6966  wline.        if
+00038d80: 2069 6e74 726f 5f6d 7367 2061 6e64 206e   intro_msg and n
+00038d90: 6f74 206e 6f5f 7374 6172 745f 6e65 776c  ot no_start_newl
+00038da0: 696e 653a 0a20 2020 2020 2020 2020 2020  ine:.           
+00038db0: 2069 6620 7072 696e 7466 5f6e 6577 6c69   if printf_newli
+00038dc0: 6e65 5f69 6e66 6f2e 4765 7428 2765 2729  ne_info.Get('e')
+00038dd0: 3a20 0a20 2020 2020 2020 2020 2020 2020  : .             
+00038de0: 2020 2073 7461 7274 5f6e 6577 6c69 6e65     start_newline
+00038df0: 3d27 5c6e 270a 2020 2020 2020 2020 6966  ='\n'.        if
+00038e00: 2073 6372 5f64 6267 5f70 7269 6e74 3a0a   scr_dbg_print:.
+00038e10: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00038e20: 7428 276d 6f64 6520 2020 2020 2020 2020  t('mode         
+00038e30: 2020 2020 2020 2020 203a 7b7d 2028 6265           :{} (be
+00038e40: 666f 7265 206e 6f20 6e65 776c 696e 653a  fore no newline:
+00038e50: 7b7d 2927 2e66 6f72 6d61 7428 2765 272c  {})'.format('e',
+00038e60: 5472 7565 2069 6620 7072 696e 7466 5f6e  True if printf_n
+00038e70: 6577 6c69 6e65 5f69 6e66 6f2e 4765 7428  ewline_info.Get(
+00038e80: 2765 2729 2065 6c73 6520 4661 6c73 6529  'e') else False)
+00038e90: 290a 2020 2020 2020 2020 2020 2020 7072  ).            pr
+00038ea0: 696e 7428 2775 7064 6174 6564 2073 7461  int('updated sta
+00038eb0: 7274 206e 6577 6c69 6e65 203a 7b7d 272e  rt newline :{}'.
+00038ec0: 666f 726d 6174 2854 7275 6520 6966 2073  format(True if s
+00038ed0: 7461 7274 5f6e 6577 6c69 6e65 2065 6c73  tart_newline els
+00038ee0: 6520 4661 6c73 6529 290a 2020 2020 2020  e False)).      
+00038ef0: 2020 2020 2020 7072 696e 7428 2770 7269        print('pri
+00038f00: 6e74 2020 2020 2020 2020 2020 2020 2020  nt              
+00038f10: 2020 203a 5b7b 7d5d 272e 666f 726d 6174     :[{}]'.format
+00038f20: 2873 7461 7274 5f6e 6577 6c69 6e65 2b6d  (start_newline+m
+00038f30: 7367 5f73 7472 2b6e 6577 5f6c 696e 6529  sg_str+new_line)
+00038f40: 290a 2020 2020 2020 2020 2020 2020 7072  ).            pr
+00038f50: 696e 7428 272d 2d2d 2d2d 2d2d 2d2d 2d2d  int('-----------
+00038f60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038f70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2729  --------------')
+00038f80: 0a20 2020 2020 2020 2053 7464 4572 7228  .        StdErr(
+00038f90: 7374 6172 745f 6e65 776c 696e 652b 6d73  start_newline+ms
+00038fa0: 675f 7374 722b 6e65 775f 6c69 6e65 290a  g_str+new_line).
+00038fb0: 2020 2020 2020 2020 7072 696e 7466 5f6e          printf_n
+00038fc0: 6577 6c69 6e65 5f69 6e66 6f2e 5075 7428  ewline_info.Put(
+00038fd0: 2765 272c 4661 6c73 6520 6966 206e 6577  'e',False if new
+00038fe0: 5f6c 696e 6520 656c 7365 2054 7275 6529  _line else True)
+00038ff0: 0a20 2020 2065 6c69 6620 2763 2720 696e  .    elif 'c' in
+00039000: 2064 7370 3a20 2344 6973 706c 6179 2074   dsp: #Display t
+00039010: 6f20 636f 6e73 6f6c 6520 2869 7420 616c  o console (it al
+00039020: 736f 2077 6f72 6b20 7769 7468 2052 6f62  so work with Rob
+00039030: 6f74 2046 7261 6d65 776f 726b 290a 2020  ot Framework).  
+00039040: 2020 2020 2020 7072 696e 7428 7374 6172        print(star
+00039050: 745f 6e65 776c 696e 652b 6d73 675f 7374  t_newline+msg_st
+00039060: 722b 6e65 775f 6c69 6e65 2c65 6e64 3d27  r+new_line,end='
+00039070: 272c 6669 6c65 3d73 7973 2e5f 5f73 7464  ',file=sys.__std
+00039080: 6f75 745f 5f29 0a20 2020 2065 6c69 6620  out__).    elif 
+00039090: 2773 2720 696e 2064 7370 206f 7220 2761  's' in dsp or 'a
+000390a0: 2720 696e 2064 7370 3a20 2320 5072 696e  ' in dsp: # Prin
+000390b0: 7420 6f75 7420 6f6e 2073 6372 6565 6e0a  t out on screen.
+000390c0: 2020 2020 2020 2020 6966 2069 6e74 726f          if intro
+000390d0: 5f6d 7367 2061 6e64 206e 6f74 206e 6f5f  _msg and not no_
+000390e0: 7374 6172 745f 6e65 776c 696e 653a 0a20  start_newline:. 
+000390f0: 2020 2020 2020 2020 2020 2069 6620 7072             if pr
+00039100: 696e 7466 5f6e 6577 6c69 6e65 5f69 6e66  intf_newline_inf
+00039110: 6f2e 4765 7428 2761 2720 6966 2027 6127  o.Get('a' if 'a'
+00039120: 2069 6e20 6473 7020 656c 7365 2027 7327   in dsp else 's'
+00039130: 293a 200a 2020 2020 2020 2020 2020 2020  ): .            
+00039140: 2020 2020 7374 6172 745f 6e65 776c 696e      start_newlin
+00039150: 653d 275c 6e27 0a20 2020 2020 2020 2069  e='\n'.        i
+00039160: 6620 7363 725f 6462 675f 7072 696e 743a  f scr_dbg_print:
+00039170: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+00039180: 6e74 2827 6d6f 6465 2020 2020 2020 2020  nt('mode        
+00039190: 2020 2020 2020 2020 2020 3a7b 7d20 2862            :{} (b
+000391a0: 6566 6f72 6520 6e6f 206e 6577 6c69 6e65  efore no newline
+000391b0: 3a7b 7d29 272e 666f 726d 6174 2827 6127  :{})'.format('a'
+000391c0: 2c54 7275 6520 6966 2070 7269 6e74 665f  ,True if printf_
+000391d0: 6e65 776c 696e 655f 696e 666f 2e47 6574  newline_info.Get
+000391e0: 2827 6127 2069 6620 2761 2720 696e 2064  ('a' if 'a' in d
+000391f0: 7370 2065 6c73 6520 2773 2729 2065 6c73  sp else 's') els
+00039200: 6520 4661 6c73 6529 290a 2020 2020 2020  e False)).      
+00039210: 2020 2020 2020 7072 696e 7428 2775 7064        print('upd
+00039220: 6174 6564 2073 7461 7274 206e 6577 6c69  ated start newli
+00039230: 6e65 203a 7b7d 272e 666f 726d 6174 2854  ne :{}'.format(T
+00039240: 7275 6520 6966 2073 7461 7274 5f6e 6577  rue if start_new
+00039250: 6c69 6e65 2065 6c73 6520 4661 6c73 6529  line else False)
+00039260: 290a 2020 2020 2020 2020 2020 2020 7072  ).            pr
+00039270: 696e 7428 2770 7269 6e74 2020 2020 2020  int('print      
+00039280: 2020 2020 2020 2020 2020 203a 5b7b 7d5d             :[{}]
+00039290: 272e 666f 726d 6174 2873 7461 7274 5f6e  '.format(start_n
+000392a0: 6577 6c69 6e65 2b6d 7367 5f73 7472 2b6e  ewline+msg_str+n
+000392b0: 6577 5f6c 696e 6529 290a 2020 2020 2020  ew_line)).      
+000392c0: 2020 2020 2020 7072 696e 7428 272d 2d2d        print('---
+000392d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000392e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000392f0: 2d2d 2d2d 2d2d 2729 0a20 2020 2020 2020  ------').       
+00039300: 2023 2069 6620 656e 6420 6f66 206c 696e   # if end of lin
+00039310: 6520 6861 7665 206e 6f20 6e65 776c 696e  e have no newlin
+00039320: 652c 2062 7574 2069 7420 6861 7320 696e  e, but it has in
+00039330: 7472 6f20 7468 656e 2061 6464 696e 6720  tro then adding 
+00039340: 7374 6172 745f 6e65 776c 696e 650a 2020  start_newline.  
+00039350: 2020 2020 2020 5374 644f 7574 2873 7461        StdOut(sta
+00039360: 7274 5f6e 6577 6c69 6e65 2b6d 7367 5f73  rt_newline+msg_s
+00039370: 7472 2b6e 6577 5f6c 696e 6529 0a20 2020  tr+new_line).   
+00039380: 2020 2020 2070 7269 6e74 665f 6e65 776c       printf_newl
+00039390: 696e 655f 696e 666f 2e50 7574 2827 6127  ine_info.Put('a'
+000393a0: 2069 6620 2761 2720 696e 2064 7370 2065   if 'a' in dsp e
+000393b0: 6c73 6520 2773 272c 4661 6c73 6520 6966  lse 's',False if
+000393c0: 206e 6577 5f6c 696e 6520 656c 7365 2054   new_line else T
+000393d0: 7275 6529 0a20 2020 2023 2072 6574 7572  rue).    # retur
+000393e0: 6e20 6d73 6720 7768 656e 2072 6571 7569  n msg when requi
+000393f0: 7265 6420 7265 7475 726e 2077 6861 7465  red return whate
+00039400: 7665 7220 636f 6e64 6974 696f 6e0a 2020  ver condition.  
+00039410: 2020 6966 2027 7227 2069 6e20 6473 703a    if 'r' in dsp:
+00039420: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00039430: 6d73 675f 7374 720a 0a64 6566 2043 6f6c  msg_str..def Col
+00039440: 6f72 5374 7228 6d73 672c 2a2a 6f70 7473  orStr(msg,**opts
+00039450: 293a 0a20 2020 2063 6f6c 6f72 3d6f 7074  ):.    color=opt
+00039460: 732e 6765 7428 2763 6f6c 6f72 272c 4e6f  s.get('color',No
+00039470: 6e65 290a 2020 2020 636f 6c6f 725f 6462  ne).    color_db
+00039480: 3d6f 7074 732e 6765 7428 2763 6f6c 6f72  =opts.get('color
+00039490: 5f64 6227 2c7b 2762 6c75 6527 3a20 3334  _db',{'blue': 34
+000394a0: 2c20 2767 7265 7927 3a20 3330 2c20 2779  , 'grey': 30, 'y
+000394b0: 656c 6c6f 7727 3a20 3333 2c20 2767 7265  ellow': 33, 'gre
+000394c0: 656e 273a 2033 322c 2027 6379 616e 273a  en': 32, 'cyan':
+000394d0: 2033 362c 2027 6d61 6765 6e74 6127 3a20   36, 'magenta': 
+000394e0: 3335 2c20 2777 6869 7465 273a 2033 372c  35, 'white': 37,
+000394f0: 2027 7265 6427 3a20 3331 7d29 0a20 2020   'red': 31}).   
+00039500: 2062 675f 636f 6c6f 723d 6f70 7473 2e67   bg_color=opts.g
+00039510: 6574 2827 6267 5f63 6f6c 6f72 272c 4e6f  et('bg_color',No
+00039520: 6e65 290a 2020 2020 6267 5f63 6f6c 6f72  ne).    bg_color
+00039530: 5f64 623d 6f70 7473 2e67 6574 2827 6267  _db=opts.get('bg
+00039540: 5f63 6f6c 6f72 5f64 6227 2c7b 2763 7961  _color_db',{'cya
+00039550: 6e27 3a20 3436 2c20 2777 6869 7465 273a  n': 46, 'white':
+00039560: 2034 372c 2027 6772 6579 273a 2034 302c   47, 'grey': 40,
+00039570: 2027 7965 6c6c 6f77 273a 2034 332c 2027   'yellow': 43, '
+00039580: 626c 7565 273a 2034 342c 2027 6d61 6765  blue': 44, 'mage
+00039590: 6e74 6127 3a20 3435 2c20 2772 6564 273a  nta': 45, 'red':
+000395a0: 2034 312c 2027 6772 6565 6e27 3a20 3432   41, 'green': 42
+000395b0: 7d29 0a20 2020 2061 7474 723d 6f70 7473  }).    attr=opts
+000395c0: 2e67 6574 2827 6174 7472 272c 4e6f 6e65  .get('attr',None
+000395d0: 290a 2020 2020 6174 7472 5f64 623d 6f70  ).    attr_db=op
+000395e0: 7473 2e67 6574 2827 6174 7472 5f64 6227  ts.get('attr_db'
+000395f0: 2c7b 2772 6576 6572 7365 273a 2037 2c20  ,{'reverse': 7, 
+00039600: 2762 6c69 6e6b 273a 2035 2c27 636f 6e63  'blink': 5,'conc
+00039610: 6561 6c65 6427 3a20 382c 2027 756e 6465  ealed': 8, 'unde
+00039620: 726c 696e 6527 3a20 342c 2027 626f 6c64  rline': 4, 'bold
+00039630: 273a 2031 7d29 0a20 2020 2069 6620 4973  ': 1}).    if Is
+00039640: 4e6f 6e65 286f 732e 6765 7465 6e76 2827  None(os.getenv('
+00039650: 414e 5349 5f43 4f4c 4f52 535f 4449 5341  ANSI_COLORS_DISA
+00039660: 424c 4544 2729 2920 616e 6420 2863 6f6c  BLED')) and (col
+00039670: 6f72 206f 7220 6267 5f63 6f6c 6f72 206f  or or bg_color o
+00039680: 7220 6174 7472 293a 0a20 2020 2020 2020  r attr):.       
+00039690: 2072 6573 6574 3d27 2727 5c30 3333 5b30   reset='''\033[0
+000396a0: 6d27 2727 0a20 2020 2020 2020 2066 6d74  m'''.        fmt
+000396b0: 5f6d 7367 3d27 2727 5c30 3333 5b25 646d  _msg='''\033[%dm
+000396c0: 2573 2727 270a 2020 2020 2020 2020 6966  %s'''.        if
+000396d0: 2063 6f6c 6f72 2061 6e64 2063 6f6c 6f72   color and color
+000396e0: 2069 6e20 636f 6c6f 725f 6462 3a0a 2020   in color_db:.  
+000396f0: 2020 2020 2020 2020 2020 6d73 673d 666d            msg=fm
+00039700: 745f 6d73 6720 2520 2863 6f6c 6f72 5f64  t_msg % (color_d
+00039710: 625b 636f 6c6f 725d 2c6d 7367 290a 2020  b[color],msg).  
+00039720: 2020 2020 2020 6966 2062 675f 636f 6c6f        if bg_colo
+00039730: 7220 616e 6420 6267 5f63 6f6c 6f72 2069  r and bg_color i
+00039740: 6e20 6267 5f63 6f6c 6f72 5f64 623a 0a20  n bg_color_db:. 
+00039750: 2020 2020 2020 2020 2020 206d 7367 3d66             msg=f
+00039760: 6d74 5f6d 7367 2025 2028 636f 6c6f 725f  mt_msg % (color_
+00039770: 6462 5b62 675f 636f 6c6f 725d 2c6d 7367  db[bg_color],msg
+00039780: 290a 2020 2020 2020 2020 6966 2061 7474  ).        if att
+00039790: 7220 616e 6420 6174 7472 2069 6e20 6174  r and attr in at
+000397a0: 7472 5f64 623a 0a20 2020 2020 2020 2020  tr_db:.         
+000397b0: 2020 206d 7367 3d66 6d74 5f6d 7367 2025     msg=fmt_msg %
+000397c0: 2028 6174 7472 5f64 625b 6174 7472 5d2c   (attr_db[attr],
+000397d0: 6d73 6729 0a20 2020 2020 2020 2072 6574  msg).        ret
+000397e0: 7572 6e20 6d73 672b 7265 7365 7420 2353  urn msg+reset #S
+000397f0: 7570 706f 7274 2043 6f6c 6f72 0a20 2020  upport Color.   
+00039800: 2072 6574 7572 6e20 6d73 6720 234e 6f74   return msg #Not
+00039810: 2073 7570 706f 7274 2063 6f6c 6f72 0a0a   support color..
+00039820: 6465 6620 436c 6561 6e41 6e73 6928 6461  def CleanAnsi(da
+00039830: 7461 293a 0a20 2020 2061 6e73 695f 6573  ta):.    ansi_es
+00039840: 6361 7065 203d 2072 652e 636f 6d70 696c  cape = re.compil
+00039850: 6528 7227 5c78 3142 5c5b 5b30 2d3f 5d2a  e(r'\x1B\[[0-?]*
+00039860: 5b20 2d2f 5d2a 5b40 2d7e 5d27 290a 2020  [ -/]*[@-~]').  
+00039870: 2020 6966 2054 7970 6528 6461 7461 2c28    if Type(data,(
+00039880: 2773 7472 272c 2762 7974 6573 2729 293a  'str','bytes')):
+00039890: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000398a0: 616e 7369 5f65 7363 6170 652e 7375 6228  ansi_escape.sub(
+000398b0: 2727 2c53 7472 2864 6174 6129 290a 2020  '',Str(data)).  
+000398c0: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+000398d0: 6528 6461 7461 2c28 6c69 7374 2c74 7570  e(data,(list,tup
+000398e0: 6c65 2929 3a0a 2020 2020 2020 2020 7265  le)):.        re
+000398f0: 7475 726e 205b 436c 6561 6e41 6e73 6928  turn [CleanAnsi(
+00039900: 6969 2920 666f 7220 6969 2069 6e20 6461  ii) for ii in da
+00039910: 7461 5d0a 2020 2020 656c 6966 2069 7369  ta].    elif isi
+00039920: 6e73 7461 6e63 6528 6461 7461 2c64 6963  nstance(data,dic
+00039930: 7429 3a0a 2020 2020 2020 2020 666f 7220  t):.        for 
+00039940: 6920 696e 2064 6174 613a 0a20 2020 2020  i in data:.     
+00039950: 2020 2020 2020 2064 6174 615b 695d 3d43         data[i]=C
+00039960: 6c65 616e 416e 7369 2864 6174 615b 695d  leanAnsi(data[i]
+00039970: 290a 2020 2020 7265 7475 726e 2064 6174  ).    return dat
+00039980: 610a 0a64 6566 2063 6c69 5f69 6e70 7574  a..def cli_input
+00039990: 286d 7367 2c2a 2a6f 7074 7329 3a0a 2020  (msg,**opts):.  
+000399a0: 2020 2727 270a 2020 2020 434c 4920 496e    '''.    CLI In
+000399b0: 7075 7420 636f 6d6d 616e 640a 2020 2020  put command.    
+000399c0: 6869 6464 656e 206f 7220 7061 7373 7764  hidden or passwd
+000399d0: 203d 2054 7275 6520 3a20 696e 7075 7420   = True : input 
+000399e0: 6173 2070 6173 7377 6f72 642c 2046 616c  as password, Fal
+000399f0: 7365 3a20 2864 6566 6175 6c74 2920 6e6f  se: (default) no
+00039a00: 726d 616c 2074 6578 7420 696e 7075 740a  rmal text input.
+00039a10: 2020 2020 2727 270a 2020 2020 6869 6464      '''.    hidd
+00039a20: 656e 3d6f 7074 732e 6765 7428 2768 6964  en=opts.get('hid
+00039a30: 6465 6e27 2c6f 7074 732e 6765 7428 2770  den',opts.get('p
+00039a40: 6173 7377 6427 2c6f 7074 732e 6765 7428  asswd',opts.get(
+00039a50: 2770 6173 7377 6f72 6427 2c46 616c 7365  'password',False
+00039a60: 2929 290a 2020 2020 6966 2068 6964 6465  ))).    if hidde
+00039a70: 6e3a 0a20 2020 2020 2020 2069 6620 7379  n:.        if sy
+00039a80: 732e 7374 6469 6e2e 6973 6174 7479 2829  s.stdin.isatty()
+00039a90: 3a0a 2020 2020 2020 2020 2020 2020 7020  :.            p 
+00039aa0: 3d20 6765 7470 6173 732e 6765 7470 6173  = getpass.getpas
+00039ab0: 7328 6d73 6729 0a20 2020 2020 2020 2065  s(msg).        e
+00039ac0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00039ad0: 2070 7269 6e74 6628 6d73 672c 656e 645f   printf(msg,end_
+00039ae0: 6c69 6e65 3d27 2729 0a20 2020 2020 2020  line='').       
+00039af0: 2020 2020 2070 203d 2073 7973 2e73 7464       p = sys.std
+00039b00: 696e 2e72 6561 646c 696e 6528 292e 7273  in.readline().rs
+00039b10: 7472 6970 2829 0a20 2020 2065 6c73 653a  trip().    else:
+00039b20: 0a20 2020 2020 2020 2069 6620 5079 5665  .        if PyVe
+00039b30: 7228 3229 3a0a 2020 2020 2020 2020 2020  r(2):.          
+00039b40: 2020 703d 7261 775f 696e 7075 7428 6d73    p=raw_input(ms
+00039b50: 6729 0a20 2020 2020 2020 2065 6c73 653a  g).        else:
+00039b60: 0a20 2020 2020 2020 2020 2020 2070 3d69  .            p=i
+00039b70: 6e70 7574 286d 7367 290a 2020 2020 7265  nput(msg).    re
+00039b80: 7475 726e 2070 0a0a 6465 6620 5479 7065  turn p..def Type
+00039b90: 4461 7461 2873 7263 2c77 616e 745f 7479  Data(src,want_ty
+00039ba0: 7065 3d4e 6f6e 652c 6465 6661 756c 743d  pe=None,default=
+00039bb0: 276f 7267 272c 7370 6c69 7465 723d 4e6f  'org',spliter=No
+00039bc0: 6e65 293a 0a20 2020 2027 2727 436f 6e76  ne):.    '''Conv
+00039bd0: 6572 7420 2869 6e70 7574 2964 6174 6120  ert (input)data 
+00039be0: 746f 2077 616e 7420 7479 7065 2028 6578  to want type (ex
+00039bf0: 3a20 7374 7220 2d3e 206c 6973 742c 2069  : str -> list, i
+00039c00: 6e74 2c20 2e2e 2e29 2c20 6361 6e20 6e6f  nt, ...), can no
+00039c10: 7420 636f 6e76 6572 7420 746f 2074 7970  t convert to typ
+00039c20: 6520 7468 656e 2072 6574 7572 6e20 4661  e then return Fa
+00039c30: 6c73 6527 2727 0a20 2020 2069 6620 5479  lse'''.    if Ty
+00039c40: 7065 2877 616e 745f 7479 7065 2c27 7374  pe(want_type,'st
+00039c50: 7227 293a 0a20 2020 2020 2020 2069 6620  r'):.        if 
+00039c60: 6973 696e 7374 616e 6365 2873 7263 2c28  isinstance(src,(
+00039c70: 6c69 7374 2c74 7570 6c65 2929 3a0a 2020  list,tuple)):.  
+00039c80: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00039c90: 2069 7369 6e73 7461 6e63 6528 7370 6c69   isinstance(spli
+00039ca0: 7465 722c 7374 7229 3a20 7370 6c69 7465  ter,str): splite
+00039cb0: 723d 2720 270a 2020 2020 2020 2020 2020  r=' '.          
+00039cc0: 2020 7265 7475 726e 204a 6f69 6e28 5374    return Join(St
+00039cd0: 7228 7372 6329 2c53 7472 2873 706c 6974  r(src),Str(split
+00039ce0: 6572 2929 0a20 2020 2020 2020 2065 6c73  er)).        els
+00039cf0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00039d00: 6574 7572 6e20 5374 7228 7372 632c 6d6f  eturn Str(src,mo
+00039d10: 6465 3d27 666f 7263 6527 290a 2020 2020  de='force').    
+00039d20: 656c 6966 2054 7970 6528 7761 6e74 5f74  elif Type(want_t
+00039d30: 7970 652c 2762 7974 6573 2729 3a0a 2020  ype,'bytes'):.  
+00039d40: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00039d50: 6e63 6528 7372 632c 286c 6973 742c 7475  nce(src,(list,tu
+00039d60: 706c 6529 293a 0a20 2020 2020 2020 2020  ple)):.         
+00039d70: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
 00039d80: 616e 6365 2873 706c 6974 6572 2c73 7472  ance(spliter,str
-00039d90: 293a 0a20 2020 2020 2020 2069 6620 5479  ):.        if Ty
-00039da0: 7065 2877 616e 745f 7479 7065 2c27 7475  pe(want_type,'tu
-00039db0: 706c 6527 293a 0a20 2020 2020 2020 2020  ple'):.         
-00039dc0: 2020 2072 6574 7572 6e20 7475 706c 6528     return tuple(
-00039dd0: 5370 6c69 7428 7372 632c 7370 6c69 7465  Split(src,splite
-00039de0: 7229 290a 2020 2020 2020 2020 7265 7475  r)).        retu
-00039df0: 726e 2053 706c 6974 2873 7263 2c73 706c  rn Split(src,spl
-00039e00: 6974 6572 290a 2020 2020 656c 6966 2054  iter).    elif T
-00039e10: 7970 6528 7761 6e74 5f74 7970 652c 2774  ype(want_type,'t
-00039e20: 7570 6c65 2729 2061 6e64 2069 7369 6e73  uple') and isins
-00039e30: 7461 6e63 6528 7372 632c 286c 6973 742c  tance(src,(list,
-00039e40: 6469 6374 2929 3a0a 2020 2020 2020 2020  dict)):.        
-00039e50: 6966 2069 7369 6e73 7461 6e63 6528 7372  if isinstance(sr
-00039e60: 632c 6469 6374 293a 0a20 2020 2020 2020  c,dict):.       
-00039e70: 2020 2020 2069 6620 7370 6c69 7465 7220       if spliter 
-00039e80: 3d3d 2027 6b65 7927 3a0a 2020 2020 2020  == 'key':.      
-00039e90: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00039ea0: 2074 7570 6c65 2873 7263 2e6b 6579 7328   tuple(src.keys(
-00039eb0: 2929 0a20 2020 2020 2020 2020 2020 2065  )).            e
-00039ec0: 6c69 6620 7370 6c69 7465 7220 3d3d 2027  lif spliter == '
-00039ed0: 7661 6c75 6527 3a0a 2020 2020 2020 2020  value':.        
-00039ee0: 2020 2020 2020 2020 7265 7475 726e 2074          return t
-00039ef0: 7570 6c65 2873 7263 2e76 616c 7565 7328  uple(src.values(
-00039f00: 2929 0a20 2020 2020 2020 2020 2020 2065  )).            e
-00039f10: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00039f20: 2020 2020 2072 6574 7572 6e20 7475 706c       return tupl
-00039f30: 6528 7372 632e 6974 656d 7328 2929 0a20  e(src.items()). 
-00039f40: 2020 2020 2020 2072 6574 7572 6e20 7475         return tu
-00039f50: 706c 6528 7372 6329 0a20 2020 2065 6c69  ple(src).    eli
-00039f60: 6620 5479 7065 2877 616e 745f 7479 7065  f Type(want_type
-00039f70: 2c27 6c69 7374 2729 2061 6e64 2069 7369  ,'list') and isi
-00039f80: 6e73 7461 6e63 6528 7372 632c 2874 7570  nstance(src,(tup
-00039f90: 6c65 2c64 6963 7429 293a 0a20 2020 2020  le,dict)):.     
-00039fa0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00039fb0: 2873 7263 2c64 6963 7429 3a0a 2020 2020  (src,dict):.    
-00039fc0: 2020 2020 2020 2020 6966 2073 706c 6974          if split
-00039fd0: 6572 203d 3d20 276b 6579 273a 0a20 2020  er == 'key':.   
-00039fe0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00039ff0: 7572 6e20 6c69 7374 2873 7263 2e6b 6579  urn list(src.key
-0003a000: 7328 2929 0a20 2020 2020 2020 2020 2020  s()).           
-0003a010: 2065 6c69 6620 7370 6c69 7465 7220 3d3d   elif spliter ==
-0003a020: 2027 7661 6c75 6527 3a0a 2020 2020 2020   'value':.      
-0003a030: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0003a040: 206c 6973 7428 7372 632e 7661 6c75 6573   list(src.values
-0003a050: 2829 290a 2020 2020 2020 2020 2020 2020  ()).            
-0003a060: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0003a070: 2020 2020 2020 7265 7475 726e 206c 6973        return lis
-0003a080: 7428 7372 632e 6974 656d 7328 2929 0a20  t(src.items()). 
-0003a090: 2020 2020 2020 2072 6574 7572 6e20 6c69         return li
-0003a0a0: 7374 2873 7263 290a 2020 2020 656c 6966  st(src).    elif
-0003a0b0: 2054 7970 6528 7372 632c 7761 6e74 5f74   Type(src,want_t
-0003a0c0: 7970 6529 3a0a 2020 2020 2020 2020 7265  ype):.        re
-0003a0d0: 7475 726e 2073 7263 0a20 2020 2069 6620  turn src.    if 
-0003a0e0: 5479 7065 2873 7263 2c28 2773 7472 272c  Type(src,('str',
-0003a0f0: 2762 7974 6573 2729 293a 0a20 2020 2020  'bytes')):.     
-0003a100: 2020 2072 6574 7572 6e20 466f 726d 4461     return FormDa
-0003a110: 7461 2873 7263 2c64 6566 6175 6c74 3d27  ta(src,default='
-0003a120: 6f72 6727 290a 2020 2020 7265 7475 726e  org').    return
-0003a130: 2044 6566 6175 6c74 2873 7263 2c64 6566   Default(src,def
-0003a140: 6175 6c74 290a 0a64 6566 204d 6f76 6544  ault)..def MoveD
-0003a150: 6174 6128 7372 632c 6461 7461 3d4e 6f6e  ata(src,data=Non
-0003a160: 652c 746f 3d4e 6f6e 652c 6672 6f6d 5f69  e,to=None,from_i
-0003a170: 6478 3d4e 6f6e 652c 666f 7263 653d 4661  dx=None,force=Fa
-0003a180: 6c73 652c 6465 6661 756c 743d 276f 7267  lse,default='org
-0003a190: 2729 3a0a 2020 2020 2727 270a 2020 2020  '):.    '''.    
-0003a1a0: 7375 7070 6f72 7420 7372 6320 7479 7065  support src type
-0003a1b0: 2069 7320 6c69 7374 2c73 7472 2c28 7475   is list,str,(tu
-0003a1c0: 706c 6529 0a20 2020 206d 6f76 696e 6720  ple).    moving 
-0003a1d0: 666f 726d 6174 203a 2064 6174 6128 6461  format : data(da
-0003a1e0: 7461 2920 6f72 2066 726f 6d5f 6964 7828  ta) or from_idx(
-0003a1f0: 696e 7429 0a20 2020 2020 202d 2064 6174  int).      - dat
-0003a200: 6120 3a20 6966 2073 7263 2068 6173 206d  a : if src has m
-0003a210: 616e 7920 7361 6d65 2064 6174 6120 7468  any same data th
-0003a220: 656e 206a 7573 7420 6b65 6570 2073 696e  en just keep sin
-0003a230: 676c 6520 6461 7461 2061 7420 6d6f 7665  gle data at move
-0003a240: 640a 2020 2020 6d6f 7669 6e67 2064 6573  d.    moving des
-0003a250: 7420 2020 3a20 746f 2869 6e74 290a 2020  t   : to(int).  
-0003a260: 2020 6d6f 7665 2064 6174 6120 6f72 2069    move data or i
-0003a270: 6e64 6578 2866 726f 6d5f 6964 7829 2074  ndex(from_idx) t
-0003a280: 6f20 7761 6e74 2069 6e64 6578 2874 6f29  o want index(to)
-0003a290: 0a20 2020 2020 2066 6f72 6365 3d54 7275  .      force=Tru
-0003a2a0: 653a 2065 7665 6e20 7475 706c 6520 746f  e: even tuple to
-0003a2b0: 206d 6f76 650a 2020 2020 6966 206e 6f74   move.    if not
-0003a2c0: 2073 7570 706f 7274 2074 6865 6e20 7265   support then re
-0003a2d0: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
-0003a2e0: 2064 6566 6175 6c74 203a 206f 7267 0a20   default : org. 
-0003a2f0: 2020 2027 2727 0a20 2020 205f 7475 706c     '''.    _tupl
-0003a300: 653d 4661 6c73 650a 2020 2020 7372 635f  e=False.    src_
-0003a310: 7479 7065 3d54 7970 654e 616d 6528 7372  type=TypeName(sr
-0003a320: 6329 0a20 2020 2069 6620 7372 635f 7479  c).    if src_ty
-0003a330: 7065 203d 3d20 2774 7570 6c65 273a 0a20  pe == 'tuple':. 
-0003a340: 2020 2020 2020 2069 6620 6e6f 7420 666f         if not fo
-0003a350: 7263 653a 2072 6574 7572 6e20 4465 6661  rce: return Defa
-0003a360: 756c 7428 7372 632c 6465 6661 756c 7429  ult(src,default)
-0003a370: 0a20 2020 2020 2020 205f 7475 706c 653d  .        _tuple=
-0003a380: 5472 7565 0a20 2020 2020 2020 2073 7263  True.        src
-0003a390: 5f74 7970 653d 276c 6973 7427 0a20 2020  _type='list'.   
-0003a3a0: 2069 6620 7372 635f 7479 7065 2069 6e20   if src_type in 
-0003a3b0: 5b27 6c69 7374 272c 2773 7472 275d 2061  ['list','str'] a
-0003a3c0: 6e64 2073 7263 3a0a 2020 2020 2020 2020  nd src:.        
-0003a3d0: 7372 633d 6c69 7374 2873 7263 290a 2020  src=list(src).  
-0003a3e0: 2020 2020 2020 6966 2074 6f20 3d3d 2027        if to == '
-0003a3f0: 6c61 7374 273a 2074 6f3d 2d31 0a20 2020  last': to=-1.   
-0003a400: 2020 2020 2065 6c69 6620 746f 203d 3d20       elif to == 
-0003a410: 2766 6972 7374 273a 2074 6f3d 300a 2020  'first': to=0.  
-0003a420: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0003a430: 6e63 6528 6672 6f6d 5f69 6478 2c69 6e74  nce(from_idx,int
-0003a440: 2920 616e 6420 6973 696e 7374 616e 6365  ) and isinstance
-0003a450: 2874 6f2c 696e 7429 3a0a 2020 2020 2020  (to,int):.      
-0003a460: 2020 2020 2020 6966 206c 656e 2873 7263        if len(src
-0003a470: 2920 3e20 6162 7328 6672 6f6d 5f69 6478  ) > abs(from_idx
-0003a480: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0003a490: 2020 2074 6f3d 4669 7849 6e64 6578 2873     to=FixIndex(s
-0003a4a0: 7263 2c74 6f29 0a20 2020 2020 2020 2020  rc,to).         
-0003a4b0: 2020 2020 2020 2069 6620 6672 6f6d 5f69         if from_i
-0003a4c0: 6478 213d 746f 3a0a 2020 2020 2020 2020  dx!=to:.        
-0003a4d0: 2020 2020 2020 2020 2020 2020 6966 2074              if t
-0003a4e0: 6f20 3d3d 202d 313a 0a20 2020 2020 2020  o == -1:.       
-0003a4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a500: 2073 7263 2e61 7070 656e 6428 7372 635b   src.append(src[
-0003a510: 6672 6f6d 5f69 6478 5d29 0a20 2020 2020  from_idx]).     
-0003a520: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0003a530: 6c69 6620 746f 203d 3d20 303a 0a20 2020  lif to == 0:.   
-0003a540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a550: 2020 2020 2073 7263 3d5b 7372 635b 6672       src=[src[fr
-0003a560: 6f6d 5f69 6478 5d5d 2b73 7263 0a20 2020  om_idx]]+src.   
-0003a570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a580: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0003a590: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0003a5a0: 7263 3d73 7263 5b3a 746f 5d2b 5b73 7263  rc=src[:to]+[src
-0003a5b0: 5b66 726f 6d5f 6964 785d 5d2b 7372 635b  [from_idx]]+src[
-0003a5c0: 746f 3a5d 0a20 2020 2020 2020 2020 2020  to:].           
-0003a5d0: 2020 2020 2020 2020 2073 7263 5b74 6f5d           src[to]
-0003a5e0: 3d73 7263 5b66 726f 6d5f 6964 785d 0a20  =src[from_idx]. 
-0003a5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a600: 2020 2064 656c 2073 7263 5b66 726f 6d5f     del src[from_
-0003a610: 6964 785d 0a20 2020 2020 2020 2065 6c69  idx].        eli
-0003a620: 6620 6e6f 7420 4973 4e6f 6e65 2864 6174  f not IsNone(dat
-0003a630: 6129 2061 6e64 2069 7369 6e73 7461 6e63  a) and isinstanc
-0003a640: 6528 746f 2c69 6e74 293a 0a20 2020 2020  e(to,int):.     
-0003a650: 2020 2020 2020 2074 6f3d 4669 7849 6e64         to=FixInd
-0003a660: 6578 2873 7263 2c74 6f29 0a20 2020 2020  ex(src,to).     
-0003a670: 2020 2020 2020 2073 7263 3d5b 6920 666f         src=[i fo
-0003a680: 7220 6920 696e 2073 7263 2069 6620 6921  r i in src if i!
-0003a690: 3d64 6174 615d 0a20 2020 2020 2020 2020  =data].         
-0003a6a0: 2020 2069 6620 746f 203d 3d20 2d31 3a0a     if to == -1:.
-0003a6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a6c0: 7372 632e 6170 7065 6e64 2864 6174 6129  src.append(data)
-0003a6d0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-0003a6e0: 6620 746f 203d 3d20 303a 0a20 2020 2020  f to == 0:.     
-0003a6f0: 2020 2020 2020 2020 2020 2073 7263 3d5b             src=[
-0003a700: 6461 7461 5d2b 7372 630a 2020 2020 2020  data]+src.      
-0003a710: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0003a720: 2020 2020 2020 2020 2020 2020 7372 633d              src=
-0003a730: 7372 635b 3a74 6f5d 2b5b 6461 7461 5d2b  src[:to]+[data]+
-0003a740: 7372 635b 746f 3a5d 0a20 2020 2020 2020  src[to:].       
-0003a750: 2069 6620 5f74 7570 6c65 3a20 7265 7475   if _tuple: retu
-0003a760: 726e 2074 7570 6c65 2873 7263 290a 2020  rn tuple(src).  
-0003a770: 2020 2020 2020 656c 6966 2073 7263 5f74        elif src_t
-0003a780: 7970 6520 3d3d 2027 7374 7227 3a20 7265  ype == 'str': re
-0003a790: 7475 726e 204a 6f69 6e28 7372 632c 2727  turn Join(src,''
-0003a7a0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0003a7b0: 2073 7263 0a20 2020 2072 6574 7572 6e20   src.    return 
-0003a7c0: 4465 6661 756c 7428 7372 632c 6465 6661  Default(src,defa
-0003a7d0: 756c 7429 0a0a 6465 6620 5261 6e64 6f6d  ult)..def Random
-0003a7e0: 286c 656e 6774 683d 382c 6d6f 6465 3d4e  (length=8,mode=N
-0003a7f0: 6f6e 652c 7374 7273 3d4e 6f6e 652c 2a2a  one,strs=None,**
-0003a800: 6f70 7473 293a 0a20 2020 2027 2727 0a20  opts):.    '''. 
-0003a810: 2020 206d 616b 6520 7261 6e64 6f6d 206e     make random n
-0003a820: 756d 6265 722f 7374 7269 6e67 2f63 6861  umber/string/cha
-0003a830: 7261 6374 6572 730a 2020 2020 6c65 6e67  racters.    leng
-0003a840: 7468 2020 203a 2072 616e 646f 6d20 7374  th   : random st
-0003a850: 7269 6e67 206c 656e 6774 6820 2864 6566  ring length (def
-0003a860: 6175 6c74 3a20 3829 0a20 2020 206d 6f64  ault: 8).    mod
-0003a870: 6520 2864 6566 6175 6c74 3a20 416c 7068  e (default: Alph
-0003a880: 616e 756d 290a 2020 2020 202d 2061 6c70  anum).     - alp
-0003a890: 6861 203a 206c 6f77 6572 2061 6c70 6861  ha : lower alpha
-0003a8a0: 6265 740a 2020 2020 202d 2041 4c50 4841  bet.     - ALPHA
-0003a8b0: 203a 2075 7070 6572 2061 6c70 6861 6265   : upper alphabe
-0003a8c0: 740a 2020 2020 202d 2041 6c70 6861 203a  t.     - Alpha :
-0003a8d0: 206c 6f77 6572 202b 2075 7070 6572 2061   lower + upper a
-0003a8e0: 6c70 6861 6265 740a 2020 2020 202d 206e  lphabet.     - n
-0003a8f0: 756d 2020 203a 206e 756d 6265 720a 2020  um   : number.  
-0003a900: 2020 202d 2063 6861 7220 203a 206c 696e     - char  : lin
-0003a910: 7578 2063 6f6e 736f 6c65 2075 7361 626c  ux console usabl
-0003a920: 6520 7379 6d62 6f6c 2063 6861 7261 6374  e symbol charact
-0003a930: 6572 730a 2020 2020 202d 2073 796d 2020  ers.     - sym  
-0003a940: 203a 2061 6c6c 2073 796d 626f 6c20 6368   : all symbol ch
-0003a950: 6172 6163 7465 7273 0a20 2020 2020 2d20  aracters.     - 
-0003a960: 636f 6d62 696e 2061 626f 7665 206d 6f64  combin above mod
-0003a970: 6573 2028 6578 3a20 416c 7068 616e 756d  es (ex: Alphanum
-0003a980: 290a 2020 2020 7374 7273 2020 2020 203a  ).    strs     :
-0003a990: 2069 6620 796f 7520 7761 6e74 206d 616b   if you want mak
-0003a9a0: 6520 6120 7261 6e64 6f6d 2073 7472 696e  e a random strin
-0003a9b0: 6720 7769 7468 2079 6f75 7220 6f77 6e20  g with your own 
-0003a9c0: 7370 6563 6961 6c20 6368 6172 6163 7465  special characte
-0003a9d0: 7273 0a20 2020 2027 2727 0a20 2020 2061  rs.    '''.    a
-0003a9e0: 6c70 6861 3d27 6162 6364 6566 6768 696a  lpha='abcdefghij
-0003a9f0: 6b6c 6d6e 6f70 7172 7374 7576 7778 797a  klmnopqrstuvwxyz
-0003aa00: 270a 2020 2020 416c 7068 613d 2741 4243  '.    Alpha='ABC
-0003aa10: 4445 4647 4849 4a4b 4c4d 4e4f 5051 5253  DEFGHIJKLMNOPQRS
-0003aa20: 5455 5657 5859 5a27 0a20 2020 206e 756d  TUVWXYZ'.    num
-0003aa30: 3d27 3031 3233 3435 3637 3839 270a 2020  ='0123456789'.  
-0003aa40: 2020 7379 6d62 6f6c 3d27 2727 7e21 4023    symbol='''~!@#
-0003aa50: 2425 5e5f 2b2d 3d7b 7d5b 5d3a 2c2e 2727  $%^_+-={}[]:,.''
-0003aa60: 270a 2020 2020 5379 6d62 6f6c 3d27 2727  '.    Symbol='''
-0003aa70: 602a 2829 267c 5c5c 273b 222f 693c 3e3f  `*()&|\\';"/i<>?
-0003aa80: 2727 270a 2020 2020 7370 6163 653d 2720  '''.    space=' 
-0003aa90: 270a 2020 2020 6966 206e 6f74 2069 7369  '.    if not isi
-0003aaa0: 6e73 7461 6e63 6528 7374 7273 2c73 7472  nstance(strs,str
-0003aab0: 2920 6f72 206e 6f74 2073 7472 733a 0a20  ) or not strs:. 
-0003aac0: 2020 2020 2020 2073 7472 733d 2727 0a20         strs=''. 
-0003aad0: 2020 2020 2020 2069 6620 6d6f 6465 2069         if mode i
-0003aae0: 6e20 5b27 616c 6c27 2c27 2a27 5d3a 0a20  n ['all','*']:. 
-0003aaf0: 2020 2020 2020 2020 2020 2073 7472 733d             strs=
-0003ab00: 616c 7068 612b 416c 7068 612b 6e75 6d2b  alpha+Alpha+num+
-0003ab10: 7379 6d62 6f6c 2b53 796d 626f 6c2b 7370  symbol+Symbol+sp
-0003ab20: 6163 650a 2020 2020 2020 2020 656c 6966  ace.        elif
-0003ab30: 2069 7369 6e73 7461 6e63 6528 6d6f 6465   isinstance(mode
-0003ab40: 2c73 7472 293a 0a20 2020 2020 2020 2020  ,str):.         
-0003ab50: 2020 2069 6620 2761 6c70 6861 2720 696e     if 'alpha' in
-0003ab60: 206d 6f64 653a 2073 7472 733d 616c 7068   mode: strs=alph
-0003ab70: 610a 2020 2020 2020 2020 2020 2020 6966  a.            if
-0003ab80: 2027 416c 7068 6127 2069 6e20 6d6f 6465   'Alpha' in mode
-0003ab90: 3a20 7374 7273 3d61 6c70 6861 2b41 6c70  : strs=alpha+Alp
-0003aba0: 6861 0a20 2020 2020 2020 2020 2020 2069  ha.            i
-0003abb0: 6620 2741 4c50 4841 2720 696e 206d 6f64  f 'ALPHA' in mod
-0003abc0: 653a 2073 7472 733d 416c 7068 610a 2020  e: strs=Alpha.  
-0003abd0: 2020 2020 2020 2020 2020 6966 2027 6e75            if 'nu
-0003abe0: 6d27 2069 6e20 6d6f 6465 3a20 7374 7273  m' in mode: strs
-0003abf0: 3d73 7472 732b 6e75 6d0a 2020 2020 2020  =strs+num.      
-0003ac00: 2020 2020 2020 6966 2027 6368 6172 2720        if 'char' 
-0003ac10: 696e 206d 6f64 653a 2073 7472 733d 7374  in mode: strs=st
-0003ac20: 7273 2b73 796d 626f 6c0a 2020 2020 2020  rs+symbol.      
-0003ac30: 2020 2020 2020 656c 6966 2027 7379 6d27        elif 'sym'
-0003ac40: 2069 6e20 6d6f 6465 3a20 7374 7273 3d73   in mode: strs=s
-0003ac50: 7472 732b 7379 6d62 6f6c 2b53 796d 626f  trs+symbol+Symbo
-0003ac60: 6c2b 7370 6163 650a 2020 2020 6966 206e  l+space.    if n
-0003ac70: 6f74 2073 7472 733a 2073 7472 733d 616c  ot strs: strs=al
-0003ac80: 7068 612b 416c 7068 612b 6e75 6d0a 2020  pha+Alpha+num.  
-0003ac90: 2020 7374 726e 3d6c 656e 2873 7472 7329    strn=len(strs)
-0003aca0: 2d31 0a20 2020 2073 7472 613d 6c69 7374  -1.    stra=list
-0003acb0: 2873 7472 7329 0a20 2020 206f 7574 3d5b  (strs).    out=[
-0003acc0: 5d0a 2020 2020 666f 7220 6920 696e 2072  ].    for i in r
-0003acd0: 616e 6765 2830 2c6c 656e 6774 6829 3a0a  ange(0,length):.
-0003ace0: 2020 2020 2020 2020 7261 6e64 6f6d 2e73          random.s
-0003acf0: 6875 6666 6c65 2873 7472 6129 0a20 2020  huffle(stra).   
-0003ad00: 2020 2020 206f 7574 2e61 7070 656e 6428       out.append(
-0003ad10: 7374 7261 5b72 616e 646f 6d2e 7261 6e64  stra[random.rand
-0003ad20: 696e 7428 302c 7374 726e 295d 290a 2020  int(0,strn)]).  
-0003ad30: 2020 7265 7475 726e 2069 6e74 2827 272e    return int(''.
-0003ad40: 6a6f 696e 286f 7574 2929 2069 6620 6d6f  join(out)) if mo
-0003ad50: 6465 203d 3d20 276e 756d 2720 656c 7365  de == 'num' else
-0003ad60: 2027 272e 6a6f 696e 286f 7574 290a 0a64   ''.join(out)..d
-0003ad70: 6566 2049 7341 6c6c 5361 6d65 5374 7228  ef IsAllSameStr(
-0003ad80: 7372 632c 6669 6e64 293a 0a20 2020 2027  src,find):.    '
-0003ad90: 2727 4368 6563 6b20 696e 7075 7420 7374  ''Check input st
-0003ada0: 7269 6e67 2069 7320 416c 6c20 7361 6d65  ring is All same
-0003adb0: 2073 7472 696e 6720 6f72 206e 6f74 2727   string or not''
-0003adc0: 270a 2020 2020 6966 2069 7369 6e73 7461  '.    if isinsta
-0003add0: 6e63 6528 7372 632c 7374 7229 2061 6e64  nce(src,str) and
-0003ade0: 2069 7369 6e73 7461 6e63 6528 6669 6e64   isinstance(find
-0003adf0: 2c73 7472 293a 0a20 2020 2020 2020 2069  ,str):.        i
-0003ae00: 6620 7372 632e 636f 756e 7428 6669 6e64  f src.count(find
-0003ae10: 2920 3d3d 206c 656e 2873 7263 292f 6c65  ) == len(src)/le
-0003ae20: 6e28 6669 6e64 293a 0a20 2020 2020 2020  n(find):.       
-0003ae30: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
-0003ae40: 0a20 2020 2072 6574 7572 6e20 4661 6c73  .    return Fals
-0003ae50: 650a 0a64 6566 204d 6b54 656d 7028 6669  e..def MkTemp(fi
-0003ae60: 6c65 6e61 6d65 3d4e 6f6e 652c 7375 6666  lename=None,suff
-0003ae70: 6978 3d4e 6f6e 652c 7370 6c69 743d 272d  ix=None,split='-
-0003ae80: 272c 6f70 743d 2764 7279 272c 6261 7365  ',opt='dry',base
-0003ae90: 5f64 6972 3d4e 6f6e 652c 756e 6971 3d46  _dir=None,uniq=F
-0003aea0: 616c 7365 2c64 6566 6175 6c74 5f6c 656e  alse,default_len
-0003aeb0: 6774 683d 382c 6d6f 6465 3d4e 6f6e 652c  gth=8,mode=None,
-0003aec0: 2a2a 6f70 7473 293a 0a20 2020 2027 2727  **opts):.    '''
-0003aed0: 0a20 2020 206d 616b 6520 6120 7261 6e64  .    make a rand
-0003aee0: 6f6d 2073 7472 696e 670a 2020 2020 6669  om string.    fi
-0003aef0: 6c65 6e61 6d65 3a20 0a20 2020 2020 204e  lename: .      N
-0003af00: 6f6e 6520 203a 2067 656e 6572 6174 6520  one  : generate 
-0003af10: 7261 6e64 6f6d 2073 7472 696e 670a 2020  random string.  
-0003af20: 2020 2020 6162 632d 5858 5858 582e 6c6f      abc-XXXXX.lo
-0003af30: 6720 3a20 6162 632d 3c72 616e 646f 6d20  g : abc-<random 
-0003af40: 3520 6368 6172 6163 7465 7273 3e2e 6c6f  5 characters>.lo
-0003af50: 670a 2020 2020 2020 6162 632d 4e4e 4e2d  g.      abc-NNN-
-0003af60: 6162 6364 2e6c 6f67 2020 203a 2061 6263  abcd.log   : abc
-0003af70: 2d3c 7261 6e64 6f6d 2033 206e 756d 6265  -<random 3 numbe
-0003af80: 7273 3e2d 6162 6364 2e6c 6f67 0a20 2020  rs>-abcd.log.   
-0003af90: 2020 2061 6263 2e6c 6f67 2d58 5858 5820     abc.log-XXXX 
-0003afa0: 203a 2061 6263 2e6c 6f67 2d3c 7261 6e64   : abc.log-<rand
-0003afb0: 6f6d 2034 2063 6861 7261 6374 6572 733e  om 4 characters>
-0003afc0: 0a20 2020 2073 7566 6669 7820 203a 2069  .    suffix  : i
-0003afd0: 6620 796f 7520 6e65 6564 2061 6464 696e  f you need addin
-0003afe0: 6720 6669 6c65 2065 7874 616e 6428 7375  g file extand(su
-0003aff0: 6666 6978 2920 2865 783a 2073 7566 6669  ffix) (ex: suffi
-0003b000: 783d 276c 6f67 2720 3d3e 2058 5858 5858  x='log' => XXXXX
-0003b010: 2e6c 6f67 290a 2020 2020 7370 6c69 7420  .log).    split 
-0003b020: 2020 3a20 6465 6661 756c 7420 2d2c 2073    : default -, s
-0003b030: 706c 6974 2073 796d 626f 6c20 666f 7220  plit symbol for 
-0003b040: 7468 6520 6669 6c65 6e61 6d65 0a20 2020  the filename.   
-0003b050: 206f 7074 0a20 2020 2020 202d 2064 7279   opt.      - dry
-0003b060: 203a 2064 7279 2072 756e 2028 7265 7475   : dry run (retu
-0003b070: 726e 2073 7472 696e 6729 2864 6566 6175  rn string)(defau
-0003b080: 6c74 290a 2020 2020 2020 2d20 6669 6c65  lt).      - file
-0003b090: 3a20 6d61 6b65 2061 2066 696c 650a 2020  : make a file.  
-0003b0a0: 2020 2020 2d20 6469 7220 3a20 6d61 6b65      - dir : make
-0003b0b0: 2061 2064 6972 6563 746f 7279 0a20 2020   a directory.   
-0003b0c0: 2062 6173 655f 6469 723a 2069 6620 796f   base_dir: if yo
-0003b0d0: 7520 7761 6e74 2061 2073 7472 696e 6720  u want a string 
-0003b0e0: 756e 6465 7220 6261 7365 5f64 6972 0a20  under base_dir. 
-0003b0f0: 2020 2075 6e69 7120 2020 203a 2069 6620     uniq    : if 
-0003b100: 796f 7520 7761 6e74 206d 616b 6520 6120  you want make a 
-0003b110: 756e 6971 2073 7472 696e 6720 286e 6f74  uniq string (not
-0003b120: 2065 7869 7374 696e 6720 6669 6c65 6e61   existing filena
-0003b130: 6d65 2069 6e20 7468 6520 2862 6173 655f  me in the (base_
-0003b140: 6469 7229 6469 7265 6374 6f72 7929 0a20  dir)directory). 
-0003b150: 2020 2020 2073 6569 7269 616c 2069 6e63       seirial inc
-0003b160: 7265 6173 6520 6e75 6d62 6572 0a20 2020  rease number.   
-0003b170: 2020 2020 2069 6620 6578 6973 7420 6162       if exist ab
-0003b180: 632e 6c6f 6720 7468 656e 2061 6263 2e6c  c.log then abc.l
-0003b190: 6f67 2d30 3030 3030 3030 300a 2020 2020  og-00000000.    
-0003b1a0: 2020 2020 6966 2065 7869 7374 2061 6263      if exist abc
-0003b1b0: 2e6c 6f67 2c61 6263 2e6c 6f67 2d30 3030  .log,abc.log-000
-0003b1c0: 3030 3030 3020 7468 656e 2061 6263 2e6c  00000 then abc.l
-0003b1d0: 6f67 2d30 3030 3030 3030 310a 2020 2020  og-00000001.    
-0003b1e0: 2020 6669 6c65 6e61 6d65 3d27 6162 6327    filename='abc'
-0003b1f0: 2c73 7566 6669 783d 276c 6f67 272c 756e  ,suffix='log',un
-0003b200: 6971 3d54 7275 650a 2020 2020 2020 2020  iq=True.        
-0003b210: 6966 2065 7869 7374 2061 6263 2e6c 6f67  if exist abc.log
-0003b220: 2074 6865 6e20 6162 632d 3030 3030 3030   then abc-000000
-0003b230: 3030 2e6c 6f67 0a20 2020 2020 2020 2069  00.log.        i
-0003b240: 6620 6578 6973 7420 6162 632e 6c6f 672c  f exist abc.log,
-0003b250: 6162 632d 3030 3030 3030 3030 2e6c 6f67  abc-00000000.log
-0003b260: 2074 6865 6e20 6162 632d 3030 3030 3030   then abc-000000
-0003b270: 3031 2e6c 6f67 0a20 2020 2064 6566 6175  01.log.    defau
-0003b280: 6c74 5f6c 656e 6774 683a 2072 616e 646f  lt_length: rando
-0003b290: 6d20 7374 7269 6e67 206c 656e 6774 680a  m string length.
-0003b2a0: 2020 2020 6d6f 6465 2020 2020 3a20 7261      mode    : ra
-0003b2b0: 6e64 6f6d 2073 7472 696e 6720 6d6f 6465  ndom string mode
-0003b2c0: 2028 7361 6d65 2061 7320 5261 6e64 6f6d   (same as Random
-0003b2d0: 2829 2773 206d 6f64 6529 0a20 2020 2063  ()'s mode).    c
-0003b2e0: 7573 746f 6d20 203a 2063 7573 746f 6d20  ustom  : custom 
-0003b2f0: 7261 6e64 6f6d 2073 7472 696e 6720 736f  random string so
-0003b300: 7572 6365 2028 7361 6d65 2061 7320 5261  urce (same as Ra
-0003b310: 6e64 6f6d 2829 2773 2073 7472 7320 7061  ndom()'s strs pa
-0003b320: 7261 6d65 7465 7229 0a20 2020 2027 2727  rameter).    '''
-0003b330: 0a20 2020 2023 5375 7070 6f72 7420 4f4c  .    #Support OL
-0003b340: 4420 4d6b 5465 6d70 2829 200a 2020 2020  D MkTemp() .    
-0003b350: 6966 2069 7369 6e73 7461 6e63 6528 7375  if isinstance(su
-0003b360: 6666 6978 2c73 7472 2920 616e 6420 6973  ffix,str) and is
-0003b370: 696e 7374 616e 6365 2866 696c 656e 616d  instance(filenam
-0003b380: 652c 7374 7229 3a0a 2020 2020 2020 2020  e,str):.        
-0003b390: 6966 2073 7566 6669 785b 305d 3d3d 272d  if suffix[0]=='-
-0003b3a0: 273a 0a20 2020 2020 2020 2020 2020 2069  ':.            i
-0003b3b0: 6620 4973 416c 6c53 616d 6553 7472 2873  f IsAllSameStr(s
-0003b3c0: 7566 6669 785b 313a 5d2c 2758 2729 206f  uffix[1:],'X') o
-0003b3d0: 7220 4973 416c 6c53 616d 6553 7472 2873  r IsAllSameStr(s
-0003b3e0: 7566 6669 785b 313a 5d2c 274e 2729 206f  uffix[1:],'N') o
-0003b3f0: 7220 4973 416c 6c53 616d 6553 7472 2873  r IsAllSameStr(s
-0003b400: 7566 6669 785b 313a 5d2c 2778 2729 206f  uffix[1:],'x') o
-0003b410: 7220 4973 416c 6c53 616d 6553 7472 2873  r IsAllSameStr(s
-0003b420: 7566 6669 785b 313a 5d2c 276e 2729 3a0a  uffix[1:],'n'):.
-0003b430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b440: 6465 6661 756c 745f 6c65 6e67 7468 3d6c  default_length=l
-0003b450: 656e 2873 7566 6669 7829 2d31 0a20 2020  en(suffix)-1.   
-0003b460: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-0003b470: 656e 616d 653d 6669 6c65 6e61 6d65 2b73  ename=filename+s
-0003b480: 7566 6669 782e 7570 7065 7228 290a 2020  uffix.upper().  
-0003b490: 2020 2320 4e65 7720 6465 7369 676e 0a20    # New design. 
-0003b4a0: 2020 2064 6566 206f 7574 6669 6c65 2866     def outfile(f
-0003b4b0: 696c 656e 616d 652c 6f70 7429 3a0a 2020  ilename,opt):.  
-0003b4c0: 2020 2020 2020 6966 206f 7074 2069 6e20        if opt in 
-0003b4d0: 5b27 6669 6c65 272c 2766 275d 3a0a 2020  ['file','f']:.  
-0003b4e0: 2020 2020 2020 2020 206f 732e 6d6b 6e6f           os.mkno
-0003b4f0: 6465 2866 696c 656e 616d 6529 0a20 2020  de(filename).   
-0003b500: 2020 2020 2065 6c69 6620 6f70 7420 696e       elif opt in
-0003b510: 205b 2764 6972 272c 2764 272c 2764 6972   ['dir','d','dir
-0003b520: 6563 746f 7279 275d 3a0a 2020 2020 2020  ectory']:.      
-0003b530: 2020 2020 206f 732e 6d6b 6469 7228 6669       os.mkdir(fi
-0003b540: 6c65 6e61 6d65 290a 2020 2020 2020 2020  lename).        
-0003b550: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0003b560: 2072 6574 7572 6e20 6669 6c65 6e61 6d65   return filename
-0003b570: 0a0a 2020 2020 6465 6620 6d6b 5f66 696c  ..    def mk_fil
-0003b580: 656e 616d 6528 6669 6c65 6e61 6d65 2c73  ename(filename,s
-0003b590: 706c 6974 293a 0a20 2020 2020 2020 2066  plit):.        f
-0003b5a0: 696c 656e 616d 655f 613d 6669 6c65 6e61  ilename_a=filena
-0003b5b0: 6d65 2e73 706c 6974 2873 706c 6974 290a  me.split(split).
-0003b5c0: 2020 2020 2020 2020 6669 6c65 6e61 6d65          filename
-0003b5d0: 5f6e 3d6c 656e 2866 696c 656e 616d 655f  _n=len(filename_
-0003b5e0: 6129 0a20 2020 2020 2020 2073 7373 3d4e  a).        sss=N
-0003b5f0: 6f6e 650a 2020 2020 2020 2020 666f 7220  one.        for 
-0003b600: 6666 2069 6e20 7261 6e67 6528 302c 6669  ff in range(0,fi
-0003b610: 6c65 6e61 6d65 5f6e 293a 0a20 2020 2020  lename_n):.     
-0003b620: 2020 2020 2020 2066 6f72 2073 7320 696e         for ss in
-0003b630: 205b 274e 272c 2758 275d 3a0a 2020 2020   ['N','X']:.    
-0003b640: 2020 2020 2020 2020 2020 2020 6966 2049              if I
-0003b650: 7341 6c6c 5361 6d65 5374 7228 6669 6c65  sAllSameStr(file
-0003b660: 6e61 6d65 5f61 5b66 665d 2c73 7329 3a0a  name_a[ff],ss):.
-0003b670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b680: 2020 2020 7373 733d 7373 0a20 2020 2020      sss=ss.     
-0003b690: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0003b6a0: 6620 6666 203c 2066 696c 656e 616d 655f  f ff < filename_
-0003b6b0: 6e2d 313a 0a20 2020 2020 2020 2020 2020  n-1:.           
-0003b6c0: 2020 2020 2020 2020 2020 2020 2061 613d               aa=
-0003b6d0: 5261 6e64 6f6d 286c 656e 6774 683d 6c65  Random(length=le
-0003b6e0: 6e28 6669 6c65 6e61 6d65 5f61 5b66 665d  n(filename_a[ff]
-0003b6f0: 292c 6d6f 6465 3d27 6e75 6d27 2069 6620  ),mode='num' if 
-0003b700: 7373 7320 3d3d 2027 4e27 2065 6c73 6520  sss == 'N' else 
-0003b710: 6d6f 6465 2c73 7472 733d 6f70 7473 2e67  mode,strs=opts.g
-0003b720: 6574 2827 6375 7374 6f6d 2729 290a 2020  et('custom')).  
-0003b730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b740: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0003b750: 6e63 6528 6161 2c69 6e74 293a 0a20 2020  nce(aa,int):.   
-0003b760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b770: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
-0003b780: 655f 615b 6666 5d3d 2725 307b 7d64 272e  e_a[ff]='%0{}d'.
-0003b790: 666f 726d 6174 286c 656e 2866 696c 656e  format(len(filen
-0003b7a0: 616d 655f 615b 6666 5d29 2925 6161 0a20  ame_a[ff]))%aa. 
-0003b7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b7c0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0003b7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b7e0: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
-0003b7f0: 655f 615b 6666 5d3d 277b 7d27 2e66 6f72  e_a[ff]='{}'.for
-0003b800: 6d61 7428 6161 290a 2020 2020 2020 2020  mat(aa).        
-0003b810: 6669 6c65 6e61 6d65 5f6c 6173 745f 7375  filename_last_su
-0003b820: 6666 6978 3d66 696c 656e 616d 655f 615b  ffix=filename_a[
-0003b830: 2d31 5d2e 7370 6c69 7428 272e 2729 5b30  -1].split('.')[0
-0003b840: 5d0a 2020 2020 2020 2020 6669 6c65 6e61  ].        filena
-0003b850: 6d65 5f6c 6173 745f 6578 743d 272e 272e  me_last_ext='.'.
-0003b860: 6a6f 696e 2866 696c 656e 616d 655f 615b  join(filename_a[
-0003b870: 2d31 5d2e 7370 6c69 7428 272e 2729 5b31  -1].split('.')[1
-0003b880: 3a5d 290a 2020 2020 2020 2020 6966 2073  :]).        if s
-0003b890: 7373 2069 7320 4e6f 6e65 3a20 7373 733d  ss is None: sss=
-0003b8a0: 5b27 4e27 2c27 5827 5d0a 2020 2020 2020  ['N','X'].      
-0003b8b0: 2020 666f 7220 7373 2069 6e20 7373 733a    for ss in sss:
-0003b8c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0003b8d0: 4973 416c 6c53 616d 6553 7472 2866 696c  IsAllSameStr(fil
-0003b8e0: 656e 616d 655f 6c61 7374 5f73 7566 6669  ename_last_suffi
-0003b8f0: 782c 7373 293a 0a20 2020 2020 2020 2020  x,ss):.         
-0003b900: 2020 2020 2020 2061 613d 5261 6e64 6f6d         aa=Random
-0003b910: 286c 656e 6774 683d 6c65 6e28 6669 6c65  (length=len(file
+00039d90: 293a 2073 706c 6974 6572 3d62 2720 270a  ): spliter=b' '.
+00039da0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00039db0: 726e 204a 6f69 6e28 4279 7465 7328 7372  rn Join(Bytes(sr
+00039dc0: 6329 2c42 7974 6573 2873 706c 6974 6572  c),Bytes(spliter
+00039dd0: 2929 0a20 2020 2020 2020 2065 6c73 653a  )).        else:
+00039de0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00039df0: 7572 6e20 4279 7465 7328 7372 6329 0a20  urn Bytes(src). 
+00039e00: 2020 2065 6c69 6620 5479 7065 2877 616e     elif Type(wan
+00039e10: 745f 7479 7065 2c27 696e 7427 293a 0a20  t_type,'int'):. 
+00039e20: 2020 2020 2020 2072 6574 7572 6e20 496e         return In
+00039e30: 7428 7372 632c 6572 723d 5472 7565 290a  t(src,err=True).
+00039e40: 2020 2020 656c 6966 2054 7970 6528 7761      elif Type(wa
+00039e50: 6e74 5f74 7970 652c 2827 6c69 7374 272c  nt_type,('list',
+00039e60: 2774 7570 6c65 2729 2920 616e 6420 6973  'tuple')) and is
+00039e70: 696e 7374 616e 6365 2873 7263 2c73 7472  instance(src,str
+00039e80: 2920 616e 6420 6973 696e 7374 616e 6365  ) and isinstance
+00039e90: 2873 706c 6974 6572 2c73 7472 293a 0a20  (spliter,str):. 
+00039ea0: 2020 2020 2020 2069 6620 5479 7065 2877         if Type(w
+00039eb0: 616e 745f 7479 7065 2c27 7475 706c 6527  ant_type,'tuple'
+00039ec0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00039ed0: 6574 7572 6e20 7475 706c 6528 5370 6c69  eturn tuple(Spli
+00039ee0: 7428 7372 632c 7370 6c69 7465 7229 290a  t(src,spliter)).
+00039ef0: 2020 2020 2020 2020 7265 7475 726e 2053          return S
+00039f00: 706c 6974 2873 7263 2c73 706c 6974 6572  plit(src,spliter
+00039f10: 290a 2020 2020 656c 6966 2054 7970 6528  ).    elif Type(
+00039f20: 7761 6e74 5f74 7970 652c 2774 7570 6c65  want_type,'tuple
+00039f30: 2729 2061 6e64 2069 7369 6e73 7461 6e63  ') and isinstanc
+00039f40: 6528 7372 632c 286c 6973 742c 6469 6374  e(src,(list,dict
+00039f50: 2929 3a0a 2020 2020 2020 2020 6966 2069  )):.        if i
+00039f60: 7369 6e73 7461 6e63 6528 7372 632c 6469  sinstance(src,di
+00039f70: 6374 293a 0a20 2020 2020 2020 2020 2020  ct):.           
+00039f80: 2069 6620 7370 6c69 7465 7220 3d3d 2027   if spliter == '
+00039f90: 6b65 7927 3a0a 2020 2020 2020 2020 2020  key':.          
+00039fa0: 2020 2020 2020 7265 7475 726e 2074 7570        return tup
+00039fb0: 6c65 2873 7263 2e6b 6579 7328 2929 0a20  le(src.keys()). 
+00039fc0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00039fd0: 7370 6c69 7465 7220 3d3d 2027 7661 6c75  spliter == 'valu
+00039fe0: 6527 3a0a 2020 2020 2020 2020 2020 2020  e':.            
+00039ff0: 2020 2020 7265 7475 726e 2074 7570 6c65      return tuple
+0003a000: 2873 7263 2e76 616c 7565 7328 2929 0a20  (src.values()). 
+0003a010: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0003a020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003a030: 2072 6574 7572 6e20 7475 706c 6528 7372   return tuple(sr
+0003a040: 632e 6974 656d 7328 2929 0a20 2020 2020  c.items()).     
+0003a050: 2020 2072 6574 7572 6e20 7475 706c 6528     return tuple(
+0003a060: 7372 6329 0a20 2020 2065 6c69 6620 5479  src).    elif Ty
+0003a070: 7065 2877 616e 745f 7479 7065 2c27 6c69  pe(want_type,'li
+0003a080: 7374 2729 2061 6e64 2069 7369 6e73 7461  st') and isinsta
+0003a090: 6e63 6528 7372 632c 2874 7570 6c65 2c64  nce(src,(tuple,d
+0003a0a0: 6963 7429 293a 0a20 2020 2020 2020 2069  ict)):.        i
+0003a0b0: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
+0003a0c0: 2c64 6963 7429 3a0a 2020 2020 2020 2020  ,dict):.        
+0003a0d0: 2020 2020 6966 2073 706c 6974 6572 203d      if spliter =
+0003a0e0: 3d20 276b 6579 273a 0a20 2020 2020 2020  = 'key':.       
+0003a0f0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0003a100: 6c69 7374 2873 7263 2e6b 6579 7328 2929  list(src.keys())
+0003a110: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+0003a120: 6620 7370 6c69 7465 7220 3d3d 2027 7661  f spliter == 'va
+0003a130: 6c75 6527 3a0a 2020 2020 2020 2020 2020  lue':.          
+0003a140: 2020 2020 2020 7265 7475 726e 206c 6973        return lis
+0003a150: 7428 7372 632e 7661 6c75 6573 2829 290a  t(src.values()).
+0003a160: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0003a170: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003a180: 2020 7265 7475 726e 206c 6973 7428 7372    return list(sr
+0003a190: 632e 6974 656d 7328 2929 0a20 2020 2020  c.items()).     
+0003a1a0: 2020 2072 6574 7572 6e20 6c69 7374 2873     return list(s
+0003a1b0: 7263 290a 2020 2020 656c 6966 2054 7970  rc).    elif Typ
+0003a1c0: 6528 7372 632c 7761 6e74 5f74 7970 6529  e(src,want_type)
+0003a1d0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+0003a1e0: 2073 7263 0a20 2020 2069 6620 5479 7065   src.    if Type
+0003a1f0: 2873 7263 2c28 2773 7472 272c 2762 7974  (src,('str','byt
+0003a200: 6573 2729 293a 0a20 2020 2020 2020 2072  es')):.        r
+0003a210: 6574 7572 6e20 466f 726d 4461 7461 2873  eturn FormData(s
+0003a220: 7263 2c64 6566 6175 6c74 3d27 6f72 6727  rc,default='org'
+0003a230: 290a 2020 2020 7265 7475 726e 2044 6566  ).    return Def
+0003a240: 6175 6c74 2873 7263 2c64 6566 6175 6c74  ault(src,default
+0003a250: 290a 0a64 6566 204d 6f76 6544 6174 6128  )..def MoveData(
+0003a260: 7372 632c 6461 7461 3d4e 6f6e 652c 746f  src,data=None,to
+0003a270: 3d4e 6f6e 652c 6672 6f6d 5f69 6478 3d4e  =None,from_idx=N
+0003a280: 6f6e 652c 666f 7263 653d 4661 6c73 652c  one,force=False,
+0003a290: 6465 6661 756c 743d 276f 7267 2729 3a0a  default='org'):.
+0003a2a0: 2020 2020 2727 270a 2020 2020 7375 7070      '''.    supp
+0003a2b0: 6f72 7420 7372 6320 7479 7065 2069 7320  ort src type is 
+0003a2c0: 6c69 7374 2c73 7472 2c28 7475 706c 6529  list,str,(tuple)
+0003a2d0: 0a20 2020 206d 6f76 696e 6720 666f 726d  .    moving form
+0003a2e0: 6174 203a 2064 6174 6128 6461 7461 2920  at : data(data) 
+0003a2f0: 6f72 2066 726f 6d5f 6964 7828 696e 7429  or from_idx(int)
+0003a300: 0a20 2020 2020 202d 2064 6174 6120 3a20  .      - data : 
+0003a310: 6966 2073 7263 2068 6173 206d 616e 7920  if src has many 
+0003a320: 7361 6d65 2064 6174 6120 7468 656e 206a  same data then j
+0003a330: 7573 7420 6b65 6570 2073 696e 676c 6520  ust keep single 
+0003a340: 6461 7461 2061 7420 6d6f 7665 640a 2020  data at moved.  
+0003a350: 2020 6d6f 7669 6e67 2064 6573 7420 2020    moving dest   
+0003a360: 3a20 746f 2869 6e74 290a 2020 2020 6d6f  : to(int).    mo
+0003a370: 7665 2064 6174 6120 6f72 2069 6e64 6578  ve data or index
+0003a380: 2866 726f 6d5f 6964 7829 2074 6f20 7761  (from_idx) to wa
+0003a390: 6e74 2069 6e64 6578 2874 6f29 0a20 2020  nt index(to).   
+0003a3a0: 2020 2066 6f72 6365 3d54 7275 653a 2065     force=True: e
+0003a3b0: 7665 6e20 7475 706c 6520 746f 206d 6f76  ven tuple to mov
+0003a3c0: 650a 2020 2020 6966 206e 6f74 2073 7570  e.    if not sup
+0003a3d0: 706f 7274 2074 6865 6e20 7265 7475 726e  port then return
+0003a3e0: 2064 6566 6175 6c74 0a20 2020 2064 6566   default.    def
+0003a3f0: 6175 6c74 203a 206f 7267 0a20 2020 2027  ault : org.    '
+0003a400: 2727 0a20 2020 205f 7475 706c 653d 4661  ''.    _tuple=Fa
+0003a410: 6c73 650a 2020 2020 7372 635f 7479 7065  lse.    src_type
+0003a420: 3d54 7970 654e 616d 6528 7372 6329 0a20  =TypeName(src). 
+0003a430: 2020 2069 6620 7372 635f 7479 7065 203d     if src_type =
+0003a440: 3d20 2774 7570 6c65 273a 0a20 2020 2020  = 'tuple':.     
+0003a450: 2020 2069 6620 6e6f 7420 666f 7263 653a     if not force:
+0003a460: 2072 6574 7572 6e20 4465 6661 756c 7428   return Default(
+0003a470: 7372 632c 6465 6661 756c 7429 0a20 2020  src,default).   
+0003a480: 2020 2020 205f 7475 706c 653d 5472 7565       _tuple=True
+0003a490: 0a20 2020 2020 2020 2073 7263 5f74 7970  .        src_typ
+0003a4a0: 653d 276c 6973 7427 0a20 2020 2069 6620  e='list'.    if 
+0003a4b0: 7372 635f 7479 7065 2069 6e20 5b27 6c69  src_type in ['li
+0003a4c0: 7374 272c 2773 7472 275d 2061 6e64 2073  st','str'] and s
+0003a4d0: 7263 3a0a 2020 2020 2020 2020 7372 633d  rc:.        src=
+0003a4e0: 6c69 7374 2873 7263 290a 2020 2020 2020  list(src).      
+0003a4f0: 2020 6966 2074 6f20 3d3d 2027 6c61 7374    if to == 'last
+0003a500: 273a 2074 6f3d 2d31 0a20 2020 2020 2020  ': to=-1.       
+0003a510: 2065 6c69 6620 746f 203d 3d20 2766 6972   elif to == 'fir
+0003a520: 7374 273a 2074 6f3d 300a 2020 2020 2020  st': to=0.      
+0003a530: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0003a540: 6672 6f6d 5f69 6478 2c69 6e74 2920 616e  from_idx,int) an
+0003a550: 6420 6973 696e 7374 616e 6365 2874 6f2c  d isinstance(to,
+0003a560: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
+0003a570: 2020 6966 206c 656e 2873 7263 2920 3e20    if len(src) > 
+0003a580: 6162 7328 6672 6f6d 5f69 6478 293a 0a20  abs(from_idx):. 
+0003a590: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0003a5a0: 6f3d 4669 7849 6e64 6578 2873 7263 2c74  o=FixIndex(src,t
+0003a5b0: 6f29 0a20 2020 2020 2020 2020 2020 2020  o).             
+0003a5c0: 2020 2069 6620 6672 6f6d 5f69 6478 213d     if from_idx!=
+0003a5d0: 746f 3a0a 2020 2020 2020 2020 2020 2020  to:.            
+0003a5e0: 2020 2020 2020 2020 6966 2074 6f20 3d3d          if to ==
+0003a5f0: 202d 313a 0a20 2020 2020 2020 2020 2020   -1:.           
+0003a600: 2020 2020 2020 2020 2020 2020 2073 7263               src
+0003a610: 2e61 7070 656e 6428 7372 635b 6672 6f6d  .append(src[from
+0003a620: 5f69 6478 5d29 0a20 2020 2020 2020 2020  _idx]).         
+0003a630: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0003a640: 746f 203d 3d20 303a 0a20 2020 2020 2020  to == 0:.       
+0003a650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003a660: 2073 7263 3d5b 7372 635b 6672 6f6d 5f69   src=[src[from_i
+0003a670: 6478 5d5d 2b73 7263 0a20 2020 2020 2020  dx]]+src.       
+0003a680: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0003a690: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0003a6a0: 2020 2020 2020 2020 2020 2073 7263 3d73             src=s
+0003a6b0: 7263 5b3a 746f 5d2b 5b73 7263 5b66 726f  rc[:to]+[src[fro
+0003a6c0: 6d5f 6964 785d 5d2b 7372 635b 746f 3a5d  m_idx]]+src[to:]
+0003a6d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003a6e0: 2020 2020 2073 7263 5b74 6f5d 3d73 7263       src[to]=src
+0003a6f0: 5b66 726f 6d5f 6964 785d 0a20 2020 2020  [from_idx].     
+0003a700: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+0003a710: 656c 2073 7263 5b66 726f 6d5f 6964 785d  el src[from_idx]
+0003a720: 0a20 2020 2020 2020 2065 6c69 6620 6e6f  .        elif no
+0003a730: 7420 4973 4e6f 6e65 2864 6174 6129 2061  t IsNone(data) a
+0003a740: 6e64 2069 7369 6e73 7461 6e63 6528 746f  nd isinstance(to
+0003a750: 2c69 6e74 293a 0a20 2020 2020 2020 2020  ,int):.         
+0003a760: 2020 2074 6f3d 4669 7849 6e64 6578 2873     to=FixIndex(s
+0003a770: 7263 2c74 6f29 0a20 2020 2020 2020 2020  rc,to).         
+0003a780: 2020 2073 7263 3d5b 6920 666f 7220 6920     src=[i for i 
+0003a790: 696e 2073 7263 2069 6620 6921 3d64 6174  in src if i!=dat
+0003a7a0: 615d 0a20 2020 2020 2020 2020 2020 2069  a].            i
+0003a7b0: 6620 746f 203d 3d20 2d31 3a0a 2020 2020  f to == -1:.    
+0003a7c0: 2020 2020 2020 2020 2020 2020 7372 632e              src.
+0003a7d0: 6170 7065 6e64 2864 6174 6129 0a20 2020  append(data).   
+0003a7e0: 2020 2020 2020 2020 2065 6c69 6620 746f           elif to
+0003a7f0: 203d 3d20 303a 0a20 2020 2020 2020 2020   == 0:.         
+0003a800: 2020 2020 2020 2073 7263 3d5b 6461 7461         src=[data
+0003a810: 5d2b 7372 630a 2020 2020 2020 2020 2020  ]+src.          
+0003a820: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0003a830: 2020 2020 2020 2020 7372 633d 7372 635b          src=src[
+0003a840: 3a74 6f5d 2b5b 6461 7461 5d2b 7372 635b  :to]+[data]+src[
+0003a850: 746f 3a5d 0a20 2020 2020 2020 2069 6620  to:].        if 
+0003a860: 5f74 7570 6c65 3a20 7265 7475 726e 2074  _tuple: return t
+0003a870: 7570 6c65 2873 7263 290a 2020 2020 2020  uple(src).      
+0003a880: 2020 656c 6966 2073 7263 5f74 7970 6520    elif src_type 
+0003a890: 3d3d 2027 7374 7227 3a20 7265 7475 726e  == 'str': return
+0003a8a0: 204a 6f69 6e28 7372 632c 2727 290a 2020   Join(src,'').  
+0003a8b0: 2020 2020 2020 7265 7475 726e 2073 7263        return src
+0003a8c0: 0a20 2020 2072 6574 7572 6e20 4465 6661  .    return Defa
+0003a8d0: 756c 7428 7372 632c 6465 6661 756c 7429  ult(src,default)
+0003a8e0: 0a0a 6465 6620 5261 6e64 6f6d 286c 656e  ..def Random(len
+0003a8f0: 6774 683d 382c 6d6f 6465 3d4e 6f6e 652c  gth=8,mode=None,
+0003a900: 7374 7273 3d4e 6f6e 652c 2a2a 6f70 7473  strs=None,**opts
+0003a910: 293a 0a20 2020 2027 2727 0a20 2020 206d  ):.    '''.    m
+0003a920: 616b 6520 7261 6e64 6f6d 206e 756d 6265  ake random numbe
+0003a930: 722f 7374 7269 6e67 2f63 6861 7261 6374  r/string/charact
+0003a940: 6572 730a 2020 2020 6c65 6e67 7468 2020  ers.    length  
+0003a950: 203a 2072 616e 646f 6d20 7374 7269 6e67   : random string
+0003a960: 206c 656e 6774 6820 2864 6566 6175 6c74   length (default
+0003a970: 3a20 3829 0a20 2020 206d 6f64 6520 2864  : 8).    mode (d
+0003a980: 6566 6175 6c74 3a20 416c 7068 616e 756d  efault: Alphanum
+0003a990: 290a 2020 2020 202d 2061 6c70 6861 203a  ).     - alpha :
+0003a9a0: 206c 6f77 6572 2061 6c70 6861 6265 740a   lower alphabet.
+0003a9b0: 2020 2020 202d 2041 4c50 4841 203a 2075       - ALPHA : u
+0003a9c0: 7070 6572 2061 6c70 6861 6265 740a 2020  pper alphabet.  
+0003a9d0: 2020 202d 2041 6c70 6861 203a 206c 6f77     - Alpha : low
+0003a9e0: 6572 202b 2075 7070 6572 2061 6c70 6861  er + upper alpha
+0003a9f0: 6265 740a 2020 2020 202d 206e 756d 2020  bet.     - num  
+0003aa00: 203a 206e 756d 6265 720a 2020 2020 202d   : number.     -
+0003aa10: 2063 6861 7220 203a 206c 696e 7578 2063   char  : linux c
+0003aa20: 6f6e 736f 6c65 2075 7361 626c 6520 7379  onsole usable sy
+0003aa30: 6d62 6f6c 2063 6861 7261 6374 6572 730a  mbol characters.
+0003aa40: 2020 2020 202d 2073 796d 2020 203a 2061       - sym   : a
+0003aa50: 6c6c 2073 796d 626f 6c20 6368 6172 6163  ll symbol charac
+0003aa60: 7465 7273 0a20 2020 2020 2d20 636f 6d62  ters.     - comb
+0003aa70: 696e 2061 626f 7665 206d 6f64 6573 2028  in above modes (
+0003aa80: 6578 3a20 416c 7068 616e 756d 290a 2020  ex: Alphanum).  
+0003aa90: 2020 7374 7273 2020 2020 203a 2069 6620    strs     : if 
+0003aaa0: 796f 7520 7761 6e74 206d 616b 6520 6120  you want make a 
+0003aab0: 7261 6e64 6f6d 2073 7472 696e 6720 7769  random string wi
+0003aac0: 7468 2079 6f75 7220 6f77 6e20 7370 6563  th your own spec
+0003aad0: 6961 6c20 6368 6172 6163 7465 7273 0a20  ial characters. 
+0003aae0: 2020 2027 2727 0a20 2020 2061 6c70 6861     '''.    alpha
+0003aaf0: 3d27 6162 6364 6566 6768 696a 6b6c 6d6e  ='abcdefghijklmn
+0003ab00: 6f70 7172 7374 7576 7778 797a 270a 2020  opqrstuvwxyz'.  
+0003ab10: 2020 416c 7068 613d 2741 4243 4445 4647    Alpha='ABCDEFG
+0003ab20: 4849 4a4b 4c4d 4e4f 5051 5253 5455 5657  HIJKLMNOPQRSTUVW
+0003ab30: 5859 5a27 0a20 2020 206e 756d 3d27 3031  XYZ'.    num='01
+0003ab40: 3233 3435 3637 3839 270a 2020 2020 7379  23456789'.    sy
+0003ab50: 6d62 6f6c 3d27 2727 7e21 4023 2425 5e5f  mbol='''~!@#$%^_
+0003ab60: 2b2d 3d7b 7d5b 5d3a 2c2e 2727 270a 2020  +-={}[]:,.'''.  
+0003ab70: 2020 5379 6d62 6f6c 3d27 2727 602a 2829    Symbol='''`*()
+0003ab80: 267c 5c5c 273b 222f 693c 3e3f 2727 270a  &|\\';"/i<>?'''.
+0003ab90: 2020 2020 7370 6163 653d 2720 270a 2020      space=' '.  
+0003aba0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
+0003abb0: 6e63 6528 7374 7273 2c73 7472 2920 6f72  nce(strs,str) or
+0003abc0: 206e 6f74 2073 7472 733a 0a20 2020 2020   not strs:.     
+0003abd0: 2020 2073 7472 733d 2727 0a20 2020 2020     strs=''.     
+0003abe0: 2020 2069 6620 6d6f 6465 2069 6e20 5b27     if mode in ['
+0003abf0: 616c 6c27 2c27 2a27 5d3a 0a20 2020 2020  all','*']:.     
+0003ac00: 2020 2020 2020 2073 7472 733d 616c 7068         strs=alph
+0003ac10: 612b 416c 7068 612b 6e75 6d2b 7379 6d62  a+Alpha+num+symb
+0003ac20: 6f6c 2b53 796d 626f 6c2b 7370 6163 650a  ol+Symbol+space.
+0003ac30: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
+0003ac40: 6e73 7461 6e63 6528 6d6f 6465 2c73 7472  nstance(mode,str
+0003ac50: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+0003ac60: 6620 2761 6c70 6861 2720 696e 206d 6f64  f 'alpha' in mod
+0003ac70: 653a 2073 7472 733d 616c 7068 610a 2020  e: strs=alpha.  
+0003ac80: 2020 2020 2020 2020 2020 6966 2027 416c            if 'Al
+0003ac90: 7068 6127 2069 6e20 6d6f 6465 3a20 7374  pha' in mode: st
+0003aca0: 7273 3d61 6c70 6861 2b41 6c70 6861 0a20  rs=alpha+Alpha. 
+0003acb0: 2020 2020 2020 2020 2020 2069 6620 2741             if 'A
+0003acc0: 4c50 4841 2720 696e 206d 6f64 653a 2073  LPHA' in mode: s
+0003acd0: 7472 733d 416c 7068 610a 2020 2020 2020  trs=Alpha.      
+0003ace0: 2020 2020 2020 6966 2027 6e75 6d27 2069        if 'num' i
+0003acf0: 6e20 6d6f 6465 3a20 7374 7273 3d73 7472  n mode: strs=str
+0003ad00: 732b 6e75 6d0a 2020 2020 2020 2020 2020  s+num.          
+0003ad10: 2020 6966 2027 6368 6172 2720 696e 206d    if 'char' in m
+0003ad20: 6f64 653a 2073 7472 733d 7374 7273 2b73  ode: strs=strs+s
+0003ad30: 796d 626f 6c0a 2020 2020 2020 2020 2020  ymbol.          
+0003ad40: 2020 656c 6966 2027 7379 6d27 2069 6e20    elif 'sym' in 
+0003ad50: 6d6f 6465 3a20 7374 7273 3d73 7472 732b  mode: strs=strs+
+0003ad60: 7379 6d62 6f6c 2b53 796d 626f 6c2b 7370  symbol+Symbol+sp
+0003ad70: 6163 650a 2020 2020 6966 206e 6f74 2073  ace.    if not s
+0003ad80: 7472 733a 2073 7472 733d 616c 7068 612b  trs: strs=alpha+
+0003ad90: 416c 7068 612b 6e75 6d0a 2020 2020 7374  Alpha+num.    st
+0003ada0: 726e 3d6c 656e 2873 7472 7329 2d31 0a20  rn=len(strs)-1. 
+0003adb0: 2020 2073 7472 613d 6c69 7374 2873 7472     stra=list(str
+0003adc0: 7329 0a20 2020 206f 7574 3d5b 5d0a 2020  s).    out=[].  
+0003add0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+0003ade0: 2830 2c6c 656e 6774 6829 3a0a 2020 2020  (0,length):.    
+0003adf0: 2020 2020 7261 6e64 6f6d 2e73 6875 6666      random.shuff
+0003ae00: 6c65 2873 7472 6129 0a20 2020 2020 2020  le(stra).       
+0003ae10: 206f 7574 2e61 7070 656e 6428 7374 7261   out.append(stra
+0003ae20: 5b72 616e 646f 6d2e 7261 6e64 696e 7428  [random.randint(
+0003ae30: 302c 7374 726e 295d 290a 2020 2020 7265  0,strn)]).    re
+0003ae40: 7475 726e 2069 6e74 2827 272e 6a6f 696e  turn int(''.join
+0003ae50: 286f 7574 2929 2069 6620 6d6f 6465 203d  (out)) if mode =
+0003ae60: 3d20 276e 756d 2720 656c 7365 2027 272e  = 'num' else ''.
+0003ae70: 6a6f 696e 286f 7574 290a 0a64 6566 2049  join(out)..def I
+0003ae80: 7341 6c6c 5361 6d65 5374 7228 7372 632c  sAllSameStr(src,
+0003ae90: 6669 6e64 293a 0a20 2020 2027 2727 4368  find):.    '''Ch
+0003aea0: 6563 6b20 696e 7075 7420 7374 7269 6e67  eck input string
+0003aeb0: 2069 7320 416c 6c20 7361 6d65 2073 7472   is All same str
+0003aec0: 696e 6720 6f72 206e 6f74 2727 270a 2020  ing or not'''.  
+0003aed0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0003aee0: 7372 632c 7374 7229 2061 6e64 2069 7369  src,str) and isi
+0003aef0: 6e73 7461 6e63 6528 6669 6e64 2c73 7472  nstance(find,str
+0003af00: 293a 0a20 2020 2020 2020 2069 6620 7372  ):.        if sr
+0003af10: 632e 636f 756e 7428 6669 6e64 2920 3d3d  c.count(find) ==
+0003af20: 206c 656e 2873 7263 292f 6c65 6e28 6669   len(src)/len(fi
+0003af30: 6e64 293a 0a20 2020 2020 2020 2020 2020  nd):.           
+0003af40: 2072 6574 7572 6e20 5472 7565 0a20 2020   return True.   
+0003af50: 2072 6574 7572 6e20 4661 6c73 650a 0a64   return False..d
+0003af60: 6566 204d 6b54 656d 7028 6669 6c65 6e61  ef MkTemp(filena
+0003af70: 6d65 3d4e 6f6e 652c 7375 6666 6978 3d4e  me=None,suffix=N
+0003af80: 6f6e 652c 7370 6c69 743d 272d 272c 6f70  one,split='-',op
+0003af90: 743d 2764 7279 272c 6261 7365 5f64 6972  t='dry',base_dir
+0003afa0: 3d4e 6f6e 652c 756e 6971 3d46 616c 7365  =None,uniq=False
+0003afb0: 2c64 6566 6175 6c74 5f6c 656e 6774 683d  ,default_length=
+0003afc0: 382c 6d6f 6465 3d4e 6f6e 652c 2a2a 6f70  8,mode=None,**op
+0003afd0: 7473 293a 0a20 2020 2027 2727 0a20 2020  ts):.    '''.   
+0003afe0: 206d 616b 6520 6120 7261 6e64 6f6d 2073   make a random s
+0003aff0: 7472 696e 670a 2020 2020 6669 6c65 6e61  tring.    filena
+0003b000: 6d65 3a20 0a20 2020 2020 204e 6f6e 6520  me: .      None 
+0003b010: 203a 2067 656e 6572 6174 6520 7261 6e64   : generate rand
+0003b020: 6f6d 2073 7472 696e 670a 2020 2020 2020  om string.      
+0003b030: 6162 632d 5858 5858 582e 6c6f 6720 3a20  abc-XXXXX.log : 
+0003b040: 6162 632d 3c72 616e 646f 6d20 3520 6368  abc-<random 5 ch
+0003b050: 6172 6163 7465 7273 3e2e 6c6f 670a 2020  aracters>.log.  
+0003b060: 2020 2020 6162 632d 4e4e 4e2d 6162 6364      abc-NNN-abcd
+0003b070: 2e6c 6f67 2020 203a 2061 6263 2d3c 7261  .log   : abc-<ra
+0003b080: 6e64 6f6d 2033 206e 756d 6265 7273 3e2d  ndom 3 numbers>-
+0003b090: 6162 6364 2e6c 6f67 0a20 2020 2020 2061  abcd.log.      a
+0003b0a0: 6263 2e6c 6f67 2d58 5858 5820 203a 2061  bc.log-XXXX  : a
+0003b0b0: 6263 2e6c 6f67 2d3c 7261 6e64 6f6d 2034  bc.log-<random 4
+0003b0c0: 2063 6861 7261 6374 6572 733e 0a20 2020   characters>.   
+0003b0d0: 2073 7566 6669 7820 203a 2069 6620 796f   suffix  : if yo
+0003b0e0: 7520 6e65 6564 2061 6464 696e 6720 6669  u need adding fi
+0003b0f0: 6c65 2065 7874 616e 6428 7375 6666 6978  le extand(suffix
+0003b100: 2920 2865 783a 2073 7566 6669 783d 276c  ) (ex: suffix='l
+0003b110: 6f67 2720 3d3e 2058 5858 5858 2e6c 6f67  og' => XXXXX.log
+0003b120: 290a 2020 2020 7370 6c69 7420 2020 3a20  ).    split   : 
+0003b130: 6465 6661 756c 7420 2d2c 2073 706c 6974  default -, split
+0003b140: 2073 796d 626f 6c20 666f 7220 7468 6520   symbol for the 
+0003b150: 6669 6c65 6e61 6d65 0a20 2020 206f 7074  filename.    opt
+0003b160: 0a20 2020 2020 202d 2064 7279 203a 2064  .      - dry : d
+0003b170: 7279 2072 756e 2028 7265 7475 726e 2073  ry run (return s
+0003b180: 7472 696e 6729 2864 6566 6175 6c74 290a  tring)(default).
+0003b190: 2020 2020 2020 2d20 6669 6c65 3a20 6d61        - file: ma
+0003b1a0: 6b65 2061 2066 696c 650a 2020 2020 2020  ke a file.      
+0003b1b0: 2d20 6469 7220 3a20 6d61 6b65 2061 2064  - dir : make a d
+0003b1c0: 6972 6563 746f 7279 0a20 2020 2062 6173  irectory.    bas
+0003b1d0: 655f 6469 723a 2069 6620 796f 7520 7761  e_dir: if you wa
+0003b1e0: 6e74 2061 2073 7472 696e 6720 756e 6465  nt a string unde
+0003b1f0: 7220 6261 7365 5f64 6972 0a20 2020 2075  r base_dir.    u
+0003b200: 6e69 7120 2020 203a 2069 6620 796f 7520  niq    : if you 
+0003b210: 7761 6e74 206d 616b 6520 6120 756e 6971  want make a uniq
+0003b220: 2073 7472 696e 6720 286e 6f74 2065 7869   string (not exi
+0003b230: 7374 696e 6720 6669 6c65 6e61 6d65 2069  sting filename i
+0003b240: 6e20 7468 6520 2862 6173 655f 6469 7229  n the (base_dir)
+0003b250: 6469 7265 6374 6f72 7929 0a20 2020 2020  directory).     
+0003b260: 2073 6569 7269 616c 2069 6e63 7265 6173   seirial increas
+0003b270: 6520 6e75 6d62 6572 0a20 2020 2020 2020  e number.       
+0003b280: 2069 6620 6578 6973 7420 6162 632e 6c6f   if exist abc.lo
+0003b290: 6720 7468 656e 2061 6263 2e6c 6f67 2d30  g then abc.log-0
+0003b2a0: 3030 3030 3030 300a 2020 2020 2020 2020  0000000.        
+0003b2b0: 6966 2065 7869 7374 2061 6263 2e6c 6f67  if exist abc.log
+0003b2c0: 2c61 6263 2e6c 6f67 2d30 3030 3030 3030  ,abc.log-0000000
+0003b2d0: 3020 7468 656e 2061 6263 2e6c 6f67 2d30  0 then abc.log-0
+0003b2e0: 3030 3030 3030 310a 2020 2020 2020 6669  0000001.      fi
+0003b2f0: 6c65 6e61 6d65 3d27 6162 6327 2c73 7566  lename='abc',suf
+0003b300: 6669 783d 276c 6f67 272c 756e 6971 3d54  fix='log',uniq=T
+0003b310: 7275 650a 2020 2020 2020 2020 6966 2065  rue.        if e
+0003b320: 7869 7374 2061 6263 2e6c 6f67 2074 6865  xist abc.log the
+0003b330: 6e20 6162 632d 3030 3030 3030 3030 2e6c  n abc-00000000.l
+0003b340: 6f67 0a20 2020 2020 2020 2069 6620 6578  og.        if ex
+0003b350: 6973 7420 6162 632e 6c6f 672c 6162 632d  ist abc.log,abc-
+0003b360: 3030 3030 3030 3030 2e6c 6f67 2074 6865  00000000.log the
+0003b370: 6e20 6162 632d 3030 3030 3030 3031 2e6c  n abc-00000001.l
+0003b380: 6f67 0a20 2020 2064 6566 6175 6c74 5f6c  og.    default_l
+0003b390: 656e 6774 683a 2072 616e 646f 6d20 7374  ength: random st
+0003b3a0: 7269 6e67 206c 656e 6774 680a 2020 2020  ring length.    
+0003b3b0: 6d6f 6465 2020 2020 3a20 7261 6e64 6f6d  mode    : random
+0003b3c0: 2073 7472 696e 6720 6d6f 6465 2028 7361   string mode (sa
+0003b3d0: 6d65 2061 7320 5261 6e64 6f6d 2829 2773  me as Random()'s
+0003b3e0: 206d 6f64 6529 0a20 2020 2063 7573 746f   mode).    custo
+0003b3f0: 6d20 203a 2063 7573 746f 6d20 7261 6e64  m  : custom rand
+0003b400: 6f6d 2073 7472 696e 6720 736f 7572 6365  om string source
+0003b410: 2028 7361 6d65 2061 7320 5261 6e64 6f6d   (same as Random
+0003b420: 2829 2773 2073 7472 7320 7061 7261 6d65  ()'s strs parame
+0003b430: 7465 7229 0a20 2020 2027 2727 0a20 2020  ter).    '''.   
+0003b440: 2023 5375 7070 6f72 7420 4f4c 4420 4d6b   #Support OLD Mk
+0003b450: 5465 6d70 2829 200a 2020 2020 6966 2069  Temp() .    if i
+0003b460: 7369 6e73 7461 6e63 6528 7375 6666 6978  sinstance(suffix
+0003b470: 2c73 7472 2920 616e 6420 6973 696e 7374  ,str) and isinst
+0003b480: 616e 6365 2866 696c 656e 616d 652c 7374  ance(filename,st
+0003b490: 7229 3a0a 2020 2020 2020 2020 6966 2073  r):.        if s
+0003b4a0: 7566 6669 785b 305d 3d3d 272d 273a 0a20  uffix[0]=='-':. 
+0003b4b0: 2020 2020 2020 2020 2020 2069 6620 4973             if Is
+0003b4c0: 416c 6c53 616d 6553 7472 2873 7566 6669  AllSameStr(suffi
+0003b4d0: 785b 313a 5d2c 2758 2729 206f 7220 4973  x[1:],'X') or Is
+0003b4e0: 416c 6c53 616d 6553 7472 2873 7566 6669  AllSameStr(suffi
+0003b4f0: 785b 313a 5d2c 274e 2729 206f 7220 4973  x[1:],'N') or Is
+0003b500: 416c 6c53 616d 6553 7472 2873 7566 6669  AllSameStr(suffi
+0003b510: 785b 313a 5d2c 2778 2729 206f 7220 4973  x[1:],'x') or Is
+0003b520: 416c 6c53 616d 6553 7472 2873 7566 6669  AllSameStr(suffi
+0003b530: 785b 313a 5d2c 276e 2729 3a0a 2020 2020  x[1:],'n'):.    
+0003b540: 2020 2020 2020 2020 2020 2020 6465 6661              defa
+0003b550: 756c 745f 6c65 6e67 7468 3d6c 656e 2873  ult_length=len(s
+0003b560: 7566 6669 7829 2d31 0a20 2020 2020 2020  uffix)-1.       
+0003b570: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
+0003b580: 653d 6669 6c65 6e61 6d65 2b73 7566 6669  e=filename+suffi
+0003b590: 782e 7570 7065 7228 290a 2020 2020 2320  x.upper().    # 
+0003b5a0: 4e65 7720 6465 7369 676e 0a20 2020 2064  New design.    d
+0003b5b0: 6566 206f 7574 6669 6c65 2866 696c 656e  ef outfile(filen
+0003b5c0: 616d 652c 6f70 7429 3a0a 2020 2020 2020  ame,opt):.      
+0003b5d0: 2020 6966 206f 7074 2069 6e20 5b27 6669    if opt in ['fi
+0003b5e0: 6c65 272c 2766 275d 3a0a 2020 2020 2020  le','f']:.      
+0003b5f0: 2020 2020 206f 732e 6d6b 6e6f 6465 2866       os.mknode(f
+0003b600: 696c 656e 616d 6529 0a20 2020 2020 2020  ilename).       
+0003b610: 2065 6c69 6620 6f70 7420 696e 205b 2764   elif opt in ['d
+0003b620: 6972 272c 2764 272c 2764 6972 6563 746f  ir','d','directo
+0003b630: 7279 275d 3a0a 2020 2020 2020 2020 2020  ry']:.          
+0003b640: 206f 732e 6d6b 6469 7228 6669 6c65 6e61   os.mkdir(filena
+0003b650: 6d65 290a 2020 2020 2020 2020 656c 7365  me).        else
+0003b660: 3a0a 2020 2020 2020 2020 2020 2072 6574  :.           ret
+0003b670: 7572 6e20 6669 6c65 6e61 6d65 0a0a 2020  urn filename..  
+0003b680: 2020 6465 6620 6d6b 5f66 696c 656e 616d    def mk_filenam
+0003b690: 6528 6669 6c65 6e61 6d65 2c73 706c 6974  e(filename,split
+0003b6a0: 293a 0a20 2020 2020 2020 2066 696c 656e  ):.        filen
+0003b6b0: 616d 655f 613d 6669 6c65 6e61 6d65 2e73  ame_a=filename.s
+0003b6c0: 706c 6974 2873 706c 6974 290a 2020 2020  plit(split).    
+0003b6d0: 2020 2020 6669 6c65 6e61 6d65 5f6e 3d6c      filename_n=l
+0003b6e0: 656e 2866 696c 656e 616d 655f 6129 0a20  en(filename_a). 
+0003b6f0: 2020 2020 2020 2073 7373 3d4e 6f6e 650a         sss=None.
+0003b700: 2020 2020 2020 2020 666f 7220 6666 2069          for ff i
+0003b710: 6e20 7261 6e67 6528 302c 6669 6c65 6e61  n range(0,filena
+0003b720: 6d65 5f6e 293a 0a20 2020 2020 2020 2020  me_n):.         
+0003b730: 2020 2066 6f72 2073 7320 696e 205b 274e     for ss in ['N
+0003b740: 272c 2758 275d 3a0a 2020 2020 2020 2020  ','X']:.        
+0003b750: 2020 2020 2020 2020 6966 2049 7341 6c6c          if IsAll
+0003b760: 5361 6d65 5374 7228 6669 6c65 6e61 6d65  SameStr(filename
+0003b770: 5f61 5b66 665d 2c73 7329 3a0a 2020 2020  _a[ff],ss):.    
+0003b780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b790: 7373 733d 7373 0a20 2020 2020 2020 2020  sss=ss.         
+0003b7a0: 2020 2020 2020 2020 2020 2069 6620 6666             if ff
+0003b7b0: 203c 2066 696c 656e 616d 655f 6e2d 313a   < filename_n-1:
+0003b7c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003b7d0: 2020 2020 2020 2020 2061 613d 5261 6e64           aa=Rand
+0003b7e0: 6f6d 286c 656e 6774 683d 6c65 6e28 6669  om(length=len(fi
+0003b7f0: 6c65 6e61 6d65 5f61 5b66 665d 292c 6d6f  lename_a[ff]),mo
+0003b800: 6465 3d27 6e75 6d27 2069 6620 7373 7320  de='num' if sss 
+0003b810: 3d3d 2027 4e27 2065 6c73 6520 6d6f 6465  == 'N' else mode
+0003b820: 2c73 7472 733d 6f70 7473 2e67 6574 2827  ,strs=opts.get('
+0003b830: 6375 7374 6f6d 2729 290a 2020 2020 2020  custom')).      
+0003b840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b850: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0003b860: 6161 2c69 6e74 293a 0a20 2020 2020 2020  aa,int):.       
+0003b870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b880: 2020 2020 2066 696c 656e 616d 655f 615b       filename_a[
+0003b890: 6666 5d3d 2725 307b 7d64 272e 666f 726d  ff]='%0{}d'.form
+0003b8a0: 6174 286c 656e 2866 696c 656e 616d 655f  at(len(filename_
+0003b8b0: 615b 6666 5d29 2925 6161 0a20 2020 2020  a[ff]))%aa.     
+0003b8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b8d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0003b8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b8f0: 2020 2020 2066 696c 656e 616d 655f 615b       filename_a[
+0003b900: 6666 5d3d 277b 7d27 2e66 6f72 6d61 7428  ff]='{}'.format(
+0003b910: 6161 290a 2020 2020 2020 2020 6669 6c65  aa).        file
 0003b920: 6e61 6d65 5f6c 6173 745f 7375 6666 6978  name_last_suffix
-0003b930: 292c 6d6f 6465 3d27 6e75 6d27 2069 6620  ),mode='num' if 
-0003b940: 7373 203d 3d20 274e 2720 656c 7365 206d  ss == 'N' else m
-0003b950: 6f64 652c 7374 7273 3d6f 7074 732e 6765  ode,strs=opts.ge
-0003b960: 7428 2763 7573 746f 6d27 2929 0a20 2020  t('custom')).   
-0003b970: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0003b980: 6973 696e 7374 616e 6365 2861 612c 696e  isinstance(aa,in
-0003b990: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-0003b9a0: 2020 2020 2020 2020 6669 6c65 6e61 6d65          filename
-0003b9b0: 5f61 5b2d 315d 3d27 2530 7b7d 6427 2e66  _a[-1]='%0{}d'.f
-0003b9c0: 6f72 6d61 7428 6c65 6e28 6669 6c65 6e61  ormat(len(filena
-0003b9d0: 6d65 5f6c 6173 745f 7375 6666 6978 2929  me_last_suffix))
-0003b9e0: 2561 610a 2020 2020 2020 2020 2020 2020  %aa.            
-0003b9f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0003ba00: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-0003ba10: 6c65 6e61 6d65 5f61 5b2d 315d 3d27 7b7d  lename_a[-1]='{}
-0003ba20: 272e 666f 726d 6174 2861 6129 0a20 2020  '.format(aa).   
-0003ba30: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0003ba40: 6669 6c65 6e61 6d65 5f6c 6173 745f 6578  filename_last_ex
-0003ba50: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-0003ba60: 2020 2020 2020 2066 696c 656e 616d 655f         filename_
-0003ba70: 615b 2d31 5d3d 6669 6c65 6e61 6d65 5f61  a[-1]=filename_a
-0003ba80: 5b2d 315d 2b27 2e7b 7d27 2e66 6f72 6d61  [-1]+'.{}'.forma
-0003ba90: 7428 6669 6c65 6e61 6d65 5f6c 6173 745f  t(filename_last_
-0003baa0: 6578 7429 0a20 2020 2020 2020 2072 6574  ext).        ret
-0003bab0: 7572 6e20 7370 6c69 742e 6a6f 696e 2866  urn split.join(f
-0003bac0: 696c 656e 616d 655f 6129 0a0a 2020 2020  ilename_a)..    
-0003bad0: 6966 2049 734e 6f6e 6528 6669 6c65 6e61  if IsNone(filena
-0003bae0: 6d65 2920 6f72 206e 6f74 2069 7369 6e73  me) or not isins
-0003baf0: 7461 6e63 6528 6669 6c65 6e61 6d65 2c73  tance(filename,s
-0003bb00: 7472 293a 0a20 2020 2020 2020 2072 6669  tr):.        rfi
-0003bb10: 6c65 6e61 6d65 3d52 616e 646f 6d28 6c65  lename=Random(le
-0003bb20: 6e67 7468 3d64 6566 6175 6c74 5f6c 656e  ngth=default_len
-0003bb30: 6774 682c 6d6f 6465 3d27 6e75 6d27 2069  gth,mode='num' i
-0003bb40: 6620 7375 6666 6978 2069 6e20 5b27 6e27  f suffix in ['n'
-0003bb50: 2c27 4e27 5d20 656c 7365 206d 6f64 652c  ,'N'] else mode,
-0003bb60: 7374 7273 3d6f 7074 732e 6765 7428 2763  strs=opts.get('c
-0003bb70: 7573 746f 6d27 2929 0a20 2020 2020 2020  ustom')).       
-0003bb80: 2062 6173 655f 6469 723d 272e 2720 6966   base_dir='.' if
-0003bb90: 206e 6f74 2062 6173 655f 6469 7220 656c   not base_dir el
-0003bba0: 7365 2062 6173 655f 6469 720a 2020 2020  se base_dir.    
-0003bbb0: 656c 7365 3a0a 2020 2020 2020 2020 6261  else:.        ba
-0003bbc0: 7365 5f64 6972 3d6f 732e 7061 7468 2e64  se_dir=os.path.d
-0003bbd0: 6972 6e61 6d65 2866 696c 656e 616d 6529  irname(filename)
-0003bbe0: 0a20 2020 2020 2020 2062 6173 655f 6469  .        base_di
-0003bbf0: 723d 272e 2720 6966 206e 6f74 2062 6173  r='.' if not bas
-0003bc00: 655f 6469 7220 656c 7365 2062 6173 655f  e_dir else base_
-0003bc10: 6469 720a 2020 2020 2020 2020 7266 696c  dir.        rfil
-0003bc20: 656e 616d 653d 6d6b 5f66 696c 656e 616d  ename=mk_filenam
-0003bc30: 6528 6f73 2e70 6174 682e 6261 7365 6e61  e(os.path.basena
-0003bc40: 6d65 2866 696c 656e 616d 6529 2c73 706c  me(filename),spl
-0003bc50: 6974 290a 2020 2020 6966 2075 6e69 713a  it).    if uniq:
-0003bc60: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-0003bc70: 7374 616e 6365 2862 6173 655f 6469 722c  stance(base_dir,
-0003bc80: 7374 7229 2061 6e64 206f 732e 7061 7468  str) and os.path
-0003bc90: 2e69 7364 6972 2862 6173 655f 6469 7229  .isdir(base_dir)
-0003bca0: 3a0a 2020 2020 2020 2020 2020 2020 696e  :.            in
-0003bcb0: 633d 4661 6c73 650a 2020 2020 2020 2020  c=False.        
-0003bcc0: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
-0003bcd0: 6765 2830 2c31 3030 3029 3a0a 2020 2020  ge(0,1000):.    
-0003bce0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-0003bcf0: 6e63 3a0a 2020 2020 2020 2020 2020 2020  nc:.            
-0003bd00: 2020 2020 2020 2020 6e65 775f 6669 6c65          new_file
-0003bd10: 6e61 6d65 3d72 6669 6c65 6e61 6d65 2b27  name=rfilename+'
-0003bd20: 7b7d 2530 7b7d 6427 2e66 6f72 6d61 7428  {}%0{}d'.format(
-0003bd30: 7370 6c69 742c 6465 6661 756c 745f 6c65  split,default_le
-0003bd40: 6e67 7468 2925 2869 2d31 290a 2020 2020  ngth)%(i-1).    
-0003bd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bd60: 6966 2073 7566 6669 783a 0a20 2020 2020  if suffix:.     
-0003bd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bd80: 2020 206e 6577 5f66 696c 656e 616d 653d     new_filename=
-0003bd90: 6e65 775f 6669 6c65 6e61 6d65 2b27 2e7b  new_filename+'.{
-0003bda0: 7d27 2e66 6f72 6d61 7428 7375 6666 6978  }'.format(suffix
-0003bdb0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0003bdc0: 2020 2020 2020 6e65 775f 6669 6c65 3d6f        new_file=o
-0003bdd0: 732e 7061 7468 2e6a 6f69 6e28 6261 7365  s.path.join(base
-0003bde0: 5f64 6972 2c6e 6577 5f66 696c 656e 616d  _dir,new_filenam
-0003bdf0: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-0003be00: 2020 2020 2020 2069 6620 6e6f 7420 6f73         if not os
-0003be10: 2e70 6174 682e 6578 6973 7473 286e 6577  .path.exists(new
-0003be20: 5f66 696c 6529 3a0a 2020 2020 2020 2020  _file):.        
-0003be30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003be40: 7265 7475 726e 206f 7574 6669 6c65 286e  return outfile(n
-0003be50: 6577 5f66 696c 652c 6f70 7429 0a20 2020  ew_file,opt).   
-0003be60: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0003be70: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0003be80: 2020 2020 2020 206e 6577 5f66 696c 656e         new_filen
-0003be90: 616d 653d 6d6b 5f66 696c 656e 616d 6528  ame=mk_filename(
-0003bea0: 7266 696c 656e 616d 652c 7370 6c69 7429  rfilename,split)
-0003beb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003bec0: 2020 2020 2069 6620 6e65 775f 6669 6c65       if new_file
-0003bed0: 6e61 6d65 203d 3d20 7266 696c 656e 616d  name == rfilenam
-0003bee0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0003bef0: 2020 2020 2020 2020 2020 2069 6e63 3d54             inc=T
-0003bf00: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-0003bf10: 2020 2020 2020 2020 6966 2073 7566 6669          if suffi
-0003bf20: 783a 0a20 2020 2020 2020 2020 2020 2020  x:.             
-0003bf30: 2020 2020 2020 2020 2020 206e 6577 5f66             new_f
-0003bf40: 696c 656e 616d 653d 6e65 775f 6669 6c65  ilename=new_file
-0003bf50: 6e61 6d65 2b27 2e7b 7d27 2e66 6f72 6d61  name+'.{}'.forma
-0003bf60: 7428 7375 6666 6978 290a 2020 2020 2020  t(suffix).      
-0003bf70: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-0003bf80: 775f 6669 6c65 3d6f 732e 7061 7468 2e6a  w_file=os.path.j
-0003bf90: 6f69 6e28 6261 7365 5f64 6972 2c6e 6577  oin(base_dir,new
-0003bfa0: 5f66 696c 656e 616d 6529 0a20 2020 2020  _filename).     
-0003bfb0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0003bfc0: 6620 6e6f 7420 6f73 2e70 6174 682e 6578  f not os.path.ex
-0003bfd0: 6973 7473 286e 6577 5f66 696c 6529 3a0a  ists(new_file):.
-0003bfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bff0: 2020 2020 2020 2020 7265 7475 726e 206f          return o
-0003c000: 7574 6669 6c65 286e 6577 5f66 696c 652c  utfile(new_file,
-0003c010: 6f70 7429 0a20 2020 2065 6c73 653a 0a20  opt).    else:. 
-0003c020: 2020 2020 2020 2069 6620 6261 7365 5f64         if base_d
-0003c030: 6972 203d 3d20 272e 273a 0a20 2020 2020  ir == '.':.     
-0003c040: 2020 2020 2020 2069 6620 7375 6666 6978         if suffix
-0003c050: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003c060: 2020 7265 7475 726e 2072 6669 6c65 6e61    return rfilena
-0003c070: 6d65 2b27 2e7b 7d27 2e66 6f72 6d61 7428  me+'.{}'.format(
-0003c080: 7375 6666 6978 290a 2020 2020 2020 2020  suffix).        
-0003c090: 2020 2020 7265 7475 726e 2072 6669 6c65      return rfile
-0003c0a0: 6e61 6d65 0a20 2020 2020 2020 2072 6574  name.        ret
-0003c0b0: 7572 6e20 6f75 7466 696c 6528 6f73 2e70  urn outfile(os.p
-0003c0c0: 6174 682e 6a6f 696e 2862 6173 655f 6469  ath.join(base_di
-0003c0d0: 722c 7266 696c 656e 616d 6529 2c6f 7074  r,rfilename),opt
-0003c0e0: 290a 0a64 6566 206f 7376 6572 7369 6f6e  )..def osversion
-0003c0f0: 286d 6f64 653d 2775 7070 6572 2729 3a0a  (mode='upper'):.
-0003c100: 2020 2020 5f70 6c61 7466 6f72 6d3d 706c      _platform=pl
-0003c110: 6174 666f 726d 2e73 7973 7465 6d28 290a  atform.system().
-0003c120: 2020 2020 2336 3462 6974 3a20 706c 6174      #64bit: plat
-0003c130: 666f 726d 2e61 7263 6869 7465 6374 7572  form.architectur
-0003c140: 6528 295b 305d 0a20 2020 206d 6f64 653d  e()[0].    mode=
-0003c150: 276c 2720 6966 2049 7353 616d 6528 6d6f  'l' if IsSame(mo
-0003c160: 6465 2c27 6c6f 7765 7227 2920 656c 7365  de,'lower') else
-0003c170: 2027 7527 0a0a 2020 2020 6f75 743d 7b0a   'u'..    out={.
-0003c180: 2020 2020 2020 2027 706c 6174 666f 726d         'platform
-0003c190: 273a 5f70 6c61 7466 6f72 6d2e 6c6f 7765  ':_platform.lowe
-0003c1a0: 7228 2920 6966 206d 6f64 6520 3d3d 2027  r() if mode == '
-0003c1b0: 6c27 2065 6c73 6520 5f70 6c61 7466 6f72  l' else _platfor
-0003c1c0: 6d2e 7570 7065 7228 292c 0a20 2020 2020  m.upper(),.     
-0003c1d0: 2020 276e 616d 6527 3a4e 6f6e 652c 0a20    'name':None,. 
-0003c1e0: 2020 2020 2020 2776 6572 7369 6f6e 273a        'version':
-0003c1f0: 4e6f 6e65 2c0a 2020 2020 2020 2027 6578  None,.       'ex
-0003c200: 7427 3a4e 6f6e 652c 0a20 2020 2020 2020  t':None,.       
-0003c210: 2736 3462 6974 273a 7379 732e 6d61 7873  '64bit':sys.maxs
-0003c220: 697a 6520 3e20 322a 2a33 322c 0a20 2020  ize > 2**32,.   
-0003c230: 2020 2020 2763 6f64 6527 3a4e 6f6e 650a      'code':None.
-0003c240: 2020 2020 7d0a 2020 2020 6966 2027 4c69      }.    if 'Li
-0003c250: 6e75 7827 203d 3d20 5f70 6c61 7466 6f72  nux' == _platfor
-0003c260: 6d3a 0a20 2020 2020 2020 2072 743d 7273  m:.        rt=rs
-0003c270: 6865 6c6c 2827 2727 5b20 2d66 202f 6574  hell('''[ -f /et
-0003c280: 632f 6f73 2d72 656c 6561 7365 205d 2026  c/os-release ] &
-0003c290: 2620 2820 2e20 2f65 7463 2f6f 732d 7265  & ( . /etc/os-re
-0003c2a0: 6c65 6173 6520 3b20 6563 686f 2024 4944  lease ; echo $ID
-0003c2b0: 2927 2727 290a 2020 2020 2020 2020 6f75  )''').        ou
-0003c2c0: 745b 276e 616d 6527 5d3d 7274 5b31 5d2e  t['name']=rt[1].
-0003c2d0: 6c6f 7765 7228 2920 6966 206d 6f64 6520  lower() if mode 
-0003c2e0: 3d3d 2027 6c27 2065 6c73 6520 7274 5b31  == 'l' else rt[1
-0003c2f0: 5d2e 7570 7065 7228 290a 2020 2020 2020  ].upper().      
-0003c300: 2020 6966 2049 7349 6e28 6f75 745b 276e    if IsIn(out['n
-0003c310: 616d 6527 5d2c 2827 7562 756e 7475 272c  ame'],('ubuntu',
-0003c320: 2752 6173 7062 6961 6e27 2c27 4665 646f  'Raspbian','Fedo
-0003c330: 7261 2729 293a 0a20 2020 2020 2020 2020  ra')):.         
-0003c340: 2020 2072 743d 7273 6865 6c6c 2827 2727     rt=rshell('''
-0003c350: 5b20 2d66 202f 6574 632f 6f73 2d72 656c  [ -f /etc/os-rel
-0003c360: 6561 7365 205d 2026 2620 2820 2e20 2f65  ease ] && ( . /e
-0003c370: 7463 2f6f 732d 7265 6c65 6173 6520 3b20  tc/os-release ; 
-0003c380: 6563 686f 2024 5645 5253 494f 4e29 2727  echo $VERSION)''
-0003c390: 2729 0a20 2020 2020 2020 2020 2020 206f  ').            o
-0003c3a0: 7574 5b27 7665 7273 696f 6e27 5d3d 7274  ut['version']=rt
-0003c3b0: 5b31 5d2e 7370 6c69 7428 295b 305d 0a20  [1].split()[0]. 
-0003c3c0: 2020 2020 2020 2020 2020 206f 7574 5b27             out['
-0003c3d0: 6578 7427 5d3d 2720 272e 6a6f 696e 2872  ext']=' '.join(r
-0003c3e0: 745b 315d 2e73 706c 6974 2829 5b31 3a5d  t[1].split()[1:]
-0003c3f0: 290a 2020 2020 2020 2020 2020 2020 7274  ).            rt
-0003c400: 3d72 7368 656c 6c28 2727 275b 202d 6620  =rshell('''[ -f 
-0003c410: 2f65 7463 2f6f 732d 7265 6c65 6173 6520  /etc/os-release 
-0003c420: 5d20 2626 2028 202e 202f 6574 632f 6f73  ] && ( . /etc/os
-0003c430: 2d72 656c 6561 7365 203b 2065 6368 6f20  -release ; echo 
-0003c440: 2456 4552 5349 4f4e 5f43 4f44 454e 414d  $VERSION_CODENAM
-0003c450: 4529 2727 2729 0a20 2020 2020 2020 2020  E)''').         
-0003c460: 2020 206f 7574 5b27 636f 6465 275d 3d72     out['code']=r
-0003c470: 745b 315d 0a20 2020 2020 2020 2065 6c73  t[1].        els
-0003c480: 653a 2023 4365 6e74 6f73 2c20 526f 636b  e: #Centos, Rock
-0003c490: 792c 2052 6564 6861 742c 0a20 2020 2020  y, Redhat,.     
-0003c4a0: 2020 2020 2020 2072 743d 7273 6865 6c6c         rt=rshell
-0003c4b0: 2827 2727 5b20 2d66 202f 6574 632f 7265  ('''[ -f /etc/re
-0003c4c0: 6468 6174 2d72 656c 6561 7365 205d 2026  dhat-release ] &
-0003c4d0: 2620 6361 7420 2f65 7463 2f72 6564 6861  & cat /etc/redha
-0003c4e0: 742d 7265 6c65 6173 6527 2727 290a 2020  t-release''').  
-0003c4f0: 2020 2020 2020 2020 2020 6966 2072 745b            if rt[
-0003c500: 305d 203d 3d20 303a 0a20 2020 2020 2020  0] == 0:.       
-0003c510: 2020 2020 2020 2020 2066 6f72 2069 6920           for ii 
-0003c520: 696e 2072 745b 315d 2e73 706c 6974 2829  in rt[1].split()
-0003c530: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003c540: 2020 2020 2020 6966 2027 2e27 2069 6e20        if '.' in 
-0003c550: 6969 2061 6e64 2069 692e 7370 6c69 7428  ii and ii.split(
-0003c560: 272e 2729 5b30 5d2e 6973 6469 6769 7428  '.')[0].isdigit(
-0003c570: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0003c580: 2020 2020 2020 2020 2020 2069 695f 613d             ii_a=
-0003c590: 6969 2e73 706c 6974 2827 2e27 290a 2020  ii.split('.').  
-0003c5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c5b0: 2020 2020 2020 6f75 745b 2776 6572 7369        out['versi
-0003c5c0: 6f6e 275d 3d27 7b7d 2e7b 7d27 2e66 6f72  on']='{}.{}'.for
-0003c5d0: 6d61 7428 6969 5f61 5b30 5d2c 6969 5f61  mat(ii_a[0],ii_a
-0003c5e0: 5b31 5d29 0a20 2020 2020 2020 2020 2020  [1]).           
-0003c5f0: 2020 2020 2020 2020 2020 2020 206f 7574               out
-0003c600: 5b27 6578 7427 5d3d 6969 5f61 5b2d 315d  ['ext']=ii_a[-1]
-0003c610: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003c620: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
-0003c630: 2020 2065 6c69 6620 2746 7265 6542 5344     elif 'FreeBSD
-0003c640: 2720 3d3d 205f 706c 6174 666f 726d 3a0a  ' == _platform:.
-0003c650: 2020 2020 2020 2020 6f75 745b 276e 616d          out['nam
-0003c660: 6527 5d3d 5f70 6c61 7466 6f72 6d2e 6c6f  e']=_platform.lo
-0003c670: 7765 7228 2920 6966 206d 6f64 6520 3d3d  wer() if mode ==
-0003c680: 2027 6c27 2065 6c73 6520 5f70 6c61 7466   'l' else _platf
-0003c690: 6f72 6d2e 7570 7065 7228 290a 2020 2020  orm.upper().    
-0003c6a0: 2020 2020 6161 3d70 6c61 7466 6f72 6d2e      aa=platform.
-0003c6b0: 7665 7273 696f 6e28 290a 2020 2020 2020  version().      
+0003b930: 3d66 696c 656e 616d 655f 615b 2d31 5d2e  =filename_a[-1].
+0003b940: 7370 6c69 7428 272e 2729 5b30 5d0a 2020  split('.')[0].  
+0003b950: 2020 2020 2020 6669 6c65 6e61 6d65 5f6c        filename_l
+0003b960: 6173 745f 6578 743d 272e 272e 6a6f 696e  ast_ext='.'.join
+0003b970: 2866 696c 656e 616d 655f 615b 2d31 5d2e  (filename_a[-1].
+0003b980: 7370 6c69 7428 272e 2729 5b31 3a5d 290a  split('.')[1:]).
+0003b990: 2020 2020 2020 2020 6966 2073 7373 2069          if sss i
+0003b9a0: 7320 4e6f 6e65 3a20 7373 733d 5b27 4e27  s None: sss=['N'
+0003b9b0: 2c27 5827 5d0a 2020 2020 2020 2020 666f  ,'X'].        fo
+0003b9c0: 7220 7373 2069 6e20 7373 733a 0a20 2020  r ss in sss:.   
+0003b9d0: 2020 2020 2020 2020 2069 6620 4973 416c           if IsAl
+0003b9e0: 6c53 616d 6553 7472 2866 696c 656e 616d  lSameStr(filenam
+0003b9f0: 655f 6c61 7374 5f73 7566 6669 782c 7373  e_last_suffix,ss
+0003ba00: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0003ba10: 2020 2061 613d 5261 6e64 6f6d 286c 656e     aa=Random(len
+0003ba20: 6774 683d 6c65 6e28 6669 6c65 6e61 6d65  gth=len(filename
+0003ba30: 5f6c 6173 745f 7375 6666 6978 292c 6d6f  _last_suffix),mo
+0003ba40: 6465 3d27 6e75 6d27 2069 6620 7373 203d  de='num' if ss =
+0003ba50: 3d20 274e 2720 656c 7365 206d 6f64 652c  = 'N' else mode,
+0003ba60: 7374 7273 3d6f 7074 732e 6765 7428 2763  strs=opts.get('c
+0003ba70: 7573 746f 6d27 2929 0a20 2020 2020 2020  ustom')).       
+0003ba80: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+0003ba90: 7374 616e 6365 2861 612c 696e 7429 3a0a  stance(aa,int):.
+0003baa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bab0: 2020 2020 6669 6c65 6e61 6d65 5f61 5b2d      filename_a[-
+0003bac0: 315d 3d27 2530 7b7d 6427 2e66 6f72 6d61  1]='%0{}d'.forma
+0003bad0: 7428 6c65 6e28 6669 6c65 6e61 6d65 5f6c  t(len(filename_l
+0003bae0: 6173 745f 7375 6666 6978 2929 2561 610a  ast_suffix))%aa.
+0003baf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bb00: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0003bb10: 2020 2020 2020 2020 2020 6669 6c65 6e61            filena
+0003bb20: 6d65 5f61 5b2d 315d 3d27 7b7d 272e 666f  me_a[-1]='{}'.fo
+0003bb30: 726d 6174 2861 6129 0a20 2020 2020 2020  rmat(aa).       
+0003bb40: 2020 2020 2020 2020 2069 6620 6669 6c65           if file
+0003bb50: 6e61 6d65 5f6c 6173 745f 6578 743a 0a20  name_last_ext:. 
+0003bb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bb70: 2020 2066 696c 656e 616d 655f 615b 2d31     filename_a[-1
+0003bb80: 5d3d 6669 6c65 6e61 6d65 5f61 5b2d 315d  ]=filename_a[-1]
+0003bb90: 2b27 2e7b 7d27 2e66 6f72 6d61 7428 6669  +'.{}'.format(fi
+0003bba0: 6c65 6e61 6d65 5f6c 6173 745f 6578 7429  lename_last_ext)
+0003bbb0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0003bbc0: 7370 6c69 742e 6a6f 696e 2866 696c 656e  split.join(filen
+0003bbd0: 616d 655f 6129 0a0a 2020 2020 6966 2049  ame_a)..    if I
+0003bbe0: 734e 6f6e 6528 6669 6c65 6e61 6d65 2920  sNone(filename) 
+0003bbf0: 6f72 206e 6f74 2069 7369 6e73 7461 6e63  or not isinstanc
+0003bc00: 6528 6669 6c65 6e61 6d65 2c73 7472 293a  e(filename,str):
+0003bc10: 0a20 2020 2020 2020 2072 6669 6c65 6e61  .        rfilena
+0003bc20: 6d65 3d52 616e 646f 6d28 6c65 6e67 7468  me=Random(length
+0003bc30: 3d64 6566 6175 6c74 5f6c 656e 6774 682c  =default_length,
+0003bc40: 6d6f 6465 3d27 6e75 6d27 2069 6620 7375  mode='num' if su
+0003bc50: 6666 6978 2069 6e20 5b27 6e27 2c27 4e27  ffix in ['n','N'
+0003bc60: 5d20 656c 7365 206d 6f64 652c 7374 7273  ] else mode,strs
+0003bc70: 3d6f 7074 732e 6765 7428 2763 7573 746f  =opts.get('custo
+0003bc80: 6d27 2929 0a20 2020 2020 2020 2062 6173  m')).        bas
+0003bc90: 655f 6469 723d 272e 2720 6966 206e 6f74  e_dir='.' if not
+0003bca0: 2062 6173 655f 6469 7220 656c 7365 2062   base_dir else b
+0003bcb0: 6173 655f 6469 720a 2020 2020 656c 7365  ase_dir.    else
+0003bcc0: 3a0a 2020 2020 2020 2020 6261 7365 5f64  :.        base_d
+0003bcd0: 6972 3d6f 732e 7061 7468 2e64 6972 6e61  ir=os.path.dirna
+0003bce0: 6d65 2866 696c 656e 616d 6529 0a20 2020  me(filename).   
+0003bcf0: 2020 2020 2062 6173 655f 6469 723d 272e       base_dir='.
+0003bd00: 2720 6966 206e 6f74 2062 6173 655f 6469  ' if not base_di
+0003bd10: 7220 656c 7365 2062 6173 655f 6469 720a  r else base_dir.
+0003bd20: 2020 2020 2020 2020 7266 696c 656e 616d          rfilenam
+0003bd30: 653d 6d6b 5f66 696c 656e 616d 6528 6f73  e=mk_filename(os
+0003bd40: 2e70 6174 682e 6261 7365 6e61 6d65 2866  .path.basename(f
+0003bd50: 696c 656e 616d 6529 2c73 706c 6974 290a  ilename),split).
+0003bd60: 2020 2020 6966 2075 6e69 713a 0a20 2020      if uniq:.   
+0003bd70: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0003bd80: 6365 2862 6173 655f 6469 722c 7374 7229  ce(base_dir,str)
+0003bd90: 2061 6e64 206f 732e 7061 7468 2e69 7364   and os.path.isd
+0003bda0: 6972 2862 6173 655f 6469 7229 3a0a 2020  ir(base_dir):.  
+0003bdb0: 2020 2020 2020 2020 2020 696e 633d 4661            inc=Fa
+0003bdc0: 6c73 650a 2020 2020 2020 2020 2020 2020  lse.            
+0003bdd0: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
+0003bde0: 2c31 3030 3029 3a0a 2020 2020 2020 2020  ,1000):.        
+0003bdf0: 2020 2020 2020 2020 6966 2069 6e63 3a0a          if inc:.
+0003be00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003be10: 2020 2020 6e65 775f 6669 6c65 6e61 6d65      new_filename
+0003be20: 3d72 6669 6c65 6e61 6d65 2b27 7b7d 2530  =rfilename+'{}%0
+0003be30: 7b7d 6427 2e66 6f72 6d61 7428 7370 6c69  {}d'.format(spli
+0003be40: 742c 6465 6661 756c 745f 6c65 6e67 7468  t,default_length
+0003be50: 2925 2869 2d31 290a 2020 2020 2020 2020  )%(i-1).        
+0003be60: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0003be70: 7566 6669 783a 0a20 2020 2020 2020 2020  uffix:.         
+0003be80: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+0003be90: 6577 5f66 696c 656e 616d 653d 6e65 775f  ew_filename=new_
+0003bea0: 6669 6c65 6e61 6d65 2b27 2e7b 7d27 2e66  filename+'.{}'.f
+0003beb0: 6f72 6d61 7428 7375 6666 6978 290a 2020  ormat(suffix).  
+0003bec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bed0: 2020 6e65 775f 6669 6c65 3d6f 732e 7061    new_file=os.pa
+0003bee0: 7468 2e6a 6f69 6e28 6261 7365 5f64 6972  th.join(base_dir
+0003bef0: 2c6e 6577 5f66 696c 656e 616d 6529 0a20  ,new_filename). 
+0003bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bf10: 2020 2069 6620 6e6f 7420 6f73 2e70 6174     if not os.pat
+0003bf20: 682e 6578 6973 7473 286e 6577 5f66 696c  h.exists(new_fil
+0003bf30: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+0003bf40: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0003bf50: 726e 206f 7574 6669 6c65 286e 6577 5f66  rn outfile(new_f
+0003bf60: 696c 652c 6f70 7429 0a20 2020 2020 2020  ile,opt).       
+0003bf70: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0003bf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bf90: 2020 206e 6577 5f66 696c 656e 616d 653d     new_filename=
+0003bfa0: 6d6b 5f66 696c 656e 616d 6528 7266 696c  mk_filename(rfil
+0003bfb0: 656e 616d 652c 7370 6c69 7429 0a20 2020  ename,split).   
+0003bfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bfd0: 2069 6620 6e65 775f 6669 6c65 6e61 6d65   if new_filename
+0003bfe0: 203d 3d20 7266 696c 656e 616d 653a 0a20   == rfilename:. 
+0003bff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c000: 2020 2020 2020 2069 6e63 3d54 7275 650a         inc=True.
+0003c010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c020: 2020 2020 6966 2073 7566 6669 783a 0a20      if suffix:. 
+0003c030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c040: 2020 2020 2020 206e 6577 5f66 696c 656e         new_filen
+0003c050: 616d 653d 6e65 775f 6669 6c65 6e61 6d65  ame=new_filename
+0003c060: 2b27 2e7b 7d27 2e66 6f72 6d61 7428 7375  +'.{}'.format(su
+0003c070: 6666 6978 290a 2020 2020 2020 2020 2020  ffix).          
+0003c080: 2020 2020 2020 2020 2020 6e65 775f 6669            new_fi
+0003c090: 6c65 3d6f 732e 7061 7468 2e6a 6f69 6e28  le=os.path.join(
+0003c0a0: 6261 7365 5f64 6972 2c6e 6577 5f66 696c  base_dir,new_fil
+0003c0b0: 656e 616d 6529 0a20 2020 2020 2020 2020  ename).         
+0003c0c0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+0003c0d0: 7420 6f73 2e70 6174 682e 6578 6973 7473  t os.path.exists
+0003c0e0: 286e 6577 5f66 696c 6529 3a0a 2020 2020  (new_file):.    
+0003c0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c100: 2020 2020 7265 7475 726e 206f 7574 6669      return outfi
+0003c110: 6c65 286e 6577 5f66 696c 652c 6f70 7429  le(new_file,opt)
+0003c120: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+0003c130: 2020 2069 6620 6261 7365 5f64 6972 203d     if base_dir =
+0003c140: 3d20 272e 273a 0a20 2020 2020 2020 2020  = '.':.         
+0003c150: 2020 2069 6620 7375 6666 6978 3a0a 2020     if suffix:.  
+0003c160: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0003c170: 7475 726e 2072 6669 6c65 6e61 6d65 2b27  turn rfilename+'
+0003c180: 2e7b 7d27 2e66 6f72 6d61 7428 7375 6666  .{}'.format(suff
+0003c190: 6978 290a 2020 2020 2020 2020 2020 2020  ix).            
+0003c1a0: 7265 7475 726e 2072 6669 6c65 6e61 6d65  return rfilename
+0003c1b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0003c1c0: 6f75 7466 696c 6528 6f73 2e70 6174 682e  outfile(os.path.
+0003c1d0: 6a6f 696e 2862 6173 655f 6469 722c 7266  join(base_dir,rf
+0003c1e0: 696c 656e 616d 6529 2c6f 7074 290a 0a64  ilename),opt)..d
+0003c1f0: 6566 206f 7376 6572 7369 6f6e 286d 6f64  ef osversion(mod
+0003c200: 653d 2775 7070 6572 2729 3a0a 2020 2020  e='upper'):.    
+0003c210: 5f70 6c61 7466 6f72 6d3d 706c 6174 666f  _platform=platfo
+0003c220: 726d 2e73 7973 7465 6d28 290a 2020 2020  rm.system().    
+0003c230: 2336 3462 6974 3a20 706c 6174 666f 726d  #64bit: platform
+0003c240: 2e61 7263 6869 7465 6374 7572 6528 295b  .architecture()[
+0003c250: 305d 0a20 2020 206d 6f64 653d 276c 2720  0].    mode='l' 
+0003c260: 6966 2049 7353 616d 6528 6d6f 6465 2c27  if IsSame(mode,'
+0003c270: 6c6f 7765 7227 2920 656c 7365 2027 7527  lower') else 'u'
+0003c280: 0a0a 2020 2020 6f75 743d 7b0a 2020 2020  ..    out={.    
+0003c290: 2020 2027 706c 6174 666f 726d 273a 5f70     'platform':_p
+0003c2a0: 6c61 7466 6f72 6d2e 6c6f 7765 7228 2920  latform.lower() 
+0003c2b0: 6966 206d 6f64 6520 3d3d 2027 6c27 2065  if mode == 'l' e
+0003c2c0: 6c73 6520 5f70 6c61 7466 6f72 6d2e 7570  lse _platform.up
+0003c2d0: 7065 7228 292c 0a20 2020 2020 2020 276e  per(),.       'n
+0003c2e0: 616d 6527 3a4e 6f6e 652c 0a20 2020 2020  ame':None,.     
+0003c2f0: 2020 2776 6572 7369 6f6e 273a 4e6f 6e65    'version':None
+0003c300: 2c0a 2020 2020 2020 2027 6578 7427 3a4e  ,.       'ext':N
+0003c310: 6f6e 652c 0a20 2020 2020 2020 2736 3462  one,.       '64b
+0003c320: 6974 273a 7379 732e 6d61 7873 697a 6520  it':sys.maxsize 
+0003c330: 3e20 322a 2a33 322c 0a20 2020 2020 2020  > 2**32,.       
+0003c340: 2763 6f64 6527 3a4e 6f6e 650a 2020 2020  'code':None.    
+0003c350: 7d0a 2020 2020 6966 2027 4c69 6e75 7827  }.    if 'Linux'
+0003c360: 203d 3d20 5f70 6c61 7466 6f72 6d3a 0a20   == _platform:. 
+0003c370: 2020 2020 2020 2072 743d 7273 6865 6c6c         rt=rshell
+0003c380: 2827 2727 5b20 2d66 202f 6574 632f 6f73  ('''[ -f /etc/os
+0003c390: 2d72 656c 6561 7365 205d 2026 2620 2820  -release ] && ( 
+0003c3a0: 2e20 2f65 7463 2f6f 732d 7265 6c65 6173  . /etc/os-releas
+0003c3b0: 6520 3b20 6563 686f 2024 4944 2927 2727  e ; echo $ID)'''
+0003c3c0: 290a 2020 2020 2020 2020 6f75 745b 276e  ).        out['n
+0003c3d0: 616d 6527 5d3d 7274 5b31 5d2e 6c6f 7765  ame']=rt[1].lowe
+0003c3e0: 7228 2920 6966 206d 6f64 6520 3d3d 2027  r() if mode == '
+0003c3f0: 6c27 2065 6c73 6520 7274 5b31 5d2e 7570  l' else rt[1].up
+0003c400: 7065 7228 290a 2020 2020 2020 2020 6966  per().        if
+0003c410: 2049 7349 6e28 6f75 745b 276e 616d 6527   IsIn(out['name'
+0003c420: 5d2c 2827 7562 756e 7475 272c 2752 6173  ],('ubuntu','Ras
+0003c430: 7062 6961 6e27 2c27 4665 646f 7261 2729  pbian','Fedora')
+0003c440: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+0003c450: 743d 7273 6865 6c6c 2827 2727 5b20 2d66  t=rshell('''[ -f
+0003c460: 202f 6574 632f 6f73 2d72 656c 6561 7365   /etc/os-release
+0003c470: 205d 2026 2620 2820 2e20 2f65 7463 2f6f   ] && ( . /etc/o
+0003c480: 732d 7265 6c65 6173 6520 3b20 6563 686f  s-release ; echo
+0003c490: 2024 5645 5253 494f 4e29 2727 2729 0a20   $VERSION)'''). 
+0003c4a0: 2020 2020 2020 2020 2020 206f 7574 5b27             out['
+0003c4b0: 7665 7273 696f 6e27 5d3d 7274 5b31 5d2e  version']=rt[1].
+0003c4c0: 7370 6c69 7428 295b 305d 0a20 2020 2020  split()[0].     
+0003c4d0: 2020 2020 2020 206f 7574 5b27 6578 7427         out['ext'
+0003c4e0: 5d3d 2720 272e 6a6f 696e 2872 745b 315d  ]=' '.join(rt[1]
+0003c4f0: 2e73 706c 6974 2829 5b31 3a5d 290a 2020  .split()[1:]).  
+0003c500: 2020 2020 2020 2020 2020 7274 3d72 7368            rt=rsh
+0003c510: 656c 6c28 2727 275b 202d 6620 2f65 7463  ell('''[ -f /etc
+0003c520: 2f6f 732d 7265 6c65 6173 6520 5d20 2626  /os-release ] &&
+0003c530: 2028 202e 202f 6574 632f 6f73 2d72 656c   ( . /etc/os-rel
+0003c540: 6561 7365 203b 2065 6368 6f20 2456 4552  ease ; echo $VER
+0003c550: 5349 4f4e 5f43 4f44 454e 414d 4529 2727  SION_CODENAME)''
+0003c560: 2729 0a20 2020 2020 2020 2020 2020 206f  ').            o
+0003c570: 7574 5b27 636f 6465 275d 3d72 745b 315d  ut['code']=rt[1]
+0003c580: 0a20 2020 2020 2020 2065 6c73 653a 2023  .        else: #
+0003c590: 4365 6e74 6f73 2c20 526f 636b 792c 2052  Centos, Rocky, R
+0003c5a0: 6564 6861 742c 0a20 2020 2020 2020 2020  edhat,.         
+0003c5b0: 2020 2072 743d 7273 6865 6c6c 2827 2727     rt=rshell('''
+0003c5c0: 5b20 2d66 202f 6574 632f 7265 6468 6174  [ -f /etc/redhat
+0003c5d0: 2d72 656c 6561 7365 205d 2026 2620 6361  -release ] && ca
+0003c5e0: 7420 2f65 7463 2f72 6564 6861 742d 7265  t /etc/redhat-re
+0003c5f0: 6c65 6173 6527 2727 290a 2020 2020 2020  lease''').      
+0003c600: 2020 2020 2020 6966 2072 745b 305d 203d        if rt[0] =
+0003c610: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
+0003c620: 2020 2020 2066 6f72 2069 6920 696e 2072       for ii in r
+0003c630: 745b 315d 2e73 706c 6974 2829 3a0a 2020  t[1].split():.  
+0003c640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c650: 2020 6966 2027 2e27 2069 6e20 6969 2061    if '.' in ii a
+0003c660: 6e64 2069 692e 7370 6c69 7428 272e 2729  nd ii.split('.')
+0003c670: 5b30 5d2e 6973 6469 6769 7428 293a 0a20  [0].isdigit():. 
+0003c680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c690: 2020 2020 2020 2069 695f 613d 6969 2e73         ii_a=ii.s
+0003c6a0: 706c 6974 2827 2e27 290a 2020 2020 2020  plit('.').      
+0003c6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0003c6c0: 2020 6f75 745b 2776 6572 7369 6f6e 275d    out['version']
-0003c6d0: 3d61 612e 7370 6c69 7428 295b 315d 2e73  =aa.split()[1].s
-0003c6e0: 706c 6974 2827 2d27 295b 305d 0a20 2020  plit('-')[0].   
-0003c6f0: 2020 2020 206f 7574 5b27 6578 7427 5d3d       out['ext']=
-0003c700: 6161 2e73 706c 6974 2829 5b32 5d0a 2020  aa.split()[2].  
-0003c710: 2020 656c 6966 2027 4461 7277 696e 2720    elif 'Darwin' 
-0003c720: 3d3d 205f 706c 6174 666f 726d 3a0a 2020  == _platform:.  
-0003c730: 2020 2020 2020 6f75 745b 276e 616d 6527        out['name'
-0003c740: 5d3d 276f 7378 2720 6966 206d 6f64 6520  ]='osx' if mode 
-0003c750: 3d3d 2027 6c27 2065 6c73 6520 274f 5358  == 'l' else 'OSX
-0003c760: 270a 2020 2020 2020 2020 6f75 745b 2776  '.        out['v
-0003c770: 6572 7369 6f6e 275d 3d70 6c61 7466 6f72  ersion']=platfor
-0003c780: 6d2e 6d61 635f 7665 7228 290a 2020 2020  m.mac_ver().    
-0003c790: 656c 6966 2027 5769 6e64 6f77 7327 203d  elif 'Windows' =
-0003c7a0: 3d20 5f70 6c61 7466 6f72 6d3a 0a20 2020  = _platform:.   
-0003c7b0: 2020 2020 206f 7574 5b27 6e61 6d65 275d       out['name']
-0003c7c0: 3d5f 706c 6174 666f 726d 2e6c 6f77 6572  =_platform.lower
-0003c7d0: 2829 2069 6620 6d6f 6465 203d 3d20 276c  () if mode == 'l
-0003c7e0: 2720 656c 7365 205f 706c 6174 666f 726d  ' else _platform
-0003c7f0: 2e75 7070 6572 2829 0a20 2020 2020 2020  .upper().       
-0003c800: 206f 7574 5b27 7665 7273 696f 6e27 5d3d   out['version']=
-0003c810: 706c 6174 666f 726d 2e77 696e 3332 5f76  platform.win32_v
-0003c820: 6572 2829 2829 0a20 2020 2065 6c73 653a  er()().    else:
-0003c830: 0a20 2020 2020 2020 206f 7574 5b27 6e61  .        out['na
-0003c840: 6d65 275d 3d5f 706c 6174 666f 726d 2e6c  me']=_platform.l
-0003c850: 6f77 6572 2829 2069 6620 6d6f 6465 203d  ower() if mode =
-0003c860: 3d20 276c 2720 656c 7365 205f 706c 6174  = 'l' else _plat
-0003c870: 666f 726d 2e75 7070 6572 2829 0a20 2020  form.upper().   
-0003c880: 2072 6574 7572 6e20 6f75 740a 0a64 6566   return out..def
-0003c890: 2053 7472 6970 2873 7263 2c6d 6f64 653d   Strip(src,mode=
-0003c8a0: 2761 6c6c 272c 7379 6d3d 2777 6869 7465  'all',sym='white
-0003c8b0: 7370 6163 6527 293a 0a20 2020 2069 6620  space'):.    if 
-0003c8c0: 6973 696e 7374 616e 6365 2873 7263 2c73  isinstance(src,s
-0003c8d0: 7472 293a 0a20 2020 2020 2020 2069 6620  tr):.        if 
-0003c8e0: 6d6f 6465 2069 6e20 5b27 7374 6172 7427  mode in ['start'
-0003c8f0: 2c27 6c65 6674 272c 2762 6567 696e 275d  ,'left','begin']
-0003c900: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0003c910: 2073 796d 3d3d 2777 6869 7465 7370 6163   sym=='whitespac
-0003c920: 6527 3a0a 2020 2020 2020 2020 2020 2020  e':.            
-0003c930: 2020 2020 7265 7475 726e 2073 7263 2e6c      return src.l
-0003c940: 7374 7269 7028 290a 2020 2020 2020 2020  strip().        
-0003c950: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0003c960: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0003c970: 2073 7263 2e6c 7374 7269 7028 7379 6d29   src.lstrip(sym)
-0003c980: 0a20 2020 2020 2020 2065 6c69 6620 6d6f  .        elif mo
-0003c990: 6465 2069 6e20 5b27 656e 6427 2c27 7269  de in ['end','ri
-0003c9a0: 6768 7427 2c27 6c61 7374 275d 3a0a 2020  ght','last']:.  
-0003c9b0: 2020 2020 2020 2020 2020 6966 2073 796d            if sym
-0003c9c0: 3d3d 2777 6869 7465 7370 6163 6527 3a0a  =='whitespace':.
-0003c9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c9e0: 7265 7475 726e 2073 7263 2e72 7374 7269  return src.rstri
-0003c9f0: 7028 290a 2020 2020 2020 2020 2020 2020  p().            
-0003ca00: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0003ca10: 2020 2020 2020 7265 7475 726e 2073 7263        return src
-0003ca20: 2e72 7374 7269 7028 7379 6d29 0a20 2020  .rstrip(sym).   
-0003ca30: 2020 2020 2065 6c69 6620 6d6f 6465 2069       elif mode i
-0003ca40: 6e20 5b27 626f 7468 272c 2765 6467 6527  n ['both','edge'
-0003ca50: 2c27 6f75 7473 6964 6527 5d3a 0a20 2020  ,'outside']:.   
-0003ca60: 2020 2020 2020 2020 2069 6620 7379 6d3d           if sym=
-0003ca70: 3d27 7768 6974 6573 7061 6365 273a 0a20  ='whitespace':. 
-0003ca80: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003ca90: 6574 7572 6e20 7372 632e 7374 7269 7028  eturn src.strip(
-0003caa0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0003cab0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0003cac0: 2020 2020 7265 7475 726e 2073 7263 2e73      return src.s
-0003cad0: 7472 6970 2873 796d 290a 2020 2020 2020  trip(sym).      
-0003cae0: 2020 656c 6966 206d 6f64 6520 696e 205b    elif mode in [
-0003caf0: 2769 6e73 6964 6527 5d3a 0a20 2020 2020  'inside']:.     
-0003cb00: 2020 2020 2020 2066 6f72 2073 2069 6e20         for s in 
-0003cb10: 7261 6e67 6528 302c 6c65 6e28 7372 6329  range(0,len(src)
-0003cb20: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0003cb30: 2020 2069 6620 7379 6d3d 3d27 7768 6974     if sym=='whit
-0003cb40: 6573 7061 6365 273a 0a20 2020 2020 2020  espace':.       
-0003cb50: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0003cb60: 7372 635b 735d 2021 3d20 2720 273a 2062  src[s] != ' ': b
-0003cb70: 7265 616b 0a20 2020 2020 2020 2020 2020  reak.           
-0003cb80: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0003cb90: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0003cba0: 6620 7372 635b 735d 2021 3d20 7379 6d3a  f src[s] != sym:
-0003cbb0: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
-0003cbc0: 2020 2066 6f72 2065 2069 6e20 7261 6e67     for e in rang
-0003cbd0: 6528 6c65 6e28 7372 6329 2d31 2c30 2c2d  e(len(src)-1,0,-
-0003cbe0: 3129 3a0a 2020 2020 2020 2020 2020 2020  1):.            
-0003cbf0: 2020 2020 6966 2073 796d 3d3d 2777 6869      if sym=='whi
-0003cc00: 7465 7370 6163 6527 3a0a 2020 2020 2020  tespace':.      
-0003cc10: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0003cc20: 2073 7263 5b65 5d20 213d 2027 2027 3a20   src[e] != ' ': 
-0003cc30: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
-0003cc40: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0003cc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003cc60: 6966 2073 7263 5b65 5d20 213d 2073 796d  if src[e] != sym
-0003cc70: 3a20 6272 6561 6b0a 2020 2020 2020 2020  : break.        
-0003cc80: 2020 2020 6966 2073 796d 3d3d 2777 6869      if sym=='whi
-0003cc90: 7465 7370 6163 6527 3a0a 2020 2020 2020  tespace':.      
-0003cca0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0003ccb0: 2073 7263 5b3a 735d 2b27 2027 2e6a 6f69   src[:s]+' '.joi
-0003ccc0: 6e28 7372 635b 733a 652b 315d 2e73 706c  n(src[s:e+1].spl
-0003ccd0: 6974 2829 292b 7372 635b 652b 313a 5d0a  it())+src[e+1:].
-0003cce0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0003ccf0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003cd00: 2020 7265 7475 726e 2073 7263 5b3a 735d    return src[:s]
-0003cd10: 2b73 796d 2e6a 6f69 6e28 7372 635b 733a  +sym.join(src[s:
-0003cd20: 652b 315d 2e73 706c 6974 2873 796d 2929  e+1].split(sym))
-0003cd30: 2b73 7263 5b65 2b31 3a5d 0a20 2020 2020  +src[e+1:].     
-0003cd40: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0003cd50: 2020 2020 2069 6620 7379 6d3d 3d27 7768       if sym=='wh
-0003cd60: 6974 6573 7061 6365 273a 0a20 2020 2020  itespace':.     
-0003cd70: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0003cd80: 6e20 2720 272e 6a6f 696e 2873 7263 2e73  n ' '.join(src.s
-0003cd90: 706c 6974 2829 290a 2020 2020 2020 2020  plit()).        
-0003cda0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0003cdb0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0003cdc0: 2073 796d 2e6a 6f69 6e28 7372 632e 7370   sym.join(src.sp
-0003cdd0: 6c69 7428 7379 6d29 290a 2020 2020 7265  lit(sym)).    re
-0003cde0: 7475 726e 2073 7263 0a0a 6465 6620 506f  turn src..def Po
-0003cdf0: 7028 7372 632c 6b65 792c 6465 6661 756c  p(src,key,defaul
-0003ce00: 743d 4e6f 6e65 293a 0a20 2020 2069 6620  t=None):.    if 
-0003ce10: 6973 696e 7374 616e 6365 2873 7263 2c64  isinstance(src,d
-0003ce20: 6963 7429 3a0a 2020 2020 2020 2020 6966  ict):.        if
-0003ce30: 206b 6579 2069 6e20 7372 633a 0a20 2020   key in src:.   
-0003ce40: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0003ce50: 7372 632e 706f 7028 6b65 7929 0a20 2020  src.pop(key).   
-0003ce60: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
-0003ce70: 2873 7263 2c6c 6973 7429 3a0a 2020 2020  (src,list):.    
-0003ce80: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0003ce90: 6528 6b65 792c 696e 7429 2061 6e64 206e  e(key,int) and n
-0003cea0: 6f74 2069 7369 6e73 7461 6e63 6528 6b65  ot isinstance(ke
-0003ceb0: 792c 626f 6f6c 293a 0a20 2020 2020 2020  y,bool):.       
-0003cec0: 2020 2020 2069 6620 6c65 6e28 7372 6329       if len(src)
-0003ced0: 203e 2061 6273 286b 6579 293a 0a20 2020   > abs(key):.   
-0003cee0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0003cef0: 7572 6e20 7372 632e 706f 7028 6b65 7929  urn src.pop(key)
-0003cf00: 0a20 2020 2069 6620 6e6f 7420 4973 4e6f  .    if not IsNo
-0003cf10: 6e65 2864 6566 6175 6c74 293a 0a20 2020  ne(default):.   
-0003cf20: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-0003cf30: 756c 740a 0a64 6566 2049 7354 7275 6528  ult..def IsTrue(
-0003cf40: 636f 6e64 6974 696f 6e2c 7265 7175 6972  condition,requir
-0003cf50: 656d 656e 7473 3d4e 6f6e 652c 7368 656c  ements=None,shel
-0003cf60: 6c3d 4661 6c73 652c 2a2a 6f70 7473 293a  l=False,**opts):
-0003cf70: 0a20 2020 2063 6f6e 6469 7469 6f6e 5f74  .    condition_t
-0003cf80: 7970 653d 7479 7065 2863 6f6e 6469 7469  ype=type(conditi
-0003cf90: 6f6e 292e 5f5f 6e61 6d65 5f5f 0a20 2020  on).__name__.   
-0003cfa0: 2069 6620 4973 4675 6e63 7469 6f6e 2863   if IsFunction(c
-0003cfb0: 6f6e 6469 7469 6f6e 2c62 7569 6c74 696e  ondition,builtin
-0003cfc0: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
-0003cfd0: 206f 7074 735b 2770 6172 656e 7427 5d3d   opts['parent']=
-0003cfe0: 3320 6966 2027 7061 7265 6e74 2720 6e6f  3 if 'parent' no
-0003cff0: 7420 696e 206f 7074 7320 656c 7365 206f  t in opts else o
-0003d000: 7074 735b 2770 6172 656e 7427 5d2b 320a  pts['parent']+2.
-0003d010: 2020 2020 2020 2020 6966 2046 6565 6446          if FeedF
-0003d020: 756e 6328 636f 6e64 6974 696f 6e2c 2a2a  unc(condition,**
-0003d030: 6f70 7473 293a 0a20 2020 2020 2020 2020  opts):.         
-0003d040: 2020 2072 6574 7572 6e20 5472 7565 0a20     return True. 
-0003d050: 2020 2065 6c69 6620 636f 6e64 6974 696f     elif conditio
-0003d060: 6e5f 7479 7065 203d 3d20 2773 7472 273a  n_type == 'str':
-0003d070: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
-0003d080: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0003d090: 2065 7661 6c28 636f 6e64 6974 696f 6e29   eval(condition)
-0003d0a0: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
-0003d0b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0003d0c0: 6973 696e 7374 616e 6365 2872 6571 7569  isinstance(requi
-0003d0d0: 7265 6d65 6e74 732c 2874 7570 6c65 2c6c  rements,(tuple,l
-0003d0e0: 6973 7429 293a 0a20 2020 2020 2020 2020  ist)):.         
-0003d0f0: 2020 2020 2020 2069 6620 4973 496e 2863         if IsIn(c
-0003d100: 6f6e 6469 7469 6f6e 202c 7265 7175 6972  ondition ,requir
-0003d110: 656d 656e 7473 293a 2072 6574 7572 6e20  ements): return 
-0003d120: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
-0003d130: 2065 6c69 6620 7265 7175 6972 656d 656e   elif requiremen
-0003d140: 7473 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ts is not None:.
-0003d150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d160: 6966 2063 6f6e 6469 7469 6f6e 203d 3d20  if condition == 
-0003d170: 7265 7175 6972 656d 656e 7473 203a 2072  requirements : r
-0003d180: 6574 7572 6e20 5472 7565 0a20 2020 2065  eturn True.    e
-0003d190: 6c69 6620 636f 6e64 6974 696f 6e5f 7479  lif condition_ty
-0003d1a0: 7065 203d 3d20 2762 6f6f 6c27 3a0a 2020  pe == 'bool':.  
-0003d1b0: 2020 2020 2020 7265 7475 726e 2063 6f6e        return con
-0003d1c0: 6469 7469 6f6e 0a20 2020 2065 6c69 6620  dition.    elif 
-0003d1d0: 636f 6e64 6974 696f 6e5f 7479 7065 203d  condition_type =
-0003d1e0: 3d20 2769 6e74 273a 0a20 2020 2020 2020  = 'int':.       
-0003d1f0: 2069 6620 7368 656c 6c3a 0a20 2020 2020   if shell:.     
-0003d200: 2020 2020 2020 2069 6620 636f 6e64 6974         if condit
-0003d210: 696f 6e3d 3d30 3a20 7265 7475 726e 2054  ion==0: return T
-0003d220: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-0003d230: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
-0003d240: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0003d250: 2020 2020 2020 2069 6620 636f 6e64 6974         if condit
-0003d260: 696f 6e3e 303a 2072 6574 7572 6e20 5472  ion>0: return Tr
-0003d270: 7565 0a20 2020 2020 2020 2020 2020 2072  ue.            r
-0003d280: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
-0003d290: 7265 7475 726e 2046 616c 7365 0a0a 6465  return False..de
-0003d2a0: 6620 4170 7065 6e64 282a 612c 7379 6d62  f Append(*a,symb
-0003d2b0: 6f6c 3d27 272c 6174 3d2d 312c 7761 6e74  ol='',at=-1,want
-0003d2c0: 3d4e 6f6e 6529 3a20 2320 4170 7065 6e64  =None): # Append
-0003d2d0: 2064 6174 6120 6163 636f 7264 696e 6720   data according 
-0003d2e0: 746f 2073 6f75 7263 6520 7479 7065 0a20  to source type. 
-0003d2f0: 2020 2069 6620 613a 2020 2020 2020 2020     if a:        
-0003d300: 2020 2020 2020 2020 2020 2020 2320 6c69              # li
-0003d310: 7374 202b 206c 6973 740a 2020 2020 2020  st + list.      
-0003d320: 2020 733d 615b 305d 2020 2020 2020 2020    s=a[0]        
-0003d330: 2020 2020 2020 2023 206f 7468 6572 203d         # other =
-0003d340: 3e20 7075 7420 746f 206c 6973 740a 2020  > put to list.  
-0003d350: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0003d360: 6e63 6528 732c 6279 7465 7329 3a20 733d  nce(s,bytes): s=
-0003d370: 5374 7228 7329 0a20 2020 2020 2020 2069  Str(s).        i
-0003d380: 6620 7761 6e74 3a0a 2020 2020 2020 2020  f want:.        
-0003d390: 2020 2020 6966 2077 616e 7420 696e 205b      if want in [
-0003d3a0: 6c69 7374 2c27 6c69 7374 275d 3a0a 2020  list,'list']:.  
-0003d3b0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0003d3c0: 2069 7369 6e73 7461 6e63 6528 732c 7475   isinstance(s,tu
-0003d3d0: 706c 6529 3a0a 2020 2020 2020 2020 2020  ple):.          
-0003d3e0: 2020 2020 2020 2020 2020 733d 6c69 7374            s=list
-0003d3f0: 2873 290a 2020 2020 2020 2020 2020 2020  (s).            
-0003d400: 2020 2020 656c 6966 206e 6f74 2069 7369      elif not isi
-0003d410: 6e73 7461 6e63 6528 732c 6c69 7374 293a  nstance(s,list):
-0003d420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003d430: 2020 2020 2073 3d5b 735d 0a20 2020 2020       s=[s].     
-0003d440: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0003d450: 6973 696e 7374 616e 6365 2873 2c73 7472  isinstance(s,str
-0003d460: 2920 616e 6420 7379 6d62 6f6c 3a0a 2020  ) and symbol:.  
-0003d470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d480: 2020 733d 732e 7370 6c69 7428 7379 6d62    s=s.split(symb
-0003d490: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
-0003d4a0: 656c 6966 2077 616e 7420 696e 205b 7374  elif want in [st
-0003d4b0: 722c 2773 7472 275d 3a0a 2020 2020 2020  r,'str']:.      
+0003c6d0: 3d27 7b7d 2e7b 7d27 2e66 6f72 6d61 7428  ='{}.{}'.format(
+0003c6e0: 6969 5f61 5b30 5d2c 6969 5f61 5b31 5d29  ii_a[0],ii_a[1])
+0003c6f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003c700: 2020 2020 2020 2020 206f 7574 5b27 6578           out['ex
+0003c710: 7427 5d3d 6969 5f61 5b2d 315d 0a20 2020  t']=ii_a[-1].   
+0003c720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c730: 2020 2020 2062 7265 616b 0a20 2020 2065       break.    e
+0003c740: 6c69 6620 2746 7265 6542 5344 2720 3d3d  lif 'FreeBSD' ==
+0003c750: 205f 706c 6174 666f 726d 3a0a 2020 2020   _platform:.    
+0003c760: 2020 2020 6f75 745b 276e 616d 6527 5d3d      out['name']=
+0003c770: 5f70 6c61 7466 6f72 6d2e 6c6f 7765 7228  _platform.lower(
+0003c780: 2920 6966 206d 6f64 6520 3d3d 2027 6c27  ) if mode == 'l'
+0003c790: 2065 6c73 6520 5f70 6c61 7466 6f72 6d2e   else _platform.
+0003c7a0: 7570 7065 7228 290a 2020 2020 2020 2020  upper().        
+0003c7b0: 6161 3d70 6c61 7466 6f72 6d2e 7665 7273  aa=platform.vers
+0003c7c0: 696f 6e28 290a 2020 2020 2020 2020 6f75  ion().        ou
+0003c7d0: 745b 2776 6572 7369 6f6e 275d 3d61 612e  t['version']=aa.
+0003c7e0: 7370 6c69 7428 295b 315d 2e73 706c 6974  split()[1].split
+0003c7f0: 2827 2d27 295b 305d 0a20 2020 2020 2020  ('-')[0].       
+0003c800: 206f 7574 5b27 6578 7427 5d3d 6161 2e73   out['ext']=aa.s
+0003c810: 706c 6974 2829 5b32 5d0a 2020 2020 656c  plit()[2].    el
+0003c820: 6966 2027 4461 7277 696e 2720 3d3d 205f  if 'Darwin' == _
+0003c830: 706c 6174 666f 726d 3a0a 2020 2020 2020  platform:.      
+0003c840: 2020 6f75 745b 276e 616d 6527 5d3d 276f    out['name']='o
+0003c850: 7378 2720 6966 206d 6f64 6520 3d3d 2027  sx' if mode == '
+0003c860: 6c27 2065 6c73 6520 274f 5358 270a 2020  l' else 'OSX'.  
+0003c870: 2020 2020 2020 6f75 745b 2776 6572 7369        out['versi
+0003c880: 6f6e 275d 3d70 6c61 7466 6f72 6d2e 6d61  on']=platform.ma
+0003c890: 635f 7665 7228 290a 2020 2020 656c 6966  c_ver().    elif
+0003c8a0: 2027 5769 6e64 6f77 7327 203d 3d20 5f70   'Windows' == _p
+0003c8b0: 6c61 7466 6f72 6d3a 0a20 2020 2020 2020  latform:.       
+0003c8c0: 206f 7574 5b27 6e61 6d65 275d 3d5f 706c   out['name']=_pl
+0003c8d0: 6174 666f 726d 2e6c 6f77 6572 2829 2069  atform.lower() i
+0003c8e0: 6620 6d6f 6465 203d 3d20 276c 2720 656c  f mode == 'l' el
+0003c8f0: 7365 205f 706c 6174 666f 726d 2e75 7070  se _platform.upp
+0003c900: 6572 2829 0a20 2020 2020 2020 206f 7574  er().        out
+0003c910: 5b27 7665 7273 696f 6e27 5d3d 706c 6174  ['version']=plat
+0003c920: 666f 726d 2e77 696e 3332 5f76 6572 2829  form.win32_ver()
+0003c930: 2829 0a20 2020 2065 6c73 653a 0a20 2020  ().    else:.   
+0003c940: 2020 2020 206f 7574 5b27 6e61 6d65 275d       out['name']
+0003c950: 3d5f 706c 6174 666f 726d 2e6c 6f77 6572  =_platform.lower
+0003c960: 2829 2069 6620 6d6f 6465 203d 3d20 276c  () if mode == 'l
+0003c970: 2720 656c 7365 205f 706c 6174 666f 726d  ' else _platform
+0003c980: 2e75 7070 6572 2829 0a20 2020 2072 6574  .upper().    ret
+0003c990: 7572 6e20 6f75 740a 0a64 6566 2053 7472  urn out..def Str
+0003c9a0: 6970 2873 7263 2c6d 6f64 653d 2761 6c6c  ip(src,mode='all
+0003c9b0: 272c 7379 6d3d 2777 6869 7465 7370 6163  ',sym='whitespac
+0003c9c0: 6527 293a 0a20 2020 2069 6620 6973 696e  e'):.    if isin
+0003c9d0: 7374 616e 6365 2873 7263 2c73 7472 293a  stance(src,str):
+0003c9e0: 0a20 2020 2020 2020 2069 6620 6d6f 6465  .        if mode
+0003c9f0: 2069 6e20 5b27 7374 6172 7427 2c27 6c65   in ['start','le
+0003ca00: 6674 272c 2762 6567 696e 275d 3a0a 2020  ft','begin']:.  
+0003ca10: 2020 2020 2020 2020 2020 6966 2073 796d            if sym
+0003ca20: 3d3d 2777 6869 7465 7370 6163 6527 3a0a  =='whitespace':.
+0003ca30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003ca40: 7265 7475 726e 2073 7263 2e6c 7374 7269  return src.lstri
+0003ca50: 7028 290a 2020 2020 2020 2020 2020 2020  p().            
+0003ca60: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0003ca70: 2020 2020 2020 7265 7475 726e 2073 7263        return src
+0003ca80: 2e6c 7374 7269 7028 7379 6d29 0a20 2020  .lstrip(sym).   
+0003ca90: 2020 2020 2065 6c69 6620 6d6f 6465 2069       elif mode i
+0003caa0: 6e20 5b27 656e 6427 2c27 7269 6768 7427  n ['end','right'
+0003cab0: 2c27 6c61 7374 275d 3a0a 2020 2020 2020  ,'last']:.      
+0003cac0: 2020 2020 2020 6966 2073 796d 3d3d 2777        if sym=='w
+0003cad0: 6869 7465 7370 6163 6527 3a0a 2020 2020  hitespace':.    
+0003cae0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0003caf0: 726e 2073 7263 2e72 7374 7269 7028 290a  rn src.rstrip().
+0003cb00: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0003cb10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003cb20: 2020 7265 7475 726e 2073 7263 2e72 7374    return src.rst
+0003cb30: 7269 7028 7379 6d29 0a20 2020 2020 2020  rip(sym).       
+0003cb40: 2065 6c69 6620 6d6f 6465 2069 6e20 5b27   elif mode in ['
+0003cb50: 626f 7468 272c 2765 6467 6527 2c27 6f75  both','edge','ou
+0003cb60: 7473 6964 6527 5d3a 0a20 2020 2020 2020  tside']:.       
+0003cb70: 2020 2020 2069 6620 7379 6d3d 3d27 7768       if sym=='wh
+0003cb80: 6974 6573 7061 6365 273a 0a20 2020 2020  itespace':.     
+0003cb90: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0003cba0: 6e20 7372 632e 7374 7269 7028 290a 2020  n src.strip().  
+0003cbb0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0003cbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003cbd0: 7265 7475 726e 2073 7263 2e73 7472 6970  return src.strip
+0003cbe0: 2873 796d 290a 2020 2020 2020 2020 656c  (sym).        el
+0003cbf0: 6966 206d 6f64 6520 696e 205b 2769 6e73  if mode in ['ins
+0003cc00: 6964 6527 5d3a 0a20 2020 2020 2020 2020  ide']:.         
+0003cc10: 2020 2066 6f72 2073 2069 6e20 7261 6e67     for s in rang
+0003cc20: 6528 302c 6c65 6e28 7372 6329 293a 0a20  e(0,len(src)):. 
+0003cc30: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0003cc40: 6620 7379 6d3d 3d27 7768 6974 6573 7061  f sym=='whitespa
+0003cc50: 6365 273a 0a20 2020 2020 2020 2020 2020  ce':.           
+0003cc60: 2020 2020 2020 2020 2069 6620 7372 635b           if src[
+0003cc70: 735d 2021 3d20 2720 273a 2062 7265 616b  s] != ' ': break
+0003cc80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003cc90: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0003cca0: 2020 2020 2020 2020 2020 2069 6620 7372             if sr
+0003ccb0: 635b 735d 2021 3d20 7379 6d3a 2062 7265  c[s] != sym: bre
+0003ccc0: 616b 0a20 2020 2020 2020 2020 2020 2066  ak.            f
+0003ccd0: 6f72 2065 2069 6e20 7261 6e67 6528 6c65  or e in range(le
+0003cce0: 6e28 7372 6329 2d31 2c30 2c2d 3129 3a0a  n(src)-1,0,-1):.
+0003ccf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003cd00: 6966 2073 796d 3d3d 2777 6869 7465 7370  if sym=='whitesp
+0003cd10: 6163 6527 3a0a 2020 2020 2020 2020 2020  ace':.          
+0003cd20: 2020 2020 2020 2020 2020 6966 2073 7263            if src
+0003cd30: 5b65 5d20 213d 2027 2027 3a20 6272 6561  [e] != ' ': brea
+0003cd40: 6b0a 2020 2020 2020 2020 2020 2020 2020  k.              
+0003cd50: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0003cd60: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0003cd70: 7263 5b65 5d20 213d 2073 796d 3a20 6272  rc[e] != sym: br
+0003cd80: 6561 6b0a 2020 2020 2020 2020 2020 2020  eak.            
+0003cd90: 6966 2073 796d 3d3d 2777 6869 7465 7370  if sym=='whitesp
+0003cda0: 6163 6527 3a0a 2020 2020 2020 2020 2020  ace':.          
+0003cdb0: 2020 2020 2020 7265 7475 726e 2073 7263        return src
+0003cdc0: 5b3a 735d 2b27 2027 2e6a 6f69 6e28 7372  [:s]+' '.join(sr
+0003cdd0: 635b 733a 652b 315d 2e73 706c 6974 2829  c[s:e+1].split()
+0003cde0: 292b 7372 635b 652b 313a 5d0a 2020 2020  )+src[e+1:].    
+0003cdf0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0003ce00: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0003ce10: 7475 726e 2073 7263 5b3a 735d 2b73 796d  turn src[:s]+sym
+0003ce20: 2e6a 6f69 6e28 7372 635b 733a 652b 315d  .join(src[s:e+1]
+0003ce30: 2e73 706c 6974 2873 796d 2929 2b73 7263  .split(sym))+src
+0003ce40: 5b65 2b31 3a5d 0a20 2020 2020 2020 2065  [e+1:].        e
+0003ce50: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0003ce60: 2069 6620 7379 6d3d 3d27 7768 6974 6573   if sym=='whites
+0003ce70: 7061 6365 273a 0a20 2020 2020 2020 2020  pace':.         
+0003ce80: 2020 2020 2020 2072 6574 7572 6e20 2720         return ' 
+0003ce90: 272e 6a6f 696e 2873 7263 2e73 706c 6974  '.join(src.split
+0003cea0: 2829 290a 2020 2020 2020 2020 2020 2020  ()).            
+0003ceb0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0003cec0: 2020 2020 2020 7265 7475 726e 2073 796d        return sym
+0003ced0: 2e6a 6f69 6e28 7372 632e 7370 6c69 7428  .join(src.split(
+0003cee0: 7379 6d29 290a 2020 2020 7265 7475 726e  sym)).    return
+0003cef0: 2073 7263 0a0a 6465 6620 506f 7028 7372   src..def Pop(sr
+0003cf00: 632c 6b65 792c 6465 6661 756c 743d 4e6f  c,key,default=No
+0003cf10: 6e65 293a 0a20 2020 2069 6620 6973 696e  ne):.    if isin
+0003cf20: 7374 616e 6365 2873 7263 2c64 6963 7429  stance(src,dict)
+0003cf30: 3a0a 2020 2020 2020 2020 6966 206b 6579  :.        if key
+0003cf40: 2069 6e20 7372 633a 0a20 2020 2020 2020   in src:.       
+0003cf50: 2020 2020 2072 6574 7572 6e20 7372 632e       return src.
+0003cf60: 706f 7028 6b65 7929 0a20 2020 2065 6c69  pop(key).    eli
+0003cf70: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
+0003cf80: 2c6c 6973 7429 3a0a 2020 2020 2020 2020  ,list):.        
+0003cf90: 6966 2069 7369 6e73 7461 6e63 6528 6b65  if isinstance(ke
+0003cfa0: 792c 696e 7429 2061 6e64 206e 6f74 2069  y,int) and not i
+0003cfb0: 7369 6e73 7461 6e63 6528 6b65 792c 626f  sinstance(key,bo
+0003cfc0: 6f6c 293a 0a20 2020 2020 2020 2020 2020  ol):.           
+0003cfd0: 2069 6620 6c65 6e28 7372 6329 203e 2061   if len(src) > a
+0003cfe0: 6273 286b 6579 293a 0a20 2020 2020 2020  bs(key):.       
+0003cff0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0003d000: 7372 632e 706f 7028 6b65 7929 0a20 2020  src.pop(key).   
+0003d010: 2069 6620 6e6f 7420 4973 4e6f 6e65 2864   if not IsNone(d
+0003d020: 6566 6175 6c74 293a 0a20 2020 2020 2020  efault):.       
+0003d030: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+0003d040: 0a64 6566 2049 7354 7275 6528 636f 6e64  .def IsTrue(cond
+0003d050: 6974 696f 6e2c 7265 7175 6972 656d 656e  ition,requiremen
+0003d060: 7473 3d4e 6f6e 652c 7368 656c 6c3d 4661  ts=None,shell=Fa
+0003d070: 6c73 652c 2a2a 6f70 7473 293a 0a20 2020  lse,**opts):.   
+0003d080: 2063 6f6e 6469 7469 6f6e 5f74 7970 653d   condition_type=
+0003d090: 7479 7065 2863 6f6e 6469 7469 6f6e 292e  type(condition).
+0003d0a0: 5f5f 6e61 6d65 5f5f 0a20 2020 2069 6620  __name__.    if 
+0003d0b0: 4973 4675 6e63 7469 6f6e 2863 6f6e 6469  IsFunction(condi
+0003d0c0: 7469 6f6e 2c62 7569 6c74 696e 3d46 616c  tion,builtin=Fal
+0003d0d0: 7365 293a 0a20 2020 2020 2020 206f 7074  se):.        opt
+0003d0e0: 735b 2770 6172 656e 7427 5d3d 3320 6966  s['parent']=3 if
+0003d0f0: 2027 7061 7265 6e74 2720 6e6f 7420 696e   'parent' not in
+0003d100: 206f 7074 7320 656c 7365 206f 7074 735b   opts else opts[
+0003d110: 2770 6172 656e 7427 5d2b 320a 2020 2020  'parent']+2.    
+0003d120: 2020 2020 6966 2046 6565 6446 756e 6328      if FeedFunc(
+0003d130: 636f 6e64 6974 696f 6e2c 2a2a 6f70 7473  condition,**opts
+0003d140: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+0003d150: 6574 7572 6e20 5472 7565 0a20 2020 2065  eturn True.    e
+0003d160: 6c69 6620 636f 6e64 6974 696f 6e5f 7479  lif condition_ty
+0003d170: 7065 203d 3d20 2773 7472 273a 0a20 2020  pe == 'str':.   
+0003d180: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+0003d190: 2020 2020 2020 7265 7475 726e 2065 7661        return eva
+0003d1a0: 6c28 636f 6e64 6974 696f 6e29 0a20 2020  l(condition).   
+0003d1b0: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
+0003d1c0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+0003d1d0: 7374 616e 6365 2872 6571 7569 7265 6d65  stance(requireme
+0003d1e0: 6e74 732c 2874 7570 6c65 2c6c 6973 7429  nts,(tuple,list)
+0003d1f0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0003d200: 2020 2069 6620 4973 496e 2863 6f6e 6469     if IsIn(condi
+0003d210: 7469 6f6e 202c 7265 7175 6972 656d 656e  tion ,requiremen
+0003d220: 7473 293a 2072 6574 7572 6e20 5472 7565  ts): return True
+0003d230: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+0003d240: 6620 7265 7175 6972 656d 656e 7473 2069  f requirements i
+0003d250: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0003d260: 2020 2020 2020 2020 2020 2020 6966 2063              if c
+0003d270: 6f6e 6469 7469 6f6e 203d 3d20 7265 7175  ondition == requ
+0003d280: 6972 656d 656e 7473 203a 2072 6574 7572  irements : retur
+0003d290: 6e20 5472 7565 0a20 2020 2065 6c69 6620  n True.    elif 
+0003d2a0: 636f 6e64 6974 696f 6e5f 7479 7065 203d  condition_type =
+0003d2b0: 3d20 2762 6f6f 6c27 3a0a 2020 2020 2020  = 'bool':.      
+0003d2c0: 2020 7265 7475 726e 2063 6f6e 6469 7469    return conditi
+0003d2d0: 6f6e 0a20 2020 2065 6c69 6620 636f 6e64  on.    elif cond
+0003d2e0: 6974 696f 6e5f 7479 7065 203d 3d20 2769  ition_type == 'i
+0003d2f0: 6e74 273a 0a20 2020 2020 2020 2069 6620  nt':.        if 
+0003d300: 7368 656c 6c3a 0a20 2020 2020 2020 2020  shell:.         
+0003d310: 2020 2069 6620 636f 6e64 6974 696f 6e3d     if condition=
+0003d320: 3d30 3a20 7265 7475 726e 2054 7275 650a  =0: return True.
+0003d330: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0003d340: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
+0003d350: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0003d360: 2020 2069 6620 636f 6e64 6974 696f 6e3e     if condition>
+0003d370: 303a 2072 6574 7572 6e20 5472 7565 0a20  0: return True. 
+0003d380: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0003d390: 6e20 4661 6c73 650a 2020 2020 7265 7475  n False.    retu
+0003d3a0: 726e 2046 616c 7365 0a0a 6465 6620 4170  rn False..def Ap
+0003d3b0: 7065 6e64 282a 612c 7379 6d62 6f6c 3d27  pend(*a,symbol='
+0003d3c0: 272c 6174 3d2d 312c 7761 6e74 3d4e 6f6e  ',at=-1,want=Non
+0003d3d0: 6529 3a20 2320 4170 7065 6e64 2064 6174  e): # Append dat
+0003d3e0: 6120 6163 636f 7264 696e 6720 746f 2073  a according to s
+0003d3f0: 6f75 7263 6520 7479 7065 0a20 2020 2069  ource type.    i
+0003d400: 6620 613a 2020 2020 2020 2020 2020 2020  f a:            
+0003d410: 2020 2020 2020 2020 2320 6c69 7374 202b          # list +
+0003d420: 206c 6973 740a 2020 2020 2020 2020 733d   list.        s=
+0003d430: 615b 305d 2020 2020 2020 2020 2020 2020  a[0]            
+0003d440: 2020 2023 206f 7468 6572 203d 3e20 7075     # other => pu
+0003d450: 7420 746f 206c 6973 740a 2020 2020 2020  t to list.      
+0003d460: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0003d470: 732c 6279 7465 7329 3a20 733d 5374 7228  s,bytes): s=Str(
+0003d480: 7329 0a20 2020 2020 2020 2069 6620 7761  s).        if wa
+0003d490: 6e74 3a0a 2020 2020 2020 2020 2020 2020  nt:.            
+0003d4a0: 6966 2077 616e 7420 696e 205b 6c69 7374  if want in [list
+0003d4b0: 2c27 6c69 7374 275d 3a0a 2020 2020 2020  ,'list']:.      
 0003d4c0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-0003d4d0: 6e73 7461 6e63 6528 732c 286c 6973 742c  nstance(s,(list,
-0003d4e0: 7475 706c 6529 293a 0a20 2020 2020 2020  tuple)):.       
-0003d4f0: 2020 2020 2020 2020 2020 2020 2073 3d4a               s=J
-0003d500: 6f69 6e28 732c 7379 6d62 6f6c 3d73 796d  oin(s,symbol=sym
-0003d510: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
-0003d520: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0003d530: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0003d540: 3d27 7b7d 272e 666f 726d 6174 2873 290a  ='{}'.format(s).
-0003d550: 2020 2020 2020 2020 736e 3d74 7970 6528          sn=type(
-0003d560: 7329 2e5f 5f6e 616d 655f 5f0a 2020 2020  s).__name__.    
-0003d570: 2020 2020 666f 7220 6920 696e 2061 5b31      for i in a[1
-0003d580: 3a5d 3a0a 2020 2020 2020 2020 2020 2020  :]:.            
-0003d590: 6966 2073 6e20 3d3d 2027 7374 7227 3a0a  if sn == 'str':.
-0003d5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d5b0: 6966 2069 7369 6e73 7461 6e63 6528 692c  if isinstance(i,
-0003d5c0: 286c 6973 742c 7475 706c 6529 293a 0a20  (list,tuple)):. 
-0003d5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d5e0: 2020 2066 6f72 2078 2069 6e20 693a 0a20     for x in i:. 
-0003d5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d600: 2020 2020 2020 2069 6620 6174 203d 3d20         if at == 
-0003d610: 2d31 3a0a 2020 2020 2020 2020 2020 2020  -1:.            
-0003d620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d630: 733d 4a6f 696e 2873 2c27 7b7d 272e 666f  s=Join(s,'{}'.fo
-0003d640: 726d 6174 2878 292c 7379 6d62 6f6c 3d73  rmat(x),symbol=s
-0003d650: 796d 626f 6c29 0a20 2020 2020 2020 2020  ymbol).         
-0003d660: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0003d670: 6c69 6620 6174 203d 3d20 303a 0a20 2020  lif at == 0:.   
-0003d680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d690: 2020 2020 2020 2020 2073 3d4a 6f69 6e28           s=Join(
-0003d6a0: 277b 7d27 2e66 6f72 6d61 7428 7829 2c73  '{}'.format(x),s
-0003d6b0: 2c73 796d 626f 6c3d 7379 6d62 6f6c 290a  ,symbol=symbol).
-0003d6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d6d0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0003d6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d6f0: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-0003d700: 2873 2920 3e20 6174 3a0a 2020 2020 2020  (s) > at:.      
-0003d710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d720: 2020 2020 2020 2020 2020 733d 4a6f 696e            s=Join
-0003d730: 284a 6f69 6e28 735b 3a61 745d 2c27 7b7d  (Join(s[:at],'{}
-0003d740: 272e 666f 726d 6174 2878 292c 7379 6d62  '.format(x),symb
-0003d750: 6f6c 3d73 796d 626f 6c29 2c73 5b61 743a  ol=symbol),s[at:
-0003d760: 5d2c 7379 6d62 6f6c 3d73 796d 626f 6c29  ],symbol=symbol)
-0003d770: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003d780: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
-0003d790: 2869 2c28 696e 742c 7374 722c 6279 7465  (i,(int,str,byte
-0003d7a0: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
-0003d7b0: 2020 2020 2020 2020 2069 6620 6174 203d           if at =
-0003d7c0: 3d20 2d31 3a0a 2020 2020 2020 2020 2020  = -1:.          
-0003d7d0: 2020 2020 2020 2020 2020 2020 2020 733d                s=
-0003d7e0: 4a6f 696e 2873 2c27 7b7d 272e 666f 726d  Join(s,'{}'.form
-0003d7f0: 6174 2853 7472 2869 2929 2c73 796d 626f  at(Str(i)),symbo
-0003d800: 6c3d 7379 6d62 6f6c 290a 2020 2020 2020  l=symbol).      
-0003d810: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0003d820: 6966 2061 7420 3d3d 2030 3a0a 2020 2020  if at == 0:.    
-0003d830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d840: 2020 2020 733d 4a6f 696e 2827 7b7d 272e      s=Join('{}'.
-0003d850: 666f 726d 6174 2853 7472 2869 2929 2c73  format(Str(i)),s
-0003d860: 2c73 796d 626f 6c3d 7379 6d62 6f6c 290a  ,symbol=symbol).
-0003d870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d880: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0003d890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d8a0: 2020 6966 206c 656e 2873 2920 3e20 6174    if len(s) > at
-0003d8b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003d8c0: 2020 2020 2020 2020 2020 2020 2020 733d                s=
-0003d8d0: 4a6f 696e 284a 6f69 6e28 735b 3a61 745d  Join(Join(s[:at]
-0003d8e0: 2c27 7b7d 272e 666f 726d 6174 2853 7472  ,'{}'.format(Str
-0003d8f0: 2869 2929 2c73 796d 626f 6c3d 7379 6d62  (i)),symbol=symb
-0003d900: 6f6c 292c 735b 6174 3a5d 2c73 796d 626f  ol),s[at:],symbo
-0003d910: 6c3d 7379 6d62 6f6c 290a 2020 2020 2020  l=symbol).      
-0003d920: 2020 2020 2020 656c 6966 2073 6e20 3d3d        elif sn ==
-0003d930: 2027 6c69 7374 273a 0a20 2020 2020 2020   'list':.       
-0003d940: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-0003d950: 7374 616e 6365 2869 2c73 7472 2920 616e  stance(i,str) an
-0003d960: 6420 7379 6d62 6f6c 3a0a 2020 2020 2020  d symbol:.      
-0003d970: 2020 2020 2020 2020 2020 2020 2020 693d                i=
-0003d980: 692e 7370 6c69 7428 7379 6d62 6f6c 290a  i.split(symbol).
-0003d990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d9a0: 6966 2061 7420 3d3d 202d 3120 6f72 2061  if at == -1 or a
-0003d9b0: 7420 3d3d 206c 656e 2873 292d 313a 0a20  t == len(s)-1:. 
+0003d4d0: 6e73 7461 6e63 6528 732c 7475 706c 6529  nstance(s,tuple)
+0003d4e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003d4f0: 2020 2020 2020 733d 6c69 7374 2873 290a        s=list(s).
+0003d500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d510: 656c 6966 206e 6f74 2069 7369 6e73 7461  elif not isinsta
+0003d520: 6e63 6528 732c 6c69 7374 293a 0a20 2020  nce(s,list):.   
+0003d530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d540: 2073 3d5b 735d 0a20 2020 2020 2020 2020   s=[s].         
+0003d550: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
+0003d560: 7374 616e 6365 2873 2c73 7472 2920 616e  stance(s,str) an
+0003d570: 6420 7379 6d62 6f6c 3a0a 2020 2020 2020  d symbol:.      
+0003d580: 2020 2020 2020 2020 2020 2020 2020 733d                s=
+0003d590: 732e 7370 6c69 7428 7379 6d62 6f6c 290a  s.split(symbol).
+0003d5a0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0003d5b0: 2077 616e 7420 696e 205b 7374 722c 2773   want in [str,'s
+0003d5c0: 7472 275d 3a0a 2020 2020 2020 2020 2020  tr']:.          
+0003d5d0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0003d5e0: 6e63 6528 732c 286c 6973 742c 7475 706c  nce(s,(list,tupl
+0003d5f0: 6529 293a 0a20 2020 2020 2020 2020 2020  e)):.           
+0003d600: 2020 2020 2020 2020 2073 3d4a 6f69 6e28           s=Join(
+0003d610: 732c 7379 6d62 6f6c 3d73 796d 626f 6c29  s,symbol=symbol)
+0003d620: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003d630: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0003d640: 2020 2020 2020 2020 2020 2073 3d27 7b7d             s='{}
+0003d650: 272e 666f 726d 6174 2873 290a 2020 2020  '.format(s).    
+0003d660: 2020 2020 736e 3d74 7970 6528 7329 2e5f      sn=type(s)._
+0003d670: 5f6e 616d 655f 5f0a 2020 2020 2020 2020  _name__.        
+0003d680: 666f 7220 6920 696e 2061 5b31 3a5d 3a0a  for i in a[1:]:.
+0003d690: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0003d6a0: 6e20 3d3d 2027 7374 7227 3a0a 2020 2020  n == 'str':.    
+0003d6b0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0003d6c0: 7369 6e73 7461 6e63 6528 692c 286c 6973  sinstance(i,(lis
+0003d6d0: 742c 7475 706c 6529 293a 0a20 2020 2020  t,tuple)):.     
+0003d6e0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0003d6f0: 6f72 2078 2069 6e20 693a 0a20 2020 2020  or x in i:.     
+0003d700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d710: 2020 2069 6620 6174 203d 3d20 2d31 3a0a     if at == -1:.
+0003d720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d730: 2020 2020 2020 2020 2020 2020 733d 4a6f              s=Jo
+0003d740: 696e 2873 2c27 7b7d 272e 666f 726d 6174  in(s,'{}'.format
+0003d750: 2878 292c 7379 6d62 6f6c 3d73 796d 626f  (x),symbol=symbo
+0003d760: 6c29 0a20 2020 2020 2020 2020 2020 2020  l).             
+0003d770: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0003d780: 6174 203d 3d20 303a 0a20 2020 2020 2020  at == 0:.       
+0003d790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d7a0: 2020 2020 2073 3d4a 6f69 6e28 277b 7d27       s=Join('{}'
+0003d7b0: 2e66 6f72 6d61 7428 7829 2c73 2c73 796d  .format(x),s,sym
+0003d7c0: 626f 6c3d 7379 6d62 6f6c 290a 2020 2020  bol=symbol).    
+0003d7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d7e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0003d7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d800: 2020 2020 2020 6966 206c 656e 2873 2920        if len(s) 
+0003d810: 3e20 6174 3a0a 2020 2020 2020 2020 2020  > at:.          
+0003d820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d830: 2020 2020 2020 733d 4a6f 696e 284a 6f69        s=Join(Joi
+0003d840: 6e28 735b 3a61 745d 2c27 7b7d 272e 666f  n(s[:at],'{}'.fo
+0003d850: 726d 6174 2878 292c 7379 6d62 6f6c 3d73  rmat(x),symbol=s
+0003d860: 796d 626f 6c29 2c73 5b61 743a 5d2c 7379  ymbol),s[at:],sy
+0003d870: 6d62 6f6c 3d73 796d 626f 6c29 0a20 2020  mbol=symbol).   
+0003d880: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+0003d890: 6620 6973 696e 7374 616e 6365 2869 2c28  f isinstance(i,(
+0003d8a0: 696e 742c 7374 722c 6279 7465 7329 293a  int,str,bytes)):
+0003d8b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003d8c0: 2020 2020 2069 6620 6174 203d 3d20 2d31       if at == -1
+0003d8d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003d8e0: 2020 2020 2020 2020 2020 733d 4a6f 696e            s=Join
+0003d8f0: 2873 2c27 7b7d 272e 666f 726d 6174 2853  (s,'{}'.format(S
+0003d900: 7472 2869 2929 2c73 796d 626f 6c3d 7379  tr(i)),symbol=sy
+0003d910: 6d62 6f6c 290a 2020 2020 2020 2020 2020  mbol).          
+0003d920: 2020 2020 2020 2020 2020 656c 6966 2061            elif a
+0003d930: 7420 3d3d 2030 3a0a 2020 2020 2020 2020  t == 0:.        
+0003d940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d950: 733d 4a6f 696e 2827 7b7d 272e 666f 726d  s=Join('{}'.form
+0003d960: 6174 2853 7472 2869 2929 2c73 2c73 796d  at(Str(i)),s,sym
+0003d970: 626f 6c3d 7379 6d62 6f6c 290a 2020 2020  bol=symbol).    
+0003d980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d990: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0003d9a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0003d9b0: 206c 656e 2873 2920 3e20 6174 3a0a 2020   len(s) > at:.  
 0003d9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d9d0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0003d9e0: 2869 2c6c 6973 7429 3a0a 2020 2020 2020  (i,list):.      
-0003d9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003da00: 2020 733d 732b 690a 2020 2020 2020 2020    s=s+i.        
-0003da10: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0003da20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003da30: 2020 2020 2020 2020 2020 732e 6170 7065            s.appe
-0003da40: 6e64 2869 290a 2020 2020 2020 2020 2020  nd(i).          
-0003da50: 2020 2020 2020 656c 6966 2061 7420 3d3d        elif at ==
-0003da60: 2030 206f 7220 6c65 6e28 7329 2b61 7420   0 or len(s)+at 
-0003da70: 3d3d 2030 3a0a 2020 2020 2020 2020 2020  == 0:.          
-0003da80: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-0003da90: 6e73 7461 6e63 6528 692c 6c69 7374 293a  nstance(i,list):
-0003daa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003dab0: 2020 2020 2020 2020 2073 3d69 2b73 0a20           s=i+s. 
-0003dac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003dad0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0003dae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003daf0: 2073 3d5b 695d 2b73 0a20 2020 2020 2020   s=[i]+s.       
-0003db00: 2020 2020 2020 2020 2065 6c69 6620 6174           elif at
-0003db10: 203e 3020 616e 6420 6174 203c 206c 656e   >0 and at < len
-0003db20: 2873 293a 0a20 2020 2020 2020 2020 2020  (s):.           
-0003db30: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-0003db40: 7374 616e 6365 2869 2c6c 6973 7429 3a0a  stance(i,list):.
-0003db50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003db60: 2020 2020 2020 2020 733d 735b 3a61 745d          s=s[:at]
-0003db70: 2b69 2b73 5b61 743a 5d0a 2020 2020 2020  +i+s[at:].      
-0003db80: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0003db90: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0003dba0: 2020 2020 2020 2020 2020 2020 733d 735b              s=s[
-0003dbb0: 3a61 745d 2b5b 695d 2b73 5b61 743a 5d0a  :at]+[i]+s[at:].
-0003dbc0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0003dbd0: 0a20 2020 2072 6574 7572 6e20 4661 6c73  .    return Fals
-0003dbe0: 650a 0a64 6566 2070 6163 6b65 745f 7265  e..def packet_re
-0003dbf0: 6365 6976 655f 616c 6c28 736f 636b 2c63  ceive_all(sock,c
-0003dc00: 6f75 6e74 2c70 726f 6772 6573 733d 4661  ount,progress=Fa
-0003dc10: 6c73 652c 7072 6f67 7265 7373 5f6d 7367  lse,progress_msg
-0003dc20: 3d4e 6f6e 652c 6c6f 673d 4e6f 6e65 2c72  =None,log=None,r
-0003dc30: 6574 7279 3d30 2c72 6574 7279 5f74 696d  etry=0,retry_tim
-0003dc40: 656f 7574 3d35 2c65 7272 5f73 6372 3d46  eout=5,err_scr=F
-0003dc50: 616c 7365 293a 2023 2050 6163 6b65 740a  alse): # Packet.
-0003dc60: 2020 2020 6966 2074 7970 6528 736f 636b      if type(sock
-0003dc70: 292e 5f5f 6e61 6d65 5f5f 206e 6f74 2069  ).__name__ not i
-0003dc80: 6e20 5b27 736f 636b 6574 272c 275f 736f  n ['socket','_so
-0003dc90: 636b 6574 6f62 6a65 6374 272c 2753 534c  cketobject','SSL
-0003dca0: 536f 636b 6574 275d 3a0a 2020 2020 2020  Socket']:.      
-0003dcb0: 2020 7265 7475 726e 2046 616c 7365 2c27    return False,'
-0003dcc0: 4973 206e 6f74 206e 6574 776f 726b 2073  Is not network s
-0003dcd0: 6f63 6b65 7427 0a20 2020 2062 7566 203d  ocket'.    buf =
-0003dce0: 2062 2727 0a20 2020 2066 696c 655f 7369   b''.    file_si
-0003dcf0: 7a65 5f64 3d69 6e74 2827 7b30 7d27 2e66  ze_d=int('{0}'.f
-0003dd00: 6f72 6d61 7428 636f 756e 7429 290a 2020  ormat(count)).  
-0003dd10: 2020 746e 3d30 0a20 2020 206e 6577 6275    tn=0.    newbu
-0003dd20: 663d 4e6f 6e65 0a20 2020 2077 6869 6c65  f=None.    while
-0003dd30: 2063 6f75 6e74 3a0a 2020 2020 2020 2020   count:.        
-0003dd40: 6966 2070 726f 6772 6573 733a 0a20 2020  if progress:.   
-0003dd50: 2020 2020 2020 2020 2069 6620 7072 6f67           if prog
-0003dd60: 7265 7373 5f6d 7367 3a0a 2020 2020 2020  ress_msg:.      
-0003dd70: 2020 2020 2020 2020 2020 7072 696e 7466            printf
-0003dd80: 2827 5c72 7b7d 205b 207b 7d20 2520 5d27  ('\r{} [ {} % ]'
-0003dd90: 2e66 6f72 6d61 7428 7072 6f67 7265 7373  .format(progress
-0003dda0: 5f6d 7367 2c69 6e74 2828 6669 6c65 5f73  _msg,int((file_s
-0003ddb0: 697a 655f 642d 636f 756e 7429 202f 2066  ize_d-count) / f
-0003ddc0: 696c 655f 7369 7a65 5f64 202a 2031 3030  ile_size_d * 100
-0003ddd0: 2929 2c6c 6f67 3d6c 6f67 2c64 6972 6563  )),log=log,direc
-0003dde0: 743d 5472 7565 290a 2020 2020 2020 2020  t=True).        
-0003ddf0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0003de00: 2020 2020 2020 2020 2020 7072 696e 7466            printf
-0003de10: 2827 5c72 446f 776e 6c6f 6164 696e 672e  ('\rDownloading.
-0003de20: 2e2e 205b 207b 7d20 2520 5d27 2e66 6f72  .. [ {} % ]'.for
-0003de30: 6d61 7428 696e 7428 2866 696c 655f 7369  mat(int((file_si
-0003de40: 7a65 5f64 2d63 6f75 6e74 2920 2f20 6669  ze_d-count) / fi
-0003de50: 6c65 5f73 697a 655f 6420 2a20 3130 3029  le_size_d * 100)
-0003de60: 292c 6c6f 673d 6c6f 672c 6469 7265 6374  ),log=log,direct
-0003de70: 3d54 7275 6529 0a20 2020 2020 2020 2074  =True).        t
-0003de80: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-0003de90: 6e65 7762 7566 203d 2073 6f63 6b2e 7265  newbuf = sock.re
-0003dea0: 6376 2863 6f75 6e74 290a 2020 2020 2020  cv(count).      
-0003deb0: 2020 2020 2020 746e 3d30 2023 2072 6573        tn=0 # res
-0003dec0: 6574 2074 7279 0a20 2020 2020 2020 2065  et try.        e
-0003ded0: 7863 6570 7420 736f 636b 6574 2e65 7272  xcept socket.err
-0003dee0: 6f72 2061 7320 653a 0a20 2020 2020 2020  or as e:.       
-0003def0: 2020 2020 2069 6620 746e 203c 2072 6574       if tn < ret
-0003df00: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-0003df10: 2020 2020 7072 696e 7466 2822 5b45 5252      printf("[ERR
-0003df20: 4f52 5d20 7469 6d65 6f75 7420 7661 6c75  OR] timeout valu
-0003df30: 653a 7b7d 2072 6574 7279 3a20 7b7d 2f7b  e:{} retry: {}/{
-0003df40: 7d5c 6e7b 7d22 2e66 6f72 6d61 7428 736f  }\n{}".format(so
-0003df50: 636b 2e67 6574 7469 6d65 6f75 7428 292c  ck.gettimeout(),
-0003df60: 746e 2c72 6574 7279 2c65 292c 6c6f 673d  tn,retry,e),log=
-0003df70: 6c6f 672c 6473 703d 2765 2720 6966 2065  log,dsp='e' if e
-0003df80: 7272 5f73 6372 2065 6c73 6520 2764 2729  rr_scr else 'd')
-0003df90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003dfa0: 2074 6e2b 3d31 0a20 2020 2020 2020 2020   tn+=1.         
-0003dfb0: 2020 2020 2020 2054 494d 4528 292e 536c         TIME().Sl
-0003dfc0: 6565 7028 3129 0a20 2020 2020 2020 2020  eep(1).         
-0003dfd0: 2020 2020 2020 2073 6f63 6b2e 7365 7474         sock.sett
-0003dfe0: 696d 656f 7574 2872 6574 7279 5f74 696d  imeout(retry_tim
-0003dff0: 656f 7574 290a 2020 2020 2020 2020 2020  eout).          
-0003e000: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
-0003e010: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0003e020: 6e20 2765 7272 6f72 272c 650a 2020 2020  n 'error',e.    
-0003e030: 2020 2020 6966 206e 6f74 206e 6577 6275      if not newbu
-0003e040: 663a 2072 6574 7572 6e20 5472 7565 2c4e  f: return True,N
-0003e050: 6f6e 6520 236d 6179 6265 2073 6f6d 6574  one #maybe somet
-0003e060: 6869 6e67 2073 6f63 6b65 7420 6973 7375  hing socket issu
-0003e070: 652e 0a20 2020 2020 2020 2062 7566 202b  e..        buf +
-0003e080: 3d20 6e65 7762 7566 0a20 2020 2020 2020  = newbuf.       
-0003e090: 2063 6f75 6e74 202d 3d20 6c65 6e28 6e65   count -= len(ne
-0003e0a0: 7762 7566 290a 2020 2020 6966 2070 726f  wbuf).    if pro
-0003e0b0: 6772 6573 733a 0a20 2020 2020 2020 2069  gress:.        i
-0003e0c0: 6620 7072 6f67 7265 7373 5f6d 7367 3a0a  f progress_msg:.
-0003e0d0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-0003e0e0: 7466 2827 5c72 7b7d 205b 2031 3030 2025  tf('\r{} [ 100 %
-0003e0f0: 205d 5c6e 272e 666f 726d 6174 2870 726f   ]\n'.format(pro
-0003e100: 6772 6573 735f 6d73 6729 2c6c 6f67 3d6c  gress_msg),log=l
-0003e110: 6f67 2c64 6972 6563 743d 5472 7565 290a  og,direct=True).
-0003e120: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0003e130: 2020 2020 2020 2020 2020 7072 696e 7466            printf
-0003e140: 2827 5c72 446f 776e 6c6f 6164 696e 672e  ('\rDownloading.
-0003e150: 2e2e 205b 2031 3030 2025 205d 5c6e 272c  .. [ 100 % ]\n',
-0003e160: 6c6f 673d 6c6f 672c 6469 7265 6374 3d54  log=log,direct=T
-0003e170: 7275 6529 0a20 2020 2072 6574 7572 6e20  rue).    return 
-0003e180: 5472 7565 2c62 7566 0a0a 6465 6620 4461  True,buf..def Da
-0003e190: 7461 3242 7974 6553 7472 696e 6728 6461  ta2ByteString(da
-0003e1a0: 7461 2c70 726f 746f 636f 6c3d 3229 3a0a  ta,protocol=2):.
-0003e1b0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-0003e1c0: 2072 6574 7572 6e20 5472 7565 2c70 6963   return True,pic
-0003e1d0: 6b6c 652e 6475 6d70 7328 6461 7461 2c70  kle.dumps(data,p
-0003e1e0: 726f 746f 636f 6c3d 7072 6f74 6f63 6f6c  rotocol=protocol
-0003e1f0: 2920 2320 636f 6d6d 6f6e 2032 2e78 2026  ) # common 2.x &
-0003e200: 2033 2e78 2076 6572 7369 6f6e 203a 2070   3.x version : p
-0003e210: 726f 746f 636f 6c3d 320a 2020 2020 6578  rotocol=2.    ex
-0003e220: 6365 7074 3a0a 2020 2020 2020 2020 7472  cept:.        tr
-0003e230: 793a 0a20 2020 2020 2020 2020 2020 2023  y:.            #
-0003e240: 203c 636c 6173 7320 274b 6579 4572 726f   <class 'KeyErro
-0003e250: 7227 3e20 7468 656e 2074 7279 2061 6761  r'> then try aga
-0003e260: 696e 2061 6674 6572 2066 696c 7465 7220  in after filter 
-0003e270: 6f75 7420 7079 7468 6f6e 2064 6566 6175  out python defau
-0003e280: 6c74 2065 6e67 696e 650a 2020 2020 2020  lt engine.      
-0003e290: 2020 2020 2020 2320 6d61 7962 6520 756e        # maybe un
-0003e2a0: 6b6e 6f77 6e20 6368 6172 6163 7465 7220  known character 
-0003e2b0: 696e 2074 6865 2064 6174 610a 2020 2020  in the data.    
-0003e2c0: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-0003e2d0: 7275 652c 7069 636b 6c65 2e64 756d 7073  rue,pickle.dumps
-0003e2e0: 2865 7661 6c28 7374 7228 6461 7461 2929  (eval(str(data))
-0003e2f0: 2c70 726f 746f 636f 6c3d 7072 6f74 6f63  ,protocol=protoc
-0003e300: 6f6c 2920 2320 636f 6d6d 6f6e 2032 2e78  ol) # common 2.x
-0003e310: 2026 2033 2e78 2076 6572 7369 6f6e 203a   & 3.x version :
-0003e320: 2070 726f 746f 636f 6c3d 320a 2020 2020   protocol=2.    
-0003e330: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
-0003e340: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-0003e350: 616c 7365 2c73 7973 2e65 7863 5f69 6e66  alse,sys.exc_inf
-0003e360: 6f28 295b 305d 0a0a 6465 6620 4279 7465  o()[0]..def Byte
-0003e370: 5374 7269 6e67 3244 6174 6128 6461 7461  String2Data(data
-0003e380: 293a 0a20 2020 2023 2049 6620 6e6f 7420  ):.    # If not 
-0003e390: 7069 636b 6c65 2064 6174 6120 7468 656e  pickle data then
-0003e3a0: 2072 6574 7572 6e20 6f72 6967 696e 616c   return original
-0003e3b0: 2064 6174 612c 2074 6861 7420 6973 2072   data, that is r
-0003e3c0: 6561 6c20 6461 7461 0a20 2020 2023 2069  eal data.    # i
-0003e3d0: 6620 7069 636b 6c65 2064 6174 6120 7468  f pickle data th
-0003e3e0: 656e 2063 6f6e 7665 7274 2074 6f20 6461  en convert to da
-0003e3f0: 7461 0a20 2020 2074 7279 3a0a 2020 2020  ta.    try:.    
-0003e400: 2020 2020 7265 7475 726e 2070 6963 6b6c      return pickl
-0003e410: 652e 6c6f 6164 7328 6461 7461 290a 2020  e.loads(data).  
-0003e420: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
-0003e430: 2020 7265 7475 726e 2064 6174 610a 0a64    return data..d
-0003e440: 6566 2070 6163 6b65 745f 656e 6328 6461  ef packet_enc(da
-0003e450: 7461 2c6b 6579 3d27 6b67 272c 656e 633d  ta,key='kg',enc=
-0003e460: 4661 6c73 6529 3a0a 2020 2020 6e6b 6579  False):.    nkey
-0003e470: 3d42 7974 6573 3249 6e74 286b 6579 2c65  =Bytes2Int(key,e
-0003e480: 6e63 6f64 653d 2775 7466 2d38 272c 6465  ncode='utf-8',de
-0003e490: 6661 756c 743d 276f 7267 2729 0a20 2020  fault='org').   
-0003e4a0: 206f 6b2c 7064 6174 613d 4461 7461 3242   ok,pdata=Data2B
-0003e4b0: 7974 6553 7472 696e 6728 6461 7461 290a  yteString(data).
-0003e4c0: 2020 2020 6966 206e 6f74 206f 6b3a 2072      if not ok: r
-0003e4d0: 6574 7572 6e20 4661 6c73 652c 7064 6174  eturn False,pdat
-0003e4e0: 610a 2020 2020 6461 7461 5f74 7970 653d  a.    data_type=
-0003e4f0: 4279 7465 7328 7479 7065 2864 6174 6129  Bytes(type(data)
-0003e500: 2e5f 5f6e 616d 655f 5f5b 305d 290a 2020  .__name__[0]).  
-0003e510: 2020 6966 2065 6e63 2061 6e64 206b 6579    if enc and key
-0003e520: 3a0a 2020 2020 2020 2020 2320 656e 636f  :.        # enco
-0003e530: 6465 2063 6f64 6520 6865 7265 0a20 2020  de code here.   
-0003e540: 2020 2020 2023 656e 635f 7466 3d42 7974       #enc_tf=Byt
-0003e550: 6573 2827 7427 2920 2320 4e6f 7720 6e6f  es('t') # Now no
-0003e560: 7420 636f 6465 2068 6572 652e 2053 6f2c  t code here. So,
-0003e570: 2065 7665 7279 7468 696e 6720 746f 2027   everything to '
-0003e580: 6627 0a20 2020 2020 2020 2023 7064 6174  f'.        #pdat
-0003e590: 613d 656e 636f 6465 286b 6579 2c70 6461  a=encode(key,pda
-0003e5a0: 7461 290a 2020 2020 2020 2020 656e 635f  ta).        enc_
-0003e5b0: 7466 3d42 7974 6573 2827 6627 290a 2020  tf=Bytes('f').  
-0003e5c0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0003e5d0: 656e 635f 7466 3d42 7974 6573 2827 6627  enc_tf=Bytes('f'
-0003e5e0: 290a 2020 2020 6e64 6174 613d 7374 7275  ).    ndata=stru
-0003e5f0: 6374 2e70 6163 6b28 273e 4973 7349 272c  ct.pack('>IssI',
-0003e600: 6c65 6e28 7064 6174 6129 2c64 6174 615f  len(pdata),data_
-0003e610: 7479 7065 2c65 6e63 5f74 662c 6e6b 6579  type,enc_tf,nkey
-0003e620: 292b 7064 6174 610a 2020 2020 7265 7475  )+pdata.    retu
-0003e630: 726e 2054 7275 652c 6e64 6174 610a 2020  rn True,ndata.  
-0003e640: 2020 2020 2020 0a64 6566 2070 6163 6b65        .def packe
-0003e650: 745f 6865 6164 2873 6f63 6b2c 6b65 793d  t_head(sock,key=
-0003e660: 276b 6727 2c72 6574 7279 3d30 2c72 6574  'kg',retry=0,ret
-0003e670: 7279 5f74 696d 656f 7574 3d35 2c6b 6565  ry_timeout=5,kee
-0003e680: 705f 7265 7472 793d 4661 6c73 652c 7469  p_retry=False,ti
-0003e690: 6d65 6f75 743d 3129 3a0a 2020 2020 2347  meout=1):.    #G
-0003e6a0: 6574 2048 6561 6465 720a 2020 2020 236b  et Header.    #k
-0003e6b0: 6565 705f 7265 7472 7920 3a54 7275 653a  eep_retry :True:
-0003e6c0: 2069 6620 636c 6173 6564 2073 6f63 6b65   if clased socke
-0003e6d0: 7420 6275 7420 7761 6974 0a20 2020 2070  t but wait.    p
-0003e6e0: 683d 5449 4d45 2829 0a20 2020 2069 6620  h=TIME().    if 
-0003e6f0: 2872 6574 7279 202a 2072 6574 7279 5f74  (retry * retry_t
-0003e700: 696d 656f 7574 2920 3e20 7469 6d65 6f75  imeout) > timeou
-0003e710: 743a 0a20 2020 2020 2020 2074 696d 656f  t:.        timeo
-0003e720: 7574 3d72 6574 7279 202a 2072 6574 7279  ut=retry * retry
-0003e730: 5f74 696d 656f 7574 0a20 2020 2065 6c73  _timeout.    els
-0003e740: 653a 0a20 2020 2020 2020 2069 6620 7265  e:.        if re
-0003e750: 7472 795f 7469 6d65 6f75 7420 3c3d 2030  try_timeout <= 0
-0003e760: 3a20 7265 7472 795f 7469 6d65 6f75 743d  : retry_timeout=
-0003e770: 350a 2020 2020 2020 2020 7265 7472 793d  5.        retry=
-0003e780: 2874 696d 656f 7574 2f2f 7265 7472 795f  (timeout//retry_
-0003e790: 7469 6d65 6f75 7429 2b31 0a20 2020 2077  timeout)+1.    w
-0003e7a0: 6869 6c65 2054 7275 653a 0a20 2020 2020  hile True:.     
-0003e7b0: 2020 2069 6620 436c 6f73 6564 536f 636b     if ClosedSock
-0003e7c0: 6574 2873 6f63 6b29 3a0a 2020 2020 2020  et(sock):.      
-0003e7d0: 2020 2020 2020 6966 2072 6574 7279 203c        if retry <
-0003e7e0: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
-0003e7f0: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
-0003e800: 652c 2741 6c72 6561 6479 2063 6c6f 7365  e,'Already close
-0003e810: 6420 7468 6520 736f 636b 6574 270a 2020  d the socket'.  
-0003e820: 2020 2020 2020 2020 2020 7265 7472 792d            retry-
-0003e830: 3d31 0a20 2020 2020 2020 2020 2020 2074  =1.            t
-0003e840: 696d 652e 736c 6565 7028 7265 7472 795f  ime.sleep(retry_
-0003e850: 7469 6d65 6f75 7429 0a20 2020 2020 2020  timeout).       
-0003e860: 2020 2020 2063 6f6e 7469 6e75 650a 2020       continue.  
-0003e870: 2020 2020 2020 6f6b 2c68 6561 643d 7061        ok,head=pa
-0003e880: 636b 6574 5f72 6563 6569 7665 5f61 6c6c  cket_receive_all
-0003e890: 2873 6f63 6b2c 3130 2c72 6574 7279 3d72  (sock,10,retry=r
-0003e8a0: 6574 7279 2c72 6574 7279 5f74 696d 656f  etry,retry_timeo
-0003e8b0: 7574 3d72 6574 7279 5f74 696d 656f 7574  ut=retry_timeout
-0003e8c0: 290a 2020 2020 2020 2020 6966 206b 7263  ).        if krc
-0003e8d0: 286f 6b2c 6368 6b3d 5472 7565 293a 0a20  (ok,chk=True):. 
-0003e8e0: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
-0003e8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e900: 7374 5f68 6561 643d 7374 7275 6374 2e75  st_head=struct.u
-0003e910: 6e70 6163 6b28 273e 4973 7349 272c 4279  npack('>IssI',By
-0003e920: 7465 7328 6865 6164 2929 0a20 2020 2020  tes(head)).     
-0003e930: 2020 2020 2020 2020 2020 2069 6620 7374             if st
-0003e940: 5f68 6561 645b 335d 203d 3d20 4279 7465  _head[3] == Byte
-0003e950: 7332 496e 7428 6b65 792c 656e 636f 6465  s2Int(key,encode
-0003e960: 3d27 7574 662d 3827 2c64 6566 6175 6c74  ='utf-8',default
-0003e970: 3d27 6f72 6727 293a 0a20 2020 2020 2020  ='org'):.       
-0003e980: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0003e990: 7572 6e20 5472 7565 2c73 745f 6865 6164  urn True,st_head
-0003e9a0: 5b30 5d2c 7374 5f68 6561 645b 315d 2c73  [0],st_head[1],s
-0003e9b0: 745f 6865 6164 5b32 5d0a 2020 2020 2020  t_head[2].      
-0003e9c0: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
-0003e9d0: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-0003e9e0: 7373 0a20 2020 2020 2020 2069 6620 7068  ss.        if ph
-0003e9f0: 2e4f 7574 2874 696d 656f 7574 293a 2062  .Out(timeout): b
-0003ea00: 7265 616b 0a20 2020 2020 2020 2074 696d  reak.        tim
-0003ea10: 652e 736c 6565 7028 3129 0a20 2020 2072  e.sleep(1).    r
-0003ea20: 6574 7572 6e20 4661 6c73 652c 2746 6169  eturn False,'Fai
-0003ea30: 6c20 666f 7220 7265 6164 2068 6561 6465  l for read heade
-0003ea40: 7228 7b7d 2927 2e66 6f72 6d61 7428 6865  r({})'.format(he
-0003ea50: 6164 292c 4e6f 6e65 2c4e 6f6e 650a 0a64  ad),None,None..d
-0003ea60: 6566 2070 6163 6b65 745f 6465 6328 6461  ef packet_dec(da
-0003ea70: 7461 2c65 6e63 2c6b 6579 3d27 6b67 2729  ta,enc,key='kg')
-0003ea80: 3a0a 2020 2020 236f 6b2c 7369 7a65 2c64  :.    #ok,size,d
-0003ea90: 6174 615f 7479 7065 2c65 6e63 3d70 6163  ata_type,enc=pac
-0003eaa0: 6b65 745f 6865 6164 2873 6f63 6b29 0a20  ket_head(sock). 
-0003eab0: 2020 2023 6f6b 2c64 6174 613d 7061 636b     #ok,data=pack
-0003eac0: 6574 5f72 6563 6569 7665 5f61 6c6c 2873  et_receive_all(s
-0003ead0: 6f63 6b2c 7369 7a65 2c2e 2e2e 2e29 0a20  ock,size,....). 
-0003eae0: 2020 2023 7265 616c 5f64 6174 613d 7061     #real_data=pa
-0003eaf0: 636b 6574 5f64 6563 2864 6174 612c 656e  cket_dec(data,en
-0003eb00: 6329 0a20 2020 2069 6620 656e 6320 3d3d  c).    if enc ==
-0003eb10: 2027 7427 3a0a 2020 2020 2020 2020 2320   't':.        # 
-0003eb20: 6465 636f 6465 2063 6f64 6520 6865 7265  decode code here
-0003eb30: 0a20 2020 2020 2020 2023 2064 6174 613d  .        # data=
-0003eb40: 6465 636f 6465 2864 6174 6129 0a20 2020  decode(data).   
-0003eb50: 2020 2020 2070 6173 730a 2020 2020 7265       pass.    re
-0003eb60: 7475 726e 2042 7974 6553 7472 696e 6732  turn ByteString2
-0003eb70: 4461 7461 2864 6174 6129 0a0a 6465 6620  Data(data)..def 
-0003eb80: 436c 6f73 6564 536f 636b 6574 2873 6f63  ClosedSocket(soc
-0003eb90: 6b29 3a0a 2020 2020 7472 793a 0a20 2020  k):.    try:.   
-0003eba0: 2020 2020 2023 2074 6869 7320 7769 6c6c       # this will
-0003ebb0: 2074 7279 2074 6f20 7265 6164 2062 7974   try to read byt
-0003ebc0: 6573 2077 6974 686f 7574 2062 6c6f 636b  es without block
-0003ebd0: 696e 670a 2020 2020 2020 2020 2320 616e  ing.        # an
-0003ebe0: 6420 616c 736f 2077 6974 686f 7574 2072  d also without r
-0003ebf0: 656d 6f76 696e 6720 7468 656d 2066 726f  emoving them fro
-0003ec00: 6d20 6275 6666 6572 2028 7065 656b 206f  m buffer (peek o
-0003ec10: 6e6c 7929 0a20 2020 2020 2020 2064 6174  nly).        dat
-0003ec20: 6120 3d20 736f 636b 2e72 6563 7628 3136  a = sock.recv(16
-0003ec30: 2c20 736f 636b 6574 2e4d 5347 5f44 4f4e  , socket.MSG_DON
-0003ec40: 5457 4149 5420 7c20 736f 636b 6574 2e4d  TWAIT | socket.M
-0003ec50: 5347 5f50 4545 4b29 0a20 2020 2020 2020  SG_PEEK).       
-0003ec60: 2069 6620 6c65 6e28 6461 7461 2920 3d3d   if len(data) ==
-0003ec70: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-0003ec80: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
-0003ec90: 6578 6365 7074 2042 6c6f 636b 696e 6749  except BlockingI
-0003eca0: 4f45 7272 6f72 3a0a 2020 2020 2020 2020  OError:.        
-0003ecb0: 7265 7475 726e 2046 616c 7365 2020 2320  return False  # 
-0003ecc0: 736f 636b 6574 2069 7320 6f70 656e 2061  socket is open a
-0003ecd0: 6e64 2072 6561 6469 6e67 2066 726f 6d20  nd reading from 
-0003ece0: 6974 2077 6f75 6c64 2062 6c6f 636b 0a20  it would block. 
-0003ecf0: 2020 2065 7863 6570 7420 436f 6e6e 6563     except Connec
-0003ed00: 7469 6f6e 5265 7365 7445 7272 6f72 3a0a  tionResetError:.
-0003ed10: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-0003ed20: 7275 6520 2023 2073 6f63 6b65 7420 7761  rue  # socket wa
-0003ed30: 7320 636c 6f73 6564 2066 6f72 2073 6f6d  s closed for som
-0003ed40: 6520 6f74 6865 7220 7265 6173 6f6e 0a20  e other reason. 
-0003ed50: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-0003ed60: 696f 6e20 6173 2065 3a20 2375 6e65 7870  ion as e: #unexp
-0003ed70: 6563 7465 6420 6578 6365 7074 696f 6e20  ected exception 
-0003ed80: 7768 656e 2063 6865 636b 696e 6720 6966  when checking if
-0003ed90: 2061 2073 6f63 6b65 7420 6973 2063 6c6f   a socket is clo
-0003eda0: 7365 640a 2020 2020 2020 2020 7265 7475  sed.        retu
-0003edb0: 726e 2046 616c 7365 0a20 2020 2072 6574  rn False.    ret
-0003edc0: 7572 6e20 4661 6c73 650a 0a64 6566 2052  urn False..def R
-0003edd0: 656d 6f76 654e 6577 6c69 6e65 2873 7263  emoveNewline(src
-0003ede0: 2c6d 6f64 653d 2765 6467 6527 2c6e 6577  ,mode='edge',new
-0003edf0: 6c69 6e65 3d27 5c6e 272c 6279 7465 3d4e  line='\n',byte=N
-0003ee00: 6f6e 6529 3a0a 2020 2020 6966 2069 7369  one):.    if isi
-0003ee10: 6e73 7461 6e63 6528 6279 7465 2c62 6f6f  nstance(byte,boo
-0003ee20: 6c29 3a0a 2020 2020 2020 2020 6966 2062  l):.        if b
-0003ee30: 7974 653a 0a20 2020 2020 2020 2020 2020  yte:.           
-0003ee40: 2073 7263 3d42 7974 6573 2873 7263 290a   src=Bytes(src).
-0003ee50: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0003ee60: 2020 2020 2020 2020 2020 7372 633d 5374            src=St
-0003ee70: 7228 7372 6329 0a20 2020 2073 7263 5f61  r(src).    src_a
-0003ee80: 3d53 706c 6974 2873 7263 2c6e 6577 6c69  =Split(src,newli
-0003ee90: 6e65 2c64 6566 6175 6c74 3d46 616c 7365  ne,default=False
-0003eea0: 2c6c 6973 746f 6e6c 793d 4661 6c73 6529  ,listonly=False)
-0003eeb0: 0a20 2020 2069 6620 7372 635f 6120 6973  .    if src_a is
-0003eec0: 2046 616c 7365 3a0a 2020 2020 2020 2020   False:.        
-0003eed0: 7265 7475 726e 2073 7263 0a20 2020 2069  return src.    i
-0003eee0: 6620 6d6f 6465 2069 6e20 5b27 6564 6765  f mode in ['edge
-0003eef0: 272c 2762 6f74 6827 5d3a 0a20 2020 2020  ','both']:.     
-0003ef00: 2020 2069 6620 6e6f 7420 7372 635f 615b     if not src_a[
-0003ef10: 305d 2e73 7472 6970 2829 2061 6e64 206e  0].strip() and n
-0003ef20: 6f74 2073 7263 5f61 5b2d 315d 2e73 7472  ot src_a[-1].str
-0003ef30: 6970 2829 3a0a 2020 2020 2020 2020 2020  ip():.          
-0003ef40: 2020 7265 7475 726e 204a 6f69 6e28 7372    return Join(sr
-0003ef50: 635f 615b 313a 2d31 5d2c 7379 6d62 6f6c  c_a[1:-1],symbol
-0003ef60: 3d6e 6577 6c69 6e65 290a 2020 2020 2020  =newline).      
-0003ef70: 2020 656c 6966 206e 6f74 2073 7263 5f61    elif not src_a
-0003ef80: 5b30 5d2e 7374 7269 7028 293a 0a20 2020  [0].strip():.   
-0003ef90: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0003efa0: 4a6f 696e 2873 7263 5f61 5b31 3a5d 2c73  Join(src_a[1:],s
-0003efb0: 796d 626f 6c3d 6e65 776c 696e 6529 0a20  ymbol=newline). 
-0003efc0: 2020 2020 2020 2065 6c69 6620 6e6f 7420         elif not 
-0003efd0: 7372 635f 615b 2d31 5d2e 7374 7269 7028  src_a[-1].strip(
-0003efe0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-0003eff0: 6574 7572 6e20 4a6f 696e 2873 7263 5f61  eturn Join(src_a
-0003f000: 5b3a 2d31 5d2c 7379 6d62 6f6c 3d6e 6577  [:-1],symbol=new
-0003f010: 6c69 6e65 290a 2020 2020 656c 6966 206d  line).    elif m
-0003f020: 6f64 6520 696e 205b 2766 6972 7374 272c  ode in ['first',
-0003f030: 2773 7461 7274 272c 305d 3a0a 2020 2020  'start',0]:.    
-0003f040: 2020 2020 6966 206e 6f74 2073 7263 5f61      if not src_a
-0003f050: 5b30 5d2e 7374 7269 7028 293a 0a20 2020  [0].strip():.   
-0003f060: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0003f070: 4a6f 696e 2873 7263 5f61 5b31 3a5d 2c73  Join(src_a[1:],s
-0003f080: 796d 626f 6c3d 6e65 776c 696e 6529 0a20  ymbol=newline). 
-0003f090: 2020 2065 6c69 6620 6d6f 6465 2069 6e20     elif mode in 
-0003f0a0: 5b27 656e 6427 2c27 6c61 7374 272c 2d31  ['end','last',-1
-0003f0b0: 5d3a 0a20 2020 2020 2020 2069 6620 6e6f  ]:.        if no
-0003f0c0: 7420 7372 635f 615b 2d31 5d2e 7374 7269  t src_a[-1].stri
-0003f0d0: 7028 293a 0a20 2020 2020 2020 2020 2020  p():.           
-0003f0e0: 2072 6574 7572 6e20 4a6f 696e 2873 7263   return Join(src
-0003f0f0: 5f61 5b3a 2d31 5d2c 7379 6d62 6f6c 3d6e  _a[:-1],symbol=n
-0003f100: 6577 6c69 6e65 290a 2020 2020 656c 6966  ewline).    elif
-0003f110: 206d 6f64 6520 696e 205b 272a 272c 2761   mode in ['*','a
-0003f120: 6c6c 272c 2765 7665 7279 7468 696e 6727  ll','everything'
-0003f130: 5d3a 0a20 2020 2020 2020 2072 6574 7572  ]:.        retur
-0003f140: 6e20 4a6f 696e 2873 7263 5f61 2c73 796d  n Join(src_a,sym
-0003f150: 626f 6c3d 2727 290a 2020 2020 7265 7475  bol='').    retu
-0003f160: 726e 2073 7263 0a0a 6465 6620 6361 7428  rn src..def cat(
-0003f170: 6669 6c65 6e61 6d65 2c2a 2a6f 7074 7329  filename,**opts)
-0003f180: 3a0a 2020 2020 6279 7465 3d6f 7074 732e  :.    byte=opts.
-0003f190: 6765 7428 2762 7974 6527 2c46 616c 7365  get('byte',False
-0003f1a0: 290a 2020 2020 6e65 776c 696e 653d 6f70  ).    newline=op
-0003f1b0: 7473 2e67 6574 2827 6e65 776c 696e 6527  ts.get('newline'
-0003f1c0: 2c27 5c6e 2729 0a20 2020 2072 6561 645f  ,'\n').    read_
-0003f1d0: 6669 7273 746c 696e 653d 6f70 7473 2e67  firstline=opts.g
-0003f1e0: 6574 2827 7265 6164 5f66 6972 7374 6c69  et('read_firstli
-0003f1f0: 6e65 272c 6f70 7473 2e67 6574 2827 6865  ne',opts.get('he
-0003f200: 6164 272c 6f70 7473 2e67 6574 2827 6865  ad',opts.get('he
-0003f210: 6164 5f6c 696e 6527 2c46 616c 7365 2929  ad_line',False))
-0003f220: 290a 2020 2020 6465 6661 756c 743d 6f70  ).    default=op
-0003f230: 7473 2e67 6574 2827 6465 6661 756c 7427  ts.get('default'
-0003f240: 2c46 616c 7365 290a 2020 2020 6e6f 5f65  ,False).    no_e
-0003f250: 6467 653d 6f70 7473 2e67 6574 2827 6e6f  dge=opts.get('no
-0003f260: 5f65 6467 6527 2c46 616c 7365 290a 2020  _edge',False).  
-0003f270: 2020 6e6f 5f65 6e64 5f6e 6577 6c69 6e65    no_end_newline
-0003f280: 3d6f 7074 732e 6765 7428 276e 6f5f 656e  =opts.get('no_en
-0003f290: 645f 6e65 776c 696e 6527 2c46 616c 7365  d_newline',False
-0003f2a0: 290a 2020 2020 6669 6c65 5f6f 6e6c 793d  ).    file_only=
-0003f2b0: 6f70 7473 2e67 6574 2827 6669 6c65 5f6f  opts.get('file_o
-0003f2c0: 6e6c 7927 2c6f 7074 732e 6765 7428 2766  nly',opts.get('f
-0003f2d0: 696c 656f 6e6c 7927 2c54 7275 6529 290a  ileonly',True)).
-0003f2e0: 2020 2020 6e6f 5f61 6c6c 5f6e 6577 6c69      no_all_newli
-0003f2f0: 6e65 3d6f 7074 732e 6765 7428 276e 6f5f  ne=opts.get('no_
-0003f300: 616c 6c5f 6e65 776c 696e 6527 2c46 616c  all_newline',Fal
-0003f310: 7365 290a 2020 2020 6e6f 5f66 6972 7374  se).    no_first
-0003f320: 5f6e 6577 6c69 6e65 3d6f 7074 732e 6765  _newline=opts.ge
-0003f330: 7428 276e 6f5f 6669 7273 745f 6e65 776c  t('no_first_newl
-0003f340: 696e 6527 2c46 616c 7365 290a 2020 2020  ine',False).    
-0003f350: 6c6f 673d 6f70 7473 2e67 6574 2827 6c6f  log=opts.get('lo
-0003f360: 6727 290a 0a20 2020 2069 6620 4973 4e6f  g')..    if IsNo
-0003f370: 6e65 2866 696c 656e 616d 6529 3a0a 2020  ne(filename):.  
-0003f380: 2020 2020 2020 7072 696e 7466 2827 4669        printf('Fi
-0003f390: 6c65 6e61 6d65 2069 7320 4e6f 6e65 272c  lename is None',
-0003f3a0: 6c6f 673d 6c6f 672c 6d6f 6465 3d27 6427  log=log,mode='d'
-0003f3b0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0003f3c0: 2064 6566 6175 6c74 0a20 2020 2069 6620   default.    if 
-0003f3d0: 6f73 2e70 6174 682e 6973 6469 7228 6669  os.path.isdir(fi
-0003f3e0: 6c65 6e61 6d65 293a 0a20 2020 2020 2020  lename):.       
-0003f3f0: 2070 7269 6e74 6628 277b 7d20 6973 2061   printf('{} is a
-0003f400: 2064 6972 6563 746f 7279 272e 666f 726d   directory'.form
-0003f410: 6174 2866 696c 656e 616d 6529 2c6c 6f67  at(filename),log
-0003f420: 3d6c 6f67 2c6d 6f64 653d 2764 2729 0a20  =log,mode='d'). 
-0003f430: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
-0003f440: 6661 756c 740a 2020 2020 6966 206e 6f74  fault.    if not
-0003f450: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
-0003f460: 6669 6c65 6e61 6d65 293a 0a20 2020 2020  filename):.     
-0003f470: 2020 2070 7269 6e74 6628 277b 7d20 6e6f     printf('{} no
-0003f480: 7420 666f 756e 6427 2e66 6f72 6d61 7428  t found'.format(
-0003f490: 6669 6c65 6e61 6d65 292c 6c6f 673d 6c6f  filename),log=lo
-0003f4a0: 672c 6d6f 6465 3d27 6427 290a 2020 2020  g,mode='d').    
-0003f4b0: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
-0003f4c0: 6c74 0a20 2020 2074 7279 3a0a 2020 2020  lt.    try:.    
-0003f4d0: 2020 2020 6966 2072 6561 645f 6669 7273      if read_firs
-0003f4e0: 746c 696e 653a 2020 2320 5265 6164 6c69  tline:  # Readli
-0003f4f0: 6e65 0a20 2020 2020 2020 2020 2020 2077  ne.            w
-0003f500: 6974 6820 6f70 656e 2866 696c 656e 616d  ith open(filenam
-0003f510: 652c 2772 6227 2920 6173 2066 3a0a 2020  e,'rb') as f:.  
-0003f520: 2020 2020 2020 2020 2020 2020 2020 6461                da
-0003f530: 7461 3d66 2e72 6561 646c 696e 6528 290a  ta=f.readline().
-0003f540: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
-0003f550: 2066 696c 655f 6f6e 6c79 3a20 2320 5265   file_only: # Re
-0003f560: 6164 2073 7065 6369 616c 2066 696c 650a  ad special file.
-0003f570: 2020 2020 2020 2020 2020 2020 6461 7461              data
-0003f580: 3d6f 732e 6f70 656e 2866 696c 656e 616d  =os.open(filenam
-0003f590: 652c 6f73 2e4f 5f52 444f 4e4c 5929 0a20  e,os.O_RDONLY). 
-0003f5a0: 2020 2020 2020 2020 2020 206f 732e 636c             os.cl
-0003f5b0: 6f73 6528 6461 7461 290a 2020 2020 2020  ose(data).      
-0003f5c0: 2020 656c 7365 3a20 2320 5265 6164 206e    else: # Read n
-0003f5d0: 6f72 6d61 6c20 6669 6c65 0a20 2020 2020  ormal file.     
-0003f5e0: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
-0003f5f0: 2866 696c 656e 616d 652c 2772 6227 2920  (filename,'rb') 
-0003f600: 6173 2066 3a0a 2020 2020 2020 2020 2020  as f:.          
-0003f610: 2020 2020 2020 6461 7461 3d66 2e72 6561        data=f.rea
-0003f620: 6428 290a 2020 2020 2020 2020 6966 206e  d().        if n
-0003f630: 6f74 2062 7974 653a 0a20 2020 2020 2020  ot byte:.       
-0003f640: 2020 2020 6461 7461 3d53 7472 2864 6174      data=Str(dat
-0003f650: 6129 0a20 2020 2065 7863 6570 743a 0a20  a).    except:. 
-0003f660: 2020 2020 2020 2070 7269 6e74 6628 7379         printf(sy
-0003f670: 732e 6578 635f 696e 666f 2829 5b30 5d2c  s.exc_info()[0],
-0003f680: 6c6f 673d 6c6f 672c 6d6f 6465 3d27 6427  log=log,mode='d'
-0003f690: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0003f6a0: 2064 6566 6175 6c74 0a20 2020 2072 6574   default.    ret
-0003f6b0: 7572 6e20 5265 6d6f 7665 4e65 776c 696e  urn RemoveNewlin
-0003f6c0: 6528 6461 7461 2c6d 6f64 653d 2765 6467  e(data,mode='edg
-0003f6d0: 6527 2069 6620 6e6f 5f65 6467 6520 656c  e' if no_edge el
-0003f6e0: 7365 2027 656e 6427 2069 6620 6e6f 5f65  se 'end' if no_e
-0003f6f0: 6e64 5f6e 6577 6c69 6e65 2065 6c73 6520  nd_newline else 
-0003f700: 2766 6972 7374 2720 6966 206e 6f5f 6669  'first' if no_fi
-0003f710: 7273 745f 6e65 776c 696e 6520 656c 7365  rst_newline else
-0003f720: 2027 616c 6c27 2069 6620 6e6f 5f61 6c6c   'all' if no_all
-0003f730: 5f6e 6577 6c69 6e65 2065 6c73 6520 4e6f  _newline else No
-0003f740: 6e65 2c6e 6577 6c69 6e65 3d6e 6577 6c69  ne,newline=newli
-0003f750: 6e65 2c62 7974 653d 6279 7465 290a 0a64  ne,byte=byte)..d
-0003f760: 6566 2043 6f6d 7072 6573 7328 6461 7461  ef Compress(data
-0003f770: 2c6d 6f64 653d 2767 7a69 7027 293a 0a20  ,mode='gzip'):. 
-0003f780: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-0003f790: 6966 2069 7369 6e73 7461 6e63 6528 6461  if isinstance(da
-0003f7a0: 7461 2c73 7472 2920 616e 6420 6f73 2e70  ta,str) and os.p
-0003f7b0: 6174 682e 6973 6669 6c65 2864 6174 6129  ath.isfile(data)
-0003f7c0: 3a0a 2020 2020 2020 2020 2020 2020 7769  :.            wi
-0003f7d0: 7468 206f 7065 6e28 6461 7461 2c27 7262  th open(data,'rb
-0003f7e0: 2729 2061 7320 663a 0a20 2020 2020 2020  ') as f:.       
-0003f7f0: 2020 2020 2020 2020 2064 6174 613d 662e           data=f.
-0003f800: 7265 6164 2829 0a20 2020 2020 2020 2069  read().        i
-0003f810: 6620 6d6f 6465 203d 3d20 276c 7a34 273a  f mode == 'lz4':
-0003f820: 0a20 2020 2020 2020 2020 2020 2049 6d70  .            Imp
-0003f830: 6f72 7428 2766 726f 6d20 6c7a 3420 696d  ort('from lz4 im
-0003f840: 706f 7274 2066 7261 6d65 2729 0a20 2020  port frame').   
-0003f850: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0003f860: 6672 616d 652e 636f 6d70 7265 7373 2864  frame.compress(d
-0003f870: 6174 6129 0a20 2020 2020 2020 2065 6c69  ata).        eli
-0003f880: 6620 6d6f 6465 203d 3d20 2762 7a32 273a  f mode == 'bz2':
-0003f890: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0003f8a0: 7572 6e20 627a 322e 636f 6d70 7265 7373  urn bz2.compress
-0003f8b0: 2864 6174 6129 0a20 2020 2020 2020 2065  (data).        e
-0003f8c0: 6c69 6620 6d6f 6465 203d 3d20 2767 7a69  lif mode == 'gzi
-0003f8d0: 7027 3a0a 2020 2020 2020 2020 2020 2020  p':.            
-0003f8e0: 7265 7475 726e 2067 7a69 702e 636f 6d70  return gzip.comp
-0003f8f0: 7265 7373 2864 6174 612c 636f 6d70 7265  ress(data,compre
-0003f900: 7373 6c65 7665 6c3d 3929 2023 6465 636f  sslevel=9) #deco
-0003f910: 6d70 7265 7373 2864 6174 6129 0a20 2020  mpress(data).   
-0003f920: 2020 2020 2065 6c73 653a 2023 7a6c 6962       else: #zlib
-0003f930: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0003f940: 7572 6e20 7a6c 6962 2e63 6f6d 7072 6573  urn zlib.compres
-0003f950: 7328 6461 7461 2920 2320 6465 636f 6d70  s(data) # decomp
-0003f960: 7265 7373 2864 6174 6129 0a20 2020 2065  ress(data).    e
-0003f970: 7863 6570 743a 0a20 2020 2020 2020 2072  xcept:.        r
-0003f980: 6574 7572 6e20 4661 6c73 650a 0a64 6566  eturn False..def
-0003f990: 2044 6563 6f6d 7072 6573 7328 6461 7461   Decompress(data
-0003f9a0: 2c6d 6f64 653d 2767 7a69 7027 293a 0a20  ,mode='gzip'):. 
-0003f9b0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-0003f9c0: 6966 2069 7369 6e73 7461 6e63 6528 6461  if isinstance(da
-0003f9d0: 7461 2c73 7472 2920 616e 6420 6f73 2e70  ta,str) and os.p
-0003f9e0: 6174 682e 6973 6669 6c65 2864 6174 6129  ath.isfile(data)
-0003f9f0: 3a0a 2020 2020 2020 2020 2020 2020 7769  :.            wi
-0003fa00: 7468 206f 7065 6e28 6461 7461 2c27 7262  th open(data,'rb
-0003fa10: 2729 2061 7320 663a 0a20 2020 2020 2020  ') as f:.       
-0003fa20: 2020 2020 2020 2020 2064 6174 613d 662e           data=f.
-0003fa30: 7265 6164 2829 0a20 2020 2020 2020 2069  read().        i
-0003fa40: 6620 6d6f 6465 203d 3d20 276c 7a34 273a  f mode == 'lz4':
-0003fa50: 0a20 2020 2020 2020 2020 2020 2049 6d70  .            Imp
-0003fa60: 6f72 7428 2766 726f 6d20 6c7a 3420 696d  ort('from lz4 im
-0003fa70: 706f 7274 2066 7261 6d65 2729 0a20 2020  port frame').   
-0003fa80: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0003fa90: 6672 616d 652e 6465 636f 6d70 7265 7373  frame.decompress
-0003faa0: 2864 6174 6129 0a20 2020 2020 2020 2065  (data).        e
-0003fab0: 6c69 6620 6d6f 6465 203d 3d20 2762 7a32  lif mode == 'bz2
-0003fac0: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
-0003fad0: 6574 7572 6e20 627a 322e 425a 3244 6563  eturn bz2.BZ2Dec
-0003fae0: 6f6d 7072 6573 736f 7228 292e 6465 636f  ompressor().deco
-0003faf0: 6d70 7265 7373 2864 6174 6129 0a20 2020  mpress(data).   
-0003fb00: 2020 2020 2065 6c69 6620 6d6f 6465 203d       elif mode =
-0003fb10: 3d20 2767 7a69 7027 3a0a 2020 2020 2020  = 'gzip':.      
-0003fb20: 2020 2020 2020 7265 7475 726e 2067 7a69        return gzi
-0003fb30: 702e 6465 636f 6d70 7265 7373 2864 6174  p.decompress(dat
-0003fb40: 6129 0a20 2020 2020 2020 2065 6c73 653a  a).        else:
-0003fb50: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0003fb60: 7572 6e20 7a6c 6962 2e64 6563 6f6d 7072  urn zlib.decompr
-0003fb70: 6573 7328 6461 7461 290a 2020 2020 6578  ess(data).    ex
-0003fb80: 6365 7074 3a0a 2020 2020 2020 2020 7265  cept:.        re
-0003fb90: 7475 726e 2046 616c 7365 0a0a 6465 6620  turn False..def 
-0003fba0: 7369 7a65 6f66 286f 626a 293a 0a20 2020  sizeof(obj):.   
-0003fbb0: 206d 7369 7a65 203d 2030 0a20 2020 2069   msize = 0.    i
-0003fbc0: 6473 203d 2073 6574 2829 0a20 2020 206f  ds = set().    o
-0003fbd0: 626a 6563 7473 203d 205b 6f62 6a5d 0a20  bjects = [obj]. 
-0003fbe0: 2020 2077 6869 6c65 206f 626a 6563 7473     while objects
-0003fbf0: 3a0a 2020 2020 2020 2020 6e65 7720 3d20  :.        new = 
-0003fc00: 5b5d 0a20 2020 2020 2020 2066 6f72 2069  [].        for i
-0003fc10: 2069 6e20 6f62 6a65 6374 733a 0a20 2020   in objects:.   
-0003fc20: 2020 2020 2020 2020 2069 6620 6964 2869           if id(i
-0003fc30: 2920 6e6f 7420 696e 2069 6473 3a0a 2020  ) not in ids:.  
-0003fc40: 2020 2020 2020 2020 2020 2020 2020 6964                id
-0003fc50: 732e 6164 6428 6964 2869 2929 0a20 2020  s.add(id(i)).   
-0003fc60: 2020 2020 2020 2020 2020 2020 206d 7369               msi
-0003fc70: 7a65 202b 3d20 7379 732e 6765 7473 697a  ze += sys.getsiz
-0003fc80: 656f 6628 6929 0a20 2020 2020 2020 2020  eof(i).         
-0003fc90: 2020 2020 2020 206e 6577 2e61 7070 656e         new.appen
-0003fca0: 6428 6929 0a20 2020 2020 2020 206f 626a  d(i).        obj
-0003fcb0: 6563 7473 203d 2067 632e 6765 745f 7265  ects = gc.get_re
-0003fcc0: 6665 7265 6e74 7328 2a6e 6577 290a 2020  ferents(*new).  
-0003fcd0: 2020 7265 7475 726e 206d 7369 7a65 0a0a    return msize..
-0003fce0: 6465 6620 6875 6d61 6e5f 6279 7465 286e  def human_byte(n
-0003fcf0: 756d 2c20 756e 6974 3d22 4b22 2c20 7775  um, unit="K", wu
-0003fd00: 6e69 743d 4e6f 6e65 2c69 6e74 5f6f 7574  nit=None,int_out
-0003fd10: 3d46 616c 7365 293a 0a20 2020 2075 6e69  =False):.    uni
-0003fd20: 7473 203d 205b 2242 222c 224b 222c 224d  ts = ["B","K","M
-0003fd30: 222c 2247 222c 2254 222c 2250 225d 0a20  ","G","T","P"]. 
-0003fd40: 2020 2069 6620 7775 6e69 7420 6973 204e     if wunit is N
-0003fd50: 6f6e 653a 0a20 2020 2020 2020 2075 6e69  one:.        uni
-0003fd60: 743d 756e 6974 2e75 7070 6572 2829 0a20  t=unit.upper(). 
-0003fd70: 2020 2020 2020 2069 6620 6e75 6d20 3e3d         if num >=
-0003fd80: 2031 3030 303a 0a20 2020 2020 2020 2020   1000:.         
-0003fd90: 2020 2077 6869 6c65 206e 756d 203e 3d20     while num >= 
-0003fda0: 3130 3030 3a0a 2020 2020 2020 2020 2020  1000:.          
-0003fdb0: 2020 2020 2073 7569 3d75 6e69 7473 2e69       sui=units.i
-0003fdc0: 6e64 6578 2875 6e69 7429 0a20 2020 2020  ndex(unit).     
-0003fdd0: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-0003fde0: 2875 6e69 7473 2920 3c3d 2073 7569 2b31  (units) <= sui+1
-0003fdf0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003fe00: 2020 2020 2062 7265 616b 0a20 2020 2020       break.     
-0003fe10: 2020 2020 2020 2020 2020 6e75 6d20 2f3d            num /=
-0003fe20: 2031 3032 342e 300a 2020 2020 2020 2020   1024.0.        
-0003fe30: 2020 2020 2020 2075 6e69 7420 3d20 756e         unit = un
-0003fe40: 6974 735b 7375 692b 315d 0a20 2020 2020  its[sui+1].     
-0003fe50: 2020 2065 6c69 6620 6e75 6d20 3c20 313a     elif num < 1:
-0003fe60: 0a20 2020 2020 2020 2020 2020 2077 6869  .            whi
-0003fe70: 6c65 206e 756d 203c 2031 3a20 2330 2e58  le num < 1: #0.X
-0003fe80: 5858 2064 6967 6974 730a 2020 2020 2020  XX digits.      
-0003fe90: 2020 2020 2020 2020 2073 7569 3d75 6e69           sui=uni
-0003fea0: 7473 2e69 6e64 6578 2875 6e69 7429 0a20  ts.index(unit). 
-0003feb0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0003fec0: 2073 7569 2d31 203c 2030 3a0a 2020 2020   sui-1 < 0:.    
-0003fed0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-0003fee0: 7265 616b 0a20 2020 2020 2020 2020 2020  reak.           
-0003fef0: 2020 2020 6e75 6d20 2a3d 2031 3032 342e      num *= 1024.
-0003ff00: 300a 2020 2020 2020 2020 2020 2020 2020  0.              
-0003ff10: 2075 6e69 7420 3d20 756e 6974 735b 7375   unit = units[su
-0003ff20: 692d 315d 0a20 2020 2065 6c73 653a 0a20  i-1].    else:. 
-0003ff30: 2020 2020 2020 2077 756e 6974 3d77 756e         wunit=wun
-0003ff40: 6974 2e75 7070 6572 2829 0a20 2020 2020  it.upper().     
-0003ff50: 2020 2065 7569 3d75 6e69 7473 2e69 6e64     eui=units.ind
-0003ff60: 6578 2877 756e 6974 290a 2020 2020 2020  ex(wunit).      
-0003ff70: 2020 6966 2073 7569 203c 2065 7569 3a0a    if sui < eui:.
-0003ff80: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0003ff90: 6920 696e 2072 616e 6765 2873 7569 2c65  i in range(sui,e
-0003ffa0: 7569 293a 0a20 2020 2020 2020 2020 2020  ui):.           
-0003ffb0: 2020 2020 206e 756d 202f 3d20 3130 3234       num /= 1024
-0003ffc0: 2e30 0a20 2020 2020 2020 2065 6c69 6620  .0.        elif 
-0003ffd0: 7375 6920 3e20 6575 693a 0a20 2020 2020  sui > eui:.     
-0003ffe0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-0003fff0: 7261 6e67 6528 7375 692c 6575 692c 2d31  range(sui,eui,-1
-00040000: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00040010: 2020 206e 756d 202a 3d20 3130 3234 2e30     num *= 1024.0
-00040020: 0a20 2020 2020 2020 2075 6e69 743d 7775  .        unit=wu
-00040030: 6e69 740a 2020 2020 6966 2069 6e74 5f6f  nit.    if int_o
-00040040: 7574 3a0a 2020 2020 2020 2020 7265 7475  ut:.        retu
-00040050: 726e 2066 6c6f 6174 2822 252e 3166 2225  rn float("%.1f"%
-00040060: 286e 756d 2929 0a20 2020 2065 6c73 653a  (num)).    else:
-00040070: 0a20 2020 2020 2020 2069 6620 756e 6974  .        if unit
-00040080: 203d 3d20 2242 223a 0a20 2020 2020 2020   == "B":.       
-00040090: 2020 2020 2072 6574 7572 6e20 2225 2e31       return "%.1
-000400a0: 6620 2573 2220 2520 286e 756d 2c75 6e69  f %s" % (num,uni
-000400b0: 7429 0a20 2020 2020 2020 2065 6c73 653a  t).        else:
-000400c0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000400d0: 7572 6e20 2225 2e31 6620 2573 4222 2025  urn "%.1f %sB" %
-000400e0: 2028 6e75 6d2c 756e 6974 290a 0a64 6566   (num,unit)..def
-000400f0: 2048 756d 616e 5f55 6e69 7428 6e75 6d2c   Human_Unit(num,
-00040100: 756e 6974 3d27 5327 2c77 616e 745f 756e  unit='S',want_un
-00040110: 6974 3d4e 6f6e 652c 696e 745f 6f75 743d  it=None,int_out=
-00040120: 4661 6c73 6529 3a0a 2020 2020 6465 6620  False):.    def 
-00040130: 636f 6e76 6572 745f 7365 635f 746f 5f66  convert_sec_to_f
-00040140: 6f72 6d61 7428 6e75 6d2c 7761 6e74 5f66  ormat(num,want_f
-00040150: 6f72 6d61 743d 2225 5920 256d 2025 6420  ormat="%Y %m %d 
-00040160: 2548 3a25 4d3a 2553 2229 3a0a 2020 2020  %H:%M:%S"):.    
-00040170: 2020 2020 7265 7475 726e 2064 6174 6574      return datet
-00040180: 696d 652e 6461 7465 7469 6d65 2e66 726f  ime.datetime.fro
-00040190: 6d74 696d 6573 7461 6d70 286e 756d 292e  mtimestamp(num).
-000401a0: 7374 7266 7469 6d65 2877 616e 745f 666f  strftime(want_fo
-000401b0: 726d 6174 290a 2020 2020 6465 6620 636f  rmat).    def co
-000401c0: 6e76 6572 745f 696e 745f 7469 6d65 5f74  nvert_int_time_t
-000401d0: 6f5f 7968 6d73 286e 756d 2c75 6e69 743d  o_yhms(num,unit=
-000401e0: 2753 272c 7761 6e74 3d4e 6f6e 6529 3a0a  'S',want=None):.
-000401f0: 2020 2020 2020 2020 633d 5b33 3135 3336          c=[31536
-00040200: 3030 302c 3836 3430 302c 3336 3030 2c36  000,86400,3600,6
-00040210: 302c 315d 2023 2079 792c 6464 2c68 682c  0,1] # yy,dd,hh,
-00040220: 6d6d 2c73 730a 2020 2020 2020 2020 6375  mm,ss.        cu
-00040230: 3d5b 2759 272c 2744 272c 2748 272c 274d  =['Y','D','H','M
-00040240: 272c 2753 275d 2020 2020 2023 2079 792c  ','S']     # yy,
-00040250: 6464 2c68 682c 6d6d 2c73 730a 2020 2020  dd,hh,mm,ss.    
-00040260: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00040270: 6528 7761 6e74 2c73 7472 2920 616e 6420  e(want,str) and 
-00040280: 7761 6e74 2061 6e64 2077 616e 7420 696e  want and want in
-00040290: 2063 753a 0a20 2020 2020 2020 2020 2020   cu:.           
-000402a0: 2073 7461 7274 5f69 3d63 752e 696e 6465   start_i=cu.inde
-000402b0: 7828 7761 6e74 290a 2020 2020 2020 2020  x(want).        
-000402c0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-000402d0: 2020 7374 6172 745f 693d 300a 2020 2020    start_i=0.    
-000402e0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-000402f0: 6528 756e 6974 2c73 7472 2920 616e 6420  e(unit,str) and 
-00040300: 756e 6974 2061 6e64 2075 6e69 7420 696e  unit and unit in
-00040310: 2063 753a 0a20 2020 2020 2020 2020 2020   cu:.           
-00040320: 206d 783d 6375 2e69 6e64 6578 2875 6e69   mx=cu.index(uni
-00040330: 7429 0a20 2020 2020 2020 2065 6c73 653a  t).        else:
-00040340: 0a20 2020 2020 2020 2020 2020 206d 783d  .            mx=
-00040350: 6c65 6e28 6329 2d31 0a20 2020 2020 2020  len(c)-1.       
-00040360: 2069 6620 6d78 203d 3d20 6c65 6e28 6329   if mx == len(c)
-00040370: 2d31 3a20 2320 7365 6320 2d3e 2077 616e  -1: # sec -> wan
-00040380: 740a 2020 2020 2020 2020 2020 2020 6f3d  t.            o=
-00040390: 7b7d 0a20 2020 2020 2020 2020 2020 2066  {}.            f
-000403a0: 6f72 2069 2069 6e20 7261 6e67 6528 7374  or i in range(st
-000403b0: 6172 745f 692c 6d78 2b31 293a 0a20 2020  art_i,mx+1):.   
-000403c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000403d0: 286d 7820 3d3d 2069 2061 6e64 206e 756d  (mx == i and num
-000403e0: 203e 3d20 635b 695d 2920 6f72 206e 756d   >= c[i]) or num
-000403f0: 203e 2063 5b69 5d3a 0a20 2020 2020 2020   > c[i]:.       
-00040400: 2020 2020 2020 2020 2020 2020 206f 5b63               o[c
-00040410: 755b 695d 5d3d 6e75 6d2f 2f63 5b69 5d0a  u[i]]=num//c[i].
-00040420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040430: 2020 2020 6e75 6d3d 6e75 6d25 2863 5b69      num=num%(c[i
-00040440: 5d2a 6f5b 6375 5b69 5d5d 290a 2020 2020  ]*o[cu[i]]).    
-00040450: 2020 2020 2020 2020 7265 7475 726e 206f          return o
-00040460: 0a20 2020 2020 2020 2065 6c73 653a 2020  .        else:  
-00040470: 2320 756e 6974 202d 3e20 7365 6320 616e  # unit -> sec an
-00040480: 6420 6361 6c63 756c 6174 6520 7365 6320  d calculate sec 
-00040490: 746f 2077 616e 740a 2020 2020 2020 2020  to want.        
-000404a0: 2020 2020 6e75 6d20 3d20 6e75 6d20 2a20      num = num * 
-000404b0: 635b 6d78 5d20 2320 636f 6e76 6572 7420  c[mx] # convert 
-000404c0: 746f 2075 6e69 7420 746f 2073 6563 6f6e  to unit to secon
-000404d0: 6473 0a20 2020 2020 2020 2020 2020 2072  ds.            r
-000404e0: 6574 7572 6e20 636f 6e76 6572 745f 696e  eturn convert_in
-000404f0: 745f 7469 6d65 5f74 6f5f 7968 6d73 286e  t_time_to_yhms(n
-00040500: 756d 2c75 6e69 743d 2753 272c 7761 6e74  um,unit='S',want
-00040510: 3d77 616e 7429 0a20 2020 2069 6620 6973  =want).    if is
-00040520: 696e 7374 616e 6365 2875 6e69 742c 7374  instance(unit,st
-00040530: 7229 2061 6e64 2075 6e69 7420 616e 6420  r) and unit and 
-00040540: 2877 616e 745f 756e 6974 2069 7320 4e6f  (want_unit is No
-00040550: 6e65 206f 7220 6973 696e 7374 616e 6365  ne or isinstance
-00040560: 2877 616e 745f 756e 6974 2c73 7472 2929  (want_unit,str))
-00040570: 3a0a 2020 2020 2020 2020 6966 2075 6e69  :.        if uni
-00040580: 742e 7570 7065 7228 2920 696e 205b 274d  t.upper() in ['M
-00040590: 4d27 2c27 4d49 4e27 2c27 5927 2c27 5959  M','MIN','Y','YY
-000405a0: 272c 2759 4541 5227 2c27 4848 272c 2748  ','YEAR','HH','H
-000405b0: 272c 2748 4f55 5227 2c27 5327 2c27 5345  ','HOUR','S','SE
-000405c0: 4327 2c27 5353 275d 3a0a 2020 2020 2020  C','SS']:.      
-000405d0: 2020 2020 2020 6d6f 6465 3d27 7469 6d65        mode='time
-000405e0: 270a 2020 2020 2020 2020 2020 2020 6966  '.            if
-000405f0: 2069 7369 6e73 7461 6e63 6528 7761 6e74   isinstance(want
-00040600: 5f75 6e69 742c 7374 7229 3a0a 2020 2020  _unit,str):.    
-00040610: 2020 2020 2020 2020 2020 2020 7570 5f77              up_w
-00040620: 616e 745f 756e 6974 3d77 616e 745f 756e  ant_unit=want_un
-00040630: 6974 2e75 7070 6572 2829 0a20 2020 2020  it.upper().     
-00040640: 2020 2020 2020 2020 2020 2069 6620 7570             if up
-00040650: 5f77 616e 745f 756e 6974 2069 6e20 5b27  _want_unit in ['
-00040660: 484f 5552 272c 2748 4827 2c27 484f 5552  HOUR','HH','HOUR
-00040670: 5327 2c27 4827 5d3a 2077 616e 745f 756e  S','H']: want_un
-00040680: 6974 3d27 4827 0a20 2020 2020 2020 2020  it='H'.         
-00040690: 2020 2020 2020 2065 6c69 6620 7570 5f77         elif up_w
-000406a0: 616e 745f 756e 6974 2069 6e20 5b27 4d49  ant_unit in ['MI
-000406b0: 4e27 2c27 4d4d 272c 274d 494e 5554 4527  N','MM','MINUTE'
-000406c0: 2c27 4d49 4e55 5445 5327 2c27 4d27 5d3a  ,'MINUTES','M']:
-000406d0: 2077 616e 745f 756e 6974 3d27 4d27 0a20   want_unit='M'. 
-000406e0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000406f0: 6c69 6620 7570 5f77 616e 745f 756e 6974  lif up_want_unit
-00040700: 2069 6e20 5b27 4441 5927 2c27 4444 272c   in ['DAY','DD',
-00040710: 2744 4159 5327 2c27 4427 5d3a 2077 616e  'DAYS','D']: wan
-00040720: 745f 756e 6974 3d27 4427 0a20 2020 2020  t_unit='D'.     
-00040730: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00040740: 7570 5f77 616e 745f 756e 6974 2069 6e20  up_want_unit in 
-00040750: 5b27 5945 4152 272c 2759 5927 2c27 5945  ['YEAR','YY','YE
-00040760: 4152 5327 2c27 5927 5d3a 2077 616e 745f  ARS','Y']: want_
-00040770: 756e 6974 3d27 5927 0a20 2020 2020 2020  unit='Y'.       
-00040780: 2020 2020 2020 2020 2065 6c69 6620 7570           elif up
-00040790: 5f77 616e 745f 756e 6974 2069 6e20 5b27  _want_unit in ['
-000407a0: 5345 4327 2c27 5353 272c 2753 4543 4f4e  SEC','SS','SECON
-000407b0: 4427 2c27 5345 434f 4e44 5327 2c27 5327  D','SECONDS','S'
-000407c0: 5d3a 2077 616e 745f 756e 6974 3d27 5327  ]: want_unit='S'
-000407d0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-000407e0: 2020 2020 2020 2020 2020 206d 6f64 653d             mode=
-000407f0: 2762 7974 6527 0a20 2020 2020 2020 206e  'byte'.        n
-00040800: 756d 5f75 6e69 743d 756e 6974 5b30 5d2e  um_unit=unit[0].
-00040810: 7570 7065 7228 290a 2020 2020 2020 2020  upper().        
-00040820: 2354 494d 450a 2020 2020 2020 2020 6966  #TIME.        if
-00040830: 206e 756d 5f75 6e69 7420 3d3d 2027 5327   num_unit == 'S'
-00040840: 2061 6e64 2028 6973 696e 7374 616e 6365   and (isinstance
-00040850: 2877 616e 745f 756e 6974 2c73 7472 2920  (want_unit,str) 
-00040860: 616e 6420 7761 6e74 5f75 6e69 7420 616e  and want_unit an
-00040870: 6420 7761 6e74 5f75 6e69 745b 305d 203d  d want_unit[0] =
-00040880: 3d20 2725 2729 3a0a 2020 2020 2020 2020  = '%'):.        
-00040890: 2020 2020 6966 206c 656e 2877 616e 745f      if len(want_
-000408a0: 756e 6974 2920 3d3d 2031 3a0a 2020 2020  unit) == 1:.    
-000408b0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000408c0: 726e 2063 6f6e 7665 7274 5f73 6563 5f74  rn convert_sec_t
-000408d0: 6f5f 666f 726d 6174 286e 756d 2c77 616e  o_format(num,wan
-000408e0: 745f 666f 726d 6174 3d22 2559 2025 6d20  t_format="%Y %m 
-000408f0: 2564 2025 483a 254d 3a25 5322 290a 2020  %d %H:%M:%S").  
-00040900: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00040910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040920: 7265 7475 726e 2063 6f6e 7665 7274 5f73  return convert_s
-00040930: 6563 5f74 6f5f 666f 726d 6174 286e 756d  ec_to_format(num
-00040940: 2c77 616e 745f 666f 726d 6174 3d77 616e  ,want_format=wan
-00040950: 745f 756e 6974 290a 2020 2020 2020 2020  t_unit).        
-00040960: 2354 494d 450a 2020 2020 2020 2020 656c  #TIME.        el
-00040970: 6966 2028 6d6f 6465 203d 3d20 2774 696d  if (mode == 'tim
-00040980: 6527 2061 6e64 2077 616e 745f 756e 6974  e' and want_unit
-00040990: 2069 6e20 5b27 5927 2c27 4427 2c27 4827   in ['Y','D','H'
-000409a0: 2c27 4d27 2c27 5327 2c4e 6f6e 655d 2920  ,'M','S',None]) 
-000409b0: 6f72 2028 6e75 6d5f 756e 6974 2069 6e20  or (num_unit in 
-000409c0: 5b27 5927 2c27 4427 2c27 4827 2c27 4d27  ['Y','D','H','M'
-000409d0: 2c27 5327 5d20 616e 6420 7761 6e74 5f75  ,'S'] and want_u
-000409e0: 6e69 7420 696e 205b 2759 272c 2744 272c  nit in ['Y','D',
-000409f0: 2748 272c 274d 272c 2753 275d 293a 0a20  'H','M','S']):. 
-00040a00: 2020 2020 2020 2020 2020 206f 6f3d 636f             oo=co
-00040a10: 6e76 6572 745f 696e 745f 7469 6d65 5f74  nvert_int_time_t
-00040a20: 6f5f 7968 6d73 286e 756d 2c75 6e69 743d  o_yhms(num,unit=
-00040a30: 6e75 6d5f 756e 6974 2c77 616e 743d 7761  num_unit,want=wa
-00040a40: 6e74 5f75 6e69 7429 0a20 2020 2020 2020  nt_unit).       
-00040a50: 2020 2020 2069 6620 696e 745f 6f75 743a       if int_out:
-00040a60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00040a70: 2069 6620 7761 6e74 5f75 6e69 743a 2320   if want_unit:# 
-00040a80: 616e 6420 7761 6e74 5f75 6e69 7420 696e  and want_unit in
-00040a90: 206f 6f3a 0a20 2020 2020 2020 2020 2020   oo:.           
-00040aa0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00040ab0: 6f6f 2e67 6574 2877 616e 745f 756e 6974  oo.get(want_unit
-00040ac0: 2c30 290a 2020 2020 2020 2020 2020 2020  ,0).            
-00040ad0: 2020 2020 656c 7365 3a20 2320 6966 2077      else: # if w
-00040ae0: 616e 7420 756e 6974 2069 7320 4e6f 6e65  ant unit is None
-00040af0: 2074 6865 6e20 7265 7475 726e 206e 756d   then return num
-00040b00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00040b10: 2020 2020 2072 6574 7572 6e20 6e75 6d0a       return num.
-00040b20: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00040b30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00040b40: 2020 6f3d 2727 0a20 2020 2020 2020 2020    o=''.         
-00040b50: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00040b60: 5b27 5927 2c27 4427 2c27 4827 2c27 4d27  ['Y','D','H','M'
-00040b70: 2c27 5327 5d3a 0a20 2020 2020 2020 2020  ,'S']:.         
-00040b80: 2020 2020 2020 2020 2020 2069 6620 6920             if i 
-00040b90: 696e 206f 6f3a 0a20 2020 2020 2020 2020  in oo:.         
-00040ba0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00040bb0: 6620 6f3a 206f 3d6f 2b27 207b 7d7b 7d27  f o: o=o+' {}{}'
-00040bc0: 2e66 6f72 6d61 7428 6f6f 5b69 5d2c 6929  .format(oo[i],i)
-00040bd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00040be0: 2020 2020 2020 2020 2065 6c73 653a 206f           else: o
-00040bf0: 3d27 7b7d 7b7d 272e 666f 726d 6174 286f  ='{}{}'.format(o
-00040c00: 6f5b 695d 2c69 290a 2020 2020 2020 2020  o[i],i).        
-00040c10: 2020 2020 2020 2020 7265 7475 726e 206f          return o
-00040c20: 0a20 2020 2020 2020 2023 4279 7465 0a20  .        #Byte. 
-00040c30: 2020 2020 2020 2065 6c69 6620 6e75 6d5f         elif num_
-00040c40: 756e 6974 2069 6e20 5b22 4222 2c22 4b22  unit in ["B","K"
-00040c50: 2c22 4d22 2c22 4722 2c22 5422 2c22 5022  ,"M","G","T","P"
-00040c60: 5d20 616e 6420 7761 6e74 5f75 6e69 7420  ] and want_unit 
-00040c70: 696e 205b 2242 222c 224b 222c 224d 222c  in ["B","K","M",
-00040c80: 2247 222c 2254 222c 2250 222c 4e6f 6e65  "G","T","P",None
-00040c90: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
-00040ca0: 6574 7572 6e20 6875 6d61 6e5f 6279 7465  eturn human_byte
-00040cb0: 286e 756d 2c20 756e 6974 3d6e 756d 5f75  (num, unit=num_u
-00040cc0: 6e69 742c 2077 756e 6974 3d77 616e 745f  nit, wunit=want_
-00040cd0: 756e 6974 2c20 696e 745f 6f75 743d 696e  unit, int_out=in
-00040ce0: 745f 6f75 7429 0a20 2020 2072 6574 7572  t_out).    retur
-00040cf0: 6e20 2755 6e6b 6e6f 776e 2055 6e69 7428  n 'Unknown Unit(
-00040d00: 7b7d 202d 3e20 7b7d 2927 2e66 6f72 6d61  {} -> {})'.forma
-00040d10: 7428 756e 6974 2c77 616e 745f 756e 6974  t(unit,want_unit
-00040d20: 290a 0a63 6c61 7373 2046 494c 455f 573a  )..class FILE_W:
-00040d30: 0a20 2020 2027 2727 0a20 2020 204e 6577  .    '''.    New
-00040d40: 2064 6573 6967 6e20 746f 2073 696d 706c   design to simpl
-00040d50: 650a 2020 2020 7375 625f 6469 7220 203a  e.    sub_dir  :
-00040d60: 2054 7275 6520 2847 6574 2066 696c 6573   True (Get files
-00040d70: 2069 6e20 7265 6375 7269 6e67 2064 6972   in recuring dir
-00040d80: 6563 746f 7279 290a 2020 2020 6461 7461  ectory).    data
-00040d90: 2020 2020 203a 2054 7275 6520 2847 6574       : True (Get
-00040da0: 2046 696c 6520 4461 7461 290a 2020 2020   File Data).    
-00040db0: 6d64 3573 756d 2020 203a 2054 7275 6520  md5sum   : True 
-00040dc0: 2847 6574 2046 696c 6527 7320 4d44 3520  (Get File's MD5 
-00040dd0: 5355 4d29 0a20 2020 206c 696e 6b32 6669  SUM).    link2fi
-00040de0: 6c65 3a20 5472 7565 2028 4d61 6b65 2061  le: True (Make a
-00040df0: 2072 6561 6c20 6669 6c65 2069 6e73 7465   real file inste
-00040e00: 6164 2073 796d 2d6c 696e 6b20 6669 6c65  ad sym-link file
-00040e10: 290a 2020 2020 6669 6c65 2066 6f72 6d61  ).    file forma
-00040e20: 7420 3a20 7369 7a65 2028 3133 292b 6865  t : size (13)+he
-00040e30: 6164 287b 7d29 2b64 6174 6128 5b2c 2c2c  ad({})+data([,,,
-00040e40: 2c2c 5d29 0a20 2020 2068 6561 643a 207b  ,,]).    head: {
-00040e50: 696e 666f 7b7d 2c64 6174 615f 6964 3a78  info{},data_id:x
-00040e60: 7d0a 2020 2020 2727 270a 2020 2020 6465  }.    '''.    de
-00040e70: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
-00040e80: 2a69 6e70 2c2a 2a6f 7074 7329 3a0a 2020  *inp,**opts):.  
-00040e90: 2020 2020 2020 7365 6c66 2e72 6f6f 745f        self.root_
-00040ea0: 7061 7468 3d6f 7074 732e 6765 7428 2772  path=opts.get('r
-00040eb0: 6f6f 745f 7061 7468 272c 4e6f 6e65 290a  oot_path',None).
-00040ec0: 2020 2020 2020 2020 6966 2049 734e 6f6e          if IsNon
-00040ed0: 6528 7365 6c66 2e72 6f6f 745f 7061 7468  e(self.root_path
-00040ee0: 293a 2073 656c 662e 726f 6f74 5f70 6174  ): self.root_pat
-00040ef0: 683d 5061 7468 2829 0a20 2020 2020 2020  h=Path().       
-00040f00: 2073 656c 662e 696e 666f 3d6f 7074 732e   self.info=opts.
-00040f10: 6765 7428 2769 6e66 6f27 2c6f 7074 732e  get('info',opts.
-00040f20: 6765 7428 2764 6174 6127 2c7b 7d29 290a  get('data',{})).
-00040f30: 0a20 2020 2064 6566 204c 6973 7428 7365  .    def List(se
-00040f40: 6c66 2c6e 616d 652c 7375 625f 6469 723d  lf,name,sub_dir=
-00040f50: 4661 6c73 652c 6469 726e 616d 653d 4661  False,dirname=Fa
-00040f60: 6c73 652c 6465 6661 756c 743d 5b5d 293a  lse,default=[]):
-00040f70: 0a20 2020 2020 2020 2023 6765 7420 6469  .        #get di
-00040f80: 7265 6374 6f72 7920 616e 6420 6561 6368  rectory and each
-00040f90: 2064 6972 6563 746f 7269 6573 2720 6669   directories' fi
-00040fa0: 6c65 206c 6973 740a 2020 2020 2020 2020  le list.        
-00040fb0: 6966 2069 7369 6e73 7461 6e63 6528 6e61  if isinstance(na
-00040fc0: 6d65 2c73 7472 293a 0a20 2020 2020 2020  me,str):.       
-00040fd0: 2020 2020 2069 6620 6e61 6d65 5b30 5d20       if name[0] 
-00040fe0: 3d3d 2027 2f27 3a20 2023 2053 7461 7274  == '/':  # Start
-00040ff0: 2066 726f 6d20 726f 6f74 2070 6174 680a   from root path.
-00041000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041010: 6966 206f 732e 7061 7468 2e69 7366 696c  if os.path.isfil
-00041020: 6528 6e61 6d65 2920 6f72 206f 732e 7061  e(name) or os.pa
-00041030: 7468 2e69 736c 696e 6b28 6e61 6d65 293a  th.islink(name):
-00041040: 2072 6574 7572 6e20 6f73 2e70 6174 682e   return os.path.
-00041050: 6469 726e 616d 6528 6e61 6d65 292c 5b6f  dirname(name),[o
-00041060: 732e 7061 7468 2e62 6173 656e 616d 6528  s.path.basename(
-00041070: 6e61 6d65 295d 0a20 2020 2020 2020 2020  name)].         
-00041080: 2020 2020 2020 2069 6620 6f73 2e70 6174         if os.pat
-00041090: 682e 6973 6469 7228 6e61 6d65 293a 0a20  h.isdir(name):. 
-000410a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000410b0: 2020 2069 6620 7375 625f 6469 723a 0a20     if sub_dir:. 
-000410c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000410d0: 2020 2020 2020 2072 7420 3d20 5b5d 0a20         rt = []. 
-000410e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000410f0: 2020 2020 2020 2070 7764 3d6f 732e 6765         pwd=os.ge
-00041100: 7463 7764 2829 0a20 2020 2020 2020 2020  tcwd().         
-00041110: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-00041120: 732e 6368 6469 7228 6e61 6d65 290a 2020  s.chdir(name).  
-00041130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041140: 2020 2020 2020 666f 7220 6261 7365 2c20        for base, 
-00041150: 6469 7273 2c20 6669 6c65 7320 696e 206f  dirs, files in o
-00041160: 732e 7761 6c6b 2827 2e27 293a 0a20 2020  s.walk('.'):.   
-00041170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041180: 2020 2020 2020 2020 2069 6620 6469 726e           if dirn
-00041190: 616d 653a 2072 742e 6578 7465 6e64 286f  ame: rt.extend(o
-000411a0: 732e 7061 7468 2e6a 6f69 6e28 6261 7365  s.path.join(base
-000411b0: 5b32 3a5d 2c20 6429 2066 6f72 2064 2069  [2:], d) for d i
-000411c0: 6e20 6469 7273 290a 2020 2020 2020 2020  n dirs).        
+0003d9d0: 2020 2020 2020 2020 2020 733d 4a6f 696e            s=Join
+0003d9e0: 284a 6f69 6e28 735b 3a61 745d 2c27 7b7d  (Join(s[:at],'{}
+0003d9f0: 272e 666f 726d 6174 2853 7472 2869 2929  '.format(Str(i))
+0003da00: 2c73 796d 626f 6c3d 7379 6d62 6f6c 292c  ,symbol=symbol),
+0003da10: 735b 6174 3a5d 2c73 796d 626f 6c3d 7379  s[at:],symbol=sy
+0003da20: 6d62 6f6c 290a 2020 2020 2020 2020 2020  mbol).          
+0003da30: 2020 656c 6966 2073 6e20 3d3d 2027 6c69    elif sn == 'li
+0003da40: 7374 273a 0a20 2020 2020 2020 2020 2020  st':.           
+0003da50: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0003da60: 6365 2869 2c73 7472 2920 616e 6420 7379  ce(i,str) and sy
+0003da70: 6d62 6f6c 3a0a 2020 2020 2020 2020 2020  mbol:.          
+0003da80: 2020 2020 2020 2020 2020 693d 692e 7370            i=i.sp
+0003da90: 6c69 7428 7379 6d62 6f6c 290a 2020 2020  lit(symbol).    
+0003daa0: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+0003dab0: 7420 3d3d 202d 3120 6f72 2061 7420 3d3d  t == -1 or at ==
+0003dac0: 206c 656e 2873 292d 313a 0a20 2020 2020   len(s)-1:.     
+0003dad0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0003dae0: 6620 6973 696e 7374 616e 6365 2869 2c6c  f isinstance(i,l
+0003daf0: 6973 7429 3a0a 2020 2020 2020 2020 2020  ist):.          
+0003db00: 2020 2020 2020 2020 2020 2020 2020 733d                s=
+0003db10: 732b 690a 2020 2020 2020 2020 2020 2020  s+i.            
+0003db20: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0003db30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003db40: 2020 2020 2020 732e 6170 7065 6e64 2869        s.append(i
+0003db50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0003db60: 2020 656c 6966 2061 7420 3d3d 2030 206f    elif at == 0 o
+0003db70: 7220 6c65 6e28 7329 2b61 7420 3d3d 2030  r len(s)+at == 0
+0003db80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003db90: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0003dba0: 6e63 6528 692c 6c69 7374 293a 0a20 2020  nce(i,list):.   
+0003dbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003dbc0: 2020 2020 2073 3d69 2b73 0a20 2020 2020       s=i+s.     
+0003dbd0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0003dbe0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0003dbf0: 2020 2020 2020 2020 2020 2020 2073 3d5b               s=[
+0003dc00: 695d 2b73 0a20 2020 2020 2020 2020 2020  i]+s.           
+0003dc10: 2020 2020 2065 6c69 6620 6174 203e 3020       elif at >0 
+0003dc20: 616e 6420 6174 203c 206c 656e 2873 293a  and at < len(s):
+0003dc30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003dc40: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0003dc50: 6365 2869 2c6c 6973 7429 3a0a 2020 2020  ce(i,list):.    
+0003dc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003dc70: 2020 2020 733d 735b 3a61 745d 2b69 2b73      s=s[:at]+i+s
+0003dc80: 5b61 743a 5d0a 2020 2020 2020 2020 2020  [at:].          
+0003dc90: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0003dca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003dcb0: 2020 2020 2020 2020 733d 735b 3a61 745d          s=s[:at]
+0003dcc0: 2b5b 695d 2b73 5b61 743a 5d0a 2020 2020  +[i]+s[at:].    
+0003dcd0: 2020 2020 7265 7475 726e 2073 0a20 2020      return s.   
+0003dce0: 2072 6574 7572 6e20 4661 6c73 650a 0a64   return False..d
+0003dcf0: 6566 2070 6163 6b65 745f 7265 6365 6976  ef packet_receiv
+0003dd00: 655f 616c 6c28 736f 636b 2c63 6f75 6e74  e_all(sock,count
+0003dd10: 2c70 726f 6772 6573 733d 4661 6c73 652c  ,progress=False,
+0003dd20: 7072 6f67 7265 7373 5f6d 7367 3d4e 6f6e  progress_msg=Non
+0003dd30: 652c 6c6f 673d 4e6f 6e65 2c72 6574 7279  e,log=None,retry
+0003dd40: 3d30 2c72 6574 7279 5f74 696d 656f 7574  =0,retry_timeout
+0003dd50: 3d35 2c65 7272 5f73 6372 3d46 616c 7365  =5,err_scr=False
+0003dd60: 293a 2023 2050 6163 6b65 740a 2020 2020  ): # Packet.    
+0003dd70: 6966 2074 7970 6528 736f 636b 292e 5f5f  if type(sock).__
+0003dd80: 6e61 6d65 5f5f 206e 6f74 2069 6e20 5b27  name__ not in ['
+0003dd90: 736f 636b 6574 272c 275f 736f 636b 6574  socket','_socket
+0003dda0: 6f62 6a65 6374 272c 2753 534c 536f 636b  object','SSLSock
+0003ddb0: 6574 275d 3a0a 2020 2020 2020 2020 7265  et']:.        re
+0003ddc0: 7475 726e 2046 616c 7365 2c27 4973 206e  turn False,'Is n
+0003ddd0: 6f74 206e 6574 776f 726b 2073 6f63 6b65  ot network socke
+0003dde0: 7427 0a20 2020 2062 7566 203d 2062 2727  t'.    buf = b''
+0003ddf0: 0a20 2020 2066 696c 655f 7369 7a65 5f64  .    file_size_d
+0003de00: 3d69 6e74 2827 7b30 7d27 2e66 6f72 6d61  =int('{0}'.forma
+0003de10: 7428 636f 756e 7429 290a 2020 2020 746e  t(count)).    tn
+0003de20: 3d30 0a20 2020 206e 6577 6275 663d 4e6f  =0.    newbuf=No
+0003de30: 6e65 0a20 2020 2077 6869 6c65 2063 6f75  ne.    while cou
+0003de40: 6e74 3a0a 2020 2020 2020 2020 6966 2070  nt:.        if p
+0003de50: 726f 6772 6573 733a 0a20 2020 2020 2020  rogress:.       
+0003de60: 2020 2020 2069 6620 7072 6f67 7265 7373       if progress
+0003de70: 5f6d 7367 3a0a 2020 2020 2020 2020 2020  _msg:.          
+0003de80: 2020 2020 2020 7072 696e 7466 2827 5c72        printf('\r
+0003de90: 7b7d 205b 207b 7d20 2520 5d27 2e66 6f72  {} [ {} % ]'.for
+0003dea0: 6d61 7428 7072 6f67 7265 7373 5f6d 7367  mat(progress_msg
+0003deb0: 2c69 6e74 2828 6669 6c65 5f73 697a 655f  ,int((file_size_
+0003dec0: 642d 636f 756e 7429 202f 2066 696c 655f  d-count) / file_
+0003ded0: 7369 7a65 5f64 202a 2031 3030 2929 2c6c  size_d * 100)),l
+0003dee0: 6f67 3d6c 6f67 2c64 6972 6563 743d 5472  og=log,direct=Tr
+0003def0: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
+0003df00: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0003df10: 2020 2020 2020 7072 696e 7466 2827 5c72        printf('\r
+0003df20: 446f 776e 6c6f 6164 696e 672e 2e2e 205b  Downloading... [
+0003df30: 207b 7d20 2520 5d27 2e66 6f72 6d61 7428   {} % ]'.format(
+0003df40: 696e 7428 2866 696c 655f 7369 7a65 5f64  int((file_size_d
+0003df50: 2d63 6f75 6e74 2920 2f20 6669 6c65 5f73  -count) / file_s
+0003df60: 697a 655f 6420 2a20 3130 3029 292c 6c6f  ize_d * 100)),lo
+0003df70: 673d 6c6f 672c 6469 7265 6374 3d54 7275  g=log,direct=Tru
+0003df80: 6529 0a20 2020 2020 2020 2074 7279 3a0a  e).        try:.
+0003df90: 2020 2020 2020 2020 2020 2020 6e65 7762              newb
+0003dfa0: 7566 203d 2073 6f63 6b2e 7265 6376 2863  uf = sock.recv(c
+0003dfb0: 6f75 6e74 290a 2020 2020 2020 2020 2020  ount).          
+0003dfc0: 2020 746e 3d30 2023 2072 6573 6574 2074    tn=0 # reset t
+0003dfd0: 7279 0a20 2020 2020 2020 2065 7863 6570  ry.        excep
+0003dfe0: 7420 736f 636b 6574 2e65 7272 6f72 2061  t socket.error a
+0003dff0: 7320 653a 0a20 2020 2020 2020 2020 2020  s e:.           
+0003e000: 2069 6620 746e 203c 2072 6574 7279 3a0a   if tn < retry:.
+0003e010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003e020: 7072 696e 7466 2822 5b45 5252 4f52 5d20  printf("[ERROR] 
+0003e030: 7469 6d65 6f75 7420 7661 6c75 653a 7b7d  timeout value:{}
+0003e040: 2072 6574 7279 3a20 7b7d 2f7b 7d5c 6e7b   retry: {}/{}\n{
+0003e050: 7d22 2e66 6f72 6d61 7428 736f 636b 2e67  }".format(sock.g
+0003e060: 6574 7469 6d65 6f75 7428 292c 746e 2c72  ettimeout(),tn,r
+0003e070: 6574 7279 2c65 292c 6c6f 673d 6c6f 672c  etry,e),log=log,
+0003e080: 6473 703d 2765 2720 6966 2065 7272 5f73  dsp='e' if err_s
+0003e090: 6372 2065 6c73 6520 2764 2729 0a20 2020  cr else 'd').   
+0003e0a0: 2020 2020 2020 2020 2020 2020 2074 6e2b               tn+
+0003e0b0: 3d31 0a20 2020 2020 2020 2020 2020 2020  =1.             
+0003e0c0: 2020 2054 494d 4528 292e 536c 6565 7028     TIME().Sleep(
+0003e0d0: 3129 0a20 2020 2020 2020 2020 2020 2020  1).             
+0003e0e0: 2020 2073 6f63 6b2e 7365 7474 696d 656f     sock.settimeo
+0003e0f0: 7574 2872 6574 7279 5f74 696d 656f 7574  ut(retry_timeout
+0003e100: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0003e110: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
+0003e120: 2020 2020 2020 2072 6574 7572 6e20 2765         return 'e
+0003e130: 7272 6f72 272c 650a 2020 2020 2020 2020  rror',e.        
+0003e140: 6966 206e 6f74 206e 6577 6275 663a 2072  if not newbuf: r
+0003e150: 6574 7572 6e20 5472 7565 2c4e 6f6e 6520  eturn True,None 
+0003e160: 236d 6179 6265 2073 6f6d 6574 6869 6e67  #maybe something
+0003e170: 2073 6f63 6b65 7420 6973 7375 652e 0a20   socket issue.. 
+0003e180: 2020 2020 2020 2062 7566 202b 3d20 6e65         buf += ne
+0003e190: 7762 7566 0a20 2020 2020 2020 2063 6f75  wbuf.        cou
+0003e1a0: 6e74 202d 3d20 6c65 6e28 6e65 7762 7566  nt -= len(newbuf
+0003e1b0: 290a 2020 2020 6966 2070 726f 6772 6573  ).    if progres
+0003e1c0: 733a 0a20 2020 2020 2020 2069 6620 7072  s:.        if pr
+0003e1d0: 6f67 7265 7373 5f6d 7367 3a0a 2020 2020  ogress_msg:.    
+0003e1e0: 2020 2020 2020 2020 7072 696e 7466 2827          printf('
+0003e1f0: 5c72 7b7d 205b 2031 3030 2025 205d 5c6e  \r{} [ 100 % ]\n
+0003e200: 272e 666f 726d 6174 2870 726f 6772 6573  '.format(progres
+0003e210: 735f 6d73 6729 2c6c 6f67 3d6c 6f67 2c64  s_msg),log=log,d
+0003e220: 6972 6563 743d 5472 7565 290a 2020 2020  irect=True).    
+0003e230: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0003e240: 2020 2020 2020 7072 696e 7466 2827 5c72        printf('\r
+0003e250: 446f 776e 6c6f 6164 696e 672e 2e2e 205b  Downloading... [
+0003e260: 2031 3030 2025 205d 5c6e 272c 6c6f 673d   100 % ]\n',log=
+0003e270: 6c6f 672c 6469 7265 6374 3d54 7275 6529  log,direct=True)
+0003e280: 0a20 2020 2072 6574 7572 6e20 5472 7565  .    return True
+0003e290: 2c62 7566 0a0a 6465 6620 4461 7461 3242  ,buf..def Data2B
+0003e2a0: 7974 6553 7472 696e 6728 6461 7461 2c70  yteString(data,p
+0003e2b0: 726f 746f 636f 6c3d 3229 3a0a 2020 2020  rotocol=2):.    
+0003e2c0: 7472 793a 0a20 2020 2020 2020 2072 6574  try:.        ret
+0003e2d0: 7572 6e20 5472 7565 2c70 6963 6b6c 652e  urn True,pickle.
+0003e2e0: 6475 6d70 7328 6461 7461 2c70 726f 746f  dumps(data,proto
+0003e2f0: 636f 6c3d 7072 6f74 6f63 6f6c 2920 2320  col=protocol) # 
+0003e300: 636f 6d6d 6f6e 2032 2e78 2026 2033 2e78  common 2.x & 3.x
+0003e310: 2076 6572 7369 6f6e 203a 2070 726f 746f   version : proto
+0003e320: 636f 6c3d 320a 2020 2020 6578 6365 7074  col=2.    except
+0003e330: 3a0a 2020 2020 2020 2020 7472 793a 0a20  :.        try:. 
+0003e340: 2020 2020 2020 2020 2020 2023 203c 636c             # <cl
+0003e350: 6173 7320 274b 6579 4572 726f 7227 3e20  ass 'KeyError'> 
+0003e360: 7468 656e 2074 7279 2061 6761 696e 2061  then try again a
+0003e370: 6674 6572 2066 696c 7465 7220 6f75 7420  fter filter out 
+0003e380: 7079 7468 6f6e 2064 6566 6175 6c74 2065  python default e
+0003e390: 6e67 696e 650a 2020 2020 2020 2020 2020  ngine.          
+0003e3a0: 2020 2320 6d61 7962 6520 756e 6b6e 6f77    # maybe unknow
+0003e3b0: 6e20 6368 6172 6163 7465 7220 696e 2074  n character in t
+0003e3c0: 6865 2064 6174 610a 2020 2020 2020 2020  he data.        
+0003e3d0: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
+0003e3e0: 7069 636b 6c65 2e64 756d 7073 2865 7661  pickle.dumps(eva
+0003e3f0: 6c28 7374 7228 6461 7461 2929 2c70 726f  l(str(data)),pro
+0003e400: 746f 636f 6c3d 7072 6f74 6f63 6f6c 2920  tocol=protocol) 
+0003e410: 2320 636f 6d6d 6f6e 2032 2e78 2026 2033  # common 2.x & 3
+0003e420: 2e78 2076 6572 7369 6f6e 203a 2070 726f  .x version : pro
+0003e430: 746f 636f 6c3d 320a 2020 2020 2020 2020  tocol=2.        
+0003e440: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
+0003e450: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+0003e460: 2c73 7973 2e65 7863 5f69 6e66 6f28 295b  ,sys.exc_info()[
+0003e470: 305d 0a0a 6465 6620 4279 7465 5374 7269  0]..def ByteStri
+0003e480: 6e67 3244 6174 6128 6461 7461 293a 0a20  ng2Data(data):. 
+0003e490: 2020 2023 2049 6620 6e6f 7420 7069 636b     # If not pick
+0003e4a0: 6c65 2064 6174 6120 7468 656e 2072 6574  le data then ret
+0003e4b0: 7572 6e20 6f72 6967 696e 616c 2064 6174  urn original dat
+0003e4c0: 612c 2074 6861 7420 6973 2072 6561 6c20  a, that is real 
+0003e4d0: 6461 7461 0a20 2020 2023 2069 6620 7069  data.    # if pi
+0003e4e0: 636b 6c65 2064 6174 6120 7468 656e 2063  ckle data then c
+0003e4f0: 6f6e 7665 7274 2074 6f20 6461 7461 0a20  onvert to data. 
+0003e500: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+0003e510: 7265 7475 726e 2070 6963 6b6c 652e 6c6f  return pickle.lo
+0003e520: 6164 7328 6461 7461 290a 2020 2020 6578  ads(data).    ex
+0003e530: 6365 7074 3a0a 2020 2020 2020 2020 7265  cept:.        re
+0003e540: 7475 726e 2064 6174 610a 0a64 6566 2070  turn data..def p
+0003e550: 6163 6b65 745f 656e 6328 6461 7461 2c6b  acket_enc(data,k
+0003e560: 6579 3d27 6b67 272c 656e 633d 4661 6c73  ey='kg',enc=Fals
+0003e570: 6529 3a0a 2020 2020 6e6b 6579 3d42 7974  e):.    nkey=Byt
+0003e580: 6573 3249 6e74 286b 6579 2c65 6e63 6f64  es2Int(key,encod
+0003e590: 653d 2775 7466 2d38 272c 6465 6661 756c  e='utf-8',defaul
+0003e5a0: 743d 276f 7267 2729 0a20 2020 206f 6b2c  t='org').    ok,
+0003e5b0: 7064 6174 613d 4461 7461 3242 7974 6553  pdata=Data2ByteS
+0003e5c0: 7472 696e 6728 6461 7461 290a 2020 2020  tring(data).    
+0003e5d0: 6966 206e 6f74 206f 6b3a 2072 6574 7572  if not ok: retur
+0003e5e0: 6e20 4661 6c73 652c 7064 6174 610a 2020  n False,pdata.  
+0003e5f0: 2020 6461 7461 5f74 7970 653d 4279 7465    data_type=Byte
+0003e600: 7328 7479 7065 2864 6174 6129 2e5f 5f6e  s(type(data).__n
+0003e610: 616d 655f 5f5b 305d 290a 2020 2020 6966  ame__[0]).    if
+0003e620: 2065 6e63 2061 6e64 206b 6579 3a0a 2020   enc and key:.  
+0003e630: 2020 2020 2020 2320 656e 636f 6465 2063        # encode c
+0003e640: 6f64 6520 6865 7265 0a20 2020 2020 2020  ode here.       
+0003e650: 2023 656e 635f 7466 3d42 7974 6573 2827   #enc_tf=Bytes('
+0003e660: 7427 2920 2320 4e6f 7720 6e6f 7420 636f  t') # Now not co
+0003e670: 6465 2068 6572 652e 2053 6f2c 2065 7665  de here. So, eve
+0003e680: 7279 7468 696e 6720 746f 2027 6627 0a20  rything to 'f'. 
+0003e690: 2020 2020 2020 2023 7064 6174 613d 656e         #pdata=en
+0003e6a0: 636f 6465 286b 6579 2c70 6461 7461 290a  code(key,pdata).
+0003e6b0: 2020 2020 2020 2020 656e 635f 7466 3d42          enc_tf=B
+0003e6c0: 7974 6573 2827 6627 290a 2020 2020 656c  ytes('f').    el
+0003e6d0: 7365 3a0a 2020 2020 2020 2020 656e 635f  se:.        enc_
+0003e6e0: 7466 3d42 7974 6573 2827 6627 290a 2020  tf=Bytes('f').  
+0003e6f0: 2020 6e64 6174 613d 7374 7275 6374 2e70    ndata=struct.p
+0003e700: 6163 6b28 273e 4973 7349 272c 6c65 6e28  ack('>IssI',len(
+0003e710: 7064 6174 6129 2c64 6174 615f 7479 7065  pdata),data_type
+0003e720: 2c65 6e63 5f74 662c 6e6b 6579 292b 7064  ,enc_tf,nkey)+pd
+0003e730: 6174 610a 2020 2020 7265 7475 726e 2054  ata.    return T
+0003e740: 7275 652c 6e64 6174 610a 2020 2020 2020  rue,ndata.      
+0003e750: 2020 0a64 6566 2070 6163 6b65 745f 6865    .def packet_he
+0003e760: 6164 2873 6f63 6b2c 6b65 793d 276b 6727  ad(sock,key='kg'
+0003e770: 2c72 6574 7279 3d30 2c72 6574 7279 5f74  ,retry=0,retry_t
+0003e780: 696d 656f 7574 3d35 2c6b 6565 705f 7265  imeout=5,keep_re
+0003e790: 7472 793d 4661 6c73 652c 7469 6d65 6f75  try=False,timeou
+0003e7a0: 743d 3129 3a0a 2020 2020 2347 6574 2048  t=1):.    #Get H
+0003e7b0: 6561 6465 720a 2020 2020 236b 6565 705f  eader.    #keep_
+0003e7c0: 7265 7472 7920 3a54 7275 653a 2069 6620  retry :True: if 
+0003e7d0: 636c 6173 6564 2073 6f63 6b65 7420 6275  clased socket bu
+0003e7e0: 7420 7761 6974 0a20 2020 2070 683d 5449  t wait.    ph=TI
+0003e7f0: 4d45 2829 0a20 2020 2069 6620 2872 6574  ME().    if (ret
+0003e800: 7279 202a 2072 6574 7279 5f74 696d 656f  ry * retry_timeo
+0003e810: 7574 2920 3e20 7469 6d65 6f75 743a 0a20  ut) > timeout:. 
+0003e820: 2020 2020 2020 2074 696d 656f 7574 3d72         timeout=r
+0003e830: 6574 7279 202a 2072 6574 7279 5f74 696d  etry * retry_tim
+0003e840: 656f 7574 0a20 2020 2065 6c73 653a 0a20  eout.    else:. 
+0003e850: 2020 2020 2020 2069 6620 7265 7472 795f         if retry_
+0003e860: 7469 6d65 6f75 7420 3c3d 2030 3a20 7265  timeout <= 0: re
+0003e870: 7472 795f 7469 6d65 6f75 743d 350a 2020  try_timeout=5.  
+0003e880: 2020 2020 2020 7265 7472 793d 2874 696d        retry=(tim
+0003e890: 656f 7574 2f2f 7265 7472 795f 7469 6d65  eout//retry_time
+0003e8a0: 6f75 7429 2b31 0a20 2020 2077 6869 6c65  out)+1.    while
+0003e8b0: 2054 7275 653a 0a20 2020 2020 2020 2069   True:.        i
+0003e8c0: 6620 436c 6f73 6564 536f 636b 6574 2873  f ClosedSocket(s
+0003e8d0: 6f63 6b29 3a0a 2020 2020 2020 2020 2020  ock):.          
+0003e8e0: 2020 6966 2072 6574 7279 203c 3d20 303a    if retry <= 0:
+0003e8f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003e900: 2072 6574 7572 6e20 4661 6c73 652c 2741   return False,'A
+0003e910: 6c72 6561 6479 2063 6c6f 7365 6420 7468  lready closed th
+0003e920: 6520 736f 636b 6574 270a 2020 2020 2020  e socket'.      
+0003e930: 2020 2020 2020 7265 7472 792d 3d31 0a20        retry-=1. 
+0003e940: 2020 2020 2020 2020 2020 2074 696d 652e             time.
+0003e950: 736c 6565 7028 7265 7472 795f 7469 6d65  sleep(retry_time
+0003e960: 6f75 7429 0a20 2020 2020 2020 2020 2020  out).           
+0003e970: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
+0003e980: 2020 6f6b 2c68 6561 643d 7061 636b 6574    ok,head=packet
+0003e990: 5f72 6563 6569 7665 5f61 6c6c 2873 6f63  _receive_all(soc
+0003e9a0: 6b2c 3130 2c72 6574 7279 3d72 6574 7279  k,10,retry=retry
+0003e9b0: 2c72 6574 7279 5f74 696d 656f 7574 3d72  ,retry_timeout=r
+0003e9c0: 6574 7279 5f74 696d 656f 7574 290a 2020  etry_timeout).  
+0003e9d0: 2020 2020 2020 6966 206b 7263 286f 6b2c        if krc(ok,
+0003e9e0: 6368 6b3d 5472 7565 293a 0a20 2020 2020  chk=True):.     
+0003e9f0: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+0003ea00: 2020 2020 2020 2020 2020 2020 7374 5f68              st_h
+0003ea10: 6561 643d 7374 7275 6374 2e75 6e70 6163  ead=struct.unpac
+0003ea20: 6b28 273e 4973 7349 272c 4279 7465 7328  k('>IssI',Bytes(
+0003ea30: 6865 6164 2929 0a20 2020 2020 2020 2020  head)).         
+0003ea40: 2020 2020 2020 2069 6620 7374 5f68 6561         if st_hea
+0003ea50: 645b 335d 203d 3d20 4279 7465 7332 496e  d[3] == Bytes2In
+0003ea60: 7428 6b65 792c 656e 636f 6465 3d27 7574  t(key,encode='ut
+0003ea70: 662d 3827 2c64 6566 6175 6c74 3d27 6f72  f-8',default='or
+0003ea80: 6727 293a 0a20 2020 2020 2020 2020 2020  g'):.           
+0003ea90: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0003eaa0: 5472 7565 2c73 745f 6865 6164 5b30 5d2c  True,st_head[0],
+0003eab0: 7374 5f68 6561 645b 315d 2c73 745f 6865  st_head[1],st_he
+0003eac0: 6164 5b32 5d0a 2020 2020 2020 2020 2020  ad[2].          
+0003ead0: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
+0003eae0: 2020 2020 2020 2020 2020 7061 7373 0a20            pass. 
+0003eaf0: 2020 2020 2020 2069 6620 7068 2e4f 7574         if ph.Out
+0003eb00: 2874 696d 656f 7574 293a 2062 7265 616b  (timeout): break
+0003eb10: 0a20 2020 2020 2020 2074 696d 652e 736c  .        time.sl
+0003eb20: 6565 7028 3129 0a20 2020 2072 6574 7572  eep(1).    retur
+0003eb30: 6e20 4661 6c73 652c 2746 6169 6c20 666f  n False,'Fail fo
+0003eb40: 7220 7265 6164 2068 6561 6465 7228 7b7d  r read header({}
+0003eb50: 2927 2e66 6f72 6d61 7428 6865 6164 292c  )'.format(head),
+0003eb60: 4e6f 6e65 2c4e 6f6e 650a 0a64 6566 2070  None,None..def p
+0003eb70: 6163 6b65 745f 6465 6328 6461 7461 2c65  acket_dec(data,e
+0003eb80: 6e63 2c6b 6579 3d27 6b67 2729 3a0a 2020  nc,key='kg'):.  
+0003eb90: 2020 236f 6b2c 7369 7a65 2c64 6174 615f    #ok,size,data_
+0003eba0: 7479 7065 2c65 6e63 3d70 6163 6b65 745f  type,enc=packet_
+0003ebb0: 6865 6164 2873 6f63 6b29 0a20 2020 2023  head(sock).    #
+0003ebc0: 6f6b 2c64 6174 613d 7061 636b 6574 5f72  ok,data=packet_r
+0003ebd0: 6563 6569 7665 5f61 6c6c 2873 6f63 6b2c  eceive_all(sock,
+0003ebe0: 7369 7a65 2c2e 2e2e 2e29 0a20 2020 2023  size,....).    #
+0003ebf0: 7265 616c 5f64 6174 613d 7061 636b 6574  real_data=packet
+0003ec00: 5f64 6563 2864 6174 612c 656e 6329 0a20  _dec(data,enc). 
+0003ec10: 2020 2069 6620 656e 6320 3d3d 2027 7427     if enc == 't'
+0003ec20: 3a0a 2020 2020 2020 2020 2320 6465 636f  :.        # deco
+0003ec30: 6465 2063 6f64 6520 6865 7265 0a20 2020  de code here.   
+0003ec40: 2020 2020 2023 2064 6174 613d 6465 636f       # data=deco
+0003ec50: 6465 2864 6174 6129 0a20 2020 2020 2020  de(data).       
+0003ec60: 2070 6173 730a 2020 2020 7265 7475 726e   pass.    return
+0003ec70: 2042 7974 6553 7472 696e 6732 4461 7461   ByteString2Data
+0003ec80: 2864 6174 6129 0a0a 6465 6620 436c 6f73  (data)..def Clos
+0003ec90: 6564 536f 636b 6574 2873 6f63 6b29 3a0a  edSocket(sock):.
+0003eca0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+0003ecb0: 2023 2074 6869 7320 7769 6c6c 2074 7279   # this will try
+0003ecc0: 2074 6f20 7265 6164 2062 7974 6573 2077   to read bytes w
+0003ecd0: 6974 686f 7574 2062 6c6f 636b 696e 670a  ithout blocking.
+0003ece0: 2020 2020 2020 2020 2320 616e 6420 616c          # and al
+0003ecf0: 736f 2077 6974 686f 7574 2072 656d 6f76  so without remov
+0003ed00: 696e 6720 7468 656d 2066 726f 6d20 6275  ing them from bu
+0003ed10: 6666 6572 2028 7065 656b 206f 6e6c 7929  ffer (peek only)
+0003ed20: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
+0003ed30: 736f 636b 2e72 6563 7628 3136 2c20 736f  sock.recv(16, so
+0003ed40: 636b 6574 2e4d 5347 5f44 4f4e 5457 4149  cket.MSG_DONTWAI
+0003ed50: 5420 7c20 736f 636b 6574 2e4d 5347 5f50  T | socket.MSG_P
+0003ed60: 4545 4b29 0a20 2020 2020 2020 2069 6620  EEK).        if 
+0003ed70: 6c65 6e28 6461 7461 2920 3d3d 2030 3a0a  len(data) == 0:.
+0003ed80: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0003ed90: 726e 2054 7275 650a 2020 2020 6578 6365  rn True.    exce
+0003eda0: 7074 2042 6c6f 636b 696e 6749 4f45 7272  pt BlockingIOErr
+0003edb0: 6f72 3a0a 2020 2020 2020 2020 7265 7475  or:.        retu
+0003edc0: 726e 2046 616c 7365 2020 2320 736f 636b  rn False  # sock
+0003edd0: 6574 2069 7320 6f70 656e 2061 6e64 2072  et is open and r
+0003ede0: 6561 6469 6e67 2066 726f 6d20 6974 2077  eading from it w
+0003edf0: 6f75 6c64 2062 6c6f 636b 0a20 2020 2065  ould block.    e
+0003ee00: 7863 6570 7420 436f 6e6e 6563 7469 6f6e  xcept Connection
+0003ee10: 5265 7365 7445 7272 6f72 3a0a 2020 2020  ResetError:.    
+0003ee20: 2020 2020 7265 7475 726e 2054 7275 6520      return True 
+0003ee30: 2023 2073 6f63 6b65 7420 7761 7320 636c   # socket was cl
+0003ee40: 6f73 6564 2066 6f72 2073 6f6d 6520 6f74  osed for some ot
+0003ee50: 6865 7220 7265 6173 6f6e 0a20 2020 2065  her reason.    e
+0003ee60: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
+0003ee70: 6173 2065 3a20 2375 6e65 7870 6563 7465  as e: #unexpecte
+0003ee80: 6420 6578 6365 7074 696f 6e20 7768 656e  d exception when
+0003ee90: 2063 6865 636b 696e 6720 6966 2061 2073   checking if a s
+0003eea0: 6f63 6b65 7420 6973 2063 6c6f 7365 640a  ocket is closed.
+0003eeb0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+0003eec0: 616c 7365 0a20 2020 2072 6574 7572 6e20  alse.    return 
+0003eed0: 4661 6c73 650a 0a64 6566 2052 656d 6f76  False..def Remov
+0003eee0: 654e 6577 6c69 6e65 2873 7263 2c6d 6f64  eNewline(src,mod
+0003eef0: 653d 2765 6467 6527 2c6e 6577 6c69 6e65  e='edge',newline
+0003ef00: 3d27 5c6e 272c 6279 7465 3d4e 6f6e 6529  ='\n',byte=None)
+0003ef10: 3a0a 2020 2020 6966 2069 7369 6e73 7461  :.    if isinsta
+0003ef20: 6e63 6528 6279 7465 2c62 6f6f 6c29 3a0a  nce(byte,bool):.
+0003ef30: 2020 2020 2020 2020 6966 2062 7974 653a          if byte:
+0003ef40: 0a20 2020 2020 2020 2020 2020 2073 7263  .            src
+0003ef50: 3d42 7974 6573 2873 7263 290a 2020 2020  =Bytes(src).    
+0003ef60: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0003ef70: 2020 2020 2020 7372 633d 5374 7228 7372        src=Str(sr
+0003ef80: 6329 0a20 2020 2073 7263 5f61 3d53 706c  c).    src_a=Spl
+0003ef90: 6974 2873 7263 2c6e 6577 6c69 6e65 2c64  it(src,newline,d
+0003efa0: 6566 6175 6c74 3d46 616c 7365 2c6c 6973  efault=False,lis
+0003efb0: 746f 6e6c 793d 4661 6c73 6529 0a20 2020  tonly=False).   
+0003efc0: 2069 6620 7372 635f 6120 6973 2046 616c   if src_a is Fal
+0003efd0: 7365 3a0a 2020 2020 2020 2020 7265 7475  se:.        retu
+0003efe0: 726e 2073 7263 0a20 2020 2069 6620 6d6f  rn src.    if mo
+0003eff0: 6465 2069 6e20 5b27 6564 6765 272c 2762  de in ['edge','b
+0003f000: 6f74 6827 5d3a 0a20 2020 2020 2020 2069  oth']:.        i
+0003f010: 6620 6e6f 7420 7372 635f 615b 305d 2e73  f not src_a[0].s
+0003f020: 7472 6970 2829 2061 6e64 206e 6f74 2073  trip() and not s
+0003f030: 7263 5f61 5b2d 315d 2e73 7472 6970 2829  rc_a[-1].strip()
+0003f040: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0003f050: 7475 726e 204a 6f69 6e28 7372 635f 615b  turn Join(src_a[
+0003f060: 313a 2d31 5d2c 7379 6d62 6f6c 3d6e 6577  1:-1],symbol=new
+0003f070: 6c69 6e65 290a 2020 2020 2020 2020 656c  line).        el
+0003f080: 6966 206e 6f74 2073 7263 5f61 5b30 5d2e  if not src_a[0].
+0003f090: 7374 7269 7028 293a 0a20 2020 2020 2020  strip():.       
+0003f0a0: 2020 2020 2072 6574 7572 6e20 4a6f 696e       return Join
+0003f0b0: 2873 7263 5f61 5b31 3a5d 2c73 796d 626f  (src_a[1:],symbo
+0003f0c0: 6c3d 6e65 776c 696e 6529 0a20 2020 2020  l=newline).     
+0003f0d0: 2020 2065 6c69 6620 6e6f 7420 7372 635f     elif not src_
+0003f0e0: 615b 2d31 5d2e 7374 7269 7028 293a 0a20  a[-1].strip():. 
+0003f0f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0003f100: 6e20 4a6f 696e 2873 7263 5f61 5b3a 2d31  n Join(src_a[:-1
+0003f110: 5d2c 7379 6d62 6f6c 3d6e 6577 6c69 6e65  ],symbol=newline
+0003f120: 290a 2020 2020 656c 6966 206d 6f64 6520  ).    elif mode 
+0003f130: 696e 205b 2766 6972 7374 272c 2773 7461  in ['first','sta
+0003f140: 7274 272c 305d 3a0a 2020 2020 2020 2020  rt',0]:.        
+0003f150: 6966 206e 6f74 2073 7263 5f61 5b30 5d2e  if not src_a[0].
+0003f160: 7374 7269 7028 293a 0a20 2020 2020 2020  strip():.       
+0003f170: 2020 2020 2072 6574 7572 6e20 4a6f 696e       return Join
+0003f180: 2873 7263 5f61 5b31 3a5d 2c73 796d 626f  (src_a[1:],symbo
+0003f190: 6c3d 6e65 776c 696e 6529 0a20 2020 2065  l=newline).    e
+0003f1a0: 6c69 6620 6d6f 6465 2069 6e20 5b27 656e  lif mode in ['en
+0003f1b0: 6427 2c27 6c61 7374 272c 2d31 5d3a 0a20  d','last',-1]:. 
+0003f1c0: 2020 2020 2020 2069 6620 6e6f 7420 7372         if not sr
+0003f1d0: 635f 615b 2d31 5d2e 7374 7269 7028 293a  c_a[-1].strip():
+0003f1e0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0003f1f0: 7572 6e20 4a6f 696e 2873 7263 5f61 5b3a  urn Join(src_a[:
+0003f200: 2d31 5d2c 7379 6d62 6f6c 3d6e 6577 6c69  -1],symbol=newli
+0003f210: 6e65 290a 2020 2020 656c 6966 206d 6f64  ne).    elif mod
+0003f220: 6520 696e 205b 272a 272c 2761 6c6c 272c  e in ['*','all',
+0003f230: 2765 7665 7279 7468 696e 6727 5d3a 0a20  'everything']:. 
+0003f240: 2020 2020 2020 2072 6574 7572 6e20 4a6f         return Jo
+0003f250: 696e 2873 7263 5f61 2c73 796d 626f 6c3d  in(src_a,symbol=
+0003f260: 2727 290a 2020 2020 7265 7475 726e 2073  '').    return s
+0003f270: 7263 0a0a 6465 6620 6361 7428 6669 6c65  rc..def cat(file
+0003f280: 6e61 6d65 2c2a 2a6f 7074 7329 3a0a 2020  name,**opts):.  
+0003f290: 2020 6279 7465 3d6f 7074 732e 6765 7428    byte=opts.get(
+0003f2a0: 2762 7974 6527 2c46 616c 7365 290a 2020  'byte',False).  
+0003f2b0: 2020 6e65 776c 696e 653d 6f70 7473 2e67    newline=opts.g
+0003f2c0: 6574 2827 6e65 776c 696e 6527 2c27 5c6e  et('newline','\n
+0003f2d0: 2729 0a20 2020 2072 6561 645f 6669 7273  ').    read_firs
+0003f2e0: 746c 696e 653d 6f70 7473 2e67 6574 2827  tline=opts.get('
+0003f2f0: 7265 6164 5f66 6972 7374 6c69 6e65 272c  read_firstline',
+0003f300: 6f70 7473 2e67 6574 2827 6865 6164 272c  opts.get('head',
+0003f310: 6f70 7473 2e67 6574 2827 6865 6164 5f6c  opts.get('head_l
+0003f320: 696e 6527 2c46 616c 7365 2929 290a 2020  ine',False))).  
+0003f330: 2020 6465 6661 756c 743d 6f70 7473 2e67    default=opts.g
+0003f340: 6574 2827 6465 6661 756c 7427 2c46 616c  et('default',Fal
+0003f350: 7365 290a 2020 2020 6e6f 5f65 6467 653d  se).    no_edge=
+0003f360: 6f70 7473 2e67 6574 2827 6e6f 5f65 6467  opts.get('no_edg
+0003f370: 6527 2c46 616c 7365 290a 2020 2020 6e6f  e',False).    no
+0003f380: 5f65 6e64 5f6e 6577 6c69 6e65 3d6f 7074  _end_newline=opt
+0003f390: 732e 6765 7428 276e 6f5f 656e 645f 6e65  s.get('no_end_ne
+0003f3a0: 776c 696e 6527 2c46 616c 7365 290a 2020  wline',False).  
+0003f3b0: 2020 6669 6c65 5f6f 6e6c 793d 6f70 7473    file_only=opts
+0003f3c0: 2e67 6574 2827 6669 6c65 5f6f 6e6c 7927  .get('file_only'
+0003f3d0: 2c6f 7074 732e 6765 7428 2766 696c 656f  ,opts.get('fileo
+0003f3e0: 6e6c 7927 2c54 7275 6529 290a 2020 2020  nly',True)).    
+0003f3f0: 6e6f 5f61 6c6c 5f6e 6577 6c69 6e65 3d6f  no_all_newline=o
+0003f400: 7074 732e 6765 7428 276e 6f5f 616c 6c5f  pts.get('no_all_
+0003f410: 6e65 776c 696e 6527 2c46 616c 7365 290a  newline',False).
+0003f420: 2020 2020 6e6f 5f66 6972 7374 5f6e 6577      no_first_new
+0003f430: 6c69 6e65 3d6f 7074 732e 6765 7428 276e  line=opts.get('n
+0003f440: 6f5f 6669 7273 745f 6e65 776c 696e 6527  o_first_newline'
+0003f450: 2c46 616c 7365 290a 2020 2020 6c6f 673d  ,False).    log=
+0003f460: 6f70 7473 2e67 6574 2827 6c6f 6727 290a  opts.get('log').
+0003f470: 0a20 2020 2069 6620 4973 4e6f 6e65 2866  .    if IsNone(f
+0003f480: 696c 656e 616d 6529 3a0a 2020 2020 2020  ilename):.      
+0003f490: 2020 7072 696e 7466 2827 4669 6c65 6e61    printf('Filena
+0003f4a0: 6d65 2069 7320 4e6f 6e65 272c 6c6f 673d  me is None',log=
+0003f4b0: 6c6f 672c 6d6f 6465 3d27 6427 290a 2020  log,mode='d').  
+0003f4c0: 2020 2020 2020 7265 7475 726e 2064 6566        return def
+0003f4d0: 6175 6c74 0a20 2020 2069 6620 6f73 2e70  ault.    if os.p
+0003f4e0: 6174 682e 6973 6469 7228 6669 6c65 6e61  ath.isdir(filena
+0003f4f0: 6d65 293a 0a20 2020 2020 2020 2070 7269  me):.        pri
+0003f500: 6e74 6628 277b 7d20 6973 2061 2064 6972  ntf('{} is a dir
+0003f510: 6563 746f 7279 272e 666f 726d 6174 2866  ectory'.format(f
+0003f520: 696c 656e 616d 6529 2c6c 6f67 3d6c 6f67  ilename),log=log
+0003f530: 2c6d 6f64 653d 2764 2729 0a20 2020 2020  ,mode='d').     
+0003f540: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
+0003f550: 740a 2020 2020 6966 206e 6f74 206f 732e  t.    if not os.
+0003f560: 7061 7468 2e65 7869 7374 7328 6669 6c65  path.exists(file
+0003f570: 6e61 6d65 293a 0a20 2020 2020 2020 2070  name):.        p
+0003f580: 7269 6e74 6628 277b 7d20 6e6f 7420 666f  rintf('{} not fo
+0003f590: 756e 6427 2e66 6f72 6d61 7428 6669 6c65  und'.format(file
+0003f5a0: 6e61 6d65 292c 6c6f 673d 6c6f 672c 6d6f  name),log=log,mo
+0003f5b0: 6465 3d27 6427 290a 2020 2020 2020 2020  de='d').        
+0003f5c0: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
+0003f5d0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+0003f5e0: 6966 2072 6561 645f 6669 7273 746c 696e  if read_firstlin
+0003f5f0: 653a 2020 2320 5265 6164 6c69 6e65 0a20  e:  # Readline. 
+0003f600: 2020 2020 2020 2020 2020 2077 6974 6820             with 
+0003f610: 6f70 656e 2866 696c 656e 616d 652c 2772  open(filename,'r
+0003f620: 6227 2920 6173 2066 3a0a 2020 2020 2020  b') as f:.      
+0003f630: 2020 2020 2020 2020 2020 6461 7461 3d66            data=f
+0003f640: 2e72 6561 646c 696e 6528 290a 2020 2020  .readline().    
+0003f650: 2020 2020 656c 6966 206e 6f74 2066 696c      elif not fil
+0003f660: 655f 6f6e 6c79 3a20 2320 5265 6164 2073  e_only: # Read s
+0003f670: 7065 6369 616c 2066 696c 650a 2020 2020  pecial file.    
+0003f680: 2020 2020 2020 2020 6461 7461 3d6f 732e          data=os.
+0003f690: 6f70 656e 2866 696c 656e 616d 652c 6f73  open(filename,os
+0003f6a0: 2e4f 5f52 444f 4e4c 5929 0a20 2020 2020  .O_RDONLY).     
+0003f6b0: 2020 2020 2020 206f 732e 636c 6f73 6528         os.close(
+0003f6c0: 6461 7461 290a 2020 2020 2020 2020 656c  data).        el
+0003f6d0: 7365 3a20 2320 5265 6164 206e 6f72 6d61  se: # Read norma
+0003f6e0: 6c20 6669 6c65 0a20 2020 2020 2020 2020  l file.         
+0003f6f0: 2020 2077 6974 6820 6f70 656e 2866 696c     with open(fil
+0003f700: 656e 616d 652c 2772 6227 2920 6173 2066  ename,'rb') as f
+0003f710: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003f720: 2020 6461 7461 3d66 2e72 6561 6428 290a    data=f.read().
+0003f730: 2020 2020 2020 2020 6966 206e 6f74 2062          if not b
+0003f740: 7974 653a 0a20 2020 2020 2020 2020 2020  yte:.           
+0003f750: 6461 7461 3d53 7472 2864 6174 6129 0a20  data=Str(data). 
+0003f760: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
+0003f770: 2020 2070 7269 6e74 6628 7379 732e 6578     printf(sys.ex
+0003f780: 635f 696e 666f 2829 5b30 5d2c 6c6f 673d  c_info()[0],log=
+0003f790: 6c6f 672c 6d6f 6465 3d27 6427 290a 2020  log,mode='d').  
+0003f7a0: 2020 2020 2020 7265 7475 726e 2064 6566        return def
+0003f7b0: 6175 6c74 0a20 2020 2072 6574 7572 6e20  ault.    return 
+0003f7c0: 5265 6d6f 7665 4e65 776c 696e 6528 6461  RemoveNewline(da
+0003f7d0: 7461 2c6d 6f64 653d 2765 6467 6527 2069  ta,mode='edge' i
+0003f7e0: 6620 6e6f 5f65 6467 6520 656c 7365 2027  f no_edge else '
+0003f7f0: 656e 6427 2069 6620 6e6f 5f65 6e64 5f6e  end' if no_end_n
+0003f800: 6577 6c69 6e65 2065 6c73 6520 2766 6972  ewline else 'fir
+0003f810: 7374 2720 6966 206e 6f5f 6669 7273 745f  st' if no_first_
+0003f820: 6e65 776c 696e 6520 656c 7365 2027 616c  newline else 'al
+0003f830: 6c27 2069 6620 6e6f 5f61 6c6c 5f6e 6577  l' if no_all_new
+0003f840: 6c69 6e65 2065 6c73 6520 4e6f 6e65 2c6e  line else None,n
+0003f850: 6577 6c69 6e65 3d6e 6577 6c69 6e65 2c62  ewline=newline,b
+0003f860: 7974 653d 6279 7465 290a 0a64 6566 2043  yte=byte)..def C
+0003f870: 6f6d 7072 6573 7328 6461 7461 2c6d 6f64  ompress(data,mod
+0003f880: 653d 2767 7a69 7027 293a 0a20 2020 2074  e='gzip'):.    t
+0003f890: 7279 3a0a 2020 2020 2020 2020 6966 2069  ry:.        if i
+0003f8a0: 7369 6e73 7461 6e63 6528 6461 7461 2c73  sinstance(data,s
+0003f8b0: 7472 2920 616e 6420 6f73 2e70 6174 682e  tr) and os.path.
+0003f8c0: 6973 6669 6c65 2864 6174 6129 3a0a 2020  isfile(data):.  
+0003f8d0: 2020 2020 2020 2020 2020 7769 7468 206f            with o
+0003f8e0: 7065 6e28 6461 7461 2c27 7262 2729 2061  pen(data,'rb') a
+0003f8f0: 7320 663a 0a20 2020 2020 2020 2020 2020  s f:.           
+0003f900: 2020 2020 2064 6174 613d 662e 7265 6164       data=f.read
+0003f910: 2829 0a20 2020 2020 2020 2069 6620 6d6f  ().        if mo
+0003f920: 6465 203d 3d20 276c 7a34 273a 0a20 2020  de == 'lz4':.   
+0003f930: 2020 2020 2020 2020 2049 6d70 6f72 7428           Import(
+0003f940: 2766 726f 6d20 6c7a 3420 696d 706f 7274  'from lz4 import
+0003f950: 2066 7261 6d65 2729 0a20 2020 2020 2020   frame').       
+0003f960: 2020 2020 2072 6574 7572 6e20 6672 616d       return fram
+0003f970: 652e 636f 6d70 7265 7373 2864 6174 6129  e.compress(data)
+0003f980: 0a20 2020 2020 2020 2065 6c69 6620 6d6f  .        elif mo
+0003f990: 6465 203d 3d20 2762 7a32 273a 0a20 2020  de == 'bz2':.   
+0003f9a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0003f9b0: 627a 322e 636f 6d70 7265 7373 2864 6174  bz2.compress(dat
+0003f9c0: 6129 0a20 2020 2020 2020 2065 6c69 6620  a).        elif 
+0003f9d0: 6d6f 6465 203d 3d20 2767 7a69 7027 3a0a  mode == 'gzip':.
+0003f9e0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0003f9f0: 726e 2067 7a69 702e 636f 6d70 7265 7373  rn gzip.compress
+0003fa00: 2864 6174 612c 636f 6d70 7265 7373 6c65  (data,compressle
+0003fa10: 7665 6c3d 3929 2023 6465 636f 6d70 7265  vel=9) #decompre
+0003fa20: 7373 2864 6174 6129 0a20 2020 2020 2020  ss(data).       
+0003fa30: 2065 6c73 653a 2023 7a6c 6962 0a20 2020   else: #zlib.   
+0003fa40: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0003fa50: 7a6c 6962 2e63 6f6d 7072 6573 7328 6461  zlib.compress(da
+0003fa60: 7461 2920 2320 6465 636f 6d70 7265 7373  ta) # decompress
+0003fa70: 2864 6174 6129 0a20 2020 2065 7863 6570  (data).    excep
+0003fa80: 743a 0a20 2020 2020 2020 2072 6574 7572  t:.        retur
+0003fa90: 6e20 4661 6c73 650a 0a64 6566 2044 6563  n False..def Dec
+0003faa0: 6f6d 7072 6573 7328 6461 7461 2c6d 6f64  ompress(data,mod
+0003fab0: 653d 2767 7a69 7027 293a 0a20 2020 2074  e='gzip'):.    t
+0003fac0: 7279 3a0a 2020 2020 2020 2020 6966 2069  ry:.        if i
+0003fad0: 7369 6e73 7461 6e63 6528 6461 7461 2c73  sinstance(data,s
+0003fae0: 7472 2920 616e 6420 6f73 2e70 6174 682e  tr) and os.path.
+0003faf0: 6973 6669 6c65 2864 6174 6129 3a0a 2020  isfile(data):.  
+0003fb00: 2020 2020 2020 2020 2020 7769 7468 206f            with o
+0003fb10: 7065 6e28 6461 7461 2c27 7262 2729 2061  pen(data,'rb') a
+0003fb20: 7320 663a 0a20 2020 2020 2020 2020 2020  s f:.           
+0003fb30: 2020 2020 2064 6174 613d 662e 7265 6164       data=f.read
+0003fb40: 2829 0a20 2020 2020 2020 2069 6620 6d6f  ().        if mo
+0003fb50: 6465 203d 3d20 276c 7a34 273a 0a20 2020  de == 'lz4':.   
+0003fb60: 2020 2020 2020 2020 2049 6d70 6f72 7428           Import(
+0003fb70: 2766 726f 6d20 6c7a 3420 696d 706f 7274  'from lz4 import
+0003fb80: 2066 7261 6d65 2729 0a20 2020 2020 2020   frame').       
+0003fb90: 2020 2020 2072 6574 7572 6e20 6672 616d       return fram
+0003fba0: 652e 6465 636f 6d70 7265 7373 2864 6174  e.decompress(dat
+0003fbb0: 6129 0a20 2020 2020 2020 2065 6c69 6620  a).        elif 
+0003fbc0: 6d6f 6465 203d 3d20 2762 7a32 273a 0a20  mode == 'bz2':. 
+0003fbd0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0003fbe0: 6e20 627a 322e 425a 3244 6563 6f6d 7072  n bz2.BZ2Decompr
+0003fbf0: 6573 736f 7228 292e 6465 636f 6d70 7265  essor().decompre
+0003fc00: 7373 2864 6174 6129 0a20 2020 2020 2020  ss(data).       
+0003fc10: 2065 6c69 6620 6d6f 6465 203d 3d20 2767   elif mode == 'g
+0003fc20: 7a69 7027 3a0a 2020 2020 2020 2020 2020  zip':.          
+0003fc30: 2020 7265 7475 726e 2067 7a69 702e 6465    return gzip.de
+0003fc40: 636f 6d70 7265 7373 2864 6174 6129 0a20  compress(data). 
+0003fc50: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0003fc60: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0003fc70: 7a6c 6962 2e64 6563 6f6d 7072 6573 7328  zlib.decompress(
+0003fc80: 6461 7461 290a 2020 2020 6578 6365 7074  data).    except
+0003fc90: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+0003fca0: 2046 616c 7365 0a0a 6465 6620 7369 7a65   False..def size
+0003fcb0: 6f66 286f 626a 293a 0a20 2020 206d 7369  of(obj):.    msi
+0003fcc0: 7a65 203d 2030 0a20 2020 2069 6473 203d  ze = 0.    ids =
+0003fcd0: 2073 6574 2829 0a20 2020 206f 626a 6563   set().    objec
+0003fce0: 7473 203d 205b 6f62 6a5d 0a20 2020 2077  ts = [obj].    w
+0003fcf0: 6869 6c65 206f 626a 6563 7473 3a0a 2020  hile objects:.  
+0003fd00: 2020 2020 2020 6e65 7720 3d20 5b5d 0a20        new = []. 
+0003fd10: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+0003fd20: 6f62 6a65 6374 733a 0a20 2020 2020 2020  objects:.       
+0003fd30: 2020 2020 2069 6620 6964 2869 2920 6e6f       if id(i) no
+0003fd40: 7420 696e 2069 6473 3a0a 2020 2020 2020  t in ids:.      
+0003fd50: 2020 2020 2020 2020 2020 6964 732e 6164            ids.ad
+0003fd60: 6428 6964 2869 2929 0a20 2020 2020 2020  d(id(i)).       
+0003fd70: 2020 2020 2020 2020 206d 7369 7a65 202b           msize +
+0003fd80: 3d20 7379 732e 6765 7473 697a 656f 6628  = sys.getsizeof(
+0003fd90: 6929 0a20 2020 2020 2020 2020 2020 2020  i).             
+0003fda0: 2020 206e 6577 2e61 7070 656e 6428 6929     new.append(i)
+0003fdb0: 0a20 2020 2020 2020 206f 626a 6563 7473  .        objects
+0003fdc0: 203d 2067 632e 6765 745f 7265 6665 7265   = gc.get_refere
+0003fdd0: 6e74 7328 2a6e 6577 290a 2020 2020 7265  nts(*new).    re
+0003fde0: 7475 726e 206d 7369 7a65 0a0a 6465 6620  turn msize..def 
+0003fdf0: 6875 6d61 6e5f 6279 7465 286e 756d 2c20  human_byte(num, 
+0003fe00: 756e 6974 3d22 4b22 2c20 7775 6e69 743d  unit="K", wunit=
+0003fe10: 4e6f 6e65 2c69 6e74 5f6f 7574 3d46 616c  None,int_out=Fal
+0003fe20: 7365 293a 0a20 2020 2075 6e69 7473 203d  se):.    units =
+0003fe30: 205b 2242 222c 224b 222c 224d 222c 2247   ["B","K","M","G
+0003fe40: 222c 2254 222c 2250 225d 0a20 2020 2069  ","T","P"].    i
+0003fe50: 6620 7775 6e69 7420 6973 204e 6f6e 653a  f wunit is None:
+0003fe60: 0a20 2020 2020 2020 2075 6e69 743d 756e  .        unit=un
+0003fe70: 6974 2e75 7070 6572 2829 0a20 2020 2020  it.upper().     
+0003fe80: 2020 2069 6620 6e75 6d20 3e3d 2031 3030     if num >= 100
+0003fe90: 303a 0a20 2020 2020 2020 2020 2020 2077  0:.            w
+0003fea0: 6869 6c65 206e 756d 203e 3d20 3130 3030  hile num >= 1000
+0003feb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003fec0: 2073 7569 3d75 6e69 7473 2e69 6e64 6578   sui=units.index
+0003fed0: 2875 6e69 7429 0a20 2020 2020 2020 2020  (unit).         
+0003fee0: 2020 2020 2020 6966 206c 656e 2875 6e69        if len(uni
+0003fef0: 7473 2920 3c3d 2073 7569 2b31 3a0a 2020  ts) <= sui+1:.  
+0003ff00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003ff10: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
+0003ff20: 2020 2020 2020 6e75 6d20 2f3d 2031 3032        num /= 102
+0003ff30: 342e 300a 2020 2020 2020 2020 2020 2020  4.0.            
+0003ff40: 2020 2075 6e69 7420 3d20 756e 6974 735b     unit = units[
+0003ff50: 7375 692b 315d 0a20 2020 2020 2020 2065  sui+1].        e
+0003ff60: 6c69 6620 6e75 6d20 3c20 313a 0a20 2020  lif num < 1:.   
+0003ff70: 2020 2020 2020 2020 2077 6869 6c65 206e           while n
+0003ff80: 756d 203c 2031 3a20 2330 2e58 5858 2064  um < 1: #0.XXX d
+0003ff90: 6967 6974 730a 2020 2020 2020 2020 2020  igits.          
+0003ffa0: 2020 2020 2073 7569 3d75 6e69 7473 2e69       sui=units.i
+0003ffb0: 6e64 6578 2875 6e69 7429 0a20 2020 2020  ndex(unit).     
+0003ffc0: 2020 2020 2020 2020 2020 6966 2073 7569            if sui
+0003ffd0: 2d31 203c 2030 3a0a 2020 2020 2020 2020  -1 < 0:.        
+0003ffe0: 2020 2020 2020 2020 2020 2062 7265 616b             break
+0003fff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00040000: 6e75 6d20 2a3d 2031 3032 342e 300a 2020  num *= 1024.0.  
+00040010: 2020 2020 2020 2020 2020 2020 2075 6e69               uni
+00040020: 7420 3d20 756e 6974 735b 7375 692d 315d  t = units[sui-1]
+00040030: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+00040040: 2020 2077 756e 6974 3d77 756e 6974 2e75     wunit=wunit.u
+00040050: 7070 6572 2829 0a20 2020 2020 2020 2065  pper().        e
+00040060: 7569 3d75 6e69 7473 2e69 6e64 6578 2877  ui=units.index(w
+00040070: 756e 6974 290a 2020 2020 2020 2020 6966  unit).        if
+00040080: 2073 7569 203c 2065 7569 3a0a 2020 2020   sui < eui:.    
+00040090: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+000400a0: 2072 616e 6765 2873 7569 2c65 7569 293a   range(sui,eui):
+000400b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000400c0: 206e 756d 202f 3d20 3130 3234 2e30 0a20   num /= 1024.0. 
+000400d0: 2020 2020 2020 2065 6c69 6620 7375 6920         elif sui 
+000400e0: 3e20 6575 693a 0a20 2020 2020 2020 2020  > eui:.         
+000400f0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+00040100: 6528 7375 692c 6575 692c 2d31 293a 0a20  e(sui,eui,-1):. 
+00040110: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+00040120: 756d 202a 3d20 3130 3234 2e30 0a20 2020  um *= 1024.0.   
+00040130: 2020 2020 2075 6e69 743d 7775 6e69 740a       unit=wunit.
+00040140: 2020 2020 6966 2069 6e74 5f6f 7574 3a0a      if int_out:.
+00040150: 2020 2020 2020 2020 7265 7475 726e 2066          return f
+00040160: 6c6f 6174 2822 252e 3166 2225 286e 756d  loat("%.1f"%(num
+00040170: 2929 0a20 2020 2065 6c73 653a 0a20 2020  )).    else:.   
+00040180: 2020 2020 2069 6620 756e 6974 203d 3d20       if unit == 
+00040190: 2242 223a 0a20 2020 2020 2020 2020 2020  "B":.           
+000401a0: 2072 6574 7572 6e20 2225 2e31 6620 2573   return "%.1f %s
+000401b0: 2220 2520 286e 756d 2c75 6e69 7429 0a20  " % (num,unit). 
+000401c0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000401d0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000401e0: 2225 2e31 6620 2573 4222 2025 2028 6e75  "%.1f %sB" % (nu
+000401f0: 6d2c 756e 6974 290a 0a64 6566 2048 756d  m,unit)..def Hum
+00040200: 616e 5f55 6e69 7428 6e75 6d2c 756e 6974  an_Unit(num,unit
+00040210: 3d27 5327 2c77 616e 745f 756e 6974 3d4e  ='S',want_unit=N
+00040220: 6f6e 652c 696e 745f 6f75 743d 4661 6c73  one,int_out=Fals
+00040230: 6529 3a0a 2020 2020 6465 6620 636f 6e76  e):.    def conv
+00040240: 6572 745f 7365 635f 746f 5f66 6f72 6d61  ert_sec_to_forma
+00040250: 7428 6e75 6d2c 7761 6e74 5f66 6f72 6d61  t(num,want_forma
+00040260: 743d 2225 5920 256d 2025 6420 2548 3a25  t="%Y %m %d %H:%
+00040270: 4d3a 2553 2229 3a0a 2020 2020 2020 2020  M:%S"):.        
+00040280: 7265 7475 726e 2064 6174 6574 696d 652e  return datetime.
+00040290: 6461 7465 7469 6d65 2e66 726f 6d74 696d  datetime.fromtim
+000402a0: 6573 7461 6d70 286e 756d 292e 7374 7266  estamp(num).strf
+000402b0: 7469 6d65 2877 616e 745f 666f 726d 6174  time(want_format
+000402c0: 290a 2020 2020 6465 6620 636f 6e76 6572  ).    def conver
+000402d0: 745f 696e 745f 7469 6d65 5f74 6f5f 7968  t_int_time_to_yh
+000402e0: 6d73 286e 756d 2c75 6e69 743d 2753 272c  ms(num,unit='S',
+000402f0: 7761 6e74 3d4e 6f6e 6529 3a0a 2020 2020  want=None):.    
+00040300: 2020 2020 633d 5b33 3135 3336 3030 302c      c=[31536000,
+00040310: 3836 3430 302c 3336 3030 2c36 302c 315d  86400,3600,60,1]
+00040320: 2023 2079 792c 6464 2c68 682c 6d6d 2c73   # yy,dd,hh,mm,s
+00040330: 730a 2020 2020 2020 2020 6375 3d5b 2759  s.        cu=['Y
+00040340: 272c 2744 272c 2748 272c 274d 272c 2753  ','D','H','M','S
+00040350: 275d 2020 2020 2023 2079 792c 6464 2c68  ']     # yy,dd,h
+00040360: 682c 6d6d 2c73 730a 2020 2020 2020 2020  h,mm,ss.        
+00040370: 6966 2069 7369 6e73 7461 6e63 6528 7761  if isinstance(wa
+00040380: 6e74 2c73 7472 2920 616e 6420 7761 6e74  nt,str) and want
+00040390: 2061 6e64 2077 616e 7420 696e 2063 753a   and want in cu:
+000403a0: 0a20 2020 2020 2020 2020 2020 2073 7461  .            sta
+000403b0: 7274 5f69 3d63 752e 696e 6465 7828 7761  rt_i=cu.index(wa
+000403c0: 6e74 290a 2020 2020 2020 2020 656c 7365  nt).        else
+000403d0: 3a0a 2020 2020 2020 2020 2020 2020 7374  :.            st
+000403e0: 6172 745f 693d 300a 2020 2020 2020 2020  art_i=0.        
+000403f0: 6966 2069 7369 6e73 7461 6e63 6528 756e  if isinstance(un
+00040400: 6974 2c73 7472 2920 616e 6420 756e 6974  it,str) and unit
+00040410: 2061 6e64 2075 6e69 7420 696e 2063 753a   and unit in cu:
+00040420: 0a20 2020 2020 2020 2020 2020 206d 783d  .            mx=
+00040430: 6375 2e69 6e64 6578 2875 6e69 7429 0a20  cu.index(unit). 
+00040440: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00040450: 2020 2020 2020 2020 206d 783d 6c65 6e28           mx=len(
+00040460: 6329 2d31 0a20 2020 2020 2020 2069 6620  c)-1.        if 
+00040470: 6d78 203d 3d20 6c65 6e28 6329 2d31 3a20  mx == len(c)-1: 
+00040480: 2320 7365 6320 2d3e 2077 616e 740a 2020  # sec -> want.  
+00040490: 2020 2020 2020 2020 2020 6f3d 7b7d 0a20            o={}. 
+000404a0: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
+000404b0: 2069 6e20 7261 6e67 6528 7374 6172 745f   in range(start_
+000404c0: 692c 6d78 2b31 293a 0a20 2020 2020 2020  i,mx+1):.       
+000404d0: 2020 2020 2020 2020 2069 6620 286d 7820           if (mx 
+000404e0: 3d3d 2069 2061 6e64 206e 756d 203e 3d20  == i and num >= 
+000404f0: 635b 695d 2920 6f72 206e 756d 203e 2063  c[i]) or num > c
+00040500: 5b69 5d3a 0a20 2020 2020 2020 2020 2020  [i]:.           
+00040510: 2020 2020 2020 2020 206f 5b63 755b 695d           o[cu[i]
+00040520: 5d3d 6e75 6d2f 2f63 5b69 5d0a 2020 2020  ]=num//c[i].    
+00040530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040540: 6e75 6d3d 6e75 6d25 2863 5b69 5d2a 6f5b  num=num%(c[i]*o[
+00040550: 6375 5b69 5d5d 290a 2020 2020 2020 2020  cu[i]]).        
+00040560: 2020 2020 7265 7475 726e 206f 0a20 2020      return o.   
+00040570: 2020 2020 2065 6c73 653a 2020 2320 756e       else:  # un
+00040580: 6974 202d 3e20 7365 6320 616e 6420 6361  it -> sec and ca
+00040590: 6c63 756c 6174 6520 7365 6320 746f 2077  lculate sec to w
+000405a0: 616e 740a 2020 2020 2020 2020 2020 2020  ant.            
+000405b0: 6e75 6d20 3d20 6e75 6d20 2a20 635b 6d78  num = num * c[mx
+000405c0: 5d20 2320 636f 6e76 6572 7420 746f 2075  ] # convert to u
+000405d0: 6e69 7420 746f 2073 6563 6f6e 6473 0a20  nit to seconds. 
+000405e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000405f0: 6e20 636f 6e76 6572 745f 696e 745f 7469  n convert_int_ti
+00040600: 6d65 5f74 6f5f 7968 6d73 286e 756d 2c75  me_to_yhms(num,u
+00040610: 6e69 743d 2753 272c 7761 6e74 3d77 616e  nit='S',want=wan
+00040620: 7429 0a20 2020 2069 6620 6973 696e 7374  t).    if isinst
+00040630: 616e 6365 2875 6e69 742c 7374 7229 2061  ance(unit,str) a
+00040640: 6e64 2075 6e69 7420 616e 6420 2877 616e  nd unit and (wan
+00040650: 745f 756e 6974 2069 7320 4e6f 6e65 206f  t_unit is None o
+00040660: 7220 6973 696e 7374 616e 6365 2877 616e  r isinstance(wan
+00040670: 745f 756e 6974 2c73 7472 2929 3a0a 2020  t_unit,str)):.  
+00040680: 2020 2020 2020 6966 2075 6e69 742e 7570        if unit.up
+00040690: 7065 7228 2920 696e 205b 274d 4d27 2c27  per() in ['MM','
+000406a0: 4d49 4e27 2c27 5927 2c27 5959 272c 2759  MIN','Y','YY','Y
+000406b0: 4541 5227 2c27 4848 272c 2748 272c 2748  EAR','HH','H','H
+000406c0: 4f55 5227 2c27 5327 2c27 5345 4327 2c27  OUR','S','SEC','
+000406d0: 5353 275d 3a0a 2020 2020 2020 2020 2020  SS']:.          
+000406e0: 2020 6d6f 6465 3d27 7469 6d65 270a 2020    mode='time'.  
+000406f0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+00040700: 6e73 7461 6e63 6528 7761 6e74 5f75 6e69  nstance(want_uni
+00040710: 742c 7374 7229 3a0a 2020 2020 2020 2020  t,str):.        
+00040720: 2020 2020 2020 2020 7570 5f77 616e 745f          up_want_
+00040730: 756e 6974 3d77 616e 745f 756e 6974 2e75  unit=want_unit.u
+00040740: 7070 6572 2829 0a20 2020 2020 2020 2020  pper().         
+00040750: 2020 2020 2020 2069 6620 7570 5f77 616e         if up_wan
+00040760: 745f 756e 6974 2069 6e20 5b27 484f 5552  t_unit in ['HOUR
+00040770: 272c 2748 4827 2c27 484f 5552 5327 2c27  ','HH','HOURS','
+00040780: 4827 5d3a 2077 616e 745f 756e 6974 3d27  H']: want_unit='
+00040790: 4827 0a20 2020 2020 2020 2020 2020 2020  H'.             
+000407a0: 2020 2065 6c69 6620 7570 5f77 616e 745f     elif up_want_
+000407b0: 756e 6974 2069 6e20 5b27 4d49 4e27 2c27  unit in ['MIN','
+000407c0: 4d4d 272c 274d 494e 5554 4527 2c27 4d49  MM','MINUTE','MI
+000407d0: 4e55 5445 5327 2c27 4d27 5d3a 2077 616e  NUTES','M']: wan
+000407e0: 745f 756e 6974 3d27 4d27 0a20 2020 2020  t_unit='M'.     
+000407f0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00040800: 7570 5f77 616e 745f 756e 6974 2069 6e20  up_want_unit in 
+00040810: 5b27 4441 5927 2c27 4444 272c 2744 4159  ['DAY','DD','DAY
+00040820: 5327 2c27 4427 5d3a 2077 616e 745f 756e  S','D']: want_un
+00040830: 6974 3d27 4427 0a20 2020 2020 2020 2020  it='D'.         
+00040840: 2020 2020 2020 2065 6c69 6620 7570 5f77         elif up_w
+00040850: 616e 745f 756e 6974 2069 6e20 5b27 5945  ant_unit in ['YE
+00040860: 4152 272c 2759 5927 2c27 5945 4152 5327  AR','YY','YEARS'
+00040870: 2c27 5927 5d3a 2077 616e 745f 756e 6974  ,'Y']: want_unit
+00040880: 3d27 5927 0a20 2020 2020 2020 2020 2020  ='Y'.           
+00040890: 2020 2020 2065 6c69 6620 7570 5f77 616e       elif up_wan
+000408a0: 745f 756e 6974 2069 6e20 5b27 5345 4327  t_unit in ['SEC'
+000408b0: 2c27 5353 272c 2753 4543 4f4e 4427 2c27  ,'SS','SECOND','
+000408c0: 5345 434f 4e44 5327 2c27 5327 5d3a 2077  SECONDS','S']: w
+000408d0: 616e 745f 756e 6974 3d27 5327 0a20 2020  ant_unit='S'.   
+000408e0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000408f0: 2020 2020 2020 206d 6f64 653d 2762 7974         mode='byt
+00040900: 6527 0a20 2020 2020 2020 206e 756d 5f75  e'.        num_u
+00040910: 6e69 743d 756e 6974 5b30 5d2e 7570 7065  nit=unit[0].uppe
+00040920: 7228 290a 2020 2020 2020 2020 2354 494d  r().        #TIM
+00040930: 450a 2020 2020 2020 2020 6966 206e 756d  E.        if num
+00040940: 5f75 6e69 7420 3d3d 2027 5327 2061 6e64  _unit == 'S' and
+00040950: 2028 6973 696e 7374 616e 6365 2877 616e   (isinstance(wan
+00040960: 745f 756e 6974 2c73 7472 2920 616e 6420  t_unit,str) and 
+00040970: 7761 6e74 5f75 6e69 7420 616e 6420 7761  want_unit and wa
+00040980: 6e74 5f75 6e69 745b 305d 203d 3d20 2725  nt_unit[0] == '%
+00040990: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+000409a0: 6966 206c 656e 2877 616e 745f 756e 6974  if len(want_unit
+000409b0: 2920 3d3d 2031 3a0a 2020 2020 2020 2020  ) == 1:.        
+000409c0: 2020 2020 2020 2020 7265 7475 726e 2063          return c
+000409d0: 6f6e 7665 7274 5f73 6563 5f74 6f5f 666f  onvert_sec_to_fo
+000409e0: 726d 6174 286e 756d 2c77 616e 745f 666f  rmat(num,want_fo
+000409f0: 726d 6174 3d22 2559 2025 6d20 2564 2025  rmat="%Y %m %d %
+00040a00: 483a 254d 3a25 5322 290a 2020 2020 2020  H:%M:%S").      
+00040a10: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00040a20: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00040a30: 726e 2063 6f6e 7665 7274 5f73 6563 5f74  rn convert_sec_t
+00040a40: 6f5f 666f 726d 6174 286e 756d 2c77 616e  o_format(num,wan
+00040a50: 745f 666f 726d 6174 3d77 616e 745f 756e  t_format=want_un
+00040a60: 6974 290a 2020 2020 2020 2020 2354 494d  it).        #TIM
+00040a70: 450a 2020 2020 2020 2020 656c 6966 2028  E.        elif (
+00040a80: 6d6f 6465 203d 3d20 2774 696d 6527 2061  mode == 'time' a
+00040a90: 6e64 2077 616e 745f 756e 6974 2069 6e20  nd want_unit in 
+00040aa0: 5b27 5927 2c27 4427 2c27 4827 2c27 4d27  ['Y','D','H','M'
+00040ab0: 2c27 5327 2c4e 6f6e 655d 2920 6f72 2028  ,'S',None]) or (
+00040ac0: 6e75 6d5f 756e 6974 2069 6e20 5b27 5927  num_unit in ['Y'
+00040ad0: 2c27 4427 2c27 4827 2c27 4d27 2c27 5327  ,'D','H','M','S'
+00040ae0: 5d20 616e 6420 7761 6e74 5f75 6e69 7420  ] and want_unit 
+00040af0: 696e 205b 2759 272c 2744 272c 2748 272c  in ['Y','D','H',
+00040b00: 274d 272c 2753 275d 293a 0a20 2020 2020  'M','S']):.     
+00040b10: 2020 2020 2020 206f 6f3d 636f 6e76 6572         oo=conver
+00040b20: 745f 696e 745f 7469 6d65 5f74 6f5f 7968  t_int_time_to_yh
+00040b30: 6d73 286e 756d 2c75 6e69 743d 6e75 6d5f  ms(num,unit=num_
+00040b40: 756e 6974 2c77 616e 743d 7761 6e74 5f75  unit,want=want_u
+00040b50: 6e69 7429 0a20 2020 2020 2020 2020 2020  nit).           
+00040b60: 2069 6620 696e 745f 6f75 743a 0a20 2020   if int_out:.   
+00040b70: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00040b80: 7761 6e74 5f75 6e69 743a 2320 616e 6420  want_unit:# and 
+00040b90: 7761 6e74 5f75 6e69 7420 696e 206f 6f3a  want_unit in oo:
+00040ba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00040bb0: 2020 2020 2072 6574 7572 6e20 6f6f 2e67       return oo.g
+00040bc0: 6574 2877 616e 745f 756e 6974 2c30 290a  et(want_unit,0).
+00040bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040be0: 656c 7365 3a20 2320 6966 2077 616e 7420  else: # if want 
+00040bf0: 756e 6974 2069 7320 4e6f 6e65 2074 6865  unit is None the
+00040c00: 6e20 7265 7475 726e 206e 756d 0a20 2020  n return num.   
+00040c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040c20: 2072 6574 7572 6e20 6e75 6d0a 2020 2020   return num.    
+00040c30: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00040c40: 2020 2020 2020 2020 2020 2020 2020 6f3d                o=
+00040c50: 2727 0a20 2020 2020 2020 2020 2020 2020  ''.             
+00040c60: 2020 2066 6f72 2069 2069 6e20 5b27 5927     for i in ['Y'
+00040c70: 2c27 4427 2c27 4827 2c27 4d27 2c27 5327  ,'D','H','M','S'
+00040c80: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+00040c90: 2020 2020 2020 2069 6620 6920 696e 206f         if i in o
+00040ca0: 6f3a 0a20 2020 2020 2020 2020 2020 2020  o:.             
+00040cb0: 2020 2020 2020 2020 2020 2069 6620 6f3a             if o:
+00040cc0: 206f 3d6f 2b27 207b 7d7b 7d27 2e66 6f72   o=o+' {}{}'.for
+00040cd0: 6d61 7428 6f6f 5b69 5d2c 6929 0a20 2020  mat(oo[i],i).   
+00040ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040cf0: 2020 2020 2065 6c73 653a 206f 3d27 7b7d       else: o='{}
+00040d00: 7b7d 272e 666f 726d 6174 286f 6f5b 695d  {}'.format(oo[i]
+00040d10: 2c69 290a 2020 2020 2020 2020 2020 2020  ,i).            
+00040d20: 2020 2020 7265 7475 726e 206f 0a20 2020      return o.   
+00040d30: 2020 2020 2023 4279 7465 0a20 2020 2020       #Byte.     
+00040d40: 2020 2065 6c69 6620 6e75 6d5f 756e 6974     elif num_unit
+00040d50: 2069 6e20 5b22 4222 2c22 4b22 2c22 4d22   in ["B","K","M"
+00040d60: 2c22 4722 2c22 5422 2c22 5022 5d20 616e  ,"G","T","P"] an
+00040d70: 6420 7761 6e74 5f75 6e69 7420 696e 205b  d want_unit in [
+00040d80: 2242 222c 224b 222c 224d 222c 2247 222c  "B","K","M","G",
+00040d90: 2254 222c 2250 222c 4e6f 6e65 5d3a 0a20  "T","P",None]:. 
+00040da0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00040db0: 6e20 6875 6d61 6e5f 6279 7465 286e 756d  n human_byte(num
+00040dc0: 2c20 756e 6974 3d6e 756d 5f75 6e69 742c  , unit=num_unit,
+00040dd0: 2077 756e 6974 3d77 616e 745f 756e 6974   wunit=want_unit
+00040de0: 2c20 696e 745f 6f75 743d 696e 745f 6f75  , int_out=int_ou
+00040df0: 7429 0a20 2020 2072 6574 7572 6e20 2755  t).    return 'U
+00040e00: 6e6b 6e6f 776e 2055 6e69 7428 7b7d 202d  nknown Unit({} -
+00040e10: 3e20 7b7d 2927 2e66 6f72 6d61 7428 756e  > {})'.format(un
+00040e20: 6974 2c77 616e 745f 756e 6974 290a 0a63  it,want_unit)..c
+00040e30: 6c61 7373 2046 494c 455f 573a 0a20 2020  lass FILE_W:.   
+00040e40: 2027 2727 0a20 2020 204e 6577 2064 6573   '''.    New des
+00040e50: 6967 6e20 746f 2073 696d 706c 650a 2020  ign to simple.  
+00040e60: 2020 7375 625f 6469 7220 203a 2054 7275    sub_dir  : Tru
+00040e70: 6520 2847 6574 2066 696c 6573 2069 6e20  e (Get files in 
+00040e80: 7265 6375 7269 6e67 2064 6972 6563 746f  recuring directo
+00040e90: 7279 290a 2020 2020 6461 7461 2020 2020  ry).    data    
+00040ea0: 203a 2054 7275 6520 2847 6574 2046 696c   : True (Get Fil
+00040eb0: 6520 4461 7461 290a 2020 2020 6d64 3573  e Data).    md5s
+00040ec0: 756d 2020 203a 2054 7275 6520 2847 6574  um   : True (Get
+00040ed0: 2046 696c 6527 7320 4d44 3520 5355 4d29   File's MD5 SUM)
+00040ee0: 0a20 2020 206c 696e 6b32 6669 6c65 3a20  .    link2file: 
+00040ef0: 5472 7565 2028 4d61 6b65 2061 2072 6561  True (Make a rea
+00040f00: 6c20 6669 6c65 2069 6e73 7465 6164 2073  l file instead s
+00040f10: 796d 2d6c 696e 6b20 6669 6c65 290a 2020  ym-link file).  
+00040f20: 2020 6669 6c65 2066 6f72 6d61 7420 3a20    file format : 
+00040f30: 7369 7a65 2028 3133 292b 6865 6164 287b  size (13)+head({
+00040f40: 7d29 2b64 6174 6128 5b2c 2c2c 2c2c 5d29  })+data([,,,,,])
+00040f50: 0a20 2020 2068 6561 643a 207b 696e 666f  .    head: {info
+00040f60: 7b7d 2c64 6174 615f 6964 3a78 7d0a 2020  {},data_id:x}.  
+00040f70: 2020 2727 270a 2020 2020 6465 6620 5f5f    '''.    def __
+00040f80: 696e 6974 5f5f 2873 656c 662c 2a69 6e70  init__(self,*inp
+00040f90: 2c2a 2a6f 7074 7329 3a0a 2020 2020 2020  ,**opts):.      
+00040fa0: 2020 7365 6c66 2e72 6f6f 745f 7061 7468    self.root_path
+00040fb0: 3d6f 7074 732e 6765 7428 2772 6f6f 745f  =opts.get('root_
+00040fc0: 7061 7468 272c 4e6f 6e65 290a 2020 2020  path',None).    
+00040fd0: 2020 2020 6966 2049 734e 6f6e 6528 7365      if IsNone(se
+00040fe0: 6c66 2e72 6f6f 745f 7061 7468 293a 2073  lf.root_path): s
+00040ff0: 656c 662e 726f 6f74 5f70 6174 683d 5061  elf.root_path=Pa
+00041000: 7468 2829 0a20 2020 2020 2020 2073 656c  th().        sel
+00041010: 662e 696e 666f 3d6f 7074 732e 6765 7428  f.info=opts.get(
+00041020: 2769 6e66 6f27 2c6f 7074 732e 6765 7428  'info',opts.get(
+00041030: 2764 6174 6127 2c7b 7d29 290a 0a20 2020  'data',{}))..   
+00041040: 2064 6566 204c 6973 7428 7365 6c66 2c6e   def List(self,n
+00041050: 616d 652c 7375 625f 6469 723d 4661 6c73  ame,sub_dir=Fals
+00041060: 652c 6469 726e 616d 653d 4661 6c73 652c  e,dirname=False,
+00041070: 6465 6661 756c 743d 5b5d 293a 0a20 2020  default=[]):.   
+00041080: 2020 2020 2023 6765 7420 6469 7265 6374       #get direct
+00041090: 6f72 7920 616e 6420 6561 6368 2064 6972  ory and each dir
+000410a0: 6563 746f 7269 6573 2720 6669 6c65 206c  ectories' file l
+000410b0: 6973 740a 2020 2020 2020 2020 6966 2069  ist.        if i
+000410c0: 7369 6e73 7461 6e63 6528 6e61 6d65 2c73  sinstance(name,s
+000410d0: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+000410e0: 2069 6620 6e61 6d65 5b30 5d20 3d3d 2027   if name[0] == '
+000410f0: 2f27 3a20 2023 2053 7461 7274 2066 726f  /':  # Start fro
+00041100: 6d20 726f 6f74 2070 6174 680a 2020 2020  m root path.    
+00041110: 2020 2020 2020 2020 2020 2020 6966 206f              if o
+00041120: 732e 7061 7468 2e69 7366 696c 6528 6e61  s.path.isfile(na
+00041130: 6d65 2920 6f72 206f 732e 7061 7468 2e69  me) or os.path.i
+00041140: 736c 696e 6b28 6e61 6d65 293a 2072 6574  slink(name): ret
+00041150: 7572 6e20 6f73 2e70 6174 682e 6469 726e  urn os.path.dirn
+00041160: 616d 6528 6e61 6d65 292c 5b6f 732e 7061  ame(name),[os.pa
+00041170: 7468 2e62 6173 656e 616d 6528 6e61 6d65  th.basename(name
+00041180: 295d 0a20 2020 2020 2020 2020 2020 2020  )].             
+00041190: 2020 2069 6620 6f73 2e70 6174 682e 6973     if os.path.is
+000411a0: 6469 7228 6e61 6d65 293a 0a20 2020 2020  dir(name):.     
+000411b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000411c0: 6620 7375 625f 6469 723a 0a20 2020 2020  f sub_dir:.     
 000411d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000411e0: 2020 2020 7274 2e65 7874 656e 6428 6f73      rt.extend(os
-000411f0: 2e70 6174 682e 6a6f 696e 2862 6173 655b  .path.join(base[
-00041200: 323a 5d2c 2066 2920 666f 7220 6620 696e  2:], f) for f in
-00041210: 2066 696c 6573 290a 2020 2020 2020 2020   files).        
-00041220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041230: 6f73 2e63 6864 6972 2870 7764 290a 2020  os.chdir(pwd).  
+000411e0: 2020 2072 7420 3d20 5b5d 0a20 2020 2020     rt = [].     
+000411f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041200: 2020 2070 7764 3d6f 732e 6765 7463 7764     pwd=os.getcwd
+00041210: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
+00041220: 2020 2020 2020 2020 2020 206f 732e 6368             os.ch
+00041230: 6469 7228 6e61 6d65 290a 2020 2020 2020  dir(name).      
 00041240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041250: 2020 2020 2020 7265 7475 726e 2050 6174        return Pat
-00041260: 6828 6e61 6d65 292c 7274 0a20 2020 2020  h(name),rt.     
-00041270: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00041280: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00041290: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-000412a0: 7572 6e20 5061 7468 286e 616d 6529 2c5b  urn Path(name),[
-000412b0: 6620 666f 7220 6620 696e 206f 732e 6c69  f for f in os.li
-000412c0: 7374 6469 7228 6e61 6d65 295d 0a20 2020  stdir(name)].   
-000412d0: 2020 2020 2020 2020 2065 6c69 6620 7365           elif se
-000412e0: 6c66 2e72 6f6f 745f 7061 7468 3a20 2320  lf.root_path: # 
-000412f0: 7374 6172 7420 6672 6f6d 2064 6566 696e  start from defin
-00041300: 6564 2072 6f6f 7420 7061 7468 0a20 2020  ed root path.   
-00041310: 2020 2020 2020 2020 2020 2020 2063 686b               chk
-00041320: 5f70 6174 683d 5061 7468 2873 656c 662e  _path=Path(self.
-00041330: 726f 6f74 5f70 6174 682c 6e61 6d65 290a  root_path,name).
-00041340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041350: 6966 206f 732e 7061 7468 2e69 7366 696c  if os.path.isfil
-00041360: 6528 6368 6b5f 7061 7468 2920 6f72 206f  e(chk_path) or o
-00041370: 732e 7061 7468 2e69 736c 696e 6b28 6368  s.path.islink(ch
-00041380: 6b5f 7061 7468 293a 2072 6574 7572 6e20  k_path): return 
-00041390: 5061 7468 2873 656c 662e 726f 6f74 5f70  Path(self.root_p
-000413a0: 6174 6829 2c5b 6e61 6d65 5d0a 2020 2020  ath),[name].    
-000413b0: 2020 2020 2020 2020 2020 2020 6966 206f              if o
-000413c0: 732e 7061 7468 2e69 7364 6972 2863 686b  s.path.isdir(chk
-000413d0: 5f70 6174 6829 3a0a 2020 2020 2020 2020  _path):.        
-000413e0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-000413f0: 7562 5f64 6972 3a0a 2020 2020 2020 2020  ub_dir:.        
-00041400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041410: 7274 203d 205b 5d0a 2020 2020 2020 2020  rt = [].        
-00041420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041430: 7077 643d 6f73 2e67 6574 6377 6428 290a  pwd=os.getcwd().
-00041440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041450: 2020 2020 2020 2020 6f73 2e63 6864 6972          os.chdir
-00041460: 2873 656c 662e 726f 6f74 5f70 6174 6829  (self.root_path)
-00041470: 2023 2047 6f69 6e67 2074 6f20 6465 6669   # Going to defi
-00041480: 6e65 6420 726f 6f74 2070 6174 680a 2020  ned root path.  
-00041490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000414a0: 2020 2020 2020 2320 4765 7420 7265 6375        # Get recu
-000414b0: 7269 6e67 2066 696c 6520 6c69 7374 206f  ring file list o
-000414c0: 6620 7468 6520 6e61 6d65 2028 7768 656e  f the name (when
-000414d0: 2063 7572 7265 6e74 2064 6972 2074 6865   current dir the
-000414e0: 6e20 272e 2729 0a20 2020 2020 2020 2020  n '.').         
-000414f0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00041500: 6f72 2062 6173 652c 2064 6972 732c 2066  or base, dirs, f
-00041510: 696c 6573 2069 6e20 6f73 2e77 616c 6b28  iles in os.walk(
-00041520: 6e61 6d65 293a 0a20 2020 2020 2020 2020  name):.         
-00041530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041540: 2020 2069 6620 6469 726e 616d 653a 2072     if dirname: r
-00041550: 742e 6578 7465 6e64 286f 732e 7061 7468  t.extend(os.path
-00041560: 2e6a 6f69 6e28 6261 7365 5b32 3a5d 2c20  .join(base[2:], 
-00041570: 6429 2066 6f72 2064 2069 6e20 6469 7273  d) for d in dirs
-00041580: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00041590: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-000415a0: 2e65 7874 656e 6428 6f73 2e70 6174 682e  .extend(os.path.
-000415b0: 6a6f 696e 2862 6173 655b 323a 5d2c 2066  join(base[2:], f
-000415c0: 2920 666f 7220 6620 696e 2066 696c 6573  ) for f in files
-000415d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000415e0: 2020 2020 2020 2020 2020 6f73 2e63 6864            os.chd
-000415f0: 6972 2870 7764 2920 2320 7265 636f 7665  ir(pwd) # recove
-00041600: 7220 746f 2074 6865 206f 7269 6769 6e61  r to the origina
-00041610: 6c20 7061 7468 0a20 2020 2020 2020 2020  l path.         
-00041620: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00041630: 6574 7572 6e20 5061 7468 2873 656c 662e  eturn Path(self.
-00041640: 726f 6f74 5f70 6174 6829 2c72 740a 2020  root_path),rt.  
-00041650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041660: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00041670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041680: 6966 206e 616d 6520 3d3d 2027 2e27 3a20  if name == '.': 
-00041690: 6e61 6d65 3d27 270a 2020 2020 2020 2020  name=''.        
-000416a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000416b0: 7265 7475 726e 2050 6174 6828 7365 6c66  return Path(self
-000416c0: 2e72 6f6f 745f 7061 7468 292c 5b6f 732e  .root_path),[os.
-000416d0: 7061 7468 2e6a 6f69 6e28 6e61 6d65 2c66  path.join(name,f
-000416e0: 2920 666f 7220 6620 696e 206f 732e 6c69  ) for f in os.li
-000416f0: 7374 6469 7228 277b 7d2f 7b7d 272e 666f  stdir('{}/{}'.fo
-00041700: 726d 6174 2873 656c 662e 726f 6f74 5f70  rmat(self.root_p
-00041710: 6174 682c 6e61 6d65 2929 5d0a 2020 2020  ath,name))].    
-00041720: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
-00041730: 6c74 2c5b 5d0a 0a20 2020 2064 6566 2046  lt,[]..    def F
-00041740: 696c 654e 616d 6528 7365 6c66 2c66 696c  ileName(self,fil
-00041750: 656e 616d 6529 3a0a 2020 2020 2020 2020  ename):.        
-00041760: 6966 2069 7369 6e73 7461 6e63 6528 6669  if isinstance(fi
-00041770: 6c65 6e61 6d65 2c73 7472 293a 0a20 2020  lename,str):.   
-00041780: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
-00041790: 655f 696e 666f 3d6f 732e 7061 7468 2e62  e_info=os.path.b
-000417a0: 6173 656e 616d 6528 6669 6c65 6e61 6d65  asename(filename
-000417b0: 292e 7370 6c69 7428 272e 2729 0a20 2020  ).split('.').   
-000417c0: 2020 2020 2020 2020 2069 6620 2774 6172           if 'tar
-000417d0: 2720 696e 2066 696c 656e 616d 655f 696e  ' in filename_in
-000417e0: 666f 3a0a 2020 2020 2020 2020 2020 2020  fo:.            
-000417f0: 2020 2020 6964 783d 6669 6c65 6e61 6d65      idx=filename
-00041800: 5f69 6e66 6f2e 696e 6465 7828 2774 6172  _info.index('tar
-00041810: 2729 0a20 2020 2020 2020 2020 2020 2065  ').            e
-00041820: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00041830: 2020 2020 2069 6478 3d2d 310a 2020 2020       idx=-1.    
-00041840: 2020 2020 2020 2020 7265 7475 726e 204a          return J
-00041850: 6f69 6e28 6669 6c65 6e61 6d65 5f69 6e66  oin(filename_inf
-00041860: 6f5b 3a69 6478 5d2c 7379 6d62 6f6c 3d27  o[:idx],symbol='
-00041870: 2e27 292c 4a6f 696e 2866 696c 656e 616d  .'),Join(filenam
-00041880: 655f 696e 666f 5b69 6478 3a5d 2c73 796d  e_info[idx:],sym
-00041890: 626f 6c3d 272e 2729 0a20 2020 2020 2020  bol='.').       
-000418a0: 2072 6574 7572 6e20 4e6f 6e65 2c4e 6f6e   return None,Non
-000418b0: 650a 0a20 2020 2064 6566 2046 696c 6554  e..    def FileT
-000418c0: 7970 6528 7365 6c66 2c66 696c 656e 616d  ype(self,filenam
-000418d0: 652c 6465 6661 756c 743d 4661 6c73 6529  e,default=False)
-000418e0: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
-000418f0: 2069 7369 6e73 7461 6e63 6528 6669 6c65   isinstance(file
-00041900: 6e61 6d65 2c73 7472 2920 6f72 206e 6f74  name,str) or not
-00041910: 206f 732e 7061 7468 2e69 7366 696c 6528   os.path.isfile(
-00041920: 6669 6c65 6e61 6d65 293a 2072 6574 7572  filename): retur
-00041930: 6e20 6465 6661 756c 740a 2020 2020 2020  n default.      
-00041940: 2020 496d 706f 7274 2827 696d 706f 7274    Import('import
-00041950: 206d 6167 6963 2729 0a20 2020 2020 2020   magic').       
-00041960: 2066 3d6f 7065 6e28 6669 6c65 6e61 6d65   f=open(filename
-00041970: 2c27 7262 2729 0a20 2020 2020 2020 2061  ,'rb').        a
-00041980: 613d 6d61 6769 632e 6672 6f6d 5f62 7566  a=magic.from_buf
-00041990: 6665 7228 662e 7265 6164 2832 3034 3829  fer(f.read(2048)
-000419a0: 290a 2020 2020 2020 2020 662e 636c 6f73  ).        f.clos
-000419b0: 6528 290a 2020 2020 2020 2020 6966 2069  e().        if i
-000419c0: 7369 6e73 7461 6e63 6528 6161 2c73 7472  sinstance(aa,str
-000419d0: 293a 2072 6574 7572 6e20 6161 2e73 706c  ): return aa.spl
-000419e0: 6974 2829 5b30 5d2e 6c6f 7765 7228 290a  it()[0].lower().
-000419f0: 2020 2020 2020 2020 7265 7475 726e 2027          return '
-00041a00: 756e 6b6e 6f77 6e27 0a0a 2020 2020 6465  unknown'..    de
-00041a10: 6620 4669 6c65 496e 666f 2873 656c 662c  f FileInfo(self,
-00041a20: 6669 6c65 6e61 6d65 2c72 6f6f 7473 3d4e  filename,roots=N
-00041a30: 6f6e 652c 5f74 7970 653d 4e6f 6e65 2c65  one,_type=None,e
-00041a40: 7869 7374 3d4e 6f6e 6529 3a0a 2020 2020  xist=None):.    
-00041a50: 2020 2020 6966 2073 656c 662e 696e 666f      if self.info
-00041a60: 3a20 2320 6672 6f6d 2069 6e73 6964 6520  : # from inside 
-00041a70: 6461 7461 0a20 2020 2020 2020 2020 2020  data.           
-00041a80: 2069 6620 4973 4e6f 6e65 2872 6f6f 7473   if IsNone(roots
-00041a90: 293a 2072 6f6f 7473 3d73 656c 662e 4669  ): roots=self.Fi
-00041aa0: 6e64 5250 2829 0a20 2020 2020 2020 2020  ndRP().         
-00041ab0: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-00041ac0: 616e 6365 2866 696c 656e 616d 652c 7374  ance(filename,st
-00041ad0: 7229 206f 7220 4973 4e6f 6e65 2866 696c  r) or IsNone(fil
-00041ae0: 656e 616d 6529 3a20 7265 7475 726e 2046  ename): return F
-00041af0: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
-00041b00: 2066 6f72 2072 6f6f 7420 696e 2072 6f6f   for root in roo
-00041b10: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
-00041b20: 2020 2020 7274 3d73 656c 662e 696e 666f      rt=self.info
-00041b30: 2e67 6574 2872 6f6f 742c 7b7d 290a 2020  .get(root,{}).  
-00041b40: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00041b50: 7220 6969 2069 6e20 6669 6c65 6e61 6d65  r ii in filename
-00041b60: 2e73 706c 6974 2827 2f27 293a 0a20 2020  .split('/'):.   
-00041b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041b80: 2069 6620 6969 206e 6f74 2069 6e20 7274   if ii not in rt
-00041b90: 3a20 7265 7475 726e 2046 616c 7365 0a20  : return False. 
-00041ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041bb0: 2020 2072 743d 7274 5b69 695d 0a20 2020     rt=rt[ii].   
-00041bc0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00041bd0: 7572 6e20 7274 2e67 6574 2827 2069 2027  urn rt.get(' i '
-00041be0: 2c46 616c 7365 290a 0a20 2020 2020 2020  ,False)..       
-00041bf0: 2023 2066 726f 6d20 7265 616c 2066 696c   # from real fil
-00041c00: 650a 2020 2020 2020 2020 7274 3d7b 7d0a  e.        rt={}.
-00041c10: 2020 2020 2020 2020 6966 2065 7869 7374          if exist
-00041c20: 2069 7320 4661 6c73 653a 2072 6574 7572   is False: retur
-00041c30: 6e20 7b27 6578 6973 7427 3a46 616c 7365  n {'exist':False
-00041c40: 7d0a 2020 2020 2020 2020 7274 5b27 6e61  }.        rt['na
-00041c50: 6d65 275d 2c72 745b 2765 7874 275d 3d73  me'],rt['ext']=s
-00041c60: 656c 662e 4669 6c65 4e61 6d65 2866 696c  elf.FileName(fil
-00041c70: 656e 616d 6529 0a20 2020 2020 2020 2069  ename).        i
-00041c80: 6620 6f73 2e70 6174 682e 6578 6973 7473  f os.path.exists
-00041c90: 2866 696c 656e 616d 6529 3a0a 2020 2020  (filename):.    
-00041ca0: 2020 2020 2020 2020 7374 6174 653d 6f73          state=os
-00041cb0: 2e73 7461 7428 6669 6c65 6e61 6d65 290a  .stat(filename).
-00041cc0: 2020 2020 2020 2020 2020 2020 7274 5b27              rt['
-00041cd0: 6578 6973 7427 5d3d 5472 7565 0a20 2020  exist']=True.   
-00041ce0: 2020 2020 2020 2020 2072 745b 2773 697a           rt['siz
-00041cf0: 6527 5d3d 7374 6174 652e 7374 5f73 697a  e']=state.st_siz
-00041d00: 650a 2020 2020 2020 2020 2020 2020 7274  e.            rt
-00041d10: 5b27 6d6f 6465 275d 3d6f 6374 2873 7461  ['mode']=oct(sta
-00041d20: 7465 2e73 745f 6d6f 6465 295b 2d34 3a5d  te.st_mode)[-4:]
-00041d30: 0a20 2020 2020 2020 2020 2020 2072 745b  .            rt[
-00041d40: 2761 7469 6d65 275d 3d73 7461 7465 2e73  'atime']=state.s
-00041d50: 745f 6174 696d 650a 2020 2020 2020 2020  t_atime.        
-00041d60: 2020 2020 7274 5b27 6d74 696d 6527 5d3d      rt['mtime']=
-00041d70: 7374 6174 652e 7374 5f6d 7469 6d65 0a20  state.st_mtime. 
-00041d80: 2020 2020 2020 2020 2020 2072 745b 2763             rt['c
-00041d90: 7469 6d65 275d 3d73 7461 7465 2e73 745f  time']=state.st_
-00041da0: 6374 696d 650a 2020 2020 2020 2020 2020  ctime.          
-00041db0: 2020 7274 5b27 6769 6427 5d3d 7374 6174    rt['gid']=stat
-00041dc0: 652e 7374 5f67 6964 0a20 2020 2020 2020  e.st_gid.       
-00041dd0: 2020 2020 2072 745b 2775 6964 275d 3d73       rt['uid']=s
-00041de0: 7461 7465 2e73 745f 7569 640a 2020 2020  tate.st_uid.    
-00041df0: 2020 2020 2020 2020 6966 2049 734e 6f6e          if IsNon
-00041e00: 6528 5f74 7970 6529 3a0a 2020 2020 2020  e(_type):.      
-00041e10: 2020 2020 2020 2020 2020 7274 5b27 7479            rt['ty
-00041e20: 7065 275d 3d5f 7479 7065 0a20 2020 2020  pe']=_type.     
-00041e30: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00041e40: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00041e50: 6f73 2e70 6174 682e 6973 6c69 6e6b 2866  os.path.islink(f
-00041e60: 696c 656e 616d 6529 3a0a 2020 2020 2020  ilename):.      
-00041e70: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-00041e80: 5b27 7479 7065 275d 3d27 6c69 6e6b 270a  ['type']='link'.
-00041e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041ea0: 656c 6966 206f 732e 7061 7468 2e69 7364  elif os.path.isd
-00041eb0: 6972 2866 696c 656e 616d 6529 3a0a 2020  ir(filename):.  
-00041ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041ed0: 2020 7274 5b27 7479 7065 275d 3d27 6469    rt['type']='di
-00041ee0: 7227 0a20 2020 2020 2020 2020 2020 2020  r'.             
-00041ef0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00041f00: 2020 2020 2020 2020 2020 2020 2072 745b               rt[
-00041f10: 2774 7970 6527 5d3d 7365 6c66 2e46 696c  'type']=self.Fil
-00041f20: 6554 7970 6528 6669 6c65 6e61 6d65 290a  eType(filename).
-00041f30: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00041f40: 2020 2020 2020 2020 2020 7274 5b27 6578            rt['ex
-00041f50: 6973 7427 5d3d 4661 6c73 650a 2020 2020  ist']=False.    
-00041f60: 2020 2020 7265 7475 726e 2072 740a 0a20      return rt.. 
-00041f70: 2020 2064 6566 2043 6450 6174 6828 7365     def CdPath(se
-00041f80: 6c66 2c62 6173 652c 7061 7468 293a 0a20  lf,base,path):. 
-00041f90: 2020 2020 2020 2072 743d 6261 7365 0a20         rt=base. 
-00041fa0: 2020 2020 2020 2066 6f72 2069 6920 696e         for ii in
-00041fb0: 2070 6174 682e 7370 6c69 7428 272f 2729   path.split('/')
-00041fc0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00041fd0: 2069 6920 6e6f 7420 696e 2072 743a 2072   ii not in rt: r
-00041fe0: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
-00041ff0: 2020 2020 2020 2020 7274 3d72 745b 6969          rt=rt[ii
-00042000: 5d0a 2020 2020 2020 2020 7265 7475 726e  ].        return
-00042010: 2072 740a 0a20 2020 2064 6566 204d 6b49   rt..    def MkI
-00042020: 6e66 6f28 7365 6c66 2c72 742c 6669 6c65  nfo(self,rt,file
-00042030: 6e61 6d65 3d4e 6f6e 652c 2a2a 6f70 7473  name=None,**opts
-00042040: 293a 0a20 2020 2020 2020 2069 6620 2720  ):.        if ' 
-00042050: 6920 2720 6e6f 7420 696e 2072 743a 2072  i ' not in rt: r
-00042060: 745b 2720 6920 275d 3d7b 7d0a 2020 2020  t[' i ']={}.    
-00042070: 2020 2020 7274 5b27 2069 2027 5d3d 7365      rt[' i ']=se
-00042080: 6c66 2e46 696c 6549 6e66 6f28 6669 6c65  lf.FileInfo(file
-00042090: 6e61 6d65 2c5f 7479 7065 3d6f 7074 732e  name,_type=opts.
-000420a0: 6765 7428 2774 7970 6527 292c 6578 6973  get('type'),exis
-000420b0: 743d 6f70 7473 2e67 6574 2827 6578 6973  t=opts.get('exis
-000420c0: 7427 2929 0a20 2020 2020 2020 2069 6620  t')).        if 
-000420d0: 6f70 7473 3a20 7274 5b27 2069 2027 5d2e  opts: rt[' i '].
-000420e0: 7570 6461 7465 286f 7074 7329 0a0a 2020  update(opts)..  
-000420f0: 2020 6465 6620 4765 7428 7365 6c66 2c2a    def Get(self,*
-00042100: 6669 6c65 6e61 6d65 732c 2a2a 6f70 7473  filenames,**opts
-00042110: 293a 0a20 2020 2020 2020 2062 6173 653d  ):.        base=
-00042120: 7b7d 0a20 2020 2020 2020 2066 696c 656c  {}.        filel
-00042130: 6973 743d 7b7d 0a20 2020 2020 2020 2064  ist={}.        d
-00042140: 6566 204d 6b50 6174 6828 6261 7365 2c70  ef MkPath(base,p
-00042150: 6174 682c 726f 6f74 5f70 6174 6829 3a0a  ath,root_path):.
-00042160: 2020 2020 2020 2020 2020 2020 7274 3d62              rt=b
-00042170: 6173 650a 2020 2020 2020 2020 2020 2020  ase.            
-00042180: 6368 6b5f 6469 723d 277b 7d27 2e66 6f72  chk_dir='{}'.for
-00042190: 6d61 7428 726f 6f74 5f70 6174 6829 0a20  mat(root_path). 
-000421a0: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-000421b0: 6920 696e 2070 6174 682e 7370 6c69 7428  i in path.split(
-000421c0: 272f 2729 3a0a 2020 2020 2020 2020 2020  '/'):.          
-000421d0: 2020 2020 2020 6966 2069 693a 0a20 2020        if ii:.   
-000421e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000421f0: 2063 686b 5f64 6972 3d50 6174 6828 6368   chk_dir=Path(ch
-00042200: 6b5f 6469 722c 6969 290a 2020 2020 2020  k_dir,ii).      
-00042210: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00042220: 2069 6920 6e6f 7420 696e 2072 743a 0a20   ii not in rt:. 
-00042230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042240: 2020 2020 2020 2072 745b 6969 5d3d 7b7d         rt[ii]={}
-00042250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00042260: 2020 2020 2020 2020 2069 6620 6f73 2e70           if os.p
-00042270: 6174 682e 6973 6469 7228 6368 6b5f 6469  ath.isdir(chk_di
-00042280: 7229 3a20 7365 6c66 2e4d 6b49 6e66 6f28  r): self.MkInfo(
-00042290: 7274 5b69 695d 2c63 686b 5f64 6972 2c74  rt[ii],chk_dir,t
-000422a0: 7970 653d 2764 6972 2729 0a20 2020 2020  ype='dir').     
-000422b0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000422c0: 743d 7274 5b69 695d 0a20 2020 2020 2020  t=rt[ii].       
-000422d0: 2020 2020 2072 6574 7572 6e20 7274 0a0a       return rt..
-000422e0: 2020 2020 2020 2020 6465 6620 5f47 6574          def _Get
-000422f0: 5f28 726f 6f74 5f70 6174 682c 2a66 696c  _(root_path,*fil
-00042300: 656e 616d 6573 2c2a 2a6f 7074 7329 3a0a  enames,**opts):.
-00042310: 2020 2020 2020 2020 2020 2020 6461 7461              data
-00042320: 3d6f 7074 732e 6765 7428 2764 6174 6127  =opts.get('data'
-00042330: 2c46 616c 7365 290a 2020 2020 2020 2020  ,False).        
-00042340: 2020 2020 6d64 3573 756d 3d6f 7074 732e      md5sum=opts.
-00042350: 6765 7428 276d 6435 7375 6d27 2c46 616c  get('md5sum',Fal
-00042360: 7365 290a 2020 2020 2020 2020 2020 2020  se).            
-00042370: 6c69 6e6b 3266 696c 653d 6f70 7473 2e67  link2file=opts.g
-00042380: 6574 2827 6c69 6e6b 3266 696c 6527 2c46  et('link2file',F
-00042390: 616c 7365 290a 0a20 2020 2020 2020 2020  alse)..         
-000423a0: 2020 2066 6f72 2066 696c 656e 616d 6520     for filename 
-000423b0: 696e 2066 696c 656e 616d 6573 3a0a 2020  in filenames:.  
-000423c0: 2020 2020 2020 2020 2020 2020 2020 7466                tf
-000423d0: 696c 656e 616d 653d 5061 7468 2872 6f6f  ilename=Path(roo
-000423e0: 745f 7061 7468 2c66 696c 656e 616d 6529  t_path,filename)
-000423f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00042400: 2069 6620 6f73 2e70 6174 682e 6578 6973   if os.path.exis
-00042410: 7473 2874 6669 6c65 6e61 6d65 293a 0a20  ts(tfilename):. 
-00042420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042430: 2020 2072 743d 4d6b 5061 7468 2862 6173     rt=MkPath(bas
-00042440: 652c 6669 6c65 6e61 6d65 2c72 6f6f 745f  e,filename,root_
-00042450: 7061 7468 290a 2020 2020 2020 2020 2020  path).          
-00042460: 2020 2020 2020 2020 2020 6966 206f 732e            if os.
-00042470: 7061 7468 2e69 736c 696e 6b28 7466 696c  path.islink(tfil
-00042480: 656e 616d 6529 3a20 2320 6974 2069 7320  ename): # it is 
-00042490: 6120 4c69 6e6b 2046 696c 650a 2020 2020  a Link File.    
-000424a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000424b0: 2020 2020 6966 206f 732e 7061 7468 2e69      if os.path.i
-000424c0: 7366 696c 6528 6669 6c65 6e61 6d65 293a  sfile(filename):
-000424d0: 2023 2069 7420 6973 2061 2046 696c 650a   # it is a File.
-000424e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000424f0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00042500: 696e 6b32 6669 6c65 3a0a 2020 2020 2020  ink2file:.      
-00042510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042520: 2020 2020 2020 2020 2020 5f6d 6435 3d4e            _md5=N
-00042530: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-00042540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042550: 2020 2020 6966 2064 6174 6120 6f72 206d      if data or m
-00042560: 6435 7375 6d3a 2023 204d 4435 5355 4d20  d5sum: # MD5SUM 
-00042570: 6f72 2044 6174 610a 2020 2020 2020 2020  or Data.        
-00042580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042590: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-000425a0: 6461 7461 3d73 656c 662e 5277 2874 6669  data=self.Rw(tfi
-000425b0: 6c65 6e61 6d65 2c6f 7574 3d27 6279 7465  lename,out='byte
-000425c0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-000425d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000425e0: 2020 2020 2020 2069 6620 6669 6c65 6461         if fileda
-000425f0: 7461 5b30 5d3a 0a20 2020 2020 2020 2020  ta[0]:.         
-00042600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042610: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00042620: 6620 6461 7461 3a20 7274 5b27 6461 7461  f data: rt['data
-00042630: 275d 3d66 696c 6564 6174 615b 315d 0a20  ']=filedata[1]. 
+00041250: 2020 666f 7220 6261 7365 2c20 6469 7273    for base, dirs
+00041260: 2c20 6669 6c65 7320 696e 206f 732e 7761  , files in os.wa
+00041270: 6c6b 2827 2e27 293a 0a20 2020 2020 2020  lk('.'):.       
+00041280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041290: 2020 2020 2069 6620 6469 726e 616d 653a       if dirname:
+000412a0: 2072 742e 6578 7465 6e64 286f 732e 7061   rt.extend(os.pa
+000412b0: 7468 2e6a 6f69 6e28 6261 7365 5b32 3a5d  th.join(base[2:]
+000412c0: 2c20 6429 2066 6f72 2064 2069 6e20 6469  , d) for d in di
+000412d0: 7273 290a 2020 2020 2020 2020 2020 2020  rs).            
+000412e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000412f0: 7274 2e65 7874 656e 6428 6f73 2e70 6174  rt.extend(os.pat
+00041300: 682e 6a6f 696e 2862 6173 655b 323a 5d2c  h.join(base[2:],
+00041310: 2066 2920 666f 7220 6620 696e 2066 696c   f) for f in fil
+00041320: 6573 290a 2020 2020 2020 2020 2020 2020  es).            
+00041330: 2020 2020 2020 2020 2020 2020 6f73 2e63              os.c
+00041340: 6864 6972 2870 7764 290a 2020 2020 2020  hdir(pwd).      
+00041350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041360: 2020 7265 7475 726e 2050 6174 6828 6e61    return Path(na
+00041370: 6d65 292c 7274 0a20 2020 2020 2020 2020  me),rt.         
+00041380: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00041390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000413a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000413b0: 5061 7468 286e 616d 6529 2c5b 6620 666f  Path(name),[f fo
+000413c0: 7220 6620 696e 206f 732e 6c69 7374 6469  r f in os.listdi
+000413d0: 7228 6e61 6d65 295d 0a20 2020 2020 2020  r(name)].       
+000413e0: 2020 2020 2065 6c69 6620 7365 6c66 2e72       elif self.r
+000413f0: 6f6f 745f 7061 7468 3a20 2320 7374 6172  oot_path: # star
+00041400: 7420 6672 6f6d 2064 6566 696e 6564 2072  t from defined r
+00041410: 6f6f 7420 7061 7468 0a20 2020 2020 2020  oot path.       
+00041420: 2020 2020 2020 2020 2063 686b 5f70 6174           chk_pat
+00041430: 683d 5061 7468 2873 656c 662e 726f 6f74  h=Path(self.root
+00041440: 5f70 6174 682c 6e61 6d65 290a 2020 2020  _path,name).    
+00041450: 2020 2020 2020 2020 2020 2020 6966 206f              if o
+00041460: 732e 7061 7468 2e69 7366 696c 6528 6368  s.path.isfile(ch
+00041470: 6b5f 7061 7468 2920 6f72 206f 732e 7061  k_path) or os.pa
+00041480: 7468 2e69 736c 696e 6b28 6368 6b5f 7061  th.islink(chk_pa
+00041490: 7468 293a 2072 6574 7572 6e20 5061 7468  th): return Path
+000414a0: 2873 656c 662e 726f 6f74 5f70 6174 6829  (self.root_path)
+000414b0: 2c5b 6e61 6d65 5d0a 2020 2020 2020 2020  ,[name].        
+000414c0: 2020 2020 2020 2020 6966 206f 732e 7061          if os.pa
+000414d0: 7468 2e69 7364 6972 2863 686b 5f70 6174  th.isdir(chk_pat
+000414e0: 6829 3a0a 2020 2020 2020 2020 2020 2020  h):.            
+000414f0: 2020 2020 2020 2020 6966 2073 7562 5f64          if sub_d
+00041500: 6972 3a0a 2020 2020 2020 2020 2020 2020  ir:.            
+00041510: 2020 2020 2020 2020 2020 2020 7274 203d              rt =
+00041520: 205b 5d0a 2020 2020 2020 2020 2020 2020   [].            
+00041530: 2020 2020 2020 2020 2020 2020 7077 643d              pwd=
+00041540: 6f73 2e67 6574 6377 6428 290a 2020 2020  os.getcwd().    
+00041550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041560: 2020 2020 6f73 2e63 6864 6972 2873 656c      os.chdir(sel
+00041570: 662e 726f 6f74 5f70 6174 6829 2023 2047  f.root_path) # G
+00041580: 6f69 6e67 2074 6f20 6465 6669 6e65 6420  oing to defined 
+00041590: 726f 6f74 2070 6174 680a 2020 2020 2020  root path.      
+000415a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000415b0: 2020 2320 4765 7420 7265 6375 7269 6e67    # Get recuring
+000415c0: 2066 696c 6520 6c69 7374 206f 6620 7468   file list of th
+000415d0: 6520 6e61 6d65 2028 7768 656e 2063 7572  e name (when cur
+000415e0: 7265 6e74 2064 6972 2074 6865 6e20 272e  rent dir then '.
+000415f0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+00041600: 2020 2020 2020 2020 2020 2066 6f72 2062             for b
+00041610: 6173 652c 2064 6972 732c 2066 696c 6573  ase, dirs, files
+00041620: 2069 6e20 6f73 2e77 616c 6b28 6e61 6d65   in os.walk(name
+00041630: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00041640: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00041650: 6620 6469 726e 616d 653a 2072 742e 6578  f dirname: rt.ex
+00041660: 7465 6e64 286f 732e 7061 7468 2e6a 6f69  tend(os.path.joi
+00041670: 6e28 6261 7365 5b32 3a5d 2c20 6429 2066  n(base[2:], d) f
+00041680: 6f72 2064 2069 6e20 6469 7273 290a 2020  or d in dirs).  
+00041690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000416a0: 2020 2020 2020 2020 2020 7274 2e65 7874            rt.ext
+000416b0: 656e 6428 6f73 2e70 6174 682e 6a6f 696e  end(os.path.join
+000416c0: 2862 6173 655b 323a 5d2c 2066 2920 666f  (base[2:], f) fo
+000416d0: 7220 6620 696e 2066 696c 6573 290a 2020  r f in files).  
+000416e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000416f0: 2020 2020 2020 6f73 2e63 6864 6972 2870        os.chdir(p
+00041700: 7764 2920 2320 7265 636f 7665 7220 746f  wd) # recover to
+00041710: 2074 6865 206f 7269 6769 6e61 6c20 7061   the original pa
+00041720: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
+00041730: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00041740: 6e20 5061 7468 2873 656c 662e 726f 6f74  n Path(self.root
+00041750: 5f70 6174 6829 2c72 740a 2020 2020 2020  _path),rt.      
+00041760: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00041770: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00041780: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00041790: 616d 6520 3d3d 2027 2e27 3a20 6e61 6d65  ame == '.': name
+000417a0: 3d27 270a 2020 2020 2020 2020 2020 2020  =''.            
+000417b0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000417c0: 726e 2050 6174 6828 7365 6c66 2e72 6f6f  rn Path(self.roo
+000417d0: 745f 7061 7468 292c 5b6f 732e 7061 7468  t_path),[os.path
+000417e0: 2e6a 6f69 6e28 6e61 6d65 2c66 2920 666f  .join(name,f) fo
+000417f0: 7220 6620 696e 206f 732e 6c69 7374 6469  r f in os.listdi
+00041800: 7228 277b 7d2f 7b7d 272e 666f 726d 6174  r('{}/{}'.format
+00041810: 2873 656c 662e 726f 6f74 5f70 6174 682c  (self.root_path,
+00041820: 6e61 6d65 2929 5d0a 2020 2020 2020 2020  name))].        
+00041830: 7265 7475 726e 2064 6566 6175 6c74 2c5b  return default,[
+00041840: 5d0a 0a20 2020 2064 6566 2046 696c 654e  ]..    def FileN
+00041850: 616d 6528 7365 6c66 2c66 696c 656e 616d  ame(self,filenam
+00041860: 6529 3a0a 2020 2020 2020 2020 6966 2069  e):.        if i
+00041870: 7369 6e73 7461 6e63 6528 6669 6c65 6e61  sinstance(filena
+00041880: 6d65 2c73 7472 293a 0a20 2020 2020 2020  me,str):.       
+00041890: 2020 2020 2066 696c 656e 616d 655f 696e       filename_in
+000418a0: 666f 3d6f 732e 7061 7468 2e62 6173 656e  fo=os.path.basen
+000418b0: 616d 6528 6669 6c65 6e61 6d65 292e 7370  ame(filename).sp
+000418c0: 6c69 7428 272e 2729 0a20 2020 2020 2020  lit('.').       
+000418d0: 2020 2020 2069 6620 2774 6172 2720 696e       if 'tar' in
+000418e0: 2066 696c 656e 616d 655f 696e 666f 3a0a   filename_info:.
+000418f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041900: 6964 783d 6669 6c65 6e61 6d65 5f69 6e66  idx=filename_inf
+00041910: 6f2e 696e 6465 7828 2774 6172 2729 0a20  o.index('tar'). 
+00041920: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00041930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00041940: 2069 6478 3d2d 310a 2020 2020 2020 2020   idx=-1.        
+00041950: 2020 2020 7265 7475 726e 204a 6f69 6e28      return Join(
+00041960: 6669 6c65 6e61 6d65 5f69 6e66 6f5b 3a69  filename_info[:i
+00041970: 6478 5d2c 7379 6d62 6f6c 3d27 2e27 292c  dx],symbol='.'),
+00041980: 4a6f 696e 2866 696c 656e 616d 655f 696e  Join(filename_in
+00041990: 666f 5b69 6478 3a5d 2c73 796d 626f 6c3d  fo[idx:],symbol=
+000419a0: 272e 2729 0a20 2020 2020 2020 2072 6574  '.').        ret
+000419b0: 7572 6e20 4e6f 6e65 2c4e 6f6e 650a 0a20  urn None,None.. 
+000419c0: 2020 2064 6566 2046 696c 6554 7970 6528     def FileType(
+000419d0: 7365 6c66 2c66 696c 656e 616d 652c 6465  self,filename,de
+000419e0: 6661 756c 743d 4661 6c73 6529 3a0a 2020  fault=False):.  
+000419f0: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
+00041a00: 6e73 7461 6e63 6528 6669 6c65 6e61 6d65  nstance(filename
+00041a10: 2c73 7472 2920 6f72 206e 6f74 206f 732e  ,str) or not os.
+00041a20: 7061 7468 2e69 7366 696c 6528 6669 6c65  path.isfile(file
+00041a30: 6e61 6d65 293a 2072 6574 7572 6e20 6465  name): return de
+00041a40: 6661 756c 740a 2020 2020 2020 2020 496d  fault.        Im
+00041a50: 706f 7274 2827 696d 706f 7274 206d 6167  port('import mag
+00041a60: 6963 2729 0a20 2020 2020 2020 2066 3d6f  ic').        f=o
+00041a70: 7065 6e28 6669 6c65 6e61 6d65 2c27 7262  pen(filename,'rb
+00041a80: 2729 0a20 2020 2020 2020 2061 613d 6d61  ').        aa=ma
+00041a90: 6769 632e 6672 6f6d 5f62 7566 6665 7228  gic.from_buffer(
+00041aa0: 662e 7265 6164 2832 3034 3829 290a 2020  f.read(2048)).  
+00041ab0: 2020 2020 2020 662e 636c 6f73 6528 290a        f.close().
+00041ac0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00041ad0: 7461 6e63 6528 6161 2c73 7472 293a 2072  tance(aa,str): r
+00041ae0: 6574 7572 6e20 6161 2e73 706c 6974 2829  eturn aa.split()
+00041af0: 5b30 5d2e 6c6f 7765 7228 290a 2020 2020  [0].lower().    
+00041b00: 2020 2020 7265 7475 726e 2027 756e 6b6e      return 'unkn
+00041b10: 6f77 6e27 0a0a 2020 2020 6465 6620 4669  own'..    def Fi
+00041b20: 6c65 496e 666f 2873 656c 662c 6669 6c65  leInfo(self,file
+00041b30: 6e61 6d65 2c72 6f6f 7473 3d4e 6f6e 652c  name,roots=None,
+00041b40: 5f74 7970 653d 4e6f 6e65 2c65 7869 7374  _type=None,exist
+00041b50: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+00041b60: 6966 2073 656c 662e 696e 666f 3a20 2320  if self.info: # 
+00041b70: 6672 6f6d 2069 6e73 6964 6520 6461 7461  from inside data
+00041b80: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00041b90: 4973 4e6f 6e65 2872 6f6f 7473 293a 2072  IsNone(roots): r
+00041ba0: 6f6f 7473 3d73 656c 662e 4669 6e64 5250  oots=self.FindRP
+00041bb0: 2829 0a20 2020 2020 2020 2020 2020 2069  ().            i
+00041bc0: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+00041bd0: 2866 696c 656e 616d 652c 7374 7229 206f  (filename,str) o
+00041be0: 7220 4973 4e6f 6e65 2866 696c 656e 616d  r IsNone(filenam
+00041bf0: 6529 3a20 7265 7475 726e 2046 616c 7365  e): return False
+00041c00: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00041c10: 2072 6f6f 7420 696e 2072 6f6f 7473 3a0a   root in roots:.
+00041c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041c30: 7274 3d73 656c 662e 696e 666f 2e67 6574  rt=self.info.get
+00041c40: 2872 6f6f 742c 7b7d 290a 2020 2020 2020  (root,{}).      
+00041c50: 2020 2020 2020 2020 2020 666f 7220 6969            for ii
+00041c60: 2069 6e20 6669 6c65 6e61 6d65 2e73 706c   in filename.spl
+00041c70: 6974 2827 2f27 293a 0a20 2020 2020 2020  it('/'):.       
+00041c80: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00041c90: 6969 206e 6f74 2069 6e20 7274 3a20 7265  ii not in rt: re
+00041ca0: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
+00041cb0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00041cc0: 743d 7274 5b69 695d 0a20 2020 2020 2020  t=rt[ii].       
+00041cd0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00041ce0: 7274 2e67 6574 2827 2069 2027 2c46 616c  rt.get(' i ',Fal
+00041cf0: 7365 290a 0a20 2020 2020 2020 2023 2066  se)..        # f
+00041d00: 726f 6d20 7265 616c 2066 696c 650a 2020  rom real file.  
+00041d10: 2020 2020 2020 7274 3d7b 7d0a 2020 2020        rt={}.    
+00041d20: 2020 2020 6966 2065 7869 7374 2069 7320      if exist is 
+00041d30: 4661 6c73 653a 2072 6574 7572 6e20 7b27  False: return {'
+00041d40: 6578 6973 7427 3a46 616c 7365 7d0a 2020  exist':False}.  
+00041d50: 2020 2020 2020 7274 5b27 6e61 6d65 275d        rt['name']
+00041d60: 2c72 745b 2765 7874 275d 3d73 656c 662e  ,rt['ext']=self.
+00041d70: 4669 6c65 4e61 6d65 2866 696c 656e 616d  FileName(filenam
+00041d80: 6529 0a20 2020 2020 2020 2069 6620 6f73  e).        if os
+00041d90: 2e70 6174 682e 6578 6973 7473 2866 696c  .path.exists(fil
+00041da0: 656e 616d 6529 3a0a 2020 2020 2020 2020  ename):.        
+00041db0: 2020 2020 7374 6174 653d 6f73 2e73 7461      state=os.sta
+00041dc0: 7428 6669 6c65 6e61 6d65 290a 2020 2020  t(filename).    
+00041dd0: 2020 2020 2020 2020 7274 5b27 6578 6973          rt['exis
+00041de0: 7427 5d3d 5472 7565 0a20 2020 2020 2020  t']=True.       
+00041df0: 2020 2020 2072 745b 2773 697a 6527 5d3d       rt['size']=
+00041e00: 7374 6174 652e 7374 5f73 697a 650a 2020  state.st_size.  
+00041e10: 2020 2020 2020 2020 2020 7274 5b27 6d6f            rt['mo
+00041e20: 6465 275d 3d6f 6374 2873 7461 7465 2e73  de']=oct(state.s
+00041e30: 745f 6d6f 6465 295b 2d34 3a5d 0a20 2020  t_mode)[-4:].   
+00041e40: 2020 2020 2020 2020 2072 745b 2761 7469           rt['ati
+00041e50: 6d65 275d 3d73 7461 7465 2e73 745f 6174  me']=state.st_at
+00041e60: 696d 650a 2020 2020 2020 2020 2020 2020  ime.            
+00041e70: 7274 5b27 6d74 696d 6527 5d3d 7374 6174  rt['mtime']=stat
+00041e80: 652e 7374 5f6d 7469 6d65 0a20 2020 2020  e.st_mtime.     
+00041e90: 2020 2020 2020 2072 745b 2763 7469 6d65         rt['ctime
+00041ea0: 275d 3d73 7461 7465 2e73 745f 6374 696d  ']=state.st_ctim
+00041eb0: 650a 2020 2020 2020 2020 2020 2020 7274  e.            rt
+00041ec0: 5b27 6769 6427 5d3d 7374 6174 652e 7374  ['gid']=state.st
+00041ed0: 5f67 6964 0a20 2020 2020 2020 2020 2020  _gid.           
+00041ee0: 2072 745b 2775 6964 275d 3d73 7461 7465   rt['uid']=state
+00041ef0: 2e73 745f 7569 640a 2020 2020 2020 2020  .st_uid.        
+00041f00: 2020 2020 6966 2049 734e 6f6e 6528 5f74      if IsNone(_t
+00041f10: 7970 6529 3a0a 2020 2020 2020 2020 2020  ype):.          
+00041f20: 2020 2020 2020 7274 5b27 7479 7065 275d        rt['type']
+00041f30: 3d5f 7479 7065 0a20 2020 2020 2020 2020  =_type.         
+00041f40: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00041f50: 2020 2020 2020 2020 2069 6620 6f73 2e70           if os.p
+00041f60: 6174 682e 6973 6c69 6e6b 2866 696c 656e  ath.islink(filen
+00041f70: 616d 6529 3a0a 2020 2020 2020 2020 2020  ame):.          
+00041f80: 2020 2020 2020 2020 2020 7274 5b27 7479            rt['ty
+00041f90: 7065 275d 3d27 6c69 6e6b 270a 2020 2020  pe']='link'.    
+00041fa0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00041fb0: 206f 732e 7061 7468 2e69 7364 6972 2866   os.path.isdir(f
+00041fc0: 696c 656e 616d 6529 3a0a 2020 2020 2020  ilename):.      
+00041fd0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+00041fe0: 5b27 7479 7065 275d 3d27 6469 7227 0a20  ['type']='dir'. 
+00041ff0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00042000: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00042010: 2020 2020 2020 2020 2072 745b 2774 7970           rt['typ
+00042020: 6527 5d3d 7365 6c66 2e46 696c 6554 7970  e']=self.FileTyp
+00042030: 6528 6669 6c65 6e61 6d65 290a 2020 2020  e(filename).    
+00042040: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00042050: 2020 2020 2020 7274 5b27 6578 6973 7427        rt['exist'
+00042060: 5d3d 4661 6c73 650a 2020 2020 2020 2020  ]=False.        
+00042070: 7265 7475 726e 2072 740a 0a20 2020 2064  return rt..    d
+00042080: 6566 2043 6450 6174 6828 7365 6c66 2c62  ef CdPath(self,b
+00042090: 6173 652c 7061 7468 293a 0a20 2020 2020  ase,path):.     
+000420a0: 2020 2072 743d 6261 7365 0a20 2020 2020     rt=base.     
+000420b0: 2020 2066 6f72 2069 6920 696e 2070 6174     for ii in pat
+000420c0: 682e 7370 6c69 7428 272f 2729 3a0a 2020  h.split('/'):.  
+000420d0: 2020 2020 2020 2020 2020 6966 2069 6920            if ii 
+000420e0: 6e6f 7420 696e 2072 743a 2072 6574 7572  not in rt: retur
+000420f0: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
+00042100: 2020 2020 7274 3d72 745b 6969 5d0a 2020      rt=rt[ii].  
+00042110: 2020 2020 2020 7265 7475 726e 2072 740a        return rt.
+00042120: 0a20 2020 2064 6566 204d 6b49 6e66 6f28  .    def MkInfo(
+00042130: 7365 6c66 2c72 742c 6669 6c65 6e61 6d65  self,rt,filename
+00042140: 3d4e 6f6e 652c 2a2a 6f70 7473 293a 0a20  =None,**opts):. 
+00042150: 2020 2020 2020 2069 6620 2720 6920 2720         if ' i ' 
+00042160: 6e6f 7420 696e 2072 743a 2072 745b 2720  not in rt: rt[' 
+00042170: 6920 275d 3d7b 7d0a 2020 2020 2020 2020  i ']={}.        
+00042180: 7274 5b27 2069 2027 5d3d 7365 6c66 2e46  rt[' i ']=self.F
+00042190: 696c 6549 6e66 6f28 6669 6c65 6e61 6d65  ileInfo(filename
+000421a0: 2c5f 7479 7065 3d6f 7074 732e 6765 7428  ,_type=opts.get(
+000421b0: 2774 7970 6527 292c 6578 6973 743d 6f70  'type'),exist=op
+000421c0: 7473 2e67 6574 2827 6578 6973 7427 2929  ts.get('exist'))
+000421d0: 0a20 2020 2020 2020 2069 6620 6f70 7473  .        if opts
+000421e0: 3a20 7274 5b27 2069 2027 5d2e 7570 6461  : rt[' i '].upda
+000421f0: 7465 286f 7074 7329 0a0a 2020 2020 6465  te(opts)..    de
+00042200: 6620 4765 7428 7365 6c66 2c2a 6669 6c65  f Get(self,*file
+00042210: 6e61 6d65 732c 2a2a 6f70 7473 293a 0a20  names,**opts):. 
+00042220: 2020 2020 2020 2062 6173 653d 7b7d 0a20         base={}. 
+00042230: 2020 2020 2020 2066 696c 656c 6973 743d         filelist=
+00042240: 7b7d 0a20 2020 2020 2020 2064 6566 204d  {}.        def M
+00042250: 6b50 6174 6828 6261 7365 2c70 6174 682c  kPath(base,path,
+00042260: 726f 6f74 5f70 6174 6829 3a0a 2020 2020  root_path):.    
+00042270: 2020 2020 2020 2020 7274 3d62 6173 650a          rt=base.
+00042280: 2020 2020 2020 2020 2020 2020 6368 6b5f              chk_
+00042290: 6469 723d 277b 7d27 2e66 6f72 6d61 7428  dir='{}'.format(
+000422a0: 726f 6f74 5f70 6174 6829 0a20 2020 2020  root_path).     
+000422b0: 2020 2020 2020 2066 6f72 2069 6920 696e         for ii in
+000422c0: 2070 6174 682e 7370 6c69 7428 272f 2729   path.split('/')
+000422d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000422e0: 2020 6966 2069 693a 0a20 2020 2020 2020    if ii:.       
+000422f0: 2020 2020 2020 2020 2020 2020 2063 686b               chk
+00042300: 5f64 6972 3d50 6174 6828 6368 6b5f 6469  _dir=Path(chk_di
+00042310: 722c 6969 290a 2020 2020 2020 2020 2020  r,ii).          
+00042320: 2020 2020 2020 2020 2020 6966 2069 6920            if ii 
+00042330: 6e6f 7420 696e 2072 743a 0a20 2020 2020  not in rt:.     
+00042340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042350: 2020 2072 745b 6969 5d3d 7b7d 0a20 2020     rt[ii]={}.   
+00042360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042370: 2020 2020 2069 6620 6f73 2e70 6174 682e       if os.path.
+00042380: 6973 6469 7228 6368 6b5f 6469 7229 3a20  isdir(chk_dir): 
+00042390: 7365 6c66 2e4d 6b49 6e66 6f28 7274 5b69  self.MkInfo(rt[i
+000423a0: 695d 2c63 686b 5f64 6972 2c74 7970 653d  i],chk_dir,type=
+000423b0: 2764 6972 2729 0a20 2020 2020 2020 2020  'dir').         
+000423c0: 2020 2020 2020 2020 2020 2072 743d 7274             rt=rt
+000423d0: 5b69 695d 0a20 2020 2020 2020 2020 2020  [ii].           
+000423e0: 2072 6574 7572 6e20 7274 0a0a 2020 2020   return rt..    
+000423f0: 2020 2020 6465 6620 5f47 6574 5f28 726f      def _Get_(ro
+00042400: 6f74 5f70 6174 682c 2a66 696c 656e 616d  ot_path,*filenam
+00042410: 6573 2c2a 2a6f 7074 7329 3a0a 2020 2020  es,**opts):.    
+00042420: 2020 2020 2020 2020 6461 7461 3d6f 7074          data=opt
+00042430: 732e 6765 7428 2764 6174 6127 2c46 616c  s.get('data',Fal
+00042440: 7365 290a 2020 2020 2020 2020 2020 2020  se).            
+00042450: 6d64 3573 756d 3d6f 7074 732e 6765 7428  md5sum=opts.get(
+00042460: 276d 6435 7375 6d27 2c46 616c 7365 290a  'md5sum',False).
+00042470: 2020 2020 2020 2020 2020 2020 6c69 6e6b              link
+00042480: 3266 696c 653d 6f70 7473 2e67 6574 2827  2file=opts.get('
+00042490: 6c69 6e6b 3266 696c 6527 2c46 616c 7365  link2file',False
+000424a0: 290a 0a20 2020 2020 2020 2020 2020 2066  )..            f
+000424b0: 6f72 2066 696c 656e 616d 6520 696e 2066  or filename in f
+000424c0: 696c 656e 616d 6573 3a0a 2020 2020 2020  ilenames:.      
+000424d0: 2020 2020 2020 2020 2020 7466 696c 656e            tfilen
+000424e0: 616d 653d 5061 7468 2872 6f6f 745f 7061  ame=Path(root_pa
+000424f0: 7468 2c66 696c 656e 616d 6529 0a20 2020  th,filename).   
+00042500: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00042510: 6f73 2e70 6174 682e 6578 6973 7473 2874  os.path.exists(t
+00042520: 6669 6c65 6e61 6d65 293a 0a20 2020 2020  filename):.     
+00042530: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00042540: 743d 4d6b 5061 7468 2862 6173 652c 6669  t=MkPath(base,fi
+00042550: 6c65 6e61 6d65 2c72 6f6f 745f 7061 7468  lename,root_path
+00042560: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00042570: 2020 2020 2020 6966 206f 732e 7061 7468        if os.path
+00042580: 2e69 736c 696e 6b28 7466 696c 656e 616d  .islink(tfilenam
+00042590: 6529 3a20 2320 6974 2069 7320 6120 4c69  e): # it is a Li
+000425a0: 6e6b 2046 696c 650a 2020 2020 2020 2020  nk File.        
+000425b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000425c0: 6966 206f 732e 7061 7468 2e69 7366 696c  if os.path.isfil
+000425d0: 6528 6669 6c65 6e61 6d65 293a 2023 2069  e(filename): # i
+000425e0: 7420 6973 2061 2046 696c 650a 2020 2020  t is a File.    
+000425f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042600: 2020 2020 2020 2020 6966 206c 696e 6b32          if link2
+00042610: 6669 6c65 3a0a 2020 2020 2020 2020 2020  file:.          
+00042620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042630: 2020 2020 2020 5f6d 6435 3d4e 6f6e 650a        _md5=None.
 00042640: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00042650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042660: 2020 2020 2020 2069 6620 6d64 3573 756d         if md5sum
-00042670: 3a20 5f6d 6435 3d6d 6435 2866 696c 6564  : _md5=md5(filed
-00042680: 6174 615b 315d 290a 2020 2020 2020 2020  ata[1]).        
+00042660: 6966 2064 6174 6120 6f72 206d 6435 7375  if data or md5su
+00042670: 6d3a 2023 204d 4435 5355 4d20 6f72 2044  m: # MD5SUM or D
+00042680: 6174 610a 2020 2020 2020 2020 2020 2020  ata.            
 00042690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000426a0: 2020 2020 2020 2020 7365 6c66 2e4d 6b49          self.MkI
-000426b0: 6e66 6f28 7274 2c66 696c 656e 616d 653d  nfo(rt,filename=
-000426c0: 7466 696c 656e 616d 652c 7479 7065 3d73  tfilename,type=s
-000426d0: 656c 662e 4669 6c65 5479 7065 2874 6669  elf.FileType(tfi
-000426e0: 6c65 6e61 6d65 292c 6d64 353d 5f6d 6435  lename),md5=_md5
-000426f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00042700: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+000426a0: 2020 2020 2020 2020 6669 6c65 6461 7461          filedata
+000426b0: 3d73 656c 662e 5277 2874 6669 6c65 6e61  =self.Rw(tfilena
+000426c0: 6d65 2c6f 7574 3d27 6279 7465 2729 0a20  me,out='byte'). 
+000426d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000426e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000426f0: 2020 2069 6620 6669 6c65 6461 7461 5b30     if filedata[0
+00042700: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
 00042710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042720: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00042730: 2e4d 6b49 6e66 6f28 7274 2c66 696c 656e  .MkInfo(rt,filen
-00042740: 616d 653d 7466 696c 656e 616d 652c 7479  ame=tfilename,ty
-00042750: 7065 3d27 6c69 6e6b 272c 6465 7374 3d6f  pe='link',dest=o
-00042760: 732e 7265 6164 6c69 6e6b 2874 6669 6c65  s.readlink(tfile
-00042770: 6e61 6d65 2929 0a20 2020 2020 2020 2020  name)).         
-00042780: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00042790: 6f73 2e70 6174 682e 6973 6469 7228 7466  os.path.isdir(tf
-000427a0: 696c 656e 616d 6529 3a20 2320 6974 2069  ilename): # it i
-000427b0: 7320 6120 6469 7265 6374 6f72 790a 2020  s a directory.  
-000427c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000427d0: 2020 2020 2020 7365 6c66 2e4d 6b49 6e66        self.MkInf
-000427e0: 6f28 7274 2c74 6669 6c65 6e61 6d65 2c74  o(rt,tfilename,t
-000427f0: 7970 653d 2764 6972 2729 0a20 2020 2020  ype='dir').     
-00042800: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00042810: 6c69 6620 6f73 2e70 6174 682e 6973 6669  lif os.path.isfi
-00042820: 6c65 2874 6669 6c65 6e61 6d65 293a 2023  le(tfilename): #
-00042830: 2069 7420 6973 2061 2046 696c 650a 2020   it is a File.  
-00042840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042850: 2020 2020 2020 5f6d 6435 3d4e 6f6e 650a        _md5=None.
-00042860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042870: 2020 2020 2020 2020 6966 2064 6174 6120          if data 
-00042880: 6f72 206d 6435 7375 6d3a 2023 204d 4435  or md5sum: # MD5
-00042890: 5355 4d20 6f72 2044 6174 610a 2020 2020  SUM or Data.    
-000428a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000428b0: 2020 2020 2020 2020 6669 6c65 6461 7461          filedata
-000428c0: 3d73 656c 662e 5277 2874 6669 6c65 6e61  =self.Rw(tfilena
-000428d0: 6d65 2c6f 7574 3d27 6279 7465 2729 0a20  me,out='byte'). 
-000428e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000428f0: 2020 2020 2020 2020 2020 2069 6620 6669             if fi
-00042900: 6c65 6461 7461 5b30 5d3a 0a20 2020 2020  ledata[0]:.     
-00042910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042920: 2020 2020 2020 2020 2020 2069 6620 6461             if da
-00042930: 7461 3a20 7274 5b27 6461 7461 275d 3d66  ta: rt['data']=f
-00042940: 696c 6564 6174 615b 315d 0a20 2020 2020  iledata[1].     
+00042720: 2020 2020 2020 2020 2020 2069 6620 6461             if da
+00042730: 7461 3a20 7274 5b27 6461 7461 275d 3d66  ta: rt['data']=f
+00042740: 696c 6564 6174 615b 315d 0a20 2020 2020  iledata[1].     
+00042750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042770: 2020 2069 6620 6d64 3573 756d 3a20 5f6d     if md5sum: _m
+00042780: 6435 3d6d 6435 2866 696c 6564 6174 615b  d5=md5(filedata[
+00042790: 315d 290a 2020 2020 2020 2020 2020 2020  1]).            
+000427a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000427b0: 2020 2020 7365 6c66 2e4d 6b49 6e66 6f28      self.MkInfo(
+000427c0: 7274 2c66 696c 656e 616d 653d 7466 696c  rt,filename=tfil
+000427d0: 656e 616d 652c 7479 7065 3d73 656c 662e  ename,type=self.
+000427e0: 4669 6c65 5479 7065 2874 6669 6c65 6e61  FileType(tfilena
+000427f0: 6d65 292c 6d64 353d 5f6d 6435 290a 2020  me),md5=_md5).  
+00042800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042810: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00042820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042830: 2020 2020 2020 2020 7365 6c66 2e4d 6b49          self.MkI
+00042840: 6e66 6f28 7274 2c66 696c 656e 616d 653d  nfo(rt,filename=
+00042850: 7466 696c 656e 616d 652c 7479 7065 3d27  tfilename,type='
+00042860: 6c69 6e6b 272c 6465 7374 3d6f 732e 7265  link',dest=os.re
+00042870: 6164 6c69 6e6b 2874 6669 6c65 6e61 6d65  adlink(tfilename
+00042880: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+00042890: 2020 2020 2020 2065 6c69 6620 6f73 2e70         elif os.p
+000428a0: 6174 682e 6973 6469 7228 7466 696c 656e  ath.isdir(tfilen
+000428b0: 616d 6529 3a20 2320 6974 2069 7320 6120  ame): # it is a 
+000428c0: 6469 7265 6374 6f72 790a 2020 2020 2020  directory.      
+000428d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000428e0: 2020 7365 6c66 2e4d 6b49 6e66 6f28 7274    self.MkInfo(rt
+000428f0: 2c74 6669 6c65 6e61 6d65 2c74 7970 653d  ,tfilename,type=
+00042900: 2764 6972 2729 0a20 2020 2020 2020 2020  'dir').         
+00042910: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00042920: 6f73 2e70 6174 682e 6973 6669 6c65 2874  os.path.isfile(t
+00042930: 6669 6c65 6e61 6d65 293a 2023 2069 7420  filename): # it 
+00042940: 6973 2061 2046 696c 650a 2020 2020 2020  is a File.      
 00042950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042960: 2020 2020 2020 2020 2020 2069 6620 6d64             if md
-00042970: 3573 756d 3a20 5f6d 6435 3d6d 6435 2866  5sum: _md5=md5(f
-00042980: 696c 6564 6174 615b 315d 290a 2020 2020  iledata[1]).    
-00042990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000429a0: 2020 2020 7365 6c66 2e4d 6b49 6e66 6f28      self.MkInfo(
-000429b0: 7274 2c66 696c 656e 616d 653d 7466 696c  rt,filename=tfil
-000429c0: 656e 616d 652c 7479 7065 3d73 656c 662e  ename,type=self.
-000429d0: 4669 6c65 5479 7065 2874 6669 6c65 6e61  FileType(tfilena
-000429e0: 6d65 292c 6d64 353d 5f6d 6435 290a 2020  me),md5=_md5).  
-000429f0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00042a00: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00042a10: 2020 2020 2020 2020 7365 6c66 2e4d 6b49          self.MkI
-00042a20: 6e66 6f28 7274 2c66 696c 656e 616d 652c  nfo(rt,filename,
-00042a30: 6578 6973 743d 4661 6c73 6529 0a20 2020  exist=False).   
-00042a40: 2020 2020 2020 2020 2069 6620 6261 7365           if base
-00042a50: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00042a60: 2020 7265 7475 726e 207b 726f 6f74 5f70    return {root_p
-00042a70: 6174 683a 6261 7365 7d0a 2020 2020 2020  ath:base}.      
-00042a80: 2020 2020 2020 7265 7475 726e 207b 7d0a        return {}.
-00042a90: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-00042aa0: 6669 6c65 6e61 6d65 733a 2066 696c 656e  filenames: filen
-00042ab0: 616d 6573 3d5b 272e 275d 0a20 2020 2020  ames=['.'].     
-00042ac0: 2020 2066 6f72 2066 696c 656e 616d 6520     for filename 
-00042ad0: 696e 2066 696c 656e 616d 6573 3a0a 2020  in filenames:.  
-00042ae0: 2020 2020 2020 2020 2020 726f 6f74 5f70            root_p
-00042af0: 6174 682c 666c 6973 743d 7365 6c66 2e4c  ath,flist=self.L
-00042b00: 6973 7428 6669 6c65 6e61 6d65 2c73 7562  ist(filename,sub
-00042b10: 5f64 6972 3d6f 7074 732e 6765 7428 2773  _dir=opts.get('s
-00042b20: 7562 5f64 6972 272c 4661 6c73 6529 2c64  ub_dir',False),d
-00042b30: 6972 6e61 6d65 3d54 7275 6529 0a20 2020  irname=True).   
-00042b40: 2020 2020 2020 2020 2069 6620 726f 6f74           if root
-00042b50: 5f70 6174 6820 6e6f 7420 696e 2066 696c  _path not in fil
-00042b60: 656c 6973 743a 2066 696c 656c 6973 745b  elist: filelist[
-00042b70: 726f 6f74 5f70 6174 685d 3d5b 5d0a 2020  root_path]=[].  
-00042b80: 2020 2020 2020 2020 2020 6669 6c65 6c69            fileli
-00042b90: 7374 5b72 6f6f 745f 7061 7468 5d3d 6669  st[root_path]=fi
-00042ba0: 6c65 6c69 7374 5b72 6f6f 745f 7061 7468  lelist[root_path
-00042bb0: 5d2b 666c 6973 740a 0a20 2020 2020 2020  ]+flist..       
-00042bc0: 2066 6f72 2066 6620 696e 2066 696c 656c   for ff in filel
-00042bd0: 6973 743a 0a20 2020 2020 2020 2020 2020  ist:.           
-00042be0: 2073 656c 662e 696e 666f 2e75 7064 6174   self.info.updat
-00042bf0: 6528 5f47 6574 5f28 6666 2c2a 6669 6c65  e(_Get_(ff,*file
-00042c00: 6c69 7374 5b66 665d 2c2a 2a6f 7074 7329  list[ff],**opts)
-00042c10: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00042c20: 2073 656c 660a 0a0a 2020 2020 6465 6620   self...    def 
-00042c30: 4765 744c 6973 7428 7365 6c66 2c64 6972  GetList(self,dir
-00042c40: 6e61 6d65 3d4e 6f6e 652c 726f 6f74 733d  name=None,roots=
-00042c50: 4e6f 6e65 2c66 696c 655f 6f6e 6c79 3d46  None,file_only=F
-00042c60: 616c 7365 2c64 6972 5f6f 6e6c 793d 4661  alse,dir_only=Fa
-00042c70: 6c73 652c 7375 625f 6469 723d 4661 6c73  lse,sub_dir=Fals
-00042c80: 652c 696e 636c 7564 655f 7061 7468 3d46  e,include_path=F
-00042c90: 616c 7365 2c64 6574 6169 6c3d 4661 6c73  alse,detail=Fals
-00042ca0: 6529 3a20 2367 6574 2066 696c 6520 696e  e): #get file in
-00042cb0: 666f 2064 6963 7420 6672 6f6d 2046 696c  fo dict from Fil
-00042cc0: 656e 616d 6520 7061 7468 0a20 2020 2020  ename path.     
-00042cd0: 2020 2069 6620 4973 4e6f 6e65 2872 6f6f     if IsNone(roo
-00042ce0: 7473 293a 2072 6f6f 7473 3d73 656c 662e  ts): roots=self.
-00042cf0: 4669 6e64 5250 2829 0a20 2020 2020 2020  FindRP().       
-00042d00: 2066 6f72 2072 6f6f 7420 696e 2072 6f6f   for root in roo
-00042d10: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
-00042d20: 6966 2069 7369 6e73 7461 6e63 6528 726f  if isinstance(ro
-00042d30: 6f74 2c73 7472 293a 0a20 2020 2020 2020  ot,str):.       
-00042d40: 2020 2020 2020 2020 2072 743d 7365 6c66           rt=self
-00042d50: 2e69 6e66 6f2e 6765 7428 726f 6f74 2c7b  .info.get(root,{
-00042d60: 7d29 0a20 2020 2020 2020 2020 2020 2020  }).             
-00042d70: 2020 2069 6620 6469 726e 616d 6520 616e     if dirname an
-00042d80: 6420 6469 726e 616d 6520 213d 2072 6f6f  d dirname != roo
-00042d90: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-00042da0: 2020 2020 2020 2072 743d 7365 6c66 2e43         rt=self.C
-00042db0: 6450 6174 6828 7274 2c64 6972 6e61 6d65  dPath(rt,dirname
-00042dc0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00042dd0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00042de0: 7274 2c64 6963 7429 3a0a 2020 2020 2020  rt,dict):.      
-00042df0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00042e00: 7220 6969 2069 6e20 7274 3a0a 2020 2020  r ii in rt:.    
-00042e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042e20: 2020 2020 6669 6c65 5f69 6e66 6f3d 7274      file_info=rt
-00042e30: 5b69 695d 2e67 6574 2827 2069 2027 2c7b  [ii].get(' i ',{
-00042e40: 7d29 0a20 2020 2020 2020 2020 2020 2020  }).             
-00042e50: 2020 2020 2020 2020 2020 2064 696e 666f             dinfo
-00042e60: 3d27 270a 2020 2020 2020 2020 2020 2020  =''.            
-00042e70: 2020 2020 2020 2020 2020 2020 6966 2064              if d
-00042e80: 6574 6169 6c3a 0a20 2020 2020 2020 2020  etail:.         
-00042e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042ea0: 2020 2064 696e 666f 3d27 7b7d 207b 7d20     dinfo='{} {} 
-00042eb0: 7b7d 207b 7d20 7b7d 207b 7d20 272e 666f  {} {} {} {} '.fo
-00042ec0: 726d 6174 2866 696c 655f 696e 666f 2e67  rmat(file_info.g
-00042ed0: 6574 2827 6d6f 6465 2729 2c0a 2020 2020  et('mode'),.    
-00042ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042f00: 2020 3120 6966 2066 696c 655f 696e 666f    1 if file_info
-00042f10: 2e67 6574 2827 7479 7065 2729 2021 3d20  .get('type') != 
-00042f20: 2764 6972 2720 656c 7365 206c 656e 2872  'dir' else len(r
-00042f30: 745b 6969 5d29 2d31 2c0a 2020 2020 2020  t[ii])-1,.      
-00042f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042960: 2020 5f6d 6435 3d4e 6f6e 650a 2020 2020    _md5=None.    
+00042970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042980: 2020 2020 6966 2064 6174 6120 6f72 206d      if data or m
+00042990: 6435 7375 6d3a 2023 204d 4435 5355 4d20  d5sum: # MD5SUM 
+000429a0: 6f72 2044 6174 610a 2020 2020 2020 2020  or Data.        
+000429b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000429c0: 2020 2020 6669 6c65 6461 7461 3d73 656c      filedata=sel
+000429d0: 662e 5277 2874 6669 6c65 6e61 6d65 2c6f  f.Rw(tfilename,o
+000429e0: 7574 3d27 6279 7465 2729 0a20 2020 2020  ut='byte').     
+000429f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042a00: 2020 2020 2020 2069 6620 6669 6c65 6461         if fileda
+00042a10: 7461 5b30 5d3a 0a20 2020 2020 2020 2020  ta[0]:.         
+00042a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042a30: 2020 2020 2020 2069 6620 6461 7461 3a20         if data: 
+00042a40: 7274 5b27 6461 7461 275d 3d66 696c 6564  rt['data']=filed
+00042a50: 6174 615b 315d 0a20 2020 2020 2020 2020  ata[1].         
+00042a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042a70: 2020 2020 2020 2069 6620 6d64 3573 756d         if md5sum
+00042a80: 3a20 5f6d 6435 3d6d 6435 2866 696c 6564  : _md5=md5(filed
+00042a90: 6174 615b 315d 290a 2020 2020 2020 2020  ata[1]).        
+00042aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042ab0: 7365 6c66 2e4d 6b49 6e66 6f28 7274 2c66  self.MkInfo(rt,f
+00042ac0: 696c 656e 616d 653d 7466 696c 656e 616d  ilename=tfilenam
+00042ad0: 652c 7479 7065 3d73 656c 662e 4669 6c65  e,type=self.File
+00042ae0: 5479 7065 2874 6669 6c65 6e61 6d65 292c  Type(tfilename),
+00042af0: 6d64 353d 5f6d 6435 290a 2020 2020 2020  md5=_md5).      
+00042b00: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00042b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042b20: 2020 2020 7365 6c66 2e4d 6b49 6e66 6f28      self.MkInfo(
+00042b30: 7274 2c66 696c 656e 616d 652c 6578 6973  rt,filename,exis
+00042b40: 743d 4661 6c73 6529 0a20 2020 2020 2020  t=False).       
+00042b50: 2020 2020 2069 6620 6261 7365 3a0a 2020       if base:.  
+00042b60: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00042b70: 7475 726e 207b 726f 6f74 5f70 6174 683a  turn {root_path:
+00042b80: 6261 7365 7d0a 2020 2020 2020 2020 2020  base}.          
+00042b90: 2020 7265 7475 726e 207b 7d0a 0a20 2020    return {}..   
+00042ba0: 2020 2020 2069 6620 6e6f 7420 6669 6c65       if not file
+00042bb0: 6e61 6d65 733a 2066 696c 656e 616d 6573  names: filenames
+00042bc0: 3d5b 272e 275d 0a20 2020 2020 2020 2066  =['.'].        f
+00042bd0: 6f72 2066 696c 656e 616d 6520 696e 2066  or filename in f
+00042be0: 696c 656e 616d 6573 3a0a 2020 2020 2020  ilenames:.      
+00042bf0: 2020 2020 2020 726f 6f74 5f70 6174 682c        root_path,
+00042c00: 666c 6973 743d 7365 6c66 2e4c 6973 7428  flist=self.List(
+00042c10: 6669 6c65 6e61 6d65 2c73 7562 5f64 6972  filename,sub_dir
+00042c20: 3d6f 7074 732e 6765 7428 2773 7562 5f64  =opts.get('sub_d
+00042c30: 6972 272c 4661 6c73 6529 2c64 6972 6e61  ir',False),dirna
+00042c40: 6d65 3d54 7275 6529 0a20 2020 2020 2020  me=True).       
+00042c50: 2020 2020 2069 6620 726f 6f74 5f70 6174       if root_pat
+00042c60: 6820 6e6f 7420 696e 2066 696c 656c 6973  h not in filelis
+00042c70: 743a 2066 696c 656c 6973 745b 726f 6f74  t: filelist[root
+00042c80: 5f70 6174 685d 3d5b 5d0a 2020 2020 2020  _path]=[].      
+00042c90: 2020 2020 2020 6669 6c65 6c69 7374 5b72        filelist[r
+00042ca0: 6f6f 745f 7061 7468 5d3d 6669 6c65 6c69  oot_path]=fileli
+00042cb0: 7374 5b72 6f6f 745f 7061 7468 5d2b 666c  st[root_path]+fl
+00042cc0: 6973 740a 0a20 2020 2020 2020 2066 6f72  ist..        for
+00042cd0: 2066 6620 696e 2066 696c 656c 6973 743a   ff in filelist:
+00042ce0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00042cf0: 662e 696e 666f 2e75 7064 6174 6528 5f47  f.info.update(_G
+00042d00: 6574 5f28 6666 2c2a 6669 6c65 6c69 7374  et_(ff,*filelist
+00042d10: 5b66 665d 2c2a 2a6f 7074 7329 290a 2020  [ff],**opts)).  
+00042d20: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00042d30: 660a 0a0a 2020 2020 6465 6620 4765 744c  f...    def GetL
+00042d40: 6973 7428 7365 6c66 2c64 6972 6e61 6d65  ist(self,dirname
+00042d50: 3d4e 6f6e 652c 726f 6f74 733d 4e6f 6e65  =None,roots=None
+00042d60: 2c66 696c 655f 6f6e 6c79 3d46 616c 7365  ,file_only=False
+00042d70: 2c64 6972 5f6f 6e6c 793d 4661 6c73 652c  ,dir_only=False,
+00042d80: 7375 625f 6469 723d 4661 6c73 652c 696e  sub_dir=False,in
+00042d90: 636c 7564 655f 7061 7468 3d46 616c 7365  clude_path=False
+00042da0: 2c64 6574 6169 6c3d 4661 6c73 6529 3a20  ,detail=False): 
+00042db0: 2367 6574 2066 696c 6520 696e 666f 2064  #get file info d
+00042dc0: 6963 7420 6672 6f6d 2046 696c 656e 616d  ict from Filenam
+00042dd0: 6520 7061 7468 0a20 2020 2020 2020 2069  e path.        i
+00042de0: 6620 4973 4e6f 6e65 2872 6f6f 7473 293a  f IsNone(roots):
+00042df0: 2072 6f6f 7473 3d73 656c 662e 4669 6e64   roots=self.Find
+00042e00: 5250 2829 0a20 2020 2020 2020 2066 6f72  RP().        for
+00042e10: 2072 6f6f 7420 696e 2072 6f6f 7473 3a0a   root in roots:.
+00042e20: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00042e30: 7369 6e73 7461 6e63 6528 726f 6f74 2c73  sinstance(root,s
+00042e40: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+00042e50: 2020 2020 2072 743d 7365 6c66 2e69 6e66       rt=self.inf
+00042e60: 6f2e 6765 7428 726f 6f74 2c7b 7d29 0a20  o.get(root,{}). 
+00042e70: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00042e80: 6620 6469 726e 616d 6520 616e 6420 6469  f dirname and di
+00042e90: 726e 616d 6520 213d 2072 6f6f 743a 0a20  rname != root:. 
+00042ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042eb0: 2020 2072 743d 7365 6c66 2e43 6450 6174     rt=self.CdPat
+00042ec0: 6828 7274 2c64 6972 6e61 6d65 290a 2020  h(rt,dirname).  
+00042ed0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00042ee0: 2069 7369 6e73 7461 6e63 6528 7274 2c64   isinstance(rt,d
+00042ef0: 6963 7429 3a0a 2020 2020 2020 2020 2020  ict):.          
+00042f00: 2020 2020 2020 2020 2020 666f 7220 6969            for ii
+00042f10: 2069 6e20 7274 3a0a 2020 2020 2020 2020   in rt:.        
+00042f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042f30: 6669 6c65 5f69 6e66 6f3d 7274 5b69 695d  file_info=rt[ii]
+00042f40: 2e67 6574 2827 2069 2027 2c7b 7d29 0a20  .get(' i ',{}). 
 00042f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042f60: 6669 6c65 5f69 6e66 6f2e 6765 7428 2775  file_info.get('u
-00042f70: 6964 2729 2c0a 2020 2020 2020 2020 2020  id'),.          
-00042f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042f90: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-00042fa0: 5f69 6e66 6f2e 6765 7428 2767 6964 2729  _info.get('gid')
-00042fb0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00042fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042fd0: 2020 2020 2020 2020 6669 6c65 5f69 6e66          file_inf
-00042fe0: 6f2e 6765 7428 2773 697a 6527 292c 0a20  o.get('size'),. 
+00042f60: 2020 2020 2020 2064 696e 666f 3d27 270a         dinfo=''.
+00042f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042f80: 2020 2020 2020 2020 6966 2064 6574 6169          if detai
+00042f90: 6c3a 0a20 2020 2020 2020 2020 2020 2020  l:.             
+00042fa0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00042fb0: 696e 666f 3d27 7b7d 207b 7d20 7b7d 207b  info='{} {} {} {
+00042fc0: 7d20 7b7d 207b 7d20 272e 666f 726d 6174  } {} {} '.format
+00042fd0: 2866 696c 655f 696e 666f 2e67 6574 2827  (file_info.get('
+00042fe0: 6d6f 6465 2729 2c0a 2020 2020 2020 2020  mode'),.        
 00042ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043010: 2020 2020 2066 696c 655f 696e 666f 2e67       file_info.g
-00043020: 6574 2827 6d74 696d 6527 292c 0a20 2020  et('mtime'),.   
-00043030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043050: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-00043060: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00043070: 6969 203d 3d20 2720 6920 273a 2063 6f6e  ii == ' i ': con
-00043080: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
-00043090: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000430a0: 2066 696c 655f 696e 666f 2e67 6574 2827   file_info.get('
-000430b0: 7479 7065 2729 203d 3d20 2764 6972 273a  type') == 'dir':
-000430c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000430d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000430e0: 6669 6c65 5f6f 6e6c 793a 2063 6f6e 7469  file_only: conti
-000430f0: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
+00043000: 2020 2020 2020 2020 2020 2020 2020 3120                1 
+00043010: 6966 2066 696c 655f 696e 666f 2e67 6574  if file_info.get
+00043020: 2827 7479 7065 2729 2021 3d20 2764 6972  ('type') != 'dir
+00043030: 2720 656c 7365 206c 656e 2872 745b 6969  ' else len(rt[ii
+00043040: 5d29 2d31 2c0a 2020 2020 2020 2020 2020  ])-1,.          
+00043050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043060: 2020 2020 2020 2020 2020 2020 6669 6c65              file
+00043070: 5f69 6e66 6f2e 6765 7428 2775 6964 2729  _info.get('uid')
+00043080: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00043090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000430a0: 2020 2020 2020 2020 6669 6c65 5f69 6e66          file_inf
+000430b0: 6f2e 6765 7428 2767 6964 2729 2c0a 2020  o.get('gid'),.  
+000430c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000430d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000430e0: 2020 2020 6669 6c65 5f69 6e66 6f2e 6765      file_info.ge
+000430f0: 7428 2773 697a 6527 292c 0a20 2020 2020  t('size'),.     
 00043100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043110: 7072 696e 7428 277b 7d7b 7d2f 272e 666f  print('{}{}/'.fo
-00043120: 726d 6174 2864 696e 666f 2c69 6929 290a  rmat(dinfo,ii)).
-00043130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043140: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00043150: 7562 5f64 6972 3a0a 2020 2020 2020 2020  ub_dir:.        
-00043160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043170: 2020 2020 2020 2020 7365 6c66 2e47 6574          self.Get
-00043180: 4c69 7374 2864 6972 6e61 6d65 3d69 692c  List(dirname=ii,
-00043190: 726f 6f74 733d 5b72 6f6f 745d 2c73 7562  roots=[root],sub
-000431a0: 5f64 6972 3d73 7562 5f64 6972 2c69 6e63  _dir=sub_dir,inc
-000431b0: 6c75 6465 5f70 6174 683d 5472 7565 2c64  lude_path=True,d
-000431c0: 6574 6169 6c3d 6465 7461 696c 290a 2020  etail=detail).  
+00043110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043120: 2066 696c 655f 696e 666f 2e67 6574 2827   file_info.get('
+00043130: 6d74 696d 6527 292c 0a20 2020 2020 2020  mtime'),.       
+00043140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043150: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00043160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00043170: 2020 2020 2020 2020 2069 6620 6969 203d           if ii =
+00043180: 3d20 2720 6920 273a 2063 6f6e 7469 6e75  = ' i ': continu
+00043190: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+000431a0: 2020 2020 2020 2020 2020 6966 2066 696c            if fil
+000431b0: 655f 696e 666f 2e67 6574 2827 7479 7065  e_info.get('type
+000431c0: 2729 203d 3d20 2764 6972 273a 0a20 2020  ') == 'dir':.   
 000431d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000431e0: 2020 2020 2020 656c 6966 206e 6f74 2064        elif not d
-000431f0: 6972 5f6f 6e6c 793a 0a20 2020 2020 2020  ir_only:.       
+000431e0: 2020 2020 2020 2020 2069 6620 6669 6c65           if file
+000431f0: 5f6f 6e6c 793a 2063 6f6e 7469 6e75 650a  _only: continue.
 00043200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043210: 2020 2020 2069 6620 696e 636c 7564 655f       if include_
-00043220: 7061 7468 3a0a 2020 2020 2020 2020 2020  path:.          
-00043230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043240: 2020 2020 2020 7072 696e 7428 277b 7d7b        print('{}{
-00043250: 7d2f 7b7d 272e 666f 726d 6174 2864 696e  }/{}'.format(din
-00043260: 666f 2c64 6972 6e61 6d65 2c69 6929 290a  fo,dirname,ii)).
+00043210: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00043220: 7428 277b 7d7b 7d2f 272e 666f 726d 6174  t('{}{}/'.format
+00043230: 2864 696e 666f 2c69 6929 290a 2020 2020  (dinfo,ii)).    
+00043240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043250: 2020 2020 2020 2020 6966 2073 7562 5f64          if sub_d
+00043260: 6972 3a0a 2020 2020 2020 2020 2020 2020  ir:.            
 00043270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043280: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00043290: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000432a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000432b0: 2020 7072 696e 7428 277b 7d7b 7d27 2e66    print('{}{}'.f
-000432c0: 6f72 6d61 7428 6469 6e66 6f2c 6969 2929  ormat(dinfo,ii))
-000432d0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000432e0: 4661 6c73 650a 0a20 2020 2064 6566 2045  False..    def E
-000432f0: 7865 6346 696c 6528 7365 6c66 2c66 696c  xecFile(self,fil
-00043300: 656e 616d 652c 6269 6e5f 6e61 6d65 3d4e  ename,bin_name=N
-00043310: 6f6e 652c 6465 6661 756c 743d 4e6f 6e65  one,default=None
-00043320: 2c77 6f72 6b5f 7061 7468 3d27 2f74 6d70  ,work_path='/tmp
-00043330: 2729 3a0a 2020 2020 2020 2020 2320 6368  '):.        # ch
-00043340: 6563 6b20 7468 6520 6669 6c65 6e61 6d65  eck the filename
-00043350: 2069 7320 6578 6375 7461 626c 6520 696e   is excutable in
-00043360: 2074 6865 2073 7973 7465 6d20 6269 6e20   the system bin 
-00043370: 6669 6c65 2074 6865 6e20 7265 7475 726e  file then return
-00043380: 2074 6865 2066 696c 6520 6e61 6d65 0a20   the file name. 
-00043390: 2020 2020 2020 2023 2069 6620 636f 6d70         # if comp
-000433a0: 7265 7373 6564 2066 696c 6520 7468 656e  ressed file then
-000433b0: 2065 7874 7261 6374 2074 6865 2066 696c   extract the fil
-000433c0: 6520 616e 6420 6669 6e64 2062 696e 5f6e  e and find bin_n
-000433d0: 616d 6520 6669 6c65 2069 6e20 7468 6520  ame file in the 
-000433e0: 6578 7472 6163 7465 6420 6469 7265 6374  extracted direct
-000433f0: 6f72 790a 2020 2020 2020 2020 2320 2020  ory.        #   
-00043400: 616e 6420 666f 756e 6420 6269 6e61 7279  and found binary
-00043410: 2066 696c 6520 7468 656e 2072 6574 7572   file then retur
-00043420: 6e20 7468 656e 2062 696e 6172 7920 6669  n then binary fi
-00043430: 6c65 2070 6174 680a 2020 2020 2020 2020  le path.        
-00043440: 2320 6966 2066 696c 656e 616d 6520 6973  # if filename is
-00043450: 2065 7863 7574 6162 6c65 2066 696c 6520   excutable file 
-00043460: 7468 656e 2072 6574 7572 6e20 7468 6520  then return the 
-00043470: 6669 6c65 2070 6174 680a 2020 2020 2020  file path.      
-00043480: 2020 2320 6966 206e 6f74 2066 6f75 6e64    # if not found
-00043490: 2074 6865 6e20 7265 7475 726e 2064 6566   then return def
-000434a0: 6175 6c74 2076 616c 7565 0a20 2020 2020  ault value.     
-000434b0: 2020 2065 7869 7374 3d73 656c 662e 4669     exist=self.Fi
-000434c0: 6c65 496e 666f 2866 696c 656e 616d 6529  leInfo(filename)
-000434d0: 0a20 2020 2020 2020 2069 6620 6578 6973  .        if exis
-000434e0: 743a 0a20 2020 2020 2020 2020 2020 2069  t:.            i
-000434f0: 6620 6578 6973 745b 2774 7970 6527 5d20  f exist['type'] 
-00043500: 696e 205b 2765 6c66 275d 2061 6e64 2065  in ['elf'] and e
-00043510: 7869 7374 5b27 6d6f 6465 275d 203d 3d20  xist['mode'] == 
-00043520: 3333 3236 313a 7265 7475 726e 2066 696c  33261:return fil
-00043530: 656e 616d 650a 2020 2020 2020 2020 2020  ename.          
-00043540: 2020 6966 2073 656c 662e 4578 7472 6163    if self.Extrac
-00043550: 7428 6669 6c65 6e61 6d65 2c77 6f72 6b5f  t(filename,work_
-00043560: 7061 7468 3d77 6f72 6b5f 7061 7468 293a  path=work_path):
-00043570: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00043580: 2069 6620 6269 6e5f 6e61 6d65 3a0a 2020   if bin_name:.  
-00043590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000435a0: 2020 7274 3d5b 5d0a 2020 2020 2020 2020    rt=[].        
-000435b0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-000435c0: 6666 2069 6e20 7365 6c66 2e46 696e 6428  ff in self.Find(
-000435d0: 776f 726b 5f70 6174 682c 6669 6c65 6e61  work_path,filena
-000435e0: 6d65 3d62 696e 5f6e 616d 6529 3a0a 2020  me=bin_name):.  
-000435f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043600: 2020 2020 2020 6966 2073 656c 662e 496e        if self.In
-00043610: 666f 2866 6629 2e67 6574 2827 6d6f 6465  fo(ff).get('mode
-00043620: 2729 203d 3d20 3333 3236 313a 0a20 2020  ') == 33261:.   
-00043630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043640: 2020 2020 2020 2020 2072 742e 6170 7065           rt.appe
-00043650: 6e64 2866 6629 0a20 2020 2020 2020 2020  nd(ff).         
-00043660: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00043670: 6e20 7274 0a20 2020 2020 2020 2065 6c73  n rt.        els
-00043680: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
-00043690: 6620 6669 6e64 5f65 7865 6375 7461 626c  f find_executabl
-000436a0: 6528 6669 6c65 6e61 6d65 293a 2072 6574  e(filename): ret
-000436b0: 7572 6e20 6669 6c65 6e61 6d65 0a20 2020  urn filename.   
-000436c0: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-000436d0: 756c 740a 0a20 2020 2064 6566 2042 6173  ult..    def Bas
-000436e0: 656e 616d 6528 7365 6c66 2c66 696c 656e  ename(self,filen
-000436f0: 616d 652c 6465 6661 756c 743d 4661 6c73  ame,default=Fals
-00043700: 6529 3a0a 2020 2020 2020 2020 6966 2069  e):.        if i
-00043710: 7369 6e73 7461 6e63 6528 6669 6c65 6e61  sinstance(filena
-00043720: 6d65 2c73 7472 293a 7265 7475 726e 206f  me,str):return o
-00043730: 732e 7061 7468 2e62 6173 656e 616d 6528  s.path.basename(
-00043740: 6669 6c65 6e61 6d65 290a 2020 2020 2020  filename).      
-00043750: 2020 7265 7475 726e 2064 6566 6175 6c74    return default
-00043760: 0a0a 2020 2020 6465 6620 4469 726e 616d  ..    def Dirnam
-00043770: 6528 7365 6c66 2c66 696c 656e 616d 652c  e(self,filename,
-00043780: 6269 6e5f 6e61 6d65 3d4e 6f6e 652c 6465  bin_name=None,de
-00043790: 6661 756c 743d 4661 6c73 6529 3a0a 2020  fault=False):.  
-000437a0: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
-000437b0: 6e73 7461 6e63 6528 6669 6c65 6e61 6d65  nstance(filename
-000437c0: 2c73 7472 293a 2072 6574 7572 6e20 6465  ,str): return de
-000437d0: 6661 756c 740a 2020 2020 2020 2020 6966  fault.        if
-000437e0: 2049 734e 6f6e 6528 6269 6e5f 6e61 6d65   IsNone(bin_name
-000437f0: 293a 2072 6574 7572 6e20 6f73 2e70 6174  ): return os.pat
-00043800: 682e 6469 726e 616d 6528 6669 6c65 6e61  h.dirname(filena
-00043810: 6d65 290a 2020 2020 2020 2020 6966 206e  me).        if n
-00043820: 6f74 2069 7369 6e73 7461 6e63 6528 6269  ot isinstance(bi
-00043830: 6e5f 6e61 6d65 2c73 7472 293a 2072 6574  n_name,str): ret
-00043840: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
-00043850: 2020 2020 6269 6e5f 696e 666f 3d62 696e      bin_info=bin
-00043860: 5f6e 616d 652e 7370 6c69 7428 272f 2729  _name.split('/')
-00043870: 0a20 2020 2020 2020 2062 696e 5f6e 3d6c  .        bin_n=l
-00043880: 656e 2862 696e 5f69 6e66 6f29 0a20 2020  en(bin_info).   
-00043890: 2020 2020 2066 696c 656e 616d 655f 696e       filename_in
-000438a0: 666f 3d66 696c 656e 616d 652e 7370 6c69  fo=filename.spli
-000438b0: 7428 272f 2729 0a20 2020 2020 2020 2066  t('/').        f
-000438c0: 696c 656e 616d 655f 6e3d 6c65 6e28 6669  ilename_n=len(fi
-000438d0: 6c65 6e61 6d65 5f69 6e66 6f29 0a20 2020  lename_info).   
-000438e0: 2020 2020 2066 6f72 2069 6920 696e 2072       for ii in r
-000438f0: 616e 6765 2830 2c62 696e 5f6e 293a 0a20  ange(0,bin_n):. 
-00043900: 2020 2020 2020 2020 2020 2069 6620 6669             if fi
-00043910: 6c65 6e61 6d65 5f69 6e66 6f5b 6669 6c65  lename_info[file
-00043920: 6e61 6d65 5f6e 2d31 2d69 695d 2021 3d20  name_n-1-ii] != 
-00043930: 6269 6e5f 696e 666f 5b62 696e 5f6e 2d31  bin_info[bin_n-1
-00043940: 2d69 695d 3a20 7265 7475 726e 2064 6566  -ii]: return def
-00043950: 6175 6c74 0a20 2020 2020 2020 2072 6574  ault.        ret
-00043960: 7572 6e20 4a6f 696e 2866 696c 656e 616d  urn Join(filenam
-00043970: 655f 696e 666f 5b3a 2d62 696e 5f6e 5d2c  e_info[:-bin_n],
-00043980: 7379 6d62 6f6c 3d27 2f27 290a 0a20 2020  symbol='/')..   
-00043990: 2064 6566 2046 696e 6428 7365 6c66 2c66   def Find(self,f
-000439a0: 696c 656e 616d 652c 6465 6661 756c 743d  ilename,default=
-000439b0: 5b5d 293a 0a20 2020 2020 2020 2069 6620  []):.        if 
-000439c0: 6e6f 7420 6973 696e 7374 616e 6365 2866  not isinstance(f
-000439d0: 696c 656e 616d 652c 7374 7229 3a20 7265  ilename,str): re
-000439e0: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
-000439f0: 2020 2020 2066 696c 656e 616d 653d 6f73       filename=os
-00043a00: 2e70 6174 682e 6261 7365 6e61 6d65 2866  .path.basename(f
-00043a10: 696c 656e 616d 6529 0a20 2020 2020 2020  ilename).       
-00043a20: 2069 6620 6f73 2e70 6174 682e 6973 6469   if os.path.isdi
-00043a30: 7228 7365 6c66 2e72 6f6f 745f 7061 7468  r(self.root_path
-00043a40: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00043a50: 7420 3d20 5b5d 0a20 2020 2020 2020 2020  t = [].         
-00043a60: 2020 2066 6f72 2062 6173 652c 2064 6972     for base, dir
-00043a70: 732c 2066 696c 6573 2069 6e20 6f73 2e77  s, files in os.w
-00043a80: 616c 6b28 7365 6c66 2e72 6f6f 745f 7061  alk(self.root_pa
-00043a90: 7468 293a 0a20 2020 2020 2020 2020 2020  th):.           
-00043aa0: 2020 2020 2066 6f75 6e64 203d 2066 6e6d       found = fnm
-00043ab0: 6174 6368 2e66 696c 7465 7228 6669 6c65  atch.filter(file
-00043ac0: 732c 2066 696c 656e 616d 6529 0a20 2020  s, filename).   
-00043ad0: 2020 2020 2020 2020 2020 2020 2072 742e               rt.
-00043ae0: 6578 7465 6e64 286f 732e 7061 7468 2e6a  extend(os.path.j
-00043af0: 6f69 6e28 6261 7365 2c20 6629 2066 6f72  oin(base, f) for
-00043b00: 2066 2069 6e20 666f 756e 6429 0a20 2020   f in found).   
-00043b10: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00043b20: 7274 0a20 2020 2020 2020 2072 6574 7572  rt.        retur
-00043b30: 6e20 6465 6661 756c 740a 0a20 2020 2064  n default..    d
-00043b40: 6566 2052 7728 7365 6c66 2c6e 616d 652c  ef Rw(self,name,
-00043b50: 6461 7461 3d4e 6f6e 652c 6f75 743d 2762  data=None,out='b
-00043b60: 7974 6527 2c61 7070 656e 643d 4661 6c73  yte',append=Fals
-00043b70: 652c 7265 6164 3d4e 6f6e 652c 6f76 6572  e,read=None,over
-00043b80: 7772 6974 653d 5472 7565 2c66 696e 666f  write=True,finfo
-00043b90: 3d7b 7d2c 6669 6c65 5f6f 6e6c 793d 5472  ={},file_only=Tr
-00043ba0: 7565 2c64 6566 6175 6c74 3d46 616c 7365  ue,default=False
-00043bb0: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
-00043bc0: 696e 7374 616e 6365 286e 616d 652c 7374  instance(name,st
-00043bd0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-00043be0: 2369 6620 6461 7461 2069 7320 4e6f 6e65  #if data is None
-00043bf0: 3a20 2320 5265 6164 2066 726f 6d20 6669  : # Read from fi
-00043c00: 6c65 0a20 2020 2020 2020 2020 2020 2069  le.            i
-00043c10: 6620 4973 4e6f 6e65 2864 6174 6129 3a20  f IsNone(data): 
-00043c20: 2320 5265 6164 2066 726f 6d20 6669 6c65  # Read from file
-00043c30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00043c40: 2064 6174 613d 6361 7428 6e61 6d65 2c66   data=cat(name,f
-00043c50: 696c 655f 6f6e 6c79 3d66 696c 655f 6f6e  ile_only=file_on
-00043c60: 6c79 2c62 7974 653d 6f75 742c 6865 6164  ly,byte=out,head
-00043c70: 3d72 6561 642c 6465 6661 756c 743d 6465  =read,default=de
-00043c80: 6661 756c 7429 0a20 2020 2020 2020 2020  fault).         
-00043c90: 2020 2020 2020 2069 6620 6461 7461 2069         if data i
-00043ca0: 7320 4661 6c73 653a 0a20 2020 2020 2020  s False:.       
-00043cb0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00043cc0: 7572 6e20 4661 6c73 652c 6465 6661 756c  urn False,defaul
-00043cd0: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
-00043ce0: 2020 7265 7475 726e 2054 7275 652c 6461    return True,da
-00043cf0: 7461 0a20 2020 2020 2020 2020 2020 2065  ta.            e
-00043d00: 6c73 653a 2023 2057 7269 7465 2074 6f20  lse: # Write to 
-00043d10: 6669 6c65 0a20 2020 2020 2020 2020 2020  file.           
-00043d20: 2020 2020 2066 696c 655f 7061 7468 3d6f       file_path=o
-00043d30: 732e 7061 7468 2e64 6972 6e61 6d65 286e  s.path.dirname(n
-00043d40: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
-00043d50: 2020 2020 2069 6620 6e6f 7420 6669 6c65       if not file
-00043d60: 5f70 6174 6820 6f72 206f 732e 7061 7468  _path or os.path
-00043d70: 2e69 7364 6972 2866 696c 655f 7061 7468  .isdir(file_path
-00043d80: 293a 2023 2063 7572 7265 6e74 2064 6972  ): # current dir
-00043d90: 206f 7220 636f 7272 6563 7420 6469 7265   or correct dire
-00043da0: 6374 6f72 790a 2020 2020 2020 2020 2020  ctory.          
-00043db0: 2020 2020 2020 2020 2020 6966 2061 7070            if app
-00043dc0: 656e 643a 0a20 2020 2020 2020 2020 2020  end:.           
-00043dd0: 2020 2020 2020 2020 2020 2020 2077 6974               wit
-00043de0: 6820 6f70 656e 286e 616d 652c 2761 6227  h open(name,'ab'
-00043df0: 2920 6173 2066 3a0a 2020 2020 2020 2020  ) as f:.        
-00043e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043e10: 2020 2020 662e 7772 6974 6528 4279 7465      f.write(Byte
-00043e20: 7328 6461 7461 2929 0a20 2020 2020 2020  s(data)).       
-00043e30: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00043e40: 6620 6e6f 7420 6669 6c65 5f6f 6e6c 793a  f not file_only:
+00043280: 2020 2020 7365 6c66 2e47 6574 4c69 7374      self.GetList
+00043290: 2864 6972 6e61 6d65 3d69 692c 726f 6f74  (dirname=ii,root
+000432a0: 733d 5b72 6f6f 745d 2c73 7562 5f64 6972  s=[root],sub_dir
+000432b0: 3d73 7562 5f64 6972 2c69 6e63 6c75 6465  =sub_dir,include
+000432c0: 5f70 6174 683d 5472 7565 2c64 6574 6169  _path=True,detai
+000432d0: 6c3d 6465 7461 696c 290a 2020 2020 2020  l=detail).      
+000432e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000432f0: 2020 656c 6966 206e 6f74 2064 6972 5f6f    elif not dir_o
+00043300: 6e6c 793a 0a20 2020 2020 2020 2020 2020  nly:.           
+00043310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043320: 2069 6620 696e 636c 7564 655f 7061 7468   if include_path
+00043330: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00043340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043350: 2020 7072 696e 7428 277b 7d7b 7d2f 7b7d    print('{}{}/{}
+00043360: 272e 666f 726d 6174 2864 696e 666f 2c64  '.format(dinfo,d
+00043370: 6972 6e61 6d65 2c69 6929 290a 2020 2020  irname,ii)).    
+00043380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043390: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000433a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000433b0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+000433c0: 696e 7428 277b 7d7b 7d27 2e66 6f72 6d61  int('{}{}'.forma
+000433d0: 7428 6469 6e66 6f2c 6969 2929 0a20 2020  t(dinfo,ii)).   
+000433e0: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
+000433f0: 650a 0a20 2020 2064 6566 2045 7865 6346  e..    def ExecF
+00043400: 696c 6528 7365 6c66 2c66 696c 656e 616d  ile(self,filenam
+00043410: 652c 6269 6e5f 6e61 6d65 3d4e 6f6e 652c  e,bin_name=None,
+00043420: 6465 6661 756c 743d 4e6f 6e65 2c77 6f72  default=None,wor
+00043430: 6b5f 7061 7468 3d27 2f74 6d70 2729 3a0a  k_path='/tmp'):.
+00043440: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
+00043450: 7468 6520 6669 6c65 6e61 6d65 2069 7320  the filename is 
+00043460: 6578 6375 7461 626c 6520 696e 2074 6865  excutable in the
+00043470: 2073 7973 7465 6d20 6269 6e20 6669 6c65   system bin file
+00043480: 2074 6865 6e20 7265 7475 726e 2074 6865   then return the
+00043490: 2066 696c 6520 6e61 6d65 0a20 2020 2020   file name.     
+000434a0: 2020 2023 2069 6620 636f 6d70 7265 7373     # if compress
+000434b0: 6564 2066 696c 6520 7468 656e 2065 7874  ed file then ext
+000434c0: 7261 6374 2074 6865 2066 696c 6520 616e  ract the file an
+000434d0: 6420 6669 6e64 2062 696e 5f6e 616d 6520  d find bin_name 
+000434e0: 6669 6c65 2069 6e20 7468 6520 6578 7472  file in the extr
+000434f0: 6163 7465 6420 6469 7265 6374 6f72 790a  acted directory.
+00043500: 2020 2020 2020 2020 2320 2020 616e 6420          #   and 
+00043510: 666f 756e 6420 6269 6e61 7279 2066 696c  found binary fil
+00043520: 6520 7468 656e 2072 6574 7572 6e20 7468  e then return th
+00043530: 656e 2062 696e 6172 7920 6669 6c65 2070  en binary file p
+00043540: 6174 680a 2020 2020 2020 2020 2320 6966  ath.        # if
+00043550: 2066 696c 656e 616d 6520 6973 2065 7863   filename is exc
+00043560: 7574 6162 6c65 2066 696c 6520 7468 656e  utable file then
+00043570: 2072 6574 7572 6e20 7468 6520 6669 6c65   return the file
+00043580: 2070 6174 680a 2020 2020 2020 2020 2320   path.        # 
+00043590: 6966 206e 6f74 2066 6f75 6e64 2074 6865  if not found the
+000435a0: 6e20 7265 7475 726e 2064 6566 6175 6c74  n return default
+000435b0: 2076 616c 7565 0a20 2020 2020 2020 2065   value.        e
+000435c0: 7869 7374 3d73 656c 662e 4669 6c65 496e  xist=self.FileIn
+000435d0: 666f 2866 696c 656e 616d 6529 0a20 2020  fo(filename).   
+000435e0: 2020 2020 2069 6620 6578 6973 743a 0a20       if exist:. 
+000435f0: 2020 2020 2020 2020 2020 2069 6620 6578             if ex
+00043600: 6973 745b 2774 7970 6527 5d20 696e 205b  ist['type'] in [
+00043610: 2765 6c66 275d 2061 6e64 2065 7869 7374  'elf'] and exist
+00043620: 5b27 6d6f 6465 275d 203d 3d20 3333 3236  ['mode'] == 3326
+00043630: 313a 7265 7475 726e 2066 696c 656e 616d  1:return filenam
+00043640: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+00043650: 2073 656c 662e 4578 7472 6163 7428 6669   self.Extract(fi
+00043660: 6c65 6e61 6d65 2c77 6f72 6b5f 7061 7468  lename,work_path
+00043670: 3d77 6f72 6b5f 7061 7468 293a 0a20 2020  =work_path):.   
+00043680: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00043690: 6269 6e5f 6e61 6d65 3a0a 2020 2020 2020  bin_name:.      
+000436a0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+000436b0: 3d5b 5d0a 2020 2020 2020 2020 2020 2020  =[].            
+000436c0: 2020 2020 2020 2020 666f 7220 6666 2069          for ff i
+000436d0: 6e20 7365 6c66 2e46 696e 6428 776f 726b  n self.Find(work
+000436e0: 5f70 6174 682c 6669 6c65 6e61 6d65 3d62  _path,filename=b
+000436f0: 696e 5f6e 616d 6529 3a0a 2020 2020 2020  in_name):.      
+00043700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043710: 2020 6966 2073 656c 662e 496e 666f 2866    if self.Info(f
+00043720: 6629 2e67 6574 2827 6d6f 6465 2729 203d  f).get('mode') =
+00043730: 3d20 3333 3236 313a 0a20 2020 2020 2020  = 33261:.       
+00043740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043750: 2020 2020 2072 742e 6170 7065 6e64 2866       rt.append(f
+00043760: 6629 0a20 2020 2020 2020 2020 2020 2020  f).             
+00043770: 2020 2020 2020 2072 6574 7572 6e20 7274         return rt
+00043780: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00043790: 2020 2020 2020 2020 2020 2069 6620 6669             if fi
+000437a0: 6e64 5f65 7865 6375 7461 626c 6528 6669  nd_executable(fi
+000437b0: 6c65 6e61 6d65 293a 2072 6574 7572 6e20  lename): return 
+000437c0: 6669 6c65 6e61 6d65 0a20 2020 2020 2020  filename.       
+000437d0: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+000437e0: 0a20 2020 2064 6566 2042 6173 656e 616d  .    def Basenam
+000437f0: 6528 7365 6c66 2c66 696c 656e 616d 652c  e(self,filename,
+00043800: 6465 6661 756c 743d 4661 6c73 6529 3a0a  default=False):.
+00043810: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00043820: 7461 6e63 6528 6669 6c65 6e61 6d65 2c73  tance(filename,s
+00043830: 7472 293a 7265 7475 726e 206f 732e 7061  tr):return os.pa
+00043840: 7468 2e62 6173 656e 616d 6528 6669 6c65  th.basename(file
+00043850: 6e61 6d65 290a 2020 2020 2020 2020 7265  name).        re
+00043860: 7475 726e 2064 6566 6175 6c74 0a0a 2020  turn default..  
+00043870: 2020 6465 6620 4469 726e 616d 6528 7365    def Dirname(se
+00043880: 6c66 2c66 696c 656e 616d 652c 6269 6e5f  lf,filename,bin_
+00043890: 6e61 6d65 3d4e 6f6e 652c 6465 6661 756c  name=None,defaul
+000438a0: 743d 4661 6c73 6529 3a0a 2020 2020 2020  t=False):.      
+000438b0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
+000438c0: 6e63 6528 6669 6c65 6e61 6d65 2c73 7472  nce(filename,str
+000438d0: 293a 2072 6574 7572 6e20 6465 6661 756c  ): return defaul
+000438e0: 740a 2020 2020 2020 2020 6966 2049 734e  t.        if IsN
+000438f0: 6f6e 6528 6269 6e5f 6e61 6d65 293a 2072  one(bin_name): r
+00043900: 6574 7572 6e20 6f73 2e70 6174 682e 6469  eturn os.path.di
+00043910: 726e 616d 6528 6669 6c65 6e61 6d65 290a  rname(filename).
+00043920: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
+00043930: 7369 6e73 7461 6e63 6528 6269 6e5f 6e61  sinstance(bin_na
+00043940: 6d65 2c73 7472 293a 2072 6574 7572 6e20  me,str): return 
+00043950: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
+00043960: 6269 6e5f 696e 666f 3d62 696e 5f6e 616d  bin_info=bin_nam
+00043970: 652e 7370 6c69 7428 272f 2729 0a20 2020  e.split('/').   
+00043980: 2020 2020 2062 696e 5f6e 3d6c 656e 2862       bin_n=len(b
+00043990: 696e 5f69 6e66 6f29 0a20 2020 2020 2020  in_info).       
+000439a0: 2066 696c 656e 616d 655f 696e 666f 3d66   filename_info=f
+000439b0: 696c 656e 616d 652e 7370 6c69 7428 272f  ilename.split('/
+000439c0: 2729 0a20 2020 2020 2020 2066 696c 656e  ').        filen
+000439d0: 616d 655f 6e3d 6c65 6e28 6669 6c65 6e61  ame_n=len(filena
+000439e0: 6d65 5f69 6e66 6f29 0a20 2020 2020 2020  me_info).       
+000439f0: 2066 6f72 2069 6920 696e 2072 616e 6765   for ii in range
+00043a00: 2830 2c62 696e 5f6e 293a 0a20 2020 2020  (0,bin_n):.     
+00043a10: 2020 2020 2020 2069 6620 6669 6c65 6e61         if filena
+00043a20: 6d65 5f69 6e66 6f5b 6669 6c65 6e61 6d65  me_info[filename
+00043a30: 5f6e 2d31 2d69 695d 2021 3d20 6269 6e5f  _n-1-ii] != bin_
+00043a40: 696e 666f 5b62 696e 5f6e 2d31 2d69 695d  info[bin_n-1-ii]
+00043a50: 3a20 7265 7475 726e 2064 6566 6175 6c74  : return default
+00043a60: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00043a70: 4a6f 696e 2866 696c 656e 616d 655f 696e  Join(filename_in
+00043a80: 666f 5b3a 2d62 696e 5f6e 5d2c 7379 6d62  fo[:-bin_n],symb
+00043a90: 6f6c 3d27 2f27 290a 0a20 2020 2064 6566  ol='/')..    def
+00043aa0: 2046 696e 6428 7365 6c66 2c66 696c 656e   Find(self,filen
+00043ab0: 616d 652c 6465 6661 756c 743d 5b5d 293a  ame,default=[]):
+00043ac0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00043ad0: 6973 696e 7374 616e 6365 2866 696c 656e  isinstance(filen
+00043ae0: 616d 652c 7374 7229 3a20 7265 7475 726e  ame,str): return
+00043af0: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
+00043b00: 2066 696c 656e 616d 653d 6f73 2e70 6174   filename=os.pat
+00043b10: 682e 6261 7365 6e61 6d65 2866 696c 656e  h.basename(filen
+00043b20: 616d 6529 0a20 2020 2020 2020 2069 6620  ame).        if 
+00043b30: 6f73 2e70 6174 682e 6973 6469 7228 7365  os.path.isdir(se
+00043b40: 6c66 2e72 6f6f 745f 7061 7468 293a 0a20  lf.root_path):. 
+00043b50: 2020 2020 2020 2020 2020 2072 7420 3d20             rt = 
+00043b60: 5b5d 0a20 2020 2020 2020 2020 2020 2066  [].            f
+00043b70: 6f72 2062 6173 652c 2064 6972 732c 2066  or base, dirs, f
+00043b80: 696c 6573 2069 6e20 6f73 2e77 616c 6b28  iles in os.walk(
+00043b90: 7365 6c66 2e72 6f6f 745f 7061 7468 293a  self.root_path):
+00043ba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00043bb0: 2066 6f75 6e64 203d 2066 6e6d 6174 6368   found = fnmatch
+00043bc0: 2e66 696c 7465 7228 6669 6c65 732c 2066  .filter(files, f
+00043bd0: 696c 656e 616d 6529 0a20 2020 2020 2020  ilename).       
+00043be0: 2020 2020 2020 2020 2072 742e 6578 7465           rt.exte
+00043bf0: 6e64 286f 732e 7061 7468 2e6a 6f69 6e28  nd(os.path.join(
+00043c00: 6261 7365 2c20 6629 2066 6f72 2066 2069  base, f) for f i
+00043c10: 6e20 666f 756e 6429 0a20 2020 2020 2020  n found).       
+00043c20: 2020 2020 2072 6574 7572 6e20 7274 0a20       return rt. 
+00043c30: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+00043c40: 6661 756c 740a 0a20 2020 2064 6566 2052  fault..    def R
+00043c50: 7728 7365 6c66 2c6e 616d 652c 6461 7461  w(self,name,data
+00043c60: 3d4e 6f6e 652c 6f75 743d 2762 7974 6527  =None,out='byte'
+00043c70: 2c61 7070 656e 643d 4661 6c73 652c 7265  ,append=False,re
+00043c80: 6164 3d4e 6f6e 652c 6f76 6572 7772 6974  ad=None,overwrit
+00043c90: 653d 5472 7565 2c66 696e 666f 3d7b 7d2c  e=True,finfo={},
+00043ca0: 6669 6c65 5f6f 6e6c 793d 5472 7565 2c64  file_only=True,d
+00043cb0: 6566 6175 6c74 3d46 616c 7365 293a 0a20  efault=False):. 
+00043cc0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00043cd0: 616e 6365 286e 616d 652c 7374 7229 3a0a  ance(name,str):.
+00043ce0: 2020 2020 2020 2020 2020 2020 2369 6620              #if 
+00043cf0: 6461 7461 2069 7320 4e6f 6e65 3a20 2320  data is None: # 
+00043d00: 5265 6164 2066 726f 6d20 6669 6c65 0a20  Read from file. 
+00043d10: 2020 2020 2020 2020 2020 2069 6620 4973             if Is
+00043d20: 4e6f 6e65 2864 6174 6129 3a20 2320 5265  None(data): # Re
+00043d30: 6164 2066 726f 6d20 6669 6c65 0a20 2020  ad from file.   
+00043d40: 2020 2020 2020 2020 2020 2020 2064 6174               dat
+00043d50: 613d 6361 7428 6e61 6d65 2c66 696c 655f  a=cat(name,file_
+00043d60: 6f6e 6c79 3d66 696c 655f 6f6e 6c79 2c62  only=file_only,b
+00043d70: 7974 653d 6f75 742c 6865 6164 3d72 6561  yte=out,head=rea
+00043d80: 642c 6465 6661 756c 743d 6465 6661 756c  d,default=defaul
+00043d90: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
+00043da0: 2020 2069 6620 6461 7461 2069 7320 4661     if data is Fa
+00043db0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00043dc0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00043dd0: 4661 6c73 652c 6465 6661 756c 740a 2020  False,default.  
+00043de0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00043df0: 7475 726e 2054 7275 652c 6461 7461 0a20  turn True,data. 
+00043e00: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00043e10: 2023 2057 7269 7465 2074 6f20 6669 6c65   # Write to file
+00043e20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00043e30: 2066 696c 655f 7061 7468 3d6f 732e 7061   file_path=os.pa
+00043e40: 7468 2e64 6972 6e61 6d65 286e 616d 6529  th.dirname(name)
 00043e50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00043e60: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
-00043e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043e80: 2020 2020 2020 2020 2020 663d 6f73 2e6f            f=os.o
-00043e90: 7065 6e28 6e61 6d65 2c6f 732e 4f5f 5244  pen(name,os.O_RD
-00043ea0: 5752 290a 2020 2020 2020 2020 2020 2020  WR).            
-00043eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043ec0: 6f73 2e77 7269 7465 2866 2c64 6174 6129  os.write(f,data)
+00043e60: 2069 6620 6e6f 7420 6669 6c65 5f70 6174   if not file_pat
+00043e70: 6820 6f72 206f 732e 7061 7468 2e69 7364  h or os.path.isd
+00043e80: 6972 2866 696c 655f 7061 7468 293a 2023  ir(file_path): #
+00043e90: 2063 7572 7265 6e74 2064 6972 206f 7220   current dir or 
+00043ea0: 636f 7272 6563 7420 6469 7265 6374 6f72  correct director
+00043eb0: 790a 2020 2020 2020 2020 2020 2020 2020  y.              
+00043ec0: 2020 2020 2020 6966 2061 7070 656e 643a        if append:
 00043ed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00043ee0: 2020 2020 2020 2020 2020 2020 206f 732e               os.
-00043ef0: 636c 6f73 6528 6629 0a20 2020 2020 2020  close(f).       
-00043f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043f10: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-00043f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043f30: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
-00043f40: 652c 4e6f 6e65 0a20 2020 2020 2020 2020  e,None.         
-00043f50: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00043f60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00043f70: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
-00043f80: 656e 286e 616d 652c 2777 6227 2920 6173  en(name,'wb') as
-00043f90: 2066 3a0a 2020 2020 2020 2020 2020 2020   f:.            
-00043fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043fb0: 662e 7772 6974 6528 4279 7465 7328 6461  f.write(Bytes(da
-00043fc0: 7461 2929 0a20 2020 2020 2020 2020 2020  ta)).           
-00043fd0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00043fe0: 6973 696e 7374 616e 6365 2866 696e 666f  isinstance(finfo
-00043ff0: 2c64 6963 7429 2061 6e64 2066 696e 666f  ,dict) and finfo
-00044000: 3a20 7365 6c66 2e53 6574 4964 656e 7469  : self.SetIdenti
-00044010: 7479 286e 616d 652c 2a2a 6669 6e66 6f29  ty(name,**finfo)
-00044020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00044030: 2020 2020 2020 2020 2023 6d6f 6465 3d73           #mode=s
-00044040: 656c 662e 4d6f 6465 286d 6f64 6529 0a20  elf.Mode(mode). 
-00044050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044060: 2020 2020 2020 2023 6966 206d 6f64 653a         #if mode:
-00044070: 206f 732e 6368 6d6f 6428 6e61 6d65 2c69   os.chmod(name,i
-00044080: 6e74 286d 6f64 652c 6261 7365 3d38 2929  nt(mode,base=8))
-00044090: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000440a0: 2020 2020 2020 2020 2023 6966 2075 6964           #if uid
-000440b0: 2061 6e64 2067 6964 3a20 6f73 2e63 686f   and gid: os.cho
-000440c0: 776e 286e 616d 652c 7569 642c 6769 6429  wn(name,uid,gid)
+00043ee0: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
+00043ef0: 656e 286e 616d 652c 2761 6227 2920 6173  en(name,'ab') as
+00043f00: 2066 3a0a 2020 2020 2020 2020 2020 2020   f:.            
+00043f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043f20: 662e 7772 6974 6528 4279 7465 7328 6461  f.write(Bytes(da
+00043f30: 7461 2929 0a20 2020 2020 2020 2020 2020  ta)).           
+00043f40: 2020 2020 2020 2020 2065 6c69 6620 6e6f           elif no
+00043f50: 7420 6669 6c65 5f6f 6e6c 793a 0a20 2020  t file_only:.   
+00043f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043f70: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+00043f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043f90: 2020 2020 2020 663d 6f73 2e6f 7065 6e28        f=os.open(
+00043fa0: 6e61 6d65 2c6f 732e 4f5f 5244 5752 290a  name,os.O_RDWR).
+00043fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043fc0: 2020 2020 2020 2020 2020 2020 6f73 2e77              os.w
+00043fd0: 7269 7465 2866 2c64 6174 6129 0a20 2020  rite(f,data).   
+00043fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043ff0: 2020 2020 2020 2020 206f 732e 636c 6f73           os.clos
+00044000: 6528 6629 0a20 2020 2020 2020 2020 2020  e(f).           
+00044010: 2020 2020 2020 2020 2020 2020 2065 7863               exc
+00044020: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
+00044030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044040: 2072 6574 7572 6e20 4661 6c73 652c 4e6f   return False,No
+00044050: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
+00044060: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00044070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044080: 2020 2020 2077 6974 6820 6f70 656e 286e       with open(n
+00044090: 616d 652c 2777 6227 2920 6173 2066 3a0a  ame,'wb') as f:.
+000440a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000440b0: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
+000440c0: 6974 6528 4279 7465 7328 6461 7461 2929  ite(Bytes(data))
 000440d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000440e0: 2020 2020 2020 2020 2023 6966 206d 7469           #if mti
-000440f0: 6d65 2061 6e64 2061 7469 6d65 3a20 6f73  me and atime: os
-00044100: 2e75 7469 6d65 286e 616d 652c 2861 7469  .utime(name,(ati
-00044110: 6d65 2c6d 7469 6d65 2929 2320 5469 6d65  me,mtime))# Time
-00044120: 2075 7064 6174 6520 6d75 7374 2062 6520   update must be 
-00044130: 6174 206c 6173 7420 6f72 6465 720a 2020  at last order.  
-00044140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044150: 2020 7265 7475 726e 2054 7275 652c 4e6f    return True,No
-00044160: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
-00044170: 2020 2069 6620 6465 6661 756c 7420 3d3d     if default ==
-00044180: 207b 2765 7272 277d 3a0a 2020 2020 2020   {'err'}:.      
-00044190: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000441a0: 7475 726e 2046 616c 7365 2c27 4469 7265  turn False,'Dire
-000441b0: 6374 6f72 7928 7b7d 2920 6e6f 7420 666f  ctory({}) not fo
-000441c0: 756e 6427 2e66 6f72 6d61 7428 6669 6c65  und'.format(file
-000441d0: 5f70 6174 6829 0a20 2020 2020 2020 2020  _path).         
-000441e0: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
-000441f0: 6c73 652c 6465 6661 756c 740a 2020 2020  lse,default.    
-00044200: 2020 2020 6966 2064 6566 6175 6c74 203d      if default =
-00044210: 3d20 7b27 6572 7227 7d3a 0a20 2020 2020  = {'err'}:.     
-00044220: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
-00044230: 6c73 652c 2755 6e6b 6e6f 776e 2074 7970  lse,'Unknown typ
-00044240: 6528 7b7d 2920 6669 6c65 6e61 6d65 272e  e({}) filename'.
-00044250: 666f 726d 6174 286e 616d 6529 0a20 2020  format(name).   
-00044260: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
-00044270: 652c 6465 6661 756c 740a 0a20 2020 2064  e,default..    d
-00044280: 6566 204d 6f64 6528 7365 6c66 2c76 616c  ef Mode(self,val
-00044290: 2c6d 6f64 653d 2763 686d 6f64 272c 6465  ,mode='chmod',de
-000442a0: 6661 756c 743d 4661 6c73 6529 3a0a 2020  fault=False):.  
-000442b0: 2020 2020 2020 2727 270a 2020 2020 2020        '''.      
-000442c0: 2020 636f 6e76 6572 7420 4669 6c65 204d    convert File M
-000442d0: 6f64 6520 746f 206d 6173 6b0a 2020 2020  ode to mask.    
-000442e0: 2020 2020 6d6f 6465 200a 2020 2020 2020      mode .      
-000442f0: 2020 2020 2027 6368 6d6f 6427 203a 2064       'chmod' : d
-00044300: 6566 6175 6c74 2c20 636f 6e76 6572 7420  efault, convert 
-00044310: 746f 206d 6173 6b20 286f 732e 6368 6d6f  to mask (os.chmo
-00044320: 6428 3c66 696c 653e 2c3c 6d61 736b 3e29  d(<file>,<mask>)
-00044330: 290a 2020 2020 2020 2020 2020 2027 696e  ).           'in
-00044340: 7427 2020 203a 2072 6574 7572 6e20 746f  t'   : return to
-00044350: 2069 6e74 206e 756d 6265 7220 6f66 206f   int number of o
-00044360: 6374 2820 6578 3a20 3735 3520 290a 2020  ct( ex: 755 ).  
-00044370: 2020 2020 2020 2020 2027 6f63 7427 2020           'oct'  
-00044380: 203a 2072 6574 7572 6e20 6f63 7420 6e75   : return oct nu
-00044390: 6d62 6572 2028 7374 7269 6e67 290a 2020  mber (string).  
-000443a0: 2020 2020 2020 2020 2027 7374 7227 2020           'str'  
-000443b0: 203a 2072 6574 7572 6e20 7374 7269 6e67   : return string
-000443c0: 2028 2d72 7778 722d 2d72 2d2d 290a 2020   (-rwxr--r--).  
-000443d0: 2020 2020 2020 6465 6661 756c 743a 2046        default: F
-000443e0: 616c 7365 0a20 2020 2020 2020 2027 2727  alse.        '''
-000443f0: 0a20 2020 2020 2020 2064 6566 205f 6d6f  .        def _mo
-00044400: 6465 5f28 6f63 745f 6461 7461 2c6d 6f64  de_(oct_data,mod
-00044410: 653d 2763 686d 6f64 2729 3a0a 2020 2020  e='chmod'):.    
-00044420: 2020 2020 2020 2020 2363 6f6e 7665 7274          #convert
-00044430: 2074 6f20 6f63 7461 6c20 746f 2038 6269   to octal to 8bi
-00044440: 7420 6d61 736b 2c20 696e 742c 2073 7472  t mask, int, str
-00044450: 696e 670a 2020 2020 2020 2020 2020 2020  ing.            
-00044460: 6966 206d 6f64 6520 3d3d 2027 6368 6d6f  if mode == 'chmo
-00044470: 6427 3a0a 2020 2020 2020 2020 2020 2020  d':.            
-00044480: 2020 2020 7265 7475 726e 2069 6e74 286f      return int(o
-00044490: 6374 5f64 6174 612c 6261 7365 3d38 290a  ct_data,base=8).
-000444a0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-000444b0: 206d 6f64 6520 696e 205b 2769 6e74 272c   mode in ['int',
-000444c0: 696e 745d 3a0a 2020 2020 2020 2020 2020  int]:.          
-000444d0: 2020 2020 2020 7265 7475 726e 2069 6e74        return int
-000444e0: 286f 6374 5f64 6174 612e 7265 706c 6163  (oct_data.replac
-000444f0: 6528 276f 272c 2727 292c 6261 7365 3d31  e('o',''),base=1
-00044500: 3029 0a20 2020 2020 2020 2020 2020 2065  0).            e
-00044510: 6c69 6620 6d6f 6465 2069 6e20 5b27 7374  lif mode in ['st
-00044520: 7227 2c73 7472 5d3a 0a20 2020 2020 2020  r',str]:.       
-00044530: 2020 2020 2020 2020 206d 3d5b 5d0a 2020           m=[].  
-00044540: 2020 2020 2020 2020 2020 2020 2020 2366                #f
-00044550: 6f72 2069 2069 6e20 6c69 7374 2873 7472  or i in list(str
-00044560: 2869 6e74 286f 6374 5f64 6174 612c 6261  (int(oct_data,ba
-00044570: 7365 3d31 3029 2929 3a0a 2020 2020 2020  se=10))):.      
-00044580: 2020 2020 2020 2020 2020 743d 4661 6c73            t=Fals
-00044590: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000445a0: 2020 666f 7220 6e2c 6920 696e 2065 6e75    for n,i in enu
-000445b0: 6d65 7261 7465 2873 7472 2869 6e74 286f  merate(str(int(o
-000445c0: 6374 5f64 6174 612e 7265 706c 6163 6528  ct_data.replace(
-000445d0: 276f 272c 2727 292c 6261 7365 3d31 3029  'o',''),base=10)
-000445e0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-000445f0: 2020 2020 2020 2020 6966 206e 203d 3d20          if n == 
-00044600: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
-00044610: 2020 2020 2020 2020 2020 2069 6620 6920             if i 
-00044620: 3d3d 2027 3127 3a20 743d 5472 7565 0a20  == '1': t=True. 
-00044630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044640: 2020 2069 6620 6e20 3e20 303a 0a20 2020     if n > 0:.   
-00044650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044660: 2020 2020 2069 6620 6920 3d3d 2027 3727       if i == '7'
-00044670: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00044680: 2020 2020 2020 2020 2020 2020 2020 6d2e                m.
-00044690: 6170 7065 6e64 2827 7277 7827 290a 2020  append('rwx').  
-000446a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000446b0: 2020 2020 2020 656c 6966 2069 203d 3d20        elif i == 
-000446c0: 2736 273a 0a20 2020 2020 2020 2020 2020  '6':.           
-000446d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000446e0: 206d 2e61 7070 656e 6428 2772 772d 2729   m.append('rw-')
-000446f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00044700: 2020 2020 2020 2020 2065 6c69 6620 6920           elif i 
-00044710: 3d3d 2027 3527 3a0a 2020 2020 2020 2020  == '5':.        
-00044720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044730: 2020 2020 6d2e 6170 7065 6e64 2827 722d      m.append('r-
-00044740: 7827 290a 2020 2020 2020 2020 2020 2020  x').            
-00044750: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00044760: 2069 203d 3d20 2734 273a 0a20 2020 2020   i == '4':.     
-00044770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044780: 2020 2020 2020 206d 2e61 7070 656e 6428         m.append(
-00044790: 2772 2d2d 2729 0a20 2020 2020 2020 2020  'r--').         
-000447a0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000447b0: 6c69 6620 6920 3d3d 2027 3327 3a0a 2020  lif i == '3':.  
-000447c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000447d0: 2020 2020 2020 2020 2020 6d2e 6170 7065            m.appe
-000447e0: 6e64 2827 2d77 7827 290a 2020 2020 2020  nd('-wx').      
-000447f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044800: 2020 656c 6966 2069 203d 3d20 2732 273a    elif i == '2':
-00044810: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00044820: 2020 2020 2020 2020 2020 2020 206d 2e61               m.a
-00044830: 7070 656e 6428 272d 772d 2729 0a20 2020  ppend('-w-').   
-00044840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044850: 2020 2020 2065 6c69 6620 6920 3d3d 2027       elif i == '
-00044860: 3127 3a0a 2020 2020 2020 2020 2020 2020  1':.            
-00044870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044880: 6d2e 6170 7065 6e64 2827 2d2d 7827 290a  m.append('--x').
-00044890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000448a0: 7374 725f 6d6f 643d 4a6f 696e 286d 2c27  str_mod=Join(m,'
-000448b0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-000448c0: 2020 2069 6620 743a 2072 6574 7572 6e20     if t: return 
-000448d0: 7374 725f 6d6f 645b 3a2d 315d 2b27 7427  str_mod[:-1]+'t'
-000448e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000448f0: 2072 6574 7572 6e20 7374 725f 6d6f 640a   return str_mod.
-00044900: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00044910: 726e 206f 6374 5f64 6174 610a 2020 2020  rn oct_data.    
-00044920: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00044930: 6528 7661 6c2c 696e 7429 3a0a 2020 2020  e(val,int):.    
-00044940: 2020 2020 2020 2020 2369 6620 7661 6c20          #if val 
-00044950: 3e20 3531 313a 2020 2020 2020 2023 7374  > 511:       #st
-00044960: 6174 2e73 745f 6d6f 6465 2028 3332 3736  at.st_mode (3276
-00044970: 3820 7e20 3333 3237 3929 0a20 2020 2020  8 ~ 33279).     
-00044980: 2020 2020 2020 2023 7374 6174 2e73 745f         #stat.st_
-00044990: 6d6f 6465 2028 6669 6c65 3a20 3332 3736  mode (file: 3276
-000449a0: 387e 3336 3836 332c 2064 6972 6563 746f  8~36863, directo
-000449b0: 7279 3a20 3136 3338 3420 7e20 3230 3437  ry: 16384 ~ 2047
-000449c0: 3929 0a20 2020 2020 2020 2020 2020 2069  9).            i
-000449d0: 6620 3332 3736 3820 3c3d 2076 616c 203c  f 32768 <= val <
-000449e0: 3d20 3336 3836 3320 6f72 2031 3633 3834  = 36863 or 16384
-000449f0: 203c 3d20 7661 6c20 3c3d 2032 3034 3739   <= val <= 20479
-00044a00: 3a20 2020 2373 7461 742e 7374 5f6d 6f64  :   #stat.st_mod
-00044a10: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00044a20: 2020 2372 6574 7572 6e20 5f6d 6f64 655f    #return _mode_
-00044a30: 286f 6374 2876 616c 295b 2d34 3a5d 2c6d  (oct(val)[-4:],m
-00044a40: 6f64 6529 2023 2074 6f20 6f63 7461 6c20  ode) # to octal 
-00044a50: 6e75 6d62 6572 2028 6f63 7428 7661 6c29  number (oct(val)
-00044a60: 5b2d 343a 5d29 0a20 2020 2020 2020 2020  [-4:]).         
-00044a70: 2020 2020 2020 2072 6574 7572 6e20 5f6d         return _m
-00044a80: 6f64 655f 286f 6374 2876 616c 2026 2030  ode_(oct(val & 0
-00044a90: 6f37 3737 292c 6d6f 6465 2920 2320 746f  o777),mode) # to
-00044aa0: 206f 6374 616c 206e 756d 6265 7220 286f   octal number (o
-00044ab0: 6374 2876 616c 295b 2d34 3a5d 290a 2020  ct(val)[-4:]).  
-00044ac0: 2020 2020 2020 2020 2020 656c 6966 2035            elif 5
-00044ad0: 3131 203e 3d20 7661 6c20 3e20 3633 3a20  11 >= val > 63: 
-00044ae0: 2020 2020 2023 6d61 736b 0a20 2020 2020       #mask.     
-00044af0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00044b00: 6e20 5f6d 6f64 655f 286f 6374 2876 616c  n _mode_(oct(val
-00044b10: 292c 6d6f 6465 2920 2020 2020 2023 2074  ),mode)      # t
-00044b20: 6f20 6f63 616c 206e 756d 6265 7228 6f63  o ocal number(oc
-00044b30: 7428 7661 6c29 290a 2020 2020 2020 2020  t(val)).        
-00044b40: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00044b50: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00044b60: 205f 6d6f 6465 5f28 2725 3034 6427 2528   _mode_('%04d'%(
-00044b70: 7661 6c29 2c6d 6f64 6529 2020 2020 2020  val),mode)      
-00044b80: 2320 746f 206f 6361 6c20 6e75 6d62 6572  # to ocal number
-00044b90: 286f 6374 2876 616c 2929 0a20 2020 2020  (oct(val)).     
-00044ba0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00044bb0: 2020 2020 2076 616c 3d53 7472 2876 616c       val=Str(val
-00044bc0: 2c64 6566 6175 6c74 3d4e 6f6e 6529 0a20  ,default=None). 
-00044bd0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00044be0: 696e 7374 616e 6365 2876 616c 2c73 7472  instance(val,str
-00044bf0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00044c00: 2020 2076 616c 5f6c 656e 3d6c 656e 2876     val_len=len(v
-00044c10: 616c 290a 2020 2020 2020 2020 2020 2020  al).            
-00044c20: 2020 2020 6e75 6d3d 496e 7428 7661 6c2c      num=Int(val,
-00044c30: 6465 6661 756c 743d 4e6f 6e65 290a 2020  default=None).  
-00044c40: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00044c50: 2069 7369 6e73 7461 6e63 6528 6e75 6d2c   isinstance(num,
-00044c60: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
-00044c70: 2020 2020 2020 2020 2020 6966 2033 203c            if 3 <
-00044c80: 3d20 6c65 6e28 7661 6c29 203c 3d34 2061  = len(val) <=4 a
-00044c90: 6e64 2031 3030 203c 3d20 6e75 6d20 3c3d  nd 100 <= num <=
-00044ca0: 2037 3737 3a20 2373 7472 696e 6720 7479   777: #string ty
-00044cb0: 7065 206f 6620 7065 726d 6973 7369 6f6e  pe of permission
-00044cc0: 206e 756d 6265 7228 6f63 7461 6c20 6e75   number(octal nu
-00044cd0: 6d62 6572 290a 2020 2020 2020 2020 2020  mber).          
-00044ce0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00044cf0: 7475 726e 205f 6d6f 6465 5f28 2725 3034  turn _mode_('%04
-00044d00: 6427 2528 6e75 6d29 2c6d 6f64 6529 0a20  d'%(num),mode). 
-00044d10: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00044d20: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00044d30: 2020 2020 2020 2020 2076 616c 5f6c 656e           val_len
-00044d40: 3d6c 656e 2876 616c 290a 2020 2020 2020  =len(val).      
-00044d50: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00044d60: 2039 3c3d 2076 616c 5f6c 656e 203c 3d31   9<= val_len <=1
-00044d70: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
-00044d80: 2020 2020 2020 2020 2020 2069 6620 7661             if va
-00044d90: 6c5f 6c65 6e20 3d3d 2031 3020 616e 6420  l_len == 10 and 
-00044da0: 7661 6c5b 305d 2069 6e20 5b27 2d27 2c27  val[0] in ['-','
-00044db0: 6427 2c27 7327 5d3a 0a20 2020 2020 2020  d','s']:.       
-00044dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044dd0: 2020 2020 2076 616c 3d76 616c 5b31 3a5d       val=val[1:]
-00044de0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00044df0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00044e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044e10: 2020 2053 7464 4572 7228 2742 6164 2070     StdErr('Bad p
-00044e20: 6572 6d69 7373 696f 6e20 6c65 6e67 7468  ermission length
-00044e30: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-00044e40: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00044e50: 6e20 6465 6661 756c 740a 2020 2020 2020  n default.      
-00044e60: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00044e70: 206e 6f74 2061 6c6c 2876 616c 5b6b 5d20   not all(val[k] 
-00044e80: 696e 2027 7277 2d27 2066 6f72 206b 2069  in 'rw-' for k i
-00044e90: 6e20 5b30 2c31 2c33 2c34 2c36 2c37 5d29  n [0,1,3,4,6,7])
-00044ea0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00044eb0: 2020 2020 2020 2020 2020 5374 6445 7272            StdErr
-00044ec0: 2827 4261 6420 7065 726d 6973 7369 6f6e  ('Bad permission
-00044ed0: 2066 6f72 6d61 7420 2872 6561 642d 7772   format (read-wr
-00044ee0: 6974 6529 2729 0a20 2020 2020 2020 2020  ite)').         
-00044ef0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00044f00: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
-00044f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044f20: 2020 6966 206e 6f74 2061 6c6c 2876 616c    if not all(val
-00044f30: 5b6b 5d20 696e 2027 7873 2d27 2066 6f72  [k] in 'xs-' for
-00044f40: 206b 2069 6e20 5b32 2c35 5d29 3a0a 2020   k in [2,5]):.  
-00044f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044f60: 2020 2020 2020 5374 6445 7272 2827 4261        StdErr('Ba
-00044f70: 6420 7065 726d 6973 7369 6f6e 2066 6f72  d permission for
-00044f80: 6d61 7420 2865 7865 6375 7465 2927 290a  mat (execute)').
-00044f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044fa0: 2020 2020 2020 2020 7265 7475 726e 2064          return d
-00044fb0: 6566 6175 6c74 0a20 2020 2020 2020 2020  efault.         
-00044fc0: 2020 2020 2020 2020 2020 2069 6620 7661             if va
-00044fd0: 6c5b 385d 206e 6f74 2069 6e20 2778 742d  l[8] not in 'xt-
-00044fe0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-00044ff0: 2020 2020 2020 2020 2020 2053 7464 4572             StdEr
-00045000: 7228 2027 4261 6420 7065 726d 6973 7369  r( 'Bad permissi
-00045010: 6f6e 2066 6f72 6d61 7420 2865 7865 6375  on format (execu
-00045020: 7465 206f 7468 6572 2927 290a 2020 2020  te other)').    
-00045030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045040: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
-00045050: 6c74 0a20 2020 2020 2020 2020 2020 2020  lt.             
-00045060: 2020 2020 2020 206d 203d 2030 0a20 2020         m = 0.   
-00045070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045080: 2069 6620 7661 6c5b 305d 203d 3d20 2772   if val[0] == 'r
-00045090: 273a 206d 207c 3d20 7374 6174 2e53 5f49  ': m |= stat.S_I
-000450a0: 5255 5352 0a20 2020 2020 2020 2020 2020  RUSR.           
-000450b0: 2020 2020 2020 2020 2069 6620 7661 6c5b           if val[
-000450c0: 315d 203d 3d20 2777 273a 206d 207c 3d20  1] == 'w': m |= 
-000450d0: 7374 6174 2e53 5f49 5755 5352 0a20 2020  stat.S_IWUSR.   
-000450e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000450f0: 2069 6620 7661 6c5b 325d 203d 3d20 2778   if val[2] == 'x
-00045100: 273a 206d 207c 3d20 7374 6174 2e53 5f49  ': m |= stat.S_I
-00045110: 5855 5352 0a20 2020 2020 2020 2020 2020  XUSR.           
-00045120: 2020 2020 2020 2020 2069 6620 7661 6c5b           if val[
-00045130: 325d 203d 3d20 2773 273a 206d 207c 3d20  2] == 's': m |= 
-00045140: 7374 6174 2e53 5f49 5855 5352 207c 2073  stat.S_IXUSR | s
-00045150: 7461 742e 535f 4953 5549 440a 0a20 2020  tat.S_ISUID..   
+000440e0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+000440f0: 7374 616e 6365 2866 696e 666f 2c64 6963  stance(finfo,dic
+00044100: 7429 2061 6e64 2066 696e 666f 3a20 7365  t) and finfo: se
+00044110: 6c66 2e53 6574 4964 656e 7469 7479 286e  lf.SetIdentity(n
+00044120: 616d 652c 2a2a 6669 6e66 6f29 0a20 2020  ame,**finfo).   
+00044130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044140: 2020 2020 2023 6d6f 6465 3d73 656c 662e       #mode=self.
+00044150: 4d6f 6465 286d 6f64 6529 0a20 2020 2020  Mode(mode).     
+00044160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044170: 2020 2023 6966 206d 6f64 653a 206f 732e     #if mode: os.
+00044180: 6368 6d6f 6428 6e61 6d65 2c69 6e74 286d  chmod(name,int(m
+00044190: 6f64 652c 6261 7365 3d38 2929 0a20 2020  ode,base=8)).   
+000441a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000441b0: 2020 2020 2023 6966 2075 6964 2061 6e64       #if uid and
+000441c0: 2067 6964 3a20 6f73 2e63 686f 776e 286e   gid: os.chown(n
+000441d0: 616d 652c 7569 642c 6769 6429 0a20 2020  ame,uid,gid).   
+000441e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000441f0: 2020 2020 2023 6966 206d 7469 6d65 2061       #if mtime a
+00044200: 6e64 2061 7469 6d65 3a20 6f73 2e75 7469  nd atime: os.uti
+00044210: 6d65 286e 616d 652c 2861 7469 6d65 2c6d  me(name,(atime,m
+00044220: 7469 6d65 2929 2320 5469 6d65 2075 7064  time))# Time upd
+00044230: 6174 6520 6d75 7374 2062 6520 6174 206c  ate must be at l
+00044240: 6173 7420 6f72 6465 720a 2020 2020 2020  ast order.      
+00044250: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00044260: 7475 726e 2054 7275 652c 4e6f 6e65 0a20  turn True,None. 
+00044270: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00044280: 6620 6465 6661 756c 7420 3d3d 207b 2765  f default == {'e
+00044290: 7272 277d 3a0a 2020 2020 2020 2020 2020  rr'}:.          
+000442a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000442b0: 2046 616c 7365 2c27 4469 7265 6374 6f72   False,'Director
+000442c0: 7928 7b7d 2920 6e6f 7420 666f 756e 6427  y({}) not found'
+000442d0: 2e66 6f72 6d61 7428 6669 6c65 5f70 6174  .format(file_pat
+000442e0: 6829 0a20 2020 2020 2020 2020 2020 2020  h).             
+000442f0: 2020 2072 6574 7572 6e20 4661 6c73 652c     return False,
+00044300: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
+00044310: 6966 2064 6566 6175 6c74 203d 3d20 7b27  if default == {'
+00044320: 6572 7227 7d3a 0a20 2020 2020 2020 2020  err'}:.         
+00044330: 2020 2072 6574 7572 6e20 4661 6c73 652c     return False,
+00044340: 2755 6e6b 6e6f 776e 2074 7970 6528 7b7d  'Unknown type({}
+00044350: 2920 6669 6c65 6e61 6d65 272e 666f 726d  ) filename'.form
+00044360: 6174 286e 616d 6529 0a20 2020 2020 2020  at(name).       
+00044370: 2072 6574 7572 6e20 4661 6c73 652c 6465   return False,de
+00044380: 6661 756c 740a 0a20 2020 2064 6566 204d  fault..    def M
+00044390: 6f64 6528 7365 6c66 2c76 616c 2c6d 6f64  ode(self,val,mod
+000443a0: 653d 2763 686d 6f64 272c 6465 6661 756c  e='chmod',defaul
+000443b0: 743d 4661 6c73 6529 3a0a 2020 2020 2020  t=False):.      
+000443c0: 2020 2727 270a 2020 2020 2020 2020 636f    '''.        co
+000443d0: 6e76 6572 7420 4669 6c65 204d 6f64 6520  nvert File Mode 
+000443e0: 746f 206d 6173 6b0a 2020 2020 2020 2020  to mask.        
+000443f0: 6d6f 6465 200a 2020 2020 2020 2020 2020  mode .          
+00044400: 2027 6368 6d6f 6427 203a 2064 6566 6175   'chmod' : defau
+00044410: 6c74 2c20 636f 6e76 6572 7420 746f 206d  lt, convert to m
+00044420: 6173 6b20 286f 732e 6368 6d6f 6428 3c66  ask (os.chmod(<f
+00044430: 696c 653e 2c3c 6d61 736b 3e29 290a 2020  ile>,<mask>)).  
+00044440: 2020 2020 2020 2020 2027 696e 7427 2020           'int'  
+00044450: 203a 2072 6574 7572 6e20 746f 2069 6e74   : return to int
+00044460: 206e 756d 6265 7220 6f66 206f 6374 2820   number of oct( 
+00044470: 6578 3a20 3735 3520 290a 2020 2020 2020  ex: 755 ).      
+00044480: 2020 2020 2027 6f63 7427 2020 203a 2072       'oct'   : r
+00044490: 6574 7572 6e20 6f63 7420 6e75 6d62 6572  eturn oct number
+000444a0: 2028 7374 7269 6e67 290a 2020 2020 2020   (string).      
+000444b0: 2020 2020 2027 7374 7227 2020 203a 2072       'str'   : r
+000444c0: 6574 7572 6e20 7374 7269 6e67 2028 2d72  eturn string (-r
+000444d0: 7778 722d 2d72 2d2d 290a 2020 2020 2020  wxr--r--).      
+000444e0: 2020 6465 6661 756c 743a 2046 616c 7365    default: False
+000444f0: 0a20 2020 2020 2020 2027 2727 0a20 2020  .        '''.   
+00044500: 2020 2020 2064 6566 205f 6d6f 6465 5f28       def _mode_(
+00044510: 6f63 745f 6461 7461 2c6d 6f64 653d 2763  oct_data,mode='c
+00044520: 686d 6f64 2729 3a0a 2020 2020 2020 2020  hmod'):.        
+00044530: 2020 2020 2363 6f6e 7665 7274 2074 6f20      #convert to 
+00044540: 6f63 7461 6c20 746f 2038 6269 7420 6d61  octal to 8bit ma
+00044550: 736b 2c20 696e 742c 2073 7472 696e 670a  sk, int, string.
+00044560: 2020 2020 2020 2020 2020 2020 6966 206d              if m
+00044570: 6f64 6520 3d3d 2027 6368 6d6f 6427 3a0a  ode == 'chmod':.
+00044580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044590: 7265 7475 726e 2069 6e74 286f 6374 5f64  return int(oct_d
+000445a0: 6174 612c 6261 7365 3d38 290a 2020 2020  ata,base=8).    
+000445b0: 2020 2020 2020 2020 656c 6966 206d 6f64          elif mod
+000445c0: 6520 696e 205b 2769 6e74 272c 696e 745d  e in ['int',int]
+000445d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000445e0: 2020 7265 7475 726e 2069 6e74 286f 6374    return int(oct
+000445f0: 5f64 6174 612e 7265 706c 6163 6528 276f  _data.replace('o
+00044600: 272c 2727 292c 6261 7365 3d31 3029 0a20  ',''),base=10). 
+00044610: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00044620: 6d6f 6465 2069 6e20 5b27 7374 7227 2c73  mode in ['str',s
+00044630: 7472 5d3a 0a20 2020 2020 2020 2020 2020  tr]:.           
+00044640: 2020 2020 206d 3d5b 5d0a 2020 2020 2020       m=[].      
+00044650: 2020 2020 2020 2020 2020 2366 6f72 2069            #for i
+00044660: 2069 6e20 6c69 7374 2873 7472 2869 6e74   in list(str(int
+00044670: 286f 6374 5f64 6174 612c 6261 7365 3d31  (oct_data,base=1
+00044680: 3029 2929 3a0a 2020 2020 2020 2020 2020  0))):.          
+00044690: 2020 2020 2020 743d 4661 6c73 650a 2020        t=False.  
+000446a0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+000446b0: 7220 6e2c 6920 696e 2065 6e75 6d65 7261  r n,i in enumera
+000446c0: 7465 2873 7472 2869 6e74 286f 6374 5f64  te(str(int(oct_d
+000446d0: 6174 612e 7265 706c 6163 6528 276f 272c  ata.replace('o',
+000446e0: 2727 292c 6261 7365 3d31 3029 2929 3a0a  ''),base=10))):.
+000446f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044700: 2020 2020 6966 206e 203d 3d20 303a 0a20      if n == 0:. 
+00044710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044720: 2020 2020 2020 2069 6620 6920 3d3d 2027         if i == '
+00044730: 3127 3a20 743d 5472 7565 0a20 2020 2020  1': t=True.     
+00044740: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00044750: 6620 6e20 3e20 303a 0a20 2020 2020 2020  f n > 0:.       
+00044760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044770: 2069 6620 6920 3d3d 2027 3727 3a0a 2020   if i == '7':.  
+00044780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044790: 2020 2020 2020 2020 2020 6d2e 6170 7065            m.appe
+000447a0: 6e64 2827 7277 7827 290a 2020 2020 2020  nd('rwx').      
+000447b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000447c0: 2020 656c 6966 2069 203d 3d20 2736 273a    elif i == '6':
+000447d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000447e0: 2020 2020 2020 2020 2020 2020 206d 2e61               m.a
+000447f0: 7070 656e 6428 2772 772d 2729 0a20 2020  ppend('rw-').   
+00044800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044810: 2020 2020 2065 6c69 6620 6920 3d3d 2027       elif i == '
+00044820: 3527 3a0a 2020 2020 2020 2020 2020 2020  5':.            
+00044830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044840: 6d2e 6170 7065 6e64 2827 722d 7827 290a  m.append('r-x').
+00044850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044860: 2020 2020 2020 2020 656c 6966 2069 203d          elif i =
+00044870: 3d20 2734 273a 0a20 2020 2020 2020 2020  = '4':.         
+00044880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044890: 2020 206d 2e61 7070 656e 6428 2772 2d2d     m.append('r--
+000448a0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+000448b0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+000448c0: 6920 3d3d 2027 3327 3a0a 2020 2020 2020  i == '3':.      
+000448d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000448e0: 2020 2020 2020 6d2e 6170 7065 6e64 2827        m.append('
+000448f0: 2d77 7827 290a 2020 2020 2020 2020 2020  -wx').          
+00044900: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00044910: 6966 2069 203d 3d20 2732 273a 0a20 2020  if i == '2':.   
+00044920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044930: 2020 2020 2020 2020 206d 2e61 7070 656e           m.appen
+00044940: 6428 272d 772d 2729 0a20 2020 2020 2020  d('-w-').       
+00044950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044960: 2065 6c69 6620 6920 3d3d 2027 3127 3a0a   elif i == '1':.
+00044970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044980: 2020 2020 2020 2020 2020 2020 6d2e 6170              m.ap
+00044990: 7065 6e64 2827 2d2d 7827 290a 2020 2020  pend('--x').    
+000449a0: 2020 2020 2020 2020 2020 2020 7374 725f              str_
+000449b0: 6d6f 643d 4a6f 696e 286d 2c27 2729 0a20  mod=Join(m,''). 
+000449c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000449d0: 6620 743a 2072 6574 7572 6e20 7374 725f  f t: return str_
+000449e0: 6d6f 645b 3a2d 315d 2b27 7427 0a20 2020  mod[:-1]+'t'.   
+000449f0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00044a00: 7572 6e20 7374 725f 6d6f 640a 2020 2020  urn str_mod.    
+00044a10: 2020 2020 2020 2020 7265 7475 726e 206f          return o
+00044a20: 6374 5f64 6174 610a 2020 2020 2020 2020  ct_data.        
+00044a30: 6966 2069 7369 6e73 7461 6e63 6528 7661  if isinstance(va
+00044a40: 6c2c 696e 7429 3a0a 2020 2020 2020 2020  l,int):.        
+00044a50: 2020 2020 2369 6620 7661 6c20 3e20 3531      #if val > 51
+00044a60: 313a 2020 2020 2020 2023 7374 6174 2e73  1:       #stat.s
+00044a70: 745f 6d6f 6465 2028 3332 3736 3820 7e20  t_mode (32768 ~ 
+00044a80: 3333 3237 3929 0a20 2020 2020 2020 2020  33279).         
+00044a90: 2020 2023 7374 6174 2e73 745f 6d6f 6465     #stat.st_mode
+00044aa0: 2028 6669 6c65 3a20 3332 3736 387e 3336   (file: 32768~36
+00044ab0: 3836 332c 2064 6972 6563 746f 7279 3a20  863, directory: 
+00044ac0: 3136 3338 3420 7e20 3230 3437 3929 0a20  16384 ~ 20479). 
+00044ad0: 2020 2020 2020 2020 2020 2069 6620 3332             if 32
+00044ae0: 3736 3820 3c3d 2076 616c 203c 3d20 3336  768 <= val <= 36
+00044af0: 3836 3320 6f72 2031 3633 3834 203c 3d20  863 or 16384 <= 
+00044b00: 7661 6c20 3c3d 2032 3034 3739 3a20 2020  val <= 20479:   
+00044b10: 2373 7461 742e 7374 5f6d 6f64 650a 2020  #stat.st_mode.  
+00044b20: 2020 2020 2020 2020 2020 2020 2020 2372                #r
+00044b30: 6574 7572 6e20 5f6d 6f64 655f 286f 6374  eturn _mode_(oct
+00044b40: 2876 616c 295b 2d34 3a5d 2c6d 6f64 6529  (val)[-4:],mode)
+00044b50: 2023 2074 6f20 6f63 7461 6c20 6e75 6d62   # to octal numb
+00044b60: 6572 2028 6f63 7428 7661 6c29 5b2d 343a  er (oct(val)[-4:
+00044b70: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
+00044b80: 2020 2072 6574 7572 6e20 5f6d 6f64 655f     return _mode_
+00044b90: 286f 6374 2876 616c 2026 2030 6f37 3737  (oct(val & 0o777
+00044ba0: 292c 6d6f 6465 2920 2320 746f 206f 6374  ),mode) # to oct
+00044bb0: 616c 206e 756d 6265 7220 286f 6374 2876  al number (oct(v
+00044bc0: 616c 295b 2d34 3a5d 290a 2020 2020 2020  al)[-4:]).      
+00044bd0: 2020 2020 2020 656c 6966 2035 3131 203e        elif 511 >
+00044be0: 3d20 7661 6c20 3e20 3633 3a20 2020 2020  = val > 63:     
+00044bf0: 2023 6d61 736b 0a20 2020 2020 2020 2020   #mask.         
+00044c00: 2020 2020 2020 2072 6574 7572 6e20 5f6d         return _m
+00044c10: 6f64 655f 286f 6374 2876 616c 292c 6d6f  ode_(oct(val),mo
+00044c20: 6465 2920 2020 2020 2023 2074 6f20 6f63  de)      # to oc
+00044c30: 616c 206e 756d 6265 7228 6f63 7428 7661  al number(oct(va
+00044c40: 6c29 290a 2020 2020 2020 2020 2020 2020  l)).            
+00044c50: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00044c60: 2020 2020 2020 7265 7475 726e 205f 6d6f        return _mo
+00044c70: 6465 5f28 2725 3034 6427 2528 7661 6c29  de_('%04d'%(val)
+00044c80: 2c6d 6f64 6529 2020 2020 2020 2320 746f  ,mode)      # to
+00044c90: 206f 6361 6c20 6e75 6d62 6572 286f 6374   ocal number(oct
+00044ca0: 2876 616c 2929 0a20 2020 2020 2020 2065  (val)).        e
+00044cb0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00044cc0: 2076 616c 3d53 7472 2876 616c 2c64 6566   val=Str(val,def
+00044cd0: 6175 6c74 3d4e 6f6e 6529 0a20 2020 2020  ault=None).     
+00044ce0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00044cf0: 616e 6365 2876 616c 2c73 7472 293a 0a20  ance(val,str):. 
+00044d00: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+00044d10: 616c 5f6c 656e 3d6c 656e 2876 616c 290a  al_len=len(val).
+00044d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044d30: 6e75 6d3d 496e 7428 7661 6c2c 6465 6661  num=Int(val,defa
+00044d40: 756c 743d 4e6f 6e65 290a 2020 2020 2020  ult=None).      
+00044d50: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+00044d60: 6e73 7461 6e63 6528 6e75 6d2c 696e 7429  nstance(num,int)
+00044d70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00044d80: 2020 2020 2020 6966 2033 203c 3d20 6c65        if 3 <= le
+00044d90: 6e28 7661 6c29 203c 3d34 2061 6e64 2031  n(val) <=4 and 1
+00044da0: 3030 203c 3d20 6e75 6d20 3c3d 2037 3737  00 <= num <= 777
+00044db0: 3a20 2373 7472 696e 6720 7479 7065 206f  : #string type o
+00044dc0: 6620 7065 726d 6973 7369 6f6e 206e 756d  f permission num
+00044dd0: 6265 7228 6f63 7461 6c20 6e75 6d62 6572  ber(octal number
+00044de0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00044df0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00044e00: 205f 6d6f 6465 5f28 2725 3034 6427 2528   _mode_('%04d'%(
+00044e10: 6e75 6d29 2c6d 6f64 6529 0a20 2020 2020  num),mode).     
+00044e20: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00044e30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00044e40: 2020 2020 2076 616c 5f6c 656e 3d6c 656e       val_len=len
+00044e50: 2876 616c 290a 2020 2020 2020 2020 2020  (val).          
+00044e60: 2020 2020 2020 2020 2020 6966 2039 3c3d            if 9<=
+00044e70: 2076 616c 5f6c 656e 203c 3d31 303a 0a20   val_len <=10:. 
+00044e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044e90: 2020 2020 2020 2069 6620 7661 6c5f 6c65         if val_le
+00044ea0: 6e20 3d3d 2031 3020 616e 6420 7661 6c5b  n == 10 and val[
+00044eb0: 305d 2069 6e20 5b27 2d27 2c27 6427 2c27  0] in ['-','d','
+00044ec0: 7327 5d3a 0a20 2020 2020 2020 2020 2020  s']:.           
+00044ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044ee0: 2076 616c 3d76 616c 5b31 3a5d 0a20 2020   val=val[1:].   
+00044ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044f00: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00044f10: 2020 2020 2020 2020 2020 2020 2020 2053                 S
+00044f20: 7464 4572 7228 2742 6164 2070 6572 6d69  tdErr('Bad permi
+00044f30: 7373 696f 6e20 6c65 6e67 7468 2729 0a20  ssion length'). 
+00044f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044f50: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+00044f60: 6661 756c 740a 2020 2020 2020 2020 2020  fault.          
+00044f70: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00044f80: 2061 6c6c 2876 616c 5b6b 5d20 696e 2027   all(val[k] in '
+00044f90: 7277 2d27 2066 6f72 206b 2069 6e20 5b30  rw-' for k in [0
+00044fa0: 2c31 2c33 2c34 2c36 2c37 5d29 3a0a 2020  ,1,3,4,6,7]):.  
+00044fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044fc0: 2020 2020 2020 5374 6445 7272 2827 4261        StdErr('Ba
+00044fd0: 6420 7065 726d 6973 7369 6f6e 2066 6f72  d permission for
+00044fe0: 6d61 7420 2872 6561 642d 7772 6974 6529  mat (read-write)
+00044ff0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+00045000: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00045010: 6e20 6465 6661 756c 740a 2020 2020 2020  n default.      
+00045020: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00045030: 206e 6f74 2061 6c6c 2876 616c 5b6b 5d20   not all(val[k] 
+00045040: 696e 2027 7873 2d27 2066 6f72 206b 2069  in 'xs-' for k i
+00045050: 6e20 5b32 2c35 5d29 3a0a 2020 2020 2020  n [2,5]):.      
+00045060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045070: 2020 5374 6445 7272 2827 4261 6420 7065    StdErr('Bad pe
+00045080: 726d 6973 7369 6f6e 2066 6f72 6d61 7420  rmission format 
+00045090: 2865 7865 6375 7465 2927 290a 2020 2020  (execute)').    
+000450a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000450b0: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
+000450c0: 6c74 0a20 2020 2020 2020 2020 2020 2020  lt.             
+000450d0: 2020 2020 2020 2069 6620 7661 6c5b 385d         if val[8]
+000450e0: 206e 6f74 2069 6e20 2778 742d 273a 0a20   not in 'xt-':. 
+000450f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045100: 2020 2020 2020 2053 7464 4572 7228 2027         StdErr( '
+00045110: 4261 6420 7065 726d 6973 7369 6f6e 2066  Bad permission f
+00045120: 6f72 6d61 7420 2865 7865 6375 7465 206f  ormat (execute o
+00045130: 7468 6572 2927 290a 2020 2020 2020 2020  ther)').        
+00045140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045150: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
 00045160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045170: 2069 6620 7661 6c5b 335d 203d 3d20 2772   if val[3] == 'r
-00045180: 273a 206d 207c 3d20 7374 6174 2e53 5f49  ': m |= stat.S_I
-00045190: 5247 5250 0a20 2020 2020 2020 2020 2020  RGRP.           
-000451a0: 2020 2020 2020 2020 2069 6620 7661 6c5b           if val[
-000451b0: 345d 203d 3d20 2777 273a 206d 207c 3d20  4] == 'w': m |= 
-000451c0: 7374 6174 2e53 5f49 5747 5250 0a20 2020  stat.S_IWGRP.   
-000451d0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-000451e0: 6365 2876 616c 2c69 6e74 293a 0a20 2020  ce(val,int):.   
-000451f0: 2020 2020 2020 2020 2023 6966 2076 616c           #if val
-00045200: 203e 2035 3131 3a20 2020 2020 2020 2373   > 511:       #s
-00045210: 7461 742e 7374 5f6d 6f64 6520 2833 3237  tat.st_mode (327
-00045220: 3638 207e 2033 3332 3739 290a 2020 2020  68 ~ 33279).    
-00045230: 2020 2020 2020 2020 2373 7461 742e 7374          #stat.st
-00045240: 5f6d 6f64 6520 2866 696c 653a 2033 3237  _mode (file: 327
-00045250: 3638 7e33 3638 3633 2c20 6469 7265 6374  68~36863, direct
-00045260: 6f72 793a 2031 3633 3834 207e 2032 3034  ory: 16384 ~ 204
-00045270: 3739 290a 2020 2020 2020 2020 2020 2020  79).            
-00045280: 6966 2033 3237 3638 203c 3d20 7661 6c20  if 32768 <= val 
-00045290: 3c3d 2033 3638 3633 206f 7220 3136 3338  <= 36863 or 1638
-000452a0: 3420 3c3d 2076 616c 203c 3d20 3230 3437  4 <= val <= 2047
-000452b0: 393a 2020 2023 7374 6174 2e73 745f 6d6f  9:   #stat.st_mo
-000452c0: 6465 0a20 2020 2020 2020 2020 2020 2020  de.             
-000452d0: 2020 2023 7265 7475 726e 205f 6d6f 6465     #return _mode
-000452e0: 5f28 6f63 7428 7661 6c29 5b2d 343a 5d2c  _(oct(val)[-4:],
-000452f0: 6d6f 6465 2920 2320 746f 206f 6374 616c  mode) # to octal
-00045300: 206e 756d 6265 7220 286f 6374 2876 616c   number (oct(val
-00045310: 295b 2d34 3a5d 290a 2020 2020 2020 2020  )[-4:]).        
-00045320: 2020 2020 2020 2020 7265 7475 726e 205f          return _
-00045330: 6d6f 6465 5f28 6f63 7428 7661 6c20 2620  mode_(oct(val & 
-00045340: 306f 3737 3729 2c6d 6f64 6529 2023 2074  0o777),mode) # t
-00045350: 6f20 6f63 7461 6c20 6e75 6d62 6572 2028  o octal number (
-00045360: 6f63 7428 7661 6c29 5b2d 343a 5d29 0a20  oct(val)[-4:]). 
-00045370: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00045380: 3531 3120 3e3d 2076 616c 203e 2036 333a  511 >= val > 63:
-00045390: 2020 2020 2020 236d 6173 6b0a 2020 2020        #mask.    
-000453a0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000453b0: 726e 205f 6d6f 6465 5f28 6f63 7428 7661  rn _mode_(oct(va
-000453c0: 6c29 2c6d 6f64 6529 2020 2020 2020 2320  l),mode)      # 
-000453d0: 746f 206f 6361 6c20 6e75 6d62 6572 286f  to ocal number(o
-000453e0: 6374 2876 616c 2929 0a20 2020 2020 2020  ct(val)).       
-000453f0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00045400: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00045410: 6e20 5f6d 6f64 655f 2827 2530 3464 2725  n _mode_('%04d'%
-00045420: 2876 616c 292c 6d6f 6465 2920 2020 2020  (val),mode)     
-00045430: 2023 2074 6f20 6f63 616c 206e 756d 6265   # to ocal numbe
-00045440: 7228 6f63 7428 7661 6c29 290a 2020 2020  r(oct(val)).    
-00045450: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00045460: 2020 2020 2020 7661 6c3d 5374 7228 7661        val=Str(va
-00045470: 6c2c 6465 6661 756c 743d 4e6f 6e65 290a  l,default=None).
-00045480: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00045490: 7369 6e73 7461 6e63 6528 7661 6c2c 7374  sinstance(val,st
-000454a0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-000454b0: 2020 2020 7661 6c5f 6c65 6e3d 6c65 6e28      val_len=len(
-000454c0: 7661 6c29 0a20 2020 2020 2020 2020 2020  val).           
-000454d0: 2020 2020 206e 756d 3d49 6e74 2876 616c       num=Int(val
-000454e0: 2c64 6566 6175 6c74 3d4e 6f6e 6529 0a20  ,default=None). 
-000454f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00045500: 6620 6973 696e 7374 616e 6365 286e 756d  f isinstance(num
-00045510: 2c69 6e74 293a 0a20 2020 2020 2020 2020  ,int):.         
-00045520: 2020 2020 2020 2020 2020 2069 6620 3320             if 3 
-00045530: 3c3d 206c 656e 2876 616c 2920 3c3d 3420  <= len(val) <=4 
-00045540: 616e 6420 3130 3020 3c3d 206e 756d 203c  and 100 <= num <
-00045550: 3d20 3737 373a 2023 7374 7269 6e67 2074  = 777: #string t
-00045560: 7970 6520 6f66 2070 6572 6d69 7373 696f  ype of permissio
-00045570: 6e20 6e75 6d62 6572 286f 6374 616c 206e  n number(octal n
-00045580: 756d 6265 7229 0a20 2020 2020 2020 2020  umber).         
-00045590: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000455a0: 6574 7572 6e20 5f6d 6f64 655f 2827 2530  eturn _mode_('%0
-000455b0: 3464 2725 286e 756d 292c 6d6f 6465 290a  4d'%(num),mode).
-000455c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000455d0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-000455e0: 2020 2020 2020 2020 2020 7661 6c5f 6c65            val_le
-000455f0: 6e3d 6c65 6e28 7661 6c29 0a20 2020 2020  n=len(val).     
-00045600: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00045610: 6620 393c 3d20 7661 6c5f 6c65 6e20 3c3d  f 9<= val_len <=
-00045620: 3130 3a0a 2020 2020 2020 2020 2020 2020  10:.            
-00045630: 2020 2020 2020 2020 2020 2020 6966 2076              if v
-00045640: 616c 5f6c 656e 203d 3d20 3130 2061 6e64  al_len == 10 and
-00045650: 2076 616c 5b30 5d20 696e 205b 272d 272c   val[0] in ['-',
-00045660: 2764 272c 2773 275d 3a0a 2020 2020 2020  'd','s']:.      
-00045670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045680: 2020 2020 2020 7661 6c3d 7661 6c5b 313a        val=val[1:
-00045690: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-000456a0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-000456b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000456c0: 2020 2020 5374 6445 7272 2827 4261 6420      StdErr('Bad 
-000456d0: 7065 726d 6973 7369 6f6e 206c 656e 6774  permission lengt
-000456e0: 6827 290a 2020 2020 2020 2020 2020 2020  h').            
-000456f0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00045700: 726e 2064 6566 6175 6c74 0a20 2020 2020  rn default.     
-00045710: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00045720: 6620 6e6f 7420 616c 6c28 7661 6c5b 6b5d  f not all(val[k]
-00045730: 2069 6e20 2772 772d 2720 666f 7220 6b20   in 'rw-' for k 
-00045740: 696e 205b 302c 312c 332c 342c 362c 375d  in [0,1,3,4,6,7]
-00045750: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00045760: 2020 2020 2020 2020 2020 2053 7464 4572             StdEr
-00045770: 7228 2742 6164 2070 6572 6d69 7373 696f  r('Bad permissio
-00045780: 6e20 666f 726d 6174 2028 7265 6164 2d77  n format (read-w
-00045790: 7269 7465 2927 290a 2020 2020 2020 2020  rite)').        
+00045170: 2020 206d 203d 2030 0a20 2020 2020 2020     m = 0.       
+00045180: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00045190: 7661 6c5b 305d 203d 3d20 2772 273a 206d  val[0] == 'r': m
+000451a0: 207c 3d20 7374 6174 2e53 5f49 5255 5352   |= stat.S_IRUSR
+000451b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000451c0: 2020 2020 2069 6620 7661 6c5b 315d 203d       if val[1] =
+000451d0: 3d20 2777 273a 206d 207c 3d20 7374 6174  = 'w': m |= stat
+000451e0: 2e53 5f49 5755 5352 0a20 2020 2020 2020  .S_IWUSR.       
+000451f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00045200: 7661 6c5b 325d 203d 3d20 2778 273a 206d  val[2] == 'x': m
+00045210: 207c 3d20 7374 6174 2e53 5f49 5855 5352   |= stat.S_IXUSR
+00045220: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00045230: 2020 2020 2069 6620 7661 6c5b 325d 203d       if val[2] =
+00045240: 3d20 2773 273a 206d 207c 3d20 7374 6174  = 's': m |= stat
+00045250: 2e53 5f49 5855 5352 207c 2073 7461 742e  .S_IXUSR | stat.
+00045260: 535f 4953 5549 440a 0a20 2020 2020 2020  S_ISUID..       
+00045270: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00045280: 7661 6c5b 335d 203d 3d20 2772 273a 206d  val[3] == 'r': m
+00045290: 207c 3d20 7374 6174 2e53 5f49 5247 5250   |= stat.S_IRGRP
+000452a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000452b0: 2020 2020 2069 6620 7661 6c5b 345d 203d       if val[4] =
+000452c0: 3d20 2777 273a 206d 207c 3d20 7374 6174  = 'w': m |= stat
+000452d0: 2e53 5f49 5747 5250 0a20 2020 2020 2020  .S_IWGRP.       
+000452e0: 2069 6620 6973 696e 7374 616e 6365 2876   if isinstance(v
+000452f0: 616c 2c69 6e74 293a 0a20 2020 2020 2020  al,int):.       
+00045300: 2020 2020 2023 6966 2076 616c 203e 2035       #if val > 5
+00045310: 3131 3a20 2020 2020 2020 2373 7461 742e  11:       #stat.
+00045320: 7374 5f6d 6f64 6520 2833 3237 3638 207e  st_mode (32768 ~
+00045330: 2033 3332 3739 290a 2020 2020 2020 2020   33279).        
+00045340: 2020 2020 2373 7461 742e 7374 5f6d 6f64      #stat.st_mod
+00045350: 6520 2866 696c 653a 2033 3237 3638 7e33  e (file: 32768~3
+00045360: 3638 3633 2c20 6469 7265 6374 6f72 793a  6863, directory:
+00045370: 2031 3633 3834 207e 2032 3034 3739 290a   16384 ~ 20479).
+00045380: 2020 2020 2020 2020 2020 2020 6966 2033              if 3
+00045390: 3237 3638 203c 3d20 7661 6c20 3c3d 2033  2768 <= val <= 3
+000453a0: 3638 3633 206f 7220 3136 3338 3420 3c3d  6863 or 16384 <=
+000453b0: 2076 616c 203c 3d20 3230 3437 393a 2020   val <= 20479:  
+000453c0: 2023 7374 6174 2e73 745f 6d6f 6465 0a20   #stat.st_mode. 
+000453d0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000453e0: 7265 7475 726e 205f 6d6f 6465 5f28 6f63  return _mode_(oc
+000453f0: 7428 7661 6c29 5b2d 343a 5d2c 6d6f 6465  t(val)[-4:],mode
+00045400: 2920 2320 746f 206f 6374 616c 206e 756d  ) # to octal num
+00045410: 6265 7220 286f 6374 2876 616c 295b 2d34  ber (oct(val)[-4
+00045420: 3a5d 290a 2020 2020 2020 2020 2020 2020  :]).            
+00045430: 2020 2020 7265 7475 726e 205f 6d6f 6465      return _mode
+00045440: 5f28 6f63 7428 7661 6c20 2620 306f 3737  _(oct(val & 0o77
+00045450: 3729 2c6d 6f64 6529 2023 2074 6f20 6f63  7),mode) # to oc
+00045460: 7461 6c20 6e75 6d62 6572 2028 6f63 7428  tal number (oct(
+00045470: 7661 6c29 5b2d 343a 5d29 0a20 2020 2020  val)[-4:]).     
+00045480: 2020 2020 2020 2065 6c69 6620 3531 3120         elif 511 
+00045490: 3e3d 2076 616c 203e 2036 333a 2020 2020  >= val > 63:    
+000454a0: 2020 236d 6173 6b0a 2020 2020 2020 2020    #mask.        
+000454b0: 2020 2020 2020 2020 7265 7475 726e 205f          return _
+000454c0: 6d6f 6465 5f28 6f63 7428 7661 6c29 2c6d  mode_(oct(val),m
+000454d0: 6f64 6529 2020 2020 2020 2320 746f 206f  ode)      # to o
+000454e0: 6361 6c20 6e75 6d62 6572 286f 6374 2876  cal number(oct(v
+000454f0: 616c 2929 0a20 2020 2020 2020 2020 2020  al)).           
+00045500: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00045510: 2020 2020 2020 2072 6574 7572 6e20 5f6d         return _m
+00045520: 6f64 655f 2827 2530 3464 2725 2876 616c  ode_('%04d'%(val
+00045530: 292c 6d6f 6465 2920 2020 2020 2023 2074  ),mode)      # t
+00045540: 6f20 6f63 616c 206e 756d 6265 7228 6f63  o ocal number(oc
+00045550: 7428 7661 6c29 290a 2020 2020 2020 2020  t(val)).        
+00045560: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00045570: 2020 7661 6c3d 5374 7228 7661 6c2c 6465    val=Str(val,de
+00045580: 6661 756c 743d 4e6f 6e65 290a 2020 2020  fault=None).    
+00045590: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+000455a0: 7461 6e63 6528 7661 6c2c 7374 7229 3a0a  tance(val,str):.
+000455b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000455c0: 7661 6c5f 6c65 6e3d 6c65 6e28 7661 6c29  val_len=len(val)
+000455d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000455e0: 206e 756d 3d49 6e74 2876 616c 2c64 6566   num=Int(val,def
+000455f0: 6175 6c74 3d4e 6f6e 6529 0a20 2020 2020  ault=None).     
+00045600: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+00045610: 696e 7374 616e 6365 286e 756d 2c69 6e74  instance(num,int
+00045620: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00045630: 2020 2020 2020 2069 6620 3320 3c3d 206c         if 3 <= l
+00045640: 656e 2876 616c 2920 3c3d 3420 616e 6420  en(val) <=4 and 
+00045650: 3130 3020 3c3d 206e 756d 203c 3d20 3737  100 <= num <= 77
+00045660: 373a 2023 7374 7269 6e67 2074 7970 6520  7: #string type 
+00045670: 6f66 2070 6572 6d69 7373 696f 6e20 6e75  of permission nu
+00045680: 6d62 6572 286f 6374 616c 206e 756d 6265  mber(octal numbe
+00045690: 7229 0a20 2020 2020 2020 2020 2020 2020  r).             
+000456a0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000456b0: 6e20 5f6d 6f64 655f 2827 2530 3464 2725  n _mode_('%04d'%
+000456c0: 286e 756d 292c 6d6f 6465 290a 2020 2020  (num),mode).    
+000456d0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+000456e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000456f0: 2020 2020 2020 7661 6c5f 6c65 6e3d 6c65        val_len=le
+00045700: 6e28 7661 6c29 0a20 2020 2020 2020 2020  n(val).         
+00045710: 2020 2020 2020 2020 2020 2069 6620 393c             if 9<
+00045720: 3d20 7661 6c5f 6c65 6e20 3c3d 3130 3a0a  = val_len <=10:.
+00045730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045740: 2020 2020 2020 2020 6966 2076 616c 5f6c          if val_l
+00045750: 656e 203d 3d20 3130 2061 6e64 2076 616c  en == 10 and val
+00045760: 5b30 5d20 696e 205b 272d 272c 2764 272c  [0] in ['-','d',
+00045770: 2773 275d 3a0a 2020 2020 2020 2020 2020  's']:.          
+00045780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045790: 2020 7661 6c3d 7661 6c5b 313a 5d0a 2020    val=val[1:].  
 000457a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000457b0: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
+000457b0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
 000457c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000457d0: 2020 2069 6620 6e6f 7420 616c 6c28 7661     if not all(va
-000457e0: 6c5b 6b5d 2069 6e20 2778 732d 2720 666f  l[k] in 'xs-' fo
-000457f0: 7220 6b20 696e 205b 322c 355d 293a 0a20  r k in [2,5]):. 
-00045800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045810: 2020 2020 2020 2053 7464 4572 7228 2742         StdErr('B
-00045820: 6164 2070 6572 6d69 7373 696f 6e20 666f  ad permission fo
-00045830: 726d 6174 2028 6578 6563 7574 6529 2729  rmat (execute)')
-00045840: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00045850: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00045860: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
-00045870: 2020 2020 2020 2020 2020 2020 6966 2076              if v
-00045880: 616c 5b38 5d20 6e6f 7420 696e 2027 7874  al[8] not in 'xt
-00045890: 2d27 3a0a 2020 2020 2020 2020 2020 2020  -':.            
-000458a0: 2020 2020 2020 2020 2020 2020 5374 6445              StdE
-000458b0: 7272 2820 2742 6164 2070 6572 6d69 7373  rr( 'Bad permiss
-000458c0: 696f 6e20 666f 726d 6174 2028 6578 6563  ion format (exec
-000458d0: 7574 6520 6f74 6865 7229 2729 0a20 2020  ute other)').   
-000458e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000458f0: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-00045900: 756c 740a 2020 2020 2020 2020 2020 2020  ult.            
-00045910: 2020 2020 2020 2020 6d20 3d20 300a 2020          m = 0.  
-00045920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045930: 2020 6966 2076 616c 5b30 5d20 3d3d 2027    if val[0] == '
-00045940: 7227 3a20 6d20 7c3d 2073 7461 742e 535f  r': m |= stat.S_
-00045950: 4952 5553 520a 2020 2020 2020 2020 2020  IRUSR.          
-00045960: 2020 2020 2020 2020 2020 6966 2076 616c            if val
-00045970: 5b31 5d20 3d3d 2027 7727 3a20 6d20 7c3d  [1] == 'w': m |=
-00045980: 2073 7461 742e 535f 4957 5553 520a 2020   stat.S_IWUSR.  
-00045990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000459a0: 2020 6966 2076 616c 5b32 5d20 3d3d 2027    if val[2] == '
-000459b0: 7827 3a20 6d20 7c3d 2073 7461 742e 535f  x': m |= stat.S_
-000459c0: 4958 5553 520a 2020 2020 2020 2020 2020  IXUSR.          
-000459d0: 2020 2020 2020 2020 2020 6966 2076 616c            if val
-000459e0: 5b32 5d20 3d3d 2027 7327 3a20 6d20 7c3d  [2] == 's': m |=
-000459f0: 2073 7461 742e 535f 4958 5553 5220 7c20   stat.S_IXUSR | 
-00045a00: 7374 6174 2e53 5f49 5355 4944 0a0a 2020  stat.S_ISUID..  
+000457d0: 5374 6445 7272 2827 4261 6420 7065 726d  StdErr('Bad perm
+000457e0: 6973 7369 6f6e 206c 656e 6774 6827 290a  ission length').
+000457f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045800: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+00045810: 6566 6175 6c74 0a20 2020 2020 2020 2020  efault.         
+00045820: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00045830: 7420 616c 6c28 7661 6c5b 6b5d 2069 6e20  t all(val[k] in 
+00045840: 2772 772d 2720 666f 7220 6b20 696e 205b  'rw-' for k in [
+00045850: 302c 312c 332c 342c 362c 375d 293a 0a20  0,1,3,4,6,7]):. 
+00045860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045870: 2020 2020 2020 2053 7464 4572 7228 2742         StdErr('B
+00045880: 6164 2070 6572 6d69 7373 696f 6e20 666f  ad permission fo
+00045890: 726d 6174 2028 7265 6164 2d77 7269 7465  rmat (read-write
+000458a0: 2927 290a 2020 2020 2020 2020 2020 2020  )').            
+000458b0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000458c0: 726e 2064 6566 6175 6c74 0a20 2020 2020  rn default.     
+000458d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000458e0: 6620 6e6f 7420 616c 6c28 7661 6c5b 6b5d  f not all(val[k]
+000458f0: 2069 6e20 2778 732d 2720 666f 7220 6b20   in 'xs-' for k 
+00045900: 696e 205b 322c 355d 293a 0a20 2020 2020  in [2,5]):.     
+00045910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045920: 2020 2053 7464 4572 7228 2742 6164 2070     StdErr('Bad p
+00045930: 6572 6d69 7373 696f 6e20 666f 726d 6174  ermission format
+00045940: 2028 6578 6563 7574 6529 2729 0a20 2020   (execute)').   
+00045950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045960: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
+00045970: 756c 740a 2020 2020 2020 2020 2020 2020  ult.            
+00045980: 2020 2020 2020 2020 6966 2076 616c 5b38          if val[8
+00045990: 5d20 6e6f 7420 696e 2027 7874 2d27 3a0a  ] not in 'xt-':.
+000459a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000459b0: 2020 2020 2020 2020 5374 6445 7272 2820          StdErr( 
+000459c0: 2742 6164 2070 6572 6d69 7373 696f 6e20  'Bad permission 
+000459d0: 666f 726d 6174 2028 6578 6563 7574 6520  format (execute 
+000459e0: 6f74 6865 7229 2729 0a20 2020 2020 2020  other)').       
+000459f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045a00: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
 00045a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045a20: 2020 6966 2076 616c 5b33 5d20 3d3d 2027    if val[3] == '
-00045a30: 7227 3a20 6d20 7c3d 2073 7461 742e 535f  r': m |= stat.S_
-00045a40: 4952 4752 500a 2020 2020 2020 2020 2020  IRGRP.          
-00045a50: 2020 2020 2020 2020 2020 6966 2076 616c            if val
-00045a60: 5b34 5d20 3d3d 2027 7727 3a20 6d20 7c3d  [4] == 'w': m |=
-00045a70: 2073 7461 742e 535f 4957 4752 500a 2020   stat.S_IWGRP.  
-00045a80: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00045a90: 6e63 6528 7661 6c2c 696e 7429 3a0a 2020  nce(val,int):.  
-00045aa0: 2020 2020 2020 2020 2020 2369 6620 7661            #if va
-00045ab0: 6c20 3e20 3531 313a 2020 2020 2020 2023  l > 511:       #
-00045ac0: 7374 6174 2e73 745f 6d6f 6465 2028 3332  stat.st_mode (32
-00045ad0: 3736 3820 7e20 3333 3237 3929 0a20 2020  768 ~ 33279).   
-00045ae0: 2020 2020 2020 2020 2023 7374 6174 2e73           #stat.s
-00045af0: 745f 6d6f 6465 2028 6669 6c65 3a20 3332  t_mode (file: 32
-00045b00: 3736 387e 3336 3836 332c 2064 6972 6563  768~36863, direc
-00045b10: 746f 7279 3a20 3136 3338 3420 7e20 3230  tory: 16384 ~ 20
-00045b20: 3437 3929 0a20 2020 2020 2020 2020 2020  479).           
-00045b30: 2069 6620 3332 3736 3820 3c3d 2076 616c   if 32768 <= val
-00045b40: 203c 3d20 3336 3836 3320 6f72 2031 3633   <= 36863 or 163
-00045b50: 3834 203c 3d20 7661 6c20 3c3d 2032 3034  84 <= val <= 204
-00045b60: 3739 3a20 2020 2373 7461 742e 7374 5f6d  79:   #stat.st_m
-00045b70: 6f64 650a 2020 2020 2020 2020 2020 2020  ode.            
-00045b80: 2020 2020 2372 6574 7572 6e20 5f6d 6f64      #return _mod
-00045b90: 655f 286f 6374 2876 616c 295b 2d34 3a5d  e_(oct(val)[-4:]
-00045ba0: 2c6d 6f64 6529 2023 2074 6f20 6f63 7461  ,mode) # to octa
-00045bb0: 6c20 6e75 6d62 6572 2028 6f63 7428 7661  l number (oct(va
-00045bc0: 6c29 5b2d 343a 5d29 0a20 2020 2020 2020  l)[-4:]).       
-00045bd0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00045be0: 5f6d 6f64 655f 286f 6374 2876 616c 2026  _mode_(oct(val &
-00045bf0: 2030 6f37 3737 292c 6d6f 6465 2920 2320   0o777),mode) # 
-00045c00: 746f 206f 6374 616c 206e 756d 6265 7220  to octal number 
-00045c10: 286f 6374 2876 616c 295b 2d34 3a5d 290a  (oct(val)[-4:]).
-00045c20: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00045c30: 2035 3131 203e 3d20 7661 6c20 3e20 3633   511 >= val > 63
-00045c40: 3a20 2020 2020 2023 6d61 736b 0a20 2020  :      #mask.   
-00045c50: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00045c60: 7572 6e20 5f6d 6f64 655f 286f 6374 2876  urn _mode_(oct(v
-00045c70: 616c 292c 6d6f 6465 2920 2020 2020 2023  al),mode)      #
-00045c80: 2074 6f20 6f63 616c 206e 756d 6265 7228   to ocal number(
-00045c90: 6f63 7428 7661 6c29 290a 2020 2020 2020  oct(val)).      
-00045ca0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00045cb0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00045cc0: 726e 205f 6d6f 6465 5f28 2725 3034 6427  rn _mode_('%04d'
-00045cd0: 2528 7661 6c29 2c6d 6f64 6529 2020 2020  %(val),mode)    
-00045ce0: 2020 2320 746f 206f 6361 6c20 6e75 6d62    # to ocal numb
-00045cf0: 6572 286f 6374 2876 616c 2929 0a20 2020  er(oct(val)).   
-00045d00: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00045d10: 2020 2020 2020 2076 616c 3d53 7472 2876         val=Str(v
-00045d20: 616c 2c64 6566 6175 6c74 3d4e 6f6e 6529  al,default=None)
-00045d30: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00045d40: 6973 696e 7374 616e 6365 2876 616c 2c73  isinstance(val,s
-00045d50: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
-00045d60: 2020 2020 2076 616c 5f6c 656e 3d6c 656e       val_len=len
-00045d70: 2876 616c 290a 2020 2020 2020 2020 2020  (val).          
-00045d80: 2020 2020 2020 6e75 6d3d 496e 7428 7661        num=Int(va
-00045d90: 6c2c 6465 6661 756c 743d 4e6f 6e65 290a  l,default=None).
-00045da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045db0: 6966 2069 7369 6e73 7461 6e63 6528 6e75  if isinstance(nu
-00045dc0: 6d2c 696e 7429 3a0a 2020 2020 2020 2020  m,int):.        
-00045dd0: 2020 2020 2020 2020 2020 2020 6966 2033              if 3
-00045de0: 203c 3d20 6c65 6e28 7661 6c29 203c 3d34   <= len(val) <=4
-00045df0: 2061 6e64 2031 3030 203c 3d20 6e75 6d20   and 100 <= num 
-00045e00: 3c3d 2037 3737 3a20 2373 7472 696e 6720  <= 777: #string 
-00045e10: 7479 7065 206f 6620 7065 726d 6973 7369  type of permissi
-00045e20: 6f6e 206e 756d 6265 7228 6f63 7461 6c20  on number(octal 
-00045e30: 6e75 6d62 6572 290a 2020 2020 2020 2020  number).        
-00045e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045e50: 7265 7475 726e 205f 6d6f 6465 5f28 2725  return _mode_('%
-00045e60: 3034 6427 2528 6e75 6d29 2c6d 6f64 6529  04d'%(num),mode)
-00045e70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00045e80: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00045e90: 2020 2020 2020 2020 2020 2076 616c 5f6c             val_l
-00045ea0: 656e 3d6c 656e 2876 616c 290a 2020 2020  en=len(val).    
-00045eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045ec0: 6966 2039 3c3d 2076 616c 5f6c 656e 203c  if 9<= val_len <
-00045ed0: 3d31 303a 0a20 2020 2020 2020 2020 2020  =10:.           
-00045ee0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00045ef0: 7661 6c5f 6c65 6e20 3d3d 2031 3020 616e  val_len == 10 an
-00045f00: 6420 7661 6c5b 305d 2069 6e20 5b27 2d27  d val[0] in ['-'
-00045f10: 2c27 6427 2c27 7327 5d3a 0a20 2020 2020  ,'d','s']:.     
-00045f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045f30: 2020 2020 2020 2076 616c 3d76 616c 5b31         val=val[1
-00045f40: 3a5d 0a20 2020 2020 2020 2020 2020 2020  :].             
-00045f50: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00045f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045f70: 2020 2020 2053 7464 4572 7228 2742 6164       StdErr('Bad
-00045f80: 2070 6572 6d69 7373 696f 6e20 6c65 6e67   permission leng
-00045f90: 7468 2729 0a20 2020 2020 2020 2020 2020  th').           
-00045fa0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00045fb0: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
-00045fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045fd0: 6966 206e 6f74 2061 6c6c 2876 616c 5b6b  if not all(val[k
-00045fe0: 5d20 696e 2027 7277 2d27 2066 6f72 206b  ] in 'rw-' for k
-00045ff0: 2069 6e20 5b30 2c31 2c33 2c34 2c36 2c37   in [0,1,3,4,6,7
-00046000: 5d29 3a0a 2020 2020 2020 2020 2020 2020  ]):.            
-00046010: 2020 2020 2020 2020 2020 2020 5374 6445              StdE
-00046020: 7272 2827 4261 6420 7065 726d 6973 7369  rr('Bad permissi
-00046030: 6f6e 2066 6f72 6d61 7420 2872 6561 642d  on format (read-
-00046040: 7772 6974 6529 2729 0a20 2020 2020 2020  write)').       
+00045a20: 2020 2020 6d20 3d20 300a 2020 2020 2020      m = 0.      
+00045a30: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00045a40: 2076 616c 5b30 5d20 3d3d 2027 7227 3a20   val[0] == 'r': 
+00045a50: 6d20 7c3d 2073 7461 742e 535f 4952 5553  m |= stat.S_IRUS
+00045a60: 520a 2020 2020 2020 2020 2020 2020 2020  R.              
+00045a70: 2020 2020 2020 6966 2076 616c 5b31 5d20        if val[1] 
+00045a80: 3d3d 2027 7727 3a20 6d20 7c3d 2073 7461  == 'w': m |= sta
+00045a90: 742e 535f 4957 5553 520a 2020 2020 2020  t.S_IWUSR.      
+00045aa0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00045ab0: 2076 616c 5b32 5d20 3d3d 2027 7827 3a20   val[2] == 'x': 
+00045ac0: 6d20 7c3d 2073 7461 742e 535f 4958 5553  m |= stat.S_IXUS
+00045ad0: 520a 2020 2020 2020 2020 2020 2020 2020  R.              
+00045ae0: 2020 2020 2020 6966 2076 616c 5b32 5d20        if val[2] 
+00045af0: 3d3d 2027 7327 3a20 6d20 7c3d 2073 7461  == 's': m |= sta
+00045b00: 742e 535f 4958 5553 5220 7c20 7374 6174  t.S_IXUSR | stat
+00045b10: 2e53 5f49 5355 4944 0a0a 2020 2020 2020  .S_ISUID..      
+00045b20: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00045b30: 2076 616c 5b33 5d20 3d3d 2027 7227 3a20   val[3] == 'r': 
+00045b40: 6d20 7c3d 2073 7461 742e 535f 4952 4752  m |= stat.S_IRGR
+00045b50: 500a 2020 2020 2020 2020 2020 2020 2020  P.              
+00045b60: 2020 2020 2020 6966 2076 616c 5b34 5d20        if val[4] 
+00045b70: 3d3d 2027 7727 3a20 6d20 7c3d 2073 7461  == 'w': m |= sta
+00045b80: 742e 535f 4957 4752 500a 2020 2020 2020  t.S_IWGRP.      
+00045b90: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00045ba0: 7661 6c2c 696e 7429 3a0a 2020 2020 2020  val,int):.      
+00045bb0: 2020 2020 2020 2369 6620 7661 6c20 3e20        #if val > 
+00045bc0: 3531 313a 2020 2020 2020 2023 7374 6174  511:       #stat
+00045bd0: 2e73 745f 6d6f 6465 2028 3332 3736 3820  .st_mode (32768 
+00045be0: 7e20 3333 3237 3929 0a20 2020 2020 2020  ~ 33279).       
+00045bf0: 2020 2020 2023 7374 6174 2e73 745f 6d6f       #stat.st_mo
+00045c00: 6465 2028 6669 6c65 3a20 3332 3736 387e  de (file: 32768~
+00045c10: 3336 3836 332c 2064 6972 6563 746f 7279  36863, directory
+00045c20: 3a20 3136 3338 3420 7e20 3230 3437 3929  : 16384 ~ 20479)
+00045c30: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00045c40: 3332 3736 3820 3c3d 2076 616c 203c 3d20  32768 <= val <= 
+00045c50: 3336 3836 3320 6f72 2031 3633 3834 203c  36863 or 16384 <
+00045c60: 3d20 7661 6c20 3c3d 2032 3034 3739 3a20  = val <= 20479: 
+00045c70: 2020 2373 7461 742e 7374 5f6d 6f64 650a    #stat.st_mode.
+00045c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045c90: 2372 6574 7572 6e20 5f6d 6f64 655f 286f  #return _mode_(o
+00045ca0: 6374 2876 616c 295b 2d34 3a5d 2c6d 6f64  ct(val)[-4:],mod
+00045cb0: 6529 2023 2074 6f20 6f63 7461 6c20 6e75  e) # to octal nu
+00045cc0: 6d62 6572 2028 6f63 7428 7661 6c29 5b2d  mber (oct(val)[-
+00045cd0: 343a 5d29 0a20 2020 2020 2020 2020 2020  4:]).           
+00045ce0: 2020 2020 2072 6574 7572 6e20 5f6d 6f64       return _mod
+00045cf0: 655f 286f 6374 2876 616c 2026 2030 6f37  e_(oct(val & 0o7
+00045d00: 3737 292c 6d6f 6465 2920 2320 746f 206f  77),mode) # to o
+00045d10: 6374 616c 206e 756d 6265 7220 286f 6374  ctal number (oct
+00045d20: 2876 616c 295b 2d34 3a5d 290a 2020 2020  (val)[-4:]).    
+00045d30: 2020 2020 2020 2020 656c 6966 2035 3131          elif 511
+00045d40: 203e 3d20 7661 6c20 3e20 3633 3a20 2020   >= val > 63:   
+00045d50: 2020 2023 6d61 736b 0a20 2020 2020 2020     #mask.       
+00045d60: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00045d70: 5f6d 6f64 655f 286f 6374 2876 616c 292c  _mode_(oct(val),
+00045d80: 6d6f 6465 2920 2020 2020 2023 2074 6f20  mode)      # to 
+00045d90: 6f63 616c 206e 756d 6265 7228 6f63 7428  ocal number(oct(
+00045da0: 7661 6c29 290a 2020 2020 2020 2020 2020  val)).          
+00045db0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00045dc0: 2020 2020 2020 2020 7265 7475 726e 205f          return _
+00045dd0: 6d6f 6465 5f28 2725 3034 6427 2528 7661  mode_('%04d'%(va
+00045de0: 6c29 2c6d 6f64 6529 2020 2020 2020 2320  l),mode)      # 
+00045df0: 746f 206f 6361 6c20 6e75 6d62 6572 286f  to ocal number(o
+00045e00: 6374 2876 616c 2929 0a20 2020 2020 2020  ct(val)).       
+00045e10: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00045e20: 2020 2076 616c 3d53 7472 2876 616c 2c64     val=Str(val,d
+00045e30: 6566 6175 6c74 3d4e 6f6e 6529 0a20 2020  efault=None).   
+00045e40: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00045e50: 7374 616e 6365 2876 616c 2c73 7472 293a  stance(val,str):
+00045e60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00045e70: 2076 616c 5f6c 656e 3d6c 656e 2876 616c   val_len=len(val
+00045e80: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00045e90: 2020 6e75 6d3d 496e 7428 7661 6c2c 6465    num=Int(val,de
+00045ea0: 6661 756c 743d 4e6f 6e65 290a 2020 2020  fault=None).    
+00045eb0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00045ec0: 7369 6e73 7461 6e63 6528 6e75 6d2c 696e  sinstance(num,in
+00045ed0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+00045ee0: 2020 2020 2020 2020 6966 2033 203c 3d20          if 3 <= 
+00045ef0: 6c65 6e28 7661 6c29 203c 3d34 2061 6e64  len(val) <=4 and
+00045f00: 2031 3030 203c 3d20 6e75 6d20 3c3d 2037   100 <= num <= 7
+00045f10: 3737 3a20 2373 7472 696e 6720 7479 7065  77: #string type
+00045f20: 206f 6620 7065 726d 6973 7369 6f6e 206e   of permission n
+00045f30: 756d 6265 7228 6f63 7461 6c20 6e75 6d62  umber(octal numb
+00045f40: 6572 290a 2020 2020 2020 2020 2020 2020  er).            
+00045f50: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00045f60: 726e 205f 6d6f 6465 5f28 2725 3034 6427  rn _mode_('%04d'
+00045f70: 2528 6e75 6d29 2c6d 6f64 6529 0a20 2020  %(num),mode).   
+00045f80: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00045f90: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00045fa0: 2020 2020 2020 2076 616c 5f6c 656e 3d6c         val_len=l
+00045fb0: 656e 2876 616c 290a 2020 2020 2020 2020  en(val).        
+00045fc0: 2020 2020 2020 2020 2020 2020 6966 2039              if 9
+00045fd0: 3c3d 2076 616c 5f6c 656e 203c 3d31 303a  <= val_len <=10:
+00045fe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00045ff0: 2020 2020 2020 2020 2069 6620 7661 6c5f           if val_
+00046000: 6c65 6e20 3d3d 2031 3020 616e 6420 7661  len == 10 and va
+00046010: 6c5b 305d 2069 6e20 5b27 2d27 2c27 6427  l[0] in ['-','d'
+00046020: 2c27 7327 5d3a 0a20 2020 2020 2020 2020  ,'s']:.         
+00046030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046040: 2020 2076 616c 3d76 616c 5b31 3a5d 0a20     val=val[1:]. 
 00046050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046060: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+00046060: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
 00046070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046080: 2020 2020 6966 206e 6f74 2061 6c6c 2876      if not all(v
-00046090: 616c 5b6b 5d20 696e 2027 7873 2d27 2066  al[k] in 'xs-' f
-000460a0: 6f72 206b 2069 6e20 5b32 2c35 5d29 3a0a  or k in [2,5]):.
-000460b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000460c0: 2020 2020 2020 2020 5374 6445 7272 2827          StdErr('
-000460d0: 4261 6420 7065 726d 6973 7369 6f6e 2066  Bad permission f
-000460e0: 6f72 6d61 7420 2865 7865 6375 7465 2927  ormat (execute)'
-000460f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00046100: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00046110: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
-00046120: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00046130: 7661 6c5b 385d 206e 6f74 2069 6e20 2778  val[8] not in 'x
-00046140: 742d 273a 0a20 2020 2020 2020 2020 2020  t-':.           
-00046150: 2020 2020 2020 2020 2020 2020 2053 7464               Std
-00046160: 4572 7228 2027 4261 6420 7065 726d 6973  Err( 'Bad permis
-00046170: 7369 6f6e 2066 6f72 6d61 7420 2865 7865  sion format (exe
-00046180: 6375 7465 206f 7468 6572 2927 290a 2020  cute other)').  
-00046190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000461a0: 2020 2020 2020 7265 7475 726e 2064 6566        return def
-000461b0: 6175 6c74 0a20 2020 2020 2020 2020 2020  ault.           
-000461c0: 2020 2020 2020 2020 206d 203d 2030 0a20           m = 0. 
-000461d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000461e0: 2020 2069 6620 7661 6c5b 305d 203d 3d20     if val[0] == 
-000461f0: 2772 273a 206d 207c 3d20 7374 6174 2e53  'r': m |= stat.S
-00046200: 5f49 5255 5352 0a20 2020 2020 2020 2020  _IRUSR.         
-00046210: 2020 2020 2020 2020 2020 2069 6620 7661             if va
-00046220: 6c5b 315d 203d 3d20 2777 273a 206d 207c  l[1] == 'w': m |
-00046230: 3d20 7374 6174 2e53 5f49 5755 5352 0a20  = stat.S_IWUSR. 
-00046240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046250: 2020 2069 6620 7661 6c5b 325d 203d 3d20     if val[2] == 
-00046260: 2778 273a 206d 207c 3d20 7374 6174 2e53  'x': m |= stat.S
-00046270: 5f49 5855 5352 0a20 2020 2020 2020 2020  _IXUSR.         
-00046280: 2020 2020 2020 2020 2020 2069 6620 7661             if va
-00046290: 6c5b 325d 203d 3d20 2773 273a 206d 207c  l[2] == 's': m |
-000462a0: 3d20 7374 6174 2e53 5f49 5855 5352 207c  = stat.S_IXUSR |
-000462b0: 2073 7461 742e 535f 4953 5549 440a 0a20   stat.S_ISUID.. 
-000462c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000462d0: 2020 2069 6620 7661 6c5b 335d 203d 3d20     if val[3] == 
-000462e0: 2772 273a 206d 207c 3d20 7374 6174 2e53  'r': m |= stat.S
-000462f0: 5f49 5247 5250 0a20 2020 2020 2020 2020  _IRGRP.         
-00046300: 2020 2020 2020 2020 2020 2069 6620 7661             if va
-00046310: 6c5b 345d 203d 3d20 2777 273a 206d 207c  l[4] == 'w': m |
-00046320: 3d20 7374 6174 2e53 5f49 5747 5250 0a20  = stat.S_IWGRP. 
-00046330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046340: 2020 2069 6620 7661 6c5b 355d 203d 3d20     if val[5] == 
-00046350: 2778 273a 206d 207c 3d20 7374 6174 2e53  'x': m |= stat.S
-00046360: 5f49 5847 5250 0a20 2020 2020 2020 2020  _IXGRP.         
-00046370: 2020 2020 2020 2020 2020 2069 6620 7661             if va
-00046380: 6c5b 355d 203d 3d20 2773 273a 206d 207c  l[5] == 's': m |
-00046390: 3d20 7374 6174 2e53 5f49 5847 5250 207c  = stat.S_IXGRP |
-000463a0: 2073 7461 742e 535f 4953 4749 440a 0a20   stat.S_ISGID.. 
-000463b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000463c0: 2020 2069 6620 7661 6c5b 365d 203d 3d20     if val[6] == 
-000463d0: 2772 273a 206d 207c 3d20 7374 6174 2e53  'r': m |= stat.S
-000463e0: 5f49 524f 5448 0a20 2020 2020 2020 2020  _IROTH.         
-000463f0: 2020 2020 2020 2020 2020 2069 6620 7661             if va
-00046400: 6c5b 375d 203d 3d20 2777 273a 206d 207c  l[7] == 'w': m |
-00046410: 3d20 7374 6174 2e53 5f49 574f 5448 0a20  = stat.S_IWOTH. 
-00046420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046430: 2020 2069 6620 7661 6c5b 385d 203d 3d20     if val[8] == 
-00046440: 2778 273a 206d 207c 3d20 7374 6174 2e53  'x': m |= stat.S
-00046450: 5f49 584f 5448 0a20 2020 2020 2020 2020  _IXOTH.         
-00046460: 2020 2020 2020 2020 2020 2069 6620 7661             if va
-00046470: 6c5b 385d 203d 3d20 2774 273a 206d 207c  l[8] == 't': m |
-00046480: 3d20 7374 6174 2e53 5f49 584f 5448 207c  = stat.S_IXOTH |
-00046490: 2073 7461 742e 535f 4953 5654 580a 2020   stat.S_ISVTX.  
-000464a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000464b0: 2020 7265 7475 726e 205f 6d6f 6465 5f28    return _mode_(
-000464c0: 6f63 7428 6d29 2c6d 6f64 6529 0a20 2020  oct(m),mode).   
-000464d0: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-000464e0: 756c 740a 0a20 2020 2023 2046 696e 6420  ult..    # Find 
-000464f0: 6669 6c65 6e61 6d65 2773 2072 6f6f 7420  filename's root 
-00046500: 7061 7468 2061 6e64 2066 696c 656e 616d  path and filenam
-00046510: 6520 6163 636f 7264 696e 6720 746f 2074  e according to t
-00046520: 6865 2064 620a 2020 2020 6465 6620 4669  he db.    def Fi
-00046530: 6e64 5250 2873 656c 662c 6669 6c65 6e61  ndRP(self,filena
-00046540: 6d65 3d4e 6f6e 652c 6465 6661 756c 743d  me=None,default=
-00046550: 4e6f 6e65 293a 0a20 2020 2020 2020 2069  None):.        i
-00046560: 6620 6973 696e 7374 616e 6365 2866 696c  f isinstance(fil
-00046570: 656e 616d 652c 7374 7229 2061 6e64 2073  ename,str) and s
-00046580: 656c 662e 696e 666f 3a0a 2020 2020 2020  elf.info:.      
-00046590: 2020 2020 2020 696e 666f 5f6b 6579 733d        info_keys=
-000465a0: 6c69 7374 2873 656c 662e 696e 666f 2e6b  list(self.info.k
-000465b0: 6579 7328 2929 0a20 2020 2020 2020 2020  eys()).         
-000465c0: 2020 2069 6e66 6f5f 6e75 6d3d 6c65 6e28     info_num=len(
-000465d0: 696e 666f 5f6b 6579 7329 0a20 2020 2020  info_keys).     
-000465e0: 2020 2020 2020 2069 6620 6669 6c65 6e61         if filena
-000465f0: 6d65 5b30 5d20 213d 2027 2f27 3a0a 2020  me[0] != '/':.  
-00046600: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00046610: 2069 6e66 6f5f 6e75 6d20 3d3d 2031 3a20   info_num == 1: 
-00046620: 7265 7475 726e 2069 6e66 6f5f 6b65 7973  return info_keys
-00046630: 5b30 5d0a 2020 2020 2020 2020 2020 2020  [0].            
-00046640: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00046650: 726f 6f74 5f70 6174 680a 2020 2020 2020  root_path.      
-00046660: 2020 2020 2020 6161 3d27 2f27 0a20 2020        aa='/'.   
-00046670: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
-00046680: 655f 613d 6669 6c65 6e61 6d65 2e73 706c  e_a=filename.spl
-00046690: 6974 2827 2f27 290a 2020 2020 2020 2020  it('/').        
-000466a0: 2020 2020 666f 7220 6969 2069 6e20 7261      for ii in ra
-000466b0: 6e67 6528 312c 6c65 6e28 6669 6c65 6e61  nge(1,len(filena
-000466c0: 6d65 5f61 2929 3a0a 2020 2020 2020 2020  me_a)):.        
-000466d0: 2020 2020 2020 2020 6161 3d50 6174 6828          aa=Path(
-000466e0: 6161 2c66 696c 656e 616d 655f 615b 6969  aa,filename_a[ii
-000466f0: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
-00046700: 2020 2069 6620 6161 2069 6e20 696e 666f     if aa in info
-00046710: 5f6b 6579 733a 0a20 2020 2020 2020 2020  _keys:.         
-00046720: 2020 2020 2020 2020 2020 2023 7265 6d61             #rema
-00046730: 696e 5f70 6174 683d 272f 272e 6a6f 696e  in_path='/'.join
-00046740: 2866 696c 656e 616d 655f 615b 6969 2b31  (filename_a[ii+1
-00046750: 3a5d 290a 2020 2020 2020 2020 2020 2020  :]).            
-00046760: 2020 2020 2020 2020 7265 6d61 696e 5f70          remain_p
-00046770: 6174 683d 4a6f 696e 2866 696c 656e 616d  ath=Join(filenam
-00046780: 655f 615b 6969 2b31 3a5d 2c73 796d 626f  e_a[ii+1:],symbo
-00046790: 6c3d 272f 2729 0a20 2020 2020 2020 2020  l='/').         
-000467a0: 2020 2020 2020 2020 2020 2069 6620 696e             if in
-000467b0: 666f 5f6e 756d 203d 3d20 313a 2072 6574  fo_num == 1: ret
-000467c0: 7572 6e20 6161 2c72 656d 6169 6e5f 7061  urn aa,remain_pa
-000467d0: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
-000467e0: 2020 2020 2020 2023 2069 6620 696e 666f         # if info
-000467f0: 2068 6173 206d 756c 7469 2072 6f6f 7420   has multi root 
-00046800: 7061 7468 2074 6865 6e20 6368 6563 6b20  path then check 
-00046810: 6669 6c65 6e61 6d65 2069 6e20 7468 6520  filename in the 
-00046820: 6462 206f 6620 6561 6368 2072 6f6f 745f  db of each root_
-00046830: 7061 7468 0a20 2020 2020 2020 2020 2020  path.           
-00046840: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-00046850: 2e46 696c 6549 6e66 6f28 7265 6d61 696e  .FileInfo(remain
-00046860: 5f70 6174 682c 6161 293a 2072 6574 7572  _path,aa): retur
-00046870: 6e20 6161 2c72 656d 6169 6e5f 7061 7468  n aa,remain_path
-00046880: 0a20 2020 2020 2020 2065 6c69 6620 7365  .        elif se
-00046890: 6c66 2e69 6e66 6f3a 0a20 2020 2020 2020  lf.info:.       
-000468a0: 2020 2020 2072 6574 7572 6e20 6c69 7374       return list
-000468b0: 2873 656c 662e 696e 666f 2e6b 6579 7328  (self.info.keys(
-000468c0: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
-000468d0: 6e20 6465 6661 756c 740a 0a20 2020 2064  n default..    d
-000468e0: 6566 2045 7874 7261 6374 526f 6f74 2873  ef ExtractRoot(s
-000468f0: 656c 662c 2a2a 6f70 7473 293a 0a20 2020  elf,**opts):.   
-00046900: 2020 2020 2072 6f6f 745f 7061 7468 3d6f       root_path=o
-00046910: 7074 732e 6765 7428 2772 6f6f 745f 7061  pts.get('root_pa
-00046920: 7468 272c 5b5d 290a 2020 2020 2020 2020  th',[]).        
-00046930: 6469 7270 6174 683d 6f70 7473 2e67 6574  dirpath=opts.get
-00046940: 2827 6469 7270 6174 6827 290a 2020 2020  ('dirpath').    
-00046950: 2020 2020 7375 625f 6469 723d 6f70 7473      sub_dir=opts
-00046960: 2e67 6574 2827 7375 625f 6469 7227 2c46  .get('sub_dir',F
-00046970: 616c 7365 290a 2020 2020 2020 2020 6966  alse).        if
-00046980: 2069 7369 6e73 7461 6e63 6528 726f 6f74   isinstance(root
-00046990: 5f70 6174 682c 7374 7229 3a0a 2020 2020  _path,str):.    
-000469a0: 2020 2020 2020 2020 726f 6f74 5f70 6174          root_pat
-000469b0: 683d 5b72 6f6f 745f 7061 7468 5d0a 2020  h=[root_path].  
-000469c0: 2020 2020 2020 2369 6620 6e6f 7420 6f73        #if not os
-000469d0: 2e70 6174 682e 6973 6469 7228 6f70 7473  .path.isdir(opts
-000469e0: 2e67 6574 2827 6465 7374 2729 293a 206f  .get('dest')): o
-000469f0: 732e 6d61 6b65 6469 7273 286f 7074 732e  s.makedirs(opts.
-00046a00: 6765 7428 2764 6573 7427 2929 0a20 2020  get('dest')).   
-00046a10: 2020 2020 2069 6620 7365 6c66 2e4d 6b64       if self.Mkd
-00046a20: 6972 286f 7074 732e 6765 7428 2764 6573  ir(opts.get('des
-00046a30: 7427 292c 666f 7263 653d 5472 7565 2920  t'),force=True) 
-00046a40: 6973 2046 616c 7365 3a20 7265 7475 726e  is False: return
-00046a50: 2046 616c 7365 0a20 2020 2020 2020 2066   False.        f
-00046a60: 6f72 2072 7020 696e 2072 6f6f 745f 7061  or rp in root_pa
-00046a70: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
-00046a80: 6e65 775f 6465 7374 3d6f 7074 732e 6765  new_dest=opts.ge
-00046a90: 7428 2764 6573 7427 290a 2020 2020 2020  t('dest').      
-00046aa0: 2020 2020 2020 6966 2064 6972 7061 7468        if dirpath
-00046ab0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00046ac0: 2020 7274 3d73 656c 662e 4364 5061 7468    rt=self.CdPath
-00046ad0: 2873 656c 662e 696e 666f 5b72 705d 2c64  (self.info[rp],d
-00046ae0: 6972 7061 7468 290a 2020 2020 2020 2020  irpath).        
-00046af0: 2020 2020 2020 2020 6966 2072 7420 6973          if rt is
-00046b00: 2046 616c 7365 3a0a 2020 2020 2020 2020   False:.        
-00046b10: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00046b20: 7428 277b 7d20 6e6f 7420 666f 756e 6427  t('{} not found'
-00046b30: 2e66 6f72 6d61 7428 6469 7270 6174 6829  .format(dirpath)
-00046b40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00046b50: 2020 2020 2020 7265 7475 726e 0a20 2020        return.   
-00046b60: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00046b70: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00046b80: 6972 7061 7468 3d27 270a 2020 2020 2020  irpath=''.      
-00046b90: 2020 2020 2020 2020 2020 7274 3d73 656c            rt=sel
-00046ba0: 662e 696e 666f 5b72 705d 0a0a 2020 2020  f.info[rp]..    
-00046bb0: 2020 2020 2020 2020 7269 6e66 6f3d 7274          rinfo=rt
-00046bc0: 2e67 6574 2827 2069 2027 2c7b 7d29 0a20  .get(' i ',{}). 
-00046bd0: 2020 2020 2020 2020 2020 2072 7479 7065             rtype
-00046be0: 3d72 696e 666f 2e67 6574 2827 7479 7065  =rinfo.get('type
-00046bf0: 2729 0a20 2020 2020 2020 2020 2020 2023  ').            #
-00046c00: 6469 723a 6469 7265 6374 6f72 792c 4e6f  dir:directory,No
-00046c10: 6e65 3a72 6f6f 7420 6469 7265 6374 6f72  ne:root director
-00046c20: 790a 2020 2020 2020 2020 2020 2020 6966  y.            if
-00046c30: 206e 6f74 2049 734e 6f6e 6528 7274 7970   not IsNone(rtyp
-00046c40: 652c 6368 6b5f 7661 6c3d 5b27 6469 7227  e,chk_val=['dir'
-00046c50: 2c4e 6f6e 652c 2727 5d29 3a20 2320 4669  ,None,'']): # Fi
-00046c60: 6c65 202f 204c 696e 6b0a 2020 2020 2020  le / Link.      
-00046c70: 2020 2020 2020 2020 2020 6d79 6465 7374            mydest
-00046c80: 3d6f 732e 7061 7468 2e64 6972 6e61 6d65  =os.path.dirname
-00046c90: 2864 6972 7061 7468 290a 2020 2020 2020  (dirpath).      
-00046ca0: 2020 2020 2020 2020 2020 6d79 6e61 6d65            myname
-00046cb0: 3d6f 732e 7061 7468 2e62 6173 656e 616d  =os.path.basenam
-00046cc0: 6528 6469 7270 6174 6829 0a20 2020 2020  e(dirpath).     
-00046cd0: 2020 2020 2020 2020 2020 2069 6620 6d79             if my
-00046ce0: 6465 7374 3a0a 2020 2020 2020 2020 2020  dest:.          
-00046cf0: 2020 2020 2020 2020 2020 6d79 6465 7374            mydest
-00046d00: 3d6f 732e 7061 7468 2e6a 6f69 6e28 6e65  =os.path.join(ne
-00046d10: 775f 6465 7374 2c6d 7964 6573 7429 0a20  w_dest,mydest). 
-00046d20: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00046d30: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00046d40: 2020 2020 2020 2020 206d 7964 6573 743d           mydest=
-00046d50: 6e65 775f 6465 7374 0a20 2020 2020 2020  new_dest.       
-00046d60: 2020 2020 2020 2020 2023 6966 206e 6f74           #if not
-00046d70: 206f 732e 7061 7468 2e69 7364 6972 286d   os.path.isdir(m
-00046d80: 7964 6573 7429 3a20 6f73 2e6d 616b 6564  ydest): os.maked
-00046d90: 6972 7328 6d79 6465 7374 290a 2020 2020  irs(mydest).    
-00046da0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00046db0: 656c 662e 4d6b 6469 7228 6d79 6465 7374  elf.Mkdir(mydest
-00046dc0: 2c66 6f72 6365 3d54 7275 652c 696e 666f  ,force=True,info
-00046dd0: 3d72 696e 666f 2920 6973 2046 616c 7365  =rinfo) is False
-00046de0: 3a20 7265 7475 726e 2046 616c 7365 0a20  : return False. 
-00046df0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00046e00: 6620 7274 7970 6520 3d3d 2027 6c69 6e6b  f rtype == 'link
-00046e10: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-00046e20: 2020 2020 2020 206f 732e 7379 6d6c 696e         os.symlin
-00046e30: 6b28 7269 6e66 6f5b 2764 6573 7427 5d2c  k(rinfo['dest'],
-00046e40: 6f73 2e70 6174 682e 6a6f 696e 286d 7964  os.path.join(myd
-00046e50: 6573 742c 6d79 6e61 6d65 2929 0a20 2020  est,myname)).   
-00046e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046e70: 2073 656c 662e 5365 7449 6465 6e74 6974   self.SetIdentit
-00046e80: 7928 6f73 2e70 6174 682e 6a6f 696e 286d  y(os.path.join(m
-00046e90: 7964 6573 742c 6d79 6e61 6d65 292c 2a2a  ydest,myname),**
-00046ea0: 7269 6e66 6f29 0a20 2020 2020 2020 2020  rinfo).         
-00046eb0: 2020 2020 2020 2065 6c73 653a 2023 2046         else: # F
-00046ec0: 696c 650a 2020 2020 2020 2020 2020 2020  ile.            
-00046ed0: 2020 2020 2020 2020 6966 2027 6461 7461          if 'data
-00046ee0: 2720 696e 2072 743a 2073 656c 662e 5277  ' in rt: self.Rw
-00046ef0: 2850 6174 6828 6d79 6465 7374 2c6d 796e  (Path(mydest,myn
-00046f00: 616d 6529 2c64 6174 613d 7274 5b27 6461  ame),data=rt['da
-00046f10: 7461 275d 2c66 696e 666f 3d72 696e 666f  ta'],finfo=rinfo
-00046f20: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00046f30: 2020 2020 2020 656c 7365 3a20 7072 696e        else: prin
-00046f40: 7428 277b 7d20 6669 6c65 2068 6176 6520  t('{} file have 
-00046f50: 6e6f 2064 6174 6127 2e66 6f72 6d61 7428  no data'.format(
-00046f60: 6469 7270 6174 6829 290a 2320 2020 2020  dirpath)).#     
-00046f70: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00046f80: 5365 7449 6465 6e74 6974 7928 6f73 2e70  SetIdentity(os.p
-00046f90: 6174 682e 6a6f 696e 286d 7964 6573 742c  ath.join(mydest,
-00046fa0: 6d79 6e61 6d65 292c 2a2a 7269 6e66 6f29  myname),**rinfo)
-00046fb0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00046fc0: 653a 2023 2064 6972 6563 746f 7279 206f  e: # directory o
-00046fd0: 7220 726f 6f74 2044 420a 2020 2020 2020  r root DB.      
-00046fe0: 2020 2020 2020 2020 2020 666f 7220 6969            for ii
-00046ff0: 2069 6e20 7274 3a0a 2020 2020 2020 2020   in rt:.        
-00047000: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00047010: 6920 3d3d 2027 2069 2027 3a20 636f 6e74  i == ' i ': cont
-00047020: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
-00047030: 2020 2020 2020 2020 2066 696e 666f 3d72           finfo=r
-00047040: 745b 6969 5d2e 6765 7428 2720 6920 272c  t[ii].get(' i ',
-00047050: 7b7d 290a 2020 2020 2020 2020 2020 2020  {}).            
-00047060: 2020 2020 2020 2020 6674 7970 653d 6669          ftype=fi
-00047070: 6e66 6f2e 6765 7428 2774 7970 6527 290a  nfo.get('type').
-00047080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047090: 2020 2020 6966 2066 7479 7065 203d 3d20      if ftype == 
-000470a0: 2764 6972 273a 0a20 2020 2020 2020 2020  'dir':.         
-000470b0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-000470c0: 7964 6972 3d6f 732e 7061 7468 2e6a 6f69  ydir=os.path.joi
-000470d0: 6e28 6e65 775f 6465 7374 2c69 6929 0a20  n(new_dest,ii). 
-000470e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000470f0: 2020 2020 2020 2073 656c 662e 4d6b 6469         self.Mkdi
-00047100: 7228 6d79 6469 722c 666f 7263 653d 5472  r(mydir,force=Tr
-00047110: 7565 2c69 6e66 6f3d 6669 6e66 6f29 0a20  ue,info=finfo). 
-00047120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047130: 2020 2020 2020 2023 7365 6c66 2e53 6574         #self.Set
-00047140: 4964 656e 7469 7479 286d 7964 6972 2c2a  Identity(mydir,*
-00047150: 2a66 696e 666f 290a 2020 2020 2020 2020  *finfo).        
+00046080: 2053 7464 4572 7228 2742 6164 2070 6572   StdErr('Bad per
+00046090: 6d69 7373 696f 6e20 6c65 6e67 7468 2729  mission length')
+000460a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000460b0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000460c0: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
+000460d0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+000460e0: 6f74 2061 6c6c 2876 616c 5b6b 5d20 696e  ot all(val[k] in
+000460f0: 2027 7277 2d27 2066 6f72 206b 2069 6e20   'rw-' for k in 
+00046100: 5b30 2c31 2c33 2c34 2c36 2c37 5d29 3a0a  [0,1,3,4,6,7]):.
+00046110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046120: 2020 2020 2020 2020 5374 6445 7272 2827          StdErr('
+00046130: 4261 6420 7065 726d 6973 7369 6f6e 2066  Bad permission f
+00046140: 6f72 6d61 7420 2872 6561 642d 7772 6974  ormat (read-writ
+00046150: 6529 2729 0a20 2020 2020 2020 2020 2020  e)').           
+00046160: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00046170: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
+00046180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046190: 6966 206e 6f74 2061 6c6c 2876 616c 5b6b  if not all(val[k
+000461a0: 5d20 696e 2027 7873 2d27 2066 6f72 206b  ] in 'xs-' for k
+000461b0: 2069 6e20 5b32 2c35 5d29 3a0a 2020 2020   in [2,5]):.    
+000461c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000461d0: 2020 2020 5374 6445 7272 2827 4261 6420      StdErr('Bad 
+000461e0: 7065 726d 6973 7369 6f6e 2066 6f72 6d61  permission forma
+000461f0: 7420 2865 7865 6375 7465 2927 290a 2020  t (execute)').  
+00046200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046210: 2020 2020 2020 7265 7475 726e 2064 6566        return def
+00046220: 6175 6c74 0a20 2020 2020 2020 2020 2020  ault.           
+00046230: 2020 2020 2020 2020 2069 6620 7661 6c5b           if val[
+00046240: 385d 206e 6f74 2069 6e20 2778 742d 273a  8] not in 'xt-':
+00046250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00046260: 2020 2020 2020 2020 2053 7464 4572 7228           StdErr(
+00046270: 2027 4261 6420 7065 726d 6973 7369 6f6e   'Bad permission
+00046280: 2066 6f72 6d61 7420 2865 7865 6375 7465   format (execute
+00046290: 206f 7468 6572 2927 290a 2020 2020 2020   other)').      
+000462a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000462b0: 2020 7265 7475 726e 2064 6566 6175 6c74    return default
+000462c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000462d0: 2020 2020 206d 203d 2030 0a20 2020 2020       m = 0.     
+000462e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000462f0: 6620 7661 6c5b 305d 203d 3d20 2772 273a  f val[0] == 'r':
+00046300: 206d 207c 3d20 7374 6174 2e53 5f49 5255   m |= stat.S_IRU
+00046310: 5352 0a20 2020 2020 2020 2020 2020 2020  SR.             
+00046320: 2020 2020 2020 2069 6620 7661 6c5b 315d         if val[1]
+00046330: 203d 3d20 2777 273a 206d 207c 3d20 7374   == 'w': m |= st
+00046340: 6174 2e53 5f49 5755 5352 0a20 2020 2020  at.S_IWUSR.     
+00046350: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00046360: 6620 7661 6c5b 325d 203d 3d20 2778 273a  f val[2] == 'x':
+00046370: 206d 207c 3d20 7374 6174 2e53 5f49 5855   m |= stat.S_IXU
+00046380: 5352 0a20 2020 2020 2020 2020 2020 2020  SR.             
+00046390: 2020 2020 2020 2069 6620 7661 6c5b 325d         if val[2]
+000463a0: 203d 3d20 2773 273a 206d 207c 3d20 7374   == 's': m |= st
+000463b0: 6174 2e53 5f49 5855 5352 207c 2073 7461  at.S_IXUSR | sta
+000463c0: 742e 535f 4953 5549 440a 0a20 2020 2020  t.S_ISUID..     
+000463d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000463e0: 6620 7661 6c5b 335d 203d 3d20 2772 273a  f val[3] == 'r':
+000463f0: 206d 207c 3d20 7374 6174 2e53 5f49 5247   m |= stat.S_IRG
+00046400: 5250 0a20 2020 2020 2020 2020 2020 2020  RP.             
+00046410: 2020 2020 2020 2069 6620 7661 6c5b 345d         if val[4]
+00046420: 203d 3d20 2777 273a 206d 207c 3d20 7374   == 'w': m |= st
+00046430: 6174 2e53 5f49 5747 5250 0a20 2020 2020  at.S_IWGRP.     
+00046440: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00046450: 6620 7661 6c5b 355d 203d 3d20 2778 273a  f val[5] == 'x':
+00046460: 206d 207c 3d20 7374 6174 2e53 5f49 5847   m |= stat.S_IXG
+00046470: 5250 0a20 2020 2020 2020 2020 2020 2020  RP.             
+00046480: 2020 2020 2020 2069 6620 7661 6c5b 355d         if val[5]
+00046490: 203d 3d20 2773 273a 206d 207c 3d20 7374   == 's': m |= st
+000464a0: 6174 2e53 5f49 5847 5250 207c 2073 7461  at.S_IXGRP | sta
+000464b0: 742e 535f 4953 4749 440a 0a20 2020 2020  t.S_ISGID..     
+000464c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000464d0: 6620 7661 6c5b 365d 203d 3d20 2772 273a  f val[6] == 'r':
+000464e0: 206d 207c 3d20 7374 6174 2e53 5f49 524f   m |= stat.S_IRO
+000464f0: 5448 0a20 2020 2020 2020 2020 2020 2020  TH.             
+00046500: 2020 2020 2020 2069 6620 7661 6c5b 375d         if val[7]
+00046510: 203d 3d20 2777 273a 206d 207c 3d20 7374   == 'w': m |= st
+00046520: 6174 2e53 5f49 574f 5448 0a20 2020 2020  at.S_IWOTH.     
+00046530: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00046540: 6620 7661 6c5b 385d 203d 3d20 2778 273a  f val[8] == 'x':
+00046550: 206d 207c 3d20 7374 6174 2e53 5f49 584f   m |= stat.S_IXO
+00046560: 5448 0a20 2020 2020 2020 2020 2020 2020  TH.             
+00046570: 2020 2020 2020 2069 6620 7661 6c5b 385d         if val[8]
+00046580: 203d 3d20 2774 273a 206d 207c 3d20 7374   == 't': m |= st
+00046590: 6174 2e53 5f49 584f 5448 207c 2073 7461  at.S_IXOTH | sta
+000465a0: 742e 535f 4953 5654 580a 2020 2020 2020  t.S_ISVTX.      
+000465b0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000465c0: 7475 726e 205f 6d6f 6465 5f28 6f63 7428  turn _mode_(oct(
+000465d0: 6d29 2c6d 6f64 6529 0a20 2020 2020 2020  m),mode).       
+000465e0: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+000465f0: 0a20 2020 2023 2046 696e 6420 6669 6c65  .    # Find file
+00046600: 6e61 6d65 2773 2072 6f6f 7420 7061 7468  name's root path
+00046610: 2061 6e64 2066 696c 656e 616d 6520 6163   and filename ac
+00046620: 636f 7264 696e 6720 746f 2074 6865 2064  cording to the d
+00046630: 620a 2020 2020 6465 6620 4669 6e64 5250  b.    def FindRP
+00046640: 2873 656c 662c 6669 6c65 6e61 6d65 3d4e  (self,filename=N
+00046650: 6f6e 652c 6465 6661 756c 743d 4e6f 6e65  one,default=None
+00046660: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
+00046670: 696e 7374 616e 6365 2866 696c 656e 616d  instance(filenam
+00046680: 652c 7374 7229 2061 6e64 2073 656c 662e  e,str) and self.
+00046690: 696e 666f 3a0a 2020 2020 2020 2020 2020  info:.          
+000466a0: 2020 696e 666f 5f6b 6579 733d 6c69 7374    info_keys=list
+000466b0: 2873 656c 662e 696e 666f 2e6b 6579 7328  (self.info.keys(
+000466c0: 2929 0a20 2020 2020 2020 2020 2020 2069  )).            i
+000466d0: 6e66 6f5f 6e75 6d3d 6c65 6e28 696e 666f  nfo_num=len(info
+000466e0: 5f6b 6579 7329 0a20 2020 2020 2020 2020  _keys).         
+000466f0: 2020 2069 6620 6669 6c65 6e61 6d65 5b30     if filename[0
+00046700: 5d20 213d 2027 2f27 3a0a 2020 2020 2020  ] != '/':.      
+00046710: 2020 2020 2020 2020 2020 6966 2069 6e66            if inf
+00046720: 6f5f 6e75 6d20 3d3d 2031 3a20 7265 7475  o_num == 1: retu
+00046730: 726e 2069 6e66 6f5f 6b65 7973 5b30 5d0a  rn info_keys[0].
+00046740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046750: 7265 7475 726e 2073 656c 662e 726f 6f74  return self.root
+00046760: 5f70 6174 680a 2020 2020 2020 2020 2020  _path.          
+00046770: 2020 6161 3d27 2f27 0a20 2020 2020 2020    aa='/'.       
+00046780: 2020 2020 2066 696c 656e 616d 655f 613d       filename_a=
+00046790: 6669 6c65 6e61 6d65 2e73 706c 6974 2827  filename.split('
+000467a0: 2f27 290a 2020 2020 2020 2020 2020 2020  /').            
+000467b0: 666f 7220 6969 2069 6e20 7261 6e67 6528  for ii in range(
+000467c0: 312c 6c65 6e28 6669 6c65 6e61 6d65 5f61  1,len(filename_a
+000467d0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+000467e0: 2020 2020 6161 3d50 6174 6828 6161 2c66      aa=Path(aa,f
+000467f0: 696c 656e 616d 655f 615b 6969 5d29 0a20  ilename_a[ii]). 
+00046800: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00046810: 6620 6161 2069 6e20 696e 666f 5f6b 6579  f aa in info_key
+00046820: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+00046830: 2020 2020 2020 2023 7265 6d61 696e 5f70         #remain_p
+00046840: 6174 683d 272f 272e 6a6f 696e 2866 696c  ath='/'.join(fil
+00046850: 656e 616d 655f 615b 6969 2b31 3a5d 290a  ename_a[ii+1:]).
+00046860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046870: 2020 2020 7265 6d61 696e 5f70 6174 683d      remain_path=
+00046880: 4a6f 696e 2866 696c 656e 616d 655f 615b  Join(filename_a[
+00046890: 6969 2b31 3a5d 2c73 796d 626f 6c3d 272f  ii+1:],symbol='/
+000468a0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+000468b0: 2020 2020 2020 2069 6620 696e 666f 5f6e         if info_n
+000468c0: 756d 203d 3d20 313a 2072 6574 7572 6e20  um == 1: return 
+000468d0: 6161 2c72 656d 6169 6e5f 7061 7468 0a20  aa,remain_path. 
+000468e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000468f0: 2020 2023 2069 6620 696e 666f 2068 6173     # if info has
+00046900: 206d 756c 7469 2072 6f6f 7420 7061 7468   multi root path
+00046910: 2074 6865 6e20 6368 6563 6b20 6669 6c65   then check file
+00046920: 6e61 6d65 2069 6e20 7468 6520 6462 206f  name in the db o
+00046930: 6620 6561 6368 2072 6f6f 745f 7061 7468  f each root_path
+00046940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00046950: 2020 2020 2069 6620 7365 6c66 2e46 696c       if self.Fil
+00046960: 6549 6e66 6f28 7265 6d61 696e 5f70 6174  eInfo(remain_pat
+00046970: 682c 6161 293a 2072 6574 7572 6e20 6161  h,aa): return aa
+00046980: 2c72 656d 6169 6e5f 7061 7468 0a20 2020  ,remain_path.   
+00046990: 2020 2020 2065 6c69 6620 7365 6c66 2e69       elif self.i
+000469a0: 6e66 6f3a 0a20 2020 2020 2020 2020 2020  nfo:.           
+000469b0: 2072 6574 7572 6e20 6c69 7374 2873 656c   return list(sel
+000469c0: 662e 696e 666f 2e6b 6579 7328 2929 0a20  f.info.keys()). 
+000469d0: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+000469e0: 6661 756c 740a 0a20 2020 2064 6566 2045  fault..    def E
+000469f0: 7874 7261 6374 526f 6f74 2873 656c 662c  xtractRoot(self,
+00046a00: 2a2a 6f70 7473 293a 0a20 2020 2020 2020  **opts):.       
+00046a10: 2072 6f6f 745f 7061 7468 3d6f 7074 732e   root_path=opts.
+00046a20: 6765 7428 2772 6f6f 745f 7061 7468 272c  get('root_path',
+00046a30: 5b5d 290a 2020 2020 2020 2020 6469 7270  []).        dirp
+00046a40: 6174 683d 6f70 7473 2e67 6574 2827 6469  ath=opts.get('di
+00046a50: 7270 6174 6827 290a 2020 2020 2020 2020  rpath').        
+00046a60: 7375 625f 6469 723d 6f70 7473 2e67 6574  sub_dir=opts.get
+00046a70: 2827 7375 625f 6469 7227 2c46 616c 7365  ('sub_dir',False
+00046a80: 290a 2020 2020 2020 2020 6966 2069 7369  ).        if isi
+00046a90: 6e73 7461 6e63 6528 726f 6f74 5f70 6174  nstance(root_pat
+00046aa0: 682c 7374 7229 3a0a 2020 2020 2020 2020  h,str):.        
+00046ab0: 2020 2020 726f 6f74 5f70 6174 683d 5b72      root_path=[r
+00046ac0: 6f6f 745f 7061 7468 5d0a 2020 2020 2020  oot_path].      
+00046ad0: 2020 2369 6620 6e6f 7420 6f73 2e70 6174    #if not os.pat
+00046ae0: 682e 6973 6469 7228 6f70 7473 2e67 6574  h.isdir(opts.get
+00046af0: 2827 6465 7374 2729 293a 206f 732e 6d61  ('dest')): os.ma
+00046b00: 6b65 6469 7273 286f 7074 732e 6765 7428  kedirs(opts.get(
+00046b10: 2764 6573 7427 2929 0a20 2020 2020 2020  'dest')).       
+00046b20: 2069 6620 7365 6c66 2e4d 6b64 6972 286f   if self.Mkdir(o
+00046b30: 7074 732e 6765 7428 2764 6573 7427 292c  pts.get('dest'),
+00046b40: 666f 7263 653d 5472 7565 2920 6973 2046  force=True) is F
+00046b50: 616c 7365 3a20 7265 7475 726e 2046 616c  alse: return Fal
+00046b60: 7365 0a20 2020 2020 2020 2066 6f72 2072  se.        for r
+00046b70: 7020 696e 2072 6f6f 745f 7061 7468 3a0a  p in root_path:.
+00046b80: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
+00046b90: 6465 7374 3d6f 7074 732e 6765 7428 2764  dest=opts.get('d
+00046ba0: 6573 7427 290a 2020 2020 2020 2020 2020  est').          
+00046bb0: 2020 6966 2064 6972 7061 7468 3a0a 2020    if dirpath:.  
+00046bc0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+00046bd0: 3d73 656c 662e 4364 5061 7468 2873 656c  =self.CdPath(sel
+00046be0: 662e 696e 666f 5b72 705d 2c64 6972 7061  f.info[rp],dirpa
+00046bf0: 7468 290a 2020 2020 2020 2020 2020 2020  th).            
+00046c00: 2020 2020 6966 2072 7420 6973 2046 616c      if rt is Fal
+00046c10: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00046c20: 2020 2020 2020 2020 7072 696e 7428 277b          print('{
+00046c30: 7d20 6e6f 7420 666f 756e 6427 2e66 6f72  } not found'.for
+00046c40: 6d61 7428 6469 7270 6174 6829 290a 2020  mat(dirpath)).  
+00046c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046c60: 2020 7265 7475 726e 0a20 2020 2020 2020    return.       
+00046c70: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00046c80: 2020 2020 2020 2020 2020 2064 6972 7061             dirpa
+00046c90: 7468 3d27 270a 2020 2020 2020 2020 2020  th=''.          
+00046ca0: 2020 2020 2020 7274 3d73 656c 662e 696e        rt=self.in
+00046cb0: 666f 5b72 705d 0a0a 2020 2020 2020 2020  fo[rp]..        
+00046cc0: 2020 2020 7269 6e66 6f3d 7274 2e67 6574      rinfo=rt.get
+00046cd0: 2827 2069 2027 2c7b 7d29 0a20 2020 2020  (' i ',{}).     
+00046ce0: 2020 2020 2020 2072 7479 7065 3d72 696e         rtype=rin
+00046cf0: 666f 2e67 6574 2827 7479 7065 2729 0a20  fo.get('type'). 
+00046d00: 2020 2020 2020 2020 2020 2023 6469 723a             #dir:
+00046d10: 6469 7265 6374 6f72 792c 4e6f 6e65 3a72  directory,None:r
+00046d20: 6f6f 7420 6469 7265 6374 6f72 790a 2020  oot directory.  
+00046d30: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00046d40: 2049 734e 6f6e 6528 7274 7970 652c 6368   IsNone(rtype,ch
+00046d50: 6b5f 7661 6c3d 5b27 6469 7227 2c4e 6f6e  k_val=['dir',Non
+00046d60: 652c 2727 5d29 3a20 2320 4669 6c65 202f  e,'']): # File /
+00046d70: 204c 696e 6b0a 2020 2020 2020 2020 2020   Link.          
+00046d80: 2020 2020 2020 6d79 6465 7374 3d6f 732e        mydest=os.
+00046d90: 7061 7468 2e64 6972 6e61 6d65 2864 6972  path.dirname(dir
+00046da0: 7061 7468 290a 2020 2020 2020 2020 2020  path).          
+00046db0: 2020 2020 2020 6d79 6e61 6d65 3d6f 732e        myname=os.
+00046dc0: 7061 7468 2e62 6173 656e 616d 6528 6469  path.basename(di
+00046dd0: 7270 6174 6829 0a20 2020 2020 2020 2020  rpath).         
+00046de0: 2020 2020 2020 2069 6620 6d79 6465 7374         if mydest
+00046df0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00046e00: 2020 2020 2020 6d79 6465 7374 3d6f 732e        mydest=os.
+00046e10: 7061 7468 2e6a 6f69 6e28 6e65 775f 6465  path.join(new_de
+00046e20: 7374 2c6d 7964 6573 7429 0a20 2020 2020  st,mydest).     
+00046e30: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00046e40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00046e50: 2020 2020 206d 7964 6573 743d 6e65 775f       mydest=new_
+00046e60: 6465 7374 0a20 2020 2020 2020 2020 2020  dest.           
+00046e70: 2020 2020 2023 6966 206e 6f74 206f 732e       #if not os.
+00046e80: 7061 7468 2e69 7364 6972 286d 7964 6573  path.isdir(mydes
+00046e90: 7429 3a20 6f73 2e6d 616b 6564 6972 7328  t): os.makedirs(
+00046ea0: 6d79 6465 7374 290a 2020 2020 2020 2020  mydest).        
+00046eb0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00046ec0: 4d6b 6469 7228 6d79 6465 7374 2c66 6f72  Mkdir(mydest,for
+00046ed0: 6365 3d54 7275 652c 696e 666f 3d72 696e  ce=True,info=rin
+00046ee0: 666f 2920 6973 2046 616c 7365 3a20 7265  fo) is False: re
+00046ef0: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
+00046f00: 2020 2020 2020 2020 2020 2069 6620 7274             if rt
+00046f10: 7970 6520 3d3d 2027 6c69 6e6b 273a 0a20  ype == 'link':. 
+00046f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046f30: 2020 206f 732e 7379 6d6c 696e 6b28 7269     os.symlink(ri
+00046f40: 6e66 6f5b 2764 6573 7427 5d2c 6f73 2e70  nfo['dest'],os.p
+00046f50: 6174 682e 6a6f 696e 286d 7964 6573 742c  ath.join(mydest,
+00046f60: 6d79 6e61 6d65 2929 0a20 2020 2020 2020  myname)).       
+00046f70: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00046f80: 662e 5365 7449 6465 6e74 6974 7928 6f73  f.SetIdentity(os
+00046f90: 2e70 6174 682e 6a6f 696e 286d 7964 6573  .path.join(mydes
+00046fa0: 742c 6d79 6e61 6d65 292c 2a2a 7269 6e66  t,myname),**rinf
+00046fb0: 6f29 0a20 2020 2020 2020 2020 2020 2020  o).             
+00046fc0: 2020 2065 6c73 653a 2023 2046 696c 650a     else: # File.
+00046fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046fe0: 2020 2020 6966 2027 6461 7461 2720 696e      if 'data' in
+00046ff0: 2072 743a 2073 656c 662e 5277 2850 6174   rt: self.Rw(Pat
+00047000: 6828 6d79 6465 7374 2c6d 796e 616d 6529  h(mydest,myname)
+00047010: 2c64 6174 613d 7274 5b27 6461 7461 275d  ,data=rt['data']
+00047020: 2c66 696e 666f 3d72 696e 666f 290a 2020  ,finfo=rinfo).  
+00047030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047040: 2020 656c 7365 3a20 7072 696e 7428 277b    else: print('{
+00047050: 7d20 6669 6c65 2068 6176 6520 6e6f 2064  } file have no d
+00047060: 6174 6127 2e66 6f72 6d61 7428 6469 7270  ata'.format(dirp
+00047070: 6174 6829 290a 2320 2020 2020 2020 2020  ath)).#         
+00047080: 2020 2020 2020 2073 656c 662e 5365 7449         self.SetI
+00047090: 6465 6e74 6974 7928 6f73 2e70 6174 682e  dentity(os.path.
+000470a0: 6a6f 696e 286d 7964 6573 742c 6d79 6e61  join(mydest,myna
+000470b0: 6d65 292c 2a2a 7269 6e66 6f29 0a20 2020  me),**rinfo).   
+000470c0: 2020 2020 2020 2020 2065 6c73 653a 2023           else: #
+000470d0: 2064 6972 6563 746f 7279 206f 7220 726f   directory or ro
+000470e0: 6f74 2044 420a 2020 2020 2020 2020 2020  ot DB.          
+000470f0: 2020 2020 2020 666f 7220 6969 2069 6e20        for ii in 
+00047100: 7274 3a0a 2020 2020 2020 2020 2020 2020  rt:.            
+00047110: 2020 2020 2020 2020 6966 2069 6920 3d3d          if ii ==
+00047120: 2027 2069 2027 3a20 636f 6e74 696e 7565   ' i ': continue
+00047130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00047140: 2020 2020 2066 696e 666f 3d72 745b 6969       finfo=rt[ii
+00047150: 5d2e 6765 7428 2720 6920 272c 7b7d 290a  ].get(' i ',{}).
 00047160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047170: 2320 5375 6220 6469 7265 6374 6f72 790a  # Sub directory.
-00047180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047190: 2020 2020 2020 2020 6966 2073 7562 5f64          if sub_d
-000471a0: 6972 3a20 7365 6c66 2e45 7874 7261 6374  ir: self.Extract
-000471b0: 526f 6f74 2864 6972 7061 7468 3d6f 732e  Root(dirpath=os.
-000471c0: 7061 7468 2e6a 6f69 6e28 6469 7270 6174  path.join(dirpat
-000471d0: 682c 6969 292c 726f 6f74 5f70 6174 683d  h,ii),root_path=
-000471e0: 7270 2c64 6573 743d 6f73 2e70 6174 682e  rp,dest=os.path.
-000471f0: 6a6f 696e 286e 6577 5f64 6573 742c 6969  join(new_dest,ii
-00047200: 292c 7375 625f 6469 723d 7375 625f 6469  ),sub_dir=sub_di
-00047210: 7229 0a20 2020 2020 2020 2020 2020 2020  r).             
-00047220: 2020 2020 2020 2020 2020 2023 6966 2064             #if d
-00047230: 6d74 696d 6520 616e 6420 6461 7469 6d65  mtime and datime
-00047240: 3a20 6f73 2e75 7469 6d65 286d 7964 6972  : os.utime(mydir
-00047250: 2c28 6461 7469 6d65 2c64 6d74 696d 6529  ,(datime,dmtime)
-00047260: 2920 2320 5469 6d65 2075 7064 6174 6520  ) # Time update 
-00047270: 6d75 7374 2062 6520 6174 206c 6173 7420  must be at last 
-00047280: 6f72 6465 720a 2020 2020 2020 2020 2020  order.          
-00047290: 2020 2020 2020 2020 2020 656c 6966 2066            elif f
-000472a0: 7479 7065 203d 3d20 276c 696e 6b27 3a0a  type == 'link':.
-000472b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000472c0: 2020 2020 2020 2020 6969 6d6d 3d6f 732e          iimm=os.
-000472d0: 7061 7468 2e6a 6f69 6e28 6e65 775f 6465  path.join(new_de
-000472e0: 7374 2c69 6929 0a20 2020 2020 2020 2020  st,ii).         
-000472f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00047300: 6620 6e6f 7420 6f73 2e70 6174 682e 6578  f not os.path.ex
-00047310: 6973 7473 2869 696d 6d29 3a0a 2020 2020  ists(iimm):.    
+00047170: 2020 2020 6674 7970 653d 6669 6e66 6f2e      ftype=finfo.
+00047180: 6765 7428 2774 7970 6527 290a 2020 2020  get('type').    
+00047190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000471a0: 6966 2066 7479 7065 203d 3d20 2764 6972  if ftype == 'dir
+000471b0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+000471c0: 2020 2020 2020 2020 2020 206d 7964 6972             mydir
+000471d0: 3d6f 732e 7061 7468 2e6a 6f69 6e28 6e65  =os.path.join(ne
+000471e0: 775f 6465 7374 2c69 6929 0a20 2020 2020  w_dest,ii).     
+000471f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047200: 2020 2073 656c 662e 4d6b 6469 7228 6d79     self.Mkdir(my
+00047210: 6469 722c 666f 7263 653d 5472 7565 2c69  dir,force=True,i
+00047220: 6e66 6f3d 6669 6e66 6f29 0a20 2020 2020  nfo=finfo).     
+00047230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047240: 2020 2023 7365 6c66 2e53 6574 4964 656e     #self.SetIden
+00047250: 7469 7479 286d 7964 6972 2c2a 2a66 696e  tity(mydir,**fin
+00047260: 666f 290a 2020 2020 2020 2020 2020 2020  fo).            
+00047270: 2020 2020 2020 2020 2020 2020 2320 5375              # Su
+00047280: 6220 6469 7265 6374 6f72 790a 2020 2020  b directory.    
+00047290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000472a0: 2020 2020 6966 2073 7562 5f64 6972 3a20      if sub_dir: 
+000472b0: 7365 6c66 2e45 7874 7261 6374 526f 6f74  self.ExtractRoot
+000472c0: 2864 6972 7061 7468 3d6f 732e 7061 7468  (dirpath=os.path
+000472d0: 2e6a 6f69 6e28 6469 7270 6174 682c 6969  .join(dirpath,ii
+000472e0: 292c 726f 6f74 5f70 6174 683d 7270 2c64  ),root_path=rp,d
+000472f0: 6573 743d 6f73 2e70 6174 682e 6a6f 696e  est=os.path.join
+00047300: 286e 6577 5f64 6573 742c 6969 292c 7375  (new_dest,ii),su
+00047310: 625f 6469 723d 7375 625f 6469 7229 0a20  b_dir=sub_dir). 
 00047320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047330: 2020 2020 2020 2020 6f73 2e73 796d 6c69          os.symli
-00047340: 6e6b 2866 696e 666f 5b27 6465 7374 275d  nk(finfo['dest']
-00047350: 2c69 696d 6d29 0a20 2020 2020 2020 2020  ,iimm).         
-00047360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047370: 2020 2073 656c 662e 5365 7449 6465 6e74     self.SetIdent
-00047380: 6974 7928 6969 6d6d 2c2a 2a66 696e 666f  ity(iimm,**finfo
-00047390: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000473a0: 2020 2020 2020 656c 7365 3a20 2320 4669        else: # Fi
-000473b0: 6c65 0a20 2020 2020 2020 2020 2020 2020  le.             
-000473c0: 2020 2020 2020 2020 2020 2069 6620 2764             if 'd
-000473d0: 6174 6127 2069 6e20 7274 5b69 695d 3a20  ata' in rt[ii]: 
-000473e0: 7365 6c66 2e52 7728 6f73 2e70 6174 682e  self.Rw(os.path.
-000473f0: 6a6f 696e 286e 6577 5f64 6573 742c 6969  join(new_dest,ii
-00047400: 292c 6461 7461 3d72 745b 6969 5d5b 2764  ),data=rt[ii]['d
-00047410: 6174 6127 5d2c 6669 6e66 6f3d 6669 6e66  ata'],finfo=finf
-00047420: 6f29 0a20 2020 2020 2020 2020 2020 2020  o).             
-00047430: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00047440: 2070 7269 6e74 2827 7b7d 2066 696c 6520   print('{} file 
-00047450: 6861 7665 206e 6f20 6461 7461 272e 666f  have no data'.fo
-00047460: 726d 6174 2869 6929 290a 0a20 2020 2064  rmat(ii))..    d
-00047470: 6566 204d 6b64 6972 2873 656c 662c 7061  ef Mkdir(self,pa
-00047480: 7468 2c66 6f72 6365 3d46 616c 7365 2c69  th,force=False,i
-00047490: 6e66 6f3d 7b7d 293a 0a20 2020 2020 2020  nfo={}):.       
-000474a0: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-000474b0: 6365 2870 6174 682c 7374 7229 3a20 7265  ce(path,str): re
-000474c0: 7475 726e 204e 6f6e 650a 2020 2020 2020  turn None.      
-000474d0: 2020 6966 206f 732e 7061 7468 2e65 7869    if os.path.exi
-000474e0: 7374 7328 7061 7468 293a 2072 6574 7572  sts(path): retur
-000474f0: 6e20 4e6f 6e65 0a20 2020 2020 2020 2069  n None.        i
-00047500: 6620 666f 7263 653a 0a20 2020 2020 2020  f force:.       
-00047510: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-00047520: 2020 2020 2020 2020 2020 6f73 2e6d 616b            os.mak
-00047530: 6564 6972 7328 7061 7468 290a 2020 2020  edirs(path).    
-00047540: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00047550: 7369 6e73 7461 6e63 6528 696e 666f 2c64  sinstance(info,d
-00047560: 6963 7429 2061 6e64 2069 6e66 6f3a 2073  ict) and info: s
-00047570: 656c 662e 5365 7449 6465 6e74 6974 7928  elf.SetIdentity(
-00047580: 7061 7468 2c2a 2a69 6e66 6f29 0a20 2020  path,**info).   
-00047590: 2020 2020 2020 2020 2065 7863 6570 743a           except:
-000475a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000475b0: 2072 6574 7572 6e20 4661 6c73 650a 2020   return False.  
-000475c0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-000475d0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-000475e0: 2020 2020 2020 2020 2020 2020 206f 732e               os.
-000475f0: 6d6b 6469 7228 7061 7468 290a 2020 2020  mkdir(path).    
-00047600: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00047610: 7369 6e73 7461 6e63 6528 696e 666f 2c64  sinstance(info,d
-00047620: 6963 7429 2061 6e64 2069 6e66 6f3a 2073  ict) and info: s
-00047630: 656c 662e 5365 7449 6465 6e74 6974 7928  elf.SetIdentity(
-00047640: 7061 7468 2c2a 2a69 6e66 6f29 0a20 2020  path,**info).   
-00047650: 2020 2020 2020 2020 2065 7863 6570 743a           except:
-00047660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00047670: 2072 6574 7572 6e20 4661 6c73 650a 2020   return False.  
-00047680: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-00047690: 650a 0a20 2020 2064 6566 2053 6574 4964  e..    def SetId
-000476a0: 656e 7469 7479 2873 656c 662c 7061 7468  entity(self,path
-000476b0: 2c2a 2a6f 7074 7329 3a0a 2020 2020 2020  ,**opts):.      
-000476c0: 2020 6966 206f 732e 7061 7468 2e65 7869    if os.path.exi
-000476d0: 7374 7328 7061 7468 293a 0a20 2020 2020  sts(path):.     
-000476e0: 2020 2020 2020 2063 686d 6f64 3d73 656c         chmod=sel
-000476f0: 662e 4d6f 6465 286f 7074 732e 6765 7428  f.Mode(opts.get(
-00047700: 276d 6f64 6527 2c4e 6f6e 6529 290a 2020  'mode',None)).  
-00047710: 2020 2020 2020 2020 2020 7569 643d 6f70            uid=op
-00047720: 7473 2e67 6574 2827 7569 6427 2c4e 6f6e  ts.get('uid',Non
-00047730: 6529 0a20 2020 2020 2020 2020 2020 2067  e).            g
-00047740: 6964 3d6f 7074 732e 6765 7428 2767 6964  id=opts.get('gid
-00047750: 272c 4e6f 6e65 290a 2020 2020 2020 2020  ',None).        
-00047760: 2020 2020 6174 696d 653d 6f70 7473 2e67      atime=opts.g
-00047770: 6574 2827 6174 696d 6527 2c4e 6f6e 6529  et('atime',None)
-00047780: 0a20 2020 2020 2020 2020 2020 206d 7469  .            mti
-00047790: 6d65 3d6f 7074 732e 6765 7428 276d 7469  me=opts.get('mti
-000477a0: 6d65 272c 4e6f 6e65 290a 2020 2020 2020  me',None).      
-000477b0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-000477c0: 2020 2020 2020 2020 2020 2069 6620 6368             if ch
-000477d0: 6d6f 643a 206f 732e 6368 6d6f 6428 7061  mod: os.chmod(pa
-000477e0: 7468 2c69 6e74 2863 686d 6f64 2c62 6173  th,int(chmod,bas
-000477f0: 653d 3829 290a 2020 2020 2020 2020 2020  e=8)).          
-00047800: 2020 2020 2020 6966 2075 6964 2061 6e64        if uid and
-00047810: 2067 6964 3a20 6f73 2e63 686f 776e 2870   gid: os.chown(p
-00047820: 6174 682c 7569 642c 6769 6429 0a20 2020  ath,uid,gid).   
-00047830: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00047840: 6d74 696d 6520 616e 6420 6174 696d 653a  mtime and atime:
-00047850: 206f 732e 7574 696d 6528 7061 7468 2c28   os.utime(path,(
-00047860: 6174 696d 652c 6d74 696d 6529 2920 2320  atime,mtime)) # 
-00047870: 5469 6d65 2075 7064 6174 6520 6d75 7374  Time update must
-00047880: 2062 6520 6174 206c 6173 7420 6f72 6465   be at last orde
-00047890: 720a 2020 2020 2020 2020 2020 2020 6578  r.            ex
-000478a0: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-000478b0: 2020 2020 2020 7061 7373 0a0a 2020 2020        pass..    
-000478c0: 6465 6620 4578 7472 6163 7428 7365 6c66  def Extract(self
-000478d0: 2c2a 7061 7468 2c2a 2a6f 7074 7329 3a0a  ,*path,**opts):.
-000478e0: 2020 2020 2020 2020 6465 7374 3d6f 7074          dest=opt
-000478f0: 732e 6765 7428 2764 6573 7427 2c4e 6f6e  s.get('dest',Non
-00047900: 6529 0a20 2020 2020 2020 2072 6f6f 745f  e).        root_
-00047910: 7061 7468 3d6f 7074 732e 6765 7428 2772  path=opts.get('r
-00047920: 6f6f 745f 7061 7468 272c 4e6f 6e65 290a  oot_path',None).
-00047930: 2020 2020 2020 2020 7375 625f 6469 723d          sub_dir=
-00047940: 6f70 7473 2e67 6574 2827 7375 625f 6469  opts.get('sub_di
-00047950: 7227 2c46 616c 7365 290a 2020 2020 2020  r',False).      
-00047960: 2020 6966 2049 734e 6f6e 6528 6465 7374    if IsNone(dest
-00047970: 293a 2072 6574 7572 6e20 4661 6c73 650a  ): return False.
-00047980: 2020 2020 2020 2020 6966 206e 6f74 2070          if not p
-00047990: 6174 683a 0a20 2020 2020 2020 2020 2020  ath:.           
-000479a0: 2073 656c 662e 4578 7472 6163 7452 6f6f   self.ExtractRoo
-000479b0: 7428 726f 6f74 5f70 6174 683d 7365 6c66  t(root_path=self
-000479c0: 2e46 696e 6452 5028 292c 6465 7374 3d64  .FindRP(),dest=d
-000479d0: 6573 742c 7375 625f 6469 723d 7375 625f  est,sub_dir=sub_
-000479e0: 6469 7229 0a20 2020 2020 2020 2065 6c73  dir).        els
-000479f0: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
-00047a00: 6f72 2066 696c 6570 6174 6820 696e 2070  or filepath in p
-00047a10: 6174 683a 0a20 2020 2020 2020 2020 2020  ath:.           
-00047a20: 2020 2020 2066 696c 6552 463d 7365 6c66       fileRF=self
-00047a30: 2e46 696e 6452 5028 6669 6c65 7061 7468  .FindRP(filepath
-00047a40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00047a50: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00047a60: 6669 6c65 5246 2c74 7570 6c65 293a 0a20  fileRF,tuple):. 
-00047a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047a80: 2020 2072 6f6f 745f 7061 7468 3d5b 6669     root_path=[fi
-00047a90: 6c65 5246 5b30 5d5d 0a20 2020 2020 2020  leRF[0]].       
-00047aa0: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-00047ab0: 656e 616d 653d 6669 6c65 5246 5b31 5d0a  ename=fileRF[1].
-00047ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047ad0: 2020 2020 7365 6c66 2e45 7874 7261 6374      self.Extract
-00047ae0: 526f 6f74 2872 6f6f 745f 7061 7468 3d72  Root(root_path=r
-00047af0: 6f6f 745f 7061 7468 2c64 6972 7061 7468  oot_path,dirpath
-00047b00: 3d66 696c 656e 616d 652c 6465 7374 3d64  =filename,dest=d
-00047b10: 6573 742c 7375 625f 6469 723d 7375 625f  est,sub_dir=sub_
-00047b20: 6469 7229 0a20 2020 2020 2020 2020 2020  dir).           
-00047b30: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
-00047b40: 616e 6365 2866 696c 6552 462c 6c69 7374  ance(fileRF,list
-00047b50: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00047b60: 2020 2020 2020 2073 656c 662e 4578 7472         self.Extr
-00047b70: 6163 7452 6f6f 7428 726f 6f74 5f70 6174  actRoot(root_pat
-00047b80: 683d 6669 6c65 5246 2c64 6573 743d 6465  h=fileRF,dest=de
-00047b90: 7374 2c73 7562 5f64 6972 3d73 7562 5f64  st,sub_dir=sub_d
-00047ba0: 6972 290a 0a20 2020 2064 6566 2053 6176  ir)..    def Sav
-00047bb0: 6528 7365 6c66 2c66 696c 656e 616d 6529  e(self,filename)
-00047bc0: 3a0a 2020 2020 2020 2020 7076 3d62 2733  :.        pv=b'3
-00047bd0: 270a 2020 2020 2020 2020 6966 2050 7956  '.        if PyV
-00047be0: 6572 2832 293a 2070 763d 6227 3227 0a20  er(2): pv=b'2'. 
-00047bf0: 2020 2020 2020 2073 656c 662e 5277 2866         self.Rw(f
-00047c00: 696c 656e 616d 652c 6461 7461 3d70 762b  ilename,data=pv+
-00047c10: 436f 6d70 7265 7373 2870 6963 6b6c 652e  Compress(pickle.
-00047c20: 6475 6d70 7328 7365 6c66 2e69 6e66 6f2c  dumps(self.info,
-00047c30: 7072 6f74 6f63 6f6c 3d32 292c 6d6f 6465  protocol=2),mode
-00047c40: 3d27 627a 3227 2929 0a0a 2020 2020 6465  ='bz2'))..    de
-00047c50: 6620 4f70 656e 2873 656c 662c 6669 6c65  f Open(self,file
-00047c60: 6e61 6d65 293a 0a20 2020 2020 2020 2069  name):.        i
-00047c70: 6620 6e6f 7420 6f73 2e70 6174 682e 6973  f not os.path.is
-00047c80: 6669 6c65 2866 696c 656e 616d 6529 3a0a  file(filename):.
-00047c90: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00047ca0: 7428 277b 7d20 6e6f 7420 666f 756e 6427  t('{} not found'
-00047cb0: 2e66 6f72 6d61 7428 6669 6c65 6e61 6d65  .format(filename
-00047cc0: 2929 0a20 2020 2020 2020 2020 2020 2072  )).            r
-00047cd0: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
-00047ce0: 2020 2020 6461 7461 3d73 656c 662e 5277      data=self.Rw
-00047cf0: 2866 696c 656e 616d 6529 0a20 2020 2020  (filename).     
-00047d00: 2020 2069 6620 6461 7461 5b30 5d3a 0a20     if data[0]:. 
-00047d10: 2020 2020 2020 2020 2020 2070 763d 6461             pv=da
-00047d20: 7461 5b31 5d5b 305d 0a20 2020 2020 2020  ta[1][0].       
-00047d30: 2020 2020 2069 6620 7076 203d 3d20 2733       if pv == '3
-00047d40: 2720 616e 6420 5079 5665 7228 3229 3a0a  ' and PyVer(2):.
-00047d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047d60: 7072 696e 7428 2754 6865 2064 6174 6120  print('The data 
-00047d70: 7665 7273 696f 6e20 6973 206e 6f74 206d  version is not m
-00047d80: 6174 6368 6564 2e20 506c 6561 7365 2075  atched. Please u
-00047d90: 7365 2050 7974 686f 6e33 2729 0a20 2020  se Python3').   
-00047da0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00047db0: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
-00047dc0: 2020 2020 2020 2320 6465 636f 6d70 7265        # decompre
-00047dd0: 7373 2064 6174 610a 2020 2020 2020 2020  ss data.        
-00047de0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-00047df0: 2020 2020 2020 2020 2064 6364 6174 613d           dcdata=
-00047e00: 4465 636f 6d70 7265 7373 2864 6174 615b  Decompress(data[
-00047e10: 315d 5b31 3a5d 2c6d 6f64 653d 2762 7a32  1][1:],mode='bz2
-00047e20: 2729 0a20 2020 2020 2020 2020 2020 2065  ').            e
-00047e30: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-00047e40: 2020 2020 2020 2070 7269 6e74 2827 5468         print('Th
-00047e50: 6973 2069 7320 6e6f 7420 4b46 494c 4520  is is not KFILE 
-00047e60: 666f 726d 6174 2729 0a20 2020 2020 2020  format').       
-00047e70: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00047e80: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
-00047e90: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-00047ea0: 2020 2020 2020 2073 656c 662e 696e 666f         self.info
-00047eb0: 3d70 6963 6b6c 652e 6c6f 6164 7328 6463  =pickle.loads(dc
-00047ec0: 6461 7461 2920 2320 4c6f 6164 2064 6174  data) # Load dat
-00047ed0: 610a 2020 2020 2020 2020 2020 2020 6578  a.            ex
-00047ee0: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-00047ef0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-00047f00: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00047f10: 656c 662e 696e 666f 3d70 6963 6b6c 652e  elf.info=pickle.
-00047f20: 6c6f 6164 7328 6463 6461 7461 2c65 6e63  loads(dcdata,enc
-00047f30: 6f64 696e 673d 276c 6174 696e 3127 2920  oding='latin1') 
-00047f40: 2320 436f 6e76 6572 7420 3220 746f 2033  # Convert 2 to 3
-00047f50: 2066 6f72 6d61 740a 2020 2020 2020 2020   format.        
-00047f60: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
-00047f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047f80: 2020 2020 7072 696e 7428 2754 6869 7320      print('This 
-00047f90: 6973 206e 6f74 204b 4649 4c45 2066 6f72  is not KFILE for
-00047fa0: 6d61 7427 290a 2020 2020 2020 2020 2020  mat').          
-00047fb0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00047fc0: 2046 616c 7365 0a20 2020 2020 2020 2065   False.        e
-00047fd0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00047fe0: 2070 7269 6e74 2827 4361 6e20 6e6f 7420   print('Can not 
-00047ff0: 7265 6164 207b 7d27 2e66 6f72 6d61 7428  read {}'.format(
-00048000: 6669 6c65 6e61 6d65 2929 0a20 2020 2020  filename)).     
-00048010: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
-00048020: 6c73 650a 0a63 6c61 7373 2054 5259 3a0a  lse..class TRY:.
-00048030: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-00048040: 2873 656c 662c 6175 746f 3d4e 6f6e 652c  (self,auto=None,
-00048050: 6c6f 6766 696c 653d 4e6f 6e65 2c6c 6f67  logfile=None,log
-00048060: 5f61 6c6c 3d46 616c 7365 2c65 7272 5f73  _all=False,err_s
-00048070: 6372 6565 6e3d 4661 6c73 652c 6572 725f  creen=False,err_
-00048080: 6578 6974 3d46 616c 7365 2c64 6566 6175  exit=False,defau
-00048090: 6c74 3d4e 6f6e 652c 6c6f 673d 4e6f 6e65  lt=None,log=None
-000480a0: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
-000480b0: 6175 746f 3d61 7574 6f20 2354 7275 653a  auto=auto #True:
-000480c0: 2041 6c6c 2061 7574 6f2c 204e 6f6e 653a   All auto, None:
-000480d0: 2064 6566 6175 6c74 7320 6175 746f 2c20   defaults auto, 
-000480e0: 4661 6c73 653a 206e 6f74 2075 7365 0a20  False: not use. 
-000480f0: 2020 2020 2020 2073 656c 662e 6c6f 6766         self.logf
-00048100: 696c 653d 6c6f 6766 696c 650a 2020 2020  ile=logfile.    
-00048110: 2020 2020 7365 6c66 2e6c 6f67 5f61 6c6c      self.log_all
-00048120: 3d6c 6f67 5f61 6c6c 0a20 2020 2020 2020  =log_all.       
-00048130: 2073 656c 662e 6c6f 673d 6c6f 670a 2020   self.log=log.  
-00048140: 2020 2020 2020 7365 6c66 2e65 7272 5f65        self.err_e
-00048150: 7869 743d 6572 725f 6578 6974 0a20 2020  xit=err_exit.   
-00048160: 2020 2020 2073 656c 662e 6572 725f 7363       self.err_sc
-00048170: 7265 656e 3d54 7275 6520 6966 2065 7272  reen=True if err
-00048180: 5f65 7869 7420 656c 7365 2065 7272 5f73  _exit else err_s
-00048190: 6372 6565 6e0a 2020 2020 2020 2020 0a20  creen.        . 
-000481a0: 2020 2020 2020 2073 656c 662e 7263 3d4e         self.rc=N
-000481b0: 6f6e 6520 234e 6f6e 653a 206e 6f74 2072  one #None: not r
-000481c0: 756e 2c20 4661 6c73 653a 2073 6f6d 6574  un, False: somet
-000481d0: 6869 6e67 2065 7272 6f72 2c20 5472 7565  hing error, True
-000481e0: 3a20 7275 6e20 6675 6e63 7469 6f6e 0a20  : run function. 
-000481f0: 2020 2020 2020 2073 656c 662e 7265 7375         self.resu
-00048200: 6c74 3d64 6566 6175 6c74 0a20 2020 2020  lt=default.     
-00048210: 2020 2073 656c 662e 6572 726f 723d 4e6f     self.error=No
-00048220: 6e65 0a0a 2020 2020 6465 6620 5f5f 7265  ne..    def __re
-00048230: 7072 5f5f 2873 656c 6629 3a0a 2020 2020  pr__(self):.    
-00048240: 2020 2020 6966 2073 656c 662e 7265 7375      if self.resu
-00048250: 6c74 3a0a 2020 2020 2020 2020 2020 2020  lt:.            
-00048260: 7265 7475 726e 2053 7472 2873 656c 662e  return Str(self.
-00048270: 7265 7375 6c74 290a 2020 2020 2020 2020  result).        
-00048280: 7265 7475 726e 2027 270a 0a20 2020 2064  return ''..    d
-00048290: 6566 2072 756e 2873 656c 662c 6675 6e63  ef run(self,func
-000482a0: 2c2a 696e 7073 2c2a 2a6f 7074 7329 3a0a  ,*inps,**opts):.
-000482b0: 2020 2020 2020 2020 2369 6620 5479 7065          #if Type
-000482c0: 2866 756e 632c 2766 756e 6374 696f 6e27  (func,'function'
-000482d0: 293a 0a20 2020 2020 2020 2069 6620 4973  ):.        if Is
-000482e0: 4675 6e63 7469 6f6e 2866 756e 632c 6275  Function(func,bu
-000482f0: 696c 7469 6e3d 5472 7565 293a 0a20 2020  iltin=True):.   
-00048300: 2020 2020 2020 2020 2061 7267 3d41 7267           arg=Arg
-00048310: 7328 6675 6e63 290a 2020 2020 2020 2020  s(func).        
-00048320: 2020 2020 6966 2073 656c 662e 6c6f 675f      if self.log_
-00048330: 616c 6c3a 0a20 2020 2020 2020 2020 2020  all:.           
-00048340: 2020 2020 2070 7269 6e74 6628 2754 7279       printf('Try
-00048350: 2046 756e 6374 696f 6e3a 207b 7d7b 7d5c   Function: {}{}\
-00048360: 6e52 6563 6976 6564 3a20 7b7d 2c20 7b7d  nRecived: {}, {}
-00048370: 272e 666f 726d 6174 2866 756e 632e 5f5f  '.format(func.__
-00048380: 6e61 6d65 5f5f 2c46 756e 6374 696f 6e41  name__,FunctionA
-00048390: 7267 7328 6675 6e63 2c6d 6f64 653d 2773  rgs(func,mode='s
-000483a0: 7472 696e 6727 292c 696e 7073 2c6f 7074  tring'),inps,opt
-000483b0: 7329 2c64 6174 653d 5472 7565 2c63 616c  s),date=True,cal
-000483c0: 6c65 725f 7472 6565 3d54 7275 652c 6361  ler_tree=True,ca
-000483d0: 6c6c 6572 5f70 6172 656e 743d 2731 2d35  ller_parent='1-5
-000483e0: 272c 6361 6c6c 6572 5f66 696c 656e 616d  ',caller_filenam
-000483f0: 653d 5472 7565 2c63 616c 6c65 725f 6c69  e=True,caller_li
-00048400: 6e65 5f6e 756d 6265 723d 5472 7565 2c6c  ne_number=True,l
-00048410: 6f67 6669 6c65 3d73 656c 662e 6c6f 6766  ogfile=self.logf
-00048420: 696c 652c 6c6f 673d 7365 6c66 2e6c 6f67  ile,log=self.log
-00048430: 2c64 7370 3d27 6627 2069 6620 7365 6c66  ,dsp='f' if self
-00048440: 2e6c 6f67 6669 6c65 2065 6c73 6520 2761  .logfile else 'a
-00048450: 2729 0a0a 2020 2020 2020 2020 2020 2020  ')..            
-00048460: 6e69 6e70 733d 5b5d 0a20 2020 2020 2020  ninps=[].       
-00048470: 2020 2020 206e 6f70 7473 3d7b 7d0a 2020       nopts={}.  
-00048480: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-00048490: 662e 6175 746f 2069 7320 6e6f 7420 4661  f.auto is not Fa
-000484a0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000484b0: 2020 2020 206e 696e 7073 5f6e 3d30 0a20       ninps_n=0. 
-000484c0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-000484d0: 696e 7073 5f6f 3d30 0a20 2020 2020 2020  inps_o=0.       
-000484e0: 2020 2020 2020 2020 206f 7074 735f 693d           opts_i=
-000484f0: 6c69 7374 286f 7074 732e 6974 656d 7328  list(opts.items(
-00048500: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-00048510: 2020 2077 6869 6c65 206c 656e 2861 7267     while len(arg
-00048520: 2e67 6574 2827 6172 6773 272c 5b5d 2929  .get('args',[]))
-00048530: 203e 206e 696e 7073 5f6e 3a0a 2020 2020   > ninps_n:.    
-00048540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048550: 6966 206e 696e 7073 5f6e 203c 206c 656e  if ninps_n < len
-00048560: 2869 6e70 7329 3a0a 2020 2020 2020 2020  (inps):.        
-00048570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048580: 6e69 6e70 732e 6170 7065 6e64 2869 6e70  ninps.append(inp
-00048590: 735b 6e69 6e70 735f 6e5d 290a 2020 2020  s[ninps_n]).    
-000485a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000485b0: 656c 6966 2073 656c 662e 6175 746f 2069  elif self.auto i
-000485c0: 7320 5472 7565 2061 6e64 206e 696e 7073  s True and ninps
-000485d0: 5f6e 203c 206c 656e 2869 6e70 7329 2b6c  _n < len(inps)+l
-000485e0: 656e 286f 7074 7329 3a0a 2020 2020 2020  en(opts):.      
-000485f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048600: 2020 6966 206f 7074 735f 695b 6e69 6e70    if opts_i[ninp
-00048610: 735f 6f5d 5b30 5d20 6e6f 7420 696e 2061  s_o][0] not in a
-00048620: 7267 2e67 6574 2827 6465 6661 756c 7473  rg.get('defaults
-00048630: 272c 7b7d 293a 0a20 2020 2020 2020 2020  ',{}):.         
-00048640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048650: 2020 206e 696e 7073 2e61 7070 656e 6428     ninps.append(
-00048660: 6f70 7473 5f69 5b6e 696e 7073 5f6f 5d5b  opts_i[ninps_o][
-00048670: 315d 290a 2020 2020 2020 2020 2020 2020  1]).            
-00048680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048690: 6e69 6e70 735f 6f2b 3d31 0a20 2020 2020  ninps_o+=1.     
-000486a0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000486b0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000486c0: 2020 2020 2020 2020 2020 2020 2062 7265               bre
-000486d0: 616b 0a20 2020 2020 2020 2020 2020 2020  ak.             
-000486e0: 2020 2020 2020 206e 696e 7073 5f6e 2b3d         ninps_n+=
-000486f0: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
-00048700: 2020 6966 2061 7267 2e67 6574 2827 7661    if arg.get('va
-00048710: 7261 7267 7327 293a 0a20 2020 2020 2020  rargs'):.       
-00048720: 2020 2020 2020 2020 2020 2020 206e 696e               nin
-00048730: 7073 3d6e 696e 7073 2b69 6e70 735b 6e69  ps=ninps+inps[ni
-00048740: 6e70 735f 6e3a 5d0a 2020 2020 2020 2020  nps_n:].        
-00048750: 2020 2020 2020 2020 2020 2020 6e69 6e70              ninp
-00048760: 735f 6e3d 6c65 6e28 696e 7073 290a 2020  s_n=len(inps).  
-00048770: 2020 2020 2020 2020 2020 2020 2020 6e6f                no
-00048780: 5f69 6e70 733d 4661 6c73 650a 2020 2020  _inps=False.    
-00048790: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-000487a0: 696e 7073 5f6f 203e 2030 203a 206f 7074  inps_o > 0 : opt
-000487b0: 733d 6469 6374 286f 7074 735f 695b 6e69  s=dict(opts_i[ni
-000487c0: 6e70 735f 6f3a 5d29 0a20 2020 2020 2020  nps_o:]).       
-000487d0: 2020 2020 2020 2020 2066 6f72 206b 2069           for k i
-000487e0: 6e20 6172 672e 6765 7428 2764 6566 6175  n arg.get('defau
-000487f0: 6c74 7327 2c7b 7d29 3a0a 2020 2020 2020  lts',{}):.      
+00047330: 2020 2020 2020 2023 6966 2064 6d74 696d         #if dmtim
+00047340: 6520 616e 6420 6461 7469 6d65 3a20 6f73  e and datime: os
+00047350: 2e75 7469 6d65 286d 7964 6972 2c28 6461  .utime(mydir,(da
+00047360: 7469 6d65 2c64 6d74 696d 6529 2920 2320  time,dmtime)) # 
+00047370: 5469 6d65 2075 7064 6174 6520 6d75 7374  Time update must
+00047380: 2062 6520 6174 206c 6173 7420 6f72 6465   be at last orde
+00047390: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
+000473a0: 2020 2020 2020 656c 6966 2066 7479 7065        elif ftype
+000473b0: 203d 3d20 276c 696e 6b27 3a0a 2020 2020   == 'link':.    
+000473c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000473d0: 2020 2020 6969 6d6d 3d6f 732e 7061 7468      iimm=os.path
+000473e0: 2e6a 6f69 6e28 6e65 775f 6465 7374 2c69  .join(new_dest,i
+000473f0: 6929 0a20 2020 2020 2020 2020 2020 2020  i).             
+00047400: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00047410: 7420 6f73 2e70 6174 682e 6578 6973 7473  t os.path.exists
+00047420: 2869 696d 6d29 3a0a 2020 2020 2020 2020  (iimm):.        
+00047430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047440: 2020 2020 6f73 2e73 796d 6c69 6e6b 2866      os.symlink(f
+00047450: 696e 666f 5b27 6465 7374 275d 2c69 696d  info['dest'],iim
+00047460: 6d29 0a20 2020 2020 2020 2020 2020 2020  m).             
+00047470: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00047480: 656c 662e 5365 7449 6465 6e74 6974 7928  elf.SetIdentity(
+00047490: 6969 6d6d 2c2a 2a66 696e 666f 290a 2020  iimm,**finfo).  
+000474a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000474b0: 2020 656c 7365 3a20 2320 4669 6c65 0a20    else: # File. 
+000474c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000474d0: 2020 2020 2020 2069 6620 2764 6174 6127         if 'data'
+000474e0: 2069 6e20 7274 5b69 695d 3a20 7365 6c66   in rt[ii]: self
+000474f0: 2e52 7728 6f73 2e70 6174 682e 6a6f 696e  .Rw(os.path.join
+00047500: 286e 6577 5f64 6573 742c 6969 292c 6461  (new_dest,ii),da
+00047510: 7461 3d72 745b 6969 5d5b 2764 6174 6127  ta=rt[ii]['data'
+00047520: 5d2c 6669 6e66 6f3d 6669 6e66 6f29 0a20  ],finfo=finfo). 
+00047530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047540: 2020 2020 2020 2065 6c73 653a 2070 7269         else: pri
+00047550: 6e74 2827 7b7d 2066 696c 6520 6861 7665  nt('{} file have
+00047560: 206e 6f20 6461 7461 272e 666f 726d 6174   no data'.format
+00047570: 2869 6929 290a 0a20 2020 2064 6566 204d  (ii))..    def M
+00047580: 6b64 6972 2873 656c 662c 7061 7468 2c66  kdir(self,path,f
+00047590: 6f72 6365 3d46 616c 7365 2c69 6e66 6f3d  orce=False,info=
+000475a0: 7b7d 293a 0a20 2020 2020 2020 2069 6620  {}):.        if 
+000475b0: 6e6f 7420 6973 696e 7374 616e 6365 2870  not isinstance(p
+000475c0: 6174 682c 7374 7229 3a20 7265 7475 726e  ath,str): return
+000475d0: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+000475e0: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
+000475f0: 7061 7468 293a 2072 6574 7572 6e20 4e6f  path): return No
+00047600: 6e65 0a20 2020 2020 2020 2069 6620 666f  ne.        if fo
+00047610: 7263 653a 0a20 2020 2020 2020 2020 2020  rce:.           
+00047620: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+00047630: 2020 2020 2020 6f73 2e6d 616b 6564 6972        os.makedir
+00047640: 7328 7061 7468 290a 2020 2020 2020 2020  s(path).        
+00047650: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00047660: 7461 6e63 6528 696e 666f 2c64 6963 7429  tance(info,dict)
+00047670: 2061 6e64 2069 6e66 6f3a 2073 656c 662e   and info: self.
+00047680: 5365 7449 6465 6e74 6974 7928 7061 7468  SetIdentity(path
+00047690: 2c2a 2a69 6e66 6f29 0a20 2020 2020 2020  ,**info).       
+000476a0: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
+000476b0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+000476c0: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+000476d0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000476e0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+000476f0: 2020 2020 2020 2020 206f 732e 6d6b 6469           os.mkdi
+00047700: 7228 7061 7468 290a 2020 2020 2020 2020  r(path).        
+00047710: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00047720: 7461 6e63 6528 696e 666f 2c64 6963 7429  tance(info,dict)
+00047730: 2061 6e64 2069 6e66 6f3a 2073 656c 662e   and info: self.
+00047740: 5365 7449 6465 6e74 6974 7928 7061 7468  SetIdentity(path
+00047750: 2c2a 2a69 6e66 6f29 0a20 2020 2020 2020  ,**info).       
+00047760: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
+00047770: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00047780: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+00047790: 2020 7265 7475 726e 2054 7275 650a 0a20    return True.. 
+000477a0: 2020 2064 6566 2053 6574 4964 656e 7469     def SetIdenti
+000477b0: 7479 2873 656c 662c 7061 7468 2c2a 2a6f  ty(self,path,**o
+000477c0: 7074 7329 3a0a 2020 2020 2020 2020 6966  pts):.        if
+000477d0: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
+000477e0: 7061 7468 293a 0a20 2020 2020 2020 2020  path):.         
+000477f0: 2020 2063 686d 6f64 3d73 656c 662e 4d6f     chmod=self.Mo
+00047800: 6465 286f 7074 732e 6765 7428 276d 6f64  de(opts.get('mod
+00047810: 6527 2c4e 6f6e 6529 290a 2020 2020 2020  e',None)).      
+00047820: 2020 2020 2020 7569 643d 6f70 7473 2e67        uid=opts.g
+00047830: 6574 2827 7569 6427 2c4e 6f6e 6529 0a20  et('uid',None). 
+00047840: 2020 2020 2020 2020 2020 2067 6964 3d6f             gid=o
+00047850: 7074 732e 6765 7428 2767 6964 272c 4e6f  pts.get('gid',No
+00047860: 6e65 290a 2020 2020 2020 2020 2020 2020  ne).            
+00047870: 6174 696d 653d 6f70 7473 2e67 6574 2827  atime=opts.get('
+00047880: 6174 696d 6527 2c4e 6f6e 6529 0a20 2020  atime',None).   
+00047890: 2020 2020 2020 2020 206d 7469 6d65 3d6f           mtime=o
+000478a0: 7074 732e 6765 7428 276d 7469 6d65 272c  pts.get('mtime',
+000478b0: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
+000478c0: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
+000478d0: 2020 2020 2020 2069 6620 6368 6d6f 643a         if chmod:
+000478e0: 206f 732e 6368 6d6f 6428 7061 7468 2c69   os.chmod(path,i
+000478f0: 6e74 2863 686d 6f64 2c62 6173 653d 3829  nt(chmod,base=8)
+00047900: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00047910: 2020 6966 2075 6964 2061 6e64 2067 6964    if uid and gid
+00047920: 3a20 6f73 2e63 686f 776e 2870 6174 682c  : os.chown(path,
+00047930: 7569 642c 6769 6429 0a20 2020 2020 2020  uid,gid).       
+00047940: 2020 2020 2020 2020 2069 6620 6d74 696d           if mtim
+00047950: 6520 616e 6420 6174 696d 653a 206f 732e  e and atime: os.
+00047960: 7574 696d 6528 7061 7468 2c28 6174 696d  utime(path,(atim
+00047970: 652c 6d74 696d 6529 2920 2320 5469 6d65  e,mtime)) # Time
+00047980: 2075 7064 6174 6520 6d75 7374 2062 6520   update must be 
+00047990: 6174 206c 6173 7420 6f72 6465 720a 2020  at last order.  
+000479a0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+000479b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000479c0: 2020 7061 7373 0a0a 2020 2020 6465 6620    pass..    def 
+000479d0: 4578 7472 6163 7428 7365 6c66 2c2a 7061  Extract(self,*pa
+000479e0: 7468 2c2a 2a6f 7074 7329 3a0a 2020 2020  th,**opts):.    
+000479f0: 2020 2020 6465 7374 3d6f 7074 732e 6765      dest=opts.ge
+00047a00: 7428 2764 6573 7427 2c4e 6f6e 6529 0a20  t('dest',None). 
+00047a10: 2020 2020 2020 2072 6f6f 745f 7061 7468         root_path
+00047a20: 3d6f 7074 732e 6765 7428 2772 6f6f 745f  =opts.get('root_
+00047a30: 7061 7468 272c 4e6f 6e65 290a 2020 2020  path',None).    
+00047a40: 2020 2020 7375 625f 6469 723d 6f70 7473      sub_dir=opts
+00047a50: 2e67 6574 2827 7375 625f 6469 7227 2c46  .get('sub_dir',F
+00047a60: 616c 7365 290a 2020 2020 2020 2020 6966  alse).        if
+00047a70: 2049 734e 6f6e 6528 6465 7374 293a 2072   IsNone(dest): r
+00047a80: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
+00047a90: 2020 2020 6966 206e 6f74 2070 6174 683a      if not path:
+00047aa0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00047ab0: 662e 4578 7472 6163 7452 6f6f 7428 726f  f.ExtractRoot(ro
+00047ac0: 6f74 5f70 6174 683d 7365 6c66 2e46 696e  ot_path=self.Fin
+00047ad0: 6452 5028 292c 6465 7374 3d64 6573 742c  dRP(),dest=dest,
+00047ae0: 7375 625f 6469 723d 7375 625f 6469 7229  sub_dir=sub_dir)
+00047af0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00047b00: 2020 2020 2020 2020 2020 2066 6f72 2066             for f
+00047b10: 696c 6570 6174 6820 696e 2070 6174 683a  ilepath in path:
+00047b20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00047b30: 2066 696c 6552 463d 7365 6c66 2e46 696e   fileRF=self.Fin
+00047b40: 6452 5028 6669 6c65 7061 7468 290a 2020  dRP(filepath).  
+00047b50: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00047b60: 2069 7369 6e73 7461 6e63 6528 6669 6c65   isinstance(file
+00047b70: 5246 2c74 7570 6c65 293a 0a20 2020 2020  RF,tuple):.     
+00047b80: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00047b90: 6f6f 745f 7061 7468 3d5b 6669 6c65 5246  oot_path=[fileRF
+00047ba0: 5b30 5d5d 0a20 2020 2020 2020 2020 2020  [0]].           
+00047bb0: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
+00047bc0: 653d 6669 6c65 5246 5b31 5d0a 2020 2020  e=fileRF[1].    
+00047bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047be0: 7365 6c66 2e45 7874 7261 6374 526f 6f74  self.ExtractRoot
+00047bf0: 2872 6f6f 745f 7061 7468 3d72 6f6f 745f  (root_path=root_
+00047c00: 7061 7468 2c64 6972 7061 7468 3d66 696c  path,dirpath=fil
+00047c10: 656e 616d 652c 6465 7374 3d64 6573 742c  ename,dest=dest,
+00047c20: 7375 625f 6469 723d 7375 625f 6469 7229  sub_dir=sub_dir)
+00047c30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00047c40: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+00047c50: 2866 696c 6552 462c 6c69 7374 293a 0a20  (fileRF,list):. 
+00047c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047c70: 2020 2073 656c 662e 4578 7472 6163 7452     self.ExtractR
+00047c80: 6f6f 7428 726f 6f74 5f70 6174 683d 6669  oot(root_path=fi
+00047c90: 6c65 5246 2c64 6573 743d 6465 7374 2c73  leRF,dest=dest,s
+00047ca0: 7562 5f64 6972 3d73 7562 5f64 6972 290a  ub_dir=sub_dir).
+00047cb0: 0a20 2020 2064 6566 2053 6176 6528 7365  .    def Save(se
+00047cc0: 6c66 2c66 696c 656e 616d 6529 3a0a 2020  lf,filename):.  
+00047cd0: 2020 2020 2020 7076 3d62 2733 270a 2020        pv=b'3'.  
+00047ce0: 2020 2020 2020 6966 2050 7956 6572 2832        if PyVer(2
+00047cf0: 293a 2070 763d 6227 3227 0a20 2020 2020  ): pv=b'2'.     
+00047d00: 2020 2073 656c 662e 5277 2866 696c 656e     self.Rw(filen
+00047d10: 616d 652c 6461 7461 3d70 762b 436f 6d70  ame,data=pv+Comp
+00047d20: 7265 7373 2870 6963 6b6c 652e 6475 6d70  ress(pickle.dump
+00047d30: 7328 7365 6c66 2e69 6e66 6f2c 7072 6f74  s(self.info,prot
+00047d40: 6f63 6f6c 3d32 292c 6d6f 6465 3d27 627a  ocol=2),mode='bz
+00047d50: 3227 2929 0a0a 2020 2020 6465 6620 4f70  2'))..    def Op
+00047d60: 656e 2873 656c 662c 6669 6c65 6e61 6d65  en(self,filename
+00047d70: 293a 0a20 2020 2020 2020 2069 6620 6e6f  ):.        if no
+00047d80: 7420 6f73 2e70 6174 682e 6973 6669 6c65  t os.path.isfile
+00047d90: 2866 696c 656e 616d 6529 3a0a 2020 2020  (filename):.    
+00047da0: 2020 2020 2020 2020 7072 696e 7428 277b          print('{
+00047db0: 7d20 6e6f 7420 666f 756e 6427 2e66 6f72  } not found'.for
+00047dc0: 6d61 7428 6669 6c65 6e61 6d65 2929 0a20  mat(filename)). 
+00047dd0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00047de0: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
+00047df0: 6461 7461 3d73 656c 662e 5277 2866 696c  data=self.Rw(fil
+00047e00: 656e 616d 6529 0a20 2020 2020 2020 2069  ename).        i
+00047e10: 6620 6461 7461 5b30 5d3a 0a20 2020 2020  f data[0]:.     
+00047e20: 2020 2020 2020 2070 763d 6461 7461 5b31         pv=data[1
+00047e30: 5d5b 305d 0a20 2020 2020 2020 2020 2020  ][0].           
+00047e40: 2069 6620 7076 203d 3d20 2733 2720 616e   if pv == '3' an
+00047e50: 6420 5079 5665 7228 3229 3a0a 2020 2020  d PyVer(2):.    
+00047e60: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00047e70: 7428 2754 6865 2064 6174 6120 7665 7273  t('The data vers
+00047e80: 696f 6e20 6973 206e 6f74 206d 6174 6368  ion is not match
+00047e90: 6564 2e20 506c 6561 7365 2075 7365 2050  ed. Please use P
+00047ea0: 7974 686f 6e33 2729 0a20 2020 2020 2020  ython3').       
+00047eb0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00047ec0: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
+00047ed0: 2020 2320 6465 636f 6d70 7265 7373 2064    # decompress d
+00047ee0: 6174 610a 2020 2020 2020 2020 2020 2020  ata.            
+00047ef0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+00047f00: 2020 2020 2064 6364 6174 613d 4465 636f       dcdata=Deco
+00047f10: 6d70 7265 7373 2864 6174 615b 315d 5b31  mpress(data[1][1
+00047f20: 3a5d 2c6d 6f64 653d 2762 7a32 2729 0a20  :],mode='bz2'). 
+00047f30: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+00047f40: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+00047f50: 2020 2070 7269 6e74 2827 5468 6973 2069     print('This i
+00047f60: 7320 6e6f 7420 4b46 494c 4520 666f 726d  s not KFILE form
+00047f70: 6174 2729 0a20 2020 2020 2020 2020 2020  at').           
+00047f80: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
+00047f90: 650a 2020 2020 2020 2020 2020 2020 7472  e.            tr
+00047fa0: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+00047fb0: 2020 2073 656c 662e 696e 666f 3d70 6963     self.info=pic
+00047fc0: 6b6c 652e 6c6f 6164 7328 6463 6461 7461  kle.loads(dcdata
+00047fd0: 2920 2320 4c6f 6164 2064 6174 610a 2020  ) # Load data.  
+00047fe0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+00047ff0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00048000: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
+00048010: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00048020: 696e 666f 3d70 6963 6b6c 652e 6c6f 6164  info=pickle.load
+00048030: 7328 6463 6461 7461 2c65 6e63 6f64 696e  s(dcdata,encodin
+00048040: 673d 276c 6174 696e 3127 2920 2320 436f  g='latin1') # Co
+00048050: 6e76 6572 7420 3220 746f 2033 2066 6f72  nvert 2 to 3 for
+00048060: 6d61 740a 2020 2020 2020 2020 2020 2020  mat.            
+00048070: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+00048080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048090: 7072 696e 7428 2754 6869 7320 6973 206e  print('This is n
+000480a0: 6f74 204b 4649 4c45 2066 6f72 6d61 7427  ot KFILE format'
+000480b0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000480c0: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
+000480d0: 7365 0a20 2020 2020 2020 2065 6c73 653a  se.        else:
+000480e0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+000480f0: 6e74 2827 4361 6e20 6e6f 7420 7265 6164  nt('Can not read
+00048100: 207b 7d27 2e66 6f72 6d61 7428 6669 6c65   {}'.format(file
+00048110: 6e61 6d65 2929 0a20 2020 2020 2020 2020  name)).         
+00048120: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+00048130: 0a63 6c61 7373 2054 5259 3a0a 2020 2020  .class TRY:.    
+00048140: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+00048150: 662c 6175 746f 3d4e 6f6e 652c 6c6f 6766  f,auto=None,logf
+00048160: 696c 653d 4e6f 6e65 2c6c 6f67 5f61 6c6c  ile=None,log_all
+00048170: 3d46 616c 7365 2c65 7272 5f73 6372 6565  =False,err_scree
+00048180: 6e3d 4661 6c73 652c 6572 725f 6578 6974  n=False,err_exit
+00048190: 3d46 616c 7365 2c64 6566 6175 6c74 3d4e  =False,default=N
+000481a0: 6f6e 652c 6c6f 673d 4e6f 6e65 293a 0a20  one,log=None):. 
+000481b0: 2020 2020 2020 2073 656c 662e 6175 746f         self.auto
+000481c0: 3d61 7574 6f20 2354 7275 653a 2041 6c6c  =auto #True: All
+000481d0: 2061 7574 6f2c 204e 6f6e 653a 2064 6566   auto, None: def
+000481e0: 6175 6c74 7320 6175 746f 2c20 4661 6c73  aults auto, Fals
+000481f0: 653a 206e 6f74 2075 7365 0a20 2020 2020  e: not use.     
+00048200: 2020 2073 656c 662e 6c6f 6766 696c 653d     self.logfile=
+00048210: 6c6f 6766 696c 650a 2020 2020 2020 2020  logfile.        
+00048220: 7365 6c66 2e6c 6f67 5f61 6c6c 3d6c 6f67  self.log_all=log
+00048230: 5f61 6c6c 0a20 2020 2020 2020 2073 656c  _all.        sel
+00048240: 662e 6c6f 673d 6c6f 670a 2020 2020 2020  f.log=log.      
+00048250: 2020 7365 6c66 2e65 7272 5f65 7869 743d    self.err_exit=
+00048260: 6572 725f 6578 6974 0a20 2020 2020 2020  err_exit.       
+00048270: 2073 656c 662e 6572 725f 7363 7265 656e   self.err_screen
+00048280: 3d54 7275 6520 6966 2065 7272 5f65 7869  =True if err_exi
+00048290: 7420 656c 7365 2065 7272 5f73 6372 6565  t else err_scree
+000482a0: 6e0a 2020 2020 2020 2020 0a20 2020 2020  n.        .     
+000482b0: 2020 2073 656c 662e 7263 3d4e 6f6e 6520     self.rc=None 
+000482c0: 234e 6f6e 653a 206e 6f74 2072 756e 2c20  #None: not run, 
+000482d0: 4661 6c73 653a 2073 6f6d 6574 6869 6e67  False: something
+000482e0: 2065 7272 6f72 2c20 5472 7565 3a20 7275   error, True: ru
+000482f0: 6e20 6675 6e63 7469 6f6e 0a20 2020 2020  n function.     
+00048300: 2020 2073 656c 662e 7265 7375 6c74 3d64     self.result=d
+00048310: 6566 6175 6c74 0a20 2020 2020 2020 2073  efault.        s
+00048320: 656c 662e 6572 726f 723d 4e6f 6e65 0a0a  elf.error=None..
+00048330: 2020 2020 6465 6620 5f5f 7265 7072 5f5f      def __repr__
+00048340: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00048350: 6966 2073 656c 662e 7265 7375 6c74 3a0a  if self.result:.
+00048360: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00048370: 726e 2053 7472 2873 656c 662e 7265 7375  rn Str(self.resu
+00048380: 6c74 290a 2020 2020 2020 2020 7265 7475  lt).        retu
+00048390: 726e 2027 270a 0a20 2020 2064 6566 2072  rn ''..    def r
+000483a0: 756e 2873 656c 662c 6675 6e63 2c2a 696e  un(self,func,*in
+000483b0: 7073 2c2a 2a6f 7074 7329 3a0a 2020 2020  ps,**opts):.    
+000483c0: 2020 2020 2369 6620 5479 7065 2866 756e      #if Type(fun
+000483d0: 632c 2766 756e 6374 696f 6e27 293a 0a20  c,'function'):. 
+000483e0: 2020 2020 2020 2069 6620 4973 4675 6e63         if IsFunc
+000483f0: 7469 6f6e 2866 756e 632c 6275 696c 7469  tion(func,builti
+00048400: 6e3d 5472 7565 293a 0a20 2020 2020 2020  n=True):.       
+00048410: 2020 2020 2061 7267 3d41 7267 7328 6675       arg=Args(fu
+00048420: 6e63 290a 2020 2020 2020 2020 2020 2020  nc).            
+00048430: 6966 2073 656c 662e 6c6f 675f 616c 6c3a  if self.log_all:
+00048440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00048450: 2070 7269 6e74 6628 2754 7279 2046 756e   printf('Try Fun
+00048460: 6374 696f 6e3a 207b 7d7b 7d5c 6e52 6563  ction: {}{}\nRec
+00048470: 6976 6564 3a20 7b7d 2c20 7b7d 272e 666f  ived: {}, {}'.fo
+00048480: 726d 6174 2866 756e 632e 5f5f 6e61 6d65  rmat(func.__name
+00048490: 5f5f 2c46 756e 6374 696f 6e41 7267 7328  __,FunctionArgs(
+000484a0: 6675 6e63 2c6d 6f64 653d 2773 7472 696e  func,mode='strin
+000484b0: 6727 292c 696e 7073 2c6f 7074 7329 2c64  g'),inps,opts),d
+000484c0: 6174 653d 5472 7565 2c63 616c 6c65 725f  ate=True,caller_
+000484d0: 7472 6565 3d54 7275 652c 6361 6c6c 6572  tree=True,caller
+000484e0: 5f70 6172 656e 743d 2731 2d35 272c 6361  _parent='1-5',ca
+000484f0: 6c6c 6572 5f66 696c 656e 616d 653d 5472  ller_filename=Tr
+00048500: 7565 2c63 616c 6c65 725f 6c69 6e65 5f6e  ue,caller_line_n
+00048510: 756d 6265 723d 5472 7565 2c6c 6f67 6669  umber=True,logfi
+00048520: 6c65 3d73 656c 662e 6c6f 6766 696c 652c  le=self.logfile,
+00048530: 6c6f 673d 7365 6c66 2e6c 6f67 2c64 7370  log=self.log,dsp
+00048540: 3d27 6627 2069 6620 7365 6c66 2e6c 6f67  ='f' if self.log
+00048550: 6669 6c65 2065 6c73 6520 2761 2729 0a0a  file else 'a')..
+00048560: 2020 2020 2020 2020 2020 2020 6e69 6e70              ninp
+00048570: 733d 5b5d 0a20 2020 2020 2020 2020 2020  s=[].           
+00048580: 206e 6f70 7473 3d7b 7d0a 2020 2020 2020   nopts={}.      
+00048590: 2020 2020 2020 6966 2073 656c 662e 6175        if self.au
+000485a0: 746f 2069 7320 6e6f 7420 4661 6c73 653a  to is not False:
+000485b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000485c0: 206e 696e 7073 5f6e 3d30 0a20 2020 2020   ninps_n=0.     
+000485d0: 2020 2020 2020 2020 2020 206e 696e 7073             ninps
+000485e0: 5f6f 3d30 0a20 2020 2020 2020 2020 2020  _o=0.           
+000485f0: 2020 2020 206f 7074 735f 693d 6c69 7374       opts_i=list
+00048600: 286f 7074 732e 6974 656d 7328 2929 0a20  (opts.items()). 
+00048610: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00048620: 6869 6c65 206c 656e 2861 7267 2e67 6574  hile len(arg.get
+00048630: 2827 6172 6773 272c 5b5d 2929 203e 206e  ('args',[])) > n
+00048640: 696e 7073 5f6e 3a0a 2020 2020 2020 2020  inps_n:.        
+00048650: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00048660: 696e 7073 5f6e 203c 206c 656e 2869 6e70  inps_n < len(inp
+00048670: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
+00048680: 2020 2020 2020 2020 2020 2020 6e69 6e70              ninp
+00048690: 732e 6170 7065 6e64 2869 6e70 735b 6e69  s.append(inps[ni
+000486a0: 6e70 735f 6e5d 290a 2020 2020 2020 2020  nps_n]).        
+000486b0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+000486c0: 2073 656c 662e 6175 746f 2069 7320 5472   self.auto is Tr
+000486d0: 7565 2061 6e64 206e 696e 7073 5f6e 203c  ue and ninps_n <
+000486e0: 206c 656e 2869 6e70 7329 2b6c 656e 286f   len(inps)+len(o
+000486f0: 7074 7329 3a0a 2020 2020 2020 2020 2020  pts):.          
+00048700: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00048710: 206f 7074 735f 695b 6e69 6e70 735f 6f5d   opts_i[ninps_o]
+00048720: 5b30 5d20 6e6f 7420 696e 2061 7267 2e67  [0] not in arg.g
+00048730: 6574 2827 6465 6661 756c 7473 272c 7b7d  et('defaults',{}
+00048740: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00048750: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+00048760: 696e 7073 2e61 7070 656e 6428 6f70 7473  inps.append(opts
+00048770: 5f69 5b6e 696e 7073 5f6f 5d5b 315d 290a  _i[ninps_o][1]).
+00048780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048790: 2020 2020 2020 2020 2020 2020 6e69 6e70              ninp
+000487a0: 735f 6f2b 3d31 0a20 2020 2020 2020 2020  s_o+=1.         
+000487b0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000487c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000487d0: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
+000487e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000487f0: 2020 206e 696e 7073 5f6e 2b3d 310a 2020     ninps_n+=1.  
 00048800: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00048810: 206b 2069 6e20 6f70 7473 3a0a 2020 2020   k in opts:.    
-00048820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048830: 2020 2020 6e6f 7074 735b 6b5d 3d6f 7074      nopts[k]=opt
-00048840: 732e 706f 7028 6b29 0a20 2020 2020 2020  s.pop(k).       
-00048850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048860: 206e 6f5f 696e 7073 3d54 7275 650a 2020   no_inps=True.  
-00048870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048880: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00048890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000488a0: 2320 4669 6c6c 2069 6e20 746f 2069 6e70  # Fill in to inp
-000488b0: 7320 666f 7220 6465 6661 756c 7420 7769  s for default wi
-000488c0: 7468 2065 7874 7261 2072 656d 6169 6e65  th extra remaine
-000488d0: 6420 696e 7073 0a20 2020 2020 2020 2020  d inps.         
-000488e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000488f0: 6620 6e6f 7420 6e6f 5f69 6e70 7320 616e  f not no_inps an
-00048900: 6420 6e69 6e70 735f 6e20 3c20 6c65 6e28  d ninps_n < len(
-00048910: 696e 7073 293a 0a20 2020 2020 2020 2020  inps):.         
-00048920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048930: 2020 206e 696e 7073 2e61 7070 656e 6428     ninps.append(
-00048940: 696e 7073 5b6e 696e 7073 5f6e 5d29 0a20  inps[ninps_n]). 
-00048950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048960: 2020 2020 2020 2020 2020 206e 696e 7073             ninps
-00048970: 5f6e 2b3d 310a 2020 2020 2020 2020 2020  _n+=1.          
+00048810: 2061 7267 2e67 6574 2827 7661 7261 7267   arg.get('vararg
+00048820: 7327 293a 0a20 2020 2020 2020 2020 2020  s'):.           
+00048830: 2020 2020 2020 2020 206e 696e 7073 3d6e           ninps=n
+00048840: 696e 7073 2b69 6e70 735b 6e69 6e70 735f  inps+inps[ninps_
+00048850: 6e3a 5d0a 2020 2020 2020 2020 2020 2020  n:].            
+00048860: 2020 2020 2020 2020 6e69 6e70 735f 6e3d          ninps_n=
+00048870: 6c65 6e28 696e 7073 290a 2020 2020 2020  len(inps).      
+00048880: 2020 2020 2020 2020 2020 6e6f 5f69 6e70            no_inp
+00048890: 733d 4661 6c73 650a 2020 2020 2020 2020  s=False.        
+000488a0: 2020 2020 2020 2020 6966 206e 696e 7073          if ninps
+000488b0: 5f6f 203e 2030 203a 206f 7074 733d 6469  _o > 0 : opts=di
+000488c0: 6374 286f 7074 735f 695b 6e69 6e70 735f  ct(opts_i[ninps_
+000488d0: 6f3a 5d29 0a20 2020 2020 2020 2020 2020  o:]).           
+000488e0: 2020 2020 2066 6f72 206b 2069 6e20 6172       for k in ar
+000488f0: 672e 6765 7428 2764 6566 6175 6c74 7327  g.get('defaults'
+00048900: 2c7b 7d29 3a0a 2020 2020 2020 2020 2020  ,{}):.          
+00048910: 2020 2020 2020 2020 2020 6966 206b 2069            if k i
+00048920: 6e20 6f70 7473 3a0a 2020 2020 2020 2020  n opts:.        
+00048930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048940: 6e6f 7074 735b 6b5d 3d6f 7074 732e 706f  nopts[k]=opts.po
+00048950: 7028 6b29 0a20 2020 2020 2020 2020 2020  p(k).           
+00048960: 2020 2020 2020 2020 2020 2020 206e 6f5f               no_
+00048970: 696e 7073 3d54 7275 650a 2020 2020 2020  inps=True.      
 00048980: 2020 2020 2020 2020 2020 2020 2020 656c                el
 00048990: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000489a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000489b0: 6e6f 7074 735b 6b5d 3d61 7267 2e67 6574  nopts[k]=arg.get
-000489c0: 2827 6465 6661 756c 7473 2729 2e67 6574  ('defaults').get
-000489d0: 286b 290a 2020 2020 2020 2020 2020 2020  (k).            
-000489e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000489f0: 6e6f 5f69 6e70 733d 5472 7565 0a20 2020  no_inps=True.   
-00048a00: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00048a10: 6172 672e 6765 7428 276b 6579 776f 7264  arg.get('keyword
-00048a20: 7327 2920 616e 6420 6f70 7473 3a0a 2020  s') and opts:.  
-00048a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048a40: 2020 6e6f 7074 732e 7570 6461 7465 286f    nopts.update(o
-00048a50: 7074 7329 0a20 2020 2020 2020 2020 2020  pts).           
-00048a60: 2020 2020 2069 6620 7365 6c66 2e6c 6f67       if self.log
-00048a70: 5f61 6c6c 3a0a 2020 2020 2020 2020 2020  _all:.          
-00048a80: 2020 2020 2020 2020 2020 7072 696e 7466            printf
-00048a90: 2827 4e65 7720 496e 7075 7473 3a20 7b7d  ('New Inputs: {}
-00048aa0: 207b 7d27 2e66 6f72 6d61 7428 6e69 6e70   {}'.format(ninp
-00048ab0: 732c 6e6f 7074 7329 2c64 6174 653d 5472  s,nopts),date=Tr
-00048ac0: 7565 2c6c 6f67 6669 6c65 3d73 656c 662e  ue,logfile=self.
-00048ad0: 6c6f 6766 696c 652c 6c6f 673d 7365 6c66  logfile,log=self
-00048ae0: 2e6c 6f67 2c64 7370 3d27 6627 2069 6620  .log,dsp='f' if 
-00048af0: 7365 6c66 2e6c 6f67 6669 6c65 2065 6c73  self.logfile els
-00048b00: 6520 2761 2729 0a20 2020 2020 2020 2020  e 'a').         
-00048b10: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-00048b20: 2020 2020 2020 2020 7365 6c66 2e72 633d          self.rc=
-00048b30: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
-00048b40: 2020 2020 2069 6620 7365 6c66 2e61 7574       if self.aut
-00048b50: 6f20 6973 2046 616c 7365 3a0a 2020 2020  o is False:.    
-00048b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048b70: 7365 6c66 2e72 6573 756c 743d 6675 6e63  self.result=func
-00048b80: 282a 696e 7073 2c2a 2a6f 7074 7329 0a20  (*inps,**opts). 
-00048b90: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00048ba0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00048bb0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00048bc0: 6172 6720 616e 6420 7479 7065 2866 756e  arg and type(fun
-00048bd0: 6329 2e5f 5f6e 616d 655f 5f20 3d3d 2027  c).__name__ == '
-00048be0: 6275 696c 7469 6e5f 6675 6e63 7469 6f6e  builtin_function
-00048bf0: 5f6f 725f 6d65 7468 6f64 273a 0a20 2020  _or_method':.   
-00048c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048c10: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-00048c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048c30: 2020 2020 2020 7365 6c66 2e72 6573 756c        self.resul
-00048c40: 743d 6675 6e63 282a 696e 7073 2c2a 2a6f  t=func(*inps,**o
-00048c50: 7074 7329 0a20 2020 2020 2020 2020 2020  pts).           
-00048c60: 2020 2020 2020 2020 2020 2020 2065 7863               exc
-00048c70: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
-00048c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048c90: 2065 3d45 7863 6570 744d 6573 7361 6765   e=ExceptMessage
-00048ca0: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
-00048cb0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00048cc0: 656c 662e 6572 726f 723d 652b 2728 6675  elf.error=e+'(fu
-00048cd0: 6e63 7469 6f6e 206e 616d 653a 207b 7d29  nction name: {})
-00048ce0: 272e 666f 726d 6174 2866 756e 632e 5f5f  '.format(func.__
-00048cf0: 6e61 6d65 5f5f 290a 2020 2020 2020 2020  name__).        
-00048d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048d10: 2020 2020 7365 6c66 2e72 633d 4661 6c73      self.rc=Fals
-00048d20: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00048d30: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00048d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048d50: 2020 2020 7365 6c66 2e72 6573 756c 743d      self.result=
-00048d60: 6675 6e63 282a 6e69 6e70 732c 2a2a 6e6f  func(*ninps,**no
-00048d70: 7074 7329 0a20 2020 2020 2020 2020 2020  pts).           
-00048d80: 2020 2020 2069 6620 7365 6c66 2e6c 6f67       if self.log
-00048d90: 5f61 6c6c 3a0a 2020 2020 2020 2020 2020  _all:.          
-00048da0: 2020 2020 2020 2020 2020 7072 696e 7466            printf
-00048db0: 2827 5243 3a7b 7d5c 6e52 6573 756c 743a  ('RC:{}\nResult:
-00048dc0: 7b7d 272e 666f 726d 6174 2873 656c 662e  {}'.format(self.
-00048dd0: 7263 2c73 656c 662e 7265 7375 6c74 292c  rc,self.result),
-00048de0: 6461 7465 3d54 7275 652c 6c6f 6766 696c  date=True,logfil
-00048df0: 653d 7365 6c66 2e6c 6f67 6669 6c65 2c6c  e=self.logfile,l
-00048e00: 6f67 3d73 656c 662e 6c6f 672c 6473 703d  og=self.log,dsp=
-00048e10: 2766 2720 6966 2073 656c 662e 6c6f 6766  'f' if self.logf
-00048e20: 696c 6520 656c 7365 2027 6127 290a 2020  ile else 'a').  
-00048e30: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00048e40: 7475 726e 2073 656c 660a 2020 2020 2020  turn self.      
-00048e50: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
-00048e60: 2020 2020 2020 2020 2020 2020 2020 653d                e=
-00048e70: 4578 6365 7074 4d65 7373 6167 6528 290a  ExceptMessage().
-00048e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048e90: 6966 2073 656c 662e 6c6f 6766 696c 6520  if self.logfile 
-00048ea0: 6f72 2073 656c 662e 6c6f 673a 0a20 2020  or self.log:.   
-00048eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048ec0: 2070 7269 6e74 6628 652c 6461 7465 3d54   printf(e,date=T
-00048ed0: 7275 652c 6361 6c6c 6572 5f74 7265 653d  rue,caller_tree=
-00048ee0: 5472 7565 2c63 616c 6c65 725f 7061 7265  True,caller_pare
-00048ef0: 6e74 3d27 312d 3527 2c63 616c 6c65 725f  nt='1-5',caller_
-00048f00: 6669 6c65 6e61 6d65 3d54 7275 652c 6361  filename=True,ca
-00048f10: 6c6c 6572 5f6c 696e 655f 6e75 6d62 6572  ller_line_number
-00048f20: 3d54 7275 652c 6c6f 6766 696c 653d 7365  =True,logfile=se
-00048f30: 6c66 2e6c 6f67 6669 6c65 2c6c 6f67 3d73  lf.logfile,log=s
-00048f40: 656c 662e 6c6f 672c 6473 703d 2766 2729  elf.log,dsp='f')
-00048f50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00048f60: 2069 6620 7365 6c66 2e65 7272 5f73 6372   if self.err_scr
-00048f70: 6565 6e3a 0a20 2020 2020 2020 2020 2020  een:.           
-00048f80: 2020 2020 2020 2020 2070 7269 6e74 6628           printf(
-00048f90: 652c 6d6f 6465 3d27 6527 290a 2020 2020  e,mode='e').    
-00048fa0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00048fb0: 656c 662e 6572 725f 6578 6974 3a0a 2020  elf.err_exit:.  
-00048fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048fd0: 2020 6f73 2e5f 6578 6974 2831 290a 2020    os._exit(1).  
-00048fe0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00048ff0: 6c66 2e72 633d 4661 6c73 650a 2020 2020  lf.rc=False.    
-00049000: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00049010: 2e65 7272 6f72 3d65 0a20 2020 2020 2020  .error=e.       
-00049020: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00049030: 7365 6c66 0a20 2020 2020 2020 2065 6c69  self.        eli
-00049040: 6620 6973 696e 7374 616e 6365 2866 756e  f isinstance(fun
-00049050: 632c 7374 7229 3a0a 2020 2020 2020 2020  c,str):.        
-00049060: 2020 2020 7365 6c66 2e72 632c 7365 6c66      self.rc,self
-00049070: 2e72 6573 756c 742c 7365 6c66 2e65 7272  .result,self.err
-00049080: 6f72 3d54 7279 436f 6465 2866 756e 632c  or=TryCode(func,
-00049090: 6465 6661 756c 743d 4661 6c73 652c 5f72  default=False,_r
-000490a0: 6574 7572 6e5f 3d54 7275 6529 0a20 2020  eturn_=True).   
-000490b0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000490c0: 7365 6c66 0a20 2020 2020 2020 2073 656c  self.        sel
-000490d0: 662e 7263 3d46 616c 7365 0a20 2020 2020  f.rc=False.     
-000490e0: 2020 2073 656c 662e 6572 726f 723d 274e     self.error='N
-000490f0: 6f74 205b 7375 7070 6f72 745d 2066 756e  ot [support] fun
-00049100: 6374 696f 6e27 0a20 2020 2020 2020 2069  ction'.        i
-00049110: 6620 7365 6c66 2e6c 6f67 5f61 6c6c 3a0a  f self.log_all:.
-00049120: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00049130: 7466 2827 5243 3a7b 7d5c 6e52 6573 756c  tf('RC:{}\nResul
-00049140: 743a 7b7d 5c6e 4572 726f 723a 7b7d 272e  t:{}\nError:{}'.
-00049150: 666f 726d 6174 2873 656c 662e 7263 2c73  format(self.rc,s
-00049160: 656c 662e 7265 7375 6c74 2c73 656c 662e  elf.result,self.
-00049170: 6572 726f 7229 2c64 6174 653d 5472 7565  error),date=True
-00049180: 2c6c 6f67 6669 6c65 3d73 656c 662e 6c6f  ,logfile=self.lo
-00049190: 6766 696c 652c 6c6f 673d 7365 6c66 2e6c  gfile,log=self.l
-000491a0: 6f67 2c64 7370 3d27 6627 2069 6620 7365  og,dsp='f' if se
-000491b0: 6c66 2e6c 6f67 6669 6c65 2065 6c73 6520  lf.logfile else 
-000491c0: 2761 2729 0a20 2020 2020 2020 2072 6574  'a').        ret
-000491d0: 7572 6e20 7365 6c66 0a0a 2020 2020 6465  urn self..    de
-000491e0: 6620 5265 7375 6c74 2873 656c 6629 3a0a  f Result(self):.
-000491f0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00049200: 656c 662e 7265 7375 6c74 0a0a 2020 2020  elf.result..    
-00049210: 6465 6620 5263 2873 656c 6629 3a0a 2020  def Rc(self):.  
-00049220: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00049230: 662e 7263 0a0a 2020 2020 6465 6620 4572  f.rc..    def Er
-00049240: 726f 7228 7365 6c66 293a 0a20 2020 2020  ror(self):.     
-00049250: 2020 2072 6574 7572 6e20 7365 6c66 2e65     return self.e
-00049260: 7272 6f72 0a0a 636c 6173 7320 5245 5455  rror..class RETU
-00049270: 524e 3a0a 2020 2020 2727 2754 656d 706f  RN:.    '''Tempo
-00049280: 7261 7279 2074 7279 2074 6f20 5245 5455  rary try to RETU
-00049290: 524e 2076 616c 7565 2064 6566 696e 6527  RN value define'
-000492a0: 2727 0a20 2020 2064 6566 205f 5f69 6e69  ''.    def __ini
-000492b0: 745f 5f28 7365 6c66 2c2a 6461 7461 2c2a  t__(self,*data,*
-000492c0: 2a6f 7074 7329 3a0a 2020 2020 2020 2020  *opts):.        
-000492d0: 7365 6c66 2e72 633d 6f70 7473 2e67 6574  self.rc=opts.get
-000492e0: 2827 7263 272c 6f70 7473 2e67 6574 2827  ('rc',opts.get('
-000492f0: 5243 272c 4e6f 6e65 2929 0a20 2020 2020  RC',None)).     
-00049300: 2020 2069 6620 6c65 6e28 6461 7461 2920     if len(data) 
-00049310: 3d3d 2031 3a0a 2020 2020 2020 2020 2020  == 1:.          
-00049320: 2020 7365 6c66 2e64 6174 613d 6461 7461    self.data=data
-00049330: 5b30 5d0a 2020 2020 2020 2020 656c 7365  [0].        else
-00049340: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-00049350: 6c66 2e64 6174 613d 6461 7461 0a20 2020  lf.data=data.   
-00049360: 2020 2020 2073 656c 662e 696e 666f 3d7b       self.info={
-00049370: 7d0a 2020 2020 2020 2020 6966 206f 7074  }.        if opt
-00049380: 732e 6765 7428 2769 6e66 6f27 2c54 7275  s.get('info',Tru
-00049390: 6529 2069 7320 5472 7565 3a0a 2020 2020  e) is True:.    
-000493a0: 2020 2020 2020 2020 7365 6c66 2e69 6e66          self.inf
-000493b0: 6f5b 2774 696d 6527 5d3d 5449 4d45 2829  o['time']=TIME()
-000493c0: 2e49 6e74 2829 0a20 2020 2020 2020 2020  .Int().         
-000493d0: 2020 2069 6620 6f70 7473 2e67 6574 2827     if opts.get('
-000493e0: 6675 6e63 7469 6f6e 272c 5472 7565 2920  function',True) 
-000493f0: 6973 2054 7275 653a 0a20 2020 2020 2020  is True:.       
-00049400: 2020 2020 2020 2020 2073 656c 662e 696e           self.in
-00049410: 666f 5b27 6675 6e63 7469 6f6e 275d 3d46  fo['function']=F
-00049420: 756e 6374 696f 6e4e 616d 6528 2a2a 7b27  unctionName(**{'
-00049430: 7061 7265 6e74 273a 312c 2761 7267 7327  parent':1,'args'
-00049440: 3a54 7275 652c 276c 696e 655f 6e75 6d62  :True,'line_numb
-00049450: 6572 273a 5472 7565 2c27 6669 6c65 6e61  er':True,'filena
-00049460: 6d65 273a 5472 7565 7d29 0a20 2020 2020  me':True}).     
-00049470: 2020 2020 2020 2069 6620 6f70 7473 2e67         if opts.g
-00049480: 6574 2827 7061 7265 6e74 2729 2069 7320  et('parent') is 
-00049490: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
-000494a0: 2020 2020 2020 7365 6c66 2e69 6e66 6f5b        self.info[
-000494b0: 2770 6172 656e 7427 5d3d 4675 6e63 7469  'parent']=Functi
-000494c0: 6f6e 4e61 6d65 282a 2a7b 2770 6172 656e  onName(**{'paren
-000494d0: 7427 3a32 2c27 6c69 6e65 5f6e 756d 6265  t':2,'line_numbe
-000494e0: 7227 3a54 7275 652c 2766 696c 656e 616d  r':True,'filenam
-000494f0: 6527 3a54 7275 657d 290a 2020 2020 2020  e':True}).      
-00049500: 2020 2020 2020 6966 2027 6d73 6727 2069        if 'msg' i
-00049510: 6e20 6f70 7473 3a20 7365 6c66 2e69 6e66  n opts: self.inf
-00049520: 6f5b 276d 7367 275d 3d6f 7074 732e 6765  o['msg']=opts.ge
-00049530: 7428 276d 7367 2729 0a20 2020 2020 2020  t('msg').       
-00049540: 2020 2020 2069 6620 276e 6574 776f 726b       if 'network
-00049550: 2720 696e 206f 7074 733a 2073 656c 662e  ' in opts: self.
-00049560: 696e 666f 5b27 6e65 7477 6f72 6b27 5d3d  info['network']=
-00049570: 6f70 7473 2e67 6574 2827 6e65 7477 6f72  opts.get('networ
-00049580: 6b27 290a 0a20 2020 2064 6566 2047 6574  k')..    def Get
-00049590: 2873 656c 662c 2a6f 2c2a 2a6f 7074 7329  (self,*o,**opts)
-000495a0: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
-000495b0: 206f 3a20 6f70 7473 5b27 6465 6661 756c   o: opts['defaul
-000495c0: 7427 5d3d 276f 7267 270a 2020 2020 2020  t']='org'.      
-000495d0: 2020 7265 7475 726e 2047 6574 2873 656c    return Get(sel
-000495e0: 662e 6461 7461 2c2a 6f2c 2a2a 6f70 7473  f.data,*o,**opts
-000495f0: 290a 0a63 6c61 7373 206b 5468 7265 6164  )..class kThread
-00049600: 2854 6872 6561 6429 3a0a 2020 2020 2727  (Thread):.    ''
-00049610: 270a 2020 2020 7420 3d20 6b54 6872 6561  '.    t = kThrea
-00049620: 6428 7461 7267 6574 3d66 6f6f 2c20 6172  d(target=foo, ar
-00049630: 6773 3d28 2777 6f72 6c64 2127 2c29 2920  gs=('world!',)) 
-00049640: 2320 6465 6669 6e65 0a20 2020 2074 2e73  # define.    t.s
-00049650: 7461 7274 2829 2023 2073 7461 7274 0a20  tart() # start. 
-00049660: 2020 2070 7269 6e74 2874 2e67 6574 2829     print(t.get()
-00049670: 2920 2023 2067 6574 2072 6573 756c 740a  )  # get result.
-00049680: 2020 2020 2727 270a 2020 2020 6465 6620      '''.    def 
-00049690: 5f5f 696e 6974 5f5f 2873 656c 662c 2067  __init__(self, g
-000496a0: 726f 7570 3d4e 6f6e 652c 2074 6172 6765  roup=None, targe
-000496b0: 743d 4e6f 6e65 2c20 6e61 6d65 3d4e 6f6e  t=None, name=Non
-000496c0: 652c 0a20 2020 2020 2020 2020 2020 2061  e,.            a
-000496d0: 7267 733d 2829 2c20 6b77 6172 6773 3d7b  rgs=(), kwargs={
-000496e0: 7d2c 2056 6572 626f 7365 3d4e 6f6e 652c  }, Verbose=None,
-000496f0: 2064 6566 6175 6c74 3d4e 6f6e 6529 3a0a   default=None):.
-00049700: 2020 2020 2020 2020 6966 2050 7956 6572          if PyVer
-00049710: 2833 293a 0a20 2020 2020 2020 2020 2020  (3):.           
-00049720: 2054 6872 6561 642e 5f5f 696e 6974 5f5f   Thread.__init__
-00049730: 2873 656c 662c 2067 726f 7570 2c20 7461  (self, group, ta
-00049740: 7267 6574 2c20 6e61 6d65 2c20 6172 6773  rget, name, args
-00049750: 2c20 6b77 6172 6773 290a 2020 2020 2020  , kwargs).      
-00049760: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00049770: 2020 2020 5468 7265 6164 2e5f 5f69 6e69      Thread.__ini
-00049780: 745f 5f28 7365 6c66 2c20 6772 6f75 702c  t__(self, group,
-00049790: 2074 6172 6765 742c 206e 616d 652c 2061   target, name, a
-000497a0: 7267 732c 206b 7761 7267 732c 2056 6572  rgs, kwargs, Ver
-000497b0: 626f 7365 290a 2020 2020 2020 2020 7365  bose).        se
-000497c0: 6c66 2e5f 7265 7475 726e 203d 2064 6566  lf._return = def
-000497d0: 6175 6c74 0a0a 2020 2020 6465 6620 7275  ault..    def ru
-000497e0: 6e28 7365 6c66 293a 0a20 2020 2020 2020  n(self):.       
-000497f0: 2069 6620 5079 5665 7228 3329 3a0a 2020   if PyVer(3):.  
-00049800: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-00049810: 662e 5f74 6172 6765 7420 6973 206e 6f74  f._target is not
-00049820: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00049830: 2020 2020 2020 2073 656c 662e 5f72 6574         self._ret
-00049840: 7572 6e20 3d20 7365 6c66 2e5f 7461 7267  urn = self._targ
-00049850: 6574 282a 7365 6c66 2e5f 6172 6773 2c2a  et(*self._args,*
-00049860: 2a73 656c 662e 5f6b 7761 7267 7329 0a20  *self._kwargs). 
-00049870: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00049880: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-00049890: 2e5f 5468 7265 6164 5f5f 7461 7267 6574  ._Thread__target
-000498a0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-000498b0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-000498c0: 6c66 2e5f 7265 7475 726e 203d 2073 656c  lf._return = sel
-000498d0: 662e 5f54 6872 6561 645f 5f74 6172 6765  f._Thread__targe
-000498e0: 7428 2a73 656c 662e 5f54 6872 6561 645f  t(*self._Thread_
-000498f0: 5f61 7267 732c 0a20 2020 2020 2020 2020  _args,.         
-00049900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049920: 2020 2020 2020 202a 2a73 656c 662e 5f54         **self._T
-00049930: 6872 6561 645f 5f6b 7761 7267 7329 0a20  hread__kwargs). 
-00049940: 2020 2064 6566 2067 6574 2873 656c 6629     def get(self)
-00049950: 3a0a 2020 2020 2020 2020 6966 2073 656c  :.        if sel
-00049960: 662e 5f74 7374 6174 655f 6c6f 636b 3a0a  f._tstate_lock:.
-00049970: 2020 2020 2020 2020 2020 2020 5468 7265              Thre
-00049980: 6164 2e6a 6f69 6e28 7365 6c66 290a 2020  ad.join(self).  
-00049990: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000499a0: 2073 656c 662e 5f72 6574 7572 6e0a 2020   self._return.  
-000499b0: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
-000499c0: 650a 0a20 2020 2064 6566 2073 746f 7028  e..    def stop(
-000499d0: 7365 6c66 2c72 6574 7279 5f6e 756d 3d31  self,retry_num=1
-000499e0: 3029 3a0a 2020 2020 2020 2020 6465 6620  0):.        def 
-000499f0: 5f61 7379 6e63 5f72 6169 7365 2874 685f  _async_raise(th_
-00049a00: 6964 2c65 7865 5f74 7970 6529 3a0a 2020  id,exe_type):.  
-00049a10: 2020 2020 2020 2020 2020 7468 5f69 643d            th_id=
-00049a20: 6374 7970 6573 2e63 5f6c 6f6e 6728 7468  ctypes.c_long(th
-00049a30: 5f69 6429 0a20 2020 2020 2020 2020 2020  _id).           
-00049a40: 2069 6620 6e6f 7420 696e 7370 6563 742e   if not inspect.
-00049a50: 6973 636c 6173 7328 6578 655f 7479 7065  isclass(exe_type
-00049a60: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00049a70: 2020 2065 7865 5f74 7970 653d 7479 7065     exe_type=type
-00049a80: 2865 7865 5f74 7970 6529 0a20 2020 2020  (exe_type).     
-00049a90: 2020 2020 2020 2072 6573 203d 2063 7479         res = cty
-00049aa0: 7065 732e 7079 7468 6f6e 6170 692e 5079  pes.pythonapi.Py
-00049ab0: 5468 7265 6164 5374 6174 655f 5365 7441  ThreadState_SetA
-00049ac0: 7379 6e63 4578 6328 7468 5f69 642c 2063  syncExc(th_id, c
-00049ad0: 7479 7065 732e 7079 5f6f 626a 6563 7428  types.py_object(
-00049ae0: 6578 655f 7479 7065 2929 0a20 2020 2020  exe_type)).     
-00049af0: 2020 2020 2020 2069 6620 7265 7320 3d3d         if res ==
-00049b00: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-00049b10: 2020 2020 2370 7269 6e74 2822 496e 7661      #print("Inva
-00049b20: 6c69 6420 7468 7265 6164 2069 6428 7b7d  lid thread id({}
-00049b30: 2922 2e66 6f72 6d61 7428 7468 5f69 6429  )".format(th_id)
-00049b40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00049b50: 2020 7265 7475 726e 202d 310a 2020 2020    return -1.    
-00049b60: 2020 2020 2020 2020 656c 6966 2072 6573          elif res
-00049b70: 2021 3d20 313a 0a20 2020 2020 2020 2020   != 1:.         
-00049b80: 2020 2020 2020 2063 7479 7065 732e 7079         ctypes.py
-00049b90: 7468 6f6e 6170 692e 5079 5468 7265 6164  thonapi.PyThread
-00049ba0: 5374 6174 655f 5365 7441 7379 6e63 4578  State_SetAsyncEx
-00049bb0: 6328 7468 5f69 642c 204e 6f6e 6529 0a20  c(th_id, None). 
-00049bc0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00049bd0: 6169 7365 2053 7973 7465 6d45 7272 6f72  aise SystemError
-00049be0: 2822 5468 7265 6164 5374 6f70 2066 6169  ("ThreadStop fai
-00049bf0: 6c65 6422 290a 2020 2020 2020 2020 2020  led").          
-00049c00: 2020 2320 7374 6f70 7065 6420 7468 7265    # stopped thre
-00049c10: 6164 0a20 2020 2020 2020 2020 2020 2072  ad.            r
-00049c20: 6574 7572 6e20 300a 2020 2020 2020 2020  eturn 0.        
-00049c30: 666f 7220 6920 696e 2072 616e 6765 2872  for i in range(r
-00049c40: 6574 7279 5f6e 756d 293a 0a20 2020 2020  etry_num):.     
-00049c50: 2020 2020 2020 2065 7869 745f 6964 3d5f         exit_id=_
-00049c60: 6173 796e 635f 7261 6973 6528 7365 6c66  async_raise(self
-00049c70: 2e69 6465 6e74 2c20 5379 7374 656d 4578  .ident, SystemEx
-00049c80: 6974 290a 2020 2020 2020 2020 2020 2020  it).            
-00049c90: 6966 2065 7869 745f 6964 203d 3d20 303a  if exit_id == 0:
-00049ca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00049cb0: 2073 656c 662e 5f69 735f 7374 6f70 7065   self._is_stoppe
-00049cc0: 643d 5472 7565 0a20 2020 2020 2020 2020  d=True.         
-00049cd0: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
-00049ce0: 7565 2023 2073 746f 7070 6564 0a20 2020  ue # stopped.   
-00049cf0: 2020 2020 2020 2020 2065 6c69 6620 6578           elif ex
-00049d00: 6974 5f69 6420 3d3d 202d 313a 2023 4e6f  it_id == -1: #No
-00049d10: 2074 6872 6561 640a 2020 2020 2020 2020   thread.        
-00049d20: 2020 2020 2020 2020 7365 6c66 2e5f 6973          self._is
-00049d30: 5f73 746f 7070 6564 3d54 7275 650a 2020  _stopped=True.  
-00049d40: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00049d50: 7475 726e 204e 6f6e 650a 2020 2020 2020  turn None.      
-00049d60: 2020 7265 7475 726e 2046 616c 7365 2023    return False #
-00049d70: 2073 746f 7020 4661 696c 0a0a 2020 2020   stop Fail..    
-00049d80: 6465 6620 6973 416c 6976 6528 7365 6c66  def isAlive(self
-00049d90: 293a 0a20 2020 2020 2020 2023 6966 206e  ):.        #if n
-00049da0: 6f74 2073 656c 662e 5f74 7374 6174 655f  ot self._tstate_
-00049db0: 6c6f 636b 2061 6e64 206e 6f74 2073 656c  lock and not sel
-00049dc0: 662e 5f69 735f 7374 6f70 7065 643a 2072  f._is_stopped: r
-00049dd0: 6574 7572 6e20 4e6f 6e65 2023 204e 6f74  eturn None # Not
-00049de0: 2073 7461 7274 6564 0a20 2020 2020 2020   started.       
-00049df0: 2069 6620 6e6f 7420 7365 6c66 2e5f 7473   if not self._ts
-00049e00: 7461 7465 5f6c 6f63 6b20 616e 6420 6e6f  tate_lock and no
-00049e10: 7420 7365 6c66 2e5f 6964 656e 743a 2072  t self._ident: r
-00049e20: 6574 7572 6e20 4e6f 6e65 2023 204e 6f74  eturn None # Not
-00049e30: 2073 7461 7274 6564 0a20 2020 2020 2020   started.       
-00049e40: 2069 6620 6e6f 7420 7365 6c66 2e5f 7473   if not self._ts
-00049e50: 7461 7465 5f6c 6f63 6b20 6f72 2073 656c  tate_lock or sel
-00049e60: 662e 5f69 735f 7374 6f70 7065 643a 2072  f._is_stopped: r
-00049e70: 6574 7572 6e20 4661 6c73 6520 2353 746f  eturn False #Sto
-00049e80: 7070 6564 0a20 2020 2020 2020 2072 6574  pped.        ret
-00049e90: 7572 6e20 5472 7565 2023 5275 6e6e 696e  urn True #Runnin
-00049ea0: 670a 0a20 2020 2064 6566 204e 616d 6528  g..    def Name(
-00049eb0: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
-00049ec0: 6574 7572 6e20 7365 6c66 2e5f 6e61 6d65  eturn self._name
-00049ed0: 0a20 2020 2064 6566 2041 7267 7328 7365  .    def Args(se
-00049ee0: 6c66 293a 0a20 2020 2020 2020 2072 6574  lf):.        ret
-00049ef0: 7572 6e20 7365 6c66 2e5f 6172 6773 2c73  urn self._args,s
-00049f00: 656c 662e 5f6b 7761 7267 730a 2020 2020  elf._kwargs.    
-00049f10: 6465 6620 4964 2873 656c 6629 3a0a 2020  def Id(self):.  
-00049f20: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00049f30: 6e63 6528 7365 6c66 2e69 6465 6e74 2c69  nce(self.ident,i
-00049f40: 6e74 293a 0a20 2020 2020 2020 2020 2020  nt):.           
-00049f50: 2072 6574 7572 6e20 7365 6c66 2e69 6465   return self.ide
-00049f60: 6e74 0a20 2020 2020 2020 2072 6574 7572  nt.        retur
-00049f70: 6e20 4e6f 6e65 2023 206e 6f74 2073 7461  n None # not sta
-00049f80: 7274 6564 0a20 2020 2064 6566 2050 5049  rted.    def PPI
-00049f90: 4428 7365 6c66 293a 0a20 2020 2020 2020  D(self):.       
-00049fa0: 2072 6574 7572 6e20 6f73 2e67 6574 7069   return os.getpi
-00049fb0: 6428 290a 0a64 6566 2050 726f 6772 6573  d()..def Progres
-00049fc0: 7328 7379 6d62 6f6c 3d27 2e27 2c2a 2a6f  s(symbol='.',**o
-00049fd0: 7074 7329 3a0a 2020 2020 7374 6172 745f  pts):.    start_
-00049fe0: 6e65 776c 696e 653d 6f70 7473 2e67 6574  newline=opts.get
-00049ff0: 2827 7374 6172 745f 6e65 776c 696e 6527  ('start_newline'
-0004a000: 2c46 616c 7365 290a 2020 2020 656e 645f  ,False).    end_
-0004a010: 6e65 776c 696e 653d 6f70 7473 2e67 6574  newline=opts.get
-0004a020: 2827 656e 645f 6e65 776c 696e 6527 2c6f  ('end_newline',o
-0004a030: 7074 732e 6765 7428 276e 6577 6c69 6e65  pts.get('newline
-0004a040: 272c 5472 7565 2929 0a20 2020 206c 6f67  ',True)).    log
-0004a050: 3d6f 7074 732e 6765 7428 276c 6f67 272c  =opts.get('log',
-0004a060: 4e6f 6e65 290a 2020 2020 696e 7465 7276  None).    interv
-0004a070: 616c 3d49 6e74 286f 7074 732e 6765 7428  al=Int(opts.get(
-0004a080: 2769 6e74 6572 7661 6c27 292c 3529 0a20  'interval'),5). 
-0004a090: 2020 2074 696d 656f 7574 3d49 6e74 286f     timeout=Int(o
-0004a0a0: 7074 732e 6765 7428 2774 696d 656f 7574  pts.get('timeout
-0004a0b0: 2729 2c33 3630 302a 3130 3029 0a20 2020  '),3600*100).   
-0004a0c0: 206d 6f64 653d 6f70 7473 2e67 6574 2827   mode=opts.get('
-0004a0d0: 6d6f 6465 272c 2773 2729 0a20 2020 2073  mode','s').    s
-0004a0e0: 746f 703d 6f70 7473 5b27 7374 6f70 275d  top=opts['stop']
-0004a0f0: 2069 6620 2773 746f 7027 2069 6e20 6f70   if 'stop' in op
-0004a100: 7473 2065 6c73 6520 4661 6c73 650a 2020  ts else False.  
-0004a110: 2020 6465 6c61 793d 6f70 7473 5b27 6465    delay=opts['de
-0004a120: 6c61 7927 5d20 6966 2027 6465 6c61 7927  lay'] if 'delay'
-0004a130: 2069 6e20 6f70 7473 2065 6c73 6520 4661   in opts else Fa
-0004a140: 6c73 650a 2020 2020 6c6f 6361 6c5f 7072  lse.    local_pr
-0004a150: 696e 7465 643d 4661 6c73 650a 2020 2020  inted=False.    
-0004a160: 6966 2073 7461 7274 5f6e 6577 6c69 6e65  if start_newline
-0004a170: 3a0a 2020 2020 2020 2020 7072 696e 7466  :.        printf
-0004a180: 2827 272c 6967 6e6f 7265 5f65 6d70 7479  ('',ignore_empty
-0004a190: 3d46 616c 7365 2c63 616c 6c65 725f 7061  =False,caller_pa
-0004a1a0: 7265 6e74 3d31 2c73 7461 7274 5f6e 6577  rent=1,start_new
-0004a1b0: 6c69 6e65 3d27 6175 746f 272c 6c6f 673d  line='auto',log=
-0004a1c0: 6c6f 672c 656e 643d 2727 2c6d 6f64 653d  log,end='',mode=
-0004a1d0: 6d6f 6465 290a 2020 2020 5469 6d65 3d54  mode).    Time=T
-0004a1e0: 494d 4528 290a 2020 2020 7768 696c 6520  IME().    while 
-0004a1f0: 5472 7565 3a0a 2020 2020 2020 2020 6966  True:.        if
-0004a200: 2049 7354 7275 6528 7374 6f70 2920 6f72   IsTrue(stop) or
-0004a210: 2028 7469 6d65 6f75 7420 3e20 3020 616e   (timeout > 0 an
-0004a220: 6420 5469 6d65 2e4f 7574 2874 696d 656f  d Time.Out(timeo
-0004a230: 7574 2929 3a20 6272 6561 6b0a 2020 2020  ut)): break.    
-0004a240: 2020 2020 6966 2064 656c 6179 3a0a 2020      if delay:.  
-0004a250: 2020 2020 2020 2020 2020 6966 2028 6973            if (is
-0004a260: 696e 7374 616e 6365 2864 656c 6179 2c69  instance(delay,i
-0004a270: 6e74 2920 616e 6420 6e6f 7420 2054 696d  nt) and not  Tim
-0004a280: 652e 4f75 7428 6465 6c61 7929 2920 6f72  e.Out(delay)) or
-0004a290: 206e 6f74 2049 7354 7275 6528 6465 6c61   not IsTrue(dela
-0004a2a0: 7929 3a20 236c 6573 7320 6465 6c61 7920  y): #less delay 
-0004a2b0: 7469 6d65 2074 6865 6e20 736b 6970 2070  time then skip p
-0004a2c0: 726f 6772 6573 7320 6c6f 670a 2020 2020  rogress log.    
-0004a2d0: 2020 2020 2020 2020 2020 2020 7469 6d65              time
-0004a2e0: 2e73 6c65 6570 2830 2e33 290a 2020 2020  .sleep(0.3).    
-0004a2f0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-0004a300: 696e 7565 0a20 2020 2020 2020 2070 7269  inue.        pri
-0004a310: 6e74 6628 7379 6d62 6f6c 2c64 6972 6563  ntf(symbol,direc
-0004a320: 743d 5472 7565 2c6c 6f67 3d6c 6f67 2c6c  t=True,log=log,l
-0004a330: 6f67 5f6c 6576 656c 3d31 2c6d 6f64 653d  og_level=1,mode=
-0004a340: 6d6f 6465 290a 2020 2020 2020 2020 6c6f  mode).        lo
-0004a350: 6361 6c5f 7072 696e 7465 643d 5472 7565  cal_printed=True
-0004a360: 0a20 2020 2020 2020 2074 696d 652e 736c  .        time.sl
-0004a370: 6565 7028 696e 7465 7276 616c 290a 2020  eep(interval).  
-0004a380: 2020 6966 2065 6e64 5f6e 6577 6c69 6e65    if end_newline
-0004a390: 2061 6e64 206c 6f63 616c 5f70 7269 6e74   and local_print
-0004a3a0: 6564 3a0a 2020 2020 2020 2020 7072 696e  ed:.        prin
-0004a3b0: 7466 2827 272c 6967 6e6f 7265 5f65 6d70  tf('',ignore_emp
-0004a3c0: 7479 3d46 616c 7365 2c63 616c 6c65 725f  ty=False,caller_
-0004a3d0: 7061 7265 6e74 3d31 2c6e 6f5f 696e 7472  parent=1,no_intr
-0004a3e0: 6f3d 5472 7565 2c6c 6f67 3d6c 6f67 2c6d  o=True,log=log,m
-0004a3f0: 6f64 653d 6d6f 6465 290a 0a0a 2369 6620  ode=mode)...#if 
-0004a400: 5f5f 6e61 6d65 5f5f 203d 3d20 225f 5f6d  __name__ == "__m
-0004a410: 6169 6e5f 5f22 3a0a 2320 2020 2023 2049  ain__":.#    # I
-0004a420: 6e74 6567 6572 0a23 2020 2020 7072 696e  nteger.#    prin
-0004a430: 7428 2247 6574 2831 3233 3435 293a 222c  t("Get(12345):",
-0004a440: 4765 7428 3132 3334 3529 290a 2320 2020  Get(12345)).#   
-0004a450: 2070 7269 6e74 2822 4765 7428 3132 3334   print("Get(1234
-0004a460: 352c 3129 3a22 2c47 6574 2831 3233 3435  5,1):",Get(12345
-0004a470: 2c31 2929 0a                             ,1)).
+000489a0: 2020 2020 2020 2020 2020 2020 2320 4669              # Fi
+000489b0: 6c6c 2069 6e20 746f 2069 6e70 7320 666f  ll in to inps fo
+000489c0: 7220 6465 6661 756c 7420 7769 7468 2065  r default with e
+000489d0: 7874 7261 2072 656d 6169 6e65 6420 696e  xtra remained in
+000489e0: 7073 0a20 2020 2020 2020 2020 2020 2020  ps.             
+000489f0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00048a00: 7420 6e6f 5f69 6e70 7320 616e 6420 6e69  t no_inps and ni
+00048a10: 6e70 735f 6e20 3c20 6c65 6e28 696e 7073  nps_n < len(inps
+00048a20: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00048a30: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+00048a40: 696e 7073 2e61 7070 656e 6428 696e 7073  inps.append(inps
+00048a50: 5b6e 696e 7073 5f6e 5d29 0a20 2020 2020  [ninps_n]).     
+00048a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048a70: 2020 2020 2020 206e 696e 7073 5f6e 2b3d         ninps_n+=
+00048a80: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
+00048a90: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00048aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048ab0: 2020 2020 2020 2020 2020 2020 6e6f 7074              nopt
+00048ac0: 735b 6b5d 3d61 7267 2e67 6574 2827 6465  s[k]=arg.get('de
+00048ad0: 6661 756c 7473 2729 2e67 6574 286b 290a  faults').get(k).
+00048ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048af0: 2020 2020 2020 2020 2020 2020 6e6f 5f69              no_i
+00048b00: 6e70 733d 5472 7565 0a20 2020 2020 2020  nps=True.       
+00048b10: 2020 2020 2020 2020 2069 6620 6172 672e           if arg.
+00048b20: 6765 7428 276b 6579 776f 7264 7327 2920  get('keywords') 
+00048b30: 616e 6420 6f70 7473 3a0a 2020 2020 2020  and opts:.      
+00048b40: 2020 2020 2020 2020 2020 2020 2020 6e6f                no
+00048b50: 7074 732e 7570 6461 7465 286f 7074 7329  pts.update(opts)
+00048b60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00048b70: 2069 6620 7365 6c66 2e6c 6f67 5f61 6c6c   if self.log_all
+00048b80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00048b90: 2020 2020 2020 7072 696e 7466 2827 4e65        printf('Ne
+00048ba0: 7720 496e 7075 7473 3a20 7b7d 207b 7d27  w Inputs: {} {}'
+00048bb0: 2e66 6f72 6d61 7428 6e69 6e70 732c 6e6f  .format(ninps,no
+00048bc0: 7074 7329 2c64 6174 653d 5472 7565 2c6c  pts),date=True,l
+00048bd0: 6f67 6669 6c65 3d73 656c 662e 6c6f 6766  ogfile=self.logf
+00048be0: 696c 652c 6c6f 673d 7365 6c66 2e6c 6f67  ile,log=self.log
+00048bf0: 2c64 7370 3d27 6627 2069 6620 7365 6c66  ,dsp='f' if self
+00048c00: 2e6c 6f67 6669 6c65 2065 6c73 6520 2761  .logfile else 'a
+00048c10: 2729 0a20 2020 2020 2020 2020 2020 2074  ').            t
+00048c20: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00048c30: 2020 2020 7365 6c66 2e72 633d 5472 7565      self.rc=True
+00048c40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00048c50: 2069 6620 7365 6c66 2e61 7574 6f20 6973   if self.auto is
+00048c60: 2046 616c 7365 3a0a 2020 2020 2020 2020   False:.        
+00048c70: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00048c80: 2e72 6573 756c 743d 6675 6e63 282a 696e  .result=func(*in
+00048c90: 7073 2c2a 2a6f 7074 7329 0a20 2020 2020  ps,**opts).     
+00048ca0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00048cb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00048cc0: 2020 2020 2069 6620 6e6f 7420 6172 6720       if not arg 
+00048cd0: 616e 6420 7479 7065 2866 756e 6329 2e5f  and type(func)._
+00048ce0: 5f6e 616d 655f 5f20 3d3d 2027 6275 696c  _name__ == 'buil
+00048cf0: 7469 6e5f 6675 6e63 7469 6f6e 5f6f 725f  tin_function_or_
+00048d00: 6d65 7468 6f64 273a 0a20 2020 2020 2020  method':.       
+00048d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048d20: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+00048d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048d40: 2020 7365 6c66 2e72 6573 756c 743d 6675    self.result=fu
+00048d50: 6e63 282a 696e 7073 2c2a 2a6f 7074 7329  nc(*inps,**opts)
+00048d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00048d70: 2020 2020 2020 2020 2065 7863 6570 743a           except:
+00048d80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00048d90: 2020 2020 2020 2020 2020 2020 2065 3d45               e=E
+00048da0: 7863 6570 744d 6573 7361 6765 2829 0a20  xceptMessage(). 
+00048db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048dc0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00048dd0: 6572 726f 723d 652b 2728 6675 6e63 7469  error=e+'(functi
+00048de0: 6f6e 206e 616d 653a 207b 7d29 272e 666f  on name: {})'.fo
+00048df0: 726d 6174 2866 756e 632e 5f5f 6e61 6d65  rmat(func.__name
+00048e00: 5f5f 290a 2020 2020 2020 2020 2020 2020  __).            
+00048e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048e20: 7365 6c66 2e72 633d 4661 6c73 650a 2020  self.rc=False.  
+00048e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048e40: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00048e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048e60: 7365 6c66 2e72 6573 756c 743d 6675 6e63  self.result=func
+00048e70: 282a 6e69 6e70 732c 2a2a 6e6f 7074 7329  (*ninps,**nopts)
+00048e80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00048e90: 2069 6620 7365 6c66 2e6c 6f67 5f61 6c6c   if self.log_all
+00048ea0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00048eb0: 2020 2020 2020 7072 696e 7466 2827 5243        printf('RC
+00048ec0: 3a7b 7d5c 6e52 6573 756c 743a 7b7d 272e  :{}\nResult:{}'.
+00048ed0: 666f 726d 6174 2873 656c 662e 7263 2c73  format(self.rc,s
+00048ee0: 656c 662e 7265 7375 6c74 292c 6461 7465  elf.result),date
+00048ef0: 3d54 7275 652c 6c6f 6766 696c 653d 7365  =True,logfile=se
+00048f00: 6c66 2e6c 6f67 6669 6c65 2c6c 6f67 3d73  lf.logfile,log=s
+00048f10: 656c 662e 6c6f 672c 6473 703d 2766 2720  elf.log,dsp='f' 
+00048f20: 6966 2073 656c 662e 6c6f 6766 696c 6520  if self.logfile 
+00048f30: 656c 7365 2027 6127 290a 2020 2020 2020  else 'a').      
+00048f40: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00048f50: 2073 656c 660a 2020 2020 2020 2020 2020   self.          
+00048f60: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
+00048f70: 2020 2020 2020 2020 2020 653d 4578 6365            e=Exce
+00048f80: 7074 4d65 7373 6167 6528 290a 2020 2020  ptMessage().    
+00048f90: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00048fa0: 656c 662e 6c6f 6766 696c 6520 6f72 2073  elf.logfile or s
+00048fb0: 656c 662e 6c6f 673a 0a20 2020 2020 2020  elf.log:.       
+00048fc0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00048fd0: 6e74 6628 652c 6461 7465 3d54 7275 652c  ntf(e,date=True,
+00048fe0: 6361 6c6c 6572 5f74 7265 653d 5472 7565  caller_tree=True
+00048ff0: 2c63 616c 6c65 725f 7061 7265 6e74 3d27  ,caller_parent='
+00049000: 312d 3527 2c63 616c 6c65 725f 6669 6c65  1-5',caller_file
+00049010: 6e61 6d65 3d54 7275 652c 6361 6c6c 6572  name=True,caller
+00049020: 5f6c 696e 655f 6e75 6d62 6572 3d54 7275  _line_number=Tru
+00049030: 652c 6c6f 6766 696c 653d 7365 6c66 2e6c  e,logfile=self.l
+00049040: 6f67 6669 6c65 2c6c 6f67 3d73 656c 662e  ogfile,log=self.
+00049050: 6c6f 672c 6473 703d 2766 2729 0a20 2020  log,dsp='f').   
+00049060: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00049070: 7365 6c66 2e65 7272 5f73 6372 6565 6e3a  self.err_screen:
+00049080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00049090: 2020 2020 2070 7269 6e74 6628 652c 6d6f       printf(e,mo
+000490a0: 6465 3d27 6527 290a 2020 2020 2020 2020  de='e').        
+000490b0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+000490c0: 6572 725f 6578 6974 3a0a 2020 2020 2020  err_exit:.      
+000490d0: 2020 2020 2020 2020 2020 2020 2020 6f73                os
+000490e0: 2e5f 6578 6974 2831 290a 2020 2020 2020  ._exit(1).      
+000490f0: 2020 2020 2020 2020 2020 7365 6c66 2e72            self.r
+00049100: 633d 4661 6c73 650a 2020 2020 2020 2020  c=False.        
+00049110: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
+00049120: 6f72 3d65 0a20 2020 2020 2020 2020 2020  or=e.           
+00049130: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00049140: 0a20 2020 2020 2020 2065 6c69 6620 6973  .        elif is
+00049150: 696e 7374 616e 6365 2866 756e 632c 7374  instance(func,st
+00049160: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+00049170: 7365 6c66 2e72 632c 7365 6c66 2e72 6573  self.rc,self.res
+00049180: 756c 742c 7365 6c66 2e65 7272 6f72 3d54  ult,self.error=T
+00049190: 7279 436f 6465 2866 756e 632c 6465 6661  ryCode(func,defa
+000491a0: 756c 743d 4661 6c73 652c 5f72 6574 7572  ult=False,_retur
+000491b0: 6e5f 3d54 7275 6529 0a20 2020 2020 2020  n_=True).       
+000491c0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+000491d0: 0a20 2020 2020 2020 2073 656c 662e 7263  .        self.rc
+000491e0: 3d46 616c 7365 0a20 2020 2020 2020 2073  =False.        s
+000491f0: 656c 662e 6572 726f 723d 274e 6f74 205b  elf.error='Not [
+00049200: 7375 7070 6f72 745d 2066 756e 6374 696f  support] functio
+00049210: 6e27 0a20 2020 2020 2020 2069 6620 7365  n'.        if se
+00049220: 6c66 2e6c 6f67 5f61 6c6c 3a0a 2020 2020  lf.log_all:.    
+00049230: 2020 2020 2020 2020 7072 696e 7466 2827          printf('
+00049240: 5243 3a7b 7d5c 6e52 6573 756c 743a 7b7d  RC:{}\nResult:{}
+00049250: 5c6e 4572 726f 723a 7b7d 272e 666f 726d  \nError:{}'.form
+00049260: 6174 2873 656c 662e 7263 2c73 656c 662e  at(self.rc,self.
+00049270: 7265 7375 6c74 2c73 656c 662e 6572 726f  result,self.erro
+00049280: 7229 2c64 6174 653d 5472 7565 2c6c 6f67  r),date=True,log
+00049290: 6669 6c65 3d73 656c 662e 6c6f 6766 696c  file=self.logfil
+000492a0: 652c 6c6f 673d 7365 6c66 2e6c 6f67 2c64  e,log=self.log,d
+000492b0: 7370 3d27 6627 2069 6620 7365 6c66 2e6c  sp='f' if self.l
+000492c0: 6f67 6669 6c65 2065 6c73 6520 2761 2729  ogfile else 'a')
+000492d0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000492e0: 7365 6c66 0a0a 2020 2020 6465 6620 5265  self..    def Re
+000492f0: 7375 6c74 2873 656c 6629 3a0a 2020 2020  sult(self):.    
+00049300: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00049310: 7265 7375 6c74 0a0a 2020 2020 6465 6620  result..    def 
+00049320: 5263 2873 656c 6629 3a0a 2020 2020 2020  Rc(self):.      
+00049330: 2020 7265 7475 726e 2073 656c 662e 7263    return self.rc
+00049340: 0a0a 2020 2020 6465 6620 4572 726f 7228  ..    def Error(
+00049350: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
+00049360: 6574 7572 6e20 7365 6c66 2e65 7272 6f72  eturn self.error
+00049370: 0a0a 636c 6173 7320 5245 5455 524e 3a0a  ..class RETURN:.
+00049380: 2020 2020 2727 2754 656d 706f 7261 7279      '''Temporary
+00049390: 2074 7279 2074 6f20 5245 5455 524e 2076   try to RETURN v
+000493a0: 616c 7565 2064 6566 696e 6527 2727 0a20  alue define'''. 
+000493b0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+000493c0: 7365 6c66 2c2a 6461 7461 2c2a 2a6f 7074  self,*data,**opt
+000493d0: 7329 3a0a 2020 2020 2020 2020 7365 6c66  s):.        self
+000493e0: 2e72 633d 6f70 7473 2e67 6574 2827 7263  .rc=opts.get('rc
+000493f0: 272c 6f70 7473 2e67 6574 2827 5243 272c  ',opts.get('RC',
+00049400: 4e6f 6e65 2929 0a20 2020 2020 2020 2069  None)).        i
+00049410: 6620 6c65 6e28 6461 7461 2920 3d3d 2031  f len(data) == 1
+00049420: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
+00049430: 6c66 2e64 6174 613d 6461 7461 5b30 5d0a  lf.data=data[0].
+00049440: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00049450: 2020 2020 2020 2020 2020 7365 6c66 2e64            self.d
+00049460: 6174 613d 6461 7461 0a20 2020 2020 2020  ata=data.       
+00049470: 2073 656c 662e 696e 666f 3d7b 7d0a 2020   self.info={}.  
+00049480: 2020 2020 2020 6966 206f 7074 732e 6765        if opts.ge
+00049490: 7428 2769 6e66 6f27 2c54 7275 6529 2069  t('info',True) i
+000494a0: 7320 5472 7565 3a0a 2020 2020 2020 2020  s True:.        
+000494b0: 2020 2020 7365 6c66 2e69 6e66 6f5b 2774      self.info['t
+000494c0: 696d 6527 5d3d 5449 4d45 2829 2e49 6e74  ime']=TIME().Int
+000494d0: 2829 0a20 2020 2020 2020 2020 2020 2069  ().            i
+000494e0: 6620 6f70 7473 2e67 6574 2827 6675 6e63  f opts.get('func
+000494f0: 7469 6f6e 272c 5472 7565 2920 6973 2054  tion',True) is T
+00049500: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
+00049510: 2020 2020 2073 656c 662e 696e 666f 5b27       self.info['
+00049520: 6675 6e63 7469 6f6e 275d 3d46 756e 6374  function']=Funct
+00049530: 696f 6e4e 616d 6528 2a2a 7b27 7061 7265  ionName(**{'pare
+00049540: 6e74 273a 312c 2761 7267 7327 3a54 7275  nt':1,'args':Tru
+00049550: 652c 276c 696e 655f 6e75 6d62 6572 273a  e,'line_number':
+00049560: 5472 7565 2c27 6669 6c65 6e61 6d65 273a  True,'filename':
+00049570: 5472 7565 7d29 0a20 2020 2020 2020 2020  True}).         
+00049580: 2020 2069 6620 6f70 7473 2e67 6574 2827     if opts.get('
+00049590: 7061 7265 6e74 2729 2069 7320 5472 7565  parent') is True
+000495a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000495b0: 2020 7365 6c66 2e69 6e66 6f5b 2770 6172    self.info['par
+000495c0: 656e 7427 5d3d 4675 6e63 7469 6f6e 4e61  ent']=FunctionNa
+000495d0: 6d65 282a 2a7b 2770 6172 656e 7427 3a32  me(**{'parent':2
+000495e0: 2c27 6c69 6e65 5f6e 756d 6265 7227 3a54  ,'line_number':T
+000495f0: 7275 652c 2766 696c 656e 616d 6527 3a54  rue,'filename':T
+00049600: 7275 657d 290a 2020 2020 2020 2020 2020  rue}).          
+00049610: 2020 6966 2027 6d73 6727 2069 6e20 6f70    if 'msg' in op
+00049620: 7473 3a20 7365 6c66 2e69 6e66 6f5b 276d  ts: self.info['m
+00049630: 7367 275d 3d6f 7074 732e 6765 7428 276d  sg']=opts.get('m
+00049640: 7367 2729 0a20 2020 2020 2020 2020 2020  sg').           
+00049650: 2069 6620 276e 6574 776f 726b 2720 696e   if 'network' in
+00049660: 206f 7074 733a 2073 656c 662e 696e 666f   opts: self.info
+00049670: 5b27 6e65 7477 6f72 6b27 5d3d 6f70 7473  ['network']=opts
+00049680: 2e67 6574 2827 6e65 7477 6f72 6b27 290a  .get('network').
+00049690: 0a20 2020 2064 6566 2047 6574 2873 656c  .    def Get(sel
+000496a0: 662c 2a6f 2c2a 2a6f 7074 7329 3a0a 2020  f,*o,**opts):.  
+000496b0: 2020 2020 2020 6966 206e 6f74 206f 3a20        if not o: 
+000496c0: 6f70 7473 5b27 6465 6661 756c 7427 5d3d  opts['default']=
+000496d0: 276f 7267 270a 2020 2020 2020 2020 7265  'org'.        re
+000496e0: 7475 726e 2047 6574 2873 656c 662e 6461  turn Get(self.da
+000496f0: 7461 2c2a 6f2c 2a2a 6f70 7473 290a 0a63  ta,*o,**opts)..c
+00049700: 6c61 7373 206b 5468 7265 6164 2854 6872  lass kThread(Thr
+00049710: 6561 6429 3a0a 2020 2020 2727 270a 2020  ead):.    '''.  
+00049720: 2020 7420 3d20 6b54 6872 6561 6428 7461    t = kThread(ta
+00049730: 7267 6574 3d66 6f6f 2c20 6172 6773 3d28  rget=foo, args=(
+00049740: 2777 6f72 6c64 2127 2c29 2920 2320 6465  'world!',)) # de
+00049750: 6669 6e65 0a20 2020 2074 2e73 7461 7274  fine.    t.start
+00049760: 2829 2023 2073 7461 7274 0a20 2020 2070  () # start.    p
+00049770: 7269 6e74 2874 2e67 6574 2829 2920 2023  rint(t.get())  #
+00049780: 2067 6574 2072 6573 756c 740a 2020 2020   get result.    
+00049790: 2727 270a 2020 2020 6465 6620 5f5f 696e  '''.    def __in
+000497a0: 6974 5f5f 2873 656c 662c 2067 726f 7570  it__(self, group
+000497b0: 3d4e 6f6e 652c 2074 6172 6765 743d 4e6f  =None, target=No
+000497c0: 6e65 2c20 6e61 6d65 3d4e 6f6e 652c 0a20  ne, name=None,. 
+000497d0: 2020 2020 2020 2020 2020 2061 7267 733d             args=
+000497e0: 2829 2c20 6b77 6172 6773 3d7b 7d2c 2056  (), kwargs={}, V
+000497f0: 6572 626f 7365 3d4e 6f6e 652c 2064 6566  erbose=None, def
+00049800: 6175 6c74 3d4e 6f6e 6529 3a0a 2020 2020  ault=None):.    
+00049810: 2020 2020 6966 2050 7956 6572 2833 293a      if PyVer(3):
+00049820: 0a20 2020 2020 2020 2020 2020 2054 6872  .            Thr
+00049830: 6561 642e 5f5f 696e 6974 5f5f 2873 656c  ead.__init__(sel
+00049840: 662c 2067 726f 7570 2c20 7461 7267 6574  f, group, target
+00049850: 2c20 6e61 6d65 2c20 6172 6773 2c20 6b77  , name, args, kw
+00049860: 6172 6773 290a 2020 2020 2020 2020 656c  args).        el
+00049870: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00049880: 5468 7265 6164 2e5f 5f69 6e69 745f 5f28  Thread.__init__(
+00049890: 7365 6c66 2c20 6772 6f75 702c 2074 6172  self, group, tar
+000498a0: 6765 742c 206e 616d 652c 2061 7267 732c  get, name, args,
+000498b0: 206b 7761 7267 732c 2056 6572 626f 7365   kwargs, Verbose
+000498c0: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
+000498d0: 7265 7475 726e 203d 2064 6566 6175 6c74  return = default
+000498e0: 0a0a 2020 2020 6465 6620 7275 6e28 7365  ..    def run(se
+000498f0: 6c66 293a 0a20 2020 2020 2020 2069 6620  lf):.        if 
+00049900: 5079 5665 7228 3329 3a0a 2020 2020 2020  PyVer(3):.      
+00049910: 2020 2020 2020 6966 2073 656c 662e 5f74        if self._t
+00049920: 6172 6765 7420 6973 206e 6f74 204e 6f6e  arget is not Non
+00049930: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00049940: 2020 2073 656c 662e 5f72 6574 7572 6e20     self._return 
+00049950: 3d20 7365 6c66 2e5f 7461 7267 6574 282a  = self._target(*
+00049960: 7365 6c66 2e5f 6172 6773 2c2a 2a73 656c  self._args,**sel
+00049970: 662e 5f6b 7761 7267 7329 0a20 2020 2020  f._kwargs).     
+00049980: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00049990: 2020 2020 2069 6620 7365 6c66 2e5f 5468       if self._Th
+000499a0: 7265 6164 5f5f 7461 7267 6574 2069 7320  read__target is 
+000499b0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+000499c0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+000499d0: 7265 7475 726e 203d 2073 656c 662e 5f54  return = self._T
+000499e0: 6872 6561 645f 5f74 6172 6765 7428 2a73  hread__target(*s
+000499f0: 656c 662e 5f54 6872 6561 645f 5f61 7267  elf._Thread__arg
+00049a00: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
+00049a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049a30: 2020 202a 2a73 656c 662e 5f54 6872 6561     **self._Threa
+00049a40: 645f 5f6b 7761 7267 7329 0a20 2020 2064  d__kwargs).    d
+00049a50: 6566 2067 6574 2873 656c 6629 3a0a 2020  ef get(self):.  
+00049a60: 2020 2020 2020 6966 2073 656c 662e 5f74        if self._t
+00049a70: 7374 6174 655f 6c6f 636b 3a0a 2020 2020  state_lock:.    
+00049a80: 2020 2020 2020 2020 5468 7265 6164 2e6a          Thread.j
+00049a90: 6f69 6e28 7365 6c66 290a 2020 2020 2020  oin(self).      
+00049aa0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00049ab0: 662e 5f72 6574 7572 6e0a 2020 2020 2020  f._return.      
+00049ac0: 2020 7265 7475 726e 204e 6f6e 650a 0a20    return None.. 
+00049ad0: 2020 2064 6566 2073 746f 7028 7365 6c66     def stop(self
+00049ae0: 2c72 6574 7279 5f6e 756d 3d31 3029 3a0a  ,retry_num=10):.
+00049af0: 2020 2020 2020 2020 6465 6620 5f61 7379          def _asy
+00049b00: 6e63 5f72 6169 7365 2874 685f 6964 2c65  nc_raise(th_id,e
+00049b10: 7865 5f74 7970 6529 3a0a 2020 2020 2020  xe_type):.      
+00049b20: 2020 2020 2020 7468 5f69 643d 6374 7970        th_id=ctyp
+00049b30: 6573 2e63 5f6c 6f6e 6728 7468 5f69 6429  es.c_long(th_id)
+00049b40: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00049b50: 6e6f 7420 696e 7370 6563 742e 6973 636c  not inspect.iscl
+00049b60: 6173 7328 6578 655f 7479 7065 293a 0a20  ass(exe_type):. 
+00049b70: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00049b80: 7865 5f74 7970 653d 7479 7065 2865 7865  xe_type=type(exe
+00049b90: 5f74 7970 6529 0a20 2020 2020 2020 2020  _type).         
+00049ba0: 2020 2072 6573 203d 2063 7479 7065 732e     res = ctypes.
+00049bb0: 7079 7468 6f6e 6170 692e 5079 5468 7265  pythonapi.PyThre
+00049bc0: 6164 5374 6174 655f 5365 7441 7379 6e63  adState_SetAsync
+00049bd0: 4578 6328 7468 5f69 642c 2063 7479 7065  Exc(th_id, ctype
+00049be0: 732e 7079 5f6f 626a 6563 7428 6578 655f  s.py_object(exe_
+00049bf0: 7479 7065 2929 0a20 2020 2020 2020 2020  type)).         
+00049c00: 2020 2069 6620 7265 7320 3d3d 2030 3a0a     if res == 0:.
+00049c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049c20: 2370 7269 6e74 2822 496e 7661 6c69 6420  #print("Invalid 
+00049c30: 7468 7265 6164 2069 6428 7b7d 2922 2e66  thread id({})".f
+00049c40: 6f72 6d61 7428 7468 5f69 6429 290a 2020  ormat(th_id)).  
+00049c50: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00049c60: 7475 726e 202d 310a 2020 2020 2020 2020  turn -1.        
+00049c70: 2020 2020 656c 6966 2072 6573 2021 3d20      elif res != 
+00049c80: 313a 0a20 2020 2020 2020 2020 2020 2020  1:.             
+00049c90: 2020 2063 7479 7065 732e 7079 7468 6f6e     ctypes.python
+00049ca0: 6170 692e 5079 5468 7265 6164 5374 6174  api.PyThreadStat
+00049cb0: 655f 5365 7441 7379 6e63 4578 6328 7468  e_SetAsyncExc(th
+00049cc0: 5f69 642c 204e 6f6e 6529 0a20 2020 2020  _id, None).     
+00049cd0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00049ce0: 2053 7973 7465 6d45 7272 6f72 2822 5468   SystemError("Th
+00049cf0: 7265 6164 5374 6f70 2066 6169 6c65 6422  readStop failed"
+00049d00: 290a 2020 2020 2020 2020 2020 2020 2320  ).            # 
+00049d10: 7374 6f70 7065 6420 7468 7265 6164 0a20  stopped thread. 
+00049d20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00049d30: 6e20 300a 2020 2020 2020 2020 666f 7220  n 0.        for 
+00049d40: 6920 696e 2072 616e 6765 2872 6574 7279  i in range(retry
+00049d50: 5f6e 756d 293a 0a20 2020 2020 2020 2020  _num):.         
+00049d60: 2020 2065 7869 745f 6964 3d5f 6173 796e     exit_id=_asyn
+00049d70: 635f 7261 6973 6528 7365 6c66 2e69 6465  c_raise(self.ide
+00049d80: 6e74 2c20 5379 7374 656d 4578 6974 290a  nt, SystemExit).
+00049d90: 2020 2020 2020 2020 2020 2020 6966 2065              if e
+00049da0: 7869 745f 6964 203d 3d20 303a 0a20 2020  xit_id == 0:.   
+00049db0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00049dc0: 662e 5f69 735f 7374 6f70 7065 643d 5472  f._is_stopped=Tr
+00049dd0: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
+00049de0: 2020 2072 6574 7572 6e20 5472 7565 2023     return True #
+00049df0: 2073 746f 7070 6564 0a20 2020 2020 2020   stopped.       
+00049e00: 2020 2020 2065 6c69 6620 6578 6974 5f69       elif exit_i
+00049e10: 6420 3d3d 202d 313a 2023 4e6f 2074 6872  d == -1: #No thr
+00049e20: 6561 640a 2020 2020 2020 2020 2020 2020  ead.            
+00049e30: 2020 2020 7365 6c66 2e5f 6973 5f73 746f      self._is_sto
+00049e40: 7070 6564 3d54 7275 650a 2020 2020 2020  pped=True.      
+00049e50: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00049e60: 204e 6f6e 650a 2020 2020 2020 2020 7265   None.        re
+00049e70: 7475 726e 2046 616c 7365 2023 2073 746f  turn False # sto
+00049e80: 7020 4661 696c 0a0a 2020 2020 6465 6620  p Fail..    def 
+00049e90: 6973 416c 6976 6528 7365 6c66 293a 0a20  isAlive(self):. 
+00049ea0: 2020 2020 2020 2023 6966 206e 6f74 2073         #if not s
+00049eb0: 656c 662e 5f74 7374 6174 655f 6c6f 636b  elf._tstate_lock
+00049ec0: 2061 6e64 206e 6f74 2073 656c 662e 5f69   and not self._i
+00049ed0: 735f 7374 6f70 7065 643a 2072 6574 7572  s_stopped: retur
+00049ee0: 6e20 4e6f 6e65 2023 204e 6f74 2073 7461  n None # Not sta
+00049ef0: 7274 6564 0a20 2020 2020 2020 2069 6620  rted.        if 
+00049f00: 6e6f 7420 7365 6c66 2e5f 7473 7461 7465  not self._tstate
+00049f10: 5f6c 6f63 6b20 616e 6420 6e6f 7420 7365  _lock and not se
+00049f20: 6c66 2e5f 6964 656e 743a 2072 6574 7572  lf._ident: retur
+00049f30: 6e20 4e6f 6e65 2023 204e 6f74 2073 7461  n None # Not sta
+00049f40: 7274 6564 0a20 2020 2020 2020 2069 6620  rted.        if 
+00049f50: 6e6f 7420 7365 6c66 2e5f 7473 7461 7465  not self._tstate
+00049f60: 5f6c 6f63 6b20 6f72 2073 656c 662e 5f69  _lock or self._i
+00049f70: 735f 7374 6f70 7065 643a 2072 6574 7572  s_stopped: retur
+00049f80: 6e20 4661 6c73 6520 2353 746f 7070 6564  n False #Stopped
+00049f90: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00049fa0: 5472 7565 2023 5275 6e6e 696e 670a 0a20  True #Running.. 
+00049fb0: 2020 2064 6566 204e 616d 6528 7365 6c66     def Name(self
+00049fc0: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+00049fd0: 6e20 7365 6c66 2e5f 6e61 6d65 0a20 2020  n self._name.   
+00049fe0: 2064 6566 2041 7267 7328 7365 6c66 293a   def Args(self):
+00049ff0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0004a000: 7365 6c66 2e5f 6172 6773 2c73 656c 662e  self._args,self.
+0004a010: 5f6b 7761 7267 730a 2020 2020 6465 6620  _kwargs.    def 
+0004a020: 4964 2873 656c 6629 3a0a 2020 2020 2020  Id(self):.      
+0004a030: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0004a040: 7365 6c66 2e69 6465 6e74 2c69 6e74 293a  self.ident,int):
+0004a050: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0004a060: 7572 6e20 7365 6c66 2e69 6465 6e74 0a20  urn self.ident. 
+0004a070: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
+0004a080: 6e65 2023 206e 6f74 2073 7461 7274 6564  ne # not started
+0004a090: 0a20 2020 2064 6566 2050 5049 4428 7365  .    def PPID(se
+0004a0a0: 6c66 293a 0a20 2020 2020 2020 2072 6574  lf):.        ret
+0004a0b0: 7572 6e20 6f73 2e67 6574 7069 6428 290a  urn os.getpid().
+0004a0c0: 0a64 6566 2050 726f 6772 6573 7328 7379  .def Progress(sy
+0004a0d0: 6d62 6f6c 3d27 2e27 2c2a 2a6f 7074 7329  mbol='.',**opts)
+0004a0e0: 3a0a 2020 2020 7374 6172 745f 6e65 776c  :.    start_newl
+0004a0f0: 696e 653d 6f70 7473 2e67 6574 2827 7374  ine=opts.get('st
+0004a100: 6172 745f 6e65 776c 696e 6527 2c46 616c  art_newline',Fal
+0004a110: 7365 290a 2020 2020 656e 645f 6e65 776c  se).    end_newl
+0004a120: 696e 653d 6f70 7473 2e67 6574 2827 656e  ine=opts.get('en
+0004a130: 645f 6e65 776c 696e 6527 2c6f 7074 732e  d_newline',opts.
+0004a140: 6765 7428 276e 6577 6c69 6e65 272c 5472  get('newline',Tr
+0004a150: 7565 2929 0a20 2020 206c 6f67 3d6f 7074  ue)).    log=opt
+0004a160: 732e 6765 7428 276c 6f67 272c 4e6f 6e65  s.get('log',None
+0004a170: 290a 2020 2020 696e 7465 7276 616c 3d49  ).    interval=I
+0004a180: 6e74 286f 7074 732e 6765 7428 2769 6e74  nt(opts.get('int
+0004a190: 6572 7661 6c27 292c 3529 0a20 2020 2074  erval'),5).    t
+0004a1a0: 696d 656f 7574 3d49 6e74 286f 7074 732e  imeout=Int(opts.
+0004a1b0: 6765 7428 2774 696d 656f 7574 2729 2c33  get('timeout'),3
+0004a1c0: 3630 302a 3130 3029 0a20 2020 206d 6f64  600*100).    mod
+0004a1d0: 653d 6f70 7473 2e67 6574 2827 6d6f 6465  e=opts.get('mode
+0004a1e0: 272c 2773 2729 0a20 2020 2073 746f 703d  ','s').    stop=
+0004a1f0: 6f70 7473 5b27 7374 6f70 275d 2069 6620  opts['stop'] if 
+0004a200: 2773 746f 7027 2069 6e20 6f70 7473 2065  'stop' in opts e
+0004a210: 6c73 6520 4661 6c73 650a 2020 2020 6465  lse False.    de
+0004a220: 6c61 793d 6f70 7473 5b27 6465 6c61 7927  lay=opts['delay'
+0004a230: 5d20 6966 2027 6465 6c61 7927 2069 6e20  ] if 'delay' in 
+0004a240: 6f70 7473 2065 6c73 6520 4661 6c73 650a  opts else False.
+0004a250: 2020 2020 6c6f 6361 6c5f 7072 696e 7465      local_printe
+0004a260: 643d 4661 6c73 650a 2020 2020 6966 2073  d=False.    if s
+0004a270: 7461 7274 5f6e 6577 6c69 6e65 3a0a 2020  tart_newline:.  
+0004a280: 2020 2020 2020 7072 696e 7466 2827 272c        printf('',
+0004a290: 6967 6e6f 7265 5f65 6d70 7479 3d46 616c  ignore_empty=Fal
+0004a2a0: 7365 2c63 616c 6c65 725f 7061 7265 6e74  se,caller_parent
+0004a2b0: 3d31 2c73 7461 7274 5f6e 6577 6c69 6e65  =1,start_newline
+0004a2c0: 3d27 6175 746f 272c 6c6f 673d 6c6f 672c  ='auto',log=log,
+0004a2d0: 656e 643d 2727 2c6d 6f64 653d 6d6f 6465  end='',mode=mode
+0004a2e0: 290a 2020 2020 5469 6d65 3d54 494d 4528  ).    Time=TIME(
+0004a2f0: 290a 2020 2020 7768 696c 6520 5472 7565  ).    while True
+0004a300: 3a0a 2020 2020 2020 2020 6966 2049 7354  :.        if IsT
+0004a310: 7275 6528 7374 6f70 2920 6f72 2028 7469  rue(stop) or (ti
+0004a320: 6d65 6f75 7420 3e20 3020 616e 6420 5469  meout > 0 and Ti
+0004a330: 6d65 2e4f 7574 2874 696d 656f 7574 2929  me.Out(timeout))
+0004a340: 3a20 6272 6561 6b0a 2020 2020 2020 2020  : break.        
+0004a350: 6966 2064 656c 6179 3a0a 2020 2020 2020  if delay:.      
+0004a360: 2020 2020 2020 6966 2028 6973 696e 7374        if (isinst
+0004a370: 616e 6365 2864 656c 6179 2c69 6e74 2920  ance(delay,int) 
+0004a380: 616e 6420 6e6f 7420 2054 696d 652e 4f75  and not  Time.Ou
+0004a390: 7428 6465 6c61 7929 2920 6f72 206e 6f74  t(delay)) or not
+0004a3a0: 2049 7354 7275 6528 6465 6c61 7929 3a20   IsTrue(delay): 
+0004a3b0: 236c 6573 7320 6465 6c61 7920 7469 6d65  #less delay time
+0004a3c0: 2074 6865 6e20 736b 6970 2070 726f 6772   then skip progr
+0004a3d0: 6573 7320 6c6f 670a 2020 2020 2020 2020  ess log.        
+0004a3e0: 2020 2020 2020 2020 7469 6d65 2e73 6c65          time.sle
+0004a3f0: 6570 2830 2e33 290a 2020 2020 2020 2020  ep(0.3).        
+0004a400: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
+0004a410: 0a20 2020 2020 2020 2070 7269 6e74 6628  .        printf(
+0004a420: 7379 6d62 6f6c 2c64 6972 6563 743d 5472  symbol,direct=Tr
+0004a430: 7565 2c6c 6f67 3d6c 6f67 2c6c 6f67 5f6c  ue,log=log,log_l
+0004a440: 6576 656c 3d31 2c6d 6f64 653d 6d6f 6465  evel=1,mode=mode
+0004a450: 290a 2020 2020 2020 2020 6c6f 6361 6c5f  ).        local_
+0004a460: 7072 696e 7465 643d 5472 7565 0a20 2020  printed=True.   
+0004a470: 2020 2020 2074 696d 652e 736c 6565 7028       time.sleep(
+0004a480: 696e 7465 7276 616c 290a 2020 2020 6966  interval).    if
+0004a490: 2065 6e64 5f6e 6577 6c69 6e65 2061 6e64   end_newline and
+0004a4a0: 206c 6f63 616c 5f70 7269 6e74 6564 3a0a   local_printed:.
+0004a4b0: 2020 2020 2020 2020 7072 696e 7466 2827          printf('
+0004a4c0: 272c 6967 6e6f 7265 5f65 6d70 7479 3d46  ',ignore_empty=F
+0004a4d0: 616c 7365 2c63 616c 6c65 725f 7061 7265  alse,caller_pare
+0004a4e0: 6e74 3d31 2c6e 6f5f 696e 7472 6f3d 5472  nt=1,no_intro=Tr
+0004a4f0: 7565 2c6c 6f67 3d6c 6f67 2c6d 6f64 653d  ue,log=log,mode=
+0004a500: 6d6f 6465 290a 0a0a 2369 6620 5f5f 6e61  mode)...#if __na
+0004a510: 6d65 5f5f 203d 3d20 225f 5f6d 6169 6e5f  me__ == "__main_
+0004a520: 5f22 3a0a 2320 2020 2023 2049 6e74 6567  _":.#    # Integ
+0004a530: 6572 0a23 2020 2020 7072 696e 7428 2247  er.#    print("G
+0004a540: 6574 2831 3233 3435 293a 222c 4765 7428  et(12345):",Get(
+0004a550: 3132 3334 3529 290a 2320 2020 2070 7269  12345)).#    pri
+0004a560: 6e74 2822 4765 7428 3132 3334 352c 3129  nt("Get(12345,1)
+0004a570: 3a22 2c47 6574 2831 3233 3435 2c31 2929  :",Get(12345,1))
+0004a580: 0a                                       .
```

### Comparing `kmport-2.1.6/kmport.egg-info/PKG-INFO` & `kmport-2.1.7/kmport.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kmport
-Version: 2.1.6
+Version: 2.1.7
 Summary: Extended import function
 Home-page: https://github.com/kagepark/Import
 Author: Kage Park
 License: MIT
 Classifier: Programming Language :: Python :: 2
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: MIT License
```

### Comparing `kmport-2.1.6/setup.py` & `kmport-2.1.7/setup.py`

 * *Files identical despite different names*

