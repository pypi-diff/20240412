# Comparing `tmp/surfalize-0.7.0-cp39-cp39-win_amd64.whl.zip` & `tmp/surfalize-0.8.0-cp39-cp39-win_amd64.whl.zip`

## zipinfo {}

```diff
@@ -1,29 +1,31 @@
-Zip file size: 147377 bytes, number of entries: 27
--rw-rw-rw-  2.0 fat       86 b- defN 24-Mar-13 16:45 surfalize/__init__.py
--rw-rw-rw-  2.0 fat     8191 b- defN 24-Mar-13 16:45 surfalize/abbottfirestone.py
--rw-rw-rw-  2.0 fat     5347 b- defN 24-Mar-13 16:45 surfalize/autocorrelation.py
--rw-rw-rw-  2.0 fat    22952 b- defN 24-Mar-13 16:45 surfalize/batch.py
--rw-rw-rw-  2.0 fat   197632 b- defN 24-Mar-13 16:46 surfalize/calculations.cp39-win_amd64.pyd
--rw-rw-rw-  2.0 fat     8262 b- defN 24-Mar-13 16:45 surfalize/common.py
--rw-rw-rw-  2.0 fat      347 b- defN 24-Mar-13 16:45 surfalize/exceptions.py
--rw-rw-rw-  2.0 fat     3315 b- defN 24-Mar-13 16:45 surfalize/filter.py
--rw-rw-rw-  2.0 fat     2353 b- defN 24-Mar-13 16:45 surfalize/profile.py
--rw-rw-rw-  2.0 fat    72121 b- defN 24-Mar-13 16:45 surfalize/surface.py
--rw-rw-rw-  2.0 fat     2535 b- defN 24-Mar-13 16:45 surfalize/utils.py
--rw-rw-rw-  2.0 fat       48 b- defN 24-Mar-13 16:45 surfalize/file/__init__.py
--rw-rw-rw-  2.0 fat     3137 b- defN 24-Mar-13 16:45 surfalize/file/common.py
--rw-rw-rw-  2.0 fat     1048 b- defN 24-Mar-13 16:45 surfalize/file/loader.py
--rw-rw-rw-  2.0 fat      893 b- defN 24-Mar-13 16:45 surfalize/file/nms.py
--rw-rw-rw-  2.0 fat     2866 b- defN 24-Mar-13 16:45 surfalize/file/opd.py
--rw-rw-rw-  2.0 fat     1798 b- defN 24-Mar-13 16:45 surfalize/file/plu.py
--rw-rw-rw-  2.0 fat      743 b- defN 24-Mar-13 16:45 surfalize/file/plux.py
--rw-rw-rw-  2.0 fat     3665 b- defN 24-Mar-13 16:45 surfalize/file/sur.py
--rw-rw-rw-  2.0 fat     5472 b- defN 24-Mar-13 16:45 surfalize/file/vk.py
--rw-rw-rw-  2.0 fat      931 b- defN 24-Mar-13 16:45 surfalize/file/xyz.py
--rw-rw-rw-  2.0 fat      888 b- defN 24-Mar-13 16:45 surfalize/file/zmg.py
--rw-rw-rw-  2.0 fat    35817 b- defN 24-Mar-13 16:46 surfalize-0.7.0.dist-info/LICENSE.txt
--rw-rw-rw-  2.0 fat    15249 b- defN 24-Mar-13 16:46 surfalize-0.7.0.dist-info/METADATA
--rw-rw-rw-  2.0 fat      100 b- defN 24-Mar-13 16:46 surfalize-0.7.0.dist-info/WHEEL
--rw-rw-rw-  2.0 fat       10 b- defN 24-Mar-13 16:46 surfalize-0.7.0.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     2149 b- defN 24-Mar-13 16:46 surfalize-0.7.0.dist-info/RECORD
-27 files, 397955 bytes uncompressed, 143963 bytes compressed:  63.8%
+Zip file size: 150684 bytes, number of entries: 29
+-rw-rw-rw-  2.0 fat       86 b- defN 24-Apr-03 13:11 surfalize/__init__.py
+-rw-rw-rw-  2.0 fat     8207 b- defN 24-Apr-03 13:11 surfalize/abbottfirestone.py
+-rw-rw-rw-  2.0 fat     5409 b- defN 24-Apr-03 13:11 surfalize/autocorrelation.py
+-rw-rw-rw-  2.0 fat    22952 b- defN 24-Apr-03 13:11 surfalize/batch.py
+-rw-rw-rw-  2.0 fat   197632 b- defN 24-Apr-03 13:12 surfalize/calculations.cp39-win_amd64.pyd
+-rw-rw-rw-  2.0 fat     8262 b- defN 24-Apr-03 13:11 surfalize/common.py
+-rw-rw-rw-  2.0 fat      347 b- defN 24-Apr-03 13:11 surfalize/exceptions.py
+-rw-rw-rw-  2.0 fat     3315 b- defN 24-Apr-03 13:11 surfalize/filter.py
+-rw-rw-rw-  2.0 fat     2353 b- defN 24-Apr-03 13:11 surfalize/profile.py
+-rw-rw-rw-  2.0 fat    72609 b- defN 24-Apr-03 13:11 surfalize/surface.py
+-rw-rw-rw-  2.0 fat     2535 b- defN 24-Apr-03 13:11 surfalize/utils.py
+-rw-rw-rw-  2.0 fat       60 b- defN 24-Apr-03 13:11 surfalize/file/__init__.py
+-rw-rw-rw-  2.0 fat     2851 b- defN 24-Apr-03 13:11 surfalize/file/al3d.py
+-rw-rw-rw-  2.0 fat     4210 b- defN 24-Apr-03 13:11 surfalize/file/common.py
+-rw-rw-rw-  2.0 fat     1860 b- defN 24-Apr-03 13:11 surfalize/file/loader.py
+-rw-rw-rw-  2.0 fat      893 b- defN 24-Apr-03 13:11 surfalize/file/nms.py
+-rw-rw-rw-  2.0 fat     2880 b- defN 24-Apr-03 13:11 surfalize/file/opd.py
+-rw-rw-rw-  2.0 fat     1798 b- defN 24-Apr-03 13:11 surfalize/file/plu.py
+-rw-rw-rw-  2.0 fat      743 b- defN 24-Apr-03 13:11 surfalize/file/plux.py
+-rw-rw-rw-  2.0 fat     1972 b- defN 24-Apr-03 13:11 surfalize/file/sdf.py
+-rw-rw-rw-  2.0 fat     6748 b- defN 24-Apr-03 13:11 surfalize/file/sur.py
+-rw-rw-rw-  2.0 fat     5472 b- defN 24-Apr-03 13:11 surfalize/file/vk.py
+-rw-rw-rw-  2.0 fat      931 b- defN 24-Apr-03 13:11 surfalize/file/xyz.py
+-rw-rw-rw-  2.0 fat      888 b- defN 24-Apr-03 13:11 surfalize/file/zmg.py
+-rw-rw-rw-  2.0 fat    35817 b- defN 24-Apr-03 13:12 surfalize-0.8.0.dist-info/LICENSE.txt
+-rw-rw-rw-  2.0 fat    15589 b- defN 24-Apr-03 13:12 surfalize-0.8.0.dist-info/METADATA
+-rw-rw-rw-  2.0 fat      100 b- defN 24-Apr-03 13:12 surfalize-0.8.0.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat       10 b- defN 24-Apr-03 13:12 surfalize-0.8.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     2306 b- defN 24-Apr-03 13:12 surfalize-0.8.0.dist-info/RECORD
+29 files, 408835 bytes uncompressed, 147032 bytes compressed:  64.0%
```

## zipnote {}

```diff
@@ -30,14 +30,17 @@
 
 Filename: surfalize/utils.py
 Comment: 
 
 Filename: surfalize/file/__init__.py
 Comment: 
 
+Filename: surfalize/file/al3d.py
+Comment: 
+
 Filename: surfalize/file/common.py
 Comment: 
 
 Filename: surfalize/file/loader.py
 Comment: 
 
 Filename: surfalize/file/nms.py
@@ -48,35 +51,38 @@
 
 Filename: surfalize/file/plu.py
 Comment: 
 
 Filename: surfalize/file/plux.py
 Comment: 
 
+Filename: surfalize/file/sdf.py
+Comment: 
+
 Filename: surfalize/file/sur.py
 Comment: 
 
 Filename: surfalize/file/vk.py
 Comment: 
 
 Filename: surfalize/file/xyz.py
 Comment: 
 
 Filename: surfalize/file/zmg.py
 Comment: 
 
-Filename: surfalize-0.7.0.dist-info/LICENSE.txt
+Filename: surfalize-0.8.0.dist-info/LICENSE.txt
 Comment: 
 
-Filename: surfalize-0.7.0.dist-info/METADATA
+Filename: surfalize-0.8.0.dist-info/METADATA
 Comment: 
 
-Filename: surfalize-0.7.0.dist-info/WHEEL
+Filename: surfalize-0.8.0.dist-info/WHEEL
 Comment: 
 
-Filename: surfalize-0.7.0.dist-info/top_level.txt
+Filename: surfalize-0.8.0.dist-info/top_level.txt
 Comment: 
 
-Filename: surfalize-0.7.0.dist-info/RECORD
+Filename: surfalize-0.8.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## surfalize/abbottfirestone.py

```diff
@@ -135,20 +135,20 @@
         A2 = np.abs(np.trapz(100 - self._material_ratio[idx:], x=self._height[idx:]))
         Svk = 2 * A2 / (100 - self.Smr2())
         return Svk
 
     @cache
     def Vmp(self, p=10):
         idx = argclosest(self.Smc(p), self._height)
-        return np.trapz(self._material_ratio[:idx], x=self._height[:idx]) / 100
+        return np.abs(np.trapz(self._material_ratio[:idx], x=self._height[:idx]) / 100)
 
     @cache
     def Vmc(self, p=10, q=80):
         idx = argclosest(self.Smc(q), self._height)
-        return np.trapz(self._material_ratio[:idx], x=self._height[:idx]) / 100 - self.Vmp(p)
+        return np.abs(np.trapz(self._material_ratio[:idx], x=self._height[:idx])) / 100 - self.Vmp(p)
 
     @cache
     def Vvv(self, q=80):
         idx = argclosest(self.Smc(80), self._height)
         return np.abs(np.trapz(100 - self._material_ratio[idx:], x=self._height[idx:])) / 100
 
     @cache
```

## surfalize/autocorrelation.py

```diff
@@ -14,15 +14,15 @@
     surface: Surface
         Surface object on which to calculate the 2d autocorrelation function.
     """
     def __init__(self, surface):
         super().__init__()
         # For now we level and center. In the future, we should replace that with lookups of booleans
         # to avoid double computation
-        self._surface = surface.level().center()
+        self._surface = surface.center()
         self._current_threshold = None
 
     def _calculate_autocorrelation(self, s):
         """
         Calculates the 2d autocorrelation function of the surface height data and
         extracts the indices of the points of minimum and maximum decay.
 
@@ -36,15 +36,16 @@
 
         Returns
         -------
         None
         """
         self.clear_cache()
         self._current_threshold = s
-        self._autocorr = correlate(self._surface.data, self._surface.data, mode='same')
+        data = self._surface.data
+        self._autocorr = np.abs(np.fft.fftshift(np.fft.ifft2(np.fft.fft2(data) * np.conj(np.fft.fft2(data))))) / data.size
         #threshold = self._autocorr.min() + (self._autocorr.max() - self._autocorr.min()) * s
         threshold = s * self._autocorr.max()
         mask = (self._autocorr < threshold)
 
         # Find the center point of the array
         self.center = np.array(self._autocorr.shape) // 2
```

## surfalize/surface.py

```diff
@@ -13,15 +13,15 @@
 from scipy.interpolate import griddata
 from scipy.signal import find_peaks
 from scipy.optimize import curve_fit
 import scipy.ndimage as ndimage
 from sklearn.cluster import KMeans
 
 # Custom imports
-from .file import load_file
+from .file import load_file, write_file
 from .utils import argclosest, interp1d, is_list_like
 from .common import Sinusoid, register_returnlabels, CachedInstance, cache
 from .autocorrelation import AutocorrelationFunction
 from .abbottfirestone import AbbottFirestoneCurve
 from .profile import Profile
 from .filter import GaussianFilter
 try:
@@ -265,14 +265,30 @@
         encoding: str, Default utf-8
             Encoding of characters in the file. Defaults to utf-8.
         Returns
         -------
         surface: surfalize.Surface
         """
         return cls(*load_file(filepath, encoding=encoding))
+
+    def save(self, filepath, encoding='utf-8'):
+        """
+        Saves the surface to a supported file format.
+
+        Parameters
+        ----------
+        filepath: str | pathlib.Path
+            Filepath pointing to the topography file.
+        encoding: str, Default utf-8
+            Encoding of characters in the file. Defaults to utf-8.
+        Returns
+        -------
+        None
+        """
+        write_file(filepath, self, encoding=encoding)
         
     def get_horizontal_profile(self, y, average=1, average_step=None):
         """
         Extracts a horizontal profile from the surface with optional averaging over parallel profiles.
         Profiles on the edge might be averaged over fewer profiles.
 
         Parameters
```

## surfalize/file/__init__.py

```diff
@@ -1 +1 @@
-from .loader import load_file, supported_formats
+from .loader import load_file, write_file, supported_formats
```

## surfalize/file/common.py

```diff
@@ -43,20 +43,50 @@
         Unit to which to convert.
 
     Returns
     -------
     factor: float
         Factor by which to multiply the original values.
     """
+    from_unit = _sanitize_mu(from_unit)
     if from_unit not in UNIT_EXPONENT or to_unit not in UNIT_EXPONENT:
         raise ValueError('Unit does not exist.')
-    from_unit = _sanitize_mu(from_unit)
     exponent = UNIT_EXPONENT[from_unit] - UNIT_EXPONENT[to_unit]
     return 10**exponent
 
+def write_binary_layout(filehandle, layout, data, encoding='utf-8'):
+    """
+    Writes a binary layout to a file.
+
+    Parameters
+    ----------
+    filehandle: file object
+        File-like object to read the data from.
+    layout: tuple[tuple[str, str, bool] | tuple[None, int, None]]
+        Layout of the bytes to read as a tuple of tuples in the form (<name>, <format>, <skip_fast>) or
+        (None, <n_bytes>, None) for reserved bytes.
+    data: dict[str: any]
+        Dictionary containing keys that correspond to the name value in the layout tuple and the values to write
+        to the file as keys.
+    encoding: str, Default utf-8
+            Encoding of characters in the file. Defaults to utf-8.
+
+    Returns
+    -------
+    None
+    """
+    for name, format_, _ in layout:
+        if name is None:
+            filehandle.write(b'\x00' * format_)
+            continue
+        value = data[name]
+        if isinstance(value, str):
+            value = value.encode(encoding)
+        filehandle.write(struct.pack(format_, value))
+
 def read_binary_layout(filehandle, layout, fast=True, encoding='utf-8'):
     """
     Reads a binary layout specified by a tuple of tuples from an opened file and returns a dict with the read values.
     The layout must be provided in the form:
 
     LAYOUT = (
         (<name>, <format_specifier>, <skip_fast>),
```

## surfalize/file/loader.py

```diff
@@ -1,37 +1,52 @@
 from pathlib import Path
 from functools import partial
 from ..exceptions import UnsupportedFileFormatError
 
 from .vk import read_vk4, read_vk6_vk7
 from .plu import read_plu
 from .plux import read_plux
-from .sur import read_sur
+from .sur import read_sur, write_sur
 from .zmg import read_zmg
 from .opd import read_opd
 from .xyz import read_xyz
 from .nms import read_nms
+from .al3d import read_al3d, write_al3d
+from .sdf import read_binary_sdf
 
 dispatcher = {
-    '.sur': read_sur,
-    '.vk4': read_vk4,
-    '.vk6': read_vk6_vk7,
-    '.vk7': read_vk6_vk7,
-    '.plu': read_plu,
-    '.plux': read_plux,
-    '.zmg': read_zmg,
-    '.opd': read_opd,
-    '.xyz': read_xyz,
-    '.nms': read_nms
+    '.sur':     {'read': read_sur, 'write': write_sur},
+    '.vk4':     {'read': read_vk4},
+    '.vk6':     {'read': read_vk6_vk7},
+    '.vk7':     {'read': read_vk6_vk7},
+    '.plu':     {'read': read_plu},
+    '.plux':    {'read': read_plux},
+    '.zmg':     {'read': read_zmg},
+    '.opd':     {'read': read_opd},
+    '.xyz':     {'read': read_xyz},
+    '.nms':     {'read': read_nms},
+    '.al3d':    {'read': read_al3d, 'write': write_al3d},
+    '.sdf':     {'read': read_binary_sdf}
 }
 
 supported_formats = list(dispatcher.keys())
 
-def load_file(filepath, encoding='utf-8'):
+def load_file(filepath, encoding="utf-8"):
     filepath = Path(filepath)
     try:
-        loader = dispatcher[filepath.suffix]
+        loader = dispatcher[filepath.suffix]['read']
         if 'encoding' in loader.__code__.co_varnames:
             loader = partial(loader, encoding=encoding)
     except KeyError:
         raise UnsupportedFileFormatError(f"File format {filepath.suffix} is currently not supported.")
-    return loader(filepath)
+    return loader(filepath)
+
+def write_file(filepath, surface, encoding='utf-8'):
+    filepath = Path(filepath)
+    ext = filepath.suffix
+    if not ext:
+        raise ValueError('No format for the file specified.')
+    try:
+        writer = dispatcher[filepath.suffix]['write']
+    except KeyError:
+        raise UnsupportedFileFormatError(f"File format {filepath.suffix} is currently not supported for writing.")
+    return writer(filepath, surface, encoding=encoding)
```

## surfalize/file/opd.py

```diff
@@ -1,13 +1,13 @@
 # This code was only tested on .opd files with an itemsize of 2
 
 from dataclasses import dataclass
 import struct
 import numpy as np
-from ..exceptions import CorruptedFileError
+from ..exceptions import CorruptedFileError, CorruptedFileError
 
 BLOCK_SIZE = 24
 BLOCK_NAME_SIZE = 16
 INT16_MAX = 32767
 
 dtype = {1: 'c', 2: '<i2', 4: '4f'}
 
@@ -41,15 +41,15 @@
             block.offset = offset
             offset += block.size
 
         file.seek(blocks['RAW_DATA'].offset, 0)
         nx, ny, itemsize = struct.unpack('<HHH', file.read(6))
         data_length = nx * ny
         if data_length * itemsize != blocks['RAW_DATA'].size - 6:
-            raise CorruptedFileFormatError('Size of data does not match expected size.')
+            raise CorruptedFileError('Size of data does not match expected size.')
 
         data = np.fromfile(file, dtype=dtype[itemsize], count=data_length)
         data = np.rot90(data.reshape(nx, ny)).astype('float64')
 
         # Mask invalid datapoints
         if itemsize == 2:
             data[data == INT16_MAX] = np.nan
```

## surfalize/file/sur.py

```diff
@@ -1,9 +1,10 @@
 import struct
-from .common import read_binary_layout, get_unit_conversion
+from datetime import datetime
+from .common import read_binary_layout, write_binary_layout, get_unit_conversion
 from ..exceptions import CorruptedFileError
 import numpy as np
 
 # This is not fully implemented! Won't work with all SUR files.
 
 MAGIC = 'DIGITAL SURF'
 HEADER_SIZE = 512
@@ -57,25 +58,109 @@
     ('length_comment', 'h', False),
     ('length_private', 'h', False),
     ('client_zone', '128s', True),
     ('offset_x', 'f', True),
     ('offset_y', 'f', True),
     ('offset_z', 'f', True),
     ('spacing_t', 'f', True),
-    ('offset_T', 'f', True),
+    ('offset_t', 'f', True),
     ('name_t', '13s', True),
     ('unit_step_t', '13s', True)
 )
 
 POINTSIZE = {16: 'h', 32: 'i'}
 
+def write_sur(filepath, surface, encoding='utf-8'):
+    INT32_MAX = int(2 ** 32 / 2) - 1
+    INT32_MIN = -int(2 ** 32 / 2)
+
+    data = surface.data
+    nm_points = int(surface._nonmeasured_points_exist)
+
+    INT_DATA_MIN = INT32_MIN + 2
+    INT_DATA_MAX = INT32_MAX - 1
+    data_max = np.nanmax(surface.data)
+    data_min = np.nanmin(surface.data)
+    data = ((surface.data - data_min) / (data_max - data_min)) * (INT_DATA_MAX - INT_DATA_MIN) + INT_DATA_MIN
+    if nm_points:
+        data[np.isnan(data)] = INT_DATA_MIN - 2
+    data = data.astype('int32')
+    spacing_z = (data_max - data_min) / (INT_DATA_MAX - INT_DATA_MIN)
+    offset_z = offset = data_min + (data_max - data_min)/2
+    timestamp = datetime.now()
+
+    header = {
+        'code': MAGIC,
+        'format': 0,  # PC Format
+        'n_objects': 1,
+        'version_number': 1,
+        'studiable_type': 2,
+        'name_object': '',
+        'name_operator': '',
+        'non_measured_points': nm_points,
+        'absolute_z_axis': 0,
+        'bits_per_point': 32,
+        'min_point': INT_DATA_MIN,
+        'max_point': INT_DATA_MAX,
+        'n_points_per_line': surface.size.x,
+        'n_lines': surface.size.y,
+        'n_total_points': surface.size.x * surface.size.y,
+        'spacing_x': surface.step_x,
+        'spacing_y': surface.step_y,
+        'spacing_z': spacing_z,
+        'name_x': 'X',
+        'name_y': 'Y',
+        'name_z': 'Z',
+        'unit_step_x': 'µm',
+        'unit_step_y': 'µm',
+        'unit_step_z': 'µm',
+        'unit_x': 'µm',
+        'unit_y': 'µm',
+        'unit_z': 'µm',
+        'unit_ratio_x': 1.0,
+        'unit_ratio_y': 1.0,
+        'unit_ratio_z': 1.0,
+        'replica': 1,
+        'inverted': 0,
+        'leveled': 0,
+        'seconds': timestamp.second,
+        'minutes': timestamp.minute,
+        'hours': timestamp.hour,
+        'day': timestamp.day,
+        'month': timestamp.month,
+        'year': timestamp.year,
+        'week_day': timestamp.weekday(),
+        'measurement_duration': 0,
+        'length_comment': 0,
+        'length_private': 0,
+        'client_zone': 'Exported by surfalize',
+        'offset_x': 0,
+        'offset_y': 0,
+        'offset_z': offset_z,
+        'spacing_t': 0,
+        'offset_t': 0,
+        'name_t': '',
+        'unit_step_t': ''
+    }
+
+    # Pad all strings with spaces
+    for name, format_, _ in LAYOUT_HEADER:
+        if name is None or not format_.endswith('s'):
+            continue
+        length = struct.calcsize(format_)
+        header[name] = header[name].ljust(length)
+
+    with open(filepath, 'wb') as file:
+        write_binary_layout(file, LAYOUT_HEADER, header)
+        data.tofile(file)
+
 def read_sur(filepath, encoding='utf-8'):
     filesize = filepath.stat().st_size
     with open(filepath, 'rb') as filehandle:
-        header = read_binary_layout(filehandle, LAYOUT_HEADER, encoding=encoding)
+        header = read_binary_layout(filehandle, LAYOUT_HEADER, encoding=encoding, fast=False)
 
         if header['code'] != MAGIC or header['version_number'] != 1:
             raise CorruptedFileError
 
         if header['unit_ratio_x'] != 1 or header['unit_ratio_y'] != 1 or header['unit_ratio_z'] != 1:
             raise NotImplementedError("This file type cannot be correctly read currently.")
 
@@ -89,13 +174,21 @@
         total_header_size = HEADER_SIZE + header['length_comment'] + header['length_private']
         expected_data_size = header['n_total_points'] * dsize
         if filesize - total_header_size > expected_data_size:
             filehandle.seek(filesize - data_size, 0)
         shape = (header['n_lines'], header['n_points_per_line'])
         data = np.fromfile(filehandle, dtype=np.dtype(dtype)).reshape(shape)
 
+        if header['non_measured_points'] == 1:
+            invalidValue = header['min_point'] - 2
+            nan_mask = (data == invalidValue)
 
         data = data * get_unit_conversion(header['unit_z'], 'um') * header['spacing_z']
         step_x = get_unit_conversion(header['unit_x'], 'um') * header['spacing_x']
         step_y = get_unit_conversion(header['unit_y'], 'um') * header['spacing_y']
 
+        data += header['offset_z']
+
+        if header['non_measured_points'] == 1:
+            data[nan_mask] = np.nan
+
         return (data, step_x, step_y)
```

### encoding

```diff
@@ -1 +1 @@
-us-ascii
+utf-8
```

## Comparing `surfalize-0.7.0.dist-info/LICENSE.txt` & `surfalize-0.8.0.dist-info/LICENSE.txt`

 * *Files identical despite different names*

## Comparing `surfalize-0.7.0.dist-info/METADATA` & `surfalize-0.8.0.dist-info/METADATA`

 * *Files 3% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: surfalize
-Version: 0.7.0
+Version: 0.8.0
 Summary: A python module to analyze surface roughness
 Home-page: UNKNOWN
 Author: Frederic Schell
 Author-email: frederic.schell@iws.fraunhofer.de
 License: UNKNOWN
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
@@ -14,15 +14,15 @@
 Classifier: Programming Language :: Python :: 3.8
 Classifier: Programming Language :: Python :: 3.9
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
 Requires-Python: >=3.6
 Description-Content-Type: text/markdown
 License-File: LICENSE.txt
-Requires-Dist: numpy >=1.18.1
+Requires-Dist: numpy <2.0,>=1.18.1
 Requires-Dist: matplotlib >=3.1.1
 Requires-Dist: pandas >=1.0.1
 Requires-Dist: scipy >=1.4.1
 Requires-Dist: tqdm >=4.64.1
 Requires-Dist: openpyxl >=3.1.2
 Requires-Dist: scikit-learn
 
@@ -59,24 +59,26 @@
 
 ## Documentation
 
 The documentation is hosted on [readthedocs](https://surfalize.readthedocs.io/en/latest/).
 
 ## Currently supported file formats
 
-| Manufacturer | Format                 |
-|--------------|------------------------|
-| Keyence      | *.vk4*, *.vk6*, *.vk7* |
-| Leica        | *.plu*                 |
-| Sensofar     | *.plu*, *.plux*        |
-| Digital Surf | *.sur*                 |
-| KLA Zeta     | *.zmg*                 |
-| Wyko         | *.opd*                 |
-| Nanofocus    | *.nms*                 |
-| General      | *.xyz*                 |
+| Manufacturer | Format                 | Reading | Writing |
+|--------------|------------------------|---------|---------|
+| Keyence      | *.vk4*, *.vk6*, *.vk7* | Yes     | No      | 
+| Leica        | *.plu*                 | Yes     | No      | 
+| Sensofar     | *.plu*, *.plux*        | Yes     | No      | 
+| Digital Surf | *.sur*                 | Yes     | Yes     | 
+| KLA Zeta     | *.zmg*                 | Yes     | No      | 
+| Wyko         | *.opd*                 | Yes     | No      | 
+| Nanofocus    | *.nms*                 | Yes     | No      | 
+| Alicona      | *.al3d*                | Yes     | Yes     | 
+| T.b.d        | *.sdf*                 | Yes     | No      | 
+| General      | *.xyz*                 | Yes     | No      |
 
 ## Supported roughness parameters
 
 This package aims to implement all parameters defined in ISO 25178. Currently, the following parameters are supported:
 
 | Category            | Parameter       | Full name                         | Validated against                  |
 |---------------------|-----------------|-----------------------------------|------------------------------------|
```

## Comparing `surfalize-0.7.0.dist-info/RECORD` & `surfalize-0.8.0.dist-info/RECORD`

 * *Files 23% similar despite different names*

```diff
@@ -1,27 +1,29 @@
 surfalize/__init__.py,sha256=bkBlKT193STTVZ1gIAUBJInkEGXt9IbH3eLM2KUFsMg,86
-surfalize/abbottfirestone.py,sha256=WgBThkVrSniKEjmGrb3A4JhcGrlf7hxBivD4T1KkZW8,8191
-surfalize/autocorrelation.py,sha256=xQq1R28OPpsRAPxJIoLSfbp2xOBXCwwrUs1HR02hv9o,5347
+surfalize/abbottfirestone.py,sha256=uY-q2YHE6EJkX57zHt-TahG7-atZmN7TutR3oV6TMII,8207
+surfalize/autocorrelation.py,sha256=9bjIJRQ9o-bfU838j_Ofgu8dawyhOiDN49IsreA_zXY,5409
 surfalize/batch.py,sha256=g54HO9F0KhLhvUbdk-inQhmz7NQYSpqx0ieK4BmZEPI,22952
-surfalize/calculations.cp39-win_amd64.pyd,sha256=SL4SiY2gCzdzh9eHZiRDdkx-zkByPYeREdWhABbML0k,197632
+surfalize/calculations.cp39-win_amd64.pyd,sha256=8P48ooV4cTSxb_U8gtKExgT7gnYyy0HFkCI4YdCo1CQ,197632
 surfalize/common.py,sha256=6sumiF-nCRVTpJcfBLCmMm0BSxmiKF6ge7VoWcQRwlM,8262
 surfalize/exceptions.py,sha256=WcN1FHbF6syi4iX0nykh6q0gcP_EWJg8ep_Ywzl805I,347
 surfalize/filter.py,sha256=loNqN2Fc37_6Mbbn7SdGwIdIv2bOp_OVcqOTePtcwvg,3315
 surfalize/profile.py,sha256=jSVYaLNh2xw5PlBvYOPF3onvuohW-w_g8CBDjOeaCCo,2353
-surfalize/surface.py,sha256=6i1AklNAzPE4111QzXEg4lpbzwWHUO8DMR-ASf6sPJE,72121
+surfalize/surface.py,sha256=RPZ7sSptLNstX_-6HWFuqx5Ht_GEj_vmXb03h3OMh2w,72609
 surfalize/utils.py,sha256=ospHWQvjuhUx5-_rKq7XqUSXvCoPGtnqy1ZHCFUoWMk,2535
-surfalize/file/__init__.py,sha256=uxBOLtSPVRgmSWXtP5PIngZVwf4zRTUl64e1CvT--_0,48
-surfalize/file/common.py,sha256=N_aO7XRTMI15jEW-JM52OSTxsTSoTjjxmHHJHGR0YQw,3137
-surfalize/file/loader.py,sha256=cF3oqN27BBnmVfsDAutMzsOjtZkO2Vjbvoibk1uuVss,1048
+surfalize/file/__init__.py,sha256=ljdp4kPBwJvL-4ZMJ3VKRvzph1ka5BkkDg__ZlKysR4,60
+surfalize/file/al3d.py,sha256=VCKcp-2fkBWK34iSVnnAQKNhVPgioBFnGVYgBhxfUQQ,2851
+surfalize/file/common.py,sha256=Wp3uWO3FagUAAqMtPCo38tvSZa_MQhyOo0JU__1u45s,4210
+surfalize/file/loader.py,sha256=0ztA-c0neNzxqIyTq-hMq9N0oGF5AT1_C45J0ifU2V8,1860
 surfalize/file/nms.py,sha256=wG05hfl_gn5p0V1S8czl3TYVP_lgHB8wNFbPT21b8Zc,893
-surfalize/file/opd.py,sha256=S152VHwD69qIN1AdyKOm31ACcdOvj5OXg66aq-h6gMI,2866
+surfalize/file/opd.py,sha256=rEFwnSFEPholvQmUN8PFmSBNAaf4DG1zQiNFF5PJusE,2880
 surfalize/file/plu.py,sha256=se2k79MylLdibXnI0yc6W1T2Jg2NacUIyvxKFFBV19A,1798
 surfalize/file/plux.py,sha256=Kz7GaTgSWsNGf-0p7d6CJlKKwvBZtRE_HAwuA_8sVuI,743
-surfalize/file/sur.py,sha256=JtgHmG0KN5FJVarD0yU_AAReORYRgolc5cFT9EBCwyc,3665
+surfalize/file/sdf.py,sha256=hr5-n41S_FKf__yuePF6LE568D-CP-xDgXA2sfQiQ8Q,1972
+surfalize/file/sur.py,sha256=vyi4jF8XVW66wPlnNAhYvPvKOLxTGn7ImVWglVjDgJE,6748
 surfalize/file/vk.py,sha256=ZaWCFG8axYkJxV_XUJGKvaWawhXNd_sYD3IjcwMV2l4,5472
 surfalize/file/xyz.py,sha256=FzWH0ZZBfcLmJR0qxLYv9-asZE_6_nVW5-qav46fwTw,931
 surfalize/file/zmg.py,sha256=5-McIRQ-uW1LFYLN-M0qQJEKi9KWNqloXDUbtgJzf_c,888
-surfalize-0.7.0.dist-info/LICENSE.txt,sha256=snaIag-8I8CpgZVWZmZngyUZ6ouqJQPPzYu2N9-47eE,35817
-surfalize-0.7.0.dist-info/METADATA,sha256=7AJG5_bjD4cIfVkqD2_TEItMkT2pp7wfyVgzQyybc9M,15249
-surfalize-0.7.0.dist-info/WHEEL,sha256=Z6c-bE0pUM47a70GvqO_SvH_XXU0lm62gEAKtoNJ08A,100
-surfalize-0.7.0.dist-info/top_level.txt,sha256=xMK3TzhcOr_HyLGTdu_YczNUZy6xJbxN8kROzTbeQMo,10
-surfalize-0.7.0.dist-info/RECORD,,
+surfalize-0.8.0.dist-info/LICENSE.txt,sha256=snaIag-8I8CpgZVWZmZngyUZ6ouqJQPPzYu2N9-47eE,35817
+surfalize-0.8.0.dist-info/METADATA,sha256=ay406A7ZJLwcowjxVgbGuGiqt1-ageYYayzgYgmrlKI,15589
+surfalize-0.8.0.dist-info/WHEEL,sha256=Z6c-bE0pUM47a70GvqO_SvH_XXU0lm62gEAKtoNJ08A,100
+surfalize-0.8.0.dist-info/top_level.txt,sha256=xMK3TzhcOr_HyLGTdu_YczNUZy6xJbxN8kROzTbeQMo,10
+surfalize-0.8.0.dist-info/RECORD,,
```

